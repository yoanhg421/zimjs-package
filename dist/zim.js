var Hr=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(Tt,kt)=>(typeof require<"u"?require:Tt)[kt]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});import"@danzen/createjs";var j=window||{},Ne=j.createjs,mt=j.zns,dt=j.zon==null?!0:j.zon,mn,Rn=dt?console.log.bind(console):function(){},Vn=" border:thin solid black; color: black",Fr=dt?console.log.bind(console,"%c Z ","background: #acd241;"+Vn):function(){},Jr=dt?console.log.bind(console,"%c Z ","background: #e472c4;"+Vn):function(){},Gr=dt?console.log.bind(console,"%c Z ","background: #50c4b7;"+Vn):function(){},Vr=dt?console.log.bind(console,"%c Z ","background: #fb4758;"+Vn):function(){},$e=dt?console.log.bind(console,"%c Z ","background: #ebcb35;"+Vn):function(){},Wr=dt?console.log.bind(console,"%c Z ","background: #f58e25;"+Vn):function(){},yr=dt?console.log.bind(console,"%c Z ","background: #eeeeee;"+Vn):function(){},xr=dt?console.log.bind(console,"%c Z ","background: #444444; border:thin solid black; color: white"):function(){};function gn(t){return Le("1"),document.getElementById(t)}function $r(t){if(Le("2"),document.getElementById(t))return document.getElementById(t).style;dt&&$e("zss(): id not found")}function zn(t,Tt,kt,Pt,It,At){if(Le("3"),n(Tt)&&Tt!=""||Tt=="_self")j.location.href=t;else{var Bt="";return kt&&(Bt+="width="+kt+","),Pt&&(Bt+="height="+Pt+","),It&&(Bt+="fullscreen=yes,"),At&&(Bt+="modal=yes,alwaysRaised=yes"),j.open(t,Tt,Bt)}}function _n(t){if(Le("4"),!n(t))return Number(String(t).replace(/[^\d.-]/g,""))}function n(t){return t==null}function jr(t){Le("5"),!n(t)&&(t.stopImmediatePropagation&&t.stopImmediatePropagation(),j.event&&(j.event.cancelBubble=!0))}function kr(){return Le("6"),j.zilK&&(j.removeEventListener("keydown",j.zilK),j.removeEventListener("wheel",j.zilW),j.removeEventListener("DOMMouseScroll",j.zilS)),j.zilK=function(t){t||(t=event),t.keyCode&&t.keyCode>=32&&t.keyCode<=40&&t.preventDefault()},j.zilW=function(t){t||(t=event),t.preventDefault()},j.zilS=j.zilW,j.addEventListener("keydown",j.zilK,{passive:!1}),j.addEventListener("wheel",j.zilW,{passive:!1}),j.addEventListener("DOMMouseScroll",j.zilS,{passive:!1}),[j.zilK,j.zilW,j.zilS]}function sr(t,Tt){Le("6.1");function kt(){var Pt=this;this.on=function(It,At){if(!(n(t)||n(It)||n(At)))for(var Bt=Pt.tags,Ft=0;Ft<Bt.length;Ft++)Bt[Ft].addEventListener(It,At)},this.off=function(It,At){if(!(n(t)||n(It)||n(At)))for(var Bt=Pt.tags,Ft=0;Ft<Bt.length;Ft++)Bt[Ft].removeEventListener(It,At)},Object.defineProperty(Pt,"tags",{get:function(){return n(t)?[]:typeof t=="string"||t instanceof String?(Tt&&Wr(t,document.querySelector(t)),Tt?[document.querySelector(t)]:document.querySelectorAll(t)):typeof t.innerHTML=="string"?[t]:[]},set:function(){}}),this.css=function(It,At){for(var Bt=Pt.tags,Ft=0;Ft<Bt.length;Ft++)if(arguments.length==1&&arguments[0].constructor==={}.constructor)for(var wt in It)Bt[Ft].style[wt]=It[wt];else{if(arguments.length==1)return Pt.tags[0].style[It];Bt[Ft].style[It]=At}},this.prop=function(It,At){if(!n(It)){for(var Bt=Pt.tags,Ft=[],wt=0;wt<Bt.length;wt++)if(n(At))if(It.constructor==={}.constructor)for(var Dt in It)Bt[wt][Dt]=It[Dt];else Ft.push(Bt[wt][It]);else Bt[wt][It]=At;if(n(At))return Ft}}}return new kt}function un(t){return t.length==1&&t[0]!=null&&t[0].constructor==={}.constructor}function lt(t,Tt,kt,Pt){var It=he&&(he.ZIMONON||Ur);if(un(Tt)){Le("7");var At=Tt[0],Bt;for(var Ft in At)(Bt=Ft.match(/^(.+)gColor$/))&&(At[Bt[1]+"ackgroundColor"]=At[Ft],delete At[Ft]);var wt=n(kt)?t.toString().split(/\n/,1)[0].match(/\((.*)\)/)[1].replace(/\s+/g,"").split(","):kt.replace(/\s+/g,"").split(","),Dt=[],We,e;for(We=0;We<wt.length;We++)e=wt[We].split("=")[0],wt[We]=e,Dt.push(At[e]);for(We in At)wt.indexOf(We)<0&&dt&&$e(t,"bad argument "+We);var r;return(r=Object.prototype.isPrototypeOf.call(t.prototype,Pt)?new(t.bind.apply(t,[null].concat(Dt))):t.apply(null,Dt))?(It&&!r.arguments&&(r.arguments=[At]),r):!0}else It&&Pt&&Tt&&n(Pt.arguments)&&(Pt.arguments=Array.prototype.slice.call(Tt))}function et(t){if(Le("7.5"),Le("17.6"),!n(t))return he.Pick.choose(t)}var zr=console.table&&dt?console.table.bind(console):function(){},ei=function(){for(var t=0;t<arguments.length;t++)if(!n(arguments[t]))return arguments[t]},he=function(t){t.chop=function(e,r,i,l,a,s){if(Le("7.8"),!n(e)){n(r)&&(r=3),n(i)&&(i=3),n(l)&&(l=!0),n(a)&&(a=0),n(s)&&(s=1),e.getBounds||(e=new t.Bitmap(e));var c=e.getBounds();n(c)&&$e("ZIM chop() - obj must have bounds");var d=c.width/r,C=c.height/i,T=a,h=[];return t.loop(i,function(w){t.loop(r,function(A){var y=new t.Bitmap(e,d+T*2,C+T*2,A*d-T,w*C-T,s);a!=0?(y.setBounds(T,T,d,C),y.regX=T,y.regY=T):y.setBounds(T,T,d,C),h.push(y)})}),l?new t.Tile(h,r,i,0,0,!0).sca(e.scaleX,e.scaleY):h}},t.shuffle=function(e,r){if(Le("8"),!n(e)){Array.isArray(e)||(e=Object.values(arguments));var i=e.length,l,a;if(i==0)return e;if(r){for(var s=t.copy(e);t.arraysEqual(s,e);)t.shuffle(e);return e}else{for(;--i;)l=Math.floor(Math.random()*(i+1)),a=e[i],e[i]=e[l],e[l]=a;return e}}},t.pluck=function(e,r){if(Le("9.26"),n(e)||e.length==0)return null;Array.isArray(e)||(e=Object.values(arguments));var i=Math.floor(Math.random()*e.length),l=e[i];return r&&e.splice(i,1),l},t.rand=function(e,r,i,l){if(Le("9"),n(e)&&n(r))return Math.random();(n(e)||isNaN(e))&&(e=0),(n(r)||isNaN(r))&&(r=0),(e%1!=0||r%1!=0)&&(i=!1),n(i)&&(i=!0),l&&Math.random()>.5&&(e*=-1,r*=-1),i&&(e>r?e++:r>e&&r++);var a;return e==0&&r==0?0:(r==0?a=Math.random()*e:a=Math.min(e,r)+Math.random()*(Math.max(e,r)-Math.min(e,r)),i?Math.floor(a):a)},t.seedRandom=function(e){return Le("9.01"),function(r,i,l,a,s,c,d,C,T){function h(S){var _,Y=S.length,B=this,b=0,X=B.i=B.j=0,V=B.S=[];for(Y||(S=[Y++]);a>b;)V[b]=b++;for(b=0;a>b;b++)V[b]=V[X=p&X+S[b%Y]+(_=V[b])],V[X]=_;(B.g=function(O){for(var Z,W=0,K=B.i,ne=B.j,F=B.S;O--;)Z=F[K=p&K+1],W=W*a+F[p&(F[K]=F[ne=p&ne+Z])+(F[ne]=Z)];return B.i=K,B.j=ne,W})(a)}function w(S,_){var Y,B=[],b=typeof S;if(_&&b=="object")for(Y in S)try{B.push(w(S[Y],_-1))}catch{+function(){}()}return B.length?B:b=="string"?S:S+"\0"}function A(S,_){for(var Y,B=S+"",b=0;b<B.length;)_[p&b]=p&(Y^=19*_[p&b])+B.charCodeAt(b++);return v(_)}function y(S){try{return P?v(P.randomBytes(a)):(r.crypto.getRandomValues(S=new Uint8Array(a)),v(S))}catch{return[+new Date,r,(S=r.navigator)&&S.plugins,r.screen,v(i)]}}function v(S){return String.fromCharCode.apply(0,S)}var P,x=l.pow(a,s),E=l.pow(2,c),k=2*E,p=a-1,m=l["seed"+T]=function(S,_,Y){var B=[];_=_==1?{entropy:!0}:_||{};var b=A(w(_.entropy?[S,v(i)]:S??y(),3),B),X=new h(B);return A(v(X.S),i),(_.pass||Y||function(V,O,Z){return Z?(l[T]=V,O):V})(function(){for(var V=X.g(s),O=x,Z=0;E>V;)V=(V+Z)*a,O*=a,Z=X.g(1);for(;V>=k;)V/=2,O/=2,Z>>>=1;return(V+Z)/O},b,"global"in _?_.global:this==l)};if(A(l[T](),i),d&&d.exports){d.exports=m;try{P=Hr("crypto")}catch{}}else C&&C.amd&&C(function(){return m})}(this,[],Math,256,6,52,typeof module=="object"&&module,typeof define=="function"&&define,"random"),t.randomO||(t.randomO=Math.random),n(e)?Math.random=t.randomO:Math.seedrandom(e),e},t.odds=function(e){return Le("9.1"),(n(e)||isNaN(e))&&(e=50),Math.random()<=e/100},t.rarity=function(e,r,i,l){if(Le("9.2"),n(e)||e.constructor!={}.constructor)return[];n(r)&&(r=!0),n(i)&&(i=!0),n(l)&&(l=!1);var a=[];return t.loop(e,function(s,c){var d=t.colors.indexOf(s);d!=-1&&(s=t.colorsHex[d]);var C;Array.isArray(c)?(+s==+s?s=new Number(s):s=new String(s),s._payload=c[1],s.dynamicPayload=l,Object.defineProperty(s,"payload",{get:function(){return!this.dynamicPayload&&this._lastPayload!=null?this._lastPayload:(this._lastPayload=t.Pick.choose(this._payload),this._lastPayload)},set:function(T){this._lastPayload=null,this._payload=T}}),C=c[0],t.loop(C,function(){a.push(s)})):(C=c,t.loop(C,function(){+s==+s&&(s=+s),a.push(s)}))}),r&&t.shuffle(a),a},t.repeats=function(e,r){if(Le("9.25"),n(e)||!Array.isArray(e))return 0;var i={},l=0,a=0;return t.loop(e,function(s){i[s]!=null?(i[s]++,a++):i[s]=0,i[s]>l&&(l=i[s])}),r?a:l},t.series=function(){Le("13.61");var e,r;if(arguments.length==0)return function(){};arguments.length==1&&Array.isArray(arguments[0])?e=arguments[0]:arguments.length==1&&arguments[0].constructor=={}.constructor?(r=arguments[0],n(r.min)&&(r.min=0),n(r.max)&&(r.max=1),n(r.step)&&(r.step=1),e=[],t.loop(Math.floor(Math.abs(r.max-r.min)+r.step),function(x){e.push(x+r.min)},null,null,r.step),r=null):e=Array.prototype.slice.call(arguments);var i=0,l=1,a=1,s=0,c=0,d=!1,C=!1,T=!1,h=!1,w=!1,A,y,v=function(x,E){if(s&&c%s!=0)return c++,y;c++;var k=e.length,p;if((h||w)&&i%k==0&&t.shuffle(e),p=e[(k*10+i)%k],i==0&&(A=p),w&&i%k==0&&k>1)for(;p==y;)t.shuffle(e),p=e[(k*10+i)%k];return d?l>0&&i+l*a>=k?(l=-1,i=k-1-(i+a-(k-1))):l<0&&i+l*a<0?(l=1,i=a-i):i+=l*a:C?l>0&&i+l*a>=k?(l=-1,i=k-1-(i+a-(k-1))+a):l<0&&i+l*a<0?(l=1,i=a-i-a):i+=l*a:T?l>0&&i+l*a>=k?i=k-1:l<0&&i+l*a<0?i=0:i+=l*a:i+=l*a,y=p,t.isPick(p)?p.noPick&&E?p:t.Pick.choose(p):p},P=v.original=t.copy(e);return v.array=e,v.type="series",Object.defineProperty(v,"index",{get:function(){var x=e.length;return(x*10+i)%x},set:function(x){i=x,c=0}}),Object.defineProperty(v,"length",{get:function(){return e.length},set:function(){}}),v.jump=function(x){return i=x,v},v.reverse=function(x){return n(x)&&(x=!0),x?l=-1:l=1,i=e.length-1,v},v.bounce=function(x){n(x)&&(x=!0);var E=e.length;return i=(E*10+i)%E,d=x,v},v.flip=function(x){n(x)&&(x=!0);var E=e.length;return i=(E*10+i)%E,C=x,v},v.step=function(x){return n(x)&&(x=1),a=Math.floor(x),v},v.every=function(x){return n(x)&&(x=1),s=Math.abs(x),c=0,v},v.constrain=function(x){return n(x)&&(x=!0),T=x,v},v.random=function(x){return n(x)&&(x=!0),x||(e=P),h=x==!0,v},v.mix=function(x){return n(x)&&(x=!0),x||(e=P),w=x==!0,v},v.shuffle=function(x){return n(x)&&(x=!0),x?t.shuffle(e):e=P,v},v},t.makeSeries=function(e){if(Le("13.6"),n(e))return function(){};var r=0,i=function(){return e[r++%e.length]};return i.array=e,i},t.loop=function(e,r,i,l,a,s,c,d){var C="obj, call, reverse, interval, step, start, end, immediate",T;if(T=lt(t.loop,arguments,C))return T;if(Le("9.5"),n(e)||n(r))return;n(i)&&(i=!1),n(l)&&(l=0),(n(a)||a<=0)&&(a=1),n(d)&&(d=!0),e.constructor===Number&&(e=Number(e)),e.constructor===String&&(e=String(e));var h=typeof e=="number"?"number":e.constructor===Array?"array":e.constructor==={}.constructor?"object":typeof e=="string"?"string":e instanceof NodeList?"nodelist":e instanceof HTMLCollection?"htmlcollection":e.type&&e.type=="Dictionary"?"Dictionary":"invalid";if(h=="invalid")return;var w,A,y,v;if(h=="number"||h=="string"||h=="array"||h=="nodelist"||h=="htmlcollection"||h=="Dictionary"){if(h=="Dictionary"){var P=t.copy(e.values);e=t.copy(e.objects)}if(w=h=="number"?e:e.length,A=E(w-1),A==0)return;if(i)if(l===0){for(y=s;y>=c;y-=a)if(h=="number"?v=r(y,A,s,c,e):h=="array"||h=="string"?v=r(e[y],y,A,s,c,e):h=="Dictionary"?v=r(e[y],P[y],y,A,s,c,e):v=r(e.item(y),y,A,s,c,e),typeof v<"u"&&v!="next")return v}else t.interval(l,function(k){if(y=k.count,d||y--,a&&(y*=a),y=s-y,h=="number"?v=r(y,A,s,c,e):h=="array"||h=="string"?v=r(e[y],y,A,s,c,e):h=="Dictionary"?v=r(e[y],P[y],y,A,s,c,e):v=r(e.item(y),y,A,s,c,e),v=="next")k.next();else if(typeof v<"u")return k.clear(),v},A,d);else if(l===0){for(y=s;y<=c;y+=a)if(h=="number"?v=r(y,A,s,c,e):h=="array"||h=="string"?v=r(e[y],y,A,s,c,e):h=="Dictionary"?v=r(e[y],P[y],y,A,s,c,e):v=r(e.item(y),y,A,s,c,e),typeof v<"u"&&v!="next")return v}else t.interval(l,function(k){if(y=k.count,d||y--,a&&(y*=a),h=="number"?v=r(y,A,s,c,e,k):h=="array"||h=="string"?v=r(e[y],y,A,s,c,e,k):h=="Dictionary"?v=r(e[y],P[y],y,A,s,c,e):v=r(e.item(y),y,A,s,c,e,k),v=="next")k.next();else if(typeof v<"u")return k.clear(),v},A,d);return!0}else if(h=="object"){w=0;var x=[];for(y in e)w++,x.push(y);if(A=E(w-1),A==0)return;if(i)if(l===0){for(y=s;y>=c;y-=a)if(v=r(x[y],e[x[y]],y,A,s,c,e),typeof v<"u")return v}else t.interval(l,function(k){if(y=k.count,d||y--,a&&(y*=a),y=s-y,v=r(x[y],e[x[y]],y,A,s,c,e),v=="next")k.next();else if(typeof v<"u")return k.clear(),v},A,d);else if(l===0){for(y=s;y<=c;y+=a)if(v=r(x[y],e[x[y]],y,A,s,c,e),typeof v<"u")return v}else t.interval(l,function(k){if(y=k.count,d||y--,a&&(y*=a),v=r(x[y],e[x[y]],y,A,s,c,e),v=="next")k.next();else if(typeof v<"u")return k.clear(),v},A,d);return!0}function E(k){return n(s)&&(s=i?k:0),n(c)&&(c=i?0:k),i&&c>s||!i&&s>c||(s<0&&c)<0||s>k&&c>k?0:(s=Math.max(0,Math.min(s,k)),c=Math.max(0,Math.min(c,k)),Math.floor((i?s-c:c-s)/a)+1)}};function Tt(e,r,i,l,a){t.timeCheck||(Le("9.99"),t.timeCheck=!0);var s=n(j.TIME)?n(t.TIME)?"seconds":t.TIME:j.TIME;return s&&s.toLowerCase&&(s=s.toLowerCase()),s!="milliseconds"&&s!="ms"&&(s="seconds"),r&&r.toLowerCase&&(r=r.toLowerCase()),(r=="ms"||r=="milliseconds"||r=="seconds"||r=="s")&&(s=r),n(e)?s.charAt(0):(s=="ms"&&(s="milliseconds"),s=="s"&&(s="seconds"),s=s.charAt(0),a||kt(e,s,i,l),s)}function kt(e,r,i,l){n(i)&&(i=10),n(l)&&(l=9),!(!t.TIMECHECK&&!j.TIMECHECK)&&(r!="m"&&e>i||r=="m"&&e<l)&&dt&&$e("TIME - warning: time is in "+(r=="m"?"milliseconds":"seconds")+" ("+e+")")}if(t.timeout=function(e,r,i,l){var a="time, call, pauseOnBlur, timeUnit",s;if(s=lt(t.timeout,arguments,a,this))return s;if(Le("9.7"),!n(r)&&typeof r=="function"){var c=t.interval(e,r,1,!1,i,l);return c.type="timeoutObj",c}},t.interval=function(e,r,i,l,a,s){var c="time, call, total, immediate, pauseOnBlur, timeUnit",d;if(d=lt(t.interval,arguments,c,this))return d;if(Le("9.8"),n(r)||typeof r!="function")return;var C=Tt(e,s);if(n(e)&&(e=C=="s"?1:1e3),n(l)&&(l=!1),!n(i)&&(isNaN(i)||i<=0))return;n(i)&&(i=-1);var T={count:0,total:i,paused:!1,time:e,active:!0,timeUnit:s};a&&(n(t.blurCheck)&&t.setBlurDetect(),t.pauseOnBlur.push(T));function h(){T.startTime=Date.now(),T.interval=t.Pick.choose(T.time),T.id=setTimeout(function(){T.paused||T.active&&(T.count++,r(T),h(),w())},T.interval*(C=="s"?1e3:1))}l&&setTimeout(function(){r(T),w()},10);function w(){i!=-1&&T.count>=(l?T.total-1:T.total)&&T.clear()}var A;return T.type="intervalOjbect",T.pause=function(y,v,P){n(y)&&(y=!0),y?(clearTimeout(A),clearTimeout(T.id),cancelAnimationFrame(T.rid),T.pauseTimeLeft=T.interval-(Date.now()-T.startTime)/(C=="s"?1e3:1)):(T.paused||T.pause(!0),A=setTimeout(function(){T.count++,r(T),h(),w()},v?0:(P?T.interval:T.pauseTimeLeft)*(C=="s"?1e3:1)),T.pauseTimeLeft=null),T.paused=y},T.next=function(){T.count++,r(T),w()},T.clear=function(){T.active=!1,clearTimeout(A),cancelAnimationFrame(T.rid),clearTimeout(T.id);var y=T.count;for(var v in T)delete T[v];T.active=!1,T.count=y,T.pause=function(){},T.clear=function(){}},h(),T},t.async=function(e,r,i,l,a){if(Le("29"),!n(e)){var s=document.createElement("script"),c=Tt(l);n(l)&&(l=c=="s"?2:2e3);var d;r?(i?d=i:d=r.toString().split(/\n/,1)[0].match(/^function\s?([^\s(]*)/)[1],t.asyncList||(t.asyncList={}),t.asyncList[d]||(t.asyncList[d]=[]),t.asyncList[d].push(r),t.async[d]=function(){var C=s,T=!1,h=setTimeout(function(){T=a,typeof r=="function"&&r("asyncError",a?"cancelled":"timeout")},l*(c=="s"?1e3:1));return function(w){clearTimeout(h),t.asyncList[d]&&(r=t.asyncList[d].shift()),typeof r=="function"&&!T&&r(w),C&&C.parentNode.removeChild(C),C=null}}()):(t.async.z_s&&t.async.z_s.parentNode&&t.async.z_s.parentNode.removeChild(t.async.z_s),t.async.z_s=s),e.match(/\?/)||(e+="?"),s.setAttribute("src",e+"&r="+Math.random()),document.getElementsByTagName("head")[0].appendChild(s)}},t.couple=function(e){if(Le("29.2"),!t.isJSON(e))return e;var r=JSON.parse(e),i={};for(var l in r){var a=r[l];for(var s in a)i[l+"_"+s]=a[s]}return JSON.stringify(i)},t.decouple=function(e){if(Le("29.3"),!t.isJSON(e))return e;var r=JSON.parse(e),i={};for(var l in r){var a=l.split("_",2);if(a.length!=2)return e;i[a[0]]||(i[a[0]]={}),i[a[0]][a[1]]=r[l]}return JSON.stringify(i)},t.convertColor=function(e,r,i){if(t.convertColorCheck||(Le("27.5"),t.convertColorCheck=!0),n(r)&&(r="hex"),n(e)||!e.toLowerCase)return;e=et(e),e=e.toLowerCase(),r=r.toLowerCase();var l=["black","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgrey","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgrey","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],a=["000000","f0f8ff","faebd7","00ffff","7fffd4","f0ffff","f5f5dc","ffe4c4","ffebcd","0000ff","8a2be2","a52a2a","deb887","5f9ea0","7fff00","d2691e","ff7f50","6495ed","fff8dc","dc143c","00ffff","00008b","008b8b","b8860b","a9a9a9","a9a9a9","006400","bdb76b","8b008b","556b2f","ff8c00","9932cc","8b0000","e9967a","8fbc8f","483d8b","2f4f4f","2f4f4f","00ced1","9400d3","ff1493","00bfff","696969","696969","1e90ff","b22222","fffaf0","228b22","ff00ff","dcdcdc","f8f8ff","ffd700","daa520","808080","808080","008000","adff2f","f0fff0","ff69b4","cd5c5c","4b0082","fffff0","f0e68c","e6e6fa","fff0f5","7cfc00","fffacd","add8e6","f08080","e0ffff","fafad2","d3d3d3","d3d3d3","90ee90","ffb6c1","ffa07a","20b2aa","87cefa","778899","778899","b0c4de","ffffe0","00ff00","32cd32","faf0e6","ff00ff","800000","66cdaa","0000cd","ba55d3","9370db","3cb371","7b68ee","00fa9a","48d1cc","c71585","191970","f5fffa","ffe4e1","ffe4b5","ffdead","000080","fdf5e6","808000","6b8e23","ffa500","ff4500","da70d6","eee8aa","98fb98","afeeee","db7093","ffefd5","ffdab9","cd853f","ffc0cb","dda0dd","b0e0e6","800080","663399","ff0000","bc8f8f","4169e1","8b4513","fa8072","f4a460","2e8b57","fff5ee","a0522d","c0c0c0","87ceeb","6a5acd","708090","708090","fffafa","00ff7f","4682b4","d2b48c","008080","d8bfd8","ff6347","40e0d0","ee82ee","f5deb3","ffffff","f5f5f5","ffff00","9acd32"];if(r=="zim"){var s=t.colorsHex.indexOf(e);return s<0?e:t.colors[t.colorsHex.indexOf(e)]}r=="hsv"&&r=="hsl";var c,d;if(c=e.match(/rgba\((.*)\)/)){d=c[1].split(",");var C=d.pop();if(n(i)&&(i=C),r=="array")return d.push(C),d;if(e="rgb("+d.join(",")+")",r=="rgb")return e;if(r=="hsl")return w(d[0],d[1],d[2])}function T(k){var p=Number(k).toString(16);return p.length<2&&(p="0"+p),p}function h(k,p,m,S,_){return(_-S)*(k-p)/(m-p)+S}function w(k,p,m){k/=255,p/=255,m/=255;let S=Math.max(k,p,m),_=S-Math.min(k,p,m),Y=_?S===k?(p-m)/_:S===p?2+(m-k)/_:4+(k-p)/_:0;return[60*Y<0?60*Y+360:60*Y,100*(_?S<=.5?_/(2*S-_):_/(2-(2*S-_)):0),100*(2*S-_)/2]}function A(k){var p=k.split(","),m=T(p[0]),S=T(p[1]),_=T(p[2]),Y=n(Y)?"":T(Math.round(Number(p[3])*255));return[m,S,_,Y]}n(i)&&(i=1);var y,v,P;if(c=e.match(/rgb\((.*)\)/))return r=="rgba"?"rgba("+c[1]+","+i+")":r=="hex"?(y=i!=1?","+i:"",v=A(c[1]+y),"#"+v[0]+v[1]+v[2]+v[3]):r=="hexnumber"?(y=i!=1?","+i:0,v=A(c[1]+y),parseInt(v[0]+""+v[1]+v[2],16)):r=="string"?(e=A(c[1]).join("").toLowerCase(),P=a.indexOf(e),P==-1?"#"+e:l[P]):r=="array"?(y=i!=1?","+i:0,A(c[1]+y)):r=="hsl"?(d=c[1].split(","),w(d[0],d[1],d[2])):e;function x(k){var p;return/^#([A-Fa-f0-9]{3}){1,2}$/.test(k)?(p=k.substring(1).split(""),p.length==3&&(p=[p[0],p[0],p[1],p[1],p[2],p[2]]),p="0x"+p.join(""),r=="rgb"?"rgb("+[p>>16&255,p>>8&255,p&255]+")":r=="array"?[p>>16&255,p>>8&255,p&255,i]:"rgba("+[p>>16&255,p>>8&255,p&255].join(",")+","+i+")"):/^#([A-Fa-f0-9]{4}){1,2}$/.test(k)?(p=k.substring(1).split(""),p.length==8&&(i=p.slice(-2).join(""),p=p.slice(0,6)),p.length==4&&(i=p[3]+""+p[3],p=[p[0],p[0],p[1],p[1],p[2],p[2]]),i=parseInt(i,16)/255,p="0x"+p.join(""),r=="rgb"?"rgb("+[p>>16&255,p>>8&255,p&255]+")":"rgba("+[p>>16&255,p>>8&255,p&255].join(",")+","+i+")"):r=="rgb"?"rgb(0,0,0)":"rgba(0,0,0,1)"}if(r=="hsl")return t.convertColor(t.convertColor(e,"rgb"),"hsl");if(r=="array"||r=="rgb"||r=="rgba")return e.charAt(0)=="#"?x(e):x(t.convertColor(e));if(r=="hex"){if(e.charAt(0)=="#")if(i!=1)if(y=T(Math.round(i*255)),e.length==4||e.length==5){var E=e.split("");return E[1]=E[1]+""+E[1],E[2]=E[2]+""+E[2],E[3]=E[3]+""+E[3],E[4]=y,E.join("")}else return e.length==9?e.substring(0,l.length-2)+y:e+y;else return e}else if(r=="hexnumber"){if(e.charAt(0)=="#")return parseInt(e.replace(/^#/,""),16)}else e.charAt(0)=="#"&&(e=e.replace("#",""),e.length==3&&(e=e.charAt(0)+e.charAt(0)+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2)));return r=="string"?(P=a.indexOf(e),P==-1?"#"+e:l[P]):r=="hexnumber"?parseInt(a[l.indexOf(e.toLowerCase())!=-1?l.indexOf(e):0],16):(y=i!=1?T(Math.round(i*255)):"","#"+a[l.indexOf(e.toLowerCase())!=-1?l.indexOf(e):0]+y)},t.colorRange=function(e,r,i){t.colorRangeCheck||(Le("27.6"),t.colorRangeCheck=!0),n(i)&&(i=.5),i=Math.max(0,Math.min(1,i)),n(e)&&(e="white"),n(r)&&(r="black");var l=e,a=r,s=t.convertColor(e,"rgb"),c=t.convertColor(r,"rgb");e=s.substring(4,s.length-1).split(","),r=c.substring(4,c.length-1).split(",");var d,C="#",T;if(i==0)C=l;else if(i==1)C=a;else for(var h=0;h<e.length;h++)d=r[h]-e[h],T=Math.floor(parseInt(e[h],10)+d*i).toString(16),T.length<2&&(T="0"+T),C+=T;return C},t.lighten=function(e,r){return t.lightenCheck||(Le("27.65"),t.lightenCheck=!0),n(r)&&(r=.5),r>=0?t.colorRange(String(e),"#FFFFFF",r):t.colorRange(String(e),"#000000",-r)},t.darken=function(e,r){return n(r)&&(r=.5),t.darkenCheck||(Le("27.66"),t.darkenCheck=!0),r>=0?t.colorRange(String(e),"#000000",r):t.colorRange(String(e),"#ffffff",-r)},t.toColor=function(e,r,i){return t.toColorCheck||(Le("27.67"),t.toColorCheck=!0),n(i)&&(i=.5),t.colorRange(String(e),r,i)},t.toAlpha=function(e,r){return t.toAlphaCheck||(Le("27.68"),t.toAlphaCheck=!0),n(r)&&(r=.5),t.convertColor(String(e),"rgba",r)},t.toBW=function(e){if(e.indexOf("#")===0&&(e=e.slice(1)),e.length===3&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),e.length!==6)return $e("ZIM toBW() - needs hex input"),e;var r=parseInt(e.slice(0,2),16),i=parseInt(e.slice(2,4),16),l=parseInt(e.slice(4,6),16);return r*.299+i*.587+l*.114>186?"#000000":"#FFFFFF"},t.invertColor=function(e){if(t.invertColorCheck||(Le("27.86"),t.invertColorCheck=!0),e.indexOf("#")===0&&(e=e.slice(1)),e.length===3&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),e.length!==6)return $e("ZIM invertColor() - needs hex input"),e;var r=parseInt(e.slice(0,2),16),i=parseInt(e.slice(2,4),16),l=parseInt(e.slice(4,6),16);r=(255-r).toString(16),i=(255-i).toString(16),l=(255-l).toString(16);function a(s,c){c=c||2;var d=new Array(c).join("0");return(d+s).slice(-c)}return"#"+a(r)+a(i)+a(l)},t.zimEase=function(e,r,i,l,a){Le("27.69");var s=!1;n(a)&&(a=!0);var c,d,C,T,h,w,A,y,v,P,x,E,k,p,m,S,_,Y;if(e){if(Array.isArray(e[1])){s=!0,Y=e[1],e=e[0];var B=0,b=Y[0],X=Y[1],V=Y[2],O=Y[3],Z=1,W=5*(b-B),K=10*(X-B)-4*W,ne=10*(V-B)+30*(b-X),F=5*(O+B)-20*(V+b)+30*X,D=Z-B-F-ne-K-W}c=0,d=e[0],C=e[1],T=e[2],h=e[3],w=1,A=5*(d-c),y=10*(C-c)-4*A,v=10*(T-c)+30*(d-C),P=5*(h+c)-20*(T+d)+30*C,x=w-c-P-v-y-A}else r?(x=r[0],P=r[1],v=r[2],y=r[3],A=r[4],d=A/5,C=(y+4*A)/10,T=(v+6*A+3*y)/10,h=(P+4*A+3*y+2*v)/5):(x=0,P=0,v=0,y=0,A=1);return i?(S=function(){return t.zimEase(null,[x,P,v,y,A],!0)},_={reverse:S,points:[d,C,T,h],polynomials:[x,P,v,y,A]},_.noPick=function(u){if(a){if(u<.025)return 0;if(u>.975)return 1}return u<.5?(u*=2,E=u*100,k=100,p=(E/=k)*E,m=p*E,(x*m*p+P*p*p+v*m+y*p+A*E)/2):(u=1-(u-.5)*2,E=u*100,k=100,p=(E/=k)*E,m=p*E,1-(x*m*p+P*p*p+v*m+y*p+A*E)/2)}):s?(S=function(){return dt&&$e("zimEase - multi array points cannot be reversed"),t.zimEase(null,[x,P,v,y,A])},_={reverse:S,points:[[d,C,T,h],[b,X,V,O]],polynomials:[[x,P,v,y,A],[D,F,ne,K,W]]},_.noPick=function(u){if(a){if(u<.025)return 0;if(u>.975)return 1}return u<.5?(u*=2,E=u*100,k=100,p=(E/=k)*E,m=p*E,(x*m*p+P*p*p+v*m+y*p+A*E)/2):(u=(u-.5)*2,E=u*100,k=100,p=(E/=k)*E,m=p*E,.5+(D*m*p+F*p*p+ne*m+K*p+W*E)/2)}):(S=function(){return t.zimEase(null,[x,P,v,y,A],null,!0)},_={reverse:S,points:[d,C,T,h],polynomials:[x,P,v,y,A]},l?_.noPick=function(u){if(a){if(u<.025)return 0;if(u>.975)return 1}return E=100-u*100,k=100,p=(E/=k)*E,m=p*E,1-(x*m*p+P*p*p+v*m+y*p+A*E)}:_.noPick=function(u){if(a){if(u<.025)return 0;if(u>.975)return 1}return E=u*100,k=100,p=(E/=k)*E,m=p*E,x*m*p+P*p*p+v*m+y*p+A*E}),_.noPick.reverse=S,_},t.spline=function(e,r,i,l,a){Le("27.695"),n(e)&&(e=[]),n(r)&&(r=1),n(i)&&(i=!1),n(a)&&(a=i);var s;function c(O,Z){if(!Array.isArray(O[0]))for(s=0;s<O.length;s++)O[s]=[O[s].x,O[s].y];if(Z){var W=O[O.length-1],K=O[O.length-2],ne=O[0],F=O[1];O.unshift(W),O.unshift(K),O.push(ne),O.push(F)}var D=[];for(s=0;s<O.length;s++)D.push(O[s][0],O[s][1]);return D}e=c(e,i);var d=e.length,C=d-4,T=i?e[2]:e[0],h=i?e[3]:e[1],w="M"+[T,h];l&&l.mt(T,h);var A=i?2:0,y=i?d-4:d-2,v=2;for(s=A;s<y;s+=v){var P=s?e[s-2]:e[0],x=s?e[s-1]:e[1],E=e[s+0],k=e[s+1],p=e[s+2],m=e[s+3],S=s!==C?e[s+4]:p,_=s!==C?e[s+5]:m,Y=E+(p-P)/6*r,B=k+(m-x)/6*r,b=p-(S-E)/6*r,X=m-(_-k)/6*r;w+="C"+[Y,B,b,X,p,m],l&&l.bt(Y,B,b,X,p,m)}if(a){var V=w.split("C");V.pop(),w=V.join("C")}return w},t.pointAlongCurve=function(e,r,i,l){if(Le("27.7"),!(!e||!e[0]||!e[1]||!e[2]||!e[3])){n(l)&&(l=!1);var a=new t.Bezier(e[0],e[1],e[2],e[3]),s,c,d,C,T,h;if(l?(s=a.mx(r),c=a.my(r)):(s=a.x(r),c=a.y(r)),i){var w=r-.05,A=r+.05;w<0&&(w=0),A>1&&(A=1),l?(d=a.mx(w),C=a.my(w),T=a.mx(A),h=a.my(A)):(d=a.x(w),C=a.y(w),T=a.x(A),h=a.y(A));var y=t.angle(d,C,T,h);return{x:s,y:c,angle:y}}return{x:s,y:c}}},t.distanceAlongCurve=function(e){Le("27.8");var r=t.dist(e[0],e[3]),i=t.dist(e[0],e[1])+t.dist(e[1],e[2])+t.dist(e[2],e[3]);return(r+i)/2},t.closestPointAlongCurve=function(e,r,i,l,a){Le("27.9");var s=1e7,c,d=0,C=0;return n(i)&&(i=10),t.loop(r,function(T,h){var w=new t.Bezier(T[0],T[1],T[2],T[3]);t.loop(i,function(A,y){var v={x:w.x(A/y),y:w.y(A/y)},P=t.dist(e,v);P<s&&(s=P,c=v,d=h,C=A)})}),a?(d*i+C)/(r.length*i)*100:l?c:d},t.transformPoints=function(e,r,i,l,a){if(Le("27.95"),!(n(e)||!Array.isArray(e))){n(l)&&(l=0),n(a)&&(a=0),e=t.copy(e);var s=l,c=a;r=="rotation"&&(l!=0&&(e=t.transformPoints(e,"x",-s)),a!=0&&(e=t.transformPoints(e,"y",-c)));for(var d,C=0;C<e.length;C++)if(d=e[C],!!Array.isArray(d)){if(r=="x")d[0]+=i;else if(r=="y")d[1]+=i;else if(r=="scaleX")d[0]=(d[0]-l)*i+l,d[4]=d[4]*i,d[6]=d[6]*i;else if(r=="scaleY")d[1]=(d[1]-a)*i+a,d[5]=d[5]*i,d[7]=d[7]*i;else if(r=="scale")d[0]=(d[0]-l)*i+l,d[4]=d[4]*i,d[6]=d[6]*i,d[1]=(d[1]-a)*i+a,d[5]=d[5]*i,d[7]=d[7]*i;else if(r=="rotation"){var T=i*Math.PI/180,h=d[0],w=d[1];d[0]=h*Math.cos(T)-w*Math.sin(T),d[1]=w*Math.cos(T)+h*Math.sin(T),h=d[4],w=d[5],d[4]=h*Math.cos(T)-w*Math.sin(T),d[5]=w*Math.cos(T)+h*Math.sin(T),h=d[6],w=d[7],d[6]=h*Math.cos(T)-w*Math.sin(T),d[7]=w*Math.cos(T)+h*Math.sin(T)}}return r=="rotation"&&(l!=0&&(e=t.transformPoints(e,"x",s)),a!=0&&(e=t.transformPoints(e,"y",c))),e}},t.trimPointEnds=function(e){Le("27.97"),e[0][4]=0,e[0][5]=0,e[0][8]="free",e[e.length-1][6]=0,e[e.length-1][7]=0,e[e.length-1][8]="free"},t.reversePoints=function(e){return Le("27.975"),e.reverse(),t.loop(e,function(r){var i=r[6];r[6]=r[4],r[4]=i;var l=r[7];r[7]=r[5],r[5]=l}),e},t.appendPoints=function(e,r,i){return Le("27.98"),n(e)&&n(r)?[]:n(e)?r:(n(r)||(e[e.length-1][6]=r[0][6],e[e.length-1][7]=r[0][7],i&&(e[e.length-1][8]=i),r.shift(),e=e.concat(r)),e)},t.prependPoints=function(e,r,i){return Le("27.985"),n(e)&&n(r)?[]:n(e)?r:(n(r)||(r[r.length-1][6]=e[0][6],r[r.length-1][7]=e[0][7],i&&(e[e.length-1][8]=i),e.shift(),e=r.concat(e)),e)},t.splitPoints=function(e,r,i){if(Le("27.99"),!n(e)&&(n(r)&&(r=Math.floor(e.length/2)),!(r<0||r>e.length-1))){n(i)&&(i=!0);var l=t.copy(e.slice(0,r+1)),a=t.copy(e.slice(r));return i&&(t.trimPointEnds(l),t.trimPointEnds(a)),[l,a]}},t.makeID=function(e,r,i){Le("13.5"),n(e)&&(e="mixed"),n(r)&&(r=5),n(i)&&(i="uppercase");var l,a=[2,3,4,5,6,7,8,9],s="abcdefghjkmnpqrstuvwxyz".split("");e.constructor===Array?l=e:e=="numbers"?l=a:e=="letters"?l=s:l=a.concat(s);for(var c="",d,C,T=0;T<r;T++)d=l[Math.floor(Math.random()*l.length)],C=Math.random(),i=="uppercase"||i=="mixed"&&C>.5?d.toUpperCase&&(d=d.toUpperCase()):d.toLowerCase&&(d=d.toLowerCase()),c+=String(d);return c},t.makeSyllable=function(e,r){Le("13.55");var i="bcdfghjklmnprstvwxz",l="aeiouaeiouaeiouy";n(e)&&(e=3),n(r)&&(r=t.rand()<.3);function a(d){var C=t.rand(d.length-1),T=d.substring(C,C+1);return T}var s="",c=r?l:i;return t.loop(e,function(){s+=a(c),c=c==l?i:l}),s},t.makePrimitive=function(e){Le("13.56");function r(i){return Array.isArray(i)?(t.loop(i,function(l){l=r(l)}),i):i.constructor==={}.constructor?(t.loop(i,function(l,a){i[l]=r(a)}),i):i instanceof String?String(i):i instanceof Number?Number(i):i instanceof Boolean?!!i:i}return r(e)},t.makeMath=function(){Le("13.565");for(var e=Object.getOwnPropertyNames(Math),r=0;r<e.length;r++)j[e[r]]=Math[e[r]]},t.swapProperties=function(e,r,i){if(Le("17.1"),n(r)||n(i)||n(r[e])||n(i[e]))return!1;var l=i[e];return i[e]=r[e],r[e]=l,!0},t.mobile=function(e){return Le("28"),!n(j.MOBILE)&&j.MOBILE!="default"?j.MOBILE:!n(t.MOBILE)&&t.MOBILE!="default"?t.MOBILE:(n(e)&&(e=!0),/ip(hone|od|ad)/i.test(navigator.userAgent)?"ios":/android|nexus/i.test(navigator.userAgent)?"android":/blackberry/i.test(navigator.userAgent)?"blackberry":/nokia|phone|mobile/i.test(navigator.userAgent)?"windows":/opera mini|webos/i.test(navigator.userAgent)?"other":e&&j.orientation!==void 0?/safari/i.test(navigator.userAgent)?"ios":!0:!1)},t.vee=function(e){return Le("28.5"),!n(e)&&(e.type=="Pick"||Array.isArray(e)||e.constructor=={}.constructor&&(!n(e.max)||!n(e.noPick))||typeof e=="function")},t.extend=function(e,r,i,l,a){var s="subclass, superclass, override, prefix, prototype",c;if(c=lt(t.extend,arguments,s))return c;if(n(e)||n(r)){dt&&e!=t.StageGL&&$e("zim.extend() - please supply a class and its superclass");return}n(l)&&(l="super"),n(i)&&(i=[]),Array.isArray(i)||(i=[i]),n(a)&&(a=!0);var d={};for(var C in e.prototype)Object.defineProperty(d,C,Object.getOwnPropertyDescriptor(e.prototype,C));function T(){this.constructor=e}T.prototype=r.prototype,e.prototype=new T;for(C in d)Object.defineProperty(e.prototype,C,Object.getOwnPropertyDescriptor(d,C));var h=e.prototype,w=Object.getPrototypeOf&&Object.getPrototypeOf(h)||h.__proto__;if(w){h[(l+="_")+"constructor"]=w.constructor;for(var A,y=0;y<i.length;y++)A=i[y],typeof w[A]=="function"&&(h[l+A]=w[A]);if(a)for(A in w)Object.prototype.hasOwnProperty.call(h,A)&&typeof w[A]=="function"&&(h[l+A]=w[A])}return e},t.copy=function(e,r,i){if(t.copyCheck||(Le("10"),t.copyCheck=!0),n(r)&&(r=!1),n(i)&&(i=!0),e==null||!(e instanceof Array||e.constructor=={}.constructor))return r&&e!=null&&e.clone&&e.type&&(e.type!="Container"&&e.type!="Stage"&&e.type!="StageGL"||i)?e.clone():e;if(e instanceof Array){for(var l=[],a=0;a<e.length;a++)l[a]=t.copy(e[a],r,i);return l}if(e.constructor=={}.constructor){var s={};for(var c in e){var d=t.copy(e[c],r,i);Object.prototype.hasOwnProperty.call(e,c)&&(s[c]=d)}return s}},t.merge=function(){t.mergeCheck||(Le("12"),t.mergeCheck=!0);var e={},r,i;for(r=0;r<arguments.length;r++)for(i in arguments[r])Object.prototype.hasOwnProperty.call(arguments[r],i)&&(e[i]=arguments[r][i]);return e},t.arraysEqual=function(e,r,i){if(Le("11"),n(e)||n(r)||(n(i)&&(i=!0),e.length!=r.length))return!1;for(var l=0;l<e.length;l++)if(e[l]instanceof Array&&r[l]instanceof Array){if(!t.arraysEqual(e[l],r[l],i))return!1}else{if(i&&e[l]!=r[l])return!1;if(!i)return t.arraysEqual(e.sort(),r.sort(),!0)}return!0},t.arrayMinMax=function(e){if(Le("11.2"),!Array.isArray(e))return{min:null,max:null};for(var r=e[0],i=e[0],l=e.length;l--;)r=e[l]<r?e[l]:r,i=e[l]>i?e[l]:i;return r=isNaN(r)?null:r,i=isNaN(i)?null:i,{min:r,max:i}},t.isEmpty=function(e){if(t.zimEmptyCheck||(Le("11.5"),t.zimEmptyCheck=!0),!n(e)){var r=0;for(var i in e){r++;break}return r==0}},t.isJSON=function(e){if(Le("11.6"),typeof e!="string")return!1;try{return JSON.parse(e),!0}catch{return!1}},t.isPick=function(e){if(t.zimPickCheck||(Le("11.7"),t.zimPickCheck=!0),!n(e))return Array.isArray(e)||e.constructor=={}.constructor&&(e.min!=null&&e.max!=null||e.noPick)||e.constructor===Function&&(e.array!=null||e()!=null)},t.zut=function(e){if(n(e)||typeof e=="object")return!0},t.decimals=function(e,r,i,l,a,s,c){if(t.zimDecimalCheck||(Le("13"),t.zimDecimalCheck=!0),n(e))return 0;n(r)&&(r=1),n(i)&&(i=0),n(l)&&(l=1),n(a)&&(a=!0),n(s)&&(s=!1);var d=Math.round(e*Math.pow(10,r))/Math.pow(10,r);if(s){var C=d-Math.floor(d);d=t.decimals(Math.floor(d)+C*60/100,2)}var T=t.sign(d),h,w,A;if(i>0)for(h=String(d).indexOf("."),w=String(d).length,h<0&&(h=w++,d+="."),A=0;A<i-(w-h-1);A++)d+="0";if(l>1){T==-1&&(d=d.substr(1,d.length-1)),h=String(d).indexOf("."),w=String(d).length;var y=h<0?w:h;for(A=0;A<l-y;A++)d="0"+d;T==-1&&(d="-"+d)}return l==0&&(d=d.toString().replace(/^0\./,".")),i+l>0&&!a&&Number(d)==0&&(d=0),s&&(d=String(d).replace(".",":")),t.zut(c)?d:null},t.countDecimals=function(e){return t.zimCountDecimalsCheck||(Le("13.05"),t.zimCountDecimalsCheck=!0),e%1?e.toString().split(".")[1].length:0},t.sign=function(e){return t.zimSignCheck||(Le("13.1"),t.zimSignCheck=!0),e?e<0?-1:1:0},t.constrain=function(e,r,i,l){if(Le("13.2"),!n(e)){if(n(r)&&(r=0),n(i)&&(i=Number.MAX_VALUE),i<r){var a=r;i=r,r=a}return n(l)&&(l=!1),l&&e<0?Math.max(-i,Math.min(e,-r)):Math.max(r,Math.min(e,i))}},t.dist=function(e,r,i,l){if(t.zimDistCheck||(Le("13.3"),t.zimDistCheck=!0),!(n(e)||n(r)))return!n(e.x)&&!n(r.x)?(l=r.y,i=r.x,r=e.y,e=e.x):(n(i)&&(i=0),n(l)&&(l=0)),Math.sqrt(Math.pow(i-e,2)+Math.pow(l-r,2))},t.rectIntersect=function(e,r,i){return t.zimRectIntersectCheck||(Le("13.32"),t.zimRectIntersectCheck=!0),n(i)&&(i=0),!(e.x>=r.x+r.width+i||e.x+e.width+i<=r.x||e.y>=r.y+r.height+i||e.y+e.height+i<=r.y)},t.boundsAroundPoints=function(e){t.zimBoundsAroundPointsCheck||(Le("13.34"),t.zimBoundsAroundPointsCheck=!0);for(var r=1e4,i=1e4,l=-1e4,a=-1e4,s=0;s<e.length;s++){var c=e[s];c.x<r&&(r=c.x),c.x>l&&(l=c.x),c.y<i&&(i=c.y),c.y>a&&(a=c.y)}return{x:r,y:i,width:l-r,height:a-i}},t.angle=function(e,r,i,l){if(t.angleCheck||(Le("13.4"),t.angleCheck=!0),!(n(e)||n(r)))return n(i)&&(i=e,e=0),n(l)&&(l=r,r=0),(Math.atan2(l-r,i-e)*180/Math.PI+360)%360},t.TAU=Math.PI*2,t.DEG=180/Math.PI,t.RAD=Math.PI/180,t.PHI=Math.pow(5,.5)*.5+.5,t.smoothStep=function(e,r,i){Le("13.7");var l=t.constrain((e-r)/(i-r),0,1);return l*l*l*(l*(l*6-15)+10)},t.unicodeToUTF=function(e){if(Le("13.75"),!!e){e!=" "&&(e=e.replace(/^\s+/g,""));var r,i="",l="";return r=e.charCodeAt(0),i=r,l=e.charCodeAt(1),l>=56320&&l<=57343&&(r=(i-55296)*1024+(l-56320)+65536),i=i.toString(16),l=l.toString(16),r=r.toString(16),"\\u"+i+"\\u"+l}},t.capitalizeFirst=function(e){return Le("13.78"),e.charAt(0).toUpperCase()+e.slice(1)},t.Ajax=function(e,r,i,l){Le("13.8");var a=new XMLHttpRequest;this.master=e,this.couple=r,this.lock=i,this.unique=l;var s=this;this.get=function(c,d){var C=n(s.master)?"":"&master="+encodeURI(e),T=n(s.lock)?"":"&lock="+encodeURI(i),h=s.unique?"&unique=true":"";a.open("GET",c+C+T+h,!0),a.onload=function(){a.status==200?d(t.isJSON(a.responseText)?JSON.parse(a.responseText):a.responseText):d(null,"Error: "+a.status)},a.send()},this.post=function(c,d,C,T,h){var w="url, data, command, extra, callback",A;if(A=lt(s.post,arguments,w))return A;if(!n(c)){a.open("POST",c,!0),a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.onload=function(){var E=a.responseText;t.isJSON(E)&&(s.couple&&(E=t.decouple(E)),E=JSON.parse(E)),h(E)},t.isJSON(d)||(d=JSON.stringify(d)),s.couple&&(d=t.couple(d));var y=n(s.master)?"":"&master="+encodeURIComponent(s.master),v=n(s.lock)?"":"&lock="+encodeURIComponent(s.lock),P=n(C)?"":"&command="+encodeURIComponent(C),x=n(T)?"":"&extra="+encodeURIComponent(T);a.send("data="+encodeURIComponent(d)+y+v+P+x)}},this.put=function(c,d,C){a.open("PUT",c,!0),a.setRequestHeader("Content-type","application/json"),a.onload=function(){C(t.isJSON(a.responseText)?JSON.parse(a.responseText):s.http.responseText)},a.send(JSON.stringify(d))}},t.Noise=function(e){"use strict";Le("13.9"),n(e)&&(e=Math.random()*1e6);var r=e;this.seed=e;var i=this,l={};l.NORM_2D=1/47,l.NORM_3D=1/103,l.NORM_4D=1/30,l.SQUISH_2D=(Math.sqrt(2+1)-1)/2,l.SQUISH_3D=(Math.sqrt(3+1)-1)/3,l.SQUISH_4D=(Math.sqrt(4+1)-1)/4,l.STRETCH_2D=(1/Math.sqrt(2+1)-1)/2,l.STRETCH_3D=(1/Math.sqrt(3+1)-1)/3,l.STRETCH_4D=(1/Math.sqrt(4+1)-1)/4,l.base2D=[[1,1,0,1,0,1,0,0,0],[1,1,0,1,0,1,2,1,1]],l.base3D=[[0,0,0,0,1,1,0,0,1,0,1,0,1,0,0,1],[2,1,1,0,2,1,0,1,2,0,1,1,3,1,1,1],[1,1,0,0,1,0,1,0,1,0,0,1,2,1,1,0,2,1,0,1,2,0,1,1]],l.base4D=[[0,0,0,0,0,1,1,0,0,0,1,0,1,0,0,1,0,0,1,0,1,0,0,0,1],[3,1,1,1,0,3,1,1,0,1,3,1,0,1,1,3,0,1,1,1,4,1,1,1,1],[1,1,0,0,0,1,0,1,0,0,1,0,0,1,0,1,0,0,0,1,2,1,1,0,0,2,1,0,1,0,2,1,0,0,1,2,0,1,1,0,2,0,1,0,1,2,0,0,1,1],[3,1,1,1,0,3,1,1,0,1,3,1,0,1,1,3,0,1,1,1,2,1,1,0,0,2,1,0,1,0,2,1,0,0,1,2,0,1,1,0,2,0,1,0,1,2,0,0,1,1]],l.gradients2D=[5,2,2,5,-5,2,-2,5,5,-2,2,-5,-5,-2,-2,-5],l.gradients3D=[-11,4,4,-4,11,4,-4,4,11,11,4,4,4,11,4,4,4,11,-11,-4,4,-4,-11,4,-4,-4,11,11,-4,4,4,-11,4,4,-4,11,-11,4,-4,-4,11,-4,-4,4,-11,11,4,-4,4,11,-4,4,4,-11,-11,-4,-4,-4,-11,-4,-4,-4,-11,11,-4,-4,4,-11,-4,4,-4,-11],l.gradients4D=[3,1,1,1,1,3,1,1,1,1,3,1,1,1,1,3,-3,1,1,1,-1,3,1,1,-1,1,3,1,-1,1,1,3,3,-1,1,1,1,-3,1,1,1,-1,3,1,1,-1,1,3,-3,-1,1,1,-1,-3,1,1,-1,-1,3,1,-1,-1,1,3,3,1,-1,1,1,3,-1,1,1,1,-3,1,1,1,-1,3,-3,1,-1,1,-1,3,-1,1,-1,1,-3,1,-1,1,-1,3,3,-1,-1,1,1,-3,-1,1,1,-1,-3,1,1,-1,-1,3,-3,-1,-1,1,-1,-3,-1,1,-1,-1,-3,1,-1,-1,-1,3,3,1,1,-1,1,3,1,-1,1,1,3,-1,1,1,1,-3,-3,1,1,-1,-1,3,1,-1,-1,1,3,-1,-1,1,1,-3,3,-1,1,-1,1,-3,1,-1,1,-1,3,-1,1,-1,1,-3,-3,-1,1,-1,-1,-3,1,-1,-1,-1,3,-1,-1,-1,1,-3,3,1,-1,-1,1,3,-1,-1,1,1,-3,-1,1,1,-1,-3,-3,1,-1,-1,-1,3,-1,-1,-1,1,-3,-1,-1,1,-1,-3,3,-1,-1,-1,1,-3,-1,-1,1,-1,-3,-1,1,-1,-1,-3,-3,-1,-1,-1,-1,-3,-1,-1,-1,-1,-3,-1,-1,-1,-1,-3],l.lookupPairs2D=[0,1,1,0,4,1,17,0,20,2,21,2,22,5,23,5,26,4,39,3,42,4,43,3],l.lookupPairs3D=[0,2,1,1,2,2,5,1,6,0,7,0,32,2,34,2,129,1,133,1,160,5,161,5,518,0,519,0,546,4,550,4,645,3,647,3,672,5,673,5,674,4,677,3,678,4,679,3,680,13,681,13,682,12,685,14,686,12,687,14,712,20,714,18,809,21,813,23,840,20,841,21,1198,19,1199,22,1226,18,1230,19,1325,23,1327,22,1352,15,1353,17,1354,15,1357,17,1358,16,1359,16,1360,11,1361,10,1362,11,1365,10,1366,9,1367,9,1392,11,1394,11,1489,10,1493,10,1520,8,1521,8,1878,9,1879,9,1906,7,1910,7,2005,6,2007,6,2032,8,2033,8,2034,7,2037,6,2038,7,2039,6],l.lookupPairs4D=[0,3,1,2,2,3,5,2,6,1,7,1,8,3,9,2,10,3,13,2,16,3,18,3,22,1,23,1,24,3,26,3,33,2,37,2,38,1,39,1,41,2,45,2,54,1,55,1,56,0,57,0,58,0,59,0,60,0,61,0,62,0,63,0,256,3,258,3,264,3,266,3,272,3,274,3,280,3,282,3,2049,2,2053,2,2057,2,2061,2,2081,2,2085,2,2089,2,2093,2,2304,9,2305,9,2312,9,2313,9,16390,1,16391,1,16406,1,16407,1,16422,1,16423,1,16438,1,16439,1,16642,8,16646,8,16658,8,16662,8,18437,6,18439,6,18469,6,18471,6,18688,9,18689,9,18690,8,18693,6,18694,8,18695,6,18696,9,18697,9,18706,8,18710,8,18725,6,18727,6,131128,0,131129,0,131130,0,131131,0,131132,0,131133,0,131134,0,131135,0,131352,7,131354,7,131384,7,131386,7,133161,5,133165,5,133177,5,133181,5,133376,9,133377,9,133384,9,133385,9,133400,7,133402,7,133417,5,133421,5,133432,7,133433,5,133434,7,133437,5,147510,4,147511,4,147518,4,147519,4,147714,8,147718,8,147730,8,147734,8,147736,7,147738,7,147766,4,147767,4,147768,7,147770,7,147774,4,147775,4,149509,6,149511,6,149541,6,149543,6,149545,5,149549,5,149558,4,149559,4,149561,5,149565,5,149566,4,149567,4,149760,9,149761,9,149762,8,149765,6,149766,8,149767,6,149768,9,149769,9,149778,8,149782,8,149784,7,149786,7,149797,6,149799,6,149801,5,149805,5,149814,4,149815,4,149816,7,149817,5,149818,7,149821,5,149822,4,149823,4,149824,37,149825,37,149826,36,149829,34,149830,36,149831,34,149832,37,149833,37,149842,36,149846,36,149848,35,149850,35,149861,34,149863,34,149865,33,149869,33,149878,32,149879,32,149880,35,149881,33,149882,35,149885,33,149886,32,149887,32,150080,49,150082,48,150088,49,150098,48,150104,47,150106,47,151873,46,151877,45,151881,46,151909,45,151913,44,151917,44,152128,49,152129,46,152136,49,152137,46,166214,43,166215,42,166230,43,166247,42,166262,41,166263,41,166466,48,166470,43,166482,48,166486,43,168261,45,168263,42,168293,45,168295,42,168512,31,168513,28,168514,31,168517,28,168518,25,168519,25,280952,40,280953,39,280954,40,280957,39,280958,38,280959,38,281176,47,281178,47,281208,40,281210,40,282985,44,282989,44,283001,39,283005,39,283208,30,283209,27,283224,30,283241,27,283256,22,283257,22,297334,41,297335,41,297342,38,297343,38,297554,29,297558,24,297562,29,297590,24,297594,21,297598,21,299365,26,299367,23,299373,26,299383,23,299389,20,299391,20,299584,31,299585,28,299586,31,299589,28,299590,25,299591,25,299592,30,299593,27,299602,29,299606,24,299608,30,299610,29,299621,26,299623,23,299625,27,299629,26,299638,24,299639,23,299640,22,299641,22,299642,21,299645,20,299646,21,299647,20,299648,61,299649,60,299650,61,299653,60,299654,59,299655,59,299656,58,299657,57,299666,55,299670,54,299672,58,299674,55,299685,52,299687,51,299689,57,299693,52,299702,54,299703,51,299704,56,299705,56,299706,53,299709,50,299710,53,299711,50,299904,61,299906,61,299912,58,299922,55,299928,58,299930,55,301697,60,301701,60,301705,57,301733,52,301737,57,301741,52,301952,79,301953,79,301960,76,301961,76,316038,59,316039,59,316054,54,316071,51,316086,54,316087,51,316290,78,316294,78,316306,73,316310,73,318085,77,318087,77,318117,70,318119,70,318336,79,318337,79,318338,78,318341,77,318342,78,318343,77,430776,56,430777,56,430778,53,430781,50,430782,53,430783,50,431e3,75,431002,72,431032,75,431034,72,432809,74,432813,69,432825,74,432829,69,433032,76,433033,76,433048,75,433065,74,433080,75,433081,74,447158,71,447159,68,447166,71,447167,68,447378,73,447382,73,447386,72,447414,71,447418,72,447422,71,449189,70,449191,70,449197,69,449207,68,449213,69,449215,68,449408,67,449409,67,449410,66,449413,64,449414,66,449415,64,449416,67,449417,67,449426,66,449430,66,449432,65,449434,65,449445,64,449447,64,449449,63,449453,63,449462,62,449463,62,449464,65,449465,63,449466,65,449469,63,449470,62,449471,62,449472,19,449473,19,449474,18,449477,16,449478,18,449479,16,449480,19,449481,19,449490,18,449494,18,449496,17,449498,17,449509,16,449511,16,449513,15,449517,15,449526,14,449527,14,449528,17,449529,15,449530,17,449533,15,449534,14,449535,14,449728,19,449729,19,449730,18,449734,18,449736,19,449737,19,449746,18,449750,18,449752,17,449754,17,449784,17,449786,17,451520,19,451521,19,451525,16,451527,16,451528,19,451529,19,451557,16,451559,16,451561,15,451565,15,451577,15,451581,15,451776,19,451777,19,451784,19,451785,19,465858,18,465861,16,465862,18,465863,16,465874,18,465878,18,465893,16,465895,16,465910,14,465911,14,465918,14,465919,14,466114,18,466118,18,466130,18,466134,18,467909,16,467911,16,467941,16,467943,16,468160,13,468161,13,468162,13,468163,13,468164,13,468165,13,468166,13,468167,13,580568,17,580570,17,580585,15,580589,15,580598,14,580599,14,580600,17,580601,15,580602,17,580605,15,580606,14,580607,14,580824,17,580826,17,580856,17,580858,17,582633,15,582637,15,582649,15,582653,15,582856,12,582857,12,582872,12,582873,12,582888,12,582889,12,582904,12,582905,12,596982,14,596983,14,596990,14,596991,14,597202,11,597206,11,597210,11,597214,11,597234,11,597238,11,597242,11,597246,11,599013,10,599015,10,599021,10,599023,10,599029,10,599031,10,599037,10,599039,10,599232,13,599233,13,599234,13,599235,13,599236,13,599237,13,599238,13,599239,13,599240,12,599241,12,599250,11,599254,11,599256,12,599257,12,599258,11,599262,11,599269,10,599271,10,599272,12,599273,12,599277,10,599279,10,599282,11,599285,10,599286,11,599287,10,599288,12,599289,12,599290,11,599293,10,599294,11,599295,10],l.p2D=[0,0,1,-1,0,0,-1,1,0,2,1,1,1,2,2,0,1,2,0,2,1,0,0,0],l.p3D=[0,0,1,-1,0,0,1,0,-1,0,0,-1,1,0,0,0,1,-1,0,0,-1,0,1,0,0,-1,1,0,2,1,1,0,1,1,1,-1,0,2,1,0,1,1,1,-1,1,0,2,0,1,1,1,-1,1,1,1,3,2,1,0,3,1,2,0,1,3,2,0,1,3,1,0,2,1,3,0,2,1,3,0,1,2,1,1,1,0,0,2,2,0,0,1,1,0,1,0,2,0,2,0,1,1,0,0,1,2,0,0,2,2,0,0,0,0,1,1,-1,1,2,0,0,0,0,1,-1,1,1,2,0,0,0,0,1,1,1,-1,2,3,1,1,1,2,0,0,2,2,3,1,1,1,2,2,0,0,2,3,1,1,1,2,0,2,0,2,1,1,-1,1,2,0,0,2,2,1,1,-1,1,2,2,0,0,2,1,-1,1,1,2,0,0,2,2,1,-1,1,1,2,0,2,0,2,1,1,1,-1,2,2,0,0,2,1,1,1,-1,2,0,2,0],l.p4D=[0,0,1,-1,0,0,0,1,0,-1,0,0,1,0,0,-1,0,0,-1,1,0,0,0,0,1,-1,0,0,0,1,0,-1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,-1,0,0,-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,2,1,1,0,0,1,1,1,-1,0,1,1,1,0,-1,0,2,1,0,1,0,1,1,-1,1,0,1,1,0,1,-1,0,2,0,1,1,0,1,-1,1,1,0,1,0,1,1,-1,0,2,1,0,0,1,1,1,-1,0,1,1,1,0,-1,1,0,2,0,1,0,1,1,-1,1,0,1,1,0,1,-1,1,0,2,0,0,1,1,1,-1,0,1,1,1,0,-1,1,1,1,4,2,1,1,0,4,1,2,1,0,4,1,1,2,0,1,4,2,1,0,1,4,1,2,0,1,4,1,1,0,2,1,4,2,0,1,1,4,1,0,2,1,4,1,0,1,2,1,4,0,2,1,1,4,0,1,2,1,4,0,1,1,2,1,2,1,1,0,0,3,2,1,0,0,3,1,2,0,0,1,2,1,0,1,0,3,2,0,1,0,3,1,0,2,0,1,2,0,1,1,0,3,0,2,1,0,3,0,1,2,0,1,2,1,0,0,1,3,2,0,0,1,3,1,0,0,2,1,2,0,1,0,1,3,0,2,0,1,3,0,1,0,2,1,2,0,0,1,1,3,0,0,2,1,3,0,0,1,2,2,3,1,1,1,0,2,1,1,1,-1,2,2,0,0,0,2,3,1,1,0,1,2,1,1,-1,1,2,2,0,0,0,2,3,1,0,1,1,2,1,-1,1,1,2,2,0,0,0,2,3,1,1,1,0,2,1,1,1,-1,2,0,2,0,0,2,3,1,1,0,1,2,1,1,-1,1,2,0,2,0,0,2,3,0,1,1,1,2,-1,1,1,1,2,0,2,0,0,2,3,1,1,1,0,2,1,1,1,-1,2,0,0,2,0,2,3,1,0,1,1,2,1,-1,1,1,2,0,0,2,0,2,3,0,1,1,1,2,-1,1,1,1,2,0,0,2,0,2,3,1,1,0,1,2,1,1,-1,1,2,0,0,0,2,2,3,1,0,1,1,2,1,-1,1,1,2,0,0,0,2,2,3,0,1,1,1,2,-1,1,1,1,2,0,0,0,2,2,1,1,1,-1,0,1,1,1,0,-1,0,0,0,0,0,2,1,1,-1,1,0,1,1,0,1,-1,0,0,0,0,0,2,1,-1,1,1,0,1,0,1,1,-1,0,0,0,0,0,2,1,1,-1,0,1,1,1,0,-1,1,0,0,0,0,0,2,1,-1,1,0,1,1,0,1,-1,1,0,0,0,0,0,2,1,-1,0,1,1,1,0,-1,1,1,0,0,0,0,0,2,1,1,1,-1,0,1,1,1,0,-1,2,2,0,0,0,2,1,1,-1,1,0,1,1,0,1,-1,2,2,0,0,0,2,1,1,-1,0,1,1,1,0,-1,1,2,2,0,0,0,2,1,1,1,-1,0,1,1,1,0,-1,2,0,2,0,0,2,1,-1,1,1,0,1,0,1,1,-1,2,0,2,0,0,2,1,-1,1,0,1,1,0,1,-1,1,2,0,2,0,0,2,1,1,-1,1,0,1,1,0,1,-1,2,0,0,2,0,2,1,-1,1,1,0,1,0,1,1,-1,2,0,0,2,0,2,1,-1,0,1,1,1,0,-1,1,1,2,0,0,2,0,2,1,1,-1,0,1,1,1,0,-1,1,2,0,0,0,2,2,1,-1,1,0,1,1,0,1,-1,1,2,0,0,0,2,2,1,-1,0,1,1,1,0,-1,1,1,2,0,0,0,2,3,1,1,0,0,0,2,2,0,0,0,2,1,1,1,-1,3,1,0,1,0,0,2,0,2,0,0,2,1,1,1,-1,3,1,0,0,1,0,2,0,0,2,0,2,1,1,1,-1,3,1,1,0,0,0,2,2,0,0,0,2,1,1,-1,1,3,1,0,1,0,0,2,0,2,0,0,2,1,1,-1,1,3,1,0,0,0,1,2,0,0,0,2,2,1,1,-1,1,3,1,1,0,0,0,2,2,0,0,0,2,1,-1,1,1,3,1,0,0,1,0,2,0,0,2,0,2,1,-1,1,1,3,1,0,0,0,1,2,0,0,0,2,2,1,-1,1,1,3,1,0,1,0,0,2,0,2,0,0,2,-1,1,1,1,3,1,0,0,1,0,2,0,0,2,0,2,-1,1,1,1,3,1,0,0,0,1,2,0,0,0,2,2,-1,1,1,1,3,3,2,1,0,0,3,1,2,0,0,4,1,1,1,1,3,3,2,0,1,0,3,1,0,2,0,4,1,1,1,1,3,3,0,2,1,0,3,0,1,2,0,4,1,1,1,1,3,3,2,0,0,1,3,1,0,0,2,4,1,1,1,1,3,3,0,2,0,1,3,0,1,0,2,4,1,1,1,1,3,3,0,0,2,1,3,0,0,1,2,4,1,1,1,1,3,3,2,1,0,0,3,1,2,0,0,2,1,1,1,-1,3,3,2,0,1,0,3,1,0,2,0,2,1,1,1,-1,3,3,0,2,1,0,3,0,1,2,0,2,1,1,1,-1,3,3,2,1,0,0,3,1,2,0,0,2,1,1,-1,1,3,3,2,0,0,1,3,1,0,0,2,2,1,1,-1,1,3,3,0,2,0,1,3,0,1,0,2,2,1,1,-1,1,3,3,2,0,1,0,3,1,0,2,0,2,1,-1,1,1,3,3,2,0,0,1,3,1,0,0,2,2,1,-1,1,1,3,3,0,0,2,1,3,0,0,1,2,2,1,-1,1,1,3,3,0,2,1,0,3,0,1,2,0,2,-1,1,1,1,3,3,0,2,0,1,3,0,1,0,2,2,-1,1,1,1,3,3,0,0,2,1,3,0,0,1,2,2,-1,1,1,1];function a(k){var p=new Uint32Array(1);return p[0]=k[0]*1664525+1013904223,p}function s(k,p,m){this.dx=-p-k*l.SQUISH_2D,this.dy=-m-k*l.SQUISH_2D,this.xsb=p,this.ysb=m}function c(k,p,m,S){this.dx=-p-k*l.SQUISH_3D,this.dy=-m-k*l.SQUISH_3D,this.dz=-S-k*l.SQUISH_3D,this.xsb=p,this.ysb=m,this.zsb=S}function d(k,p,m,S,_){this.dx=-p-k*l.SQUISH_4D,this.dy=-m-k*l.SQUISH_4D,this.dz=-S-k*l.SQUISH_4D,this.dw=-_-k*l.SQUISH_4D,this.xsb=p,this.ysb=m,this.zsb=S,this.wsb=_}var C=[],T,h,w,A,y,v;for(T=0;T<l.p2D.length;T+=4){for(A=l.base2D[l.p2D[T]],y=null,v=null,h=0;h<A.length;h+=3)v=new s(A[h],A[h+1],A[h+2]),y===null?C[T/4]=v:y.next=v,y=v;v.next=new s(l.p2D[T+1],l.p2D[T+2],l.p2D[T+3])}for(this.lookup2D=[],T=0;T<l.lookupPairs2D.length;T+=2)this.lookup2D[l.lookupPairs2D[T]]=C[l.lookupPairs2D[T+1]];var P=[];for(T=0;T<l.p3D.length;T+=9){for(A=l.base3D[l.p3D[T]],y=null,v=null,h=0;h<A.length;h+=4)v=new c(A[h],A[h+1],A[h+2],A[h+3]),y===null?P[T/9]=v:y.next=v,y=v;v.next=new c(l.p3D[T+1],l.p3D[T+2],l.p3D[T+3],l.p3D[T+4]),v.next.next=new c(l.p3D[T+5],l.p3D[T+6],l.p3D[T+7],l.p3D[T+8])}for(this.lookup3D=[],T=0;T<l.lookupPairs3D.length;T+=2)this.lookup3D[l.lookupPairs3D[T]]=P[l.lookupPairs3D[T+1]];var x=[];for(T=0;T<l.p4D.length;T+=16){for(A=l.base4D[l.p4D[T]],y=null,v=null,h=0;h<A.length;h+=5)v=new d(A[h],A[h+1],A[h+2],A[h+3],A[h+4]),y===null?x[T/16]=v:y.next=v,y=v;v.next=new d(l.p4D[T+1],l.p4D[T+2],l.p4D[T+3],l.p4D[T+4],l.p4D[T+5]),v.next.next=new d(l.p4D[T+6],l.p4D[T+7],l.p4D[T+8],l.p4D[T+9],l.p4D[T+10]),v.next.next.next=new d(l.p4D[T+11],l.p4D[T+12],l.p4D[T+13],l.p4D[T+14],l.p4D[T+15])}for(this.lookup4D=[],T=0;T<l.lookupPairs4D.length;T+=2)this.lookup4D[l.lookupPairs4D[T]]=x[l.lookupPairs4D[T+1]];this.perm=new Uint8Array(256),this.perm2D=new Uint8Array(256),this.perm3D=new Uint8Array(256),this.perm4D=new Uint8Array(256);var E=new Uint8Array(256);for(T=0;T<256;T++)E[T]=T;for(e=new Uint32Array(1),e[0]=r,e=a(a(a(e))),T=255;T>=0;T--)e=a(e),w=new Uint32Array(1),w[0]=(e[0]+31)%(T+1),w[0]<0&&(w[0]+=T+1),this.perm[T]=E[w[0]],this.perm2D[T]=this.perm[T]&14,this.perm3D[T]=this.perm[T]%24*3,this.perm4D[T]=this.perm[T]&252,E[w[0]]=E[T];this.simplex1D=function(k){return i.simplex2D(k,1)},this.simplex2D=function(k,p){var m=(k+p)*l.STRETCH_2D,S=[k+m,p+m],_=S[0],Y=S[1],B=[Math.floor(_),Math.floor(Y)],b=B[0],X=B[1],V=(b+X)*l.SQUISH_2D,O=[k-(b+V),p-(X+V)],Z=O[0],W=O[1],K=[_-b,Y-X],ne=K[0],F=K[1],D=ne+F,u=new Uint32Array(4);u[0]=ne-F+1,u[1]=D,u[2]=D+F,u[3]=D+ne;for(var f=u[0]|u[1]<<1|u[2]<<2|u[3]<<4,o=i.lookup2D[f],g=0;typeof o<"u";){var q=[Z+o.dx,W+o.dy],I=q[0],R=q[1],le=2-I*I-R*R;if(le>0){var N=[b+o.xsb,X+o.ysb],L=N[0],ee=N[1],z=i.perm2D[i.perm[L&255]+ee&255],$=l.gradients2D[z]*I+l.gradients2D[z+1]*R;le*=le,g+=le*le*$}o=o.next}return g*l.NORM_2D},this.simplex3D=function(k,p,m){var S=(k+p+m)*l.STRETCH_3D,_=[k+S,p+S,m+S],Y=_[0],B=_[1],b=_[2],X=[Math.floor(Y),Math.floor(B),Math.floor(b)],V=X[0],O=X[1],Z=X[2],W=(V+O+Z)*l.SQUISH_3D,K=[k-(V+W),p-(O+W),m-(Z+W)],ne=K[0],F=K[1],D=K[2],u=[Y-V,B-O,b-Z],f=u[0],o=u[1],g=u[2],q=f+o+g,I=new Uint32Array(7);I[0]=o-g+1,I[1]=f-o+1,I[2]=f-g+1,I[3]=q,I[4]=q+g,I[5]=q+o,I[6]=q+f;for(var R=I[0]|I[1]<<1|I[2]<<2|I[3]<<3|I[4]<<5|I[5]<<7|I[6]<<9,le=i.lookup3D[R],N=0;typeof le<"u";){var L=[ne+le.dx,F+le.dy,D+le.dz],ee=L[0],z=L[1],$=L[2],xe=2-ee*ee-z*z-$*$;if(xe>0){var ie=[V+le.xsb,O+le.ysb,Z+le.zsb],ke=ie[0],U=ie[1],Ee=ie[2],Q=i.perm3D[i.perm[i.perm[ke&255]+U&255]+Ee&255],G=l.gradients3D[Q]*ee+l.gradients3D[Q+1]*z+l.gradients3D[Q+2]*$;xe*=xe,N+=xe*xe*G}le=le.next}return N*l.NORM_3D},this.simplex4D=function(k,p,m,S){var _=(k+p+m+S)*l.STRETCH_4D,Y=[k+_,p+_,m+_,S+_],B=Y[0],b=Y[1],X=Y[2],V=Y[3],O=[Math.floor(B),Math.floor(b),Math.floor(X),Math.floor(V)],Z=O[0],W=O[1],K=O[2],ne=O[3],F=(Z+W+K+ne)*l.SQUISH_4D,D=k-(Z+F),u=p-(W+F),f=m-(K+F),o=S-(ne+F),g=[B-Z,b-W,X-K,V-ne],q=g[0],I=g[1],R=g[2],le=g[3],N=q+I+R+le,L=new Uint32Array(11);L[0]=R-le+1,L[1]=I-R+1,L[2]=I-le+1,L[3]=q-I+1,L[4]=q-R+1,L[5]=q-le+1,L[6]=N<<6,L[7]=N+le,L[8]=N+R,L[9]=N+I,L[10]=N+q;for(var ee=L[0]|L[1]<<1|L[2]<<2|L[3]<<3|L[4]<<4|L[5]<<5|L[6]<<6|L[7]<<8|L[8]<<11|L[9]<<14|L[10]<<17,z=i.lookup4D[ee],$=0;typeof z<"u";){var xe=[D+z.dx,u+z.dy,f+z.dz,o+z.dw],ie=xe[0],ke=xe[1],U=xe[2],Ee=xe[3],Q=2-ie*ie-ke*ke-U*U-Ee*Ee;if(Q>0){var G=[Z+z.xsb,W+z.ysb,K+z.zsb,ne+z.wsb],ue=G[0],fe=G[1],ye=G[2],H=G[3],re=i.perm4D[i.perm[i.perm[i.perm[ue&255]+fe&255]+ye&255]+H&255],pe=l.gradients4D[re]*ie+l.gradients4D[re+1]*ke+l.gradients4D[re+2]*U+l.gradients4D[re+3]*Ee;Q*=Q,$+=Q*Q*pe}z=z.next}return $*l.NORM_4D}},typeof Ne<"u"&&(t.Point=function(e,r,i,l,a,s,c,d,C,T){Le("13.45"),n(e)&&(e=0),n(r)&&(r=0),n(i)&&(i=0),n(l)&&(l=0),n(a)&&(a=0),n(s)&&(s=0),n(c)&&(c=0),n(d)&&(d=0),n(C)&&(C=0),n(T)&&(T=0),this.createjsPoint_constructor(e,r),this.type="Point",this.x=e,this.y=r,this.z=i,this.q=l,this.r=a,this.s=s,this.t=c,this.u=d,this.v=C,this.w=T,this.angle=function(h){return this.createjsPoint_angle(h)*180/Math.PI},this.project=function(h,w){return this.createjsPoint_project(h*Math.PI/180,w)}},t.extend(t.Point,Ne.Point,["angle","project"],"createjsPoint")),t.Bezier=function(r,i,l,a){Le("13.47"),this.a=r,this.b=i,this.c=l,this.d=a,this.len=100,this.arcLengths=new Array(this.len+1),this.arcLengths[0]=0;for(var s=this.x(0),c=this.y(0),d=0,C=1;C<=this.len;C+=1){var T=this.x(C*.01),h=this.y(C*.01),w=s-T,A=c-h;d+=Math.sqrt(w*w+A*A),this.arcLengths[C]=d,s=T,c=h}this.length=d},t.Bezier.prototype={map:function(e){for(var r=e*this.arcLengths[this.len],i=0,l=this.len,a=0;i<l;)a=i+((l-i)/2|0),this.arcLengths[a]<r?i=a+1:l=a;this.arcLengths[a]>r&&a--;var s=this.arcLengths[a];return s===r?a/this.len:(a+(r-s)/(this.arcLengths[a+1]-s))/this.len},mx:function(e){return this.x(this.map(e))},my:function(e){return this.y(this.map(e))},x:function(e){return(1-e)*(1-e)*(1-e)*this.a.x+3*((1-e)*(1-e))*e*this.b.x+3*(1-e)*(e*e)*this.c.x+e*e*e*this.d.x},y:function(e){return(1-e)*(1-e)*(1-e)*this.a.y+3*((1-e)*(1-e))*e*this.b.y+3*(1-e)*(e*e)*this.c.y+e*e*e*this.d.y}},t.Boundary=function(e,r,i,l){Le("13.46"),e.x&&(l=e.height,i=e.width,r=e.y,e=e.x),!(n(e)||n(r)||n(i)||n(l))&&(this.x=e,this.y=r,this.width=i,this.height=l,this.contract=function(a,s,c,d){return n(a)?this:(n(s)&&(s=a),n(c)?c=a*2:c=c+a,n(d)?d=s*2:d=d+s,this.x+=a,this.y+=s,this.width-=c,this.height-=d,this)})},t.GradientColor=function(e,r,i,l,a,s){if(Le("13.465"),this.type="GradientColor",this.colors=n(e)?["black","white"]:e,Array.isArray(this.colors)||(this.colors=[this.colors,this.colors]),this.colors.length==1&&this.colors.push(this.colors[0]),this.ratios=n(r)?0:r,!Array.isArray(this.ratios)){this.angle=this.ratios,this.ratios=[];for(var c=0;c<this.colors.length;c++)this.ratios.push(c/(this.colors.length-1))}!n(i)&&(n(l)||n(a)||n(s))?(this.angle=i,i=null):n(this.angle)&&n(i)&&n(l)&&n(a)&&n(s)?this.angle=0:(this.x0=n(i)?0:i,this.y0=n(l)?0:l,this.x1=n(a)?0:a,this.y1=n(s)?100:s)},t.RadialColor=function(e,r,i,l,a,s,c,d){if(Le("13.466"),this.type="RadialColor",this.colors=n(e)?["black","white"]:e,Array.isArray(this.colors)||(this.colors=[this.colors,this.colors]),this.colors.length==1&&this.colors.push(this.colors[0]),this.ratios=r,!Array.isArray(this.ratios)){this.ratios=[];for(var C=0;C<this.colors.length;C++)this.ratios.push(C/(this.colors.length-1))}this.x0=i,this.y0=l,this.r0=a,this.x1=s,this.y1=c,this.r1=d},t.BitmapColor=function(e,r,i){Le("13.467"),this.type="BitmapColor",typeof e=="string"&&j.asset&&(e=j.asset(e)),e.type!="Bitmap"&&e.bitmap&&(e=e.bitmap),this.image=e.type=="Bitmap"?e.image:e,this.repetition=r,this.matrix=i},t.Damp=function(e,r){Le("14");var i="startValue, damp",l;if(l=lt(t.Damp,arguments,i,this))return l;this.lastValue=n(e)?0:e,this.damp=n(r)?.1:r},t.Damp.prototype.convert=function(e){return this.lastValue=this.lastValue+(e-this.lastValue)*this.damp},t.Damp.prototype.immediate=function(e){return this.lastValue=e,this},t.Proportion=function(e,r,i,l,a,s,c){var d="baseMin, baseMax, targetMin, targetMax, factor, targetRound, clamp",C;if(C=lt(t.Proportion,arguments,d,this))return C;Le("15"),n(i)&&(i=0),n(l)&&(l=1),n(a)&&(a=1),n(s)&&(s=!1),n(c)&&(c=!0);var T,h;this.convert=function(w){if(n(w)&&(w=e),!(isNaN(w)||r-e==0))return c&&(w=Math.max(w,e),w=Math.min(w,r)),T=(w-e)/(r-e),a>0?h=i+(l-i)*T:h=l-(l-i)*T,s&&(h=Math.round(h)),h}},t.ProportionDamp=function(e,r,i,l,a,s,c,d){var C="baseMin, baseMax, targetMin, targetMax, damp, factor, targetRound, clamp",T;if(T=lt(t.ProportionDamp,arguments,C,this))return T;Le("16"),n(i)&&(i=0),n(l)&&(l=1),n(a)&&(a=.1),n(s)&&(s=1),n(c)&&(c=!1),n(d)&&(d=!0),this.damp=a;var h=this,w,A,y,v,P,x=0,E=0;w=e,E=i;var k=setInterval(p,20);function p(){isNaN(w)||r-e==0||(d&&(w=Math.max(w,e),w=Math.min(w,r)),A=(w-e)/(r-e),y=l-i,s>0?v=i+y*A:v=l-y*A,x=v,P=x-E,E+=P*h.damp)}this.immediate=function(m){return h.convert(m),p(),E=v,c&&(E=Math.round(E)),h},this.immediateValue=function(m){return x=E=m,h},this.convert=function(m){return w=m,c?Math.round(E):E},this.dispose=function(){return clearInterval(k),!0}},t.Dictionary=function(e){Le("17"),this.length=0,this.unique=e;var r=this.objects=[],i=this.values=[];this.type="Dictionary",this.add=function(l,a){n(l)||(n(a)&&(a=!0),this.unique&&this.remove(l),r.push(l),i.push(a),this.length++)},this.at=function(l){if(!n(l)){var a=r.indexOf(l);return a>-1?i[a]:null}},this.remove=function(l){if(n(l))return!1;var a=r.indexOf(l);return a>-1?(r.splice(a,1),i.splice(a,1),this.length--,!0):!1},this.clear=function(){return r=this.objects=[],i=this.values=[],this.length=null,this},this.dispose=function(){return r=null,i=null,this.length=null,!0}},t.Hierarchy=function(e,r){Le("17.5");var i=this;if(n(e))return;n(r)&&(r=!1);var l;i.processSimple=function(d){var C=0,T={};function h(w,A,y,v){if(n(w)||(d=w),d.constructor=={}.constructor){var P;d.list&&(P=d,d=d.list),v&&P&&t.loop(P,function(x,E){x!="list"&&(v[x]=E)}),t.loop(d,function(x,E){var k={},p=A["id"+C]={obj:x,level:y,open:r,opened:!1,list:k};C++,h(E,k,y+1,p)})}else Array.isArray(d)&&t.loop(d,function(x){A["id"+C]={obj:x},C++})}return h(e,T,0),l=C,T},i.processComplex=function(d){var C=0;function T(h,w){t.loop(h,function(A,y){y.level=w,n(y.open)&&(y.open=r),n(y.opened)&&(y.opened=!1),y.list&&T(y.list,w+1),C++})}return T(d,0),l=C,d},n(e.id0)?i.data=i.processSimple(e):i.data=i.processComplex(e),i.getLinearList=function(d){return n(d)&&(d=i.data),a(d)[0]},i.getLinearIDs=function(d){return n(d)&&(d=i.data),a(d)[1]};function a(d){var C=[],T=[];function h(w,A){t.loop(w,function(y,v){C.push(v.obj),T.push(y),v.open&&h(v.list,A+1)})}return h(d,0),[C,T]}i.getData=function(d){var C;function T(h){t.loop(h,function(w,A){if(w==d)return C=A,C;T(A.list)})}return T(i.data),C},i.getNextSibling=function(d){var C,T;function h(w){t.loop(w,function(A,y){if(!T&&C)return T=A,T;A==d?C=y:h(y.list)})}return h(i.data),T},i.getPrevSibling=function(d){var C=[],T;function h(w,A){t.loop(w,function(y,v){if(y==d)return T=C[A]||C[A-1],T;C[A]=y,h(v.list,A+1)})}return h(i.data,0),T},i.insertBefore=function(d,C,T){return s("insertBefore",d,C,T)},i.insertAfter=function(d,C,T){return s("insertAfter",d,C,T)},i.removeItem=function(d){return s("removeItem",null,d)},i.replaceItem=function(d,C){var T=i.getData(C);return T.obj=d,s("replaceItem")};function s(d,C,T,h){var w=0,A={},y=i.data;function v(P,x,E,k){t.loop(P,function(p,m){if(!(d=="removeItem"&&p==T)){var S,_,Y;d=="insertBefore"&&p==T&&(w=c(x,w,E,C,h)),S={},_=m.list,m.list=S,m.opened=!1,m.open=!1,Y=x["id"+w]=m,Y.obj.type&&Y.obj.type=="TabsButton"&&(Y.obj=Y.obj.text),w++,v(_,S,E+1),d=="insertAfter"&&p==T&&(w=c(x,w,E,C,h))}})}return v(y,A,0),l=w,A}function c(d,C,T,h,w){if(w){var A={};Array.isArray(h)&&(h=h[0]),d["id"+C]={obj:h,level:T,open:!1,opened:!1,list:A},C++,Array.isArray(w)||(w=[w]),t.loop(w,function(y){A["id"+C]={obj:y,level:T+1,open:!1,opened:!1,list:{}},C++})}else Array.isArray(h)||(h=[h]),t.loop(h,function(y){d["id"+C]={obj:y,level:T,open:!1,opened:!1,list:{}},C++});return C}i.getParent=function(d){var C=i.data;function T(h,w){var A=t.loop(h,function(y,v){if(y==d)return l-=1,w;if(v.list&&!t.isEmpty(v.list))return T(v.list,y)});if(A!==!0)return A}return T(C)},Object.defineProperty(i,"length",{get:function(){return l},set:function(){dt&&$e("Hierarchy() - length is read only")}})},t.Pick=function(e){t.pickCheck||(Le("17.6"),t.pickCheck=!0),this.choices=e,this.num=function(i){for(var l=[],a=0;a<i;a++)l.push(t.Pick.choose(this));return this.choices=t.Pick.series(l),this};var r=this;this.loop=function(i,l){for(var a,s=0;s<i;s++)if(a=l(t.Pick.choose(r),s,i),typeof a<"u")return a}},t.Pick.prototype.type="Pick",t.Pick.series=function(){return t.pickCheck||(Le("17.6"),t.pickCheck=!0),t.series.apply(null,arguments)},t.Pick.rand=function(e,r,i,l){return t.pickCheck||(Le("17.6"),t.pickCheck=!0),t.rand(e,r,i,l)},t.Pick.choose=function(e,r,i){if(t.pickCheck||(Le("17.6"),t.pickCheck=!0),r==null&&(r=!0),e==null)return e;if(e.type=="Pick"||r){var l=e.choices||e,a;return Array.isArray(l)?(a=l[Math.floor(Math.random()*l.length)],t.Pick.choose(a)):l.constructor==={}.constructor?n(l.noPick)?n(l.max)?l:(n(l.integer)&&(l.integer=!1),a=t.Pick.rand(l.min,l.max,l.integer,l.negative),a):l.noPick:l instanceof Function?(l.count==null?l.count=0:l.count++,t.Pick.choose(l(i,!0))):e}else return e},t.Pick.getMinMax=function(e){return!n(e.min)&&!n(e.max)?e:Array.isArray(e)?t.arrayMinMax(e):e.type=="series"?t.arrayMinMax(e.array):{min:null,max:null}},t.scrollX=function(e,r){return Le("18"),t.abstractScroll("X","Left",e,r)},t.scrollY=function(e,r){return Le("19"),t.abstractScroll("Y","Top",e,r)},t.abstractScroll=function(e,r,i,l){Le("20");var a=Tt(l),s=e=="X"?"Y":"X";if(n(i))return document.documentElement&&document.documentElement["scroll"+r]||document.body["scroll"+r];if(n(l))j.scrollTo(t["scroll"+s](),i);else{var c=50,d=l*(a=="s"?1e3:1);d<c&&(d=c);var C=d/c,T=t["scroll"+e](),h=i-T,w=h/C,A=0,y=setInterval(function(){A++,T+=w,j.scrollTo(t["scroll"+s](),T),A>=C&&(j.scrollTo(t["scroll"+s](),i),clearInterval(y))},c)}return i},t.windowWidth=function(){Le("21");var e=isNaN(j.innerWidth)?j.clientWidth:j.innerWidth,r=isNaN(j.innerHeight)?j.clientHeight:j.innerHeight;if(t.mobile()&&!n(j.orientation)&&!j.parent&&(e>r&&Math.abs(j.orientation)!=90||r>e&&Math.abs(j.orientation)==90)){var i=e;e=r,r=i}return j.zdf&&j.zdf.swapRotation?r:e},t.windowHeight=function(){Le("22");var e=isNaN(j.innerWidth)?j.clientWidth:j.innerWidth,r=isNaN(j.innerHeight)?j.clientHeight:j.innerHeight;if(t.mobile()&&!n(j.orientation)&&!j.parent&&(e>r&&Math.abs(j.orientation)!=90||r>e&&Math.abs(j.orientation)==90)){var i=e;e=r,r=i}return j.zdf&&j.zdf.swapRotation?e:r},t.browserZoom=function(){if(t.zimBZ)return n(t.zimBZA)?t.decimals((j.devicePixelRatio||1)/t.zimBZ1,2):t.zimBZA;if(Le("22.2"),t.zimBZ=!0,typeof e>"u")if(j.zdf)var e=j.zdf;else return t.zimBZA=1,1;if(e.retina)t.zimBZ1=j.devicePixelRatio||1;else return t.zimBZA=1,1},t.getQueryString=function(e){if(Le("22.5"),n(e)&&(e=location.search.replace("?","")),e=="")return{};for(var r=e.split("&"),i={},l=0;l<r.length;l++){var a=r[l].split("=");typeof i[a[0]]>"u"?i[a[0]]=decodeURIComponent((a[1]+"").replace(/\+/g,"%20")):typeof i[a[0]]=="string"?i[a[0]]=[i[a[0]],decodeURIComponent((a[1]+"").replace(/\+/g,"%20"))]:i[a[0]].push(decodeURIComponent((a[1]+"").replace(/\+/g,"%20")))}return i},t.swapHTML=function(e,r){return Le("17.2"),t.swapProperties("innerHTML",gn(e),gn(r))},t.urlEncode=function(e){return Le("23"),e=(e+"").toString(),encodeURIComponent(e).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+")},t.urlDecode=function(e){return Le("24"),decodeURIComponent((e+"").replace(/\+/g,"%20"))},t.setCookie=function(e,r,i){if(Le("25"),!(n(e)||n(r))){var l;if(i){var a=new Date;a.setTime(a.getTime()+i*24*60*60*1e3),l="; expires="+a.toGMTString()}else l="";return document.cookie=e+"="+escape(r)+l+"; path=/",!0}},t.getCookie=function(e){Le("26");for(var r=document.cookie.split(/;\s*/),i=new Array,l,a=0;a<r.length;a++)l=r[a].split("="),i[l[0]]=l[1];if(!(typeof i[e]>"u"))return unescape(i[e])},t.deleteCookie=function(e){return Le("27"),n(t.getCookie(e))?!1:(t.setCookie(e,"",-1),!0)},Ne==null)return dt&&Vr("ZIM >= 4.3.0 requires createjs namespace to be loaded (import createjs before zim)"),t;t.localToGlobal=function(r,i,l,a){if(t.coordinatesCheck||(Le("50.43"),t.coordinatesCheck=!0),!(r==null||i==null)){var s=a.call(l,r,i),c=l.stage;if(!j.zdf){if(!c)return s;j.zdf={stage:c,canvas:c.canvas}}return s.x/=t.scaX,s.y/=t.scaY,s}},t.globalToLocal=function(r,i,l,a){if(t.coordinatesCheck||(Le("50.43"),t.coordinatesCheck=!0),!(r==null||i==null)){var s=l.stage;if(!j.zdf){if(!s)return a.call(l,r,i);j.zdf={stage:s,canvas:s.canvas}}r*=t.scaX,i*=t.scaY;var c=a.call(l,r,i);return c}},t.localToLocal=function(r,i,l,a){if(t.coordinatesCheck||(Le("50.43"),t.coordinatesCheck=!0),!(r==null||i==null||l==null)){var s=a.localToGlobal(r,i),c=a.stage;if(!j.zdf){if(!c)return l.globalToLocal(s.x,s.y);j.zdf={stage:c,canvas:c.canvas}}if(c||(c=j.zdf.stage),l==c)return s;if(s)return l.globalToLocal(s.x,s.y)}},t.displayBase=function(e){t.zimDBCheck||(Le("50.432"),t.zimDBCheck=!0);var r=e;if(Object.defineProperty(e,"width",{enumerable:!0,get:function(){var d=this.getBounds();return n(d)?null:Math.abs(d.width*this.scaleX)},set:function(d){if(e.scaleDimensions!==!1){var C=this.getBounds();if(n(C)||C.width==0){dt&&$e("DisplayObject() - width needs bounds set with setBounds()");return}var T=d/C.width;this.scaleX=this.scaleY=T}else{var h=e.width!=0?e.height/e.width:0;e.setWidth(d),e.setHeight(d*h),e.drawShape()}}}),Object.defineProperty(e,"height",{enumerable:!0,get:function(){var d=this.getBounds();return n(d)?null:Math.abs(d.height*this.scaleY)},set:function(d){if(e.scaleDimensions!==!1){var C=this.getBounds();if(n(C)||C.height==0){dt&&$e("DisplayObject() - height needs bounds set with setBounds()");return}var T=d/C.height;this.scaleX=this.scaleY=T}else{var h=e.height!=0?e.width/e.height:0;e.setHeight(d),e.setWidth(d*h),e.drawShape()}}}),Object.defineProperty(e,"widthOnly",{enumerable:!0,get:function(){var d=this.getBounds();return n(d)?null:Math.abs(d.width*this.scaleX)},set:function(d){if(e.scaleDimensions!==!1){var C=this.getBounds();if((n(C)||C.width==0)&&dt){$e("DisplayObject() - widthOnly needs bounds set with setBounds()");return}var T=d/C.width;this.scaleX=T}else e.setWidth(d),e.drawShape()}}),Object.defineProperty(e,"heightOnly",{enumerable:!0,get:function(){var d=this.getBounds();return n(d)?null:Math.abs(d.height*this.scaleY)},set:function(d){if(e.scaleDimensions!==!1){var C=this.getBounds();if((n(C)||C.height==0)&&dt){$e("DisplayObject() - heightOnly needs bounds set with setBounds()");return}var T=d/C.height;this.scaleY=T}else e.setHeight(d),e.drawShape()}}),Object.defineProperty(e,"level",{enumerable:!0,get:function(){return this.parent?this.parent.getChildIndex(this):null},set:function(d){this.parent&&this.parent.setChildIndex(this,Math.max(0,Math.min(d,this.parent.numChildren-1)))}}),Object.defineProperty(e,"depth",{enumerable:!0,get:function(){return this._depth},set:function(d){if(this._depth=d,!n(this.vrChannel)){var C=this.vrParallaxDistance?d*this.vrParallax*this.vrParallaxDistance:0;this.vrChannel=="left"?this.x=this.vrStartX+d+C:this.vrChannel=="right"&&(this.x=this.vrStartX-d+C)}}}),Object.defineProperty(e,"blendMode",{enumerable:!0,get:function(){return this.compositeOperation},set:function(d){this.compositeOperation=d}}),!r.name){var i;Object.defineProperty(r,"name",{get:function(){return i},set:function(d){i=d,t.zimObjectIDs[d]=r}})}r._draggable,Object.defineProperty(r,"draggable",{get:function(){return this._draggable},set:function(d){d!=this._draggable&&(this._draggable=d,this._draggable?this.drag():this.noDrag())}});var l,a;r.on("mousedown",function(d){d.target.stage&&(l=d.target.stage.frame,l.allowDefault&&(a=!0,l.allowDefault=!1))}),r.on("pressup",function(){l&&a&&(l.allowDefault=!0)});for(var s=["hue","saturation","brightness","contrast"],c=0;c<s.length;c++)-function(){for(var d=s[c],C=0;C<2;C++)-function(){var T=C==0?"":"Batch";Object.defineProperty(r,d+T,{get:function(){return r.effects&&r.effects.multi?r.effects.multi[d]:0},set:function(h){!r.effects||!r.effects.multi?r.effect(new t.MultiEffect(d=="hue"?h:0,d=="saturation"?h:0,d=="brightness"?h:0,d=="contrast"?h:0)):r.effects.multi[d]=h,T==""&&r.updateEffects()}})}()}()},t.gD=function(e){if(t.zimGDCheck||(Le("50.435"),t.zimGDCheck=!0),!!e){if(e.z_bc){var r=e.z_bc;r.width=r.height=1,r.getContext&&r.getContext("2d").clearRect(0,0,1,1),delete e.z_bc}t.KEYFOCUS==e&&(t.KEYFOCUS=null),j.KEYFOCUS==e&&(j.KEYFOCUS=null),e.veeObj&&(e.veeObj=null),e.draggable&&e.noDrag(),e.zimTweens&&e.stopAnimate(),e.zimWire&&e.noWire(),e.zimWired&&e.noWired(),e.zimClickHoldDownEvent&&e.noHold(),e.transformControls&&e.transformControls.dispose(),e.zimClickDownEvent&&(e.zimClickDownEvent=null),e.zimClickUpEvent&&(e.zimClickUpEvent=null),e.physics&&e.removePhysics(),e.name&&t.zimObjectIDs[e.name]==e&&delete t.zimObjectIDs[e.name]}},t.Stage=function(e,r,i){if(Le("50.44"),!n(e)){var l=e.tagName=="CANVAS"?e:gn(e);n(l)||(this.cjsStage_constructor(e),this.setBounds(0,0,l.width,l.height),this.type="Stage",j.zdf||(j.zimDefaultFrame=j.zdf={stage:this}),i?Ne.Touch.enable(this,!0):r&&Ne.Touch.enable(this,!1),this.cache=function(a,s,c,d,C,T){if(n(c))if(n(a)){var h=this.getBounds();if(!n(h)){var w=this.borderWidth>0?this.borderWidth/2:0;a=h.x-w,s=h.y-w,c=h.width+w*2,d=h.height+w*2}}else c=a,d=s,a=0,s=0;return this.cjsStage_cache(a,s,c,d,C,T),this.z_bc=this.cacheCanvas,this},this.on("mousedown",function(a){var s=a.clone();s.type="pressdown",a.target.dispatchEvent(s)},void 0,!1,void 0,!0),this.loop=function(a,s,c,d,C,T){return t.loop(this,a,s,c,d,C,T)},this.hitTestGrid=function(a,s,c,d,C,T,h,w,A,y,v,P){return t.hitTestGrid(this,a,s,c,d,C,T,h,w,A,y,v,P)},this.disposeAllChildren=function(){for(var a=this.numChildren-1;a>=0;a--){var s=this.getChildAt(a);s.dispose&&s.dispose()}return this},this.frame=j.zdf,Ne&&!Ne.stageTransformable&&(j.zdf.retina||typeof exportRoot<"u")&&(Object.defineProperty(this,"scale",{get:function(){return this.cjsStage_scale},set:function(a){this.cjsStage_scaleX=a,this.cjsStage_scaleY=a,t.scaX=Ne.stageTransformable?1:a,t.scaY=Ne.stageTransformable?1:a}}),Object.defineProperty(this,"scaleX",{get:function(){return this.cjsStage_scaleX},set:function(a){this.cjsStage_scaleX=a,t.scaX=Ne.stageTransformable?1:a}}),Object.defineProperty(this,"scaleY",{get:function(){return this.cjsStage_scaleY},set:function(a){this.cjsStage_scaleY=a,t.scaY=Ne.stageTransformable?1:a}}),this.localToGlobal=function(a,s){return t.localToGlobal(a,s,this,this.cjsStage_localToGlobal)},this.globalToLocal=function(a,s){return t.globalToLocal(a,s,this,this.cjsStage_globalToLocal)},this.localToLocal=function(a,s,c){return t.localToLocal(a,s,c,this)}))}},t.extend(t.Stage,Ne.Stage,["cache","localToLocal","localToGlobal","globalToLocal"],"cjsStage",!1),t.StageGL=function(e,r,i,l){if(Le("50.45"),!n(e)){var a=e.tagName=="CANVAS"?e:gn(e);n(a)||(this.cjsStageGL_constructor(e,r),this.setBounds(0,0,a.width,a.height),this.type="StageGL",j.zdf||(j.zdf={stage:this}),l?Ne.Touch.enable(this,!0):i&&Ne.Touch.enable(this,!1),this.cache=function(s,c,d,C,T,h){if(n(d))if(n(s)){var w=this.getBounds();if(!n(w)){var A=this.borderWidth>0?this.borderWidth/2:0;s=w.x-A,c=w.y-A,d=w.width+A*2,C=w.height+A*2}}else d=s,C=c,s=0,c=0;return this.cjsStageGL_cache(s,c,d,C,T,h),this.z_bc=this.cacheCanvas,this},this.on("mousedown",function(s){var c=s.clone();c.type="pressdown",s.target.dispatchEvent(c)},void 0,!1,void 0,!0),this.loop=function(s,c,d,C,T,h){return t.loop(this,s,c,d,C,T,h)},this.hitTestGrid=function(s,c,d,C,T,h,w,A,y,v,P,x){return t.hitTestGrid(this,s,c,d,C,T,h,w,A,y,v,P,x)},this.disposeAllChildren=function(){for(var s=this.numChildren-1;s>=0;s--){var c=this.getChildAt(s);c.dispose&&c.dispose()}return this},this.frame=j.zdf,Ne&&!Ne.stageTransformable&&(j.zdf.retina||typeof exportRoot<"u")&&(Object.defineProperty(this,"scale",{get:function(){return this.cjsStage_scale},set:function(s){this.cjsStage_scaleX=s,this.cjsStage_scaleY=s,t.scaX=Ne.stageTransformable?1:s,t.scaY=Ne.stageTransformable?1:s}}),Object.defineProperty(this,"scaleX",{get:function(){return this.cjsStage_scaleX},set:function(s){this.cjsStage_scaleX=s,t.scaX=Ne.stageTransformable?1:s}}),Object.defineProperty(this,"scaleY",{get:function(){return this.cjsStage_scaleY},set:function(s){this.cjsStage_scaleY=s,t.scaY=Ne.stageTransformable?1:s}}),this.localToGlobal=function(s,c){return t.localToGlobal(s,c,this,this.cjsStageGL_localToGlobal)},this.globalToLocal=function(s,c){return t.globalToLocal(s,c,this,this.cjsStageGL_globalToLocal)},this.localToLocal=function(s,c,d){return t.localToLocal(s,c,d,this)}))}},t.extend(t.StageGL,Ne.StageGL,["cache","localToLocal","localToGlobal","globalToLocal"],"cjsStageGL",!1),t.Container=function(e,r,i,l,a,s,c){var d="a, b, c, d, style, group, inherit",C;if(C=lt(t.Container,arguments,d,this))return C;t.containerCheck||(Le("50.5"),Le("50.435"),t.containerCheck=!0),this.cjsContainer_constructor(),this.type="Container",this.group=s;var T=this,h=a===!1?{}:t.getStyle(this.type,this.group,c);n(e)&&(e=h.a!=null?h.a:null),n(r)&&(r=h.b!=null?h.b:null),n(i)&&(i=h.c!=null?h.c:null),n(l)&&(l=h.d!=null?h.d:null);var w=A(e,r,i,l);function A(v,P,x,E){var k=[];return n(v)?k=[v,P,x,E]:n(P)?v.x?k=[v.x,v.y,v.width,v.height]:(k[0]=0,k[1]=0,k[2]=v,k[3]=v):n(x)?(k[0]=0,k[1]=0,k[2]=v,k[3]=P):(k[0]=v,k[1]=P,k[2]=x,k[3]=E),n(k[3])&&(k[3]=k[2]),k}n(e)||this.setBounds(w[0],w[1],w[2],w[3]),this.cache=function(v,P,x,E,k,p,m,S,_){if(T.type=="AC"&&j.zdf)return j.zdf.ac("cache",arguments,T),T;var Y="a,b,c,d,scale,options,margin,rtl,willReadFrequently",B;if(B=lt(T.cache,arguments,Y))return B;var b=T.getBounds();if(n(x))if(n(v)){if(!n(b)){var X=T.borderWidth>0?T.borderWidth/2:0;v=b.x-X,P=b.y-X,x=b.width+X*2,E=b.height+X*2}}else x=v,E=P,v=0,P=0;return T.type=="Triangle"&&(v-=T.borderWidth?T.borderWidth:0,x+=T.borderWidth?T.borderWidth*2:0,P-=T.borderWidth?T.borderWidth:0,E+=T.borderWidth?T.borderWidth*2:0),n(m)&&(m=0),T.cjsContainer_cache(v-m,P-m,x+m*2,E+m*2,k,p,S,_),b&&T.setBounds(b.x,b.y,b.width,b.height),T.z_bc=T.cacheCanvas,T},this.uncache=function(){return T.cjsContainer_uncache(),T},this.childrenToBitmap=function(){var v=this.cacheCanvas,P=new t.Bitmap(this.cache().cacheCanvas);return v||this.uncache(),this.removeAllChildren(),P.addTo(this),this};var y=j.zdf||1;Ne&&!Ne.stageTransformable&&y.retina&&(this.localToGlobal=function(v,P){return t.localToGlobal(v,P,this,this.cjsContainer_localToGlobal)},this.globalToLocal=function(v,P){return t.globalToLocal(v,P,this,this.cjsContainer_globalToLocal)},this.localToLocal=function(v,P,x){return t.localToLocal(v,P,x,this)}),this.setBounds=function(v,P,x,E){var k=A(v,P,x,E);return T.cjsContainer_setBounds(k[0],k[1],k[2],k[3]),T},this.getBounds=function(v){return v?T.boundsToGlobal(null,null,null,v):T.cjsContainer_getBounds()},this.disposeAllChildren=function(){for(var v=this.numChildren-1;v>=0;v--){var P=this.getChildAt(v);P.dispose&&P.dispose()}return this},t.displayBase(T),a!==!1&&t.styleTransforms(this,h),this.clone=function(v){if(this.type=="AC"&&j.zdf)return dt&&$e("ZIM asset() - cannot clone lazy-loaded asset - use Frame() assets parameter or loadAssets() method"),j.zdf.ac("clone",arguments,this),this;var P=this.getBounds();return n(P)&&(P={x:null,y:null,width:null,height:null}),this.cloneChildren(this.cloneProps(new t.Container(P.x,P.y,P.width,P.height,a,this.group,c)),v)},this.hasProp=function(v){return!n(this[v])||Object.prototype.hasOwnProperty.call(this,v)}},t.Container.prototype.dispose=function(e){return Pt(this,e),!0},t.Container.prototype.specialColor=function(e,r,i){if(r.type=="GradientColor"){if(!n(r.angle))if(i.width){var l=i.getBounds();if(r.angle+=360*1e5,r.angle%=360,i.type=="Circle"){var a=l.width/2*Math.cos(r.angle*RAD),s=l.width/2*Math.sin(r.angle*RAD);r.x0=-a,r.y0=-s,r.x1=a,r.y1=s}else{var c=r.angle%90,d=l.width*Math.sin(c*RAD),C=d*Math.sin(c*RAD),T=-d*Math.cos(c*RAD),h=l.height*Math.sin(c*RAD),w=l.width+h*Math.cos(c*RAD),A=h*Math.sin(c*RAD),y=l.height*Math.sin(c*RAD),v=-y*Math.cos(c*RAD),P=l.height-y*Math.sin(c*RAD);r.angle>=0&&r.angle<90?(r.x0=l.x+C,r.y0=l.y+T,r.x1=l.x+w,r.y1=l.y+A):r.angle>=90&&r.angle<180?(r.x0=l.x+C,r.y0=l.y+T,r.x1=l.x+v,r.y1=l.y+P):r.angle>=180&&r.angle<270?(r.x0=l.x+w,r.y0=l.y+A,r.x1=l.x+C,r.y1=l.y+T):(r.x0=l.x+v,r.y0=l.y+P,r.x1=l.x+C,r.y1=l.y+T)}}else{e.style=r.colors[0];return}e.linearGradient(r.colors,r.ratios,r.x0,r.y0,r.x1,r.y1)}else if(r.type=="RadialColor"){if(n(r.x0))if(i.width){var l=i.getBounds();r.r0=0,i.type=="Circle"?(r.x0=0,r.y0=0,r.r1=l.width/2):(r.x0=l.x+l.width/2,r.y0=l.y+l.height/2,r.r1=Math.sqrt(Math.pow(l.width/2,2)+Math.pow(l.height/2,2))),r.x1=r.x0,r.y1=r.y0}else{e.style=r.colors[0];return}e.radialGradient(r.colors,r.ratios,r.x0,r.y0,r.r0,r.x1,r.y1,r.r1)}else r.type=="BitmapColor"&&e.bitmap(r.image,r.repetition,r.matrix)};function Pt(e,r){if(e&&t.gD(e),!r&&e&&e.dispose&&e.dispose!==t.Container.prototype.dispose&&e.dispose(null,null,!0),e&&e.addChild&&(e.dispatchEvent("removed"),e.removeAllEventListeners(),e.numChildren))for(var i=e.numChildren-1;i>=0;i--)Pt(e.getChildAt(i));e&&e.parent&&e.parent.removeChild(e)}t.extend(t.Container,Ne.Container,["cache","uncache","setBounds","getBounds","clone","localToLocal","localToGlobal","globalToLocal"],"cjsContainer",!1),Dn(t.Container.prototype),t.Shape=function(e,r,i,l,a,s,c,d,C){var T="a, b, c, d, graphics, optimize, style, group, inherit",h;if(h=lt(t.Shape,arguments,T,this))return h;Le("50.6"),this.cjsShape_constructor(a),this.type="Shape",this.group=d;var w=c===!1?{}:t.getStyle(this.type,this.group,C),A=this;n(e)&&(e=w.a!=null?w.a:null),n(r)&&(r=w.b!=null?w.b:null),n(i)&&(i=w.c!=null?w.c:null),n(l)&&(l=w.d!=null?w.d:null),n(a)&&(a=w.graphics!=null?w.graphics:null),n(s)&&(s=w.optimize!=null?w.optimize:!1);var y=v(e,r,i,l);function v(k,p,m,S){var _=[];return n(k)?_=[k,p,m,S]:n(p)?k.x?_=[k.x,k.y,k.width,k.height]:(_[0]=0,_[1]=0,_[2]=k,_[3]=k):n(m)?(_[0]=0,_[1]=0,_[2]=k,_[3]=p):(_[0]=k,_[1]=p,_[2]=m,_[3]=S),n(_[3])&&(_[3]=_[2]),_}if(n(e)||this.setBounds(y[0],y[1],y[2],y[3]),!s)for(var P=["mt","lt","a","at","bt","ct","qt","cp","c","f","lf","rf","bf","ef","ss","sd","s","ls","rs","bs","es","dr","rr","rc","dc","de","dp","pg","p"],x=0;x<P.length;x++)~function(){var k=x;A[P[k]]=function(){return P[k]=="ct"?A.graphics.curveTo.apply(A.graphics,arguments):A.graphics[P[k]].apply(A.graphics,arguments),A}}();Object.defineProperty(A,"command",{get:function(){return A.graphics.command},set:function(){}}),this.cache=function(k,p,m,S,_,Y,B,b,X){var V="a,b,c,d,scale,options,margin,rtl,willReadFrequently",O;if(O=lt(A.cache,arguments,V))return O;var Z=A.getBounds();if(n(m))if(n(k)){if(!n(Z)){var W=A.borderWidth>0?A.borderWidth/2:0;k=Z.x-W,p=Z.y-W,m=Z.width+W*2,S=Z.height+W*2}}else m=k,S=p,k=0,p=0;return n(B)&&(B=0),A.cjsShape_cache(k-B,p-B,m+B*2,S+B*2,_,Y,b,X),A.z_bc=A.cacheCanvas,A},this.setBounds=function(k,p,m,S){var _=v(k,p,m,S);return this.cjsShape_setBounds(_[0],_[1],_[2],_[3]),this},this.getBounds=function(k){return k?A.boundsToGlobal(null,null,null,k):A.cjsShape_getBounds()},c!==!1&&t.styleTransforms(this,w),this.clone=function(k){n(k)&&(k=!0);var p=this.getBounds();n(p)&&(p={x:null,y:null,width:null,height:null});var m=A.cloneProps(new t.Shape(p.x,p.y,p.width,p.height,a,c,d,C));return k?m.graphics=A.graphics.clone():m.graphics=A.graphics,m};var E=j.zdf||1;Ne&&!Ne.stageTransformable&&E.retina&&(this.localToGlobal=function(k,p){return t.localToGlobal(k,p,this,this.cjsShape_localToGlobal)},this.globalToLocal=function(k,p){return t.globalToLocal(k,p,this,this.cjsShape_globalToLocal)},this.localToLocal=function(k,p,m){return t.localToLocal(k,p,m,this)}),this.hasProp=function(k){return!n(this[k])||Object.prototype.hasOwnProperty.call(this,k)},t.displayBase(A),this.dispose=function(){t.gD(this),this.graphics.c(),this.dispatchEvent("removed"),this.removeAllEventListeners(),this.parent&&this.parent.removeChild(this)}},t.extend(t.Shape,Ne.Shape,["cache","clone","setBounds","getBounds","localToLocal","localToGlobal","globalToLocal"],"cjsShape",!1),Dn(t.Shape.prototype),t.Bitmap=function(e,r,i,l,a,s,c,d,C){var T="image, width, height, left, top, scale, style, group, inherit",h;if(h=lt(t.Bitmap,arguments,T,this))return h;Le("50.7"),this.group=d;var w=c===!1?{}:t.getStyle("Bitmap",this.group,C);n(s)&&(s=w.scale!=null?w.scale:1),n(r)&&(r=w.width!=null?w.width:e?e.width:100),n(i)&&(i=w.height!=null?w.height:e?e.height:100),n(l)&&(l=w.left!=null?w.left:0),n(a)&&(a=w.top!=null?w.top:0);var A=!1,y=e;if(!n(e)&&e.uncache){A=!0;var v=e.cacheCanvas,P=e;e.cache(l,a,r,i,s),this.z_bc=e=e.cacheCanvas}this.cjsBitmap_constructor(e),P&&!v&&P.uncache();var x=this;this.type="Bitmap",!n(r)&&!n(i)&&this.setBounds(0,0,r,i),this.drawImageData=function(m,S,_,Y,B,b){if(n(m)&&(m=0),n(S)&&(S=0),n(_)&&(_=0),n(Y)&&(Y=0),n(B)&&(B=r),n(b)&&(b=i),!x.proxyCanvas){var X=x.proxyCanvas=document.createElement("canvas");X.setAttribute("width",r),X.setAttribute("height",i),x.proxyContext=X.getContext("2d"),e=y=x.image=X}x.proxyContext&&x.proxyContext.putImageData(x.imageData,m,S,_,Y,B,b)},j.zdf&&(j.zdf.canvas.getContext("2d")?this.imageData=j.zdf.canvas.getContext("2d").createImageData(r,i):this.imageData=document.createElement("canvas").getContext("2d").createImageData(r,i),n(e)&&x.drawImageData(),e&&e.match&&e.match(/data:image/i)&&setTimeout(function(){x.stage&&x.stage.update(),setTimeout(function(){x.stage&&x.stage.update()},50)},50)),e&&e.nodeName&&e.nodeName.toLowerCase()!="video"&&(A?x.sourceRect={x:0,y:0,width:r*s,height:i*s}:x.sourceRect={x:l,y:a,width:r,height:i});function E(m,S,_,Y){var B=[];return n(m)?B=[m,S,_,Y]:n(S)?m.x?B=[m.x,m.y,m.width,m.height]:(B[0]=0,B[1]=0,B[2]=m,B[3]=m):n(_)?(B[0]=0,B[1]=0,B[2]=m,B[3]=S):(B[0]=m,B[1]=S,B[2]=_,B[3]=Y),n(B[3])&&(B[3]=B[2]),B}this.setBounds=function(m,S,_,Y){var B=E(m,S,_,Y);return x.cjsBitmap_setBounds(B[0],B[1],B[2],B[3]),x},this.getBounds=function(m){return m?x.boundsToGlobal(null,null,null,m):x.cjsBitmap_getBounds()},this.cache=function(m,S,_,Y,B,b,X,V){var O="a,b,c,d,scale,options,rtl,willReadFrequently",Z;if(Z=lt(x.cache,arguments,O))return Z;var W;if(n(_))if(n(m)){if(W=this.getBounds(),!n(W)){var K=this.borderWidth>0?this.borderWidth/2:0;m=W.x-K,S=W.y-K,_=W.width+K*2,Y=W.height+K*2}}else _=m,Y=S,m=0,S=0;return W=x.getBounds(),x.cjsBitmap_cache(m,S,_,Y,B,b,X,V),x.setBounds(W.x,W.y,W.width,W.height),x.z_bc=x.cacheCanvas,x},this.clone=function(){var m=this.cloneProps(new t.Bitmap(y,r,i,l,a,s,c,this.group,C));return m.cloned=!0,m.src=x.src,m.file=x.file,m.image=x.image,m.svg=x.svg,m.item=x.item,m};var k=j.zdf||1;Ne&&!Ne.stageTransformable&&k.retina&&(this.localToGlobal=function(m,S){return t.localToGlobal(m,S,this,this.cjsBitmap_localToGlobal)},this.globalToLocal=function(m,S){return t.globalToLocal(m,S,this,this.cjsBitmap_globalToLocal)},this.localToLocal=function(m,S,_){return t.localToLocal(m,S,_,this)}),this.hasProp=function(m){return!n(this[m])||Object.prototype.hasOwnProperty.call(this,m)};var p;this.getColorAt=function(m,S,_){p||(x.cache(null,null,null,null,null,null,null,!0),p=x.cacheCanvas.getContext("2d"),x.uncache());var Y=p.getImageData(m,S,1,1).data;return Y[3]/=255,_?Y:"rgba("+Y[0]+","+Y[1]+","+Y[2]+","+Y[3]+")"},this.keyOut=function(m,S,_){n(m)&&(m="#389b26"),n(S)&&(S=.1),Array.isArray(m)||(m=[m]),Array.isArray(S)||(S=[S]),!n(_)&&!Array.isArray(_)&&(_=[_]);var Y,B,b=[],X=[],V=[];for(Y=0;Y<m.length;Y++)b[Y]=t.convertColor(m[Y],"array"),S[Y]!=null?X[Y]=S[Y]*255:X[Y]=S[0]*255,_&&(_[Y]!=null?(V[Y]=t.convertColor(_[Y],"array"),V[Y][3]*=255):(V[Y]=t.convertColor(_[0],"array"),V[Y][3]*=255));x.cacheCanvas&&x.updateCache(),p||(x.cache(null,null,null,null,null,null,null,!0),p=x.cacheCanvas.getContext("2d"));var O=p.getImageData(l,a,r,i),Z=O.data,W=Z.length/4;if(_)for(Y=0;Y<W;Y++){var K=Z[Y*4+0],ne=Z[Y*4+1],F=Z[Y*4+2];for(B=0;B<m.length;B++)K>b[B][0]-X[B]&&K<b[B][0]+X[B]&&ne>b[B][1]-X[B]&&ne<b[B][1]+X[B]&&F>b[B][2]-X[B]&&F<b[B][2]+X[B]&&(Z[Y*4+0]=V[B][0],Z[Y*4+1]=V[B][1],Z[Y*4+2]=V[B][2],Z[Y*4+3]=V[B][3])}else for(Y=0;Y<W;Y++){var K=Z[Y*4+0],ne=Z[Y*4+1],F=Z[Y*4+2];for(B=0;B<m.length;B++)K>b[B][0]-X[B]&&K<b[B][0]+X[B]&&ne>b[B][1]-X[B]&&ne<b[B][1]+X[B]&&F>b[B][2]-X[B]&&F<b[B][2]+X[B]&&(Z[Y*4+3]=0)}return p.putImageData(O,a,l),this},t.displayBase(x),c!==!1&&t.styleTransforms(this,w),this.doDispose=function(){t.gD(this),this.dispatchEvent("removed"),this.removeAllEventListeners(),this.cloned||this.id&&(this.stage&&this.stage.frame?k=this.stage.frame:k=j.zdf,k&&k.assets&&k.assets[this.id]&&delete k.assets[this.id],t.assets[this.id]&&delete t.assets[this.id]),this.parent&&this.parent.removeChild(this)}},t.Bitmap.fromData=function(e,r){var i=100,l=100,a=new Image;a.onload=function(){i=a.naturalWidth,l=a.naturalHeight,n(i)&&(i=a.width),n(l)&&(l=a.height);var s=new t.Bitmap(e,i,l);setTimeout(function(){r(s)},50)},a.src=e},t.extend(t.Bitmap,Ne.Bitmap,["cache","clone","dispose","setBounds","getBounds","localToLocal","localToGlobal","globalToLocal"],"cjsBitmap",!1),t.Bitmap.prototype.dispose=function(){return this.doDispose()},Dn(t.Bitmap.prototype),t.Sprite=function(e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,x,E,k,p){var m="image, cols, rows, count, offsetX, offsetY, spacingX, spacingY, width, height, animations, json, id, globalControl, spriteSheet, label, frame, style, group, inherit",S;if(S=lt(t.Sprite,arguments,m,this))return S;Le("50.8"),this.type="Sprite",this.group=k;var _=E===!1?{}:t.getStyle(this.type,this.group,p),Y=this,B;if(n(x)&&(x=_.frame!=null?_.frame:j.zdf),e&&typeof e=="string"&&(e=x.asset(e)),n(w)&&!n(e)){n(r)&&(r=_.cols!=null?_.cols:1),n(i)&&(i=_.rows!=null?_.rows:1),n(l)&&(l=_.count!=null?_.count:r*i),n(a)&&(a=_.offsetX!=null?_.offsetX:0),n(s)&&(s=_.offsetY!=null?_.offsetY:0),n(c)&&(c=_.spacingX!=null?_.spacingX:0),n(d)&&(d=_.spacingY!=null?_.spacingY:0),n(C)&&(C=_.width!=null?_.width:e.width),n(T)&&(T=_.height!=null?_.height:e.height),e.bitmap&&(e=e.bitmap);var b=(C-a+c)/r-c,X=(T-s+d)/i-d,V=[],O=0;e:for(var Z=0;Z<i;Z++)for(var W=0;W<r;W++){if(++O>l)break e;V.push([a+W*(b+c),s+Z*(X+d),b,X])}f(e,V,h)}else if(v)B=v,h=B.animations;else if(w){var x=Y.stage?Y.stage.frame:j.zdf;typeof w=="string"&&(w=x.asset(w));var K,ne,F;if(w.frames&&!Array.isArray(w.frames)){K=[];for(ne in w.frames)F=w.frames[ne].frame,K.push([F.x,F.y,F.w,F.h]);w.frames=K}if(w.frames&&!Array.isArray(w.frames[0])){for(K=[],ne=0;ne<w.frames.length;ne++){var F=w.frames[ne].frame;K.push([F.x,F.y,F.w,F.h])}w.frames=K}if(!w.images&&w.meta&&w.meta.image&&(w.images=[w.meta.image]),V=w.frames,h=w.animations,!n(e))f(e,V,h);else{var D=w.images?w.images[0]:null;if(!D||!D.split)B=new Ne.SpriteSheet(w);else{var u=[];t.loop(w.images,function(R){var le=R.split("/").pop();x.asset(le)&&x.asset(le).type!="EmptyAsset"?u.push(x.asset(le)):x.asset(R)&&x.asset(R).type!="EmptyAsset"||x.asset(R).type!="EmptyAsset"?u.push(x.asset(R)):dt&&$e("Sprite() - please preload Sprite in Frame or with loadAssets")}),f(u,V,h)}}}else return;function f(I,R,le){Array.isArray(I)||(I=[I]),t.loop(I,function(L,ee){I[ee]=L.image});var N={images:I,frames:R,animations:le||[]};B=new Ne.SpriteSheet(N)}this.animations=h,this.cjsSprite_constructor(B,P),n(P)||this.stop(),n(A)&&(A=t.makeID()),this.id=A,n(y)&&(y=!0),Y.globalControl=y;var o=0,g;this.parseFrames=function(I,R,le,N){var L=[],ee=Number.MAX_VALUE,z=0;if(n(I))n(R)&&(R=0),n(le)&&(le=Y.totalFrames-1),U(R,le);else{if(n(Y.animations)||n(Y.animations[I]))return[];var $=Y.animations[I];xe($)}function xe(ye){Array.isArray(ye)?ie(ye):ye.constructor=={}.constructor?ke(ye):isNaN(ye)||L.push({f:Math.floor(ye),s:1})}function ie(ye){U(ye[0],ye[1],ye[3]),ye[2]&&!n(Y.animations[ye[2]])&&xe(Y.animations[ye[2]])}function ke(ye){if(!n(ye.frames)){n(ye.speed)&&(ye.speed=1);for(var H=0;H<ye.frames.length;H++)ye.speed<ee&&(ee=ye.speed),ye.speed>z&&(z=ye.speed),L.push({f:ye.frames[H],s:ye.speed});ye.next&&!n(Y.animations[ye.next])&&xe(Y.animations[ye.next])}}function U(ye,H,re){n(re)&&(re=1);var pe;if(H>ye)for(pe=ye;pe<=H;pe++)te(pe);else for(pe=H;pe<=ye;pe++)te(ye-(pe-H));function te(ge){re<ee&&(ee=re),re>z&&(z=re),L.push({f:ge,s:re})}}if(N)return L;ee=t.constrain(t.decimals(ee),.1),z=t.constrain(t.decimals(z),.1);for(var Ee=[],Q=ee!=z,G,ue=0;ue<L.length;ue++)if(G=L[ue],Q)for(var fe=0;fe<t.constrain(Math.round(ee<1?G.s/ee:G.s),.1);fe++)Ee.push(G.f);else Ee.push(G.f);return Ee},this.run=function(I,R,le,N,L,ee,z,$,xe,ie,ke,U,Ee,Q,G,ue,fe,ye,H,re,pe,te,ge,Ae,ae,de,se,Ie,Te){var ve="time, label, call, params, wait, waitedCall, waitedParams, loop, loopCount, loopWait, loopCall, loopParams, loopWaitCall, loopWaitParams, loopPick, rewind, rewindWait, rewindCall, rewindParams, rewindWaitCall, rewindWaitParams, rewindTime, rewindEase, startFrame, endFrame, tweek, id, globalControl, pauseOnBlur",J;if(J=lt(Y.run,arguments,ve))return J;var Se=Tt(),Be;n(de)&&(de=1),n(se)||(Y.id=se),n(Ie)||(Y.globalControl=Ie);var Ye;if(Array.isArray(R)){var Ke,at;Be=[],Ye=0;for(var me,Ge=0;Ge<R.length;Ge++){Ke=R[Ge],Ke.lookup=Y.parseFrames(Ke.label,Ke.startFrame,Ke.endFrame),Ge==0&&(me=Ke.lookup[0]),delete Ke.startFrame,delete Ke.endFrame,Ke.obj=t.merge(Ke.obj,{normalizedFrame:Ke.lookup.length-1}),Ke.set=t.merge(Ke.set,{normalizedFrames:{noPick:Ke.lookup},normalizedFrame:0}),n(Ke.wait)&&(Ke.wait=Ye*de),at=Ke.label,delete Ke.label,Be.push(Ke),Ye=0;var Je=n(Ke.time)?I:Ke.time;ae-Ae>0&&(Ye=Je/(ae-Ae)/2)}if(Be.length==0)return this;Be.length==1?(I=Be[0].time,R=at,ce()):Y.gotoAndStop(me)}else ce();function ce(){g=Y.parseFrames(R,Ae,ae),o=0,Y.gotoAndStop(g[o]),Ae=ae=null,Be={normalizedFrame:g.length-1}}n(I)&&(I=Se=="s"?1:1e3),Y.running&&Y.stopAnimate(Y.id),Y.running=!0,Array.isArray(Be)||(Ye=0,ae-Ae>0&&(Ye=I/Math.abs(ae-Ae)/2),g&&g.length>0&&(Ye=I/g.length/2),!n($)&&n(ie)&&(ie=Ye*de),!n(ue)&&n(fe)&&(fe=Ye*de));var oe=function(){Y.running=!1,Y.stop(),le&&typeof le=="function"&&le(N||Y)};return t.animate({target:Y,obj:Be,time:I,ease:"linear",call:oe,params:N,wait:L,waitedCall:ee,waitedParams:z,loop:$,loopCount:xe,loopWait:ie,loopCall:ke,loopParams:U,loopWaitCall:Ee,loopWaitParams:Q,rewind:ue,rewindWait:fe,rewindCall:ye,rewindParams:H,rewindWaitCall:re,rewindWaitParams:pe,rewindTime:te,rewindEase:ge,override:!1,pauseOnBlur:Te,id:Y.id}),Y.runPaused=!1,Y},this.runPaused=!0,this.pauseRun=function(I){return n(I)&&(I=!0),Y.runPaused=I,Y.globalControl?t.pauseAnimate(I,Y.id):Y.pauseAnimate(I,Y.id),Y},this.stopRun=function(){return Y.runPaused=!0,Y.running=!1,Y.globalControl?t.stopAnimate(Y.id):Y.stopAnimate(Y.id),Y},Object.defineProperty(this,"frame",{get:function(){return this.currentFrame},set:function(I){I=Math.round(I),this.paused?this.gotoAndStop(I):this.gotoAndPlay(I)}}),Object.defineProperty(this,"normalizedFrame",{get:function(){return o},set:function(I){o=Math.round(I),this.gotoAndStop(g[o])}}),Object.defineProperty(this,"normalizedFrames",{get:function(){return g},set:function(I){g=I}}),Object.defineProperty(this,"totalFrames",{get:function(){return B.getNumFrames()},set:function(){$e("zim.Sprite - totalFrames is read only")}}),E!==!1&&t.styleTransforms(this,_),this.clone=function(){var I=this.cloneProps(new t.Sprite(e,r,i,l,a,s,c,d,C,T,h,w,null,y,v,P,x,E,this.group,p));return Y.frame>=0&&I.run({startFrame:Y.frame,endFrame:Y.frame}),I},Ne&&!Ne.stageTransformable&&x.retina&&(this.localToGlobal=function(I,R){return t.localToGlobal(I,R,this,this.cjsSprite_localToGlobal)},this.globalToLocal=function(I,R){return t.globalToLocal(I,R,this,this.cjsSprite_globalToLocal)},this.localToLocal=function(I,R,le){return t.localToLocal(I,R,le,this)}),this.hasProp=function(I){return!n(this[I])||Object.prototype.hasOwnProperty.call(this,I)},t.displayBase(Y);function q(I,R,le,N){var L=[];return n(I)?L=[I,R,le,N]:n(R)?I.x?L=[I.x,I.y,I.width,I.height]:(L[0]=0,L[1]=0,L[2]=I,L[3]=I):n(le)?(L[0]=0,L[1]=0,L[2]=I,L[3]=R):(L[0]=I,L[1]=R,L[2]=le,L[3]=N),n(L[3])&&(L[3]=L[2]),L}this.setBounds=function(I,R,le,N){var L=q(I,R,le,N);return Y.cjsSprite_setBounds(L[0],L[1],L[2],L[3]),Y},this.getBounds=function(I){return I?Y.boundsToGlobal(null,null,null,I):Y.cjsSprite_getBounds()},this.dispose=function(){t.gD(this),this.dispatchEvent("removed"),this.removeAllEventListeners(),this.parent&&this.parent.removeChild(this)}},t.extend(t.Sprite,Ne.Sprite,["clone","setBounds","getBounds","localToLocal","localToGlobal","globalToLocal"],"cjsSprite",!1),Dn(t.Sprite.prototype),t.MovieClip=function(e,r,i,l,a,s,c){var d="mode, startPosition, loop, labels, style, group, inherit",C;if(C=lt(t.MovieClip,arguments,d,this))return C;Le("50.9"),this.type="MovieClip",this.group=s;var T=a===!1?{}:t.getStyle(this.type,this.group,c);n(e)&&(e=T.mode!=null?T.mode:null),n(r)&&(r=T.startPosition!=null?T.startPosition:null),n(i)&&(i=T.loop!=null?T.loop:null),n(l)&&(l=T.labels!=null?T.labels:null),this.cjsMovieClip_constructor(e,r,i,l),a!==!1&&t.styleTransforms(this,T),this.clone=function(){return this.cloneProps(new t.MovieClip(e,r,i,l,a,this.group,c))},this.hasProp=function(A){return!n(this[A])||Object.prototype.hasOwnProperty.call(this,A)};var h=j.zdf||1;Ne&&!Ne.stageTransformable&&h.retina&&(this.localToGlobal=function(A,y){return t.localToGlobal(A,y,this,this.cjsMovieClip_localToGlobal)},this.globalToLocal=function(A,y){return t.globalToLocal(A,y,this,this.cjsMovieClip_globalToLocal)},this.localToLocal=function(A,y,v){return t.localToLocal(A,y,v,this)}),t.displayBase(this);function w(A,y,v,P){var x=[];return n(A)?x=[A,y,v,P]:n(y)?A.x?x=[A.x,A.y,A.width,A.height]:(x[0]=0,x[1]=0,x[2]=A,x[3]=A):n(v)?(x[0]=0,x[1]=0,x[2]=A,x[3]=y):(x[0]=A,x[1]=y,x[2]=v,x[3]=P),n(x[3])&&(x[3]=x[2]),x}this.setBounds=function(A,y,v,P){var x=w(A,y,v,P);return that.cjsMovieClip_setBounds(x[0],x[1],x[2],x[3]),that},this.getBounds=function(A){return A?that.boundsToGlobal(null,null,null,A):that.cjsMovieClip_getBounds()},this.dispose=function(){t.gD(this),this.dispatchEvent("removed"),this.removeAllEventListeners(),this.parent&&this.parent.removeChild(this)}},t.extend(t.MovieClip,Ne.MovieClip,["clone","setBounds","getBounds","localToLocal","localToGlobal","globalToLocal"],"cjsMovieClip",!1),Dn(t.MovieClip.prototype),t.SVGContainer=function(e,r,i,l,a,s,c,d){var C="svg, splitTypes, geometric, showControls, interactive, style, group, inherit",T;if(T=lt(t.SVGContainer,arguments,C,this))return T;Le("50.95"),this.group=c;var h=s===!1?{}:t.getStyle("SVGContainer",this.group,d);e&&e.type=="Bitmap"&&(e=e.svg);var w=this,A=new t.Point(0,0),y;function v(){function q(ke,U){return L(ke)||N(ke,U)||R(ke,U)||I()}function I(){throw new TypeError("Invalid")}function R(ke,U){if(ke){if(typeof ke=="string")return le(ke,U);var Ee=Object.prototype.toString.call(ke).slice(8,-1);if(Ee==="Object"&&ke.constructor&&(Ee=ke.constructor.name),Ee==="Map"||Ee==="Set")return Array.from(ke);if(Ee==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ee))return le(ke,U)}}function le(ke,U){(U==null||U>ke.length)&&(U=ke.length);for(var Ee=0,Q=new Array(U);Ee<U;Ee++)Q[Ee]=ke[Ee];return Q}function N(ke,U){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(ke)))){var Ee=[],Q=!0,G=!1,ue=void 0;try{for(var fe=ke[Symbol.iterator](),ye;!(Q=(ye=fe.next()).done)&&(Ee.push(ye.value),!(U&&Ee.length===U));Q=!0);}catch(H){G=!0,ue=H}finally{try{!Q&&fe.return!=null&&fe.return()}finally{if(G)throw ue}}return Ee}}function L(ke){if(Array.isArray(ke))return ke}var ee=Math.PI*2,z=function(U,Ee,Q,G,ue,fe,ye){var H=U.x,re=U.y;H*=Ee,re*=Q;var pe=G*H-ue*re,te=ue*H+G*re;return{x:pe+fe,y:te+ye}},$=function(U,Ee){var Q=Ee===1.5707963267948966?.551915024494:Ee===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(Ee/4),G=Math.cos(U),ue=Math.sin(U),fe=Math.cos(U+Ee),ye=Math.sin(U+Ee);return[{x:G-ue*Q,y:ue+G*Q},{x:fe+ye*Q,y:ye-fe*Q},{x:fe,y:ye}]},xe=function(U,Ee,Q,G){var ue=U*G-Ee*Q<0?-1:1,fe=U*Q+Ee*G;return fe>1&&(fe=1),fe<-1&&(fe=-1),ue*Math.acos(fe)},ie=function(U,Ee,Q,G,ue,fe,ye,H,re,pe,te,ge){var Ae=Math.pow(ue,2),ae=Math.pow(fe,2),de=Math.pow(te,2),se=Math.pow(ge,2),Ie=Ae*ae-Ae*se-ae*de;Ie<0&&(Ie=0),Ie/=Ae*se+ae*de,Ie=Math.sqrt(Ie)*(ye===H?-1:1);var Te=Ie*ue/fe*ge,ve=Ie*-fe/ue*te,J=pe*Te-re*ve+(U+Q)/2,Se=re*Te+pe*ve+(Ee+G)/2,Be=(te-Te)/ue,Ye=(ge-ve)/fe,Ke=(-te-Te)/ue,at=(-ge-ve)/fe,me=xe(1,0,Be,Ye),Ge=xe(Be,Ye,Ke,at);return H===0&&Ge>0&&(Ge-=ee),H===1&&Ge<0&&(Ge+=ee),[J,Se,me,Ge]};return function(U){var Ee=U.px,Q=U.py,G=U.cx,ue=U.cy,fe=U.rx,ye=U.ry,H=U.xAxisRotation,re=H===void 0?0:H,pe=U.largeArcFlag,te=pe===void 0?0:pe,ge=U.sweepFlag,Ae=ge===void 0?0:ge,ae=[];if(fe===0||ye===0)return[];var de=Math.sin(re*ee/360),se=Math.cos(re*ee/360),Ie=se*(Ee-G)/2+de*(Q-ue)/2,Te=-de*(Ee-G)/2+se*(Q-ue)/2;if(Ie===0&&Te===0)return[];fe=Math.abs(fe),ye=Math.abs(ye);var ve=Math.pow(Ie,2)/Math.pow(fe,2)+Math.pow(Te,2)/Math.pow(ye,2);ve>1&&(fe*=Math.sqrt(ve),ye*=Math.sqrt(ve));var J=ie(Ee,Q,G,ue,fe,ye,te,Ae,de,se,Ie,Te),Se=q(J,4),Be=Se[0],Ye=Se[1],Ke=Se[2],at=Se[3],me=Math.abs(at)/(ee/4);Math.abs(1-me)<1e-7&&(me=1);var Ge=Math.max(Math.ceil(me),1);at/=Ge;for(var Je=0;Je<Ge;Je++)ae.push($(Ke,at)),Ke+=at;return ae.map(function(ce){var oe=z(ce[0],fe,ye,se,de,Be,Ye),_e=oe.x,je=oe.y,Ve=z(ce[1],fe,ye,se,de,Be,Ye),De=Ve.x,Oe=Ve.y,Re=z(ce[2],fe,ye,se,de,Be,Ye),Ze=Re.x,be=Re.y;return{x1:_e,y1:je,x2:De,y2:Oe,x:Ze,y:be}})}}n(r)&&(r=!1),n(i)&&(i=!0);var P,x;function E(q){t.loop(q,function(I){var R=I.tagName.toLowerCase();if(R=="path"&&g(I),R=="circle"&&p("circle",I),R=="rect"&&p("rect",I),R=="ellipse"&&p("ellipse",I),R=="line"&&p("line",I),R=="polygon"&&p("polygon",I),R=="polyline"&&p("polyline",I),R=="g"){var le=I.getAttribute("style"),N,L,ee,z,$;if(le){var xe=k(le);N=xe[0],L=xe[1],ee=xe[2],z=xe[3],$=xe[4]}u=I.getAttribute("transform"),X=I.getAttribute("fill")?I.getAttribute("fill"):n(N)?b:N,O=I.getAttribute("stroke")?I.getAttribute("stroke"):n(L)?V:L,W=I.getAttribute("stroke-width")?I.getAttribute("stroke-width"):n(ee)?Z:ee,ne=I.getAttribute("fill-opacity")?I.getAttribute("fill-opacity"):n(z)?K:z,D=I.getAttribute("stroke-opacity")?I.getAttribute("stroke-opacity"):n($)?F:$}E(I.children),I.tagName.toLowerCase()=="g"&&(X=b,O=V,W=Z,ne=K,D=F,u=null)})}function k(q){var I=q.split(";"),R,le,N,L,ee;return t.loop(I,function(z){z=z.replace(/,/g,"");var $=z.split(":"),xe=$[0].trim().toLowerCase(),ie=$[1].trim().toLowerCase().replace("px","");xe=="fill"&&(R=ie),xe=="stroke"&&(le=ie),xe=="stroke-width"&&(N=ie),xe=="opacity"&&(L=ie,ee=ie),xe=="fill-opacity"&&(L=ie),xe=="stroke-opacity"&&(ee=ie)}),[R,le,N,L,ee]}function p(q,I){var R,le=o(I),N=le[0],L=le[1],ee=le[2],z=le[5],$=le[6];if(q=="circle"){var xe=Number(I.getAttribute("r").trim()),ie=xe*.5523;i?R=new t.Circle(Number(I.getAttribute("r")),N,L,ee):R=new t.Blob(N,L,ee,4,xe,ie,"mirror",null,l,null,null,null,null,null,null,null,null,null,null,null,null,null,a)}else if(q=="rect")if(i)R=new t.Rectangle(Number(I.getAttribute("width")),Number(I.getAttribute("height")),N,L,ee,Number(I.getAttribute("rx")));else{var ke=Number(I.getAttribute("width")),U=Number(I.getAttribute("height")),Ee=Number(I.getAttribute("rx")),Q=Number(I.getAttribute("ry"));if(Ee&&Q){var G=Ee*.5523,ue=Q*.5523;R=new t.Blob(N,L,ee,[[Ee,0,0,0,-G,0,0,0,"free"],[ke-Ee,0,0,0,0,0,G,0,"free"],[ke,Q,0,0,0,-ue,0,0,"free"],[ke,U-Q,0,0,0,0,0,ue,"free"],[ke-Ee,U,0,0,G,0,0,0,"free"],[Ee,U,0,0,0,0,-G,0,"free"],[0,U-Q,0,0,0,ue,0,0,"free"],[0,Q,0,0,0,0,0,-ue,"free"]],null,null,null,null,l,null,null,null,null,null,null,null,null,null,null,null,null,null,a)}else R=new t.Blob(N,L,ee,[[0,0],[ke,0],[ke,U],[0,U]],null,null,null,null,l,null,null,null,null,null,null,null,null,null,null,null,null,null,a)}else if(q=="line")R=new t.Squiggle(L,ee,[[Number(I.getAttribute("x1")),Number(I.getAttribute("y1"))],[Number(I.getAttribute("x2")),Number(I.getAttribute("y2"))]],null,null,null,null,l,null,null,null,null,null,null,null,null,null,null,null,null,null,a);else if(q=="polygon"||q=="polyline"){var fe=I.getAttribute("points");fe=fe.replace(/-/g," -"),fe=fe.replace(/\s+/g," ");var ye=[];if(fe.indexOf(",")!=-1)t.loop(fe.split(" "),function(pe){var te=pe.split(",");ye.push([Number(te[0].trim()),Number(te[1].trim())])});else{var H;t.loop(fe.split(" "),function(pe,te){(te+1)%2==0&&ye.push([H,pe.trim()]),H=pe.trim()})}q=="polygon"?R=new Blob(N,L,ee,ye):R=new t.Squiggle(L,ee,ye,null,null,null,null,l,null,null,null,null,null,null,null,null,null,null,null,null,null,a)}else q=="ellipse"&&(R=new t.Blob(N,L,ee,S(0,0,Number(I.getAttribute("rx")),Number(I.getAttribute("ry"))),null,null,null,null,l,null,null,null,null,null,null,null,null,null,null,null,null,null,a));R.loc(z,$,w);var re=I.getAttribute("transform");(re||u)&&m(R,re||u),a&&(R.type=="Rectangle"||R.type=="Circle")&&R.transform({showReg:!1,visible:l})}function m(q,I){var R=I.split(")");t.loop(R,function(le){if(le!=""){var N=le.trim().split("("),L=N[0].trim().toLowerCase(),ee=N[1].trim().toLowerCase().replace("px","").replace("deg","");if(L=="translate"){var z=ee.split(",");q.mov(Number(z[0].trim()),z[1]?Number(z[1].trim()):0)}if(L=="scale"){var $=ee.split(",");q.type=="Blob"||q.type=="Squiggle"?$.length==1?q.transformPoints("scale",Number($[0].trim())):$.length==2&&(q.transformPoints("scaleX",Number($[0].trim())),q.transformPoints("scaleY",Number($[1].trim()))):$.length==1?q.sca(Number($[0].trim())):$.length==2&&q.sca(Number($[0].trim()),Number($[1].trim()))}if(L=="rotate"){var xe=ee.split(",");xe.length==1?xe.push(0,0):xe.length==2&&xe.push(0),q.rot(Number(xe[0].trim()),Number(xe[1].trim()),Number(xe[2].trim()))}L=="skewX"&&(q.skewX=ee),L=="skewY"&&(q.skewY=ee)}})}function S(q,I,R,le){var N=.5522848,L=R*N,ee=le*N,z=q+R,$=I+le,xe=[[q-R,I,0,0,q,$+ee-le,q,I-ee,"mirror"],[q,I-le,0,0,q-L,I,z+L-R,I,"mirror"],[z,I,0,0,q,I-ee,q+L-L,$+ee-le,"mirror"],[q,$,0,0,z-R+L,I,q-L,I,"mirror"]];return xe}if(!n(e)){if(e.replace&&(e=e.replace(/style\s?=[^"]*"[^"]*"/gi,"")),n(e.draggable))e.getAttribute||(P=new DOMParser,e=P.parseFromString(e,"image/svg+xml").documentElement),x=this.svg=e;else{P=new DOMParser,e=e.innerHTML?P.parseFromString(e.innerHTML,"text/xml"):e;var _=e.getElementsByTagName("svg");x=this.svg=_?e.getElementsByTagName("svg")[0]:null}var Y,B;if(n(x)||(Y=x.getAttribute("width"),B=x.getAttribute("height")),Y&&(Y=Number(Y.trim())),B&&(B=Number(B.trim())),this.zimContainer_constructor(Y,B),this.type="SVGContainer",n(x))return;var b=t.black,X=t.black,V=t.black,O=t.black,Z=2,W=2,K=1,ne=1,F=1,D=1,u,f=e.getElementsByTagName("svg");f.length==0&&(f=[e]),E(f)}function o(q){var I,R,le,N,L,ee=q.getAttribute("style");if(ee){var z=k(ee);I=z[0],R=z[1],le=z[2],N=z[3],L=z[4]}I=q.getAttribute("fill")?q.getAttribute("fill"):n(I)?X:I,R=q.getAttribute("stroke")?q.getAttribute("stroke"):n(R)?O:R,le=q.getAttribute("stroke-width")?q.getAttribute("stroke-width"):n(le)?W:le,N=q.getAttribute("fill-opacity")?q.getAttribute("fill-opacity"):n(N)?ne:N,L=q.getAttribute("stroke-opacity")?q.getAttribute("stroke-opacity"):n(L)?D:L;var $=q.getAttribute("x")?q.getAttribute("x"):0;$=q.getAttribute("cx")?q.getAttribute("cx"):$;var xe=q.getAttribute("y")?q.getAttribute("y"):0;return xe=q.getAttribute("cy")?q.getAttribute("cy"):xe,!n(N)&&!n(I)&&(I=t.convertColor(I,"rgba",Number(N))),!n(L)&&!n(R)&&(R=t.convertColor(R,"rgba",Number(L))),[I,R,Number(le),Number(N),Number(L),Number($),Number(xe)]}function g(q,I){n(I)&&(I=!0);var R=["M","m","L","l","H","h","V","v","C","c","S","s","Q","q","T","t","A","a","z","Z"],le=["m","l","h","v","c","s","q","t","a","z"],N=new t.Point(0,0),L;if(n(q.getAttribute)?L=q:L=q.getAttribute("d"),L=L.replace(/,/g," "),L=L.replace(/([a-zA-Z])/g," $1 "),L=L.replace(/-/g," -"),L=L.replace(/\s+/g," "),L=L.replace(/\.(\d*)\./g,".$1 ."),I)var ee=o(q),z=ee[0],$=ee[1],xe=ee[2];var ie,ke,U=[],Ee=[0,0],Q=new t.Point(0,0),G=new t.Point(0,0,0,0),ue=new t.Point(0,0,0,0,0,0),fe=new t.Point(0,0,0,0,0,0,0),ye=L.split(" "),H=ye.slice(1,ye.length),re=[],pe=!1,te,ge,Ae=!1,ae,de="squiggle",se=null;t.loop(H,function(Te,ve){if(ve==0&&(A.x=0,A.y=0,Ee=[0,0],te="",ge=""),R.indexOf(Te)==-1){ae=="lxo"&&(ae="lx",re.push("l"),pe=!0),ae=="lyo"&&(ae="ly",pe=!0),ae=="Lxo"&&(ae="Lx",re.push("L"),pe=!0),ae=="Lyo"&&(ae="Ly",pe=!0),ke=Number(Te),ke=Math.round(ke*100)/100,ae=="X"?(A.x=ke,ae="Y"):ae=="Y"?(A.y=ke,ae="Lxo",U.push([A.x,A.y])):ae=="x"?(A.x=A.x+ke,ae="y"):ae=="y"&&(A.y=A.y+ke,ae="lxo",U.push([A.x,A.y])),ae=="H"||ae=="h"?(N.x=U[U.length-1][0],N.y=U[U.length-1][1],N.x=N.x+(ae=="h"?ke:ke-A.x),U.push([N.x,N.y]),ae="Lx"):(ae=="V"||ae=="v")&&(N.x=U[U.length-1][0],N.y=U[U.length-1][1],N.y=N.y+(ae=="v"?ke:ke-A.y),U.push([N.x,N.y]),ae="lx"),ae=="Lx"?(Q.x=ke,ae="Ly"):ae=="Ly"?(Q.y=ke,N.x=Q.x,N.y=Q.y,U.push([N.x,N.y]),ae="Lx"):ae=="lx"?(re.length>0&&(N.x!=0&&N.y!=0?(A.x=N.x,A.y=N.y):(A.x=N.x+A.x,A.y=N.y+A.y)),Q.x=A.x+ke,pe?ae="lyo":ae="ly"):ae=="ly"&&(Q.y=A.y+ke,N.x=Q.x,N.y=Q.y,U.push([N.x,N.y]),ae="lx");var J;if(ae=="qx"||ae=="Qx"?(U.length>0?(A.x=U[U.length-1][0],A.y=U[U.length-1][1]):(A.x=0,A.y=0),G.x=ae=="qx"?A.x+ke:ke,ae=ae=="qx"?"qy":"Qy"):ae=="qy"||ae=="Qy"?(G.y=ae=="qy"?A.y+ke:ke,ae=ae=="qy"?"qz":"Qz",Ae&&(Ae=!1,J=U[U.length-1],J[6]=-J[4],J[7]=-J[5],J[8]="mirror",N.x=G.x,N.y=G.y,U[U.length]=[N.x,N.y,0,0,-J[6],J[7],0,0,"free"],ae=ae=="qy"?"qx":"Qx")):ae=="qz"||ae=="Qz"?(G.z=ae=="qz"?A.x+ke:ke,ae=ae=="qz"?"qq":"Qq"):(ae=="qq"||ae=="Qq")&&(G.w=ae=="qq"?A.y+ke:ke,J=U[U.length-1],N.x=J[0],N.y=J[1],U.length==1?(J[2]=0,J[3]=0,J[4]=0,J[5]=0,J[6]=2/3*(G.x-N.x),J[7]=2/3*(G.y-N.y),J[8]="free"):U[U.length]=[N.x,N.y,0,0,0,0,2/3*(G.x-N.x),2/3*(G.y-N.y),"free"],N.x=G.z,N.y=G.w,U[U.length]=[N.x,N.y,0,0,2/3*(G.x-N.x),2/3*(G.y-N.y),0,0,"free"],ae=ae=="qq"?"qx":"Qx"),ae=="cx"||ae=="Cx")U.length>0?(A.x=U[U.length-1][0],A.y=U[U.length-1][1]):(A.x=0,A.y=0),ue.x=ae=="cx"?A.x+ke:ke,ae=ae=="cx"?"cy":"Cy";else if(ae=="cy"||ae=="Cy")ue.y=ae=="cy"?A.y+ke:ke,ae=ae=="cy"?"cz":"Cz";else if(ae=="cz"||ae=="Cz")ue.z=ae=="cz"?A.x+ke:ke,ae=ae=="cz"?"cq":"Cq";else if(ae=="cq"||ae=="Cq")ue.q=ae=="cq"?A.y+ke:ke,ae=ae=="cq"?"cr":"Cr",Ae&&(te=="s"?ge="s":ge="S",J=U[U.length-1],J[2]=0,J[3]=0,n(J[4])&&(J[4]=0),n(J[5])&&(J[5]=0),J[6]=-J[4],J[7]=-J[5],J[8]="mirror",N.x=ue.z,N.y=ue.q,U[U.length]=[N.x,N.y,0,0,ue.x-N.x,ue.y-N.y,0,0,"free"],ae=ae=="cr"?"cx":"Cx");else if(ae=="cr"||ae=="Cr")ue.r=ae=="cr"?A.x+ke:ke,ae=ae=="cr"?"cs":"Cs";else if(ae=="cs"||ae=="Cs")ue.s=ae=="cs"?A.y+ke:ke,J=U[U.length-1],U.length==1&&(J[2]=0,J[3]=0,J[4]=0,J[5]=0),J[6]=ue.x-J[0],J[7]=ue.y-J[1],J[8]="free",N.x=ue.r,N.y=ue.s,U[U.length]=[N.x,N.y,0,0,ue.z-N.x,ue.q-N.y,0,0,"free"],ae=ae=="cs"?"cx":"Cx";else if(ae=="ax"||ae=="Ax")U.length>0?(A.x=U[U.length-1][0],A.y=U[U.length-1][1]):(A.x=0,A.y=0),fe.x=ke,ae=ae=="ax"?"ay":"Ay";else if(ae=="ay"||ae=="Ay")fe.y=ke,ae=ae=="ay"?"az":"Az";else if(ae=="az"||ae=="Az")fe.z=ke,ae=ae=="az"?"aq":"Aq";else if(ae=="aq"||ae=="Aq")fe.q=ke,ae=ae=="aq"?"ar":"Ar";else if(ae=="ar"||ae=="Ar")fe.r=ke,ae=ae=="ar"?"as":"As";else if(ae=="as"||ae=="As")fe.s=ae=="as"?A.x+ke:ke,ae=ae=="as"?"at":"At";else if(ae=="at"||ae=="At"){fe.t=ae=="at"?A.y+ke:ke,y||(y=v());var Se=y({px:A.x,py:A.y,cx:fe.s,cy:fe.t,rx:fe.x,ry:fe.y,xAxisRotation:fe.z,largeArcFlag:fe.q,sweepFlag:fe.r});t.loop(Se,function(Be,Ye){J=U[U.length-1],U.length==1&&(J[2]=0,J[3]=0,J[4]=0,J[5]=0),Ye==0&&U.length==1?(J[6]=Be.x1-N.x-A.x,J[7]=Be.y1-N.y-A.y):(J[6]=Be.x1-N.x,J[7]=Be.y1-N.y),J[8]="free",N.x=Be.x,N.y=Be.y,U[U.length]=[N.x,N.y,0,0,Be.x2-N.x,Be.y2-N.y,0,0,"free"]}),ae=ae=="at"?"ax":"Ax"}}else re.push(Te),Te!="s"&&(Ae=!1),re.length>1&&(Te=="M"||Te=="m")&&(Ie(re),Te=="M"?(A.x=0,A.y=0):(A.x=U[U.length-1][0],A.y=U[U.length-1][1]),U=[],re=[],re.push(Te)),Te=="M"?ae="X":Te=="m"?ae="x":Te=="L"?(ae="Lx",r&&se&&se!="l"&&Ie(re),se="l"):Te=="l"?(ae="lx",r&&se&&se!="l"&&Ie(re),se="l"):Te=="H"?(ae="H",r&&se&&se!="l"&&Ie(re),se="l"):Te=="h"?(ae="h",r&&se&&se!="l"&&Ie(re),se="l"):Te=="V"?(ae="V",r&&se&&se!="l"&&Ie(re),se="l"):Te=="v"?(ae="v",r&&se&&se!="l"&&Ie(re),se="l"):Te=="C"?(ae="Cx",r&&se&&se!="c"&&Ie(re),se="c"):Te=="c"?(ae="cx",r&&se&&se!="c"&&Ie(re),se="c"):Te=="S"?(Ae=!0,ae="Cx",r&&se&&se!="c"&&Ie(re),se="c"):Te=="s"?(Ae=!0,ae="cx",r&&se&&se!="c"&&Ie(re),se="c"):Te=="Q"?(ae="Qx",r&&se&&se!="q"&&Ie(re),se="q"):Te=="q"?(ae="qx",r&&se&&se!="q"&&Ie(re),se="q"):Te=="T"?(Ae=!0,ae="Qx",r&&se&&se!="q"&&Ie(re),se="q"):Te=="t"?(Ae=!0,ae="qx",r&&se&&se!="q"&&Ie(re),se="q"):Te=="A"?(ae="Ax",r&&se&&se!="a"&&Ie(),se="a"):Te=="a"?(ae="ax",r&&se&&se!="a"&&Ie(),se="a"):(Te=="z"||Te=="Z")&&(de="blob")});function Ie(){te=re[re.length-1],U.length>=2&&(te=="z"||te=="Z")&&(de="blob"),de=="squiggle"?ie=new t.Squiggle($,xe,U,null,null,null,null,l,null,null,null,null,null,null,null,null,null,null,null,null,null,a):ie=new t.Blob(z,$,xe,U,null,null,null,null,l,null,null,null,null,null,null,null,null,null,null,null,null,null,a),ie.loc(0,0,w),te=re[re.length-1],ge=re[re.length-2],le.indexOf(te)>=0?(Ee[0]=U[U.length-1][0],Ee[1]=U[U.length-1][1],A.x=U[U.length-1][0],A.y=U[U.length-1][1],U=[],U.push([Ee[0],Ee[1]])):(Ee=[0,0],U=[[0,0]]),re=[],te!="z"&&te!="Z"&&re.push(te),N.x=0,N.y=0;var Te=q.getAttribute("transform");(Te||u)&&m(ie,Te||u)}return I&&Ie(),U}w.processPath=function(q){return g(q,!1)},s!==!1&&t.styleTransforms(this,h),this.clone=function(){return w.cloneProps(new t.SVGContainer(e,r,i,l,a,s,this.group,d))}},t.extend(t.SVGContainer,t.Container,"clone","zimContainer",!1),t.CustomShape=function(e,r,i,l){t.zimCustomShapeCheck||(Le("50.97"),t.zimCustomShapeCheck=!0),this.zimContainer_constructor(e,r,i,l,!1);var a=this;this.mouseChildren=!1,a._dashedOffset=5,Object.defineProperty(a,"color",{get:function(){return a._color},set:function(s){n(s)&&(s="black"),a._color=s,s&&s.type?a.specialColor(a.colorCommand,s,a):a.colorCommand.style=s}}),this.setColorRange=function(s,c){return n(c)?(a.startColor=a.color,a.endColor=s):n(s)?(a.startColor=a.color,a.endColor=c):(a.startColor=s,a.endColor=c),a},a._colorRange=0,Object.defineProperty(a,"colorRange",{get:function(){return a._colorRange},set:function(s){a._colorRange=s,!n(a.startColor)&&!n(a.endColor)&&(a.color=t.colorRange(a.startColor,a.endColor,s))}}),Object.defineProperty(a,"borderColor",{get:function(){return a._borderColor},set:function(s){a._borderColor=s,s&&!a.borderWidth&&(a.borderWidth=1),a.borderColorCommand?s&&s.type?a.specialColor(a.borderColorCommand,s,a):a.borderColorCommand.style=s:a.drawShape()}}),Object.defineProperty(a,"borderWidth",{get:function(){return a._borderWidth},set:function(s){s>0||(s=0),a._borderWidth=s,!a.borderWidthCommand||a._borderWidth==0?(a.borderWidthCommand=null,a.drawShape()):(a.borderWidthCommand.width=a._borderWidth,a._dashed&&(a.borderDashedCommand.segments=a._dashed,a.borderDashedCommand.offset=a._dashedOffset))}}),Object.defineProperty(a,"thickness",{get:function(){return a._thickness},set:function(s){s>0||(s=0),a._thickness=s,!a.thicknessCommand||a._thickness==0?a.drawShape():(a.thicknessCommand.width=a._thickness,a._dashed&&(a.dashedCommand.segments=a._dashed,a.dashedCommand.offset=a._dashedOffset))}}),Object.defineProperty(a,"dashed",{get:function(){return a._dashed},set:function(s){a._dashed=s,s&&!Array.isArray(a._dashed)&&(a.dashed=[10,10]);var c;if(a.type=="Squiggle"||a.type=="Line"){if(!a.thicknessCommand||a._thickness==0)return;c=a.dashedCommand}else{if(!a.borderWidthCommand||a._borderWidth==0)return;c=a.borderDashedCommand}c?a._dashed?(c.segments=a._dashed,c.offset=a._dashedOffset):(c.segments=null,c.offset=null):a.drawShape()}}),Object.defineProperty(a,"dashedOffset",{get:function(){return a._dashedOffset},set:function(s){isNaN(s)&&(s=5),a._dashedOffset=s;var c;if(a.type=="Squiggle"||a.type=="Line"){if(!a.thicknessCommand||a._thickness==0)return;c=a.dashedCommand}else{if(!a.borderWidthCommand||a._borderWidth==0)return;c=a.borderDashedCommand}c?a._dashed?(c.segments=a._dashed,c.offset=a._dashedOffset):(c.segments=null,c.offset=null):a.drawShape()}}),Object.defineProperty(a,"corner",{get:function(){return a._corner},set:function(s){a._corner=s,a.drawShape()}}),this.linearGradient=function(s,c,d,C,T,h){return this.linearGradientParams=Array.prototype.slice.call(arguments),this.colorCommand.linearGradient(s,c,d,C,T,h),this},this.radialGradient=function(s,c,d,C,T,h,w,A){return this.radialGradientParams=Array.prototype.slice.call(arguments),this.colorCommand.radialGradient(s,c,d,C,T,h,w,A),this},this.cloneAll=function(s,c,d,C){var T=this.getBounds();n(T)&&(T={x:null,y:null,width:null,height:null});var h=this.cloneChildren(this.cloneProps(new t.Container(T.x,T.y,T.width,T.height,c,d,C)),s);return h.mouseChildren=!1,h.type=this.type,h}},t.extend(t.CustomShape,t.Container,null,"zimContainer",!1),t.Circle=function(e,r,i,l,a,s,c,d,C,T,h){var w="radius, color, borderColor, borderWidth, dashed, percent, percentClose, strokeObj, style, group, inherit",A;if(A=lt(t.Circle,arguments,w,this))return A;Le("51"),this.zimCustomShape_constructor(null,null,null,null,!1),this.type="Circle",this.group=T;var y=C===!1?{}:t.getStyle(this.type,this.group,h);n(e)&&(e=y.radius!=null?y.radius:50),n(a)&&(a=y.dashed!=null?y.dashed:!1),n(i)&&(i=y.borderColor!=null?y.borderColor:null),n(l)&&(l=y.borderWidth!=null?y.borderWidth:null),i<0||l<0?i=l=null:i!=null&&l==null&&(l=1),n(r)&&(r=y.color!=null?y.color:l>0?"rgba(0,0,0,0)":t.black),n(s)&&(s=y.percent!=null?y.percent:100),n(c)&&(c=y.percentClose!=null?y.percentClose:!0),n(d)&&(d=y.strokeObj!=null?y.strokeObj:{});var v=P(e,r,i,l,s);this.veeObj={radius:v[0],color:v[1],borderColor:v[2],borderWidth:v[3],percent:v[4]};function P(){return arguments}e=t.Pick.choose(e),r=t.Pick.choose(r),i=t.Pick.choose(i),l=t.Pick.choose(l),s=t.Pick.choose(s);var x=this;x._radius=e,x._color=r,x._borderColor=i,x._borderWidth=l,x._dashed=a,x._dashed&&!Array.isArray(x._dashed)&&(x._dashed=[10,10]);var E=this.shape=new Ne.Shape;this.addChild(E);var k=E.graphics;x.drawShape=function(){k.c(),x.colorCommand=k.f(x._color).command,x._color&&x._color.type&&x.specialColor(x.colorCommand,x._color,x),(n(x._borderWidth)||x._borderWidth>0)&&(!n(x._borderColor)||!n(x._borderWidth))&&(n(x._borderColor)&&(x._borderColor=t.black),x.borderColorCommand=k.s(x._borderColor).command,x._borderColor&&x._borderColor.type&&x.specialColor(x.borderColorCommand,x._borderColor,x),x.borderWidthCommand=k.ss(x._borderWidth,d.caps,d.joints,d.miterLimit,d.ignoreScale).command,x._dashed&&(x.borderDashedCommand=k.sd(Array.isArray(x._dashed)?x._dashed:[10,10],x._dashedOffset).command));var p=x._radius*2;if(typeof s=="number"&&s>=0&&s<100){var m=360*s/100/2;k.arc(0,0,x._radius,(-m-90)*Math.PI/180,(m-90)*Math.PI/180,!1),c&&k.cp(),p=x._radius-Math.cos(m*Math.PI/180)*x._radius}else k.dc(0,0,x._radius);x.setBounds(-x._radius,-x._radius,x._radius*2,p)},x.drawShape(),r.type&&(x.color=r),Object.defineProperty(x,"radius",{get:function(){return x._radius},set:function(p){x._radius=p,x.drawShape()}}),Object.defineProperty(x,"percentage",{get:function(){return s},set:function(p){s=p,x.drawShape()}}),Object.defineProperty(x,"percentClose",{get:function(){return c},set:function(p){c=p,x.drawShape()}}),C!==!1&&t.styleTransforms(this,y),this.clone=function(p){var m=x.cloneProps(new t.Circle(p||!t.isPick(v[0])?x.radius:v[0],p||!t.isPick(v[1])?x.color:v[1],p||!t.isPick(v[2])?x.borderColor:v[2],p||!t.isPick(v[3])?x.borderWidth:v[3],x.dashed,p||!t.isPick(v[4])?s:v[4],c,d,C,this.group,h));return x.linearGradientParams&&m.linearGradient.apply(m,x.linearGradientParams),x.radialGradientParams&&m.radialGradient.apply(m,x.radialGradientParams),m}},t.extend(t.Circle,t.CustomShape,"clone","zimCustomShape",!1),t.Rectangle=function(e,r,i,l,a,s,c,d,C,T,h,w){var A="width, height, color, borderColor, borderWidth, corner, dashed, strokeObj, scaleDimensions, style, group, inherit",y;if(y=lt(t.Rectangle,arguments,A,this))return y;Le("52"),this.zimCustomShape_constructor(null,null,null,null,!1),this.type="Rectangle",this.group=h;var v=T===!1?{}:t.getStyle(this.type,this.group,w);n(e)&&(e=v.width!=null?v.width:null),n(r)&&(r=v.height!=null?v.height:n(e)?100:e),n(e)&&(e=r),n(s)&&(s=v.corner!=null?v.corner:0),n(c)&&(c=v.dashed!=null?v.dashed:!1),n(l)&&(l=v.borderColor!=null?v.borderColor:null),n(a)&&(a=v.borderWidth!=null?v.borderWidth:null),l<0||a<0?l=a=null:l!=null&&a==null&&(a=1),n(i)&&(i=v.color!=null?v.color:a>0?"rgba(0,0,0,0)":t.black),n(d)&&(d=v.strokeObj!=null?v.strokeObj:{}),n(C)&&(C=v.scaleDimensions!=null?v.scaleDimensions:!0);var P=x(e,r,i,l,a);this.veeObj={width:P[0],height:P[1],color:P[2],borderColor:P[3],borderWidth:P[4]};function x(){return arguments}e=t.Pick.choose(e),r=t.Pick.choose(r),i=t.Pick.choose(i),l=t.Pick.choose(l),a=t.Pick.choose(a);var E=this;E._color=i,E._borderColor=l,E._borderWidth=a,E._dashed=c,E._dashed&&!Array.isArray(E._dashed)&&(E._dashed=[10,10]),E._corner=s,E.scaleDimensions=C,E.setWidth=function(m){e=m},E.setHeight=function(m){r=m};var k=this.shape=new Ne.Shape;this.addChild(k);var p=k.graphics;E.drawShape=function(){if(p.c(),E.colorCommand=p.f(E._color).command,i&&i.type&&E.specialColor(E.colorCommand,i,E),(n(E._borderWidth)||E._borderWidth>0)&&(!n(E._borderColor)||!n(E._borderWidth))&&(n(E._borderColor)&&(E._borderColor=t.black),E.borderColorCommand=p.s(E._borderColor).command,E._borderColor&&E._borderColor.type&&E.specialColor(E.borderColorCommand,E._borderColor,E),E.borderWidthCommand=p.ss(E._borderWidth,d.caps,d.joints,d.miterLimit,d.ignoreScale).command,E._dashed&&(E.borderDashedCommand=p.sd(Array.isArray(E._dashed)?E._dashed:[10,10],E._dashedOffset).command)),Array.isArray(E._corner)){var m=E._corner;Array.isArray(m)&&m.length==2&&(m=[m,m,m,m]);for(var S=[],_=!1,Y=0;Y<m.length;Y++)Array.isArray(m[Y])?(_=!0,S.push(m[Y])):S.push([m[Y],m[Y]]);m=S,_?p.mt(0,m[0][1]).curveTo(0,0,m[0][0],0).lt(e-m[1][0],0).curveTo(e,0,e,m[1][1]).lt(e,r-m[2][1]).curveTo(e,r,e-m[2][0],r).lt(m[3][0],r).curveTo(0,r,0,r-m[3][1]).cp():p.rc(0,0,e,r,E._corner[0],E._corner[1],E._corner[2],E._corner[3])}else E._corner>0?p.rr(0,0,e,r,E._corner):p.r(0,0,e,r);E.setBounds(0,0,e,r),i.type&&(E.color=i)},E.drawShape(),T!==!1&&t.styleTransforms(this,v),this.clone=function(m){var S=E.cloneProps(new t.Rectangle(m||!t.isPick(P[0])?e:P[0],m||!t.isPick(P[1])?r:P[1],m||!t.isPick(P[2])?E.color:P[2],m||!t.isPick(P[3])?E.borderColor:P[3],m||!t.isPick(P[4])?E.borderWidth:P[4],s,E._dashed,d,E.scaleDimensions,T,this.group,w));return S}},t.extend(t.Rectangle,t.CustomShape,"clone","zimCustomShape",!1),t.Triangle=function(e,r,i,l,a,s,c,d,C,T,h,w,A,y){var v="a, b, c, color, borderColor, borderWidth, corner, center, adjust, dashed, strokeObj, style, group, inherit",P;if(P=lt(t.Triangle,arguments,v,this))return P;Le("53"),this.zimCustomShape_constructor(null,null,null,null,!1),this.type="Triangle",this.group=A;var x=w===!1?{}:t.getStyle(this.type,this.group,y);n(e)&&(e=x.a!=null?x.a:100),n(r)&&(r=x.b!=null?x.b:e),n(i)&&(i=x.c!=null?x.c:e),r==-1&&(r=Math.sqrt(Math.pow(e,2)+Math.pow(i,2))),i==-1&&(i=Math.sqrt(Math.pow(e,2)+Math.pow(r,2))),n(c)&&(c=x.corner!=null?x.corner:0),n(d)&&(d=x.center!=null?x.center:!0),n(C)&&(C=x.adjust!=null?x.adjust:0),n(a)&&(a=x.borderColor!=null?x.borderColor:null),n(s)&&(s=x.borderWidth!=null?x.borderWidth:null),a<0||s<0?a=s=null:a!=null&&s==null&&(s=1),n(l)&&(l=x.color!=null?x.color:s>0?"rgba(0,0,0,0)":t.black),n(C)&&(C=x.adjust!=null?x.adjust:0),n(h)&&(h=x.strokeObj!=null?x.strokeObj:{});var E=k(e,r,i,l,a,s);this.veeObj={a:E[0],b:E[1],c:E[2],color:E[3],borderColor:E[4],borderWidth:E[5]};function k(){return arguments}e=t.Pick.choose(e),r=t.Pick.choose(r),i=t.Pick.choose(i),this.a=e,this.b=r,this.c=i,l=t.Pick.choose(l),a=t.Pick.choose(a),s=t.Pick.choose(s);var p=this;p._color=l,p._borderColor=a,p._borderWidth=s,p._dashed=T,p._dashed&&!Array.isArray(p._dashed)&&(p._dashed=[10,10]),p._corner=c;var m=[e,r,i];m.sort(function(V,O){return O-V});var S=m[0],_=m[1],Y=m[2],B=[m.indexOf(e),m.indexOf(r),m.indexOf(i)];if(S>_+Y){$e("zim display - Triangle(): invalid triangle lengths");return}var b=this.shape=new Ne.Shape;this.adjusted=C,this.addChild(b);var X=b.graphics;p.drawShape=function(){var V=[];Array.isArray(p._corner)?V=p._corner:V.push(p._corner,p._corner,p._corner);for(var O=0;O<3;O++)(V[O]<0||typeof V[O]!="number")&&(V[O]=0);X.c(),p.colorCommand=X.f(p._color).command,p._color&&p._color.type&&p.specialColor(p.colorCommand,p._color,p),(n(p._borderWidth)||p._borderWidth>0)&&(!n(p._borderColor)||!n(p._borderWidth))&&(n(p._borderColor)&&(p._borderColor=t.black),p.borderColorCommand=X.s(p._borderColor).command,p._borderColor&&p._borderColor.type&&p.specialColor(p.borderColorCommand,p._borderColor,p),p.borderWidthCommand=X.ss(p._borderWidth,h.caps,h.joints,h.miterLimit,h.ignoreScale).command,p._dashed&&(p.borderDashedCommand=X.sd(Array.isArray(p._dashed)?p._dashed:[10,10],p._dashedOffset).command)),p.one={x:0,y:0},p.two={x:e,y:0};var Z=Math.acos((Math.pow(_,2)+Math.pow(Y,2)-Math.pow(S,2))/(2*_*Y))*180/Math.PI,W=Math.asin(_*Math.sin(Z*Math.PI/180)/S)*180/Math.PI,K=180-Z-W,ne=[Z,W,K];p.angles=[ne[B[1]],ne[B[2]],ne[B[0]]];var F=p.angles[1],D=Math.cos(F*Math.PI/180)*r,u=Math.sin(F*Math.PI/180)*r,f=Math.max(e,e-D),o=u;p.setBounds(0,C,f,o),b.y=o,p.three={x:e-D,y:0-u};var g=e*V[0]/(V[0]+V[1]||1);X.mt(g,0).at(e,0,e-D,0-u,V[1]).at(e-D,0-u,0,0,V[2]).at(0,0,e,0,V[0]).lt(g,0),X.cp(),d&&(p.regX=f/2,p.regY=o/2),C&&(p.shape.y+=C)},p.drawShape(),l.type&&(p.color=l),w!==!1&&t.styleTransforms(this,x),this.clone=function(V){var O=p.cloneProps(new t.Triangle(V||!t.isPick(E[0])?e:E[0],V||!t.isPick(E[1])?r:E[1],V||!t.isPick(E[2])?i:E[2],V||!t.isPick(E[3])?p.color:E[3],V||!t.isPick(E[4])?p.borderColor:E[4],V||!t.isPick(E[5])?p.borderWidth:E[5],c,d,C,T,h,w,this.group,y));return p.linearGradientParams&&O.linearGradient.apply(O,p.linearGradientParams),p.radialGradientParams&&O.radialGradient.apply(O,p.radialGradientParams),O}},t.extend(t.Triangle,t.CustomShape,"clone","zimCustomShape"),t.Poly=function(e,r,i,l,a,s,c,d,C,T,h){var w="radius, sides, pointSize, color, borderColor, borderWidth, dashed, strokeObj, style, group, inherit",A;if(A=lt(t.Poly,arguments,w,this))return A;Le("53.1"),this.zimCustomShape_constructor(null,null,null,null,!1),this.type="Poly",this.group=T;var y=C===!1?{}:t.getStyle(this.type,this.group,h);n(e)&&(e=y.radius!=null?y.radius:50),n(r)&&(r=y.sides!=null?y.sides:5),n(i)&&(i=y.pointSize!=null?y.pointSize:0),n(c)&&(c=y.dashed!=null?y.dashed:!1),n(a)&&(a=y.borderColor!=null?y.borderColor:null),n(s)&&(s=y.borderWidth!=null?y.borderWidth:null),a<0||s<0?a=s=null:a!=null&&s==null&&(s=1),n(l)&&(l=y.color!=null?y.color:s>0?"rgba(0,0,0,0)":t.black),n(d)&&(d=y.strokeObj!=null?y.strokeObj:{});var v=P(e,r,i,l,a,s);this.veeObj={radius:v[0],sides:v[1],pointSize:v[2],color:v[3],borderColor:v[4],borderWidth:v[5]};function P(){return arguments}e=t.Pick.choose(e),r=t.Pick.choose(r),i=t.Pick.choose(i),l=t.Pick.choose(l),a=t.Pick.choose(a),s=t.Pick.choose(s);var x=this;x._radius=e,x._color=l,x._sides=r,x._pointSize=i,x._borderColor=a,x._borderWidth=s,x._dashed=c,x._dashed&&!Array.isArray(x._dashed)&&(x._dashed=[10,10]);var E=this.shape=new Ne.Shape;this.addChild(E),E.rotation=-90;var k=E.graphics;x.drawShape=function(){k.c(),x.colorCommand=k.f(x._color).command,x._color&&x._color.type&&x.specialColor(x.colorCommand,x._color,x),(n(x._borderWidth)||x._borderWidth>0)&&(!n(x._borderColor)||!n(x._borderWidth))&&(n(x._borderColor)&&(x._borderColor=t.black),x.borderColorCommand=k.s(x._borderColor).command,x._borderColor&&x._borderColor.type&&x.specialColor(x.borderColorCommand,x._borderColor,x),x.borderWidthCommand=k.ss(x._borderWidth,d.caps,d.joints,d.miterLimit,d.ignoreScale).command,x._dashed&&(x.borderDashedCommand=k.sd(Array.isArray(x._dashed)?x._dashed:[10,10],x._dashedOffset).command)),k.dp(0,0,x._radius,x._sides,x._pointSize),x.setBounds(-x._radius,-x._radius,x._radius*2,x._radius*2)},x.drawShape(),l.type&&(x.color=l),Object.defineProperty(x,"radius",{get:function(){return x._radius},set:function(p){x._radius=p,x.drawShape()}}),Object.defineProperty(x,"sides",{get:function(){return x._sides},set:function(p){x._sides=p,x.drawShape()}}),Object.defineProperty(x,"pointSize",{get:function(){return x._pointSize},set:function(p){x._pointSize=p,x.drawShape()}}),C!==!1&&t.styleTransforms(this,y),this.clone=function(p){var m=x.cloneProps(new t.Poly(p||!t.isPick(v[0])?x.radius:v[0],p||!t.isPick(v[1])?x.sides:v[1],p||!t.isPick(v[2])?x.pointSize:v[2],p||!t.isPick(v[3])?x.color:v[3],p||!t.isPick(v[4])?x.borderColor:v[4],p||!t.isPick(v[5])?x.borderWidth:v[5],x.dashed,d,C,this.group,h));return x.linearGradientParams&&m.linearGradient.apply(m,x.linearGradientParams),x.radialGradientParams&&m.radialGradient.apply(m,x.radialGradientParams),m}},t.extend(t.Poly,t.CustomShape,"clone","zimCustomShape",!1),t.Line=function(e,r,i,l,a,s,c,d,C,T,h,w,A,y,v){var P="length, thickness, color, startHead, endHead, dashed, strokeObj, lineType, lineOrientation, curveH, curveV, points, style, group, inherit",x;if(x=lt(t.Line,arguments,P,this))return x;Le("53.15"),this.zimCustomShape_constructor(null,null,null,null,!1),this.type="Line",this.group=y;var E=A===!1?{}:t.getStyle(this.type,this.group,v);n(e)&&(e=E.length!=null?E.length:100),n(s)&&(s=E.dashed!=null?E.dashed:!1),n(r)&&(r=E.thickness!=null?E.thickness:3),n(i)&&(i=E.color!=null?E.color:t.black),n(l)&&(l=E.startHead!=null?E.startHead:null),n(a)&&(a=E.endHead!=null?E.endHead:null),n(c)&&(c=E.strokeObj!=null?E.strokeObj:{}),n(d)&&(d=E.lineType!=null?E.lineType:"straight"),d!=="corner"&&d!="curve"&&(d="straight"),n(C)&&(C=E.lineOrientation!=null?E.lineOrientation:"auto"),C!=="vertical"&&C!="horizontal"&&(C="auto"),n(T)&&(T=E.curveH!=null?E.curveH:20),n(h)&&(h=E.curveV!=null?E.curveV:20),n(c)&&(c=E.strokeObj!=null?E.strokeObj:{});var k=p(e,i,r,l,a);this.veeObj={length:k[0],color:k[1],thickness:k[2],startHead:k[3],endHead:k[4]};function p(){return arguments}e=t.Pick.choose(e),i=t.Pick.choose(i),r=t.Pick.choose(r),l=t.Pick.choose(l),a=t.Pick.choose(a),l&&l.clone&&(l=l.clone()),a&&a.clone&&(a=a.clone());var m=this;m._length=e,m._color=i,m._thickness=r,m._dashed=s,m._dashed&&!Array.isArray(m._dashed)&&(m._dashed=[10,10]),m._startX=0,m._startY=0,m._endX=e,m._endY=0,m._startHead=l,m._endHead=a,m._points=w,m._lineOrientation=C,m.angle=0,m.lineType=d,m._startHead&&S("start",m._startHead),m._endHead&&S("end",m._endHead);function S(B,b){if(b=="triangle"||b=="arrow"){var X=m["_"+B+"Head"]=new t.Triangle(r*4,r*4,r*4,i);X.rotation=90}else b=="circle"&&(m["_"+B+"Head"]=new t.Circle(r*2.2,i));n(m["_"+B+"Head"].startAngle)&&(m["_"+B+"Head"].startAngle=m["_"+B+"Head"].rotation)}l=m._startHead,a=m._endHead,l&&l.type=="Triangle"&&(l.startRegY=l.regY),a&&a.type=="Triangle"&&(a.startRegY=a.regY);var _=this.shape=new Ne.Shape;this.addChild(_);var Y=_.graphics;m.drawShape=function(B,b){Y.c(),m.colorCommand=Y.s(m._color).command,i&&i.type&&m.specialColor(m.colorCommand,i,m),m.thicknessCommand=Y.ss(m._thickness,c.caps,c.joints,c.miterLimit,c.ignoreScale).command,m._dashed&&(m.dashedCommand=Y.sd(Array.isArray(m._dashed)?m._dashed:[10,10],m._dashedOffset).command);var X,V;if(m._points){var O=m._points[0];m._startX=O[0],m._startY=O[1];var Z=m._points[m._points.length-1],W=[Z[Z.length-2],Z[Z.length-1]];m._endX=W[0],m._endY=W[1],Y.mt(O[0],O[1]);for(var K=1;K<m._points.length;K++){var ne=m._points[K];K==1&&(X=[m._startX,m._startY,ne[0],ne[1]]),ne.length==2?Y.lt(ne[0],ne[1]):ne.length==4?Y.qt(ne[0],ne[1],ne[2],ne[3]):ne.length==6&&Y.bt(ne[0],ne[1],ne[2],ne[3],ne[4],ne[5])}if(ne.length>=4)V=[ne[ne.length-4],ne[ne.length-3],m._endX,m._endY];else{var F=m._points[m._points.length-2];V=[F[F.lenth-2],F[F.lenth-1],m._endX,m._endY]}}else{var D=m._startX,u=m._startY,f=m._endX,o=m._endY,g;if(m.lineType=="straight"?(l&&l.type=="Triangle"&&(l.regY=0,g=t.dist(D,u,f,o),g!=0&&(D=D+m._startHead.height/2*(f-D)/g),g!=0&&(u=u+m._startHead.height/2*(o-u)/g)),a&&a.type=="Triangle"&&(a.regY=0,g=t.dist(D,u,f,o),g!=0&&(f=f-m._endHead.height/2*(f-D)/g),g!=0&&(o=o-m._endHead.height/2*(o-u)/g))):(B?m._lineOrientation=="horizontal"||m.autoOrientation=="horizontal"?l&&l.type=="Triangle"&&(l.regY=0,f>D?D=Math.min(f,D+m._startHead.height/2):D=Math.max(f,D-m._startHead.height/2)):l&&l.type=="Triangle"&&(l.regY=0,o>u?u=Math.min(o,u+m._startHead.height/2):u=Math.max(o,u-m._startHead.height/2)):l&&l.type=="Triangle"&&(l.regY=l.startRegY),b?m._lineOrientation=="horizontal"||m.autoOrientation=="horizontal"?a&&a.type=="Triangle"&&(a.regY=0,f>D?f-=m._endHead.height/2:f+=m._endHead.height/2):a&&a.type=="Triangle"&&(a.regY=0,o>u?o-=m._endHead.height/2:o+=m._endHead.height/2):a&&a.type=="Triangle"&&(a.regY=a.startRegY)),m.lineType=="straight")Y.mt(D,u).lt(f,o),X=V=[D,u,f,o];else if(m.lineType=="corner"){var q=D+(f-D)*.4,I=u+(o-u)*.4;m._lineOrientation=="auto"&&(m.autoOrientation=Math.abs(D-f)>Math.abs(u-o)?"horizontal":"vertical"),m._lineOrientation=="horizontal"||m.autoOrientation=="horizontal"?(X=V=[D,u,q,u],Y.mt(D,u).lt(q,u).lt(q,o).lt(f,o)):(X=V=[D,u,D,I],Y.mt(D,u).lt(D,I).lt(f,I).lt(f,o))}else{var R=D>f?-1:1,le=u>o?-1:1,N=D,L=u,ee=Math.abs(D-f),z=Math.abs(u-o),$=Math.min(T,ee*.5),xe=Math.min(h,z*.5);m._lineOrientation=="auto"&&(m.autoOrientation=Math.abs(D-f)>Math.abs(u-o)?"horizontal":"vertical");var ie,ke,U,Ee;m._lineOrientation=="horizontal"||m.autoOrientation=="horizontal"?(ie=z-xe*2,ke=(ee-$*2)/2,Y.mt(N,L),ke>0&&(N=N+ke*R,Y.lt(N,L)),Ee=L,L=L+xe*le,N=N+$*R,Y.qt(N,Ee,N,L),X=V=[D,u,N,u],ie>0&&(L=L+ie*le,Y.lt(N,L)),L=L+xe*le,U=N,N=N+$*R,Y.qt(U,L,N,L),ke>0&&(N=N+ke*R,Y.lt(N,L))):(ie=ee-$*2,ke=(z-xe*2)/2,Y.mt(N,L),ke>0&&(L=L+ke*le,Y.lt(N,L)),U=N,N=N+$*R,L=L+xe*le,Y.qt(U,L,N,L),X=V=[D,u,D,L],ie>0&&(N=N+ie*R,Y.lt(N,L)),N=N+$*R,Ee=L,L=L+xe*le,Y.qt(N,Ee,N,L),ke>0&&(L=L+ke*le,Y.lt(N,L)))}}if(m.setBounds(Math.min(m._startX,m._endX),Math.min(m._startY,m._endY),Math.abs(m._startX-m._endX),Math.abs(m._startY-m._endY)),m._length=Math.sqrt(Math.pow(m._startX-m._endX,2)+Math.pow(m._startY-m._endY,2)),m.angle=Math.atan2(m._endY-m._startY,m._endX-m._startX)*180/Math.PI,m._startHead&&m._startHead.loc){m._startHead.loc(m._startX,m._startY,m);var Q=Math.atan2(X[3]-X[1],X[2]-X[0])*180/Math.PI;m._startHead.rotation=Q-180+m._startHead.startAngle}if(m._endHead&&m._endHead.loc){m._endHead.loc(m._endX,m._endY,m);var G=Math.atan2(V[3]-V[1],V[2]-V[0])*180/Math.PI;m._endHead.rotation=G+m._endHead.startAngle}},m.drawShape(),i.type&&(m.color=i),this.setPoints=function(B,b,X,V,O,Z){return Array.isArray(B)&&n(b)?(m.points=B,m):(B&&!n(B.x)?(m._startX=n(B.x)?m._startX:B.x,m._startY=n(B.y)?m._startY:B.y,b&&(m._endX=n(b.x)?m._endX:b.x,m._endY=n(b.y)?m._endY:b.y)):(m._startX=n(B)?m._startX:B,m._startY=n(b)?m._startY:b,m._endX=n(X)?m._endX:X,m._endY=n(V)?m._endY:V),m.drawShape(O,Z),m)},this.from=function(B,b,X){n(X)&&(X=!0);var V,O;if(B&&B.parent&&m.parent&&X){var Z=B.parent.localToLocal(B.x,B.y,m.parent);V=Z.x,O=Z.y}return B&&!n(B.x)?(m._startX=n(V)?n(B.x)?m._startX:B.x:V,m._startY=n(O)?n(B.y)?m._startY:B.y:O):(m._startX=n(B)?m._startX:B,m._startY=n(b)?m._startY:b),m.drawShape(),m},this.to=function(B,b,X){n(X)&&(X=!0);var V,O;if(B&&B.parent&&m.parent&&X){var Z=B.parent.localToLocal(B.x,B.y,m.parent);V=Z.x,O=Z.y}return B&&!n(B.x)?(m._endX=n(V)?n(B.x)?m._endX:B.x:V,m._endY=n(O)?n(B.y)?m._endY:B.y:O):(m._endX=n(B)?m._endX:B,m._endY=n(b)?m._endY:b),m.drawShape(),m},Object.defineProperty(m,"length",{get:function(){return m._length},set:function(B){var b=m.length!=0?B/m.length:0;if(!isNaN(b)){var X=m.scaleX,V=m.scaleY;m.scaleX*=b,m.scaleY*=b;var O=m.localToGlobal(m._startX,m._startY),Z=m.localToGlobal(m._endX,m._endY);m.scaleX=X,m.scaleY=V;var W=m.globalToLocal(O.x,O.y),K=m.globalToLocal(Z.x,Z.y);m.setPoints(W,K)}}}),Object.defineProperty(m,"startPoint",{get:function(){return new t.Point(m._startX,m._startY)},set:function(B){m._startX=n(B.x)?m._startX:B.x,m._startY=n(B.y)?m._startY:B.y,m.drawShape()}}),Object.defineProperty(m,"endPoint",{get:function(){return new t.Point(m._endX,m._endY)},set:function(B){m._endX=n(B.x)?m._endX:B.x,m._endY=n(B.y)?m._endY:B.y,m.drawShape()}}),Object.defineProperty(m,"startHead",{get:function(){return m._startHead},set:function(B){m._startHead=B,m.drawShape()}}),Object.defineProperty(m,"endHead",{get:function(){return m._endHead},set:function(B){m._endHead=B,m.drawShape()}}),Object.defineProperty(m,"startX",{get:function(){return m._startX},set:function(B){m._startX=B||0,m.drawShape()}}),Object.defineProperty(m,"startY",{get:function(){return m._startY},set:function(B){m._startY=B||0,m.drawShape()}}),Object.defineProperty(m,"endX",{get:function(){return m._endX},set:function(B){m._endX=B||0,m.drawShape()}}),Object.defineProperty(m,"endY",{get:function(){return m._endY},set:function(B){m._endY=B||0,m.drawShape()}}),Object.defineProperty(m,"points",{get:function(){return m._points},set:function(B){B&&(m._points=B,m.drawShape())}}),Object.defineProperty(m,"lineOrientation",{get:function(){return m._lineOrientation},set:function(B){B&&(m._lineOrientation=B,m.drawShape())}}),A!==!1&&t.styleTransforms(this,E),this.clone=function(B){var b=B||!t.isPick(k[3])?m._startHead:k[3];b&&b.clone&&(b=b.clone(),b.rotation=m._startHead.startAngle);var X=B||!t.isPick(k[4])?m._endHead:k[4];X&&X.clone&&(X=X.clone(),X.rotation=m._endHead.startAngle);var V=m.cloneProps(new t.Line(B||!t.isPick(k[0])?m.length:k[0],B||!t.isPick(k[2])?m.thickness:k[2],B||!t.isPick(k[1])?m.color:k[1],b,X,m.dashed,c,d,m._lineOrientation,T,h,t.copy(w),A,this.group,v));return m.points?V.setPoints(m.points):V.setPoints(m._startX,m._startY,m._endX,m._endY),m.linearGradientParams&&V.linearGradient.apply(V,m.linearGradientParams),m.radialGradientParams&&V.radialGradient.apply(V,m.radialGradientParams),V}},t.extend(t.Line,t.CustomShape,"clone","zimCustomShape",!1),t.Squiggle=function(e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,x,E,k,p,m,S,_,Y,B,b){var X="color, thickness, points, length, controlLength, controlType, lockControlType, showControls, lockControls, handleSize, allowToggle, move, dashed, onTop, circleColor, circleBorderColor, stickColor, stickThickness, selectColor, selectPoints, editPoints, interactive, strokeObj, style, group, inherit",V;if(V=lt(t.Squiggle,arguments,X,this))return V;Le("53.2"),this.group=B;var O=Y===!1?{}:t.getStyle("Squiggle",this.group,b);if(n(r)&&(r=O.thickness!=null?O.thickness:6),n(l)&&(l=O.length!=null?O.length:300),n(i)&&(i=O.points!=null?O.points:5),typeof i=="string"){var Z=new t.SVGContainer;i=Z.processPath(i)}var W=typeof i!="number",K=typeof i=="number"?i:i.length;if(K==0)return;n(a)&&(a=O.controlLength!=null?O.controlLength:l/K),this.zimCustomShape_constructor(l,a,null,null,!1),this.type="Squiggle",this.mouseChildren=!0,n(A)&&(A=O.dashed!=null?O.dashed:!1),n(e)&&(e=O.color!=null?O.color:t.blue),e.style&&(this.colorCommand=e,e=t.black),n(s)&&(s=O.controlType!=null?O.controlType:null);var ne=s;n(s)&&(s="mirror"),n(c)&&(c=O.lockControlType!=null?O.lockControlType:!1),n(S)&&(S=O.interactive!=null?O.interactive:!0),n(d)&&(d=O.showControls!=null?O.showControls:S);var F=d;n(C)&&(C=O.lockControls!=null?O.lockControls:!S),n(T)&&(T=O.handleSize!=null?O.handleSize:t.mobile()?20:10),n(h)&&(h=O.allowToggle!=null?O.allowToggle:S),n(w)&&(w=O.move!=null?O.move:S),n(v)&&(v=O.circleColor!=null?O.circleColor:t.light),n(P)&&(P=O.circleBorderColor!=null?O.circleBorderColor:t.dark),n(x)&&(x=O.stickColor!=null?O.stickColor:t.darker),n(E)&&(E=O.stickThickness!=null?O.stickThickness:1),n(k)&&(k=O.selectColor!=null?O.selectColor:t.white),n(p)&&(p=O.selectPoints!=null?O.selectPoints:S),this.circleColor=v,this.circleBorderColor=P,this.stickColor=x,this.stickThickness=E,n(y)&&(y=O.onTop!=null?O.onTop:!0),n(m)&&(m=O.editPoints!=null?O.editPoints:S),n(_)&&(_=O.strokeObj!=null?O.strokeObj:{});var D=u(e);this.veeObj={color:D[0]};function u(){return arguments}e=t.Pick.choose(e);var f=this,o;this.types=["mirror","straight","free","none"],this.interactive=S,this.num=K,this.onTop=y,this.move=w,this.editPoints=m,this.allowToggle=h,this.lockControlType=c,this.selectPoints=p,this.lockControls=C;var g,q,I;f._color=e,f._thickness=r,f._dashed=A,f._dashed&&!Array.isArray(f._dashed)&&(f._dashed=[10,10]);var R,le,N,L,ee=f.move,z=2,$,xe;ne&&typeof i!="number"&&t.loop(i,function(H){H[8]=ne,ne=="none"&&(H[4]=H[5]=H[6]=H[7]=0)}),ie();function ie(){xe&&xe.removeAllEventListeners(),f.num=K=typeof i=="number"?i:i.length,K=Math.max(2,K),a=l/K,R=f.shape=new t.Shape({style:!1}).addTo(f);var H=f.sticks=new t.Shape({style:!1}).addTo(f);T<=0&&H.removeFrom();var re=R.graphics;re.c();var pe=H.graphics;pe.c();var te=T/10*8,ge=T;f.selectPoints?(f.selectedBalls=new t.SelectionSet,f.selectedRect1s=new t.SelectionSet,f.selectedRect2s=new t.SelectionSet,f.selectionManager=new t.SelectionManager([f.selectedBalls,f.selectedRect1s,f.selectedRect2s],"ctrl",!1)):f.selectionManager=new t.SelectionManager(null,"ctrl");var Ae=t.mobile();xe=f.controls=new t.Container({style:!1}).addTo(f),f.interactive&&xe.drag({onTop:!Ae}),g=[],I=[],q=[];var ae,de,se,Ie,Te,ve,J,Se,Be;for(ae=0;ae<K;ae++){if(Ie=new t.Container({style:!1}).addTo(xe),Ie.num=ae,typeof i=="number"){var Ye=t.Pick.choose(a);se=new t.Container(Ye,r,null,null,!1).addTo(f).loc({x:ae*l/(K-1)-Ye/2,y:ae%2*Ye}),J=new t.Circle(te,f.selectPoints&&f.selectedBalls.isSelected(ae)?k:f.circleColor,f.circleBorderColor,2,null,null,null,null,!1).centerReg(se).loc({x:Ye/2,y:0}),Te=new t.Rectangle(ge,ge,f.selectPoints&&f.selectedRect1s.isSelected(ae)?k:oe(s),T==0?null:t.dark,T==0?null:2,null,null,null,null,!1).centerReg(se).loc({x:0,y:0}),ve=new t.Rectangle(ge,ge,f.selectPoints&&f.selectedRect2s.isSelected(ae)?k:oe(s),T==0?null:t.dark,T==0?null:2,null,null,null,null,!1).centerReg(se).loc({x:Ye,y:0});var Ke=se.localToLocal(J.x,J.y,xe);J.x=Ke.x,J.y=Ke.y,J.addTo(Ie,null,!1);var at=se.localToLocal(Te.x,Te.y,xe);Te.x=s=="none"?0:at.x-J.x,Te.y=s=="none"?0:at.y-J.y,Te.addTo(Ie,null,!1);var me=se.localToLocal(ve.x,ve.y,xe);ve.x=s=="none"?0:me.x-J.x,ve.y=s=="none"?0:me.y-J.y,ve.addTo(Ie,null,!1),Ie.x=J.x,Ie.y=J.y,J.x=0,J.y=0,s=="none"&&J.addTo(Ie,null,!1)}else Be=i[ae],Se=Be[8]?Be[8]:s,Ie.loc({x:Be[0],y:Be[1]}),J=new t.Circle(te,f.circleColor,f.circleBorderColor,2,null,null,null,null,!1).centerReg({add:!1}).addTo(Ie).loc({x:Be[2],y:Be[3]}),Te=new t.Rectangle(ge,ge,oe(Se),T==0?null:t.dark,T==0?null:2,null,null,null,null,!1).centerReg({add:!1}).addTo(Ie,0).loc({x:Be[4],y:Be[5]}),ve=new t.Rectangle(ge,ge,oe(Se),T==0?null:t.dark,T==0?null:2,null,null,null,null,!1).centerReg({add:!1}).addTo(Ie,0).loc({x:Be[6],y:Be[7]});J.mySet=Ie,J.rect1=Te,J.rect2=ve,J.index=ae,Ae?J.on("mousedown",Je):J.on("dblclick",ce),Te.ball=J,Te.other=ve,ve.ball=J,ve.other=Te,T==0&&(J.expand(10),Te.expand(10),ve.expand(10)),Ae&&(J.expand(),Te.expand(),ve.expand()),de=[Ie,J,Te,ve,Be?Be[8]:s],g.push(de),q.push(J),I.push(Ie)}var Ge=!1;function Je(Re){Ge?(Re.preventDefault(),ce(Re)):(Ge=!0,setTimeout(function(){Ge=!1},300))}function ce(Re){if(!f.lockControlType){var Ze=Re.target,be=g[Ze.index][4]?g[Ze.index][4]:s;Math.abs(Ze.rect1.x)<=2&&Math.abs(Ze.rect1.y)<=2&&Math.abs(Ze.rect2.x)<=2&&Math.abs(Ze.rect2.y)<=2&&(be="none"),be=="none"&&Ze.parent.addChildAt(Ze,0),be=f.types[(f.types.indexOf(be)+(f.shiftKey?-1:1)+f.types.length)%f.types.length],be=="none"&&(Ze.rect1.x=Ze.rect1.y=Ze.rect2.x=Ze.rect2.y=0,Ze.parent.addChild(Ze),Re.stopImmediatePropagation()),g[Ze.index][4]=be,Ze.rect1.color=oe(be),Ze.rect2.color=oe(be),f.drawShape(),e.type&&(f.color=e);var we=new Ne.Event("change");we.controlType="bezierSwitch",f.dispatchEvent(we),Ze.stage.update()}}function oe(Re){var Ze={straight:"#e472c4",free:"#ebcb35",none:"#50c4b7"};return Ze[Re]?Ze[Re]:"#993399"}var _e=t.mobile();f.drawShape=function(){re.c();var Re=_e?10:6,Ze,be,we,Me,He,Xe,nt,Ce,Fe,it,Qe,tt,ot,gt,ze;if(r<Re)for(re.s("rgba(0,0,0,.01)").ss(Re),Me=g[0][0],Fe=Me.localToLocal(g[0][1].x,g[0][1].y,R),re.mt(Fe.x,Fe.y),Ze=0;Ze<g.length;Ze++)be=Ze,we=(Ze+1)%g.length,Me=g[be][0],He=g[be][1],Xe=g[be][2],nt=g[be][3],Ce=g[we][0],it=g[we][1],Qe=g[we][2],ot=Me.localToLocal(nt.x,nt.y,R),gt=Ce.localToLocal(Qe.x,Qe.y,R),ze=Ce.localToLocal(it.x,it.y,R),Ze!=g.length-1&&re.bt(ot.x,ot.y,gt.x,gt.y,ze.x,ze.y);for(f.colorCommand||(f.colorCommand=re.s(f._color).command,e&&e.type&&f.specialColor(f.colorCommand,e,f)),f.thicknessCommand||(f.thicknessCommand=re.ss(f._thickness,_.caps,_.joints,_.miterLimit,_.ignoreScale).command),f._dashed&&(f.dashedCommand||(f.dashedCommand=re.sd(Array.isArray(f._dashed)?f._dashed:[10,10],f._dashedOffset).command)),Me=g[0][0],Fe=Me.localToLocal(g[0][1].x,g[0][1].y,R),re.mt(Fe.x,Fe.y),pe.c().s(f.stickColor).ss(f.stickThickness),Ze=0;Ze<g.length;Ze++)be=Ze,we=(Ze+1)%g.length,Me=g[be][0],He=g[be][1],Xe=g[be][2],nt=g[be][3],Ce=g[we][0],it=g[we][1],Qe=g[we][2],ot=Me.localToLocal(nt.x,nt.y,R),gt=Ce.localToLocal(Qe.x,Qe.y,R),ze=Ce.localToLocal(it.x,it.y,R),Ze!=g.length-1&&re.bt(ot.x,ot.y,gt.x,gt.y,ze.x,ze.y),Fe=Me.localToLocal(He.x,He.y,R),tt=Me.localToLocal(Xe.x,Xe.y,R),Ze==0&&(Xe.visible=0),Ze!=0&&pe.mt(Fe.x,Fe.y).lt(tt.x,tt.y),Ze!=g.length-1&&pe.mt(Fe.x,Fe.y).lt(ot.x,ot.y),Ze==g.length-1&&(nt.visible=0);f._dashed&&re.append(f.dashedCommand),re.append(f.thicknessCommand),re.append(f.colorCommand)},f.drawShape(),e.type&&(f.color=e);var je;xe.on("mousedown",function(Re){if(o=Re.target.stage,!f.lockControls){if(f.selectPoints&&(f.keyFocus=!0),je={x:Re.target.x,y:Re.target.y},Re.target.rect1)J=Re.target,J.startX=J.x,J.startY=J.y,J.rect1.startX=J.rect1.x,J.rect1.startY=J.rect1.y,J.rect2.startX=J.rect2.x,J.rect2.startY=J.rect2.y;else{var Ze=Re.target;Ze.startX=Ze.x,Ze.startY=Ze.y,J=Ze.ball;var be=J.index,we=s;if(n(g[be][4])||(we=g[be][4]),we=="straight"){var Me=Ze.other,He=Me.x-J.x,Xe=Me.y-J.y;Me.stickLength=Math.sqrt(Math.pow(He,2)+Math.pow(Xe,2))}}if(f.selectPoints){var nt=f.selectionManager.currentSet;if(nt&&nt.selections&&nt.selections.length>0)for(ae=0;ae<nt.selections.length;ae++){var Ce=f.pointObjects[nt.selections[ae]];Ce[1].startX=Ce[1].x,Ce[1].startY=Ce[1].y,Ce[2].startX=Ce[2].x,Ce[2].startY=Ce[2].y,Ce[3].startX=Ce[3].x,Ce[3].startY=Ce[3].y}}}}),f.selectPoints&&xe.tap(function(Re){if(Re.target.rect1){var Ze=Re.target;f.selectedBalls.toggle(Ze.parent.num)}else{var be=Re.target;be.color="white",Ze=be.ball,Ze.rect1==be?f.selectedRect1s.toggle(Ze.parent.num):f.selectedRect2s.toggle(Ze.parent.num)}for(ae=0;ae<f.pointObjects.length;ae++){var we=f.pointObjects[ae];we[1].color=f.selectedBalls.isSelected(ae)?k:f.circleColor,we[2].color=f.selectedRect1s.isSelected(ae)?k:oe(we[4]),we[3].color=f.selectedRect2s.isSelected(ae)?k:oe(we[4])}o.update()}),xe.on("pressmove",function(Re){if(!f.lockControls)if(f.selectPoints){var Ze=ke();if(Ze.indexOf(Re.target)==-1)$(Re.target),f.drawShape();else if(Ze.length>0){for(var be=Re.target.x-Re.target.startX,we=Re.target.y-Re.target.startY,Me=0;Me<Ze.length;Me++){var He=Ze[Me];He.x=He.startX+be,He.y=He.startY+we,$(He)}f.drawShape()}}else $(Re.target),f.drawShape()}),xe.on("pressup",function(Re){if(!f.lockControls){var Ze=Re.target.x!=je.x||Re.target.y!=je.y,be=new Ne.Event("change");Re.target.rect1?(be.controlType="bezierPoint",Ve(Re.target)):be.controlType="bezierHandle",Ze&&f.dispatchEvent(be)}});function Ve(Re){if(f.selectPoints){var Ze=ke();if(Ze&&Ze.indexOf(Re)==-1)U(Re);else if(Ze&&Ze.length>0)for(var be=0;be<Ze.length;be++)U(Ze[be]);else U(Re)}else U(Re)}f.changeControl=function(Re,Ze,be,we,Me,He,Xe,nt,Ce){var Fe="index, type, rect1X, rect1Y, rect2X, rect2Y, circleX, circleY, update",it;if(it=lt(f.changeControl,arguments,Fe))return it;if(n(Re)){for(ae=0;ae<g.length;ae++)f.changeControl(ae,Ze,be,we,Me,He,Xe,nt);return}var Qe=g[Re];Qe[4]=Ze,Ze=="none"?(n(Xe)||(Qe[2].x=Xe),n(nt)||(Qe[2].y=nt),Qe[2].x=Qe[1].x,Qe[2].y=Qe[1].y,Qe[3].x=Qe[1].x,Qe[3].y=Qe[1].y,Qe[1].parent.addChild(Qe[1])):(n(be)||(Qe[2].x=be),n(we)||(Qe[2].y=we),n(Me)||(Qe[3].x=Me),n(He)||(Qe[3].y=He),n(Xe)||(Qe[1].x=Xe),n(nt)||(Qe[1].y=nt),Qe[1].parent.addChildAt(Qe[1],0)),Ce&&(f.update(),o&&o.update())},f.transformPoints=function(Re,Ze,be,we,Me){return n(Me)&&(Me=!0),f.points=t.transformPoints(f.points,Re,Ze,be,we),Me&&f.approximateBounds(),f},f.traverse=function(Re,Ze,be,we){var Me=t.copy(f.segmentRatios);Me.unshift(0),n(be)&&(be=Ze+1);var He=Ze<be,Xe,nt;return He?(Xe=Me[Ze]*100,nt=Me[be]*100):(Xe=50+(100-Me[Ze]*100)/2,nt=50+(100-Me[be]*100)/2),Re.percentComplete=Re.zimStartPercent=Xe+.1,Re.animate({ease:"linear",props:{path:f},rewind:!He,time:we,events:!0}),Re.on("animation",function(Ce){if(Re.percentComplete>nt||Re.percentComplete==0){Re.stopAnimate(),Ce.remove();var Fe=new Ne.Event("traversed");Fe.obj=Re,f.dispatchEvent(Fe)}}),f},f.reversePoints=function(){return i=t.copy(f.points),f.points=t.reversePoints(t.copy(f.points)),f.update(),f},f.appendPoints=function(Re,Ze){var be=t.copy(f.points);return f.points=t.appendPoints(be,Re,Ze),f.update(),f},f.prependPoints=function(Re,Ze){var be=t.copy(f.points);return f.points=t.rependPoints(be,i,Ze),f.update(),f},f.splitPoints=function(Re){var Ze=t.copy(f.points);if(!(Re<1||Re>Ze.length-1)){var be=t.splitPoints(Ze,Re),we=be[0],Me=be[1],He=f.clone();return f.points=we,f.update(),He.points=Me,f.parent&&He.addTo(f.parent),He}},f.makeBlob=function(Re,Ze){n(Re)&&(Re="mirror"),n(Ze)&&(Ze=5);var be=t.copy(f.points);t.loop(be,function(Me,He,Xe){Me[8]||(Me[8]="mirror"),He==0&&(Re=="free"&&(Me[4]=Me[5]=0),Me[8]=Re),He==Xe-1&&(Re=="free"&&(Me[6]=Me[7]=0),Me[8]=Re)}),Math.abs(be[0][0]-be[be.length-1][0])<Ze&&Math.abs(be[0][1]-be[be.length-1][1])<Ze&&(be[0][4]=be[be.length-1][4],be[0][5]=be[be.length-1][5],be.pop());var we=new t.Blob({points:be,borderColor:f.color,borderWidth:f.thickness,showControls:f.controlsVisible,interactive:f.interactive,onTop:f.onTop,dashed:f.dashed,stickColor:f.stickColor,stickThickness:f.stickThickness});return we},f.update=function(Re){return Re?f.points=f.pointsAdjusted:f.drawShape(),f.zimAnimateChanged=!0,f},f.interactive&&(w&&R.drag({onTop:!1}),le=R.on("mousedown",function(Re){o=Re.target.stage,je={x:R.x,y:R.y},f.selectPoints&&(f.keyFocus=!0),De()}),N=R.on("pressmove",function(){xe.x=R.x,xe.y=R.y,H.x=R.x,H.y=R.y}),L=R.on("pressup",function(){var Re=R.x!=je.x||R.y!=je.y,Ze=R.localToLocal(f.regX,f.regY,f.parent);if(f.x=Ze.x,f.y=Ze.y,xe.x=xe.y=H.x=H.y=R.x=R.y=0,Re){var be=new Ne.Event("change");be.controlType="move",f.dispatchEvent(be)}o&&o.update()}),f.move||Q(!0));function De(){if(f.onTop){var Re=f.parent.numChildren-1;f.parent.getChildAt(Re).type=="Keyboard"&&Re--,f.parent.setChildIndex(f,Re)}}f.toggleEvent=f.on("mousedown",function(){f.allowToggle&&(F||(f.showControls(),f.dispatchEvent("controlsshow")))}),f.added(function(){o=f.stage,f.toggleStageEvent&&o.off("stagemousedown",f.toggleStageEvent),f.toggleStageEvent=o.on("stagemousedown",function(Re){!f.allowToggle||!f.stage||F&&!f.hitTestPoint(Re.stageX/t.scaX,Re.stageY/t.scaY,!1)&&(f.hideControls(),f.dispatchEvent("controlshide"))})}),f.clickEvent=f.on("click",function(){f.ctrlKey&&setTimeout(function(){f.clone(!0).addTo(f.stage).mov(0,100),f.allowToggle&&(f.hideControls(),f.dispatchEvent("controlshide"));var Re=new Ne.Event("change");Re.controlType="move",f.dispatchEvent(Re),f.stage.update()},50)}),f.hideControls=function(){return f.toggled=!1,xe.visible=!1,H.visible=!1,F=!1,f.stage&&f.stage.update(),!f.allowToggle&&f.move&&Q(),f},d||f.hideControls(),f.showControls=function(){return f.toggled=!0,xe.visible=!0,H.visible=!0,F=!0,xe.x=R.x,xe.y=R.y,H.x=R.x,H.y=R.y,f.addChildAt(R,0),f.move&&!f.allowToggle&&Ee(),f.stage&&f.stage.update(),f},f.toggle=function(Re){return Re===!0?f.showControls():Re===!1||F?f.hideControls():f.showControls(),f},f.recordData=function(Re){n(Re)&&(Re=!1);var Ze={type:"Squiggle",index:f.parent?f.parent.getChildIndex(f):-1,x:f.x,y:f.y,points:f.getPoints(),color:f.color,thickness:f.thickness,move:f.move,allowToggle:f.allowToggle,controlsVisible:F};return Re?JSON.stringify(Ze):Ze},f.setData=function(Re,Ze){if(!n(Re)){if(Ze)try{Re=JSON.parse(Re)}catch{return}var be=Re.index;n(be)&&(be=-1),delete Re.index;var we=Re.points;n(we)||f.setPoints(we),delete Re.points,f.num=we.length;for(var Me in Re)f[Me]=Re[Me];return f.parent&&f.parent.setChildIndex(f,be),f.update(),f}},f.getPoints=function(Re){n(Re)&&(Re=!1);var Ze=f.points;if(Re){if(!f.pane){var be=f.pane=new t.Pane({container:f.stage,width:Math.min(500,f.stage.width-20),height:Math.min(500,f.stage.height-20),draggable:!0}),we=f.textArea=new t.TextArea(Math.min(400,f.stage.width-70),Math.min(400,f.stage.height-70));we.centerReg(be)}f.textArea.text=JSON.stringify(Ze),f.pane.show()}return Ze},f.recordPoints=f.getPoints,f.setPoints=function(Re){for(var Ze,be,we=0;we<Re.length;we++)Ze=g[we],be=Re[we],!n(Ze)&&(Ze[0].x=be[0],Ze[0].y=be[1],Ze[1].x=be[2],Ze[1].y=be[3],Ze[2].x=be[4],Ze[2].y=be[5],Ze[3].x=be[6],Ze[3].y=be[7],Ze[4]=be[8]);return f.update(),f},Y!==!1&&t.styleTransforms(f,O),f.clone=function(Re,Ze){var be=[],we=!1;t.loop(f.pointControls,function(He){He.scaleX+He.scaleY+He.regX+He.regY+He.rotation!=2&&(we=!0),be.push([He.scaleX,He.scaleY,He.regX,He.regY,He.rotation])});var Me=f.cloneProps(new t.Squiggle(Ze?f.colorCommand:Re||!t.isPick(D[0])?f.color:D[0],f.thickness,f.getPoints(),l,a,s,c,xe.visible,C,T,f.allowToggle,f.move,A,y,f.circleColor,f.circleBorderColor,f.stickColor,f.stickThickness,k,p,f.editPoints,S,_,Y,f.group,b));return we&&(t.loop(Me.pointControls,function(He,Xe){He.scaleX=be[Xe][0],He.scaleY=be[Xe][1],He.regX=be[Xe][2],He.regY=be[Xe][3],He.rotation=be[Xe][4]}),Me.update()),f.linearGradientParams&&Me.linearGradient.apply(Me,f.linearGradientParams),f.radialGradientParams&&Me.radialGradient.apply(Me,f.radialGradientParams),Me},f.shape.on("mousedown",function(Re){o=Re.target.stage,f.editPoints&&(f.controlsVisible?(f.pressX=Re.stageX/t.scaX,f.pressY=Re.stageY/t.scaX):(f.pressX=null,f.pressY=null))}),f.addPointFactor=10,f.addMinDistance=15,f.shape.on("pressup",function(Re){if(f.editPoints&&f.pressX&&Math.abs(f.pressX-Re.stageX/t.scaX)<z&&Math.abs(f.pressY-Re.stageY/t.scaY)<z){f.selectPoints&&(f.lastPoints=t.copy(f.points));var Ze=f.points,be=f.globalToLocal(Re.stageX/t.scaX,Re.stageY/t.scaY),we=t.closestPointAlongCurve(be,f.segmentPoints);if(f.editPoints=="anywhere")Ze.splice(we+1,0,[be.x,be.y,0,0,0,0,0,0]),f.points=Ze,f.changeControl({index:we+1,type:"mirror",update:!0});else{var Me=f.pointsAdjusted,He=f.getSegmentPoint(Me[we],Me[(we+1)%Me.length]),Xe=t.distanceAlongCurve(He),nt=Math.round(Xe/f.addPointFactor),Ce=f.interpolate(nt,we,!1,Ze),Fe=1e4,it;if(t.loop(Ce,function(gt,ze){var Mt=t.dist(gt,be);Mt<Fe&&(Fe=Mt,it=ze)}),Fe<f.addMinDistance){var Qe=f.segmentRatios,tt=Qe[we],ot=we>0?Qe[we-1]:0;f.addPoint(100*(ot+(tt-ot)*(it/(nt+1))))}}f.lastSelectedIndex=we+1,f.lastSelected=f.controls.getChildAt(f.lastSelectedIndex),f.stage.update()}}),f.controls.on("click",function(Re){f.lastSelected=Re.target.parent,f.lastSelectedIndex=f.controls.getChildIndex(Re.target.parent),f.editPoints&&f.selectionManager.shiftKey&&Oe(Re)});function Oe(Re){if(Re.target.type=="Circle"){var Ze=f.lastSelectedIndex=f.controls.getChildIndex(Re.target.parent);if(f.controls.numChildren<=2)return;var be=f.points;f.selectPoints&&(f.lastPoints=t.copy(be)),be.splice(Ze,1),f.points=be,f.stage.update(),f.lastSelected=f.lastSelectedIndex=null}}f.controls.hold(Oe),F||f.hideControls(),f.dispatchEvent("update")}function ke(){var H=[],re=f.selectionManager.currentSet;if(re&&re.selections&&re.selections.length>0)for(var pe=0;pe<re.selections.length;pe++){var te=f.pointObjects[re.selections[pe]];if(re==f.selectedBalls)H.push(te[1]);else if(re==f.selectedRect1s)H.push(te[2]);else if(re==f.selectedRect2s)H.push(te[3]);else continue}return H}function U(H){if(H.type=="Circle"){var re=H,pe=re.mySet,te=re.rect1,ge=re.rect2;te.x-=re.x,te.y-=re.y,ge.x-=re.x,ge.y-=re.y,pe.x+=re.x,pe.y+=re.y,re.x=0,re.y=0}}f.selectionManager.on("keydown",function(H){if(f.selectPoints&&f.keyFocus&&H.keyCode>=37&&H.keyCode<=40){var re=ke();if(re.length>0){for(var pe=0;pe<re.length;pe++){var te=re[pe];H.keyCode==37?te.x-=f.selectionManager.shiftKey?10:1:H.keyCode==39?te.x+=f.selectionManager.shiftKey?10:1:H.keyCode==38?te.y-=f.selectionManager.shiftKey?10:1:H.keyCode==40&&(te.y+=f.selectionManager.shiftKey?10:1),$(te)}f.drawShape(),f.dispatchEvent("update"),f.stage&&f.stage.update()}}}),f.selectionManager.on("keyup",function(H){if(f.selectPoints&&f.keyFocus&&H.keyCode>=37&&H.keyCode<=40){var re=ke();if(re.length>0)for(var pe=0;pe<re.length;pe++)U(re[pe])}}),f.selectionManager.on("undo",function(){if(f.selectPoints&&f.keyFocus&&f.lastPoints){var H=t.copy(f.lastPoints);f.lastPoints=t.copy(f.points),f.points=H,f.stage&&f.stage.update()}}),$=function(H){if(!f.lockControls){var re;if(H.rect1){re=H;var pe=re.x-re.startX,te=re.y-re.startY;re.rect1.x=re.rect1.startX+pe,re.rect1.y=re.rect1.startY+te,re.rect2.x=re.rect2.startX+pe,re.rect2.y=re.rect2.startY+te}else{var ge=H,Ae=ge.other;re=ge.ball;var ae=re.index,de=s;if(n(g[ae][4])||(de=g[ae][4]),de=="straight"||de=="mirror"){var se=ge.x-re.x,Ie=ge.y-re.y;if(de=="mirror")Ae.x=re.x-se,Ae.y=re.y-Ie;else{var Te=Math.atan2(Ie,se),ve=-Ae.stickLength*Math.cos(Te+Math.PI),J=-Ae.stickLength*Math.sin(Te+Math.PI);Ae.x=re.x-ve,Ae.y=re.y-J}}}}},Object.defineProperty(f,"move",{get:function(){return w},set:function(H){w!=H&&(w=H,H?Ee():Q())}}),Object.defineProperty(f,"interactive",{get:function(){return S},set:function(H){S=H,F=S,f.allowToggle=S,f.editPoints=S,f.lockControls=!S,f.selectPoints=S,f.move=S;var re=f.points;f.points=re}}),Object.defineProperty(f,"allowToggle",{get:function(){return h},set:function(H){h!=H&&(h=H,h?f.move&&Ee():!F&&f.move&&Q())}});function Ee(){f.move!="always"&&(ee||(ee=!0,R.drag({onTop:!1}),le=R.on("mousedown",le),N=R.on("pressmove",N),L=R.on("pressup",L)))}function Q(H){f.move!="always"&&(!H&&!ee||(ee=!1,R.noDrag(),R.off("mousedown",le),R.off("pressmove",N),R.off("pressup",L)))}var G=C;Object.defineProperty(f,"lockControls",{get:function(){return G},set:function(H){G=H,H?(f.controls.mouseChildren=!1,f.controls.mouseEnabled=!1):(f.controls.mouseChildren=!0,f.controls.mouseEnabled=!0)}}),f.lockControls=G,Object.defineProperty(f,"controlsVisible",{get:function(){return F},set:function(H){F=H,H?f.showControls():f.hideControls()}}),j.KEYFOCUS!=null&&(t.KEYFOCUS=j.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return t.KEYFOCUS==f},set:function(){t.KEYFOCUS=f}}),t.KEYFOCUS||ue();function ue(){if(f.selectPoints){f.keyFocus=!0;var H=document.activeElement;H&&H.blur()}}Object.defineProperty(f,"points",{get:function(){for(var H=[],re,pe,te=0;te<g.length;te++)pe=g[te],re=[t.decimals(pe[0].x),t.decimals(pe[0].y),t.decimals(pe[1].x),t.decimals(pe[1].y),t.decimals(pe[2].x),t.decimals(pe[2].y),t.decimals(pe[3].x),t.decimals(pe[3].y)],pe[4]&&pe[4]!=="mirror"&&re.push(pe[4]),H.push(re);return H},set:function(H){var re=f.x,pe=f.y,te=f.visible,ge=[],Ae=!1;t.loop(f.pointControls,function(ae){ae.scaleX+ae.scaleY+ae.regX+ae.regY+ae.rotation!=2&&(Ae=!0),ge.push([ae.scaleX,ae.scaleY,ae.regX,ae.regY,ae.rotation])}),f.dispose(!0),i=H,ie(),f.lockControls=G,f.x=re,f.y=pe,f.visible=te,Ae&&(t.loop(f.pointControls,function(ae,de){ae.scaleX=ge[de][0],ae.scaleY=ge[de][1],ae.regX=ge[de][2],ae.regY=ge[de][3],ae.rotation=ge[de][4]}),f.update())}}),Object.defineProperty(f,"pointsAdjusted",{get:function(){var H=[],re,pe,te,ge=f.pointObjects;return t.loop(ge.length,function(Ae){if(te=ge[Ae],pe=g[Ae],te[0].rotation==0&&te[0].scaleX==0&&te[0].scaleY==0)re=[t.decimals(pe[0].x),t.decimals(pe[0].y),t.decimals(pe[1].x),t.decimals(pe[1].y),t.decimals(pe[2].x),t.decimals(pe[2].y),t.decimals(pe[3].x),t.decimals(pe[3].y)];else{var ae=te[0].localToLocal(te[2].x,te[2].y,te[0].parent),de=te[0].localToLocal(te[3].x,te[3].y,te[0].parent);re=[t.decimals(pe[0].x),t.decimals(pe[0].y),t.decimals(pe[1].x),t.decimals(pe[1].y),t.decimals(ae.x-pe[0].x),t.decimals(ae.y-pe[0].y),t.decimals(de.x-pe[0].x),t.decimals(de.y-pe[0].y)]}pe[4]&&pe[4]!=="mirror"&&re.push(pe[4]),H.push(re)}),H},set:function(){dt&&$e("Squiggle() - pointsAdjusted is read only")}}),Object.defineProperty(f,"pointObjects",{get:function(){return g},set:function(){dt&&$e("Squiggle() - pointObjects is read only - but its contents can be manipulated - use squiggle.update() after changes")}}),Object.defineProperty(f,"pointControls",{get:function(){return I},set:function(){dt&&$e("Squiggle() - pointControls is read only - but its contents can be manipulated - use blob.update() after changes")}}),Object.defineProperty(f,"pointCircles",{get:function(){return q},set:function(){dt&&$e("Squiggle() - pointCircles is read only - but its contents can be manipulated - use blob.update() after changes")}}),Object.defineProperty(f,"segmentPoints",{get:function(){var H=[],re=f.pointsAdjusted;return t.loop(re.length-1,function(pe){var te=f.getSegmentPoint(re[pe],re[pe+1]);H.push(te)}),H},set:function(){dt&&$e("Squiggle() - segmentPoints is read only")}}),Object.defineProperty(f,"segmentRatios",{get:function(){var H=[],re=0;t.loop(f.segmentPoints,function(ge){var Ae=t.distanceAlongCurve(ge);H.push(Ae),re+=Ae});var pe=[],te=0;return t.loop(H,function(ge){var Ae=ge/re;te+=Ae,pe.push(te)}),pe},set:function(){dt&&$e("Squiggle() - segmentRatios is read only")}}),f.approximateBounds=function(H,re,pe){n(H)&&(H=80),n(pe)&&(pe=0),H/=f.num;var te=f.interpolate(H,null,!0,null,!0),ge=t.boundsAroundPoints(te);if(f.setBounds(ge.x-pe,ge.y-pe,ge.width+pe*2,ge.height+pe*2),re){if(!f.parent)return dt&&$e("approximateBounds() - add to stage to first to see points"),f;f.hitPathPoints?f.hitPathPoints.removeAllChildren():f.hitPathPoints=new t.Container().addTo(),f.hitPathPoints.top();for(var Ae=0;Ae<te.length;Ae++){var ae=te[Ae];ae=f.localToGlobal(ae.x,ae.y),new t.Circle(3).loc(ae.x,ae.y,f.hitPathPoints)}}return f},f.getPointAngle=function(H){var re=f.pointObjects[H][0],pe=f.pointObjects[H][2],te=f.pointObjects[H][3],ge,Ae;return re==f.stage?(ge=new t.Point(pe.x,pe.y),Ae=new t.Point(te.x,te.y)):(ge=re.localToGlobal(pe.x,pe.y),Ae=re.localToGlobal(te.x,te.y)),t.angle(ge.x,ge.y,Ae.x,Ae.y)},f.getSegmentPoint=function(H,re){if(!(n(H)||n(re))){(H[2]!=0||H[3]!=0)&&(H[4]-=H[2],H[5]-=H[3],H[6]-=H[2],H[7]-=H[3],H[0]+=H[2],H[1]+=H[3],H[2]=0,H[3]=0),(re[2]!=0||re[3]!=0)&&(re[4]-=re[2],re[5]-=re[3],re[6]-=re[2],re[7]-=re[3],re[0]+=re[2],re[1]+=re[3],re[2]=0,re[3]=0);var pe={x:H[0],y:H[1]},te={x:H[0]+H[6],y:H[1]+H[7]},ge={x:re[0]+re[4],y:re[1]+re[5]},Ae={x:re[0],y:re[1]};return(xe.x!=0||xe.y!=0)&&(pe.x+=xe.x,te.x+=xe.x,ge.x+=xe.x,Ae.x+=xe.x,pe.y+=xe.y,te.y+=xe.y,ge.y+=xe.y,Ae.y+=xe.y),[pe,te,ge,Ae]}},f.getAdjacentSegmentData=function(H){n(H)&&(H=0);var re=f.pointsAdjusted;return f.num==2?[[f.getSegmentPoint(re[0],re[1])],[0]]:H==0?[[f.getSegmentPoint(re[0],re[1]),f.getSegmentPoint(re[1],re[2])],[0,1]]:H>=f.num-2?[[f.getSegmentPoint(re[f.num-3],re[f.num-2]),f.getSegmentPoint(re[f.num-2],re[f.num-1])],[f.num-3,f.num-2]]:[[f.getSegmentPoint(re[H-1],re[H]),f.getSegmentPoint(re[H],re[H+1]),f.getSegmentPoint(re[H+1],re[H+2])],[H-1,H,H+1]]},f.getCurvePoint=function(H,re,pe,te,ge){(n(H)||isNaN(H))&&(H=0),n(re)&&(re=f.segmentRatios),n(pe)&&(pe=f.segmentPoints),n(te)&&(te=!1),n(ge)&&(ge=!1);var Ae=re,ae=pe,de=t.loop(Ae,function(Se,Be){if(Se>=H)return Be}),se=de>0?Ae[de-1]:0,Ie=de>0?Ae[de]-Ae[de-1]:Ae[de];if(Ie){var Te=(H-se)/Ie,ve=t.pointAlongCurve(ae[de],Te,te,!0),J=f.localToGlobal(ve.x,ve.y);return J.angle=ve.angle,J.z=de,n(J)?void 0:J}};function fe(H,re,pe){return{x:H.x+(re.x-H.x)*pe,y:H.y+(re.y-H.y)*pe}}function ye(H,re,pe,te,ge,Ae,ae,de){var se=H.length-1,Ie=0,Te=0;te==100&&f.type=="Squiggle"&&(te=99.99),te=(te+1e5)%100,t.loop(pe,function(oe,_e){if(te/100<oe)return se=_e,Te=oe,!0;Ie=oe});var ve=f.segmentPoints[se],J=Te>0?(te/100-Ie)/(Te-Ie):0,Se=t.pointAlongCurve(ve,J,null,de),Be=[Se.x,Se.y,0,0];if(!Ae){if(ae){f.interpolatedPoints.push({x:Se.x,y:Se.y,r:te/100});return}if(ge!="none"){var Ye=fe(ve[0],ve[1],J),Ke=fe(ve[1],ve[2],J),at=fe(ve[2],ve[3],J),me=fe(Ye,Ke,J),Ge=fe(Ke,at,J);Be[4]=me.x-Se.x,Be[5]=me.y-Se.y,Be[6]=Ge.x-Se.x,Be[7]=Ge.y-Se.y;var Je=f.localToLocal(Ye.x,Ye.y,re[se]);H[se][6]=Je.x,H[se][7]=Je.y;var ce=f.localToLocal(at.x,at.y,re[(se+1)%H.length]);H[(se+1)%H.length][4]=ce.x,H[(se+1)%H.length][5]=ce.y}ge&&(Be[8]=ge),H.splice(se+1,0,Be)}}this.addPoint=function(H,re){n(H)&&(H=100);var pe=f.points,te=f.segmentRatios,ge=f.pointControls;return re=re||ne,ye(pe,ge,te,H,re),f.points=pe,f.num=pe.length,f},this.removePoint=function(H){if(!(n(H)||H<0)){var re=t.copy(f.points);return re.splice(H,1),f.points=re,f.stage&&f.stage.update(),f}},this.addPoints=function(H,re,pe,te,ge,Ae,ae){n(Ae)&&(Ae=t.copy(f.points));var de=t.copy(f.segmentRatios),se=0;if(ge&&(f.interpolatedPoints=[]),te)var Ie=de.length*H;return t.loop(de,function(Te,ve){ge&&ye(Ae,f.pointControls,f.segmentRatios,se*100,re,!n(pe)&&ve!=pe,ge,ae);var J=te?Math.round(Ie*(Te-se)):H,Se=1/(J+1);t.loop(J,function(Be){var Ye=se+(Te-se)*Se*(Be+1);ye(Ae,f.pointControls,f.segmentRatios,Ye*100,re,!n(pe)&&ve!=pe,ge,ae),!ge&&H>0&&(f.points=Ae)}),se=Te}),ge&&f.type=="Squiggle"&&ye(Ae,f.pointControls,f.segmentRatios,100,re,!1,ge,ae),f.stage&&f.stage.update(),f.num=Ae.length,f},this.interpolate=function(H,re,pe,te,ge){return n(H)&&(H=1),f.addPoints(H,"none",re,pe,!0,te,ge),f.interpolatedPoints},W&&f.approximateBounds(),this.dispose=function(H,re,pe){if(f.shape){if(t.gD(f),o&&f.toggleStageEvent&&o.off("stagemousedown",f.toggleStageEvent),f.controls.noDrag(),f.controls.removeAllEventListeners(),f.selectPoints&&f.selectionManager&&f.selectionManager.dispose(),f.selectedBalls=null,f.selectedRect1s=null,f.selectedRect2s=null,f.selectionManager=null,f.off("mousedown",f.toggleEvent),f.off("click",f.clickEvent),H){f.shape.dispose(),f.shape=null;for(var te=0;te<f.points.length;te++)f.pointObjects[te][0].removeAllEventListeners(),f.pointObjects[te][1].removeAllEventListeners(),f.pointObjects[te][2].removeAllEventListeners(),f.pointObjects[te][3].removeAllEventListeners();f.controls.removeFrom(f),f.sticks.dispose(),g=null,q=null}else f.removeAllEventListeners(),g=null,q=null,pe||this.zimCustomShape_dispose(!0);return!0}}},t.extend(t.Squiggle,t.CustomShape,["clone","dispose"],"zimCustomShape",!1),t.Blob=function(e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,x,E,k,p,m,S,_,Y,B,b,X){var V="color, borderColor, borderWidth, points, radius, controlLength, controlType, lockControlType, showControls, lockControls, handleSize, allowToggle, move, dashed, onTop, circleColor, circleBorderColor, stickColor, stickThickness, selectColor, selectPoints, editPoints, interactive, strokeObj, style, group, inherit",O;if(O=lt(t.Blob,arguments,V,this))return O;Le("53.5"),this.group=b;var Z=B===!1?{}:t.getStyle("Blob",this.group,X);n(a)&&(a=Z.radius!=null?Z.radius:100),this.zimCustomShape_constructor(-a,-a,a*2,a*2,!1),this.type="Blob",this.mouseChildren=!0,n(y)&&(y=Z.dashed!=null?Z.dashed:!1),n(r)&&(r=Z.borderColor!=null?Z.borderColor:null),n(i)&&(i=Z.borderWidth!=null?Z.borderWidth:null),r<0||i<0?r=i=null:r!=null&&i==null&&(i=1),n(e)&&(e=Z.color!=null?Z.color:i>0?"rgba(0,0,0,0)":t.green),e.style&&(this.colorCommand=e,e=t.black),r&&r.style&&(this.borderColorCommand=r,r=t.black),n(l)&&(l=Z.points!=null?Z.points:4);var W=typeof l!="number",K=typeof l=="number"?l:l.length,ne=s;n(s)&&(s=Z.controlLength!=null?Z.controlLength:a*4/K),n(c)&&(c=Z.controlType!=null?Z.controlType:null);var F=c;n(c)&&(c="straight"),n(d)&&(d=Z.lockControlType!=null?Z.lockControlType:!1),n(_)&&(_=Z.interactive!=null?Z.interactive:!0),n(C)&&(C=Z.showControls!=null?Z.showControls:_);var D=C;n(T)&&(T=Z.lockControls!=null?Z.lockControls:!_),n(h)&&(h=Z.handleSize!=null?Z.handleSize:t.mobile()?20:10),n(w)&&(w=Z.allowToggle!=null?Z.allowToggle:_),n(A)&&(A=Z.move!=null?Z.move:_),n(P)&&(P=Z.circleColor!=null?Z.circleColor:t.light),n(x)&&(x=Z.circleBorderColor!=null?Z.circleBorderColor:t.dark),n(E)&&(E=Z.stickColor!=null?Z.stickColor:t.darker),n(k)&&(k=Z.stickThickness!=null?Z.stickThickness:1),n(p)&&(p=Z.selectColor!=null?Z.selectColor:t.white),n(m)&&(m=Z.selectPoints!=null?Z.selectPoints:_),this.circleColor=P,this.circleBorderColor=x,this.stickColor=E,this.stickThickness=k,n(v)&&(v=Z.onTop!=null?Z.onTop:!0),n(S)&&(S=Z.editPoints!=null?Z.editPoints:_),n(Y)&&(Y=Z.strokeObj!=null?Z.strokeObj:{});var u=f(e,r);this.veeObj={color:u[0],borderColor:u[1]};function f(){return arguments}e=t.Pick.choose(e),r=t.Pick.choose(r);var o=this;this.interactive=_,this.num=K,this.editPoints=S,this.selectPoints=m,this.lockControls=T,this.onTop=v,this.move=A,this.allowToggle=w,this.lockControlType=d,this.types=["mirror","straight","free","none"];var g,q,I;o._color=e,o._borderColor=r,o._borderWidth=i,o._dashed=y,o._dashed&&!Array.isArray(o._dashed)&&(o._dashed=[10,10]);var R,le,N,L,ee,z=o.move,$=2,xe,ie;l=ke(l);function ke(te){(te=="circle"||te=="rectangle"||te=="triangle")&&(te=="circle"&&(te=new t.Circle(a)),te=="rectangle"&&(te=new t.Rectangle(a*2,a*2).centerReg({add:!1})),te=="triangle"&&(te=new t.Triangle(a*2,a*2,a*2)));var ge;if(te.type=="Circle"||te.type=="Rectangle"||te.type=="Triangle"||te.type=="Flare"){var Ae=te.getBounds();if(te.type=="Circle")ge=4,ne=s=a*2*.5523;else if(te.type=="Rectangle")te.centerReg({add:!1}),ge=[[Ae.x-Ae.width/2,Ae.y-Ae.height/2],[Ae.x+Ae.width/2,Ae.y-Ae.height/2],[Ae.x+Ae.width/2,Ae.y+Ae.height/2],[Ae.x-Ae.width/2,Ae.y+Ae.height/2]],o.setBounds(Ae.x-Ae.width/2,Ae.y-Ae.height/2,Ae.width,Ae.height),o.regX=te.regX-Ae.width/2,o.regY=te.regY-Ae.height/2;else if(te.type=="Triangle")ge=[[te.three.x-te.width/2,te.three.y+te.height/2+te.adjusted],[te.two.x-te.width/2,te.two.y+te.height/2+te.adjusted],[te.one.x-te.width/2,te.one.y+te.height/2+te.adjusted]],o.setBounds(Ae.x-Ae.width/2,Ae.y-Ae.height/2,Ae.width,Ae.height);else if(te.type=="Flare"){var ae=Ae.width/2+Ae.x,de=Ae.height/2+Ae.y;ge=[];var se=t.copy(te.points),Ie={x:null,y:null};t.loop(se,(Te,ve)=>{var J=Math.round(Te.x),Se=Math.round(Te.y);J==Ie.x&&Se==Ie.y||(Ie={x:J,y:Se},ge.push([J-ae,Te.y-de]))}),o.setBounds(-te.width/2,-te.height/2,te.width,te.height)}return ge}else return te}if(typeof l=="string"){var U=new t.SVGContainer;l=U.processPath(l),l[0][0]==l[l.length-1][0]&&l[0][1]==l[l.length-1][1]&&(l[0][4]=l[l.length-1][4],l[0][5]=l[l.length-1][5],l.pop())}F&&typeof l!="number"&&t.loop(l,function(te){te[8]=F,F=="none"&&(te[4]=te[5]=te[6]=te[7]=0)}),Ee();function Ee(){if(ie&&ie.removeAllEventListeners(),o.selectPoints?(o.selectedBalls=new t.SelectionSet,o.selectedRect1s=new t.SelectionSet,o.selectedRect2s=new t.SelectionSet,o.selectionManager=new t.SelectionManager([o.selectedBalls,o.selectedRect1s,o.selectedRect2s],"ctrl",!1)):o.selectionManager=new t.SelectionManager(null,"ctrl"),K=typeof l=="number"?l:l.length,K<=0)return;n(ne)&&(s=a*4/K),R=o.shape=new t.Shape({style:!1}).addTo(o);var te=o.sticks=new t.Shape({style:!1}).addTo(o);h<=0&&te.removeFrom();var ge=R.graphics;ge.c();var Ae=te.graphics;Ae.c();var ae=h/10*8,de=h,se=t.mobile();ie=o.controls=new t.Container({style:!1}).addTo(o),o.interactive&&ie.drag({onTop:!se}),g=[],I=[],q=[];var Ie,Te,ve,J,Se,Be,Ye,Ke,at;for(Ie=0;Ie<K;Ie++){if(J=new t.Container({style:!1}).addTo(ie),J.num=Ie,typeof l=="number"){var me=t.Pick.choose(s);ve=new t.Container(me,a,null,null,!1).reg(me/2,a).addTo(o),ve.rotation=Ie/K*360,Ye=new t.Circle(ae,o.selectPoints&&o.selectedBalls.isSelected(Ie)?p:o.circleColor,o.circleBorderColor,2,null,null,null,null,!1).centerReg(ve).loc({x:me/2,y:0}),Se=new t.Rectangle(de,de,o.selectPoints&&o.selectedRect1s.isSelected(Ie)?p:Ve(c),h==0?null:t.dark,h==0?null:2,null,null,null,null,!1).centerReg(ve).loc({x:0,y:0}),Be=new t.Rectangle(de,de,o.selectPoints&&o.selectedRect2s.isSelected(Ie)?p:Ve(c),h==0?null:t.dark,h==0?null:2,null,null,null,null,!1).centerReg(ve).loc({x:me,y:0});var Ge=ve.localToLocal(Ye.x,Ye.y,ie);Ye.x=Ge.x,Ye.y=Ge.y,Ye.addTo(J,null,!1);var Je=ve.localToLocal(Se.x,Se.y,ie);Se.x=c=="none"?0:Je.x-Ye.x,Se.y=c=="none"?0:Je.y-Ye.y,Se.addTo(J,null,!1);var ce=ve.localToLocal(Be.x,Be.y,ie);Be.x=c=="none"?0:ce.x-Ye.x,Be.y=c=="none"?0:ce.y-Ye.y,Be.addTo(J,null,!1),J.x=Ye.x,J.y=Ye.y,Ye.x=0,Ye.y=0,c=="none"&&Ye.addTo(J,null,!1)}else at=l[Ie],Ke=at[8]?at[8]:c,J.loc({x:at[0],y:at[1]}),Ye=new t.Circle(ae,o.circleColor,o.circleBorderColor,2,null,null,null,null,!1).centerReg({add:!1}).addTo(J).loc({x:at[2],y:at[3]}),Se=new t.Rectangle(de,de,Ve(Ke),h==0?null:t.dark,h==0?null:2,null,null,null,null,!1).centerReg({add:!1}).addTo(J,0).loc({x:at[4],y:at[5]}),Be=new t.Rectangle(de,de,Ve(Ke),h==0?null:t.dark,h==0?null:2,null,null,null,null,!1).centerReg({add:!1}).addTo(J,0).loc({x:at[6],y:at[7]});Ye.mySet=J,Ye.rect1=Se,Ye.rect2=Be,Ye.index=Ie,h==0&&(Ye.expand(10),Se.expand(10),Be.expand(10)),se?Ye.on("mousedown",_e):Ye.on("dblclick",je),Se.ball=Ye,Se.other=Be,Be.ball=Ye,Be.other=Se,se&&(Ye.expand(),Se.expand(),Be.expand()),Te=[J,Ye,Se,Be,at?at[8]:c],g.push(Te),q.push(Ye),I.push(J)}var oe=!1;function _e(be){oe?(be.preventDefault(),je(be)):(oe=!0,setTimeout(function(){oe=!1},300))}function je(be){if(!o.lockControlType){var we=be.target,Me=g[we.index][4]?g[we.index][4]:c;Math.abs(we.rect1.x)<=2&&Math.abs(we.rect1.y)<=2&&Math.abs(we.rect2.x)<=2&&Math.abs(we.rect2.y)<=2&&(Me="none"),Me=="none"&&we.parent.addChildAt(we,0),Me=o.types[(o.types.indexOf(Me)+(o.shiftKey?-1:1)+o.types.length)%o.types.length],Me=="none"&&(we.rect1.x=we.rect1.y=we.rect2.x=we.rect2.y=0,we.parent.addChild(we),be.stopImmediatePropagation()),g[we.index][4]=Me,we.rect1.color=Ve(Me),we.rect2.color=Ve(Me),o.drawShape();var He=new Ne.Event("change");He.controlType="bezierSwitch",o.dispatchEvent(He),we.stage.update()}}function Ve(be){var we={mirror:"#993399",free:"#ebcb35",none:"#50c4b7"};return we[be]?we[be]:"#e472c4"}o.drawShape=function(){var be,we,Me,He,Xe,nt,Ce,Fe,it,Qe,tt,ot,gt;ge.c(),o.colorCommand||(o.colorCommand=ge.f(o._color).command,e&&e.type&&o.specialColor(o.colorCommand,e,o)),(n(o._borderWidth)||o._borderWidth>0)&&(!n(o._borderColor)||!n(o._borderWidth))&&(n(o._borderColor)&&(o._borderColor=t.black),o.borderColorCommand||(o.borderColorCommand=ge.s(o._borderColor).command,o._borderColor&&o._borderColor.type&&o.specialColor(o.borderColorCommand,o._borderColor,o)),o.borderWidthCommand||(o.borderWidthCommand=ge.ss(o._borderWidth,Y.caps,Y.joints,Y.miterLimit,Y.ignoreScale).command),o._dashed&&(o.borderDashedCommand||(o.borderDashedCommand=ge.sd(Array.isArray(o._dashed)?o._dashed:[10,10],o._dashedOffset).command))),Me=g[0][0],Ce=Me.localToLocal(g[0][1].x,g[0][1].y,R),ge.mt(Ce.x,Ce.y),Ae.c().s(o.stickColor).ss(o.stickThickness);for(var ze=0;ze<g.length;ze++)be=ze,we=(ze+1)%g.length,Me=g[be][0],Ye=g[be][1],He=g[be][2],Xe=g[be][3],nt=g[we][0],Fe=g[we][1],it=g[we][2],tt=Me.localToLocal(Xe.x,Xe.y,R),ot=nt.localToLocal(it.x,it.y,R),gt=nt.localToLocal(Fe.x,Fe.y,R),ge.bt(tt.x,tt.y,ot.x,ot.y,gt.x,gt.y),Ce=Me.localToLocal(Ye.x,Ye.y,R),Qe=Me.localToLocal(He.x,He.y,R),Ae.mt(Ce.x,Ce.y).lt(Qe.x,Qe.y),Ae.mt(Ce.x,Ce.y).lt(tt.x,tt.y);ge.cp(),ge.append(o.colorCommand),o._dashed&&ge.append(o.borderDashedCommand),o.borderWidthCommand&&ge.append(o.borderWidthCommand),o.borderColorCommand&&ge.append(o.borderColorCommand)},o.drawShape(),e.type&&(o.color=e);var De;ie.on("mousedown",function(be){if(!o.lockControls){o.selectPoints&&(o.keyFocus=!0),De={x:be.target.x,y:be.target.y};var we;if(be.target.rect1)we=be.target,we.startX=we.x,we.startY=we.y,we.rect1.startX=we.rect1.x,we.rect1.startY=we.rect1.y,we.rect2.startX=we.rect2.x,we.rect2.startY=we.rect2.y;else{var Me=be.target;Me.startX=Me.x,Me.startY=Me.y,we=Me.ball;var He=we.index,Xe=c;if(n(g[He][4])||(Xe=g[He][4]),Xe=="straight"){var nt=Me.other,Ce=nt.x-we.x,Fe=nt.y-we.y;nt.stickLength=Math.sqrt(Math.pow(Ce,2)+Math.pow(Fe,2))}}if(o.selectPoints){var it=o.selectionManager.currentSet;if(it&&it.selections&&it.selections.length>0)for(var Qe=0;Qe<it.selections.length;Qe++){var tt=o.pointObjects[it.selections[Qe]];tt[1].startX=tt[1].x,tt[1].startY=tt[1].y,tt[2].startX=tt[2].x,tt[2].startY=tt[2].y,tt[3].startX=tt[3].x,tt[3].startY=tt[3].y}}}}),o.selectPoints&&ie.tap(function(be){var we;if(be.target.rect1)we=be.target,o.selectedBalls.toggle(we.parent.num);else{var Me=be.target;Me.color="white",we=Me.ball,we.rect1==Me?o.selectedRect1s.toggle(we.parent.num):o.selectedRect2s.toggle(we.parent.num)}for(var He=0;He<o.pointObjects.length;He++){var Xe=o.pointObjects[He];Xe[1].color=o.selectedBalls.isSelected(He)?p:o.circleColor,Xe[2].color=o.selectedRect1s.isSelected(He)?p:Ve(Xe[4]),Xe[3].color=o.selectedRect2s.isSelected(He)?p:Ve(Xe[4])}be.target.stage.update()}),ie.on("pressmove",function(be){if(!o.lockControls)if(o.selectPoints){var we=Q();if(we.indexOf(be.target)==-1)xe(be.target),o.drawShape();else if(we.length>0){for(var Me=be.target.x-be.target.startX,He=be.target.y-be.target.startY,Xe=0;Xe<we.length;Xe++){var nt=we[Xe];nt.x=nt.startX+Me,nt.y=nt.startY+He,xe(nt)}o.drawShape()}}else xe(be.target),o.drawShape()}),ie.on("pressup",function(be){if(!o.lockControls){var we=be.target.x!=De.x||be.target.y!=De.y,Me=new Ne.Event("change");be.target.rect1?(Me.controlType="bezierPoint",Oe(be.target)):Me.controlType="bezierHandle",we&&o.dispatchEvent(Me)}});function Oe(be){if(o.selectPoints){var we=Q();if(we&&we.indexOf(be)==-1)G(be);else if(we&&we.length>0)for(var Me=0;Me<we.length;Me++)G(we[Me]);else G(be)}else G(be)}o.changeControl=function(be,we,Me,He,Xe,nt,Ce,Fe,it){var Qe="index, type, rect1X, rect1Y, rect2X, rect2Y, circleX, circleY, update",tt;if(tt=lt(o.changeControl,arguments,Qe))return tt;if(n(be)){for(var ot=0;ot<g.length;ot++)o.changeControl(ot,we,Me,He,Xe,nt,Ce,Fe);return o}var gt=g[be];return gt[4]=we,we=="none"?(n(Ce)||(gt[1].x=Ce),n(Fe)||(gt[1].y=Fe),gt[2].x=gt[1].x,gt[2].y=gt[1].y,gt[3].x=gt[1].x,gt[3].y=gt[1].y,gt[1].parent.addChild(gt[1])):(n(Ce)||(gt[1].x=Ce),n(Fe)||(gt[1].y=Fe),n(Me)||(gt[2].x=Me),n(He)||(gt[2].y=He),n(Xe)||(gt[3].x=Xe),n(nt)||(gt[3].y=nt),gt[1].parent.addChildAt(gt[1],0)),gt[2].color=Ve(we),gt[3].color=Ve(we),it&&(o.update(),o.stage&&o.stage.update()),o},o.transformPoints=function(be,we,Me,He,Xe){return n(Xe)&&(Xe=!0),o.points=t.transformPoints(o.points,be,we,Me,He),Xe&&o.approximateBounds(),o},o.traverse=function(be,we,Me,He){var Xe=t.copy(o.segmentRatios);Xe.unshift(0),n(Me)&&(Me=we+1);var nt=we<Me,Ce,Fe;return nt?(Ce=Xe[we]*100,Fe=Xe[Me]*100):(Ce=50+(100-Xe[we]*100)/2,Fe=50+(100-Xe[Me]*100)/2),be.percentComplete=Ce,be.animate({ease:"linear",props:{path:o},rewind:!nt,time:He,events:!0}),be.on("animation",function(it){if(be.percentComplete>Fe||be.percentComplete==0){be.stopAnimate(),it.remove();var Qe=new Ne.Event("traversed");Qe.obj=be,o.dispatchEvent(Qe)}}),o},o.reversePoints=function(be){return n(be)&&(be=!0),l=t.copy(o.points),l.reverse(),be&&l.unshift(l.pop()),t.loop(l,function(we){var Me=we[6];we[6]=we[4],we[4]=Me;var He=we[7];we[7]=we[5],we[5]=He}),o.points=l,o.update(),o},o.splitPoints=function(be){var we=t.copy(o.points);if(!(be<1||be>we.length-1)){var Me=t.copy(we.slice(0,be+1)),He=t.copy(we.slice(be));t.trimPointEnds(Me),t.trimPointEnds(He);var Xe=o.clone();return o.points=Me,o.update(),Xe.points=He,o.parent&&Xe.addTo(o.parent),Xe}},o.makeSquiggle=function(be){var we=t.copy(o.points);n(be)&&(be=0),be=(be+we.length*1e3)%we.length;var Me=t.copy(we.slice(be)),He=t.copy(we.slice(0,be+1));we=Me.concat(He),t.trimPointEnds(we);var Xe=new t.Squiggle({points:we,color:o.borderColor,thickness:o.borderWidth,showControls:o.controlsVisible,interactive:o.interactive,onTop:o.onTop,dashed:o.dashed,stickColor:o.stickColor,stickThickness:o.stickThickness});return Xe},o.update=function(be){return be?o.points=o.pointsAdjusted:o.drawShape(),o.zimAnimateChanged=!0,o},o.move&&o.interactive&&R.drag({onTop:!1}),le=R.on("mousedown",function(be){ee=be.target.stage,De={x:R.x,y:R.y},o.selectPoints&&(o.keyFocus=!0),Re()}),N=R.on("pressmove",function(){ie.x=R.x,ie.y=R.y,te.x=R.x,te.y=R.y}),L=R.on("pressup",function(){var be=R.x!=De.x||R.y!=De.y,we=R.localToLocal(o.regX,o.regY,o.parent);if(o.x=we.x,o.y=we.y,ie.x=ie.y=te.x=te.y=R.x=R.y=0,be){var Me=new Ne.Event("change");Me.controlType="move",o.dispatchEvent(Me)}ee.update()}),A||fe(!0);function Re(){if(o.onTop){var be=o.parent.numChildren-1;o.parent.getChildAt(be).type=="Keyboard"&&be--,o.parent.setChildIndex(o,be)}}o.toggleEvent=o.on("mousedown",function(){o.allowToggle&&(D||(o.showControls(),o.dispatchEvent("controlsshow")))}),o.added(function(){ee=o.stage,o.toggleStageEvent&&o.stage.off("stagemousedown",o.toggleStageEvent),o.toggleStageEvent=o.stage.on("stagemousedown",function(be){!o.allowToggle||!o.stage||D&&!o.hitTestPoint(be.stageX/t.scaX,be.stageY/t.scaY,!1)&&(o.hideControls(),o.dispatchEvent("controlshide"))})}),o.clickEvent=o.on("click",function(){o.ctrlKey&&setTimeout(function(){o.clone(!0).addTo(o.stage).mov(100),o.allowToggle&&(o.hideControls(),o.dispatchEvent("controlshide"));var be=new Ne.Event("change");be.controlType="move",o.dispatchEvent(be),o.stage.update()},50)}),o.hideControls=function(){return o.toggled=!1,ie.visible=!1,te.visible=!1,D=!1,o.stage&&o.stage.update(),!o.allowToggle&&o.move&&fe(),o},D||o.hideControls(),o.showControls=function(){return o.toggled=!0,ie.visible=!0,te.visible=!0,D=!0,ie.x=R.x,ie.y=R.y,te.x=R.x,te.y=R.y,o.addChildAt(R,0),o.move&&!o.allowToggle&&ue(),o.stage&&o.stage.update(),o},o.toggle=function(be){return be===!0?o.showControls():be===!1||D?o.hideControls():o.showControls(),o},o.recordData=function(be){n(be)&&(be=!1);var we={type:"Blob",index:o.parent?o.parent.getChildIndex(o):-1,x:o.x,y:o.y,points:o.getPoints(),color:o.color,borderColor:o.borderColor,borderWidth:o.borderWidth,move:o.move,allowToggle:o.allowToggle,controlsVisible:D};return be?JSON.stringify(we):we},o.setData=function(be,we){if(!n(be)){if(we)try{be=JSON.parse(be)}catch{return}var Me=be.index;n(Me)&&(Me=-1),delete be.index;var He=be.points;n(He)||o.setPoints(He),delete be.points,this.num=He.length;for(var Xe in be)o[Xe]=be[Xe];return o.parent&&o.parent.setChildIndex(o,Me),o}},o.getPoints=function(be){n(be)&&(be=!1);var we=o.points;if(be){if(!Me){var Me=o.pane=new t.Pane({displayClose:!1,container:o.stage,width:Math.min(500,o.stage.width-20),height:Math.min(500,o.stage.height-20),draggable:!0}),He=o.textArea=new t.TextArea(Math.min(400,o.stage.width-70),Math.min(400,o.stage.height-70));He.centerReg(Me)}Me.show(),He.text=JSON.stringify(we)}return we},o.recordPoints=o.getPoints,o.setPoints=function(be){for(var we,Me,He=0;He<be.length;He++)we=g[He],Me=be[He],!n(we)&&(we[0].x=Me[0],we[0].y=Me[1],we[1].x=Me[2],we[1].y=Me[3],we[2].x=Me[4],we[2].y=Me[5],we[3].x=Me[6],we[3].y=Me[7],we[4]=Me[8],we[2].color=Ve(we[4]),we[3].color=Ve(we[4]));return o.update(),o},B!==!1&&t.styleTransforms(o,Z),o.clone=function(be,we){var Me=[],He=!1;t.loop(o.pointControls,function(nt){nt.scaleX+nt.scaleY+nt.regX+nt.regY+nt.rotation!=2&&(He=!0),Me.push([nt.scaleX,nt.scaleY,nt.regX,nt.regY,nt.rotation])});var Xe=o.cloneProps(new t.Blob(we?o.colorCommand:be||!t.isPick(u[0])?o.color:u[0],we?o.borderColorCommand:be||!t.isPick(u[1])?o.borderColor:u[1],o.borderWidth,o.getPoints(),a,s,c,d,ie.visible,T,h,o.allowToggle,o.move,y,v,o.circleColor,o.circleBorderColor,o.stickColor,o.stickThickness,p,m,o.editPoints,_,Y,B,o.group,X));return He&&(t.loop(Xe.pointControls,function(nt,Ce){nt.scaleX=Me[Ce][0],nt.scaleY=Me[Ce][1],nt.regX=Me[Ce][2],nt.regY=Me[Ce][3],nt.rotation=Me[Ce][4]}),Xe.update()),o.linearGradientParams&&Xe.linearGradient.apply(Xe,o.linearGradientParams),o.radialGradientParams&&Xe.radialGradient.apply(Xe,o.radialGradientParams),Xe},o.shapeMousedownEvent=o.shape.on("mousedown",function(be){ee=be.target.stage,o.editPoints&&(o.controlsVisible?(o.pressX=be.stageX/t.scaX,o.pressY=be.stageY/t.scaY):(o.pressX=null,o.pressY=null))}),o.addPointFactor=10,o.addMinDistance=15,o.shapePressupEvent=o.shape.on("pressup",function(be){if(o.editPoints&&o.pressX&&Math.abs(o.pressX-be.stageX/t.scaX)<$&&Math.abs(o.pressY-be.stageY/t.scaY)<$){o.selectPoints&&(o.lastPoints=t.copy(o.points));var we=o.points,Me=o.globalToLocal(be.stageX/t.scaX,be.stageY/t.scaY),He=t.closestPointAlongCurve(Me,o.segmentPoints);if(o.editPoints=="anywhere")we.splice(He+1,0,[Me.x,Me.y,0,0,0,0,0,0]),o.points=we,o.changeControl({index:He+1,type:"mirror",update:!0});else{var Xe=o.pointsAdjusted,nt=o.getSegmentPoint(Xe[He],Xe[(He+1)%Xe.length]),Ce=t.distanceAlongCurve(nt),Fe=Math.round(Ce/o.addPointFactor),it=o.interpolate(Fe,He,!1,we),Qe=1e4,tt;if(t.loop(it,function(Mt,ut){if(ut!=0){var xt=t.dist(Mt,Me);xt<Qe&&(Qe=xt,tt=ut)}}),Qe<o.addMinDistance){var ot=o.segmentRatios,gt=ot[He],ze=He>0?ot[He-1]:0;o.addPoint(100*(ze+(gt-ze)*(tt/(Fe+1))))}}o.lastSelectedIndex=He+1,o.lastSelected=o.controls.getChildAt(o.lastSelectedIndex),o.stage.update()}}),o.controlsClickEvent=o.controls.on("click",function(be){o.lastSelected=be.target.parent,o.lastSelectedIndex=o.controls.getChildIndex(be.target.parent),o.editPoints&&o.selectionManager.shiftKey&&Ze(be)});function Ze(be){if(be.target.type=="Circle"){var we=o.lastSelectedIndex=o.controls.getChildIndex(be.target.parent);if(o.controls.numChildren<=2)return;var Me=o.points;o.selectPoints&&(o.lastPoints=t.copy(Me)),Me.splice(we,1),o.points=Me,o.stage.update(),o.lastSelected=o.lastSelectedIndex=null}}o.controls.hold(Ze),D||o.hideControls(),o.dispatchEvent("update")}function Q(){var te=[],ge=o.selectionManager.currentSet;if(ge&&ge.selections&&ge.selections.length>0)for(var Ae=0;Ae<ge.selections.length;Ae++){var ae=o.pointObjects[ge.selections[Ae]];if(ge==o.selectedBalls)te.push(ae[1]);else if(ge==o.selectedRect1s)te.push(ae[2]);else if(ge==o.selectedRect2s)te.push(ae[3]);else continue}return te}function G(te){if(o.selectPoints&&te.type=="Circle"){var ge=te,Ae=ge.mySet,ae=ge.rect1,de=ge.rect2;ae.x-=ge.x,ae.y-=ge.y,de.x-=ge.x,de.y-=ge.y,Ae.x+=ge.x,Ae.y+=ge.y,ge.x=0,ge.y=0}}o.selectionManager.on("keydown",function(te){if(o.selectPoints&&o.keyFocus&&te.keyCode>=37&&te.keyCode<=40){var ge=Q();if(ge.length>0){for(var Ae=0;Ae<ge.length;Ae++){var ae=ge[Ae];te.keyCode==37?ae.x-=o.selectionManager.shiftKey?10:1:te.keyCode==39?ae.x+=o.selectionManager.shiftKey?10:1:te.keyCode==38?ae.y-=o.selectionManager.shiftKey?10:1:te.keyCode==40&&(ae.y+=o.selectionManager.shiftKey?10:1),xe(ae)}o.drawShape(),o.dispatchEvent("update"),o.stage&&o.stage.update()}}}),o.selectionManager.on("keyup",function(te){if(o.selectPoints&&o.keyFocus&&te.keyCode>=37&&te.keyCode<=40){var ge=Q();if(ge.length>0)for(var Ae=0;Ae<ge.length;Ae++)G(ge[Ae])}}),o.selectionManager.on("undo",function(){if(o.selectPoints&&o.keyFocus&&o.lastPoints){var te=t.copy(o.lastPoints);o.lastPoints=t.copy(o.points),o.points=te,o.stage&&o.stage.update()}}),xe=function(te){if(!o.lockControls){var ge;if(te.rect1){ge=te;var Ae=ge.x-ge.startX,ae=ge.y-ge.startY;ge.rect1.x=ge.rect1.startX+Ae,ge.rect1.y=ge.rect1.startY+ae,ge.rect2.x=ge.rect2.startX+Ae,ge.rect2.y=ge.rect2.startY+ae}else{var de=te,se=de.other;ge=de.ball;var Ie=ge.index,Te=c;if(n(g[Ie][4])||(Te=g[Ie][4]),Te=="straight"||Te=="mirror"){var ve=de.x-ge.x,J=de.y-ge.y;if(Te=="mirror")se.x=ge.x-ve,se.y=ge.y-J;else{var Se=Math.atan2(J,ve),Be=-se.stickLength*Math.cos(Se+Math.PI),Ye=-se.stickLength*Math.sin(Se+Math.PI);se.x=ge.x-Be,se.y=ge.y-Ye}}}}},Object.defineProperty(o,"move",{get:function(){return A},set:function(te){A!=te&&(A=te,te?ue():fe())}}),Object.defineProperty(o,"interactive",{get:function(){return _},set:function(te){_=te,D=_,o.allowToggle=_,o.editPoints=_,o.lockControls=!_,o.selectPoints=_,o.move=_;var ge=o.points;o.points=ge}}),Object.defineProperty(o,"allowToggle",{get:function(){return w},set:function(te){w!=te&&(w=te,w?o.move&&ue():!D&&o.move&&fe())}});function ue(){o.move!="always"&&(z||(z=!0,R.drag({onTop:!1}),le=R.on("mousedown",le),N=R.on("pressmove",N),L=R.on("pressup",L)))}function fe(te){o.move!="always"&&(!te&&!z||(z=!1,R.noDrag(),R.off("mousedown",le),R.off("pressmove",N),R.off("pressup",L)))}Object.defineProperty(o,"controlsVisible",{get:function(){return D},set:function(te){D=te,te?o.showControls():o.hideControls()}});var ye=T;Object.defineProperty(o,"lockControls",{get:function(){return ye},set:function(te){ye=te,te?(o.controls.mouseChildren=!1,o.controls.mouseEnabled=!1):(o.controls.mouseChildren=!0,o.controls.mouseEnabled=!0)}}),o.lockControls=ye,j.KEYFOCUS!=null&&(t.KEYFOCUS=j.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return t.KEYFOCUS==o},set:function(){t.KEYFOCUS=o}}),o.selectPoints&&!t.KEYFOCUS&&H();function H(){o.keyFocus=!0;var te=document.activeElement;te&&te.blur()}Object.defineProperty(o,"points",{get:function(){for(var te=[],ge,Ae,ae=0;ae<g.length;ae++)Ae=g[ae],ge=[t.decimals(Ae[0].x),t.decimals(Ae[0].y),t.decimals(Ae[1].x),t.decimals(Ae[1].y),t.decimals(Ae[2].x),t.decimals(Ae[2].y),t.decimals(Ae[3].x),t.decimals(Ae[3].y)],Ae[4]&&Ae[4]!=="straight"&&ge.push(Ae[4]),te.push(ge);return te},set:function(te){var ge=o.x,Ae=o.y,ae=o.visible,de=[],se=!1;t.loop(o.pointControls,function(Ie){Ie.scaleX+Ie.scaleY+Ie.regX+Ie.regY+Ie.rotation!=2&&(se=!0),de.push([Ie.scaleX,Ie.scaleY,Ie.regX,Ie.regY,Ie.rotation])}),o.dispose(!0),l=ke(te),o.shape&&(o.shape.graphics.clear(),o.sticks.graphics.clear(),o.controls.noDrag(),o.removeAllChildren(),delete o.shape,delete o.sticks,delete o.controls),o.visible=!1,Ee(),o.lockControls=ye,o.x=ge,o.y=Ae,o.visible=ae,se&&(t.loop(o.pointControls,function(Ie,Te){Ie.scaleX=de[Te][0],Ie.scaleY=de[Te][1],Ie.regX=de[Te][2],Ie.regY=de[Te][3],Ie.rotation=de[Te][4]}),o.update())}}),Object.defineProperty(o,"pointsAdjusted",{get:function(){var te=[],ge,Ae,ae,de=o.pointObjects;return t.loop(de.length,function(se){if(ae=de[se],Ae=g[se],ae[0].rotation==0&&ae[0].scaleX==0&&ae[0].scaleY==0)ge=[t.decimals(Ae[0].x),t.decimals(Ae[0].y),t.decimals(Ae[1].x),t.decimals(Ae[1].y),t.decimals(Ae[2].x),t.decimals(Ae[2].y),t.decimals(Ae[3].x),t.decimals(Ae[3].y)];else{var Ie=ae[0].localToLocal(ae[2].x,ae[2].y,ae[0].parent),Te=ae[0].localToLocal(ae[3].x,ae[3].y,ae[0].parent);ge=[t.decimals(Ae[0].x),t.decimals(Ae[0].y),t.decimals(Ae[1].x),t.decimals(Ae[1].y),t.decimals(Ie.x-Ae[0].x),t.decimals(Ie.y-Ae[0].y),t.decimals(Te.x-Ae[0].x),t.decimals(Te.y-Ae[0].y)]}Ae[4]&&Ae[4]!=="mirror"&&ge.push(Ae[4]),te.push(ge)}),te},set:function(){dt&&$e("Blob() - pointsAdjusted is read only")}}),Object.defineProperty(o,"pointObjects",{get:function(){return g},set:function(){dt&&$e("Blob() - pointObjects is read only - but its contents can be manipulated - use blob.update() after changes")}}),Object.defineProperty(o,"pointControls",{get:function(){return I},set:function(){dt&&$e("Blob() - pointControls is read only - but its contents can be manipulated - use blob.update() after changes")}}),Object.defineProperty(o,"pointCircles",{get:function(){return q},set:function(){dt&&$e("Blob() - pointCircles is read only - but its contents can be manipulated - use blob.update() after changes")}}),Object.defineProperty(o,"segmentPoints",{get:function(){var te=o.pointsAdjusted,ge=[];return t.loop(te.length,function(Ae,ae){var de=o.getSegmentPoint(te[Ae],te[Ae<ae-1?Ae+1:0]);ge.push(de)}),ge},set:function(){dt&&$e("Blob() - segmentPoints is read only")}}),Object.defineProperty(o,"segmentRatios",{get:function(){var te=[],ge=0;t.loop(o.segmentPoints,function(de){var se=t.distanceAlongCurve(de);te.push(se),ge+=se});var Ae=[],ae=0;return t.loop(te,function(de){var se=de/ge;ae+=se,Ae.push(ae)}),Ae},set:function(){dt&&$e("Blob() - segmentRatios is read only")}}),o.approximateBounds=function(te,ge){n(te)&&(te=80),te/=o.num;var Ae=o.interpolate(te,null,!0,null,!0),ae=t.boundsAroundPoints(Ae);if(o.setBounds(ae.x,ae.y,ae.width,ae.height),ge){if(!o.parent)return dt&&$e("approximateBounds() - add to stage to first to see points"),o;o.hitPathPoints?o.hitPathPoints.removeAllChildren():o.hitPathPoints=new t.Container().addTo(),o.hitPathPoints.top();for(var de=0;de<Ae.length;de++){var se=Ae[de];se=o.localToGlobal(se.x,se.y),new t.Circle(3).loc(se.x,se.y,o.hitPathPoints)}}return o},o.getPointAngle=function(te){var ge=o.pointObjects[te][0],Ae=o.pointObjects[te][2],ae=o.pointObjects[te][3],de,se;return ge==o.stage?(de=new t.Point(Ae.x,Ae.y),se=new t.Point(ae.x,ae.y)):(de=ge.localToGlobal(Ae.x,Ae.y),se=ge.localToGlobal(ae.x,ae.y)),t.angle(de.x,de.y,se.x,se.y)},o.getSegmentPoint=function(te,ge){if(!(n(te)||n(ge))){(te[2]!=0||te[3]!=0)&&(te[4]-=te[2],te[5]-=te[3],te[6]-=te[2],te[7]-=te[3],te[0]+=te[2],te[1]+=te[3],te[2]=0,te[3]=0),(ge[2]!=0||ge[3]!=0)&&(ge[4]-=ge[2],ge[5]-=ge[3],ge[6]-=ge[2],ge[7]-=ge[3],ge[0]+=ge[2],ge[1]+=ge[3],ge[2]=0,ge[3]=0);var Ae={x:te[0],y:te[1]},ae={x:te[0]+te[6],y:te[1]+te[7]},de={x:ge[0]+ge[4],y:ge[1]+ge[5]},se={x:ge[0],y:ge[1]};return(ie.x!=0||ie.y!=0)&&(Ae.x+=ie.x,ae.x+=ie.x,de.x+=ie.x,se.x+=ie.x,Ae.y+=ie.y,ae.y+=ie.y,de.y+=ie.y,se.y+=ie.y),[Ae,ae,de,se]}},o.getAdjacentSegmentData=function(te){n(te)&&(te=0);var ge=o.pointsAdjusted;if(o.num==2)return[[o.getSegmentPoint(ge[0],ge[1]),o.getSegmentPoint(ge[1],ge[0])],[0,1]];if(te==0)return[[o.getSegmentPoint(ge[o.num-1],ge[0]),o.getSegmentPoint(ge[0],ge[1]),o.getSegmentPoint(ge[1],ge[2])],[o.num-1,0,1]];if(te>=o.num-1)return[[o.getSegmentPoint(ge[o.num-2],ge[o.num-1]),o.getSegmentPoint(ge[o.num-1],ge[0]),o.getSegmentPoint(ge[0],ge[1])],[o.num-2,o.num-1,0]];var Ae=te+2>=o.num?0:te+2;return[[o.getSegmentPoint(ge[te-1],ge[te]),o.getSegmentPoint(ge[te],ge[te+1]),o.getSegmentPoint(ge[te+1],ge[Ae])],[te-1,te,te+1]]},o.getCurvePoint=function(te,ge,Ae,ae){n(ge)&&(ge=o.segmentRatios),n(Ae)&&(Ae=o.segmentPoints),n(ae)&&(ae=!1);var de=ge,se=Ae,Ie=t.loop(de,function(Ye,Ke){if(Ye>=te)return Ke}),Te=Ie>0?de[Ie-1]:0,ve=Ie>0?de[Ie]-de[Ie-1]:de[Ie],J=(te-Te)/ve,Se=t.pointAlongCurve(se[Ie],J,ae,!0);if(!n(Se)){var Be=o.localToGlobal(Se.x,Se.y);return Be.angle=Se.angle,Be.z=Ie,n(Be)?void 0:Be}};function re(te,ge,Ae){return{x:te.x+(ge.x-te.x)*Ae,y:te.y+(ge.y-te.y)*Ae}}function pe(te,ge,Ae,ae,de,se,Ie,Te){var ve=te.length-1,J=0,Se=0;ae==100&&o.type=="Squiggle"&&(ae=99.99),ae=(ae+1e5)%100,t.loop(Ae,function(Ve,De){if(ae/100<Ve)return ve=De,Se=Ve,!0;J=Ve});var Be=o.segmentPoints[ve],Ye=Se>0?(ae/100-J)/(Se-J):0,Ke=t.pointAlongCurve(Be,Ye,null,Te),at=[Ke.x,Ke.y,0,0];if(!se){if(Ie){o.interpolatedPoints.push({x:Ke.x,y:Ke.y,r:ae/100});return}if(de!="none"){var me=re(Be[0],Be[1],Ye),Ge=re(Be[1],Be[2],Ye),Je=re(Be[2],Be[3],Ye),ce=re(me,Ge,Ye),oe=re(Ge,Je,Ye);at[4]=ce.x-Ke.x,at[5]=ce.y-Ke.y,at[6]=oe.x-Ke.x,at[7]=oe.y-Ke.y;var _e=o.localToLocal(me.x,me.y,ge[ve]);te[ve][6]=_e.x,te[ve][7]=_e.y;var je=o.localToLocal(Je.x,Je.y,ge[(ve+1)%te.length]);te[(ve+1)%te.length][4]=je.x,te[(ve+1)%te.length][5]=je.y}de&&(at[8]=de),te.splice(ve+1,0,at)}}this.addPoint=function(te,ge){n(te)&&(te=100);var Ae=o.points,ae=o.segmentRatios,de=o.pointControls;return ge=ge||F,pe(Ae,de,ae,te,ge),o.points=Ae,o.num=Ae.length,o},this.removePoint=function(te){if(!(n(te)||te<0)){var ge=t.copy(o.points);return ge.splice(te,1),o.points=ge,o.stage&&o.stage.update(),o}},this.addPoints=function(te,ge,Ae,ae,de,se,Ie){n(se)&&(se=t.copy(o.points));var Te=t.copy(o.segmentRatios),ve=0;if(de&&(o.interpolatedPoints=[]),ae)var J=Te.length*te;return t.loop(Te,function(Se,Be){de&&pe(se,o.pointControls,o.segmentRatios,ve*100,ge,!n(Ae)&&Be!=Ae,de,Ie);var Ye=ae?Math.round(J*(Se-ve)):te,Ke=1/(Ye+1);t.loop(Ye,function(at){var me=ve+(Se-ve)*Ke*(at+1);pe(se,o.pointControls,o.segmentRatios,me*100,ge,!n(Ae)&&Be!=Ae,de,Ie),!de&&te>0&&(o.points=se)}),ve=Se}),de&&o.type=="Squiggle"&&pe(se,o.pointControls,o.segmentRatios,100,ge,null,de,Ie),o.stage&&o.stage.update(),o.num=se.length,o},this.interpolate=function(te,ge,Ae,ae,de){return n(te)&&(te=1),o.addPoints(te,"none",ge,Ae,!0,ae,de),o.interpolatedPoints},W&&o.approximateBounds(),this.dispose=function(te,ge,Ae){if(o.shape){if(t.gD(o),ee&&o.toggleStageEvent&&ee.off("stagemousedown",o.toggleStageEvent),o.controls.noDrag(),o.controls.removeAllEventListeners(),o.selectPoints&&o.selectionManager&&o.selectionManager.dispose(),o.selectedBalls=null,o.selectedRect1s=null,o.selectedRect2s=null,o.selectionManager=null,o.off("mousedown",o.toggleEvent),o.off("click",o.clickEvent),te){o.shape.dispose(),o.shape=null;for(var ae=0;ae<o.points.length;ae++)o.pointObjects[ae][0].removeAllEventListeners(),o.pointObjects[ae][1].removeAllEventListeners(),o.pointObjects[ae][2].removeAllEventListeners(),o.pointObjects[ae][3].removeAllEventListeners();o.controls.removeFrom(o),o.sticks.dispose(),g=null,q=null}else o.removeAllEventListeners(),g=null,q=null,Ae||this.zimCustomShape_dispose(!0);return!0}}},t.extend(t.Blob,t.CustomShape,["clone","dispose"],"zimCustomShape",!1),t.Flare=function(e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,x,E,k,p,m,S,_,Y,B,b,X,V,O,Z,W,K,ne){var F="color, borderColor, borderWidth, crossAngle, thickness, thicknessA, thicknessB, pin, startX, startY, lengths, angles, anglesA, anglesB, anglesEnd, cross, crossColors, close, dashed, strokeObj, spineColor, spineBorderWidth, spineBorderColor, spineDashed, spineStrokeObj, closeColor, closeBorderWidth, closeBorderColor, closeDashed, closeStrokeObj, style, group, inherit",D;if(D=lt(t.Flare,arguments,F,this))return D;Le("53.6"),this.zimContainer_constructor(),this.type="Flare",this.group=K;var u=W===!1?{}:t.getStyle(this.type,this.group,ne),f=this;n(r)&&(r=u.borderColor!=null?u.borderColor:null),n(i)&&(i=u.borderWidth!=null?u.borderWidth:null),r<0||i<0?r=i=null:r!=null&&i==null&&(i=1),n(e)&&(e=u.color!=null?u.color:i>0?"rgba(0,0,0,0)":t.black),(n(i)||i>0)&&(!n(r)||!n(i))&&n(r)&&(r=t.black),n(l)&&(l=u.crossAngle!=null?u.crossAngle:0);var o=l;l-=90,n(a)&&(a=u.thickness!=null?u.thickness:null),n(s)&&(s=u.thicknessA!=null?u.thicknessA:null),n(c)&&(c=u.thicknessB!=null?u.thicknessB:null),n(a)?n(c)&&!n(s)?c=s:n(s)&&!n(c)?s=c:c=s=10:n(c)&&!n(s)?c=a-s:n(s)&&!n(c)?s=a-c:c=s=a/2,f.thickness=s+c,n(P)&&(P=u.cross!=null?u.cross:!0),n(x)&&(x=u.crossColors!=null?u.crossColors:null),!n(x)&&!Array.isArray(x)&&(x=[x]),n(E)&&(E=u.close!=null?u.close:!1),n(C)&&(C=u.startX!=null?u.startX:0),n(T)&&(T=u.startY!=null?u.startY:0),n(h)&&(h=u.lengths!=null?u.lengths:[200]),Array.isArray(h)||(h=[h]),n(w)&&(w=u.angles!=null?u.angles:[0]),Array.isArray(w)||(w=[w]),n(A)&&(A=u.anglesA!=null?u.anglesA:[10]),Array.isArray(A)||(A=[A]),n(y)&&(y=u.anglesB!=null?u.anglesB:t.copy(A)),Array.isArray(y)||(y=[y]),n(v)&&(v=u.anglesEnd!=null?u.anglesEnd:[0]),Array.isArray(v)||(v=[v]),n(p)&&(p=u.strokeObj!=null?u.strokeObj:{miterLimit:2}),n(_)&&(_=u.spineBorderColor!=null?u.spineBorderColor:null),n(S)&&(S=u.spineBorderWidth!=null?u.spineBorderWidth:null),_<0||S<0?_=S=null:_!=null&&S==null&&(S=1),n(m)&&(m=u.spineColor!=null?u.spineColor:S>0?"rgba(0,0,0,0)":t.black),n(Y)&&(Y=u.spineDashed!=null?u.spineDashed:null),n(B)&&(B=u.spineStrokeObj!=null?u.spineStrokeObj:{miterLimit:2}),(n(S)||S>0)&&(!n(_)||!n(S))&&n(_)&&(_=r||t.black),n(V)&&(V=u.closeBorderColor!=null?u.closeBorderColor:null),n(X)&&(X=u.closeBorderWidth!=null?u.closeBorderWidth:null),V<0||X<0?V=X=null:V!=null&&X==null&&(X=1),n(b)&&(b=u.closeColor!=null?u.closeColor:X>0?"rgba(0,0,0,0)":null),n(O)&&(O=u.closeDashed!=null?u.closeDashed:null),n(Z)&&(Z=u.closeStrokeObj!=null?u.closeStrokeObj:{miterLimit:2}),(n(X)||X>0)&&(!n(V)||!n(X))&&n(V)&&(V=r||t.black),this.thicknessA=s,this.thicknessB=c,this.cross=P,this.close=E,this.lengths=h,this.angles=w,this.anglesA=A,this.anglesB=y,this.anglesEnd=v,this.crossColors=x,g(h,w,A,y,v,P,x,E),e.type&&(f.color=e);function g(N,L,ee,z,$,xe,ie,ke){f.removeAllChildren();var U=f.shape=new t.Shape().addTo(f);if(f.colorCommand=U.c().f(e).command,e&&e.type&&f.specialColor(f.colorCommand,e,f),(n(i)||i>0)&&(!n(r)||!n(i))&&(n(r)&&(r=t.black),f.borderColorCommand=U.s(r).command,r&&r.type&&f.specialColor(f.borderColorCommand,r,f),f.borderWidthCommand=U.ss(i,p.caps,p.joints,p.miterLimit,p.ignoreScale).command,k&&(f.borderDashedCommand=U.sd([10,10],5).command)),U.mt(0,0),S>0){var Ee=f.spineShape=new t.Shape().addTo(f);f.spineColorCommand=Ee.c().f(m).command,m&&m.type&&f.specialColor(f.spineColorCommand,m,f),(n(S)||S>0)&&(!n(_)||!n(S))&&(n(_)&&(_=t.black),f.spineBorderColorCommand=Ee.s(_).command,_&&_.type&&f.specialColor(f.spineBorderColorCommand,_,f),f.spineBorderWidthCommand=Ee.ss(S,B.caps,B.joints,B.miterLimit,B.ignoreScale).command,Y&&(f.spineBorderDashedCommand=Ee.sd([10,10],5).command))}if(!n(b)){var Q=f.closeShape=new t.Shape().addTo(f);f.closeColorCommand=Q.c().f(b).command,b&&b.type&&f.specialColor(f.closeColorCommand,b,f),(n(X)||X>0)&&(!n(V)||!n(X))&&(n(V)&&(V=t.black),f.closeBorderColorCommand=Q.s(V).command,V&&V.type&&f.specialColor(f.closeBorderColorCommand,V,f),f.closeBorderWidthCommand=Q.ss(X,Z.caps,Z.joints,Z.miterLimit,Z.ignoreScale).command,O&&(f.closeBorderDashedCommand=Q.sd([10,10],5).command)),U.mt(0,0)}var G=C,ue=T,fe=l,ye=fe-180,H=s,re=c,pe=Math.max(N.length,L.length,ee.length,z.length,$.length),te,ge,Ae=ye,ae=[],de=[],se=[];f.points=[];var Ie=f.pinPoints=[];t.loop(pe,function(J){var Se=Te(J),Be=Math.cos(Se.a*t.RAD),Ye=Math.sin(Se.a*t.RAD),Ke=new t.Point(G+Se.A.x*Be-Se.A.y*Ye,ue+Se.A.x*Ye+Se.A.y*Be),at=new t.Point(G+Se.B.x*Be-Se.B.y*Ye,ue+Se.B.x*Ye+Se.B.y*Be),me=new t.Point(G+Se.C.x*Be-Se.C.y*Ye,ue+Se.C.x*Ye+Se.C.y*Be),Ge=new t.Point(G+Se.D.x*Be-Se.D.y*Ye,ue+Se.D.x*Ye+Se.D.y*Be);ae.push(Ke,at),de.unshift(me,Ge),se.push([Ke,at,me,Ge]);var Je=new t.Point(G+Se.F.x*Be-Se.F.y*Ye,ue+Se.F.x*Ye+Se.F.y*Be),ce=new t.Point(G+Se.E.x*Be-Se.E.y*Ye,ue+Se.E.x*Ye+Se.E.y*Be);J==0&&f.pinPoints.push(Je),f.pinPoints.push(ce),G=ce.x,ue=ce.y,H=Se.tA,re=Se.tB}),f.points=ae.concat(de),xe?(f.crossCommands=[],t.loop(se,function(J,Se){U.mt(J[0].x,J[0].y),!n(ie)&&!n(ie[Se])&&(U.f(ie[Se]),f.crossCommands[Se]=U.f(ie[Se]).command,ie[Se]&&ie[Se].type&&f.specialColor(f.crossCommands[Se],ie[Se],f),U.mt(J[0].x,J[0].y)),U.lt(J[1].x,J[1].y).lt(J[2].x,J[2].y).lt(J[3].x,J[3].y).cp()}),ke&&U.mt(se[se.length-1][1].x,se[se.length-1][1].y).lt(se[se.length-1][2].x,se[se.length-1][2].y).lt(se[0][3].x,se[0][3].y).lt(se[0][0].x,se[0][0].y).cp()):(t.loop(ae,function(J,Se){Se==0?U.mt(J.x,J.y):U.lt(J.x,J.y)}),ke&&(U.lt(ae[0].x,ae[0].y),U.cp()),t.loop(de,function(J,Se){Se==0&&ke?U.mt(J.x,J.y):U.lt(J.x,J.y)}),ke&&U.lt(de[0].x,de[0].y),U.cp()),Ee&&(t.loop(Ie,function(J,Se){Se==0?Ee.mt(J.x,J.y):Ee.lt(J.x,J.y)}),ke&&Ee.lt(Ie[0].x,Ie[0].y).cp()),n(b)||(t.loop(de,function(J,Se){Se==0?Q.mt(J.x,J.y):Q.lt(J.x,J.y)}),ke&&Q.lt(de[0].x,de[0].y).cp());function Te(J){var Se=L[J],Be=N[J],Ye=ee[J],Ke=z[J],at=$[J];if(ie)var me=ie[J];n(Se)&&(Se=Ae,f.angles[J]=Se),n(Be)&&(Be=200,f.lengths[J]=Be),n(Ye)&&(Ye=0,f.anglesA[J]=Ye),n(Ke)&&(Ke=0,f.anglesB[J]=Ke),n(at)&&(at=0,f.anglesEnd[J]=at),ie&&n(me)&&(me=e,f.crossColors[J]=me),at=at+90;var Ge=180-at,Je=Math.cos((Ae-Se)*t.RAD),ce=Math.sin((Ae-Se)*t.RAD),oe=new t.Point(0,0),_e=new t.Point(Be,0);if(n(te))var je=new t.Point(Math.cos(fe*t.RAD)*H,Math.sin(fe*t.RAD)*H);else je=new t.Point(te.x*Je-te.y*ce,te.x*ce+te.y*Je);var Ve=ve(Be,je.x,je.y,Ye,Ge),De=new t.Point(Be-Ve.x,-Ve.y),Oe;n(ge)?Oe=new t.Point(Math.cos(ye*t.RAD)*H,Math.sin(ye*t.RAD)*re):Oe=new t.Point(ge.x*Je-ge.y*ce,ge.x*ce+ge.y*Je);var Re=ve(Be,Oe.x,Oe.y,Ke,at),Ze=new t.Point(Be-Re.x,Re.y);return te=new t.Point(De.x-Be,De.y),ge=new t.Point(Ze.x-Be,Ze.y),Ae=Se,{a:Se,A:je,B:De,C:Ze,D:Oe,E:_e,F:oe,tA:Ve.t,tB:Re.t}}function ve(J,Se,Be,Ye,Ke){var at=Ke-90,me=90-at,Ge=180-Ye-me,Je=Math.tan(at*t.RAD)*Be,ce=J-Se-Je,oe=ce/Math.sin(Ge*t.RAD)*Math.sin(Ye*t.RAD),_e=Math.sqrt(Math.pow(Be,2)+Math.pow(Je,2)),je=oe+_e,Ve=je*Math.sin(at*t.RAD),De=je*Math.cos(at*t.RAD);return{x:Ve,y:De,t:je}}}this.add=function(N,L,ee,z,$,xe,ie,ke){var U="lengths, angles, anglesA, anglesB, anglesEnd, cross, crossColors, close",Ee;return(Ee=lt(f.add,arguments,U))?Ee:(n(xe)||(f.cross=xe),n(ke)||(f.close=ke),n(N)||(Array.isArray(N)||(N=[N]),n(f.lengths)?f.lengths=N:f.lengths=f.lengths.concat(N)),n(L)||(Array.isArray(L)||(L=[L]),n(f.angles)?f.angles=L:f.angles=f.angles.concat(L)),n(ee)||(Array.isArray(ee)||(ee=[ee]),n(f.anglesA)?f.anglesA=ee:f.anglesA=f.anglesA.concat(ee)),n(z)||(Array.isArray(z)||(z=[z]),n(f.anglesB)?f.anglesB=z:f.anglesB=f.anglesB.concat(z)),n($)||(Array.isArray($)||($=[$]),n(f.anglesEnd)?f.anglesEnd=$:f.anglesEnd=f.anglesEnd.concat($)),n(ie)||(n(f.crossColors)?dt&&$e("Flare() - must set crossColor for original object parameters"):(Array.isArray(ie)||(ie=[ie]),n(f.crossColors)?f.crossColors=ie:f.crossColors=f.crossColors.concat(ie))),f.remake(),f)},this.remake=function(){return s=this.thicknessA,c=this.thicknessB,g(f.lengths,f.angles,f.anglesA,f.anglesB,f.anglesEnd,f.cross,f.crossColors,f.close),f},Object.defineProperty(f,"color",{get:function(){return e},set:function(N){n(N)&&(N=t.black),e=N,N&&N.type?f.specialColor(f.colorCommand,N,f):f.colorCommand.style=N}});var q,I;this.setColorRange=function(N,L){return n(L)?(q=f.color,I=N):n(N)?(q=f.color,I=L):(q=N,I=L),f};var R=0;Object.defineProperty(f,"colorRange",{get:function(){return R},set:function(N){R=N,!n(q)&&!n(I)&&(f.color=t.colorRange(q,I,N))}}),Object.defineProperty(f,"borderColor",{get:function(){return r},set:function(N){r=N,f.borderColorCommand?N&&N.type?f.specialColor(f.borderColorCommand,N,f):f.borderColorCommand.style=N:g()}}),Object.defineProperty(f,"borderWidth",{get:function(){return i},set:function(N){N>0||(N=0),i=N,!f.borderWidthCommand||i==0?g():(f.borderWidthCommand.width=i,k&&(f.borderDashedCommand.segments=[20,10],f.borderDashedCommand.offset=5))}}),Object.defineProperty(f,"spineColor",{get:function(){return m},set:function(N){n(N)&&(N=t.black),m=N,f.spineColorCommand?N&&N.type?f.specialColor(f.spineColorCommand,N,f):f.spineColorCommand.style=N:g()}}),Object.defineProperty(f,"spineBorderColor",{get:function(){return _},set:function(N){_=N,f.spineBorderColorCommand?N&&N.type?f.specialColor(f.spineBorderColorCommand,N,f):f.spineBorderColorCommand.style=N:g()}}),Object.defineProperty(f,"spineBorderWidth",{get:function(){return S},set:function(N){N>0||(N=0),S=N,!f.spineBorderWidthCommand||S==0?g():(f.spineBorderWidthCommand.width=S,Y&&(f.spineBorderDashedCommand.segments=[20,10],f.spineBorderDashedCommand.offset=5))}}),Object.defineProperty(f,"closeColor",{get:function(){return b},set:function(N){n(N)&&(N=t.black),b=N,f.closeColorCommand?N&&N.type?f.specialColor(f.closeColorCommand,N,f):f.closeColorCommand.style=N:g()}}),Object.defineProperty(f,"closeBorderColor",{get:function(){return V},set:function(N){V=N,f.closeBorderColorCommand?N&&N.type?f.specialColor(f.closeBorderColorCommand,N,f):f.closeBorderColorCommand.style=N:g()}}),Object.defineProperty(f,"closeBorderWidth",{get:function(){return X},set:function(N){N>0||(N=0),X=N,!f.closeBorderWidthCommand||X==0?g():(f.closeBorderWidthCommand.width=X,O&&(f.closeBorderDashedCommand.segments=[20,10],f.closeBorderDashedCommand.offset=5))}}),Object.defineProperty(f,"pin",{get:function(){return d},set:function(N){N>0||(N=0),N>f.pinPoints.length-1&&(d=0),d=N;var L=f.pinPoints[d];L&&(f.regX=L.x,f.regY=L.y)}});var le=t.boundsAroundPoints(f.points);this.setBounds(le.x,le.y,le.width,le.height),n(d)||(f.pin=d),this.mouseChildren=!1,W!==!1&&t.styleTransforms(this,u),this.clone=function(){return f.cloneProps(new t.Flare(e,r,i,o,t.copy(a),t.copy(s),t.copy(c),d,C,T,t.copy(h),t.copy(w),t.copy(A),t.copy(y),t.copy(v),P,t.copy(x),E,k,p,m,S,_,Y,B,b,X,V,O,Z,W,this.group,ne))}},t.extend(t.Flare,t.Container,["clone"],"zimContainer",!1),t.MultiFlare=function(e,r,i,l,a,s,c){var d="flares, pins, angles, endToEnd, style, group, inherit",C;if(C=lt(t.MultiFlare,arguments,d,this))return C;Le("53.7"),this.zimContainer_constructor(),this.type="MultiFlare",this.group=s;var T=a===!1?{}:t.getStyle(this.type,this.group,c),h=this;n(e)&&(e=T.flares!=null?T.flares:[]),Array.isArray(e)||(e=[e]),n(r)&&(r=T.pins!=null?T.pins:null),n(i)&&(i=T.angles!=null?T.angles:null),n(l)&&(l=T.endToEnd!=null?T.endToEnd:!1),h.flares=e,h.pins=r,h.angles=i,h.endToEnd=l,h.mouseChildren=!1,h.add=function(w,A){return n(w)||(n(A)&&(A=!0),Array.isArray(w)||(w=[w]),t.loop(w,function(y){A?h.flares.push(y.clone()):h.flares.push(y)}),h.remake(),h.stage&&h.stage.update()),h},h.remove=function(w){return n(w)||(Array.isArray(w)||(w=[w]),t.loop(w,function(A){var y=h.flares.indexOf(A);y>=0&&h.flares.splice(y,1)}),h.remake(),h.stage&&h.stage.update()),h},h.remake=function(){h.removeAllChildren(),t.loop(h.flares,function(w,A){if(r&&!n(r[A])&&(w.pin=r[A]),i&&!n(i[A])&&(w.rotation=i[A]),w.addTo(h),h.flares.push(w),l&&A>0){var y=e[A-1],v=y.pinPoints[y.pinPoints.length-1],P=y.localToLocal(v.x,v.y,h),x=w.pinPoints[0],E=w.localToLocal(x.x,x.y,h);w.mov(P.x-E.x,P.y-E.y)}})},h.remake(),a!==!1&&t.styleTransforms(this,T),this.clone=function(){return h.cloneProps(new t.MultiFlare(t.copy(e,!0),t.copy(r),t.copy(i),l,a,this.group,c))}},t.extend(t.MultiFlare,t.Container,["clone"],"zimContainer",!1),t.FlareBox=function(e,r,i,l,a,s,c,d,C,T,h){var w="width, height, color, borderColor, borderWidth, flares, corners, pins, style, group, inherit",A;if(A=lt(t.FlareBox,arguments,w,this))return A;Le("53.8"),this.group=T;var y=C===!1?{}:t.getStyle("FlareBox",this.group,h);n(e)&&(e=y.width!=null?y.width:220),n(r)&&(r=y.height!=null?y.height:80),this.zimContainer_constructor(e,r),this.type="FlareBox";var v=this;if(this.mouseChildren=!1,n(l)&&(l=y.borderColor!=null?y.borderColor:null),n(a)&&(a=y.borderWidth!=null?y.borderWidth:null),l<0||a<0?l=a=null:l!=null&&a==null&&(a=1),n(i)&&(i=y.color!=null?y.color:a>0?"rgba(0,0,0,0)":t.black),(n(a)||a>0)&&(!n(l)||!n(a))&&n(l)&&(l=t.black),n(s)&&(s=y.flares!=null?y.flares:null),n(c)&&(c=y.corners!=null?y.corners:null),n(d)&&(d=y.pins!=null?y.pins:null),v.backing=new t.Rectangle(e,r,i,l,a).addTo(this),!n(s)){if(s.type!="MultiFlare"){if(!Array.isArray(s)){if(s.type!="Flare")return;s=[s]}s=new t.MultiFlare(s,d)}s.addTo(v),v.multiFlare=s,v.flares=v.multiFlare.flares,s.loop(function(P,x){d&&!n(d[x])?P.pin=d[x]:n(P.pin)&&(P.pin=0),c&&!n(c[x])?P.corner=c[x]:n(P.corner)&&(P.corner=0),P.corner==1?P.loc(e,0):P.corner==2?P.loc(e,r):P.corner==3?P.loc(0,r):P.loc(0,0),P.rot((P.corner-P.pin)*90)}),C!==!1&&t.styleTransforms(this,y),this.clone=function(){return v.cloneProps(new t.FlareBox(e,r,i,l,a,t.copy(s,!0),t.copy(c),t.copy(d),C,this.group,h))}}},t.extend(t.FlareBox,t.Container,["clone"],"zimContainer",!1),t.Label=function(e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,x,E,k,p,m,S,_,Y,B,b,X,V,O,Z,W,K,ne,F,D){var u="text, size, font, color, rollColor, shadowColor, shadowBlur, align, valign, bold, italic, variant, lineWidth, lineHeight, backing, outlineColor, outlineWidth, backgroundColor, backgroundBorderColor, backgroundBorderWidth, corner, backgroundDashed, padding, paddingH, paddingV, shiftH, shiftV, rollPersist, labelWidth, labelHeight, maxSize, splitWords, style, group, inherit",f;if(f=lt(t.Label,arguments,u,this))return f;Le("54"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Label",this.group=F;var o=ne===!1?{}:t.getStyle(this.type,this.group,D);n(e)&&(e=o.text!=null?o.text:"LABEL"),n(r)&&(r=o.size!=null?o.size:36),n(i)&&(i=o.font!=null?o.font:"arial"),n(l)&&(l=o.color!=null?o.color:t.black),n(T)&&(T=o.bold!=null?o.bold:!1),n(h)&&(h=o.italic!=null?o.italic:!1);var g=q(e,r,i,l,T,h);this.veeObj={text:g[0],size:g[1],font:g[2],color:g[3],bold:g[4],italic:g[5]};function q(){return arguments}e=t.Pick.choose(e);var I=!1;e===""&&(e=" ",I=!0),r=t.Pick.choose(r),i=t.Pick.choose(i),i=i.replace("+"," ");var R=["ttf","otf","woff2","woff","fnt"],le=i.split(".");le.length>0&&R.indexOf(le[1])!=-1&&(i=le[0]),l=t.Pick.choose(l),T=t.Pick.choose(T),h=t.Pick.choose(h),n(a)&&(a=o.rollColor!=null?o.rollColor:null),(n(s)||s=="ignore")&&(s=o.shadowColor!=null&&s!="ignore"?o.shadowColor:-1),(n(c)||c=="ignore")&&(c=o.shadowBlur!=null&&c!="ignore"?o.shadowBlur:14),n(d)&&(d=o.align!=null?o.align:"left"),n(C)&&(C=o.valign!=null?o.valign:"top"),(!n(P)||!n(o.outlineColor))&&n(x)&&(x=o.outlineWidth!=null?o.outlineWidth:Math.round(r*.2)),(!n(x)||!n(o.outlineWidth))&&n(P)&&(P=o.outlineColor!=null?o.outlineColor:t.black),n(x)&&(x=o.outlineWidth!=null?o.outlineWidth:0),(n(E)||E=="ignore")&&(E=o.backgroundColor!=null&&E!="ignore"?o.backgroundColor:null),n(k)&&(k=o.backgroundBorderColor!=null&&k!="ignore"?o.backgroundBorderColor:null),n(p)&&(p=o.backgroundBorderWidth!=null&&p!="ignore"?o.backgroundBorderWidth:null),(n(_)||_=="ignore")&&(_=o.padding!=null&&_!="ignore"?o.padding:10),n(Y)&&(Y=o.paddingH!=null?o.paddingH:_),n(B)&&(B=o.paddingV!=null?o.paddingV:_),n(b)&&(b=o.shiftH!=null?o.shiftH:0),n(X)&&(X=o.shiftV!=null?o.shiftV:0),n(w)&&(w=o.variant!=null?o.variant:!1),n(A)&&(A=o.lineWidth!=null?o.lineWidth:null),n(y)&&(y=o.lineHeight!=null?o.lineHeight:null),(n(v)||v=="ignore")&&(v=o.backing!=null&&v!="ignore"?o.backing.clone():null),n(V)&&(V=o.rollPersist!=null?o.rollPersist:!1),o.labelWidth!=null&&(A=o.labelWidth),n(O)||(A=O),d=="middle"&&(d="center"),n(Z)&&(Z=o.labelHeight!=null?o.labelHeight:null),n(W)&&(W=o.maxSize!=null?o.maxSize:null),r=W?Math.min(r,W):r,n(K)&&(K=o.splitWords!=null?o.splitWords:!1);var N=j.zdf&&j.zdf.retina,L=this;this.mouseChildren=!1,this.paddingV=B,this.paddingH=Y,j.DIR&&j.DIR=="rtl"||!j.DIR&&t.DIR=="rtl"?d=="start"?d="right":d=="end"&&(d="left"):d=="start"?d="left":d=="end"&&(d="right");var ee=[];ee[0]=h?"italic":"normal",ee[1]=w?"small-caps":"normal",ee[2]=T?"bold":"normal",ee[3]=r+"px",ee[4]=i;var z=ee.join(" ");e=String(e);var $,xe=!1,ie=A,ke=Z;if(n(v)&&n(E)){var U=new Ne.Shape;L.hitArea=U}else ie&&(ie=ie-Y*2),ke&&(ke=ke-B*2);function Ee(J){var Se=new Ne.Text(J,z,l);return Se.lineWidth=ie,Se.lineHeight=y,Se}$=Ee(e);function Q(J,Se,Be){var Ye=Math.ceil(ie/Se*Be.length),Ke=Be.substr(0,Ye),at=Ee(Ke),me=at.getMeasuredWidth();if(me>ie)for(;me>ie;)Ye--,Ke=Be.substr(0,Ye),at=Ee(Ke),me=at.getMeasuredWidth();else if(me<ie){for(;me<ie;)Ye++,Ke=Be.substr(0,Ye),at=Ee(Ke),me=at.getMeasuredWidth();Ye--,Ke=Be.substr(0,Ye)}var Ge=Be.substr(Ye,Be.length);return{endIndex:Ye,start:Ke,end:Ge}}if(K&&ie>r*1.2)for(var G=$.getMetrics(),ue=0;G.width>ie&&ue<1e3;)ue++,t.loop(G.lines,function(J,Se){J=J.replace(/^[\s\t]+/,"");var Be=Ee(J),Ye=Be.getMeasuredWidth();if(Ye>ie){var Ke=Q(Be,Ye,J);return G.lines[Se]=Ke.start,G.lines.length>Se+1?(Ke.end.trim(),G.lines[Se+1]=Ke.end+" "+G.lines[Se+1]):G.lines.push(Ke.end),$=Ee(G.lines.join(" ")),G=$.getMetrics(),!1}});if(this.label=$,$.textAlign=d,$.textBaseline="alphabetic",x>0){var fe=this.outlineLabel=$.clone();fe.color=P,fe.outline=x}s!=-1&&c>0&&($.shadow=new Ne.Shadow(s,3,3,c)),this.addChild($);function ye(){L.removeChild(L.background),L.background=new t.Rectangle(L.getBounds().width+Y*2,L.getBounds().height+B*2,E,k,p,m,S,null,null,!1),t.center(L.background,L,0),L.setBounds(L.background.x,L.background.y,L.background.width,L.background.height)}function H(){var J=$.getBounds(),Se=J.y,Be=J.height;if(ie&&!ke){var Ye=J.x,Ke=ie;d=="right"?Ye=J.x-ie+J.width:d=="center"&&(Ye=-ie/2),$.setBounds(Ye,Se,Ke,Be),J=$.getBounds()}var at;C=="baseline"?at=J.y:C=="top"?($.y=r-r/6,at=0):C=="center"||C=="middle"?(at=-J.height/2,$.y=r*.3):at=-J.height,L.setBounds(J.x,at,o.width?o.width-_*2:J.width,o.height?o.height-_*2:J.height),L.hitArea&&L.hitArea.graphics.c().f("black").r(L.getBounds().x,L.getBounds().y,L.getBounds().width,L.getBounds().height),(C=="center"||C=="middle")&&(t.pos($,null,0),t.mov($,0,1)),Z||(v?xe&&te():n(E)||ye()),C!="baseline"&&!N&&($.y+=r/32),ge()}if(H(),!n(v)){if(v.type=="Pattern"){if(L.backing=new t.Container(L.width+Y*2,L.height+B*2,null,null,!1).centerReg(null,null,!1),s!=-1&&c>0){var re=new t.Rectangle(L.width+Y*2-2,L.height+B-2,"#666",null,null,m,null,null,null,!1).center(L.backing);re.shadow=new Ne.Shadow(s,3,3,c)}var pe=new t.Rectangle(L.width+Y*2,L.height+B*2,E,null,null,m,null,null,null,!1).addTo(L.backing);v.centerReg(pe),v.setMask(pe),L.backing.pattern=v}else L.backing=v;L.backing.center(L,0),v=L.backing,te(),xe=!0}function te(){var J=v.boundsToGlobal(),Se=L.boundsToGlobal(J,!0);L.setBounds(Se.x,Se.y,Se.width,Se.height)}function ge(){t.pos($,d=="left"||d=="right"?v||L.background?Y:0:null,C=="top"||C=="baseline"||C=="bottom"?v||L.background?B:0:null,d=="right",C=="bottom"),$.x+=b,$.y+=X}ge();function Ae(){fe&&(fe.x=$.x,fe.y=$.y,L.addChildAt(fe,L.background||L.backing?1:0))}Ae(),Object.defineProperty(L,"text",{get:function(){var J=$.text==" "&&I?"":$.text;return J},set:function(J){I=!1,J===""&&(J=" ",I=!0),$.text=String(J),$.setBounds(null),L.setBounds(null),H(),fe&&(fe.text=String(J)),!n(A)&&!n(Z)&&(ve(),fe&&Ae())}}),Object.defineProperty(L,"size",{get:function(){return r},set:function(J){r=W?Math.min(J,W):J,ee[3]=r+"px",this.label.font=ee.join(" "),fe&&(fe.font=ee.join(" ")),$.setBounds(null),L.setBounds(null),H(),Ae()}}),Object.defineProperty(L,"bold",{get:function(){return!!this.label.font.match("bold")},set:function(J){T=J,ee[2]=J?"bold":"normal",this.label.font=ee.join(" "),fe&&(fe.font=ee.join(" "))}}),Object.defineProperty(L,"italic",{get:function(){return!!this.label.font.match("italic")},set:function(J){h=J,ee[0]=J?"italic":"normal",this.label.font=ee.join(" "),fe&&(fe.font=ee.join(" "))}}),Object.defineProperty(L,"variant",{get:function(){return!!this.label.font.match("small-caps")},set:function(J){w=J,ee[1]=J?"small-caps":"normal",this.label.font=ee.join(" "),fe&&(fe.font=ee.join(" "))}}),Object.defineProperty(L,"font",{get:function(){return ee[4]},set:function(J){n(J)||(i=J,ee[4]=J,this.label.font=ee.join(" "),fe&&(fe.font=ee.join(" ")))}}),Object.defineProperty(L,"align",{get:function(){return d},set:function(J){n(J)||(d=J,this.label.textAlign=d,fe&&(fe.textAlign=d),H(),Ae())}}),Object.defineProperty(L,"valign",{get:function(){return C},set:function(J){n(J)||(C=J,H(),Ae())}}),Object.defineProperty(L,"color",{get:function(){return l},set:function(J){a==l&&(a=J),l=J,$.color=l,!t.OPTIMIZE&&(mt||!j.OPTIMIZE)&&L.stage&&L.stage.update()}}),Object.defineProperty(L,"colorOnly",{get:function(){return l},set:function(J){l=J,$.color=l,!t.OPTIMIZE&&(mt||!j.OPTIMIZE)&&L.stage&&L.stage.update()}});var ae,de;this.setColorRange=function(J,Se){return n(Se)?(ae=L.color,de=J):n(J)?(ae=L.color,de=Se):(ae=J,de=Se),L};var se=0;Object.defineProperty(L,"colorRange",{get:function(){return se},set:function(J){se=J,!n(ae)&&!n(de)&&(L.color=t.colorRange(ae,de,J))}}),Object.defineProperty(L,"backgroundColor",{get:function(){return E},set:function(J){E=J,L.background?L.background.color=J:L.backing?L.backing.color=J:ye(),!t.OPTIMIZE&&(mt||!j.OPTIMIZE)&&L.stage&&L.stage.update()}}),Object.defineProperty(L,"outlineColor",{get:function(){return P},set:function(J){P=J,fe&&(fe.color=P),!t.OPTIMIZE&&(mt||!j.OPTIMIZE)&&L.stage&&L.stage.update()}}),Object.defineProperty(L,"rollColor",{get:function(){return a},set:function(J){!L.mouseoverEvent&&J&&Ie(),J==null&&L.mouseoverEvent&&Te(),a=J}}),this._enabled=!0,Object.defineProperty(L,"enabled",{get:function(){return L._enabled},set:function(J){It(L,J),$.color=l,L.mouseChildren=!1,!t.OPTIMIZE&&(mt||!j.OPTIMIZE)&&L.stage&&L.stage.update()}}),this.showRollColor=function(J){return n(J)&&(J=!0),J?$.color=a:$.color=l,L.stage&&L.stage.update(),L};function Ie(){L.mouseoverEvent=L.on("mouseover",function(){L.showRollColor&&L.showRollColor()}),L.mouseoutEvent=L.on("mouseout",function(){L.rollPersist||L.showRollColor(!1)}),L.pressupEvent=L.on("pressup",function(){L.rollPersist&&L.showRollColor(!1)})}function Te(){L.off("mouseover",L.mouseoverEvent),L.off("mouseout",L.mouseoutEvent),L.off("pressup",L.pressupEvent)}a&&Ie(),Object.defineProperty(L,"labelWidth",{get:function(){return A},set:function(J){J>0&&(A=J,ie=A,(!n(v)||!n(E))&&ie&&(ie=ie-Y*2),L.label.lineWidth=ie,fe&&(fe.lineWidth=ie),$.setBounds(null),L.setBounds(null),H(),Z&&ve(),!t.OPTIMIZE&&(mt||!j.OPTIMIZE)&&L.stage&&L.stage.update())}}),Object.defineProperty(L,"labelHeight",{get:function(){return Z},set:function(J){J>0&&(Z=J,ke=Z,(!n(v)||!n(E))&&ke&&(ke=ke-B*2),A&&ve(),L.setBounds(null),!t.OPTIMIZE&&(mt||!j.OPTIMIZE)&&L.stage&&L.stage.update())}}),!n(A)&&!n(Z)&&ve();function ve(){L.size=W||200;for(var J=0;y<ke/2&&(L.height>ke||L.width>ie)&&(J++,L.size=L.size/2,!(J>50)););for(J=0;L.height<=ke&&L.width<=ie&&(J++,L.size=Math.ceil(L.size+1),!(J>50)););L.size=L.size-1,Ae(),$.setBounds(null);var Se=$.getBounds(),Be=Se.y,Ye=Se.height;ke&&(C=="bottom"?Be=Be-ke+Ye:(C=="center"||C=="middle")&&(Be=(Be+Be-ke+Ye)/2),Ye=ke),$.setBounds(Se.x,Be,Se.width,Ye),L.setBounds(null),Se=L.getBounds(),L.setBounds(Se.x,Se.y,Se.width,Se.height),v?xe&&te():n(E)||ye()}t.styleTransforms(this,o),this.clone=function(J){return L.cloneProps(new t.Label(J||!t.isPick(g[0])?L.text:g[0],J||!t.isPick(g[1])?r:g[1],J||!t.isPick(g[2])?i:g[2],J||!t.isPick(g[3])?l:g[3],a,s,c,d,C,J||!t.isPick(g[4])?T:g[4],J||!t.isPick(g[5])?h:g[5],w,A,y,n(v)?null:v.clone(J),P,x,E,k,p,m,S,_,Y,B,b,X,V,O,Z,W,K,ne,this.group,D))}},t.extend(t.Label,t.Container,"clone","zimContainer"),t.LabelOnPath=function(e,r,i,l,a,s,c,d,C,T,h,w){var A="label, path, percentAngle, percents, showPath, allowToggle, interactive, onTop, rtl, style, group, inherit",y;if(y=lt(t.LabelOnPath,arguments,A,this))return y;Le("54.5"),this.zimContainer_constructor(null,null,null,null,!1),this.type="LabelOnPath",this.group=h;var v=T===!1?{}:t.getStyle(this.type,this.group,w);n(e)&&(e=v.label!=null?v.label:new t.Label("Label on Path")),n(r)&&(r=v.path!=null?v.path:new t.Squiggle({points:[[0,0,0,0,-86,57,86,-57],[300,150,0,0,-133,21,133,-21]]})),n(i)&&(i=v.percentAngle!=null?v.percentAngle:100),n(l)&&(l=v.percents!=null?v.percents:null),n(a)&&(a=v.showPath!=null?v.showPath:!0),n(s)&&(s=v.allowToggle!=null?v.allowToggle:!0),n(c)&&(c=v.interactive!=null?v.interactive:!0),n(d)&&(d=v.onTop!=null?v.onTop:!1),n(C)&&(C=v.rtl!=null?v.rtl:j.DIR=="rtl"||t.DIR=="rtl"),C&&r.reversePoints();var P=e.color;r.addTo(this);var x=this;this.path=r,this.allowToggle=s,r.interactive=c,typeof e=="string"&&(e=new t.Label(e));var E=r.alpha;a||r.alp(0),r.onTop=d;var k=this.letters=new t.Container().addTo(this);if(!l){l=[];for(var p=0;p<e.text.length;p++)l.push(t.decimals(1/(e.text.length-(r.type=="Blob"?0:1))*100*p))}this.percents=l;function m(){var _;for(_=k.numChildren-1;_>=0;_--)k.getChildAt(_).dispose();for(x.numLetters=e.text.length,_=0;_<x.numLetters;_++){var Y=e.clone();Y.text=e.text[_],Y.centerReg(k).reg(null,Y.height),Y.text!=""&&Y.text!=" "&&Y.expand(0),x.allowToggle&&Y.cur("pointer"),Y.on("mousedown",function(){x.allowToggle&&x.toggle()})}x.resize()}this.resize=function(){for(var _=r.segmentRatios,Y=r.segmentPoints,B=0;B<this.numLetters;B++){var b=r.getCurvePoint(l[B]/100,_,Y,!0);if(b){var X=this.globalToLocal(b.x,b.y);X&&(k.getChildAt(B).loc(X).rot((b.angle>180?b.angle-360:b.angle)*i/100),C&&(k.getChildAt(B).rotation+=180))}}return this},m(),this.showPath=function(_){return this.toggle(!0),r.toggle(_),this},this.hidePath=function(){return this.toggle(!1),this},Object.defineProperty(x,"text",{get:function(){return e.text},set:function(_){e.text=_,l=[];for(var Y=0;Y<e.text.length;Y++)l.push(t.decimals(1/(e.text.length-(r.type=="Blob"?0:1))*100*Y));m()}}),Object.defineProperty(this,"color",{get:function(){return P},set:function(_){P=_;for(var Y=0;Y<x.letters.numChildren;Y++)x.letters.getChildAt(Y).color=P;x.stage&&x.stage.update()}}),Object.defineProperty(x,"interactive",{get:function(){return c},set:function(_){c=_,r.interactive=_,this.ticker&&t.Ticker.remove(this.ticker),c&&(this.ticker=t.Ticker.add(function(){x.resize()}))}}),this.interactive&&(this.ticker=t.Ticker.add(function(){x.resize()}));var S=x.toggled=a;this.toggle=function(_){if(this.allowToggle)return n(_)?S=!S:_?S=!0:S=!1,S?(r.alp(E),this.interactive&&(r.showControls(),k.mouseEnabled=!1,k.mouseChildren=!1,k.cur("default"),this.controlHideEvent&&r.off("controlshide",this.controlHideEvent),this.controlHideEvent=r.on("controlshide",function(){k.mouseEnabled=!0,k.mouseChildren=!0,k.cur("pointer"),E=r.alpha,r.alp(0),S=!1,x.toggled=S,x.stage&&x.stage.update()},null,!0))):(E=r.alpha,r.alp(0),k.mouseEnabled=!0,k.mouseChildren=!0,k.cur("pointer")),x.toggled=S,x.stage&&x.stage.update(),x},x.toggle(!0),t.styleTransforms(this,v),this.clone=function(){return x.cloneProps(new t.LabelOnPath(x.label.clone(),x.path.clone(),i,t.copy(l),a,s,c,d,C,T,this.group,w))},this.dispose=function(_,Y,B){return this.ticker&&t.Ticker.remove(this.ticker),B||this.zimContainer_dispose(!0),!0}},t.extend(t.LabelOnPath,t.Container,["clone","dispose"],"zimContainer",!1),t.LabelOnArc=function(e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,x,E){var k="label, size, font, color, radius, flip, spacing, letterSpacing, angles, showCircle, arcColor, arcBorderColor, arcBorderWidth, radiusSpread, rtl, style, group, inherit",p;if(p=lt(t.LabelOnArc,arguments,k,this))return p;Le("54.55"),this.group=x;var m=P===!1?{}:t.getStyle("LabelOnArc",this.group,E);n(r)&&(r=m.size!=null?m.size:30),n(e)&&(e=m.label!=null?m.label:new t.Label("Label on Arc",r)),n(i)&&(i=m.font!=null?m.font:"verdana"),n(l)&&(l=m.color!=null?m.color:t.white),n(a)&&(a=m.radius!=null?m.radius:100),n(s)&&(s=m.flip!=null?m.flip:!1),n(c)&&(c=m.spacing!=null?m.spacing:0),n(d)&&(d=m.letterSpacing!=null?m.letterSpacing:5),n(C)&&(C=m.angles!=null?m.angles:null);var S=!n(C),_=t.copy(C);n(T)&&(T=m.showCircle!=null?m.showCircle:!1),n(h)&&(h=m.arcColor!=null?m.arcColor:null),n(w)&&(w=m.arcBorderColor!=null?m.arcBorderColor:null),n(A)&&(A=m.arcBorderWidth!=null?m.arcBorderWidth:null),n(y)&&(y=m.radiusSpread!=null?m.radiusSpread:!1),n(v)&&(v=m.rtl!=null?m.rtl:j.DIR=="rtl"||t.DIR=="rtl");var Y=this.outerRadius=a+c+e.height;this.innerRadius=a+c,this.zimContainer_constructor(-Y,-Y,Y*2,Y*2,!1),this.type="LabelOnArc";var B=this;e.type!="Label"&&(e=new t.Label(e,r,i,l)),e.text;var b,X,V,O,Z,W;function K(){if(B.disposeAllChildren(),s){var D=e.text.split("").reverse().join("");e.text=D}b=B.letters=new t.Container(B.width,B.height).centerReg(B),B.numLetters=e.text.length,B.letterHeight=e.height,X=B.labels=[];var u;for(u=0;u<B.numLetters;u++){var f=e.clone();X.push(f),f.text=e.text[u],f.letterHolder=new t.Container(f.width,f.height),f.centerReg(f.letterHolder).rot(s?180:0)}if(v&&X.reverse(),O=B.circle=new t.Circle(a),T&&O.addTo(B),V=B.arc=new t.Shape().addTo(B),ne(),C){for(Z=0,u=0;u<C.length;u++)Z+=C[u];Z+=C[C.length-1]/2}F()}K();function ne(){Z=0,W=[0];for(var D=0;D<B.numLetters;D++){var u=X[D],f=Math.atan((u.width+d)/2/(a+c))*180/Math.PI*2;W.push(f),Z+=f,u.letterHolder.centerReg(b).reg(null,a+c+u.height+(s?u.height*.13:0))}B.circle.radius=a,(h||w||A)&&(A>0&&n(w)?w=t.black:n(A)&&!n(w)&&(A=2),V.graphics.c().f(null).s(w).ss(A).arc(0,0,a,(B.startAngle-90)*Math.PI/180,(B.startAngle-90+Z)*Math.PI/180))}function F(){var D;if(!S)for(C=[],D=0;D<W.length-1;D++)C[D]=Math.round((W[D]+W[D+1])/2*100)/100;B.angles=C,B.startAngle=-Z/2;var u=B.startAngle;for(D=0;D<b.numChildren;D++){var f=b.getChildAt(D);u=f.rotation=u+C[D]}}Object.defineProperty(this,"radius",{get:function(){return a},set:function(D){a=D,ne(),!S&&!y&&F()}}),Object.defineProperty(this,"color",{get:function(){return l},set:function(D){l=D;for(var u=0;u<B.labels.length;u++)B.labels[u].color=l;B.stage&&B.stage.update()}}),Object.defineProperty(B,"text",{get:function(){return e.text},set:function(D){e.text=D,_?C=t.copy(_):C=null,K()}}),t.styleTransforms(this,m),this.clone=function(){return B.cloneProps(new t.LabelOnArc(e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,this.group,E))}},t.extend(t.LabelOnArc,t.Container,"clone","zimContainer",!1),t.LabelLetters=function(e,r,i,l,a,s,c,d,C,T,h,w,A,y,v){var P="label, align, valign, letterSpacing, letterSpacings, lineSpacing, lineSpacings, lineHeight, lineAlign, lineValign, cache, rtl, style, group, inherit",x;if(x=lt(t.LabelLetters,arguments,P,this))return x;Le("54.57"),this.group=y;var E=A===!1?{}:t.getStyle("LabelLetters",this.group,v);n(e)&&(e=E.label!=null?E.label:new t.Label("Label Letters")),n(r)&&(r=E.align!=null?E.align:"center"),n(i)&&(i=E.valign!=null?E.valign:"center"),n(l)&&(l=E.letterSpacing!=null?E.letterSpacing:5),n(a)&&(a=E.letterSpacings!=null?E.letterSpacings:null),n(d)&&(d=E.lineHeight!=null?E.lineHeight:null),n(s)&&(s=E.lineSpacing!=null?E.lineSpacing:5),n(c)&&(c=E.lineSpacings!=null?E.lineSpacings:null),n(w)&&(w=E.rtl!=null?E.rtl:!1),n(C)&&(C=E.lineAlign!=null?E.lineAlign:w?"right":"left"),n(T)&&(T=E.lineValign!=null?E.lineValign:"bottom"),n(h)&&(h=E.cache!=null?E.cache:!1),this.zimContainer_constructor(null,null,null,null,!1),this.type="LabelLetters";var k=this,p=k.letterData=[],m,S;e.type!="Label"?(S=_(e),p=S.data,e=new t.Label(S.text)):(S=_(e.text),p=S.data,e.text=S.text),k.text=S.original,k._color=e.color,j.DIR&&j.DIR=="rtl"||!j.DIR&&t.DIR=="rtl"?C=="start"?C="right":C=="end"&&(C="left"):C=="start"?C="left":C=="end"&&(C="right");function _(fe){var ye=[];function H(de){return de.split("").reverse().join("")}if(w){ke=-1,fe=fe.replace(/[\u0591-\u07FF]+/gi,H),fe=fe.replace(/([^\u0591-\u07FF ])([\u0591-\u07FF])/gi,"$1-!!-$2"),fe=fe.replace(/([\u0591-\u07FF])([^\u0591-\u07FF ])/gi,"$1-!!-$2"),fe=fe.replace(/([^\u0591-\u07FF]) ([\u0591-\u07FF])/gi,"$1-!!- -!!-$2"),fe=fe.replace(/([\u0591-\u07FF]) ([^\u0591-\u07FF])/gi,"$1-!!- -!!-$2");var re=fe.split(/-!!-/g);t.loop(re,function(de,se){de.match(/[\u0591-\u07FF]/i)&&(re[se]=de.split(" ").reverse().join(" "))}),fe=re.join("")}fe=fe.replace(/\n|\r/g,"<br>"),fe=fe.replace(/<strong>|<strong \/>|<strong\/>/gi,"<b>"),fe=fe.replace(/<\/strong>/gi,"</b>"),fe=fe.replace(/<em>|<em \/>|<em\/>/gi,"<i>"),fe=fe.replace(/<\/em>/gi,"</i>"),fe=fe.replace(/\\n|\\r/g,"<br>"),fe=fe.replace(/<br>|<br \/>|<br\/>(<\/br>)?/gi,"<br>"),fe=fe.replace(/<b/gi,"<b"),fe=fe.replace(/<i/gi,"<i"),fe=fe.replace(/<u/gi,"<u"),fe=fe.replace(/<br/gi,"<br"),fe=fe.replace(/<a/gi,"<a"),fe=fe.replace(/<font/gi,"<font");var pe=[/<(a|i|u|f|br|\/a|\/i|\/u|\/f|\/b)[^>]*>/g,/<(a|i|u|f|br|\/a|\/i|\/u|\/f|b)[^>]*>/g,/<(b|i|u|f|br|\/b|\/i|\/u|\/f|\/a)[^>]*>/g,/<(b|i|u|f|br|\/b|\/i|\/u|\/f|a)[^>]*>/g,/<(b|a|u|f|br|\/b|\/a|\/u|\/f|\/i)[^>]*>/g,/<(b|a|u|f|br|\/b|\/a|\/u|\/f|i)[^>]*>/g,/<(b|a|i|f|br|\/b|\/a|\/i|\/f|\/u)[^>]*>/g,/<(b|a|i|f|br|\/b|\/a|\/i|\/f|u)[^>]*>/g,/<(b|a|i|u|br|\/b|\/a|\/i|\/u|\/f)[^>]*>/g,/<(b|a|i|u|br|\/b|\/a|\/i|\/u|f)[^>]*>/g],te=["b","a","i","u","font"],ge;t.loop(te,function(de,se){ge=fe.replace(pe[se*2],"");var Ie;de=="font"?Ie=ge.split("<font "):de=="a"?Ie=ge.split("<a "):Ie=ge.split("<"+de+">"),ae(Ie,de,0),ge=fe.replace(pe[se*2+1],""),Ie=ge.split("</"+de+">"),ae(Ie,de,1)}),ge=fe.replace(/<br>/gi,"@^#"),ge=ge.replace(/<(b|a|i|u|f|\/b|\/a|\/i|\/u|\/f)[^>]*>/g,"");var Ae=ge.split("@^#");m=Ae.join(`
`),ge=Ae.join(""),ae(Ae,"br",0);function ae(de,se,Ie){if(de.length>1)if((se=="font"||se=="a")&&Ie==0){var Te=de[0].length;t.loop(de,function(J,Se){if(Se!=0){var Be=ye[Te];Be||(ye[Te]=[]),Be=ye[Te];var Ye=J.split(">");Be[Ie]?Be[Ie].push(se+" "+Ye[0]):Be[Ie]=[se+" "+Ye[0]],Te+=Ye[1].length}})}else{de.pop();var ve=0;t.loop(de,function(J){ve+=J.length;var Se=ye[ve];Se||(ye[ve]=[]),Se=ye[ve],Se[Ie]?Se[Ie].push(se):Se[Ie]=[se]})}}return{text:ge,data:ye,original:m}}k.numLetters=e.text.length;var Y=!n(a);a&&!Array.isArray(a)&&(a=null);var B;if(a)for(B=0;B<k.numLetters;B++)n(a[B])&&(a[B]=l);else for(a=[],B=0;B<k.numLetters;B++)a.push(l);if(k.letterSpacings=a,c&&!Array.isArray(c)&&(c=null),c)for(B=0;B<k.numLetters-1;B++)n(c[B])&&(c[B]=s);else for(c=[],B=0;B<k.numLetters-1;B++)c.push(s);k.lineSpacings=c,k.labels=[],k.lines=[[]];var b=[],X=[],V=[0],O=0,Z=0,W=0,K=0,ne=0,F=p,D=!1,u=!1,f=!1,o=!1,g=!1,q=!1,I=!1,R=!1,le=!1,N=!1,L=!1,ee=!1;for(k.rolls=[[]],B=0;B<k.numLetters;B++){o=!1,F[B]&&(F[B][1]&&(F[B][1].indexOf("b")>=0&&(D=!1),F[B][1].indexOf("i")>=0&&(u=!1),F[B][1].indexOf("u")>=0&&(f=!1),t.loop(F[B][1],function(fe){if(fe.match(/^font/i)){g=!1,L=!1,ee&&k.rolls.push([]),ee=!1,q=!1,R=!1,I=!1;return}if(fe.match(/^a/i)){le=!1,N=!1;return}})),F[B][0]&&(F[B][0].indexOf("b")>=0&&(D=!0),F[B][0].indexOf("i")>=0&&(u=!0),F[B][0].indexOf("u")>=0&&(f=!0),o=0,t.loop(F[B][0],function(fe){fe=="br"&&o++}),t.loop(F[B][0],function(fe){var ye,H;if(fe.match(/^font/i)){ye=fe.match(/ color\s?=\s?(\S*)/i),ye&&(g=ye[1],H=t.colors.indexOf(g),H>=0&&(g=t.colorsHex[H]),g=g.replace(/'/g,"")),ye=fe.match(/size\s?=\s?(\S*)/i),ye&&(q=ye[1]),ye=fe.match(/backgroundColor\s?=\s?(\S*)/i),ye&&(L=ye[1],H=t.colors.indexOf(L),H>=0&&(L=t.colorsHex[H]),L=L.replace(/'/g,"")),ye=fe.match(/rollBackgroundColor\s?=\s?(\S*)/i),ye&&(ee=ye[1],H=t.colors.indexOf(ee),H>=0&&(ee=t.colorsHex[H]),ee=ee.replace(/'/g,"")),ye=fe.match(/group\s?=\s?(\S*)/i),ye&&(I=ye[1]),ye=fe.match(/family\s?=\s?(.*)/i),ye&&(R=ye[1],R=R.split(/\ssize\s?=|\scolor\s?=|\sgroup\s?=/i)[0]);return}if(fe.match(/^a/i)){ye=fe.match(/href\s?=\s?(\S*)/i),ye&&(le=ye[1]),ye=fe.match(/target\s?=\s?(\S*)/i),ye&&(N=ye[1]);return}})));var z;I?z=new t.Label({text:e.text[B],group:I}):(z=e.clone(),z.text=e.text[B]),k.labels.push(z),D&&(z.bold=!0),u&&(z.italic=!0),g&&(z.color=g),L&&(z.backgroundColor=L);var $=Y||n(z.backgroundColor)?a[B]:-.5;ee&&(z.rollIndex=k.rolls.length-1,z.zrbc=ee,z.zobc=z.backgroundColor,k.rolls[z.rollIndex].push(z),z.expand(0),z.on("mouseover",xe),z.on("mouseout",ie)),le&&(z.expand($,0),z.zurl=le,z.ztar=N,z.cur(),z.on("click",function(fe){var ye=fe.currentTarget;ie(fe),ye.ztar||(ye.ztar="_self"),zn(ye.zurl,ye.ztar)})),q&&(z.size=q),R&&(z.font=R),o&&(O+=(n(d)?W:d)+c[K],V.push(O),X.push(n(d)?W:d),b.push(Z),ne=Math.max(ne,Z)),o&&(o>1&&t.loop(o-1,function(){k.lines.push([]),O+=(n(d)?W:d)+c[K],V.push(O),X.push(n(d)?W:d),b.push(0),K++}),W=0,Z=0,k.lines.push([]),K++),Z+=z.width+$,W=Math.max(W,z.height),B==k.numLetters-1&&(b.push(Z),X.push(W),ne=Math.max(ne,Z)),k.lines[K].push(z),f&&(z.underline=new t.Line(z.width+$+1,1,z.color).center(z,this).mov(0,z.height/2))}function xe(fe){var ye=fe.currentTarget,H=k.rolls[ye.rollIndex];t.loop(H,function(re){re.backgroundColor=ye.zrbc}),ye.stage&&ye.stage.update()}function ie(fe){var ye=fe.currentTarget,H=k.rolls[ye.rollIndex];t.loop(H,function(re){re.backgroundColor=ye.zobc}),ye.stage&&ye.stage.update()}for(var ke=0,U=0;U<k.lines.length;U++){var Ee=k.lines[U];Z=b[U],W=X[U],O=V[U];var Q,G;for(C=="left"?Q=0:C=="right"?Q=ne-Z:Q=(ne-Z)/2,G=O,B=0;B<Ee.length;B++){ke++,h&&z.cache(),z=Ee[B],z.regX=r=="left"?0:r=="right"?z.width:z.width/2,z.regY=i=="top"?0:i=="bottom"?z.height:z.height/2;var ue=G+(i=="top"?0:i=="bottom"?z.height:z.height/2);T=="center"||T=="middle"?ue+=(X[U]-z.height)/2:T=="bottom"&&(ue+=X[U]-z.height),$=Y||n(z.backgroundColor)?a[ke-1]:-.5,r=="left"?(z.loc(Q,ue,this),Q=z.x+z.width+$):r=="right"?(z.loc(Q+z.width,ue,this),Q=z.x+$):(z.loc(Q+z.width/2,ue,this),Q=z.x+z.width/2+$)}}this.getBounds()||this.setBounds(0,0,0,0),this.regX=this.getBounds().x,this.regY=this.getBounds().y,Object.defineProperty(this,"color",{get:function(){return this._color},set:function(fe){this._color=fe;for(var ye=0;ye<k.numChildren;ye++)k.getChildAt(ye).color=this._color;k.stage&&k.stage.update()}}),this.dispose=function(){t.gD(this),t.loop(k.labels,function(fe){fe.removeFrom(),fe.dispose()}),k.removeFrom()},t.styleTransforms(this,E),this.clone=function(){return k.cloneProps(new t.LabelLetters(e,r,i,l,a,s,c,d,C,T,h,w,A,this.group,v))}},t.extend(t.LabelLetters,t.Container,"clone","zimContainer",!1),t.Emoji=function(e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,x){var E="code, size, monochrome, italic, backgroundColor, backgroundBorderColor, backgroundBorderWidth, corner, backing, padding, paddingH, paddingV, shiftH, shiftV, style, group, inherit",k;if(k=lt(t.Emoji,arguments,E,this))return k;Le("54.58"),this.group=P;var p=v===!1?{}:t.getStyle("Emoji",this.group,x);n(e)&&(e=p.code!=null?p.code:"\u{1F642}"),n(r)&&(r=p.size!=null?p.size:30),n(i)&&(i=p.monochrome!=null?p.monochrome:!1),n(l)&&(l=p.italic!=null?p.italic:!1),(n(a)||a=="ignore")&&(a=p.backgroundColor!=null&&a!="ignore"?p.backgroundColor:null),n(s)&&(s=p.backgroundBorderColor!=null&&s!="ignore"?p.backgroundBorderColor:null),n(c)&&(c=p.backgroundBorderWidth!=null&&c!="ignore"?p.backgroundBorderWidth:null),(n(T)||T=="ignore")&&(T=p.padding!=null&&T!="ignore"?p.padding:10),n(h)&&(h=p.paddingH!=null?p.paddingH:T),n(w)&&(w=p.paddingV!=null?p.paddingV:T),n(A)&&(A=p.shiftH!=null?p.shiftH:0),n(y)&&(y=p.shiftV!=null?p.shiftV:0);var m=S(e,r);this.veeObj={code:m[0],size:m[1]};function S(){return arguments}e=t.Pick.choose(e),r=t.Pick.choose(r),e.substring(0,2)=="U+"&&(e=t.unicodeToUTF(e)),this.zimLabel_constructor(e,r,null,null,null,null,null,null,null,null,l,null,null,null,C,null,null,a,null,null,d,null,T,h,w,A,y),this.type="Emoji",this.code=e,this.size=r;var _=this,Y=this.getBounds(),B=5,b=3;this.bounds=this.setBounds(Y.x+b,Y.y-B+1,Y.width-b*2,Y.height+B),i&&(this.saturation=-100);var X=i;Object.defineProperty(_,"monochrome",{get:function(){return X},set:function(V){V!=X&&(X=V,V&&(this.saturation=V?-100:0))}}),this.cache=function(V,O,Z,W){return n(V)?(O=this.getBounds(),this.zimLabel_cache(O.x-20,O.y-20,O.width+40,O.height+40)):this.zimLabel_cache(V,O,Z,W),_.z_bc=_.cacheCanvas,this},t.styleTransforms(this,p),this.clone=function(V){return _.cloneProps(new t.Emoji(V||!t.isPick(m[0])?e:m[0],V||!t.isPick(m[1])?_.size:m[1],i,l,a,s,c,d,C,T,h,w,A,y,v,_.group,x))}},t.extend(t.Emoji,t.Label,["clone","cache"],"zimLabel",!1),t.Button=function(e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,x,E,k,p,m,S,_,Y,B,b,X,V,O,Z,W,K,ne,F,D,u,f,o,g,q,I,R,le,N,L,ee,z,$,xe,ie,ke,U,Ee,Q,G,ue,fe,ye,H,re,pe,te,ge,Ae,ae,de,se,Ie){var Te="width, height, label, backgroundColor, rollBackgroundColor, downBackgroundColor, color, rollColor, downColor, borderColor, borderWidth, rollBorderColor, downBorderColor, backing, rollBacking, downBacking, icon, rollIcon, downIcon, corner, dashed, shadowColor, shadowBlur, gradient, gloss, align, valign, indent, indentH, indentV, hitPadding, autoPadding, autoPaddingH, autoPaddingV, rollPersist, toggle, toggleBackgroundColor, rollToggleBackgroundColor, downToggleBackgroundColor, toggleColor, rollToggleColor, downToggleColor, toggleBacking, rollToggleBacking, downToggleBacking, toggleIcon, rollToggleIcon, downToggleIcon, toggleEvent, wait, waitTime, waitBackgroundColor, rollWaitBackgroundColor, downWaitBackgroundColor, waitColor, rollWaitColor, downWaitColor, waitBacking, rollWaitBacking, downWaitBacking, waitIcon, rollWaitIcon, downWaitIcon, waitModal, waitEnabled, style, group, inherit",ve;if(ve=lt(t.Button,arguments,Te,this))return ve;Le("55"),this.group=se;var J=de===!1?{}:t.getStyle("Button",se,Ie);n(e)&&(e=J.width!=null?J.width:200),n(r)&&(r=J.height!=null?J.height:60),n(j.M)&&(j.M=t.mobile());var Se=c,Be=d,Ye=C;n(c)&&(c=J.color!=null?J.color:t.white),n(d)&&(d=J.rollColor!=null?J.rollColor:t.white),n(K)&&(K=J.autoPadding!=null?J.autoPadding:20),n(ne)&&(ne=J.autoPaddingH!=null?J.autoPaddingH:K),n(F)&&(F=J.autoPaddingV!=null?J.autoPaddingV:K),n(b)&&(b=J.align!=null?J.align:"center"),n(X)&&(X=J.valign!=null?J.valign:"center"),n(i)&&(n(x)?i=J.label!=null?J.label:"PRESS":i=""),typeof i=="string"||typeof i=="number"?i=new t.Label({text:i,size:J.size!=null?J.size:36,font:J.font!=null?J.font:"arial",color:J.color!=null&&Se==null?J.color:c,rollColor:J.rollColor&&Be==null!=null?J.rollColor:d,align:b,valign:X,rollPersist:J.rollPersist!=null?J.rollPersist:!1,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",shiftV:J.shiftV!=null?J.shiftV:0,shiftH:J.shiftH!=null?J.shiftH:0,style:!1,group:this.group}):(n(Se)||(i.color=Se),c=i.color,(n(i.rollColor)||!n(Be))&&(i.rollColor=d),d=i.rollColor),n(C)&&(C=J.downColor!=null?J.downColor:d),e=="auto"&&(e=i.width+ne*2),r=="auto"&&(r=i.height+F*2),this.zimContainer_constructor(e,r,null,null,!1),this.type="Button",n(l)&&(l=J.backgroundColor!=null?J.backgroundColor:t.purple),n(a)&&(a=J.rollBackgroundColor!=null?J.rollBackgroundColor:l.lighten(.2)),n(s)&&(s=J.downBackgroundColor!=null?J.downBackgroundColor:a);var Ke=at(l,a,s,c,d,C);this.veeObj={backgroundColor:Ke[0],rollBackgroundColor:Ke[1],downBackgroundColor:Ke[2],color:Ke[3],rollColor:Ke[4],downColor:Ke[5]};function at(){return arguments}l=et(l),a=et(a),s=et(s),c=et(c),d=et(d),C=et(C);var me=T,Ge=h;n(T)&&(T=J.borderColor!=null?J.borderColor:null),n(h)&&(h=J.borderWidth!=null?J.borderWidth:null),T<0||h<0?T=h=null:T!=null&&h==null&&(h=1),n(w)&&(w=J.rollBorderColor!=null?J.rollBorderColor:T),n(A)&&(A=J.downBorderColor!=null?J.downBorderColor:w),n(p)&&(p=J.corner!=null?J.corner:10),n(S)&&(S=J.shadowColor!=null?J.shadowColor:"rgba(0,0,0,.3)"),n(_)&&(_=J.shadowBlur!=null?J.shadowBlur:14),n(W)&&(W=J.hitPadding!=null?J.hitPadding:0),n(V)&&(V=J.indent!=null?J.indent:10),n(O)&&(O=J.indentH!=null?J.indentH:V),n(Z)&&(Z=J.indentV!=null?J.indentV:V),n(Y)&&(Y=J.gradient!=null?J.gradient:0),n(B)&&(B=J.gloss!=null?J.gloss:0);var Je=(!n(u)||!n(le)||!n(N)||!n(L)||!n(ee)||!n(z)||!n($))&&n(ie)&&n(ye)&&n(H);Je&&n(xe)&&(xe=j.M?"mousedown":"click"),n(D)&&(D=J.rollPersist!=null?J.rollPersist:!1),this.rollPersist=D,n(m)&&(m=J.dashed!=null?J.dashed:!1),!n(u)&&u.type=="Label"&&dt&&$e("Button() - do not pass Label to toggle parameter - just pass a String"),n(f)&&(f=J.toggleBackgroundColor!=null?J.toggleBackgroundColor:l),n(o)&&(o=J.rollToggleBackgroundColor!=null?J.rollToggleBackgroundColor:a),n(g)&&(g=J.downToggleBackgroundColor!=null?J.downToggleBackgroundColor:o),n(q)&&(q=J.toggleColor!=null?J.toggleColor:i.color),n(I)&&(I=J.rollToggleColor!=null?J.rollToggleColor:i.rollColor),n(R)&&(R=J.downToggleColor!=null?J.downToggleColor:i.rollToggleColor),n(U)&&(U=J.waitBackgroundColor!=null?J.waitBackgroundColor:l),n(Ee)&&(Ee=J.rollWaitBackgroundColor!=null?J.rollWaitBackgroundColor:a),n(Q)&&(Q=J.downWaitBackgroundColor!=null?J.downWaitBackgroundColor:a),n(G)&&(G=J.waitColor!=null?J.waitColor:i.color),n(ue)&&(ue=J.rollWaitColor!=null?J.rollWaitColor:i.rollColor),n(fe)&&(fe=J.downWaitColor!=null?J.downWaitColor:ue);var ce=this;this.mouseChildren=!1,this.cur("pointer"),ce.focus=!1,ce.rolled=!1;var oe=Tt(ke);n(y)&&(y=J.backing!=null?J.backing.clone():null),n(y)?ce.backing=new t.Rectangle(e,r,l,null,null,p,m,null,null,!1).centerReg(null,null,!1):ce.backing=y,ce.rollBacking=n(v)?J.rollBacking!=null?J.rollBacking.clone():null:v,ce.downBacking=n(P)?J.downBacking!=null?J.downBacking.clone():null:P,ce.waitBacking=n(ye)?J.waitBacking!=null?J.waitBacking.clone():null:ye,ce.rollWaitBacking=n(H)?J.rollWaitBacking!=null?J.rollWaitBacking.clone():null:H,ce.downWaitBacking=n(re)?J.downWaitBacking!=null?J.downWaitBacking.clone():null:re,ce.toggleBacking=n(le)?J.toggleBacking!=null?J.toggleBacking.clone():null:le,ce.rollToggleBacking=n(N)?J.rollToggleBacking!=null?J.rollToggleBacking.clone():null:N,ce.downToggleBacking=n(L)?J.downToggleBacking!=null?J.downToggleBacking.clone():null:L;var _e=["backing","rollBacking","downBacking","toggleBacking","rollToggleBacking","downToggleBacking","waitBacking","rollWaitBacking","downWaitBacking"],je,Ve,De;for(De=0;De<_e.length;De++)je=_e[De],Ve=ce[je],Ve&&(Ve.type=="Pattern"?Ve=Oe(je,Ve):S!=-1&&_>0&&(Ve.shadow=new Ne.Shadow(S,3,3,_)),Ve.x=e/2,Ve.y=r/2);ce.addChild(ce.backing),h&&(ce.border=new t.Rectangle(e,r,"rgba(0,0,0,0)",T,h,p,m,null,null,!1),ce.addChild(ce.border));function Oe(pt,bt){if(ce[pt]=new t.Container(e,r,null,null,!1).centerReg(null,null,!1),S!=-1&&_>0){var Zt=new t.Rectangle(e-2,r-2,"#666",null,null,p,null,null,null,!1).center(ce[pt]);Zt.shadow=new Ne.Shadow(S,3,3,_)}var Xt=ce[pt].mask=new t.Rectangle(e,r,pt.indexOf("roll")>=0?a:l,null,null,p,null,null,null,!1).addTo(ce[pt]);return bt.centerReg(Xt),bt.setMask(Xt.shape),ce[pt].pattern=bt,ce[pt]}ce.icon=n(x)?J.icon!=null?J.icon.clone():null:x,ce.rollIcon=n(E)?J.rollIcon!=null?J.rollIcon.clone():null:E,ce.downIcon=n(k)?J.downIcon!=null?J.downIcon.clone():null:k,ce.waitIcon=n(pe)?J.waitIcon!=null?J.waitIcon.clone():null:pe,ce.rollWaitIcon=n(te)?J.rollWaitIcon!=null?J.rollWaitIcon.clone():null:te,ce.downWaitIcon=n(ge)?J.downWaitIcon!=null?J.downWaitIcon.clone():null:ge,ce.toggleIcon=n(ee)?J.toggleIcon!=null?J.toggleIcon.clone():null:ee,ce.rollToggleIcon=n(z)?J.rollToggleIcon!=null?J.rollToggleIcon.clone():null:z,ce.downToggleIcon=n($)?J.downToggleIcon!=null?J.downToggleIcon.clone():null:$;var Re=["icon","rollIcon","downIcon","toggleIcon","rollToggleIcon","downToggleIcon","waitIcon","rollWaitIcon","downWaitIcon"];for(De=0;De<Re.length;De++){var Ze=Re[De],be=ce[Ze];be&&(be.x=e/2,be.y=r/2)}if(ce.icon&&ce.addChild(ce.icon),Array.isArray(p)||(p=[p,p,p,p]),Y>0){var we=new Ne.Shape;we.graphics.lf(["rgba(255,255,255,"+Y+")","rgba(0,0,0,"+Y+")"],[0,1],0,0,0,r-h),we.graphics.rc(h/2,h/2,e-h,r-h,p[0],p[1],p[2],p[3]),this.addChild(we)}if(B>0){var Me=new Ne.Shape;Me.graphics.f("rgba(255,255,255,"+B+")"),Me.graphics.rc(h/2,h/2,e-h,(r-h)/2,p[0],p[1],0,0),Me.graphics.f("rgba(0,0,0,"+B+")"),Me.graphics.rc(h/2,r/2,e-h,(r-h)/2,0,0,p[2],p[3]),this.addChild(Me)}var He,Xe;W>0&&nt();function nt(){Xe=new Ne.Shape,Xe.graphics.f("#000").r(-W,-W,e+W*2,r+W*2),ce.hitArea=He=Xe}this.addChild(i),i.center(this),i.y+=1,this.label=i,t.pos(i,b=="left"||b=="right"?O:null,X=="top"||X=="bottom"?Z:null,b=="right",X=="bottom");var Ce=i.color;if(this.toggled=!1,Je){var Fe=i.text,it=i.color,Qe=i.rollColor;this.on(xe,function(){ce.toggled=!ce.toggled,tt()})}function tt(){ce.toggled?(n(u)||(ce.label.text=u===!0?Fe:u),n(q)||(ce.label.colorOnly=Ce=q),n(I)||(ce.label.rollColor=I),ce.rolled?(ce.rollToggleBacking?qe("rollToggleBacking"):ce.toggleBacking&&qe("toggleBacking"),ce.rollToggleIcon?qe("rollToggleIcon"):ce.toggleIcon&&qe("toggleIcon"),n(y)&&n(ce.rollToggleBacking)&&(ce.backing.color=o)):(ce.toggleBacking&&qe("toggleBacking"),ce.toggleIcon&&qe("toggleIcon"),n(y)&&(ce.backing.color=f))):(ce.label.colorOnly=Ce=it,ce.label.rollColor=Qe,ce.rolled&&ce.label.showRollColor(!0),ce.label.text=Fe,ot()),ce.stage&&ce.stage.update()}function ot(){ce.pressed?(n(y)&&ce.backing&&!ce.downBacking&&(ce.backing.color=s),ce.downBacking?qe("downBacking"):ce.rollBacking?qe("rollBacking"):ce.backing&&qe("backing"),ce.downIcon?qe("downIcon"):ce.rollIcon?qe("rollIcon"):ce.icon?qe("icon"):qe("icon",null)):ce.rolled?(n(y)&&ce.backing&&!ce.rollBacking&&(ce.backing.color=a),ce.rollBacking?qe("rollBacking"):ce.backing&&qe("backing"),ce.rollIcon?qe("rollIcon"):ce.icon?qe("icon"):qe("icon",null)):(n(y)&&ce.backing&&(ce.backing.color=l),ce.backing&&qe("backing"),ce.icon,qe("icon"))}this.toggle=function(pt){return Je?(n(pt)?ce.toggled=!ce.toggled:ce.toggled=pt,tt(),ce):(dt&&$e("Button() - can't toggle with wait parameters provided"),ce)};var gt=!1;ce.waiting=!1;var ze=!1,Mt,ut,xt=ce.label.color,_t=ce.label.rollColor,Yt,Et,Jt=this.on("mousedown",function(){gt=!0,qt()});function qt(){(!n(ie)||!n(ye)||!n(H))&&!ce.waiting&&(ze=!0,n(ae)&&(ae=!0),Ae&&(Et=ce.stage.on("stagemousedown",function(pt){ce.hitTestPoint(pt.stageX/t.scaX,pt.stageY/t.scaY)||ce.clearWait()},null,!0)),setTimeout(function(){ce.waiting=!0},50),ut=i.text,n(G)||(ce.label.colorOnly=Ce=G),n(ue)||(ce.label.rollColor=ue),Yt=ce.enabled,!ae&&ce.enabled&&(ce.enabled=!1),n(ie)||(ce.label.text=ie),ce.rolled?(n(y)&&!ce.rollWaitBacking&&(ce.backing.color=Ee),ce.rollWaitBacking?qe("rollWaitBacking"):ce.waitBacking&&qe("waitBacking"),ce.rollWaitIcon?qe("rollWaitIcon"):ce.waitIcon&&qe("waitIcon")):(n(y)&&!ce.waitBacking&&(ce.backing.color=U),ce.waitBacking&&qe("waitBacking"),ce.waitIcon&&qe("waitIcon")),n(ke)&&(ke=oe=="s"?5:5e3),Mt&&Mt.clear(),Mt=t.timeout(ke,function(){ce.enabled||(ce.enabled=Yt),ce.clearWait(),ce.dispatchEvent("waited")}),ce.stage&&ce.stage.update())}this.wait=qt,this.clearWait=function(){return Mt&&(Et&&ce.stage.off("stagemousedown",Et),Mt.clear(),ce.label.text=ut,ot(),ce.label.colorOnly=Ce=xt,ce.label.rollColor=_t,setTimeout(function(){ce.waiting=!1},55),ze=!1,ce.stage&&ce.stage.update()),ce},this.removeWait=function(){return ce.clearWait(),ie=null,ce.waitBacking=null,ce.rollWaitBacking=null,ce.off("mousedown",Jt),ce};function qe(pt,bt){var Zt;if(pt.indexOf("con")>=0){for(Zt=0;Zt<Re.length;Zt++){var Xt=Re[Zt],tn=ce[Xt];ce.removeChild(tn)}ce[pt]&&ce.addChildAt(ce[pt],1)}else{if(!ce[pt]&&!bt)return;for(Zt=0;Zt<_e.length;Zt++){var fn=_e[Zt],an=ce[fn];ce.removeChild(an)}ce[pt]&&ce.addChildAt(ce[pt],0)}}var ht=!1;this.on("mouseover",function(pt){ce.stage&&ce.stage.frame.leftMouseDown&&!Ot||st()});function st(){ce.rolled=!0,ht=!0,ze?(ce.pressed&&ce.downWaitBacking?qe("downWaitBacking"):ce.pressed&&ce.downBacking?qe("downBacking"):ce.rollWaitBacking?qe("rollWaitBacking"):ce.waitBacking?qe("waitBacking"):ce.rollBacking?qe("rollBacking"):qe("backing"),ce.pressed&&ce.downWaitIcon?qe("downWaitIcon"):ce.rollWaitIcon?qe("rollWaitIcon"):ce.waitIcon?qe("waitIcon"):ce.rollIcon?qe("rollIcon"):qe("icon",!0)):Je&&ce.toggled?(ce.pressed&&ce.downToggleBacking?qe("downToggleBacking"):ce.pressed&&ce.downBacking?qe("downBacking"):ce.rollToggleBacking?qe("rollToggleBacking"):ce.toggleBacking?qe("toggleBacking"):ce.rollBacking?qe("rollBacking"):qe("backing"),ce.pressed&&ce.downToggleIcon?qe("downToggleIcon"):ce.rollToggleIcon?qe("rollToggleIcon"):ce.toggleIcon?qe("toggleIcon"):ce.rollIcon?qe("rollIcon"):qe("icon",!0)):(ce.pressed&&ce.downBacking?qe("downBacking"):ce.rollBacking?qe("rollBacking"):qe("backing"),ce.pressed&&ce.downIcon?qe("downIcon"):ce.rollIcon?qe("rollIcon"):qe("icon",!0)),ce.pressed?n(y)&&ce.backing?ce.backing.color=s:y&&!n(y.mask)&&ce.backing&&(ce.backing.mask.color=s):n(y)&&ce.backing?ce.backing.color=a:y&&!n(y.mask)&&ce.backing&&(ce.backing.mask.color=a),ce.border&&(ce.border.borderColor=ce.pressed?A:w),ce.pressed?ce.label.colorOnly=C:ce.label.showRollColor?ce.label.showRollColor():ce.label.colorOnly=Ce,ce.stage&&ce.stage.update()}var Ot=!1;this.on("mousedown",function(){ce.pressed=Ot=!0,st(),ce.rolled}),this.on("pressup",function(){ce.pressed=Ot=gt=!1,ht?st():ce.rollPersist&&Vt(),j.M&&St()}),this.on("pressmove",function(){var pt=ce.stage?ce.stage.frame:j.zdf,bt=ce.hitTestPoint(pt.mouseX,pt.mouseY);Ot&&!bt?(St(),Ot=!1):!Ot&&bt&&(st(),Ot=!0)}),this.on("mouseout",St);function St(){ht=!1,ce.rollPersist&&gt||Vt()}function Vt(){ce.rolled=!1,ze||ce.waiting?(n(y)&&ce.backing&&n(ce.waitBacking)&&(ce.backing.color=n(U)?l:U),ce.waitBacking?qe("waitBacking"):ce.backing&&qe("backing"),ce.waitIcon?qe("waitIcon"):ce.icon?qe("icon"):qe("icon",null)):ce.toggled&&Je?(n(y)&&ce.backing&&n(ce.toggleBacking)&&(ce.backing.color=f),ce.toggleBacking?qe("toggleBacking"):ce.backing&&qe("backing"),ce.toggleIcon?qe("toggleIcon"):ce.icon?qe("icon"):qe("icon",null)):(n(y)&&ce.backing?ce.backing.color=l:y&&!n(y.mask)&&ce.backing&&(ce.backing.mask.color=l),ce.backing&&qe("backing"),ce.icon?qe("icon"):qe("icon",null)),ce.border&&(ce.border.borderColor=T),ce.label.colorOnly=Ce,ce.label.showRollColor&&ce.label.showRollColor(!1),ce.stage&&ce.stage.update()}ce.removeRoll=Vt,ce.rollBacking&&ce.rollBacking.removeFrom(),Object.defineProperty(ce,"text",{get:function(){var pt=i.text==" "?"":i.text;return pt},set:function(pt){i.text=pt,Fe&&(Fe=pt),i.center(this),i.y+=1,t.pos(i,b=="left"||b=="right"?O:null,X=="top"||X=="bottom"?Z:null,b=="right",X=="bottom")}}),Object.defineProperty(ce,"color",{get:function(){return c},set:function(pt){c=pt,it&&(it=c),ce.label&&!n(ce.label.color)&&(ce.label.color=Ce=c),!t.OPTIMIZE&&(mt||!j.OPTIMIZE)&&ce.stage&&ce.stage.update()}}),Object.defineProperty(ce,"rollColor",{get:function(){return d},set:function(pt){d=pt,Qe&&(Qe=d),ce.label&&(ce.label.rollColor=d)}}),Object.defineProperty(ce,"downColor",{get:function(){return C},set:function(pt){C=pt,originalDownColor&&(originalDownColor=C),ce.label&&(ce.label.downColor=C)}}),Object.defineProperty(ce,"backgroundColor",{get:function(){return l},set:function(pt){l=pt,ce.backing.color?ce.backing.color=l:ce.backing.mask&&(ce.backing.mask.color=l),!t.OPTIMIZE&&(mt||!j.OPTIMIZE)&&ce.stage&&ce.stage.update()}}),Object.defineProperty(ce,"rollBackgroundColor",{get:function(){return a},set:function(pt){a=pt,ce.rollBacking&&ce.rollBacking.color?ce.rollBacking.color=a:ce.rollBacking&&ce.rollBacking.mask&&(ce.rollBacking.mask.color=a)}}),Object.defineProperty(ce,"downBackgroundColor",{get:function(){return s},set:function(pt){s=pt,ce.downBacking&&ce.downBacking.color?ce.downBacking.color=s:ce.downBacking&&ce.downBacking.mask&&(ce.downBacking.mask.color=s)}}),Object.defineProperty(ce,"borderColor",{get:function(){return T},set:function(pt){T=pt,ce.rolled||(ce.backing&&ce.backing.borderColor&&(ce.backing.borderColor=pt),ce.border&&(ce.border.borderColor=pt))}}),Object.defineProperty(ce,"rollBorderColor",{get:function(){return w},set:function(pt){w=pt,ce.rolled&&(ce.backing&&ce.backing.borderColor&&(ce.backing.borderColor=pt),ce.border&&(ce.border.borderColor=pt))}}),Object.defineProperty(ce,"hitPadding",{get:function(){return W},set:function(pt){W=pt,W==0?He&&(this.hitArea=null):nt()}}),this._enabled=!0,this.startMouseChildren=this.mouseChildren,Object.defineProperty(ce,"enabled",{get:function(){return ce._enabled},set:function(pt){ce._enabled&&(ce.startMouseChildren=ce.mouseChildren),pt?(It(ce,pt),ce.mouseChildren=ce.startMouseChildren):(Vt(),It(ce,pt));var bt=i.color;i.color=Ce=bt,!t.OPTIMIZE&&(mt||!j.OPTIMIZE)&&ce.stage&&ce.stage.update()}}),this.setBacking=function(pt,bt){Gt(pt,bt)},this.setIcon=function(pt,bt){Gt(pt,bt)};function Gt(pt,bt){return n(pt)||(ce.contains(ce[pt])&&(ce.removeChild(ce[pt]),bt&&ce.addChildAt(bt,pt.indexOf("con")>=0?ce.numChildren-1:0),ce.stage&&ce.stage.update()),bt?(n(y)&&pt=="backing"&&(y=bt),bt.type=="Pattern"&&(bt=Oe(pt,bt)),ce[pt]=bt,ce[pt].x=e/2,ce[pt].y=r/2):ce[pt]=null,ot()),ce}de!==!1&&t.styleTransforms(this,J),this.clone=function(pt){var bt=new t.Button(e,r,i.clone(),pt||!t.isPick(Ke[0])?l:Ke[0],pt||!t.isPick(Ke[1])?a:Ke[1],pt||!t.isPick(Ke[2])?s:Ke[2],pt||!t.isPick(Ke[3])?c:Ke[3],pt||!t.isPick(Ke[4])?d:Ke[4],pt||!t.isPick(Ke[5])?C:Ke[5],me,Ge,w,A,n(y)?null:ce.backing.clone(),n(v)?null:ce.rollBacking.clone(),n(P)?null:ce.downBacking.clone(),n(x)?null:x.clone(),n(E)?null:E.clone(),n(k)?null:k.clone(),p,m,S,_,Y,B,b,X,V,O,Z,W,K,ne,F,D,u,f,o,g,q,I,R,n(le)?null:le.clone(),n(N)?null:N.clone(),n(L)?null:L.clone(),n(ee)?null:ee.clone(),n(z)?null:z.clone(),n($)?null:$.clone(),xe,ie,ke,U,Ee,Q,G,ue,fe,n(ye)?null:ye.clone(),n(H)?null:H.clone(),n(re)?null:re.clone(),n(pe)?null:pe.clone(),n(te)?null:te.clone(),n(ge)?null:ge.clone(),Ae,ae,de,this.group,Ie);return ce.cloneProps(bt)},this.doDispose=function(pt,bt,Zt){return ce.icon&&ce.icon.dispose(),ce.rollIcon&&ce.rollIcon.dispose(),ce.downIcon&&ce.downIcon.dispose(),ce.waitIcon&&ce.waitIcon.dispose(),ce.rollWaitIcon&&ce.rollWaitIcon.dispose(),ce.downWaitIcon&&ce.downWaitIcon.dispose(),ce.toggleIcon&&ce.toggleIcon.dispose(),ce.rollToggleIcon&&ce.rollToggleIcon.dispose(),ce.downToggleIcon&&ce.downToggleIcon.dispose(),ce.icon=ce.rollIcon=ce.downIcon=ce.waitIcon=ce.rollWaitIcon=ce.downWaitIcon=ce.toggleIcon=ce.rollToggleIcon=ce.downToggleIcon=null,Zt||this.zimContainer_dispose(!0),!0}},t.extend(t.Button,t.Container,["clone","dispose"],"zimContainer",!1),t.Button.prototype.dispose=function(e){return this.doDispose(null,null,e)},t.CheckBox=function(e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P){var x="size, label, startChecked, color, backgroundColor, borderColor, borderWidth, corner, margin, indicatorType, indicatorColor, tap, rtl, style, group, inherit",E;if(E=lt(t.CheckBox,arguments,x,this))return E;Le("56"),this.zimContainer_constructor(null,null,null,null,!1),this.type="CheckBox",this.group=v;var k=y===!1?{}:t.getStyle(this.type,this.group,P);n(e)&&(e=k.size!=null?k.size:60),n(r)&&(r=k.label!=null?k.label:null),n(i)&&(i=k.startChecked!=null?k.startChecked:!1),n(l)&&(l=k.color!=null?k.color:t.darker),n(a)&&(a=k.backgroundColor!=null?k.backgroundColor:t.white.toAlpha(.8)),n(s)&&(s=k.borderColor!=null?k.borderColor:t.darker),n(c)&&(c=k.borderWidth!=null?k.borderWidth:e/10),s<0||c<0?s=c=null:s!=null&&c==null&&(c=e/10),n(d)&&(d=k.corner!=null?k.corner:0),n(C)&&(C=k.margin!=null?k.margin:e/5),T!="box"&&T!="square"&&T!="x"&&(T=k.indicatorType!=null?k.indicatorType:"check"),n(h)&&(h=k.indicatorColor!=null?k.indicatorColor:c>0?s:t.black),this.setBounds(-C,-C,e+C*2,e+C*2),n(w)&&(w=k.tap!=null?k.tap:!1),n(A)&&(A=k.rtl!=null?k.rtl:j.DIR=="rtl");var p=this;this.cur("pointer");var m=S(r,i);this.veeObj={label:m[0],startChecked:m[1]};function S(){return arguments}r=t.Pick.choose(r),i=t.Pick.choose(i);var _=i;(typeof r=="string"||typeof r=="number")&&(r=new t.Label({text:r,size:e*5/6,color:l,valign:"center",align:A?"right":"left",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",style:y,group:this.group}));var Y=this.box=new t.Rectangle(e,e,a,null,null,d),B=this.box2=new t.Rectangle(e*5/7,e*5/7,"rgba(0,0,0,0)",s,c,d);B.x=e/7,B.y=e/7,this.addChild(Y,B);var b=e;r&&(r.center(p),this.label=r,A?(r.x=-C,this.setBounds(-r.width-C*2,-C,e+C*3+r.getBounds().width,Math.max(e+C*2,r.getBounds().height)),b=e+r.width+C,this.regX=e):(r.x=p.getBounds().width,this.setBounds(-C,-C,e+C*4+r.getBounds().width,Math.max(e+C*2,r.getBounds().height)),b=r.x+r.width));var X=new t.Shape({style:!1}),V=X.graphics;V.f("rgba(0,0,0,.01)").r(this.getBounds().x,this.getBounds().y,b+C*2,this.getBounds().height),this.hitArea=X;var O=new t.Shape({style:!1}),Z=O.graphics;T=="check"?Z.f(h).p("AnQAdICBiaIEEDZIF8nfICfB4In/KPg"):T=="box"||T=="square"?Z.f(h).dr(-35,-35,70,70):Z.f(h).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg");var W=95;O.setBounds(-W/2,-W/2,W,W);var K=e/(W+66);O.scaleX=O.scaleY=K,O.alpha=.9,O.x=e/2,O.y=e/2,_&&this.addChild(O),w?this.tap(ne):this.on((mt?t.ACTIONEVENT=="mousedown":j.ACTIONEVENT=="mousedown")?"mousedown":"click",ne),Object.defineProperty(p,"checked",{get:function(){return _},set:function(F){p.setChecked(F)}}),this.toggle=function(F){n(F)&&(F=!_),p.setChecked(F)},Object.defineProperty(p,"toggled",{get:function(){return _},set:function(F){p.setChecked(F)}}),Object.defineProperty(p,"text",{get:function(){return r?r.text:null},set:function(F){r&&(r.text=F,!t.OPTIMIZE&&(mt||!j.OPTIMIZE)&&p.stage&&p.stage.update())}}),Object.defineProperty(O,"indicatorColor",{get:function(){return h},set:function(F){_&&p.removeChild(O),O=new Ne.Shape,Z=O.graphics,h=F,Z.f(h).p("AnQAdICBiaIEEDZIF8nfICfB4In/KPg"),O.scaleX=O.scaleY=K,O.alpha=.9,O.x=e/2,O.y=e/2,_&&p.addChild(O),!t.OPTIMIZE&&(mt||!j.OPTIMIZE)&&p.stage&&p.stage.update()}}),Object.defineProperty(p,"indicator",{get:function(){return O},set:function(){$e("ZIM CheckBox - check is read only")}}),this._enabled=!0,Object.defineProperty(p,"enabled",{get:function(){return p._enabled},set:function(F){It(p,F)}});function ne(){_=!_,p.setChecked(_),p.dispatchEvent("change")}this.setChecked=function(F){return n(F)&&(F=!0),_=F,_?p.addChild(O):p.removeChild(O),!t.OPTIMIZE&&(mt||!j.OPTIMIZE)&&p.stage&&p.stage.update(),p},y!==!1&&t.styleTransforms(this,k),this.clone=function(F){return p.cloneProps(new t.CheckBox(e,F||!t.isPick(m[0])?r?r.clone():null:m[0],F||!t.isPick(m[1])?i:m[1],l,a,s,c,d,C,T,h,w,A,y,this.group,P))}},t.extend(t.CheckBox,t.Container,"clone","zimContainer",!1),t.RadioButtons=function(e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P){var x="size, buttons, vertical, color, backgroundColor, borderColor, borderWidth, spacing, margin, always, indicatorColor, selectedIndex, rtl, style, group, inherit",E;if(E=lt(t.RadioButtons,arguments,x,this))return E;Le("57"),this.zimContainer_constructor(null,null,null,null,!1),this.type="RadioButtons",this.group=v;var k=y===!1?{}:t.getStyle(this.type,this.group,P);n(e)&&(e=k.size!=null?k.size:60),e=Math.max(5,e),n(r)&&(r=k.buttons!=null?k.buttons:["A","B","C"]),n(i)&&(i=k.vertical!=null?k.vertical:!0),n(l)&&(l=k.color!=null?k.color:t.darker),n(a)&&(a=k.backgroundColor!=null?k.backgroundColor:"rgba(255,255,255,.8)"),n(s)&&(s=k.borderColor!=null?k.borderColor:t.darker),n(c)&&(c=k.borderWidth!=null?k.borderWidth:e/9),s<0||c<0?s=c=null:s!=null&&c==null&&(c=e/10),n(d)&&(d=i?k.spacing!=null?k.spacing:e*.2:k.spacing!=null?k.spacing:e),n(C)&&(C=k.margin!=null?k.margin:e/5),n(T)&&(T=k.always!=null?k.always:!1),n(h)&&(h=k.indicatorColor!=null?k.indicatorColor:c>0?s:t.black),n(A)&&(A=k.rtl!=null?k.rtl:j.DIR=="rtl");var p=this;this.cur("pointer"),this.labels=[],this.indicators=[];var m=0,S;if(typeof r=="string"){var _=r;r=[];for(var Y=0;Y<_.length;Y++)r.push({label:_[Y]})}var B=new t.Container({style:!1});this.addChild(B);function b(W){var K=B.getChildIndex(W.target);T&&p.selectedIndex==K||(p.setSelected(K),p.dispatchEvent("change"))}O();for(var X,V=0;V<B.numChildren;V++)X=B.getChildAt(V),X.on((mt?t.ACTIONEVENT=="mousedown":j.ACTIONEVENT=="mousedown")?"mousedown":"click",b);function O(){var W,K=!1,ne;for(ne=r.length-1;ne>=0;ne--)W=r[ne],W.selected&&W.selected===!0&&(K?W.selected="false":(K=!0,p.id=W.id));B.removeAllChildren(),p.buttons=[];var F,D=0;for(ne=0;ne<r.length;ne++){if(W=r[ne],typeof W=="string"||typeof W=="number"){var u={selected:!1,label:new t.Label({text:W,size:e*5/6,color:k.color!=null?k.color:l,valign:"center",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",style:y,group:p.group})};W=u}(W.label&&typeof W.label=="string"||typeof W.label=="number")&&(W.label=new t.Label({text:W.label,size:k.size!=null?k.size:e*5/6,color:k.color!=null?k.color:l,valign:"center",style:y})),p.labels.push(W.label),W.index=ne,r[ne]=W,F=Z(W.selected,W.label),F.type="RadioButton",F.obj=W,W.selected&&(S=F.obj),B.addChild(F),i?(F.y=D,D+=F.getBounds().height+d):(F.x=D,D+=F.getBounds().width+d)}}function Z(W,K){var ne=new t.Container({style:!1});p.buttons.push(ne),ne.mouseChildren=!1,ne.setBounds(-C,-C,e+C*2,e+C*2);var F=new t.Shape({style:!1}),D=F.graphics;D.f(a).dc(e/2,e/2,e/1.85),D.s(s).ss(c).dc(e/2,e/2,e/2-e/2/5),ne.addChild(F);var u=ne.check=new t.Circle(e/5.2,h,null,null,null,null,null,null,!1);p.indicators.push(u),u.mouseEnabled=!1,u.alpha=.95,u.regX=u.regY=-e/2;var f=e;K&&(m==0&&(m=K.width),ne.addChild(K),K.y=e/2,ne.text=K.text,A?(K.x=-K.width-C,ne.setBounds(-K.width-C,-C,e+C*2+K.getBounds().width,Math.max(e+C*2,K.getBounds().height)),f=K.width+C+e):(K.x=ne.getBounds().width,ne.setBounds(-C,-C,e+C*2+K.getBounds().width,Math.max(e+C*2,K.getBounds().height)),f=K.x+K.width)),W&&(ne.addChild(u),p.label=K,p.label&&(p.text=K.text));var o=new t.Shape({style:!1});return D=o.graphics,D.f("rgba(0,0,0,.01)").r(ne.getBounds().x,ne.getBounds().y,f+C*2,ne.getBounds().height),ne.hitArea=o,ne}this.getBounds()||this.setBounds(0,0,e,e),A?(this.setBounds(-C*2-m,-C,this.getBounds().width+C*2,this.getBounds().height),this.regX=i?e+C:this.getBounds().width-m-C*3):this.setBounds(-C,-C,this.getBounds().width+C*2,this.getBounds().height),this.setSelected=function(W){if(n(W)&&(W=-1),!(W!=-1&&!B.getChildAt(W))){for(var K,ne=0;ne<B.numChildren;ne++)K=B.getChildAt(ne),K.removeChild(K.check);if(W>=0){K=B.getChildAt(W);var F=-2;S&&(F=S.index),S=K.obj}return W==-1||F==S.index?(S=null,p.id=null,p.label=null,p.text=""):(K.addChild(K.check),p.id=S.id,p.label=S.label,p.label&&(p.text=p.label.text)),!t.OPTIMIZE&&(mt||!j.OPTIMIZE)&&p.stage&&p.stage.update(),p}},Object.defineProperty(p,"selected",{get:function(){return S},set:function(){$e("ZIM RadioButton - selected is read only")}}),Object.defineProperty(p,"selectedIndex",{get:function(){return S?S.index:-1},set:function(W){var K=W;T&&p.selectedIndex==K||p.setSelected(K)}}),this._enabled=!0,Object.defineProperty(p,"enabled",{get:function(){return p._enabled},set:function(W){It(p,W)}}),n(w)&&(w=k.selectedIndex!=null?k.selectedIndex:0),p.selectedIndex=w,t.styleTransforms(this,k),this.clone=function(){for(var W=t.copy(r),K=0;K<W.length;K++)W[K].label=W[K].label.clone();return p.cloneProps(new t.RadioButtons(e,W,i,l,a,s,c,d,C,T,h,w,A,y,this.group,P))}},t.extend(t.RadioButtons,t.Container,"clone","zimContainer",!1),t.Toggle=function(e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,x,E,k,p,m,S){var _="width, height, label, startToggled, backgroundColor, margin, indicatorType, indicatorColor, tap, toggleBackgroundColor, color, borderColor, borderWidth, corner, indicatorCorner, shadowColor, shadowBlur, time, labelLeft, style, group, inherit",Y;if(Y=lt(t.Toggle,arguments,_,this))return Y;Le("57.5"),this.group=m;var B=p===!1?{}:t.getStyle("Toggle",this.group,S);n(e)&&(e=B.width!=null?B.width:80),n(r)&&(r=B.height!=null?B.height:50),this.zimContainer_constructor(e,r,null,null,!1),this.type="Toggle",n(a)&&(a=B.backgroundColor!=null?B.backgroundColor:"#C60"),n(s)&&(s=B.margin!=null?B.margin:10),n(c)&&(c=B.indicatorType!=null?B.indicatorType:"circle"),n(d)&&(d=B.indicatorColor!=null?B.indicatorColor:t.white),n(T)&&(T=B.toggleBackgroundColor!=null?B.toggleBackgroundColor:"#F93"),n(h)&&(h=B.color!=null?B.color:t.darker),n(w)&&(w=B.borderColor!=null?B.borderColor:null),n(A)&&(A=B.borderWidth!=null?B.borderWidth:null),w<0||A<0?w=A=null:w!=null&&A==null&&(A=1),n(y)&&(y=B.corner!=null?B.corner:c!="circle"?0:25),n(v)&&(v=B.indicatorCorner!=null?B.indicatorCorner:0),n(P)&&(P=B.shadowColor!=null?B.shadowColor:"rgba(0,0,0,.3)"),n(x)&&(x=B.shadowBlur!=null?B.shadowBlur:14),n(l)&&(l=B.startToggled!=null?B.startToggled:!1);var b=Tt(E);n(E)&&(E=B.time!=null?B.time:b=="s"?.1:100),n(i)&&(i=B.label!=null?B.label:null),n(k)&&(k=B.labelLeft!=null?B.labelLeft:null);var X=this;X.cur("pointer"),(typeof i=="string"||typeof i=="number")&&(i=this.label=new t.Label({text:i,size:B.size||r*5/6,color:h,valign:"center",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group})),(typeof k=="string"||typeof k=="number")&&(k=this.labelLeft=new t.Label({text:k,size:B.size||r*5/6,color:h,valign:"center",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group})),this.background=new t.Rectangle(e,r,a,w,A,y).addTo(this),c=="rectangle"||c=="square"?this.indicator=new t.Rectangle(r*.65,r*.65,d,null,null,v).center(this.background).pos(r*.2,null,l):this.indicator=new t.Circle(r*.35,d).center(this.background).pos(r*.175,null,l);var V=l;X.background.color=V?T:a,P!=-1&&x>0&&(this.background.shadow=new Ne.Shadow(P,3,3,x)),i&&(this.addChild(i),i.x=e+2+s+A,i.y=r/2,this.label=i,this.setBounds(-s,-s,e+s*3+A+i.getBounds().width,Math.max(r+s*2,i.getBounds().height))),k&&(this.addChild(k),k.x=0,X.background.x+=k.width+3+s+A,X.label.x+=k.width+3+s+A,k.y=r/2,this.labelLeft=k,this.setBounds(-s,-s,X.getBounds().width+k.width+3+s+A,X.getBounds().height)),this.expand(t.mobile()?20:10),this.tap(function(W){if(k){var K=X.localToGlobal(k.width+3+s+A+e/2,0);if(W.stageX/t.scaX<K.x-e/2&&!V||W.stageX/t.scaX>=K.x+e/2&&V)return}V=!V,Z(),X.dispatchEvent("change")},t.mobile()?20:10);var O=new t.Swipe(this,20,b=="s"?.2:200);O.on("swipe",function(W){if(W.swipeX!=0){{if(W.swipeX==1&&V)return;if(W.swipeX==-1&&!V)return}V=!V,Z(),X.dispatchEvent("change")}});function Z(W){var K=X.indicator.x,ne=E;if(W===!0&&(ne=0),c=="rectangle"||c=="square"?(X.indicator.pos(r*.2,null,V),E>0&&X.indicator.animate({props:{x:K},from:!0,time:ne})):(X.indicator.pos(r*.175,null,V),E>0&&X.indicator.animate({props:{x:K},from:!0,time:ne})),X.background.color=V?T:a,X.text=V?X.label?X.label.text:"on":X.labelLeft?X.labelLeft.text:"off",X.zimAccessibility){var F="Toggle set to "+(V?X.label?X.label.text+".":"on.":X.labelLeft?X.labelLeft.text+".":"off.");setTimeout(function(){X.zimAccessibility.talk(F)},50)}}Object.defineProperty(X,"textLeft",{get:function(){return k?k.text:null},set:function(W){k&&(k.text=W,!t.OPTIMIZE&&(mt||!j.OPTIMIZE)&&X.stage&&X.stage.update())}}),X.toggle=function(W,K){var ne=V;return n(W)&&(W=!0),V=W,ne!=V&&Z(K),X},X.text=V?X.label?X.label.text:"on":X.labelLeft?X.labelLeft.text:"off",Object.defineProperty(X,"toggled",{get:function(){return V},set:function(W){X.toggle(W)}}),this._enabled=!0,Object.defineProperty(X,"enabled",{get:function(){return X._enabled},set:function(W){It(X,W)}}),p!==!1&&t.styleTransforms(this,B),this.clone=function(){return X.cloneProps(new t.Toggle(e,r,i?i.clone():"",l,a,s,c,d,C,T,h,w,A,y,v,P,x,E,k?k.clone():"",p,this.group,S))}},t.extend(t.Toggle,t.Container,"clone","zimContainer",!1),t.Tip=function(e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,x,E,k,p,m,S,_,Y,B,b,X,V,O,Z,W,K,ne,F,D,u,f,o,g,q,I,R,le,N,L){var ee="text, tipAlign, tipValign, margin, marginH, marginV, outside, target, delay, time, mouseClose, size, font, color, rollColor, shadowColor, shadowBlur, align, valign, lineWidth, lineHeight, backing, outlineColor, outlineWidth, backgroundColor, backgroundBorderColor, backgroundBorderWidth, corner, backgroundDashed, padding, paddingH, paddingV, shiftH, shiftV, rollPersist, labelWidth, labelHeight, maxSize, bold, italic, variant, splitWords, style, group, inherit",z;if(z=lt(t.Tip,arguments,ee,this))return z;Le("57.6"),this.group=N;var $=le===!1?{}:t.getStyle("Tip",this.group,L);n(e)&&(e=$.text!=null?$.text:"Here's a tip!"),n(l)&&(l=$.margin!=null?$.margin:40),n(a)&&(a=$.marginH!=null?$.marginH:l),n(s)&&(s=$.marginV!=null?$.marginV:l),n(r)&&(r=$.tipAlign!=null?$.tipAlign:"right"),n(i)&&(i=$.tipValign!=null?$.tipValign:"bottom"),n(c)&&(c=$.outside!=null?$.outside:!1),n(B)&&(B=$.backgroundColor!=null?$.backgroundColor:t.blue),n(y)&&(y=$.color!=null?$.color:t.white),n(V)&&(V=$.corner!=null?$.corner:25),n(O)&&(O=$.backgroundDashed!=null?$.backgroundDashed:null),n(Z)&&(Z=$.padding!=null?$.padding:10),n(W)&&(W=$.paddingH!=null?$.paddingH:Z),n(K)&&(K=$.paddingV!=null?$.paddingV:Z),(n(P)||P=="ignore")&&(P=$.shadowColor!=null&&P!="ignore"?$.shadowColor:"rgba(0,0,0,.3)"),(n(x)||x=="ignore")&&(x=$.shadowBlur!=null&&x!="ignore"?$.shadowBlur:1),n(C)&&(C=$.delay!=null?$.delay:0);var xe=Tt(T);n(T)&&(T=$.time!=null?$.time:xe=="s"?2:2e3),n(h)&&(h=$.mouseClose!=null?$.mouseClose:!0),this.zimLabel_constructor(e,w,A,y,v,null,null,E,k,g,q,I,p,m,S,_,Y,B,b,X,V,O,Z,W,K,ne,F,D,u,f,o,R,le,N,t.copy($)),this.type="Tip",c&&(a=-a,s=-s);var ie=this;ie.tipAlign=r,ie.tipValign=i,this.background.sha(P,3,5,x),this.show=function(ke,U){var Ee=Tt(U);if(n(ke)&&(ke=C),n(U)&&(U=T),n(d))if(j.zdf)d=j.zdf.stage;else return ie;else if(d.getBounds){if(n(d.stage))return $e("zim display - Waiter(): The container must have a stage property"),ie}else return $e("zim Tip(): Please pass in a reference to a container with bounds set as parameter to Tip"),ie;ke>0?ie.showID=t.timeout(ke,Q):Q();function Q(){var G;d.boundsToGlobal?G=d.boundsToGlobal():G=d.getBounds();var ue=new t.Container(G.x,G.y,G.width,G.height);ue.zimTemp=!0,ue.loc(0,0,d.stage),ie.pos(a,s,ie.tipAlign,ie.tipValign,ue),c&&(ie.tipAlign=="right"?ie.x+=ie.width:ie.tipAlign=="left"&&(ie.x-=ie.width),ie.tipValign=="bottom"?ie.y+=ie.height:ie.tipValign=="top"&&(ie.y-=ie.height)),ie.addTo(ue.stage),ue.zimTemp&&ue.removeFrom&&(ue.removeFrom(),ue=null),ue=ie.stage,ie.timeoutID&&ie.timeoutID.clear(),ie.timeoutID=t.timeout(U,function(){ie.hide(),ue.stage.update()}),h&&(ie.upID&&ue.stage.off("stagemouseup",ie.upID),ie.upID=ue.stage.on("stagemouseup",function(){ie.hide(),ue.stage&&ue.stage.update()})),ue.stage&&ue.stage.update()}return ie},this.hide=function(){return this.removeFrom(),this.timeoutID&&this.timeoutID.clear(),this.upID&&d.stage&&d.stage.off("stagemouseup",this.upID),ie},this.clear=function(){ie.showID&&ie.showID.clear(),ie.hide()},this.dispose=function(ke,U,Ee){ie.upID&&ie.stage&&ie.stage.off("stagemouseup",ie.upID),Ee||this.zimLabel_dispose(!0)},le!==!1&&t.styleTransforms(this,$),this.clone=function(){return ie.cloneProps(new t.Tip(e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,x,E,k,p,m,S,_,Y,B,b,X,V,O,Z,W,K,ne,F,D,u,f,o,R,le,this.group,L))}},t.extend(t.Tip,t.Label,["dispose","clone"],"zimLabel",!1),t.Pane=function(q,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,x,E,k,p,m,S,_,Y,B,b,X,V,O,Z){var W="content, backgroundColor, color, width, height, draggable, resets, modal, corner, backdropColor, shadowColor, shadowBlur, center, displayClose, backdropClose, backing, fadeTime, container, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, close, closeColor, autoPadding, autoPaddingH, autoPaddingV, style, group, inherit";if(q&&!q.header&&!q.message&&!q.display&&!q.buttons){var K;if(K=lt(t.Pane,arguments,W,this))return K}Le("58"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Pane";var ne="zim display - Pane(): Please pass in a reference to a container with bounds set as first parameter";if(n(E))if(j.zdf)E=j.zdf.stage;else{$e(ne);return}else if(E.getBounds){if(n(E.getStage)){$e("zim display - Pane(): The container must have a stage property");return}}else{$e(ne);return}this.group=O;var F=V===!1?{}:t.getStyle(this.type,this.group,Z);n(l)&&(l=F.width!=null?F.width:"auto"),n(a)&&(a=F.height!=null?F.height:"auto"),n(q)&&(q=F.content!=null?F.content:" "),(typeof q=="string"||typeof q=="number")&&(q=new t.Label({text:q,size:F.size!=null?F.size:40,align:F.align!=null?F.align:"center",valign:F.valign!=null?F.valign:"center",color:F.color!=null?F.color:i,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group}).noMouse());var D=this.content=q;n(r)&&(r=F.backgroundColor!=null?F.backgroundColor:t.white),n(s)&&(s=F.draggable!=null?F.draggable:!1),n(c)&&(c=F.resets!=null?F.resets:!0),n(d)&&(d=F.modal!=null?F.modal:!0),n(C)&&(C=F.corner!=null?F.corner:20),n(k)&&(k=F.titleBar!=null?F.titleBar:null),n(p)&&(p=F.titleBarColor!=null?F.titleBarColor:null),n(m)&&(m=F.titleBarBackgroundColor!=null?F.titleBarBackgroundColor:null),n(S)&&(S=F.titleBarHeight!=null?F.titleBarHeight:null),n(T)&&(T=F.backdropColor!=null?F.backdropColor:"rgba(0,0,0,.2)"),n(h)&&(h=F.shadowColor!=null?F.shadowColor:"rgba(0,0,0,.3)"),n(w)&&(w=F.shadowBlur!=null?F.shadowBlur:20),n(A)&&(A=F.center!=null?F.center:!0),n(y)&&(y=F.displayClose!=null?F.displayClose:!0),s&&(y=!1),n(v)&&(v=F.backdropClose!=null?F.backdropClose:!0),n(x)&&(x=F.fadeTime!=null?F.fadeTime:0),n(_)&&(_=F.close!=null?F.close:!1),n(Y)&&(Y=F.closeColor!=null?F.closeColor:t.grey),n(B)&&(B=F.autoPadding!=null?F.autoPadding:70),n(b)&&(b=F.autoPaddingH!=null?F.autoPaddingH:B),n(X)&&(X=F.autoPaddingV!=null?F.autoPaddingV:B);var u=this.backdrop=new t.Shape({style:!1}),f=u.graphics;f.f(T),f.drawRect(-5e3,-5e3,1e4,1e4);var o=this;if(this.add=function(Q,G,ue,fe){var ye="obj, index, center, replace",H;return(H=lt(o.add,arguments,ye,o))?H:(n(ue)&&(ue=!0),n(fe)&&(fe=!0),typeof Q=="string"&&(Q=new Xr(Q,null,null,i).noMouse()),fe&&o.contentContainer.removeAllChildren(),ue?Q.center(o.contentContainer,G):Q.addTo(o.contentContainer,G),o)},D){var g=t.makeContent(D,l,t.dark),I=["header","message","text","display","buttons","config"];I.forEach(function(G){g[G]&&(o[G]=g[G])}),o.label=o.message,l=="auto"&&(l=g.width+b*2),a=="auto"&&(a=g.height+X*2)}var q=o.contentContainer=new t.Container(l,a);g&&o.add(g,null,!0),this.setBounds(-l/2,-a/2,l,a);var I=["header","message","text","display","buttons","config"];q&&I.forEach(function(Q){q[Q]&&(o[Q]=q[Q])}),o.label=o.message,o.container=E,u.on((mt?t.ACTIONEVENT=="mousedown":j.ACTIONEVENT=="mousedown")?"mousedown":"click",v?le:function(Q){Q.stopImmediatePropagation()});var R=new t.Dictionary(!0);function le(Q){o.dispatchEvent("closing"),setTimeout(function(){ie(),o.dispatchEvent("close")},10),Q.stopImmediatePropagation()}u.on("mousedown",function(Q){Q.stopImmediatePropagation()}),this.addChild(u),d||u.noMouse();var N;if(n(P))N=this.backing=new t.Rectangle({width:l,height:a,color:r,corner:C,style:!1});else{if(P.type=="Pattern"){var L=P;N=new t.Rectangle(l,a,r,null,null,C,null,null,null,!1),L.centerReg(N),L.setMask(N.shape)}else N=P;o.display=o.backing=N}if(y&&(N.cur("pointer"),N.on((mt?t.ACTIONEVENT=="mousedown":j.ACTIONEVENT=="mousedown")?"mousedown":"click",le)),h!=-1&&w>0&&(N.shadow=new Ne.Shadow(h,8,8,w)),N.on("click",function(Q){Q.stopImmediatePropagation()}),this.resetX,this.resetY,s){N.cur("pointer");var ee,z;N.on("mousedown",function(Q){isNaN(o.resetX)&&(o.resetX=o.x),isNaN(o.resetY)&&(o.resetY=o.y),ee=Q.stageX/t.scaX-o.x,z=Q.stageY/t.scaY-o.y,N.cur("pointer")}),N.on("pressmove",function(Q){var G=Ee(Q.stageX/t.scaX-ee,Q.stageY/t.scaY-z);o.x=G.x,o.y=G.y;for(var ue,fe=0;fe<o.numChildren;fe++)ue=o.getChildAt(fe),(ue.type=="TextArea"||ue.type=="Loader"||ue.type=="Tag")&&ue.resize();o.stage.update()}),this.on("pressup",function(){N.cur("pointer"),o.stage&&o.stage.update()})}if(N.centerReg(this),q&&q.center(this),!n(k)){typeof k=="string"&&(k=new t.Label(k,null,null,p));var $=o.titleBarLabel=k;n(S)&&(S=$.height*1.5),n(p)&&(p=t.black),n(m)&&(m="rgba(0,0,0,.2)"),o.titleBar=k=new t.Container(l,S,null,null,!1).centerReg(o).mov(0,-a/2+S/2),k.mouseEnabled=!1,k.mouseChildren=!1,o.titleBar.backing=new t.Rectangle(l,S,m,null,null,[C*.95,C*.95,0,0],null,null,null,!1).addTo(k),$.center(k).pos({x:Math.max(C/2,10),reg:!0})}_&&(_=o.close=new t.Shape(-40,-40,80,80,null,!1),_.graphics.f(Y).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg"),k?_.addTo(o).scaleTo(k,null,50).mov(l/2-Math.max(C/2,10)-_.width/2,-a/2+S/2).expand(40):_.addTo(o).sca(.3).mov(l/2-_.width-3,-a/2+_.height).expand(40),_.cur("pointer"),_.expand(),_.on((mt?t.ACTIONEVENT=="mousedown":j.ACTIONEVENT=="mousedown")?"mousedown":"click",le)),Object.defineProperty(o,"text",{get:function(){if(o.message){var Q=o.message.text==" "?"":o.message.text;return Q}else if(o.content.text){var Q=o.content.text==" "?"":o.content.text;return Q}},set:function(Q){o.message?o.message.text=Q:o.content.text&&(o.content.text=Q)}}),this._enabled=!0,Object.defineProperty(o,"enabled",{get:function(){return o._enabled},set:function(Q){It(o,Q)}}),this.hide=function(Q,G){return n(Q)||(o.closeParams=Q),ie(),G&&(o.dispatchEvent("close"),o.dispatchEvent("change")),o},this.on("removed",xe);function xe(){o.toggled=!1;var Q,G;for(G=0;G<o.numChildren;G++)if(Q=o.getChildAt(G),Q.type=="TextArea"||Q.type=="Loader"||Q.type=="Tag"){var ue={obj:Q,depth:o.getChildIndex(Q)};R.add(Q,ue)}for(G=o.numChildren-1;G>=0;G--)Q=o.getChildAt(G),(Q.type=="TextArea"||Q.type=="Loader"||Q.type=="Tag")&&o.removeChild(Q);if(!t.OPTIMIZE&&(mt||!j.OPTIMIZE)&&o.container.stage.update(),c&&(isNaN(o.resetX)||(o.x=o.resetX),isNaN(o.resetY)||(o.y=o.resetY)),o.zimAccessibility){var fe=o.zimAccessibility;fe.resize(o),ke?ke.focus():o.zimTabTag.nextSibling.focus(),setTimeout(function(){fe.talk("Pane has been closed.")},50)}}function ie(){x>0?o.animate({obj:{alpha:0},time:x,call:function(){Q(),o.dispatchEvent("fadedout")}}):Q();function Q(){o.container.removeChild(o),o.closeCall&&o.closeCall(o.closeParams),!t.OPTIMIZE&&(mt||!j.OPTIMIZE)&&o.container.stage.update(),c&&(isNaN(o.resetX)||(o.x=o.resetX),isNaN(o.resetY)||(o.y=o.resetY))}}var ke;this.show=function(Q,G){return n(Q)||(o.closeCall=Q),n(G)||(o.closeParams=G),A&&isNaN(o.resetX)&&(o.x=o.container.getBounds().width/2,o.y=o.container.getBounds().height/2),o.container.addChild(o),x>0?(o.alpha=0,o.animate({props:{alpha:1},time:x,call:function(){o.dispatchEvent("fadedin")}})):setTimeout(function(){o.container.stage&&o.container.stage.update()},10),o},this.on("added",U);function U(){for(var Q=0;Q<R.length;Q++)o.addChildAt(R.values[Q].obj,R.values[Q].depth);if(o.zimAccessibility){var G=o.zimAccessibility;setTimeout(function(){G.activatedObject&&(ke=G.activatedObject.zimTabTag)},50),G.resize(o),G.tabIndex=o.zimTabIndex}o.toggled=!0}function Ee(Q,G){return Q=Math.max(l/2,Math.min(o.container.getBounds().width-l/2,Q)),G=Math.max(a/2,Math.min(o.container.getBounds().height-a/2,G)),{x:Q,y:G}}this.toggle=function(Q){return Q===!0?o.show():Q===!1||o.container.contains(o)?o.hide():o.show(),o},V!==!1&&t.styleTransforms(this,F),this.clone=function(){var Q=o.contentContainer.x,G=o.contentContainer.y,ue=o.cloneProps(new t.Pane(t.copy(q),r,i,l,a,s,c,d,C,T,h,w,A,y,v,n(P)?null:P.clone(),x,o.container,k,p,m,S,_,Y,B,b,X,V,this.group,Z));return ue.contentContainer.x=Q,ue.contentContainer.y=G,ue}},t.extend(t.Pane,t.Container,"clone","zimContainer",!1),t.Panel=function(e,r,o,l,a,s,c,d,C,T,h,w,A,y,v,P,x,E,k,p,m,S,_,Y,B,b,X){var V="width, height, content, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, backgroundColor, borderColor, borderWidth, corner, close, closeColor, next, nextColor, extraButton, collapse, collapseColor, collapsed, align, shadowColor, shadowBlur, draggable, boundary, style, group, inherit",O;if(O=lt(t.Panel,arguments,V,this))return O;Le("57.7"),this.group=b;var Z=B===!1?{}:t.getStyle("Panel",this.group,X);n(e)&&(e=Z.width!=null?Z.width:250),n(r)&&(r=Z.height!=null?Z.height:300),this.zimContainer_constructor(e,r,null,null,!1),this.type="Panel",n(o)&&(o=Z.content!=null?Z.content:null);var W=this.content=o;n(l)&&(l=Z.titleBar!=null?Z.titleBar:"PANEL"),n(a)&&(a=Z.titleBarColor!=null?Z.titleBarColor:t.white),n(s)&&(s=Z.titleBarBackgroundColor!=null?Z.titleBarBackgroundColor:t.grey),n(c)&&(c=Z.titleBarHeight!=null?Z.titleBarHeight:30),n(d)&&(d=Z.backgroundColor!=null?Z.backgroundColor:t.lighter),n(C)&&(C=Z.borderColor!=null?Z.borderColor:t.pewter),n(T)&&(T=Z.borderWidth!=null?Z.borderWidth:null),C<0||T<0?C=T=null:C!=null&&T==null&&(T=1),n(h)&&(h=Z.corner!=null?Z.corner:5),n(p)&&(p=Z.align!=null?Z.align:"left"),n(m)&&(m=Z.shadowColor!=null?Z.shadowColor:"rgba(0,0,0,.3)"),n(S)&&(S=Z.shadowBlur!=null?Z.shadowBlur:14),n(_)&&(_=Z.draggable!=null?Z.draggable:!1),n(Y)&&(Y=Z.boundary!=null?Z.boundary:null),n(w)&&(w=Z.close!=null?Z.close:!1),n(A)&&(A=Z.closeColor!=null?Z.closeColor:n(a)?t.grey:a),n(y)&&(y=Z.next!=null?Z.next:t.vee(l)),n(v)&&(v=Z.nextColor!=null?Z.nextColor:n(a)?t.grey:a),Array.isArray(h)||(h=[h,h,h,h]),n(x)&&(x=Z.collapse!=null?Z.collapse:!1),n(E)&&(E=Z.collapseColor!=null?Z.collapseColor:n(a)?t.grey:a),n(k)&&(k=Z.collapsed!=null?Z.collapsed:!1);var K=this,ne=this.background=new t.Rectangle(e,r,d,C,T,h).addTo(this);m!=-1&&S>0&&(this.background.shadow=new Ne.Shadow(m,3,3,S));var F=l,D=t.Pick.choose(F),u=t.Pick.choose(a),f=t.Pick.choose(s),o=K.contentContainer=new t.Container(e,r-c).addTo(K).mov(0,c);typeof D=="string"&&(D=new t.Label({text:D,color:u,size:Z.size!=null?Z.size:20,bold:Z.bold!=null?Z.bold:!1,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group}));var g=K.titleBarLabel=D;n(f)&&(f="rgba(0,0,0,.2)"),K.titleBar=l=new t.Container(e,c,null,null,!1).loc(0,0,K);var q=K.titleBar.backing=new t.Rectangle(e+T,c,f,null,null,[h[0]*.95,h[1]*.95,0,0],!0,null,null,!1).center(l);if(l&&N(),K.label=D,K.text=D.text,w){var I=K.closeIcon=new t.Shape(-40,-40,80,80,null,!1);I.graphics.f(A).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg"),l?(I.centerReg(l).scaleTo(l,null,50),I.pos(Math.max(h[1]/2,15),null,!0)):I.addTo(K).sca(.3).mov(e/2-I.width-3,-r/2+w.height),I.expand(40),I.cur("pointer"),I.on((mt?t.ACTIONEVENT=="mousedown":j.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){var $=K.stage;K.removeFrom(),K.dispatchEvent("close"),$.update()})}if(this.add=function($,xe,ie,ke){var U="obj, index, center, replace",Ee;return(Ee=lt(K.add,arguments,U,K))?Ee:(ke&&K.contentContainer.removeAllChildren(),ie?$.center(K.contentContainer,xe):$.addTo(K.contentContainer,xe),K)},W){var R=t.makeContent(W,e),le=["header","message","text","display","buttons","config"];le.forEach(function($){R[$]&&(K[$]=R[$])}),K.label=K.message,K.add(R,null,!0)}this.nextPanel=function($,xe){var ie=n($)||n(F.array)?t.Pick.choose(F):F.array[$],ke=n($)||n(a.array)?t.Pick.choose(a):a.array[$],U=n($)||n(s.array)?t.Pick.choose(s):s.array[$],Ee=n($)||n(d.array)?t.Pick.choose(d):d.array[$],Q=n($)||n(C.array)?t.Pick.choose(C):C.array[$];typeof ie=="string"&&(ie=new t.Label({text:ie,color:ke,size:Z.size!=null?Z.size:20,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group})),K.label=ie,K.text=ie.text,g.removeFrom(),g=K.titleBarLabel=ie,N(),q.color=U,K.background.color=Ee,K.background.borderColor=Q,xe&&K.dispatchEvent("change"),!t.OPTIMIZE&&(mt||!j.OPTIMIZE)&&K.stage&&K.stage.update()};function N(){p=="right"?g.center(l).pos(Math.max(h[0]/2,10),null,!0):p=="center"||p=="middle"?g.center(l):g.center(l).loc(Math.max(h[0]/2,10)),g.mov(0,2)}if(_&&(l.cur("pointer"),l.on("mousedown",function(){K.drag({rect:Y,currentTarget:!0})}),l.on("pressup",function(){K.noDrag(!1)})),y>0){var L=K.nextIcon=new t.Shape(-20,-20,40,40,null,!1);L.graphics.f(a).p("AiJieIETCeIkTCfg"),L.centerReg(l).scaleTo(l,null,70).alp(.8).hov(1).expand(),L.pos(Math.max(h[1]/2,15),null,!0),I&&L.mov(-I.width-8),L.cur("pointer"),L.on((mt?t.ACTIONEVENT=="mousedown":j.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){K.nextPanel(),K.dispatchEvent("change")})}if(n(P)||(P=K.extraButton=new t.Button({label:"R",width:50,height:50,corner:5,group:"PanelExtra"}).scaleTo(l,null,70).centerReg(l).expand(),P.pos(Math.max(h[1]/2,15),null,!0),I&&P.mov(-I.width-8),L&&P.mov(-L.width-8)),x){z=k,K.collapse=function($){if(n($)&&($=!0),$==z)return K;$?(ee.rot(180),ne.visible=!1,o.visible=!1,z=!0,K.dispatchEvent("collapse")):(ee.rot(0),ne.visible=!0,o.visible=!0,z=!1,K.dispatchEvent("expand")),K.stage&&K.stage.update()},K.collapseEvent=K.titleBar.on("dblclick",function(){K.collapsed=!K.collapsed}),n(E)&&(E=t.grey);var ee=K.collapseIcon=new t.Triangle(90,90,90,t.faint,E,16);ee.centerReg(K).scaleTo(l,null,41).pos({x:e-Math.max(h[1]/2,15)-ee.width/2-4,y:c/2,reg:!0}).expand(40),P&&ee.mov(-P.width-8),I&&ee.mov(-I.width-8),L&&ee.mov(-L.width-8),ee.cur("pointer"),ee.expand();var z=!1;ee.on((mt?t.ACTIONEVENT=="mousedown":j.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){z?K.collapse(!1):K.collapse(!0)})}K.overlay=new t.Rectangle(e,r,null,null,null,h).alp(.3),Object.defineProperty(K,"panelHeight",{get:function(){return K.background.height},set:function($){ne.removeFrom(),ne=this.background=new t.Rectangle(e,$,d,C,T,h).addTo(this).bot(),m!=-1&&S>0&&(this.background.shadow=new Ne.Shadow(m,3,3,S)),K.setBounds(e,$),!t.OPTIMIZE&&(mt||!j.OPTIMIZE)&&K.stage&&K.stage.update()}}),Object.defineProperty(K,"collapsed",{get:function(){return z},set:function($){K.collapse&&K.collapse($)}}),this._enabled=!0,Object.defineProperty(K,"enabled",{get:function(){return K._enabled},set:function($){It(K,$),$?K.overlay.removeFrom():K.overlay.addTo(K),!t.OPTIMIZE&&(mt||!j.OPTIMIZE)&&K.stage&&K.stage.update()}}),k&&(k=!1,K.collapsed=!0),B!==!1&&t.styleTransforms(this,Z),this.clone=function(){return K.cloneProps(new t.Toggle(e,r,l?l.clone():"",a,s,c,d,C,T,h,w,A,y,v,P,x,E,K.collapsed,p,m,S,_,Y,B,this.group,X))},this.doDispose=function($,xe,ie){return x&&this.titleBar.off("dblclick",this.collapseEvent),ie||this.zimContainer_dispose(!0),!0}},t.extend(t.Panel,t.Container,["clone","dispose"],"zimContainer",!1),t.Panel.prototype.dispose=function(e){return this.doDispose(null,null,e)},t.Window=function(e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,x,E,k,p,m,S,_,Y,B,b,X,V,O,Z,W,K,ne,F,D,u,f,o,g,q,I,R,le,N,L,ee,z,$,xe){var ie="width, height, content, backgroundColor, borderColor, borderWidth, padding, corner, swipe, scrollBarActive, scrollBarDrag, scrollBarColor, scrollBarAlpha, scrollBarFade, scrollBarH, scrollBarV, slide, slideFactor, slideSnap, slideSnapDamp, interactive, shadowColor, shadowBlur, paddingH, paddingV, scrollWheel, damp, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, draggable, boundary, onTop, close, closeColor, cancelCurrentDrag, fullSize, fullSizeColor, resizeHandle, collapse, collapseColor, collapsed, optimize, resizeBoundary, resizeVisible, style, group, inherit",ke;if(ke=lt(t.Window,arguments,ie,this))return ke;Le("58.1"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Window",this.group=$;var U=z===!1?{}:t.getStyle(this.type,this.group,xe);n(e)&&(e=U.width!=null?U.width:300),n(r)&&(r=U.height!=null?U.height:200),n(l)&&(l=U.backgroundColor!=null?U.backgroundColor:t.dark);var Ee=a,Q=s;n(a)&&(a=U.borderColor!=null?U.borderColor:t.silver),n(s)&&(s=U.borderWidth!=null?U.borderWidth:1),n(c)&&(c=U.padding!=null?U.padding:0),n(d)&&(d=U.corner!=null?U.corner:0),n(C)&&(C=U.swipe!=null?U.swipe:!0),n(T)&&(T=U.scrollBarActive!=null?U.scrollBarActive:!0),n(h)&&(h=U.scrollBarDrag!=null?U.scrollBarDrag:!1),n(w)&&(w=U.scrollBarColor!=null?U.scrollBarColor:a),n(A)&&(A=U.scrollBarAlpha!=null?U.scrollBarAlpha:.3),n(y)&&(y=U.scrollBarFade!=null?U.scrollBarFade:!0),n(v)&&(v=U.scrollBarH!=null?U.scrollBarH:!0),n(P)&&(P=U.scrollBarV!=null?U.scrollBarV:!0),h&&(y=U.scrollBarFade!=null?U.scrollBarFade:!1),n(x)&&(x=U.slide!=null?U.slide:!0),n(E)&&(E=U.slideFactor!=null?U.slideFactor:.9),n(k)&&(k=U.slideSnap!=null?U.slideSnap:"vertical"),n(m)&&(m=U.interactive!=null?U.interactive:!0),n(S)&&(S=U.shadowColor!=null?U.shadowColor:"rgba(0,0,0,.3)"),n(_)&&(_=U.shadowBlur!=null?U.shadowBlur:20),n(B)&&(B=U.paddingV!=null?U.paddingV:c),n(Y)&&(Y=U.paddingH!=null?U.paddingH:c),n(b)&&(b=U.scrollWheel!=null?U.scrollWheel:!0),n(X)&&(X=U.damp!=null?U.damp:null),n(V)&&(V=U.titleBar!=null?U.titleBar:null),n(O)&&(O=U.titleBarColor!=null?U.titleBarColor:null),n(Z)&&(Z=U.titleBarBackgroundColor!=null?U.titleBarBackgroundColor:null),n(W)&&(W=U.titleBarHeight!=null?U.titleBarHeight:null),n(K)&&(K=U.draggable!=null?U.draggable:null),n(ne)&&(ne=U.boundary!=null?U.boundary:null),n(F)&&(F=U.onTop!=null?U.onTop:null),n(D)&&(D=U.close!=null?U.close:null),n(u)&&(u=U.closeColor!=null?U.closeColor:null),n(f)&&(f=U.cancelCurrentDrag!=null?U.cancelCurrentDrag:!1),n(o)&&(o=U.fullSize!=null?U.fullSize:null),n(g)&&(g=U.fullSizeColor!=null?U.fullSizeColor:null),n(q)&&(q=U.resizeHandle!=null?U.resizeHandle:null),n(I)&&(I=U.collapse!=null?U.collapse:!1),n(R)&&(R=U.collapseColor!=null?U.collapseColor:null),n(le)&&(le=U.collapsed!=null?U.collapsed:!1),n(N)&&(N=U.optimize!=null?U.optimize:!0),n(L)&&(L=U.resizeBoundary!=null?U.resizeBoundary:null),n(ee)&&(ee=U.resizeVisible!=null?U.resizeVisible:!1),V===!1&&(V=null),n(V)||(n(W)&&(W=30),r=r-W);var G=this;G.optimize=N,this.scrollX=this.scrollY=this.scrollXMax=this.scrollYMax=0;var ue=this.backing=new t.Shape({style:!1});this.addChild(ue);var fe=new Ne.Shape;fe.type="WindowBacking";var ye=fe.graphics;if(this.addChild(fe),i)var H=G.content=i;i=this.contentContainer=new t.Container({style:!1}),this.addChild(i),i.mask=fe;var re;if(!m)var pe=new Ne.Shape;if(s>0){var te=new Ne.Shape;this.addChild(te)}var ge=V?0:d,Ae=0;function ae(){G.setBounds(0,0,e,r),ue.graphics.c().f(l).rc(0,0,e,r,ge,ge,d,d),S!=-1&&_>0&&(ue.shadow=new Ne.Shadow(S,4,4,_)),s>0&&(d?te.graphics.c().s(a).ss(s,"square","miter").rc(0,0,e,r,ge,ge,d,d):te.graphics.c().s(a).ss(s,"square","miter").dr(0,0,e,r)),n(je)||(je.widthOnly=G.width+s,_e.widthOnly=G.width+s-1,G.setBounds(0,-W,G.width,r+W)),Ve&&(V?(Ve.pos({x:e-Math.max(d/2,10)-Ve.width/2,y:W/2,reg:!0}),_e.widthOnly=Ve.x-15,Ae=G.width-_e.width):Ve.pos(Math.max(d/2,10)/2,Ve.height/2,!0,!1,G)),Me&&(Me.pos({x:e-Math.max(d/2,10)-Me.width/2,y:W/2,reg:!0}),Ve&&Me.mov(-Ve.width-10),V&&(_e.widthOnly=Me.x-15),Ae=G.width-_e.width),nt&&(nt.pos({x:e-Math.max(d/2,10)-nt.width/2,y:W/2,reg:!0}),Ve&&nt.mov(-Ve.width-10),Me&&nt.mov(-Me.width-10),V&&(_e.widthOnly=nt.x-15),Ae=G.width-_e.width)}ae();var de=this.scrollBar={};if(de.color=w,de.size=6,de.minSize=de.size*2,de.spacing=3.5+s/2,de.margin=0,de.corner=de.size/2,de.showTime=.5,de.fadeTime=3,T){var se=de.horizontal=new t.Shape({style:!1}),Ie=se.graphics;se.alpha=A,this.addChild(se),h&&se.drag({localBoundary:!0});var Te=de.vertical=new t.Shape({style:!1}),ve=Te.graphics;Te.alpha=A,this.addChild(Te),h&&Te.drag({localBoundary:!0})}var J,Se,Be,Ye,Ke,at,me,Ge,Je,ce=!1;if(this.update=function(){T&&(Ie.clear(),ve.clear()),Ke=T?de.size+de.spacing*2:0,at=i.getBounds()?i.getBounds().width:0,me=i.getBounds()?i.getBounds().height:0,Be=v&&at>e-Y&&(T||C===!0||C=="auto"||C=="horizontal"),Ye=P&&me>r-B&&(T||C===!0||C=="auto"||C=="vertical"),G.scrollXMax=at+Y*2-e+(Ye?Ke+de.margin:0),G.scrollYMax=me+B*2-r+(Be?Ke+de.margin:0),ye.clear();var Ct=s/2,Ue=s/2,ft=e-(Ye&&T?de.size+de.spacing*2:0)-(Ye?0:s),Ht=r-(Be&&T?de.size+de.spacing*2:0)-(Be?0:s);ye.f("rgba(0,0,0,0)").rc(Ct,Ue,ft,Ht,ge,ge,Ye&&T?0:Math.max(0,d-s/2),Be&&T?0:Math.max(0,d-s/2)),fe.setBounds(G.getBounds().x,G.getBounds().y,G.getBounds().width,G.getBounds().height),t.expand(fe,0),m||(pe.graphics.c().f("red").dr(Ct,Ue,ft,Ht),i.hitArea=pe);var Wt=Math.max(d,Math.min(de.corner,de.spacing)),ln=Wt+s/2,jt=Wt+(Ye?Ke:0)+s/2,sn=Wt+s/2,vt=Wt+(Be?Ke:0)+s/2,Nt,zt;Be&&T&&(Nt=Math.max(de.minSize,(e-ln-jt)*(e-ln-jt)/(at+Y+de.margin)),Ie.f(de.color).rr(0,0,Nt,de.size,de.corner),se.x=ln,se.y=r-de.size-de.spacing,J=new t.Proportion(-G.scrollXMax,0,ln,e-Nt-jt,-1),h&&(se.setBounds(0,0,Nt,de.size),zt=new Ne.Rectangle(ln,se.y,e-Nt-ln-jt,0),se.dragBoundary(zt),se.proportion=new t.Proportion(zt.x,zt.x+zt.width,0,-G.scrollXMax),se.off("pressmove",Ge),Ge=se.on("pressmove",function(){G.dispatchEvent("scrolling"),pe&&(pe.x=-i.x,pe.y=-i.y),i.x=se.proportion.convert(se.x),ut()}))),Ye&&T&&(Nt=Math.max(de.minSize,(r-sn-vt)*(r-sn-vt)/(me+B+de.margin)),ve.f(de.color).rr(0,0,de.size,Nt,de.corner),Te.x=e-de.size-de.spacing,Te.y=sn,Se=new t.Proportion(-G.scrollYMax,0,sn,r-Nt-vt,-1),h&&(Te.setBounds(0,0,de.size,Nt),zt=new Ne.Rectangle(Te.x,sn,0,r-Nt-sn-vt),Te.dragBoundary(zt),Te.proportion=new t.Proportion(zt.y,zt.y+zt.height,0,-G.scrollYMax),Te.off("pressmove",Je),Je=Te.on("pressmove",function(){X&&(ce=!0),G.dispatchEvent("scrolling"),pe&&(pe.x=-i.x,pe.y=-i.y),X?tn=Te.proportion.convert(Te.y):i.y=Te.proportion.convert(Te.y),ut()}))),xt(),clearTimeout(G.d2Timeout),G.d2Timeout=setTimeout(function(){se&&se.proportion&&(i.x=se.proportion.convert(se.x)),Te&&Te.proportion&&(i.y=Te.proportion.convert(Te.y))},50),clearTimeout(G.dTimeout),G.dTimeout=setTimeout(function(){gt()},300),gt(),ut()},this.resize=function(Ct,Ue){n(Ct)&&(Ct=e),n(Ue)&&(Ue=r);var ft=Math.max(20,d*2);V&&(ft=Math.max(Ae,ft)),Ct<ft&&(Ct=ft),Ue<20&&(Ue=20),e=Ct,r=Ue,ae();for(var Ht=0;Ht<i.numChildren;Ht++){var Wt=i.getChildAt(Ht);Wt.type=="Wrapper"&&Qe(Wt)}return q&&it(),G.update(),tn=i.y,X&&an.immediate(tn),G.dispatchEvent("resize"),G},!n(V)){n(K)&&(K=!0),typeof V=="string"&&(V=new t.Label({text:V,color:O,size:U.size!=null?U.size:20,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group}));var oe=G.titleBarLabel=V;oe.noMouse(),n(Z)&&(Z="rgba(0,0,0,.2)"),G.titleBar=V=new t.Container(e,W,null,null,!1).centerReg(G).mov(0,-r/2-W/2);var _e=new t.Rectangle(V.width-1,V.height,red).alp(0).addTo(V);oe.setMask(_e,!0);var je=G.titleBar.backing=new t.Rectangle(e+s,W,Z,null,null,[d*.95,d*.95,0,0],!0,null,!1,!1).center(V);oe.center(V).pos({x:Math.max(d/2,Math.max(10,c)),reg:!0}),G.regX=0,G.regY=-W,G.setBounds(0,-W,e,r+W),K?(V.cur("pointer"),V.on("mousedown",function(){G.drag({rect:ne,currentTarget:!0,onTop:F})}),V.on("pressup",function(){G.noDrag(!1)})):V.on("mousedown",function(){})}if(D){n(u)&&(u=t.grey);var Ve=G.closeIcon=new t.Shape(-40,-40,80,80,null,!1);Ve.graphics.f(u).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg"),V?Ve.centerReg(G).scaleTo(V,null,50).pos({x:e-Math.max(d/2,10)-Ve.width/2,y:W/2,reg:!0}).expand(40):Ve.sca(.3).pos(Math.max(d/2,10)/2,Ve.height/2,!0,!1,G).expand(40),Ve.cur("pointer"),Ve.expand(),Ve.on((mt?t.ACTIONEVENT=="mousedown":j.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){var Ct=G.stage;G.removeFrom(),G.dispatchEvent("close"),Ct&&Ct.update()})}var De,Oe,Re,Ze,be,we;if(!n(V)){if(o){G.fullSize=function(Ct){if(n(Ct)&&(Ct=!0),Ct==Oe||!G.parent)return G;Ct?(Re=G.width,Ze=G.height,be=G.x,we=G.y,G.resize(G.parent.width,G.parent.height),G.x=0,G.y=0,Oe=!0,He.alpha=1,Me.getChildAt(0).alpha=.01,G.dispatchEvent("fullsize")):(G.resize(Re,Ze-V.height),G.x=be,G.y=we,Oe=!1,He.alpha=0,Me.getChildAt(0).alpha=1,G.dispatchEvent("originalsize")),G.stage&&G.stage.update()},n(g)&&(g=t.grey);var Me=G.fullSizeIcon=new t.Rectangle(80,80,t.faint,g,16),He=new t.Shape().s(g).ss(16).mt(-19.6,-20.6).lt(-19.6,-40).lt(40,-40).lt(40,20.7).lt(19.6,20.7).lt(19.6,40).lt(-40,40).lt(-40,-20.6).lt(-19.6,-20.6).lt(19.6,-20.6).lt(19.6,20.7).addTo(Me).mov(40,40).alp(0);Me.centerReg(G).scaleTo(V,null,42).pos({x:e-Math.max(d/2,10)-Me.width/2,y:W/2,reg:!0}).expand(40),Ve&&Me.mov(-Ve.width-10),Me.cur("pointer"),Me.expand(),Oe=!1,Re=e,Ze=r,be=G.x,we=G.y,Me.on((mt?t.ACTIONEVENT=="mousedown":j.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){Oe?G.fullSize(!1):G.fullSize(!0)})}var Xe=t.copy(G.getBounds(),!0);if(I){De=le,G.collapse=function(Ct){if(n(Ct)&&(Ct=!0),Ct==De)return G;Ct?(nt.rot(180),G.backing.visible=!1,G.contentContainer.visible=!1,fe.visible=!1,se&&(se.visible=!1),se&&(Te.visible=!1),te&&(te.visible=!1),De=!0,je.sha(S,5,5,_),q&&(G.resizeHandle.visible=!1),G.setBounds(Xe.x,Xe.y,Xe.width,V.height),G.dispatchEvent("collapse")):(nt.rot(0),G.backing.visible=!0,G.contentContainer.visible=!0,fe.visible=!0,se&&(se.visible=!0),se&&(Te.visible=!0),te&&(te.visible=!0),De=!1,je.sha(null),q&&(G.resizeHandle.visible=!0),G.setBounds(Xe.x,Xe.y,Xe.width,Xe.height),G.dispatchEvent("expand")),G.stage&&G.stage.update()},n(R)&&(R=t.grey);var nt=G.collapseIcon=new t.Triangle(90,90,90,t.faint,R,16);nt.centerReg(G).scaleTo(V,null,42).pos({x:e-Math.max(d/2,10)-nt.width/2,y:W/2,reg:!0}).expand(40),Ve&&nt.mov(-Ve.width-10),Me&&nt.mov(-Me.width-10),nt.cur("pointer"),nt.expand(),De=!1,Re=e,Ze=r,be=G.x,we=G.y,nt.on((mt?t.ACTIONEVENT=="mousedown":j.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){De?G.collapse(!1):G.collapse(!0)})}}if(q){var Ce=new _r().loc(0,0,G).mov(G.width,G.height-(G.titleBar?G.titleBar.height:0)),Fe=G.resizeHandle=new t.Rectangle(25,25,t.grey,t.white).alp(ee?.5:.01).centerReg().rot(45).loc(0,0,Ce).drag({boundary:L,localBoundary:!0});Fe.on("mouseover",function(){Fe.alp(.5),Fe.stage&&Fe.stage.update()}),Fe.on("mousedown",function(){Fe.pressing=!0}),Fe.on("mouseout",function(){Fe.pressing||(ee||Fe.alp(.01),Fe.stage&&Fe.stage.update())}),Fe.on("pressmove",function(){G.resize(Math.max(50,Ce.x+Fe.x),Math.max(50,Ce.y+Fe.y))}),Fe.on("pressup",function(){Fe.pressing=!1,ee||Fe.alp(.01),it(),Fe.stage&&Fe.stage.update()}),G.titleBar&&G.titleBar.on("pressup",it)}function it(Ct){G.resizeHandle.loc(0,0,Ce).top().mov(-Ce.x+G.width,-Ce.y+G.height-(G.titleBar?G.titleBar.height:0))}function Qe(Ct){Ct.align=="right"?(Ct.x=Y,Ct.resize(G.width-(Ye?de.size+de.spacing*2:Y)-Y*2)):(Ct.align=="center"||Ct.align=="middle",Ct.resize(G.width-(Ye?de.size+de.spacing*2:0)-Y*2)),Ct.alpha=Ct.wrapperLastAlpha}if(ae(),this.add=function(Ct,Ue,ft,Ht){var Wt="obj, index, center, replace",ln;if(ln=lt(G.add,arguments,Wt,G))return ln;var jt=Ct;if(!jt.getBounds()){$e("Window.add() - please add content with bounds set");return}return Kt(jt),n(Ue)&&(Ue=i.numChildren),Ht&&(Ue=0,G.removeAll()),ft?(jt.center(G).addTo(i,Ue).mov(0,W?W/2:0),i.height>G.height-(W||0)&&jt.loc(null,0),i.width>G.width&&jt.loc(0)):jt.addTo(i,Ue),jt.type=="Wrapper"&&(Te.alpha=0,v=!1,jt.wrapperLastAlpha=jt.alpha,jt.alpha=0,this.added(function(){Qe(jt),G.resize(),se.alpha=1,Te.alpha=1})),jt.x==0&&(jt.x=Y),jt.y==0&&(jt.y=B),G.update(),G},H){var tt=t.makeContent(H,e),ot=["header","message","text","display","buttons","config"];ot.forEach(function(Ct){tt[Ct]&&(G[Ct]=tt[Ct])}),G.label=G.message,G.add(tt,0,!0)}this.remove=function(Ct){return i.removeChild(Ct),G.update(),G},this.removeAll=function(){return i.removeAllChildren(),G.update(),G};function gt(Ct){n(re)&&(re=G.stage||j.zdf.stage),n(Ct)&&(Ct=!0),Ct?t.dragBoundary(i,new Ne.Rectangle(0,0,Be?-G.scrollXMax:0,Ye?-G.scrollYMax:0)):t.dragBoundary(i,new Ne.Rectangle(-1e3,-1e3,re.width+2e3,re.height+2e3))}var ze=!1;C&&i.on("mousedown",function(){ze||t.Ticker.add(Mt,i.stage),ze=!0,Be&&T&&y&&t.animate(se,{alpha:A},de.showTime),Ye&&T&&y&&t.animate(Te,{alpha:A},de.showTime)});function Mt(){tn=i.y,X&&an.immediate(tn),T&&xt()}function ut(){G.optimize&&(re=G.stage,i.loop(function(Ct){!Ct.hitTestBounds||!Ct.stage||(Ct.hitTestBounds(re)?(Ct.visible=!0,Ct.loop&&Ct.loop(function(Ue){Ue.hitTestBounds&&(Ue.hitTestBounds(re)?Ue.visible=!0:Ue.visible=!1)})):Ct.visible=!1)}))}function xt(){ut(),G.dispatchEvent("scrolling"),pe&&(pe.x=-i.x,pe.y=-i.y),Be&&T&&(se.x=J.convert(i.x)),Ye&&T&&(Te.y=Se.convert(i.y))}this.on("added",function(){_t(50)},null,!0);function _t(Ct){n(Ct)&&(Ct=100),Kt(G),C&&setTimeout(function(){i&&(t.drag({obj:i,currentTarget:!0,localBoundary:!0,slide:x,slideFactor:E,slideSnap:v&&(C===!0||C=="auto"||C=="horizontal")||P&&(C===!0||C=="auto"||C=="vertical")?k:!1}),i.removeAllEventListeners("slidestart"),i.on("slidestart",function(){G.dispatchEvent("slidestart")}),i.removeAllEventListeners("slidestop"),!T&&N&&(G.zDE&&i.off(G.zDE),G.zDE=i.on("mousedown",()=>{G.zTI&&t.Ticker.remove(ut)}),G.zME&&i.off(G.zME),G.zME=i.on("pressmove",ut),G.zSTA&&i.off(G.zSTA),G.zSTA=i.on("slidestart",function(){G.zTI=t.Ticker.add(ut)}),G.zSTO&&i.off(G.zSTO),G.zSTO=i.on("slidestop",function(Ue){G.zTI&&t.Ticker.remove(G.zTI)})),i.on("slidestop",function(Ue){x&&Et(Ue),G.dispatchEvent("slidestop")}),i.getBounds()&&i.getBounds().width>0&&gt())},Ct)}this.cancelCurrentDrag=function(){G.contentContainer&&G.contentContainer.noDrag(!1),setTimeout(function(){i&&(t.drag({obj:i,currentTarget:!0,localBoundary:!0,slide:x,slideFactor:E,slideSnap:v&&(C===!0||C=="auto"||C=="horizontal")||P&&(C===!0||C=="auto"||C=="vertical")?k:!1}),i.getBounds()&&i.getBounds().width>0&&gt())},300)};var Yt;this.added(function(Ct){re=Ct,Yt=re.on("stagemousemove",function(Ue){G.windowMouseX=Ue.stageX/t.scaX,G.windowMouseY=Ue.stageY/t.scaY})}),x?i.on("slidestop",Et):i.on("mousedown",function(){i.stage.on("stagemouseup",Et,null,!0)}),f&&(G.blurEvent=function(){G.cancelCurrentDrag(),Et()},document.WW.addEventListener("blur",G.blurEvent));function Et(){t.Ticker.remove(Mt),ze=!1,Be&&y&&T&&t.animate(se,{alpha:0},de.fadeTime),Ye&&y&&T&&t.animate(Te,{alpha:0},de.fadeTime)}var Jt=!1,qt,qe=0,ht=0,st=0,Ot=0,St=300,Vt=2;function Gt(){qt=Date.now(),t.Ticker.add(bt,i.stage)}function pt(){Jt||(G.dispatchEvent("hoverout"),Jt=!0),t.Ticker.remove(bt)}function bt(){if(!i.stage){Jt||(G.dispatchEvent("hoverout"),Jt=!0),t.Ticker.remove(bt);return}Math.abs(qe-G.windowMouseX)>Vt||Math.abs(ht-G.windowMouseY)>Vt?(Jt||(G.dispatchEvent("hoverout"),Jt=!0),qt=Date.now(),qe=G.windowMouseX,ht=G.windowMouseY):Date.now()-qt>St&&((Math.abs(st-G.windowMouseX)>Vt||Math.abs(Ot-G.windowMouseY)>Vt)&&(G.contentMouse=i.globalToLocal(G.windowMouseX,G.windowMouseY),G.dispatchEvent("hoverover"),st=G.windowMouseX,Ot=G.windowMouseY,Jt=!1),qt=Date.now())}if(m){var Zt,Xt;i.on("mousedown",function(Ct){re=Ct.target.stage,Zt=Ct.stageX/t.scaX,Xt=Date.now()}),i.on("click",function(Ct){Date.now()-Xt<600&&Math.abs(Ct.stageX/t.scaX-Zt)<5&&(G.contentMouse=i.globalToLocal(Ct.stageX/t.scaX,Ct.stageY/t.scaY),G.dispatchEvent("select"))}),i.on("mouseover",Gt),i.on("mouseout",pt)}var tn=G.scrollY;G.scrollWindow=function(Ue){if(Ye&&G.stage&&G.hitTestPoint(G.windowMouseX,G.windowMouseY)&&G.contains(G.stage.getObjectUnderPoint(G.windowMouseX*t.scaX,G.windowMouseY*t.scaY))){n(Ue)&&(Ue=event);var ft=Ue.detail?Ue.detail*-19:Ue.wheelDelta;n(ft)&&(ft=Ue.deltaY*-19),tn+=ft,tn=Math.max(-G.scrollYMax,Math.min(0,tn)),X||(G.scrollY=tn,i.stage.update()),ce=!1}N&&ut()},b&&(j.addEventListener("mousewheel",G.scrollWindow),j.addEventListener("wheel",G.scrollWindow),j.addEventListener("DOMMouseScroll",G.scrollWindow));var fn=!1,an;function Kt(Ct){X&&!fn&&Ct.stage&&(fn=!0,an=new t.Damp(G.scrollY,X),G.dampTicker=t.Ticker.add(function(){if(!ze){if(G.scrollY!=null&&tn!=null&&G.scrollY!=tn&&Math.round(G.scrollY)==Math.round(tn)){ce=!1;return}n(tn)||(i.y=an.convert(tn)),ce||xt()}},Ct.stage))}this._enabled=!0,Object.defineProperty(G,"enabled",{get:function(){return G._enabled},set:function(Ct){Ct?_t():(clearTimeout(G.dTimeout),t.noDrag(i)),It(G,Ct)}}),this._scrollEnabled=!0,Object.defineProperty(G,"scrollEnabled",{get:function(){return G._scrollEnabled},set:function(Ct){Ct?(_t(),h&&(Ge&&(se.mouseEnabled=!0),Je&&(Te.mouseEnabled=!0)),j.addEventListener("mousewheel",G.scrollWindow),j.addEventListener("wheel",G.scrollWindow),j.addEventListener("DOMMouseScroll",G.scrollWindow)):(clearTimeout(G.dTimeout),t.noDrag(i),h&&(Ge&&(se.mouseEnabled=!1),Je&&(Te.mouseEnabled=!1)),j.removeEventListener("mousewheel",G.scrollWindow),j.removeEventListener("wheel",G.scrollWindow),j.removeEventListener("DOMMouseScroll",G.scrollWindow)),G._scrollEnabled=Ct}}),Object.defineProperty(G,"scrollX",{get:function(){return i.x},set:function(Ct){i.x=Ct,clearTimeout(G.d2Timeout),i.zimDragImmediate&&i.zimDragImmediate(i.x,i.y),xt()}}),Object.defineProperty(G,"scrollY",{get:function(){return i.y},set:function(Ct){i.y=Ct,i.y=tn=Ct,X&&an.immediate(tn),clearTimeout(G.d2Timeout),i.zimDragImmediate&&i.zimDragImmediate(i.x,i.y),xt()}}),Object.defineProperty(G,"backgroundColor",{get:function(){return l},set:function(Ct){l=Ct,ae()}}),Object.defineProperty(G,"fullSized",{get:function(){return Oe},set:function(Ct){G.fullSize&&G.fullSize(Ct)}}),Object.defineProperty(G,"collapsed",{get:function(){return De},set:function(Ct){G.collapse&&G.collapse(Ct)}}),le&&(De=!1,G.collapsed=!0),G.titleBar&&(G.collapseEvent=G.titleBar.on("dblclick",function(){G.collapsed=!G.collapsed})),z!==!1&&t.styleTransforms(this,U),this.clone=function(Ct){n(Ct)&&(Ct=!0);var Ue=G.cloneProps(new t.Window(e,r,null,l,Ee,Q,c,d,C,T,h,de.color,A,y,v,P,x,E,k,p,m,S,_,Y,B,V,O,Z,W,K,ne,F,D,u,f,o,g,q,I,R,le,N,L,ee,z,$,xe));return Ct&&(G.contentContainer.cloneChildren(Ue.contentContainer),Ue.update()),Ue},this.doDispose=function(Ct,Ue,ft){return b&&(j.removeEventListener("mousewheel",G.scrollWindow),j.removeEventListener("wheel",G.scrollWindow),j.removeEventListener("DOMMouseScroll",G.scrollWindow)),i&&(G.zDE&&i.off(G.zDE),G.zME&&i.off(G.zME),G.zSTA&&i.off(G.zSTA),G.zSTO&&i.off(G.zSTO),G.zTI&&t.Ticker.remove(G.zTI)),G.titleBar&&G.titleBar.removeAllEventListeners(),Yt&&re&&re.off("stagemousemove",Yt),G.resizeHandle&&G.resizeHandle.removeAllEventListeners(),G.blurEvent&&j.removeEventListener("blur",G.blurEvent),typeof bt<"u"&&t.Ticker.remove(bt),n(Mt)||t.Ticker.remove(Mt),ft||this.zimContainer_dispose(!0),i=G.contentContainer=null,!0}},t.extend(t.Window,t.Container,["clone","dispose"],"zimContainer",!1),t.Window.prototype.dispose=function(e){return this.doDispose(null,null,e)},t.Page=function(e,r,i,l,a,s,c,d,C,T,h){var w="width, height, color, color2, vertical, pattern, scalePattern, cache, style, group, inherit",A;if(A=lt(t.Page,arguments,w,this))return A;Le("58.3"),this.group=T;var y=C===!1?{}:t.getStyle("Page",this.group,h);n(e)&&(e=y.width!=null?y.width:j.zdf.width),n(r)&&(r=y.height!=null?y.height:j.zdf.height),this.zimContainer_constructor(0,0,e,r,!1),this.type="Page";var v=this;n(a)&&(a=y.vertical!=null?y.vertical:!0),n(i)&&(i=y.color!=null?y.color:t.light),n(l)&&(l=y.color2!=null?y.color2:null),n(s)&&(s=y.pattern!=null?y.pattern:null),n(c)&&(c=y.scalePattern!=null?y.scalePattern:"fill"),n(d)&&(d=y.cache!=null?y.cache:!1),n(l)||(i=new t.GradientColor([i,l],[0,1],0,0,a?0:e,a?r:0),l=null);var P=this.backing=new t.Rectangle({width:e,height:r,color:i,style:!1}).addTo(this);n(d)&&(!n(l)||!n(s))&&(d=!0),d&&P.cache(),n(s)||(this.pattern=s.addTo(this),c&&s.scaleTo(this,100,100,c).center(this),d&&s.cache()),Object.defineProperty(v,"color",{get:function(){return i},set:function(x){n(x)&&(x=t.black),i=x,v.backing.color=x}}),C!==!1&&t.styleTransforms(this,y),this.clone=function(x){n(x)&&(x=!1),i.type&&(l=null);var E=v.cloneProps(new t.Page(e,r,i,l,a,s,c,d,C,T,h));return x&&v.cloneChildren(E),E}},t.extend(t.Page,t.Container,["clone"],"zimContainer",!1),t.Layer=function(e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,x,E,k,p,m,S,_,Y,B,b,X,V,O,Z){var W="width, height, titleBar, titleBarContainer, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, color, rollColor, selectedColor, selectedRollColor, borderWidth, borderColor, dashed, transformObject, titleBarWidth, titleBarHeight, titleBarX, titleBarY, titleBarDraggable, close, closeColor, closeBackgroundColor, closeIndicatorColor, anchor, onTop, style, group, inherit",K;if(K=lt(t.Layer,arguments,W,this))return K;Le("58.5"),this.group=O;var ne=V===!1?{}:t.getStyle("Layer",this.group,Z);n(e)&&(e=ne.width!=null?ne.width:500),n(r)&&(r=ne.height!=null?ne.height:500),this.zimContainer_constructor(0,0,e,r,!1),this.type="Layer";var F=this;F.distX=40,F.distY=0,n(i)&&(i=ne.titleBar!=null?ne.titleBar:"LAYER");var D=i,u=i,f=!0;n(a)&&(a=ne.backgroundColor!=null?ne.backgroundColor:t.lighter),n(s)&&(s=ne.rollBackgroundColor!=null?ne.rollBackgroundColor:t.white),n(c)&&(c=ne.selectedBackgroundColor!=null?ne.selectedBackgroundColor:t.granite),n(C)&&(C=ne.color!=null?ne.color:t.granite),n(T)&&(T=ne.rollColor!=null?ne.rollColor:t.granite),n(h)&&(h=ne.selectedColor!=null?ne.selectedColor:t.moon),n(A)&&(A=ne.borderWidth!=null?ne.borderWidth:1),n(y)&&(y=ne.borderColor!=null?ne.borderColor:a),(y<0||A<0)&&(y=A=null),n(v)&&(v=ne.dashed!=null?ne.dashed:!0),n(P)&&(P=ne.titleBar!=null?ne.titleBar:null),n(x)&&(x=ne.titleBarWidth!=null?ne.titleBarWidth:100);var o=x;if(n(E)&&(E=ne.titleBarHeight!=null?ne.titleBarHeight:40),n(k)&&(k=ne.titleBarX!=null?ne.titleBarX:null),n(p)&&(p=ne.titleBarY!=null?ne.titleBarY:null),n(m)&&(m=ne.titleBarDraggable!=null?ne.titleBarDraggable:!0),n(S)&&(S=ne.close!=null?ne.close:!0),n(_)&&(_=ne.closeColor!=null?ne.closeColor:c),n(Y)&&(Y=ne.closeBackgroundColor!=null?ne.closeBackgroundColor:c),n(B)&&(B=ne.closeIndicatorColor!=null?ne.closeIndicatorColor:h),n(b)&&(b=ne.anchor!=null?ne.anchor:!0),n(X)&&(X=ne.onTop!=null?ne.onTop:!0),m||(b=!1),F.anchor=b,S&&(x+=30),P=t.merge({borderColor:c},P,{onTop:X,events:!0,visible:!1,ghostColor:y,ghostWidth:A,ghostDashed:v,ghostHidden:!0}),n(l)&&(l=ne.titleBarContainer!=null?ne.titleBarContainer:null),n(l))if(j.zdf)l=j.zdf.stage;else{$e("zim Layer(): Please pass in a reference to a container with bounds set.");return}F.active=!1,F.turnOff=function(){F.active=!1,S&&(F.checkBox.visible=!1),F.transformControls.remove(),F.mouseChildren=!0,F.button.backgroundColor=a,F.button.rollBackgroundColor=s,F.button.color=C,F.button.rollColor=C,F.transformControls.allowToggleOff(),F.resizeChildren&&F.resizeChildren()},F.turnOn=function(){F.active=!0,S&&(F.checkBox.visible=!0,F.checkBox.checked=!0),F.button.backgroundColor=c,F.button.rollBackgroundColor=c,F.button.color=h,F.button.rollColor=h,F.mouseChildren=!1,F.transformControls.add(),F.transformControls.allowToggleOn()};var g;F.titleBarPos=function(R,le){if(F.titleBar)return F.titleBar.pos?(F.titleBar.pos(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9]),g.update()):(F.distX=R,F.distY=le),f=!1,F};var q=F.visible;F.visible=!1;var I=Tt();this.added(function(R){g=R,F.transform(P),A>=0&&F.transformControls.hideGhost(),setTimeout(function(){function le(){return F.localToLocal(0,0,l)}F.visible=q,A>=0&&setTimeout(function(){F.transformControls.showGhost(),F.stage&&F.stage.update()},200),g=R;var N=F.titleBar=new t.Container(x,E).reg(0,E).loc(F,null,l).mov(F.distX,F.distY);m&&N.drag({all:!0,boundary:new t.Boundary(0,E,l.width-x,l.height-E),localBoundary:!0}),(F.distX!=40||F.distY!=0)&&N.pos(F.distX,F.distY),S&&(F.checkBox=new t.CheckBox({borderColor:_,backgroundColor:Y,indicatorColor:B,size:20,startChecked:!0}).center(N).pos(0,null,!0).change(function(){F.turnOff(),F.dispatchEvent("transformhide")}),F.checkBox.visible=!1),N.mouseChildren=!0,N.layer=F,F.resetTitleBar=function(){F.distX=40,F.distY=0,f=!0,F.move(!0),F.stage&&F.stage.update()},(typeof u=="string"||typeof u=="number")&&(u=new t.Label({text:u,color:C,rollColor:T,size:ne.size!=null?ne.size:18,group:this.group})),F.label=u,F.label.center(N),F.button=new t.Button({shadowBlur:-1,width:o,height:E-1,label:F.label,color:C,rollColor:T,backgroundColor:a,rollBackgroundColor:s,corner:ne.corner!=null?ne.corner:0,inherit:t.copy(ne)}).addTo(N),F.button.on("mousedown",function(){l.loop(function(U){U&&U!=N&&U.layer&&U.layer.turnOff&&U.layer.active&&U.layer.turnOff()}),F.active||(F.turnOn(),F.dispatchEvent("transformshow")),N.top()}),F.button.on("pressmove",function(){L()}),F.button.on("pressup",function(){L(!0);var U=F.localToLocal(0,0,l);F.distX=N.x-U.x,F.distY=N.y-U.y,N.top(),!z()&&m&&(U=F.localToGlobal(0,0),F.button.hitTestPoint(U.x,U.y)&&F.resetTitleBar())});function L(U){if(f&&m){var Ee=l.localToLocal(N.x-F.distX,N.y-F.distY,F.parent),Q=F.localToLocal(F.regX,F.regY,F.parent),G=F.localToLocal(0,0,F.parent);F.x=Ee.x+(Q.x-G.x),F.y=Ee.y+(Q.y-G.y),F.transformControls.resize(U),ee(F),F.stage&&F.stage.update()}}function ee(U){U.loop(function(Ee){Ee.type=="Layer"&&(F.titleBarDraggable&&Ee.move(),Ee.transformControls.ghost&&Ee.transformControls.resize(),ee(Ee))})}F.button.on("dblclick",function(){m&&F.resetTitleBar()}),F.turnOff(),F.on("transformed",function(U){(U.transformType=="move"||U.transformType=="size"||U.transformType=="stretch"||U.transformType=="rotate")&&(m&&F.move(),ee(F))});function z(){if(N.x==0||N.y==N.height||N.x==l.width-N.width||N.y==l.height)return!0}F.move=function(U){!U&&!f&&F.anchor&&z()||(N.loc(le()).mov(F.distX,F.distY),N.x<0&&(f=!1,N.x=0),N.y<N.height&&(f=!1,N.y=N.height),N.x>l.width-N.width&&(f=!1,N.x=l.width-N.width),N.y>l.height&&(f=!1,N.y=l.height),F.anchor||(f=!0))},F.on("transformhide",function(){F.turnOff(),l.loop(function(U){U&&U!=N&&U.layer&&U.layer.turnOff&&U.layer.active&&U.layer.turnOff()})}),F.resizeChildren=function(U){F.transformControls.resize(U),F.loop(function(Ee){Ee.transformControls&&(Ee.transformControls.visible&&Ee.transformControls.hide(),Ee.type=="Layer"?Ee.resizeChildren():Ee.transformControls.resize())})},F.resize=function(U){return F.move(),F.resizeChildren(U),F},F.toggled=!1;function $(){F.toggled?(l.loop(function(U){U&&U!=N&&U.layer&&U.layer.turnOff&&U.layer.active&&U.layer.turnOff()}),F.turnOn(),F.dispatchEvent("transformshow")):(N.top(),F.turnOff(),l.loop(function(U){U&&U!=N&&U.layer&&U.layer.turnOff&&U.layer.active&&U.layer.turnOff()}),F.dispatchEvent("transformhide")),F.stage&&F.stage.update()}if(F.toggle=function(U){return n(U)?F.toggled=!F.toggled:F.toggled=U,$(),F},Object.defineProperty(F,"titleBarDraggable",{get:function(){return m},set:function(U){m=U,m?N.drag({all:!0,boundary:t.Boundary(0,40,l.width-x,l.height-E),localBoundary:!0}):N.noDrag(!1)}}),F.stageUpEvent=g.on("stagemouseup",function(){F.transformControls.visible&&N.top()}),!n(k)||!n(p)){f=!1;var xe=n(k)?N.x:k,ie=n(p)?N.y-E:p;F.titleBarStartX=k,F.titleBarStartY=p,F.titleBarPos(xe,ie);var ke=F.parent.localToLocal(F.x,F.y,l);F.distX=N.x-ke.x,F.distY=N.y-ke.y}},50)},I=="s"?.05:50),V!==!1&&t.styleTransforms(this,ne),this.clone=function(){return F.cloneProps(new t.Layer(e,r,D,l,a,s,c,d,C,T,h,w,A,y,v,P,o,E,k,p,m,S,_,Y,B,b,X,V,this.group,Z))},this.dispose=function(R,le,N){return F.stageUpEvent&&g.off("stagemouseup",F.stageUpEvent),l&&l.loop(function(L){L.layer=null}),F.transformControls.dispose(),F.transformControls=null,N||this.zimContainer_dispose(!0),F.titleBar.layer=null,F.titleBar.dispose(),F.checkBox=F.button=null,i=F.titleBar=P=null,!0}},t.extend(t.Layer,t.Container,["clone","dispose"],"zimContainer",!1),t.Waiter=function(e,r,i,l,a,s,c,d,C,T,h){var w="container, speed, foregroundColor, backgroundColor, corner, shadowColor, shadowBlur, fadeTime, style, group, inherit",A;if(A=lt(t.Waiter,arguments,w,this))return A;Le("59"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Waiter",this.group=T;var y=C===!1?{}:t.getStyle(this.type,this.group,h),v=Tt(r);n(r)&&(r=y.speed!=null?y.speed:v=="s"?.6:600),n(i)&&(i=y.foregroundColor!=null?y.foregroundColor:t.white),n(l)&&(l=y.backgroundColor!=null?y.backgroundColor:"orange"),n(a)&&(a=y.corner!=null?y.corner:16),n(s)&&(s=y.shadowColor!=null?y.shadowColor:"rgba(0,0,0,.3)"),n(c)&&(c=y.shadowBlur!=null?y.shadowBlur:14),n(d)&&(d=y.fadeTime!=null?y.fadeTime:0);var P=40,x=3,E=P*.6/2,k=(P-E*2)/2,p=x*(E*2+k)+k;this.setBounds(-p/2,-P/2,p,P);var m=this,S,_=this.display=new t.Shape({style:!1});this.addChild(_),_.setBounds(0,0,p,P),_.regX=p/2,_.regY=P/2;var Y=_.graphics;Y.f(l);var B=a;Array.isArray(B)||(B=[a,a,a,a]),Y.rc(0,0,p,P,B[0],B[1],B[2],B[3]),s!=-1&&c>0&&(_.shadow=new Ne.Shadow(s,3,3,c)),_.on("click",function(W){W.stopImmediatePropagation()});var b=new t.Container({style:!1});this.addChild(b);for(var X,V=0;V<x;V++)X=new Ne.Shape,X.graphics.f(i).dc(0,0,E),X.x=(V-(x-1)/2)*(E*2+k),b.addChild(X),X.cache(-E,-E,E*2,E*2),X.alpha=0;this.hide=function(){d>0?m.animate({obj:{alpha:0},time:d,call:W}):W();function W(){if(m.parent&&m.parent.removeChild(m),S=m.stage,S&&S.update(),m.zimAccessibility){var K=m.zimAccessibility;K.resize(m),O?O.focus():m.zimTabTag.nextSibling.focus(),setTimeout(function(){K.talk("Waiter has finished.")},50)}}return m.toggled=!1,m};var O,Z=[];this.show=function(){var W="zim display - Waiter(): Please pass in a reference to a container with bounds set as first parameter to Waiter";if(n(e))if(j.zdf)e=j.zdf.stage;else{$e(W);return}else if(e.getBounds){if(n(e.stage)){$e("zim display - Waiter(): The container must have a stage property");return}}else{$e(W);return}for(var K,ne=0,F=r*(v=="s"?1e3:1),D=0;D<b.numChildren;D++)b&&Z.push(setTimeout(function(){K=b.getChildAt(ne),Ne.Tween.get(K,{loop:!0}).to({alpha:1},F/x/2).wait(F/x).to({alpha:0},F/x).wait(F-F/x-F/x/2),ne++},D*F/x));if(m.ticker=Ne.Ticker.on("tick",function(){e.stage.update()}),m.x=e.getBounds().width/2,m.y=e.getBounds().height/2,e.addChild(m),d>0&&(m.alpha=0,m.animate({alpha:1},d)),m.zimAccessibility){var u=m.zimAccessibility;setTimeout(function(){u.activatedObject&&(O=u.activatedObject.zimTabTag)},50),u.resize(m),u.talk(m.zimTabTag.getAttribute("aria-label"))}return m.toggled=!0,m},m.toggle=function(W){return W===!0?m.show():W===!1||m.parent?m.hide():m.show(),m},C!==!1&&t.styleTransforms(this,y),this.clone=function(){return m.cloneProps(new t.Waiter(e,r,i,l,a,s,c,d,C,this.group,h))},this.dispose=function(W,K,ne){m.ticker&&Ne.Ticker.off("tick",m.ticker),Ne.Tween.removeTweens(m),m.removeFrom();for(var F=0;F<b.numChildren;F++){var D=b.getChildAt(F);clearInterval(Z[F]),Ne.Tween.removeTweens(D)}return ne||this.zimContainer_dispose(!0),!0}},t.extend(t.Waiter,t.Container,["clone","dispose"],"zimContainer",!1),t.ProgressBar=function(e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,x,E,k,p,m,S){var _="barType, foregroundColor, backgroundColor, borderColor, borderWidth, padding, label, color, labelPosition, percentage, corner, shadowColor, shadowBlur, backing, delay, fastClose, container, autoHide, width, style, group, inherit",Y;if(Y=lt(t.ProgressBar,arguments,_,this))return Y;Le("59.5"),this.zimContainer_constructor(null,null,null,null,!1),this.type="ProgressBar",this.group=m;var B=p===!1?{}:t.getStyle(this.type,this.group,S);n(r)&&(r=B.foregroundColor!=null?B.foregroundColor:t.green),n(i)&&(i=B.backgroundColor!=null?B.backgroundColor:t.charcoal),n(l)&&(l=B.borderColor!=null?B.borderColor:i),n(a)&&(a=B.borderWidth!=null?B.borderWidth:null),n(C)&&(C=B.labelPosition!=null?B.labelPosition:"bottom"),n(e)&&(e=B.barType!=null?B.barType:"circle"),n(s)&&(s=B.padding!=null?B.padding:e=="circle"?2:-.5),n(h)&&(h=B.corner!=null?B.corner:15),n(w)&&(w=B.shadowColor!=null?B.shadowColor:"rgba(0,0,0,.3)"),n(A)&&(A=B.shadowBlur!=null?B.shadowBlur:14),n(y)&&(y=B.backing!=null?B.backing.clone():null),n(P)&&(P=B.fastClose!=null?B.fastClose:!0),l<0||a<0?l=a=null:l!=null&&a==null&&(e=="circle"?a=10:a=2);var b=Tt(v);n(v)&&(v=B.delay!=null?B.delay:b=="s"?.1:100),n(E)&&(E=B.autoHide!=null?B.autoHide:!0),n(c)&&(c=B.label!=null?B.label:null),n(d)&&(d=B.color!=null?B.color:r),n(k)&&(k=B.width!=null?B.width:e=="circle"?40:200),(typeof c=="string"||typeof c=="number")&&(c=new t.Label({text:c,color:d,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group})),!n(T)&&n(c)&&(c=new t.Label("")),this.label=c;var X=30,V=this,O=0;V.visible=!1,setTimeout(function(){V.visible=!0,V.stage&&V.stage.update()},v);var Z;if(e=="circle")k=k/2,y=this.backing=new t.Circle(k,"rgba(0,0,0,0)",i,a,null,null,null,null,!1).addTo(V),Z=this.bar=new t.Shape({style:!1}).addTo(V).loc(y.x,y.y).rot(-90);else{if(w!=-1&&A>0){var W=new t.Rectangle(k-2,X-2,i,null,null,h,null,null,null,!1).addTo(this);W.shadow=new Ne.Shadow(w,3,3,A)}y=D(y);var K=h;Array.isArray(K)||(K=[h,h,h,h]);var ne=(s+a/2)*1.2;Z=this.bar=new t.Rectangle(k-(s+a/2)*1.8,X-(s+a/2)*1.8,r,null,null,[K[0]-ne,K[1]-ne,K[2]-ne,K[3]-ne],null,null,null,!1).center(this);var F=this.mask=new t.Rectangle(k-(s+a/2)*1.8,X-(s+a/2)*1.8,null,null,null,null,null,null,null,!1).center(this).alp(0).sca(0,1);Z.setMask(F)}function D(g){var q;if(V.backing?(q=V.getChildIndex(V.backing),V.removeChild(V.backing)):q=V.numChildren,V.border&&V.removeChild(V.border),!n(g)&&g.type=="Pattern"){var I=g;g=V.backing=new t.Rectangle(k,X,i,null,null,h,null,null,null,!1).addTo(V,q),g.pattern=I,I.center(g),I.setMask(g.shape),a&&(V.border=new t.Rectangle(k,X,"rgba(0,0,0,0)",l,a,h,null,null,null,!1).addTo(V,q+1))}else g=V.backing=n(g)?new t.Rectangle(k,X,i,l,a,h,null,null,null,!1).addTo(V,q):y.addTo(V,q);return g}V.setBacking=function(g){D(g),V.stage&&V.stage.update()},y.on("click",function(g){g.stopImmediatePropagation()}),n(c)||(c.scaleX=c.scaleY=.8,c.startText=c.text,n(T)||(c.text=c.startText+"  0%"),c.center(V),C=="above"?c.y-=60:c.y+=60,c.alpha=.8),this.hide=function(){var g=V.stage;if(V.parent&&V.parent.removeChild(V),V.backing.type=="Pattern"&&V.backing.pauseInterval&&V.backing.pauseInterval(),g&&g.update(),V.zimAccessibility){var q=V.zimAccessibility;q.resize(V),u?u.focus():V.zimTabTag.nextSibling.focus(),setTimeout(function(){q.talk("Progress Bar has finished.")},50)}return V.toggled=!1,V};var u;this.show=function(){var g="zim display - ProgressBar(): Please pass in a reference to a container with bounds set as first parameter of the ProgressBar";if(n(x))if(j.zdf)x=j.zdf.stage;else{$e(g);return}else if(x.getBounds){if(n(x.stage)){$e("zim display - Waiter(): The container must have a stage property");return}}else{$e(g);return}if(V.timeOut&&clearTimeout(V.timeOut),f(0),V.zimActiveLoader&&V.zimActiveLoader.on("progress",function(I){O=I.progress*100,f(O)}),V.center(x),V.backing.type=="Pattern"&&V.backing.pauseInterval&&V.backing.pauseInterval(!1),V.zimAccessibility){var q=V.zimAccessibility;setTimeout(function(){q.activatedObject&&(u=q.activatedObject.zimTabTag)},50),q.resize(V),q.talk(V.zimTabTag.getAttribute("aria-label"))}return V.toggled=!0,V},V.toggle=function(g){return g===!0?V.show():g===!1||V.parent?V.hide():V.show(),V},V.run=function(g,q){n(q)||(E=q),n(g)&&(g=b=="s"?3:3e3),kt(g,b);var I=g*(b=="s"?1e3:1);V.runInterval&&clearInterval(V.runInterval),V.percent=0;var R=Date.now();return V.runInterval=setInterval(function(){V.percent=(Date.now()-R)/I*100,V.percent>=100&&(V.percent=100,clearInterval(V.runInterval))},30),V},V.dispatched=!1;function f(g){e=="circle"?Z.graphics.c().mt(0,0).s(r).ss(a-s*2+.5).a(0,0,k,0,360*g/100*Math.PI/180):(F.sca(g/100,1),Z.setMask(F)),n(T)||(c.text=c.startText+" "+Math.min(Math.round(g),100)+"%"),E&&P&&Math.round(g)>=100&&(V.timeOut=setTimeout(function(){V.hide()},200)),!V.dispatched&&Math.round(g)>=100&&(V.dispatchEvent("complete"),V.dispatched=!0,setTimeout(function(){V&&(V.dispatched=!1)},100)),V.stage&&V.stage.update()}Object.defineProperty(V,"percent",{get:function(){return O},set:function(g){O=g,f(g)}});var o=V.getBounds();V.setBounds(o.x-5,o.y-5,o.width+10,o.height+10),p!==!1&&t.styleTransforms(this,B),this.clone=function(){return V.cloneProps(new t.ProgressBar(e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,x,E,k,p,this.group,S))},this.dispose=function(g,q,I){return V.backing.type=="Pattern"&&V.backing.clearInterval&&V.backing.clearInterval(),V.runInterval&&clearInterval(V.runInterval),I||this.zimContainer_dispose(!0),!0}},t.extend(t.ProgressBar,t.Container,["clone","dispose"],"zimContainer",!1),t.Indicator=function(e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,x,E,k,p,m){var S="width, height, num, foregroundColor, backgroundColor, borderColor, borderWidth, backdropColor, corner, indicatorType, fill, scale, lightScale, interactive, shadowColor, shadowBlur, selectedIndex, backgroundAlpha, style, group, inherit",_;if(_=lt(t.Indicator,arguments,S,this))return _;Le("60"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Indicator",this.group=p;var Y=k===!1?{}:t.getStyle(this.type,this.group,m);n(e)&&(e=Y.width!=null?Y.width:300),n(r)&&(r=Y.height!=null?Y.height:50),n(i)&&(i=Y.num!=null?Y.num:6),n(T)&&(T=Y.indicatorType!=null?Y.indicatorType:"dot"),n(l)&&(l=Y.foregroundColor!=null?Y.foregroundColor:T=="star"?t.yellow:T=="heart"?t.red:t.orange),n(a)&&(a=Y.backgroundColor!=null?Y.backgroundColor:t.granite),a<0&&(a=Y.backgroundColor!=null?Y.backgroundColor:"rgba(0,0,0,.01)"),n(s)&&(s=Y.borderColor!=null?Y.borderColor:null),n(c)&&(c=Y.borderWidth!=null?Y.borderWidth:null),s<0||c<0?s=c=null:s!=null&&c==null&&(c=1),n(d)&&(d=Y.backdropColor!=null?Y.backdropColor:-1),n(C)&&(C=Y.corner!=null?Y.corner:0),n(h)&&(h=Y.fill!=null?Y.fill:!1),n(w)&&(w=Y.scale!=null?Y.scale:1),n(A)&&(A=Y.lightScale!=null?Y.lightScale:1),n(y)&&(y=Y.interactive!=null?Y.interactive:!1),n(v)&&(v=Y.shadowColor!=null?Y.shadowColor:"rgba(0,0,0,.3)"),n(P)&&(P=Y.shadowBlur!=null?Y.shadowBlur:5),n(E)&&(E=Y.backgroundAlpha!=null?Y.backgroundAlpha:.2);var B=(mt?t.ACTIONEVENT=="mousedown":j.ACTIONEVENT=="mousedown")?"mousedown":"click",b=this;this.lights=[];var X;if(d!=-1){var V=b.backdrop=new t.Rectangle(e,r,d,s,c,C,null,null,null,!1);this.addChild(V)}var O=this.lightsContainer=new t.Container({style:!1});this.addChild(O);var Z,W=r*.5,K=e/(i+1),ne=new Ne.Shape,F=!1;T=="square"||T=="box"||T.type=="Emoji"?ne.graphics.f("black").dr(-K/2/A+W/2,-r/2+W/2,K/A,r):ne.graphics.f("black").dr(-K/2/A,-r/2,K/A,r);for(var D=0;D<i;D++)T=="square"||T=="box"?(Z=new t.Rectangle(W,W,a,s,c,null,null,null,null,!1),Z.regX=Z.width/2,Z.regY=Z.height/2):T=="star"?Z=new t.Poly(W*.6,5,.5,a,s,c,null,null,!1):T=="heart"?Z=new t.Blob({points:[[0,-40.7,0,0,-57.3,-76.6,41.8,-80.3,"mirror"],[100,0,0,0,23.7,-45.4,-23.7,45.4,"mirror"],[0,100,0,0,0,0,0,0,"mirror"],[-100,0,0,0,21.9,48.2,-21.9,-48.2,"mirror"]],color:a,interactive:!1}).transformPoints("scale",.15):T.type=="Emoji"?(F=!0,Z=T.clone().reg("center","center"),Z.myCache=!1):Z=new t.Circle(W/2,a,s,c,null,null,null,null,!1),this.lights.push(Z),Z.znum=D,Z.scaleX=Z.scaleY=A,Z.hitArea=ne,Z.x=K+K*D,Z.y=r/2,O.addChild(Z);O.setBounds(0,0,e,r),O.regX=O.x=e/2,O.regY=O.y=r/2,this.addChild(O),v!=-1&&P>0&&(O.shadow=new Ne.Shadow(v,2,2,P)),y&&(O.cur("pointer"),b.lightsEvent=O.on(B,function(f){if(X==f.target.znum){if(X>0)return;if(X==0){X=-1,u(X),b.dispatchEvent("change");return}}X=f.target.znum,u(X),b.dispatchEvent("change")})),O.scaleX=O.scaleY=w;function u(f){f>=i&&(f=-1);for(var o,g=0;g<i;g++){h&&g<f?o=l:o=a,g==f&&(o=l);var q=O.getChildAt(g);F&&(q.alpha=o==l?1:E),q.color=o}b.zimAccessibility&&b.zimAccessibility.changeTitle(b),!t.OPTIMIZE&&(mt||!j.OPTIMIZE)&&b.stage&&b.stage.update()}Object.defineProperty(this,"selectedIndex",{get:function(){return X},set:function(f){X=Math.floor(f),X=t.constrain(X,-1,i-1),u(X)}}),Object.defineProperty(this,"num",{get:function(){return i},set:function(){dt&&$e("Indicator() - num is read only")}}),this._enabled=!0,Object.defineProperty(b,"enabled",{get:function(){return b._enabled},set:function(f){It(b,f)}}),n(x)&&(x=Y.selectedIndex!=null?Y.selectedIndex:0),b.selectedIndex=x,k!==!1&&t.styleTransforms(this,Y),this.dispose=function(f,o,g){g||(b.lightsEvent&&O.off(B,b.lightsEvent),this.zimContainer_dispose())},this.clone=function(){return b.cloneProps(new t.Indicator(e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,x,E,k,this.group,m))}},t.extend(t.Indicator,t.Container,["clone","dispose"],"zimContainer",!1),t.TextInput=function(e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,x,E,k,p,m,S,_,Y,B,b,X,V,O,Z,W,K,ne,F,D,u,f,o,g,q,I){var R="width, height, placeholder, text, size, font, color, backgroundColor, borderColor, borderWidth, maxLength, password, selectionColor, selectionAlpha, cursorColor, cursorSpeed, shadowColor, shadowBlur, align, corner, padding, paddingH, paddingV, shiftH, shiftV, scrollBarActive, scrollBarDrag, scrollBarColor, scrollBarAlpha, scrollBarFade, scrollBarH, scrollBarV, readOnly, inputType, rtl, uppercase, placeholderInstant, keyboardShift, style, group, inherit",le;if(le=lt(t.TextInput,arguments,R,this))return le;Le("54.2"),this.group=q;var N=g===!1?{}:t.getStyle("TextInput",this.group,I);n(a)&&(a=N.size!=null?N.size:36),(n(m)||m=="ignore")&&(m=N.padding!=null&&m!="ignore"?N.padding:5),n(S)&&(S=N.paddingH!=null?N.paddingH:m),n(_)&&(_=N.paddingV!=null?N.paddingV:m),n(e)&&(e=N.width!=null?N.width:300),n(r)&&(r=N.height!=null?N.height:a+_*2),n(i)&&(i=N.placeholder!=null?N.placeholder:null),n(l)&&(l=N.text!=null?N.text:""),n(s)&&(s=N.font!=null?N.font:"arial"),n(c)&&(c=N.color!=null?N.color:t.dark),n(d)&&(d=N.backgroundColor!=null?N.backgroundColor:t.lighter),n(C)&&(C=N.borderColor!=null?N.borderColor:null),n(T)&&(T=N.borderWidth!=null?N.borderWidth:null);var L=ee(e,r,i,l,c,d,C);this.veeObj={width:L[0],height:L[1],placeholder:L[2],text:L[3],color:L[4],backgroundColor:L[5],borderColor:L[6]};function ee(){return arguments}e=t.Pick.choose(e),r=t.Pick.choose(r),i=t.Pick.choose(i),l=t.Pick.choose(l),c=t.Pick.choose(c),d=t.Pick.choose(d),C=t.Pick.choose(C),n(A)&&(A=N.selectionColor!=null?N.selectionColor:c),n(y)&&(y=N.selectionAlpha!=null?N.selectionAlpha:.2),n(v)&&(v=N.cursorColor!=null?N.cursorColor:c),n(P)&&(P=N.cursorSpeed!=null?N.cursorSpeed:.5),n(x)&&(x=N.shadowColor!=null?N.shadowColor:"rgba(0,0,0,.3)"),n(E)&&(E=N.shadowBlur!=null?N.shadowBlur:20),n(k)&&(k=N.align!=null?N.align:"left"),n(p)&&(p=N.corner!=null?N.corner:0),n(Y)&&(Y=N.shiftH!=null?N.shiftH:0),n(w)&&(w=N.password!=null?N.password:!1),n(B)&&(B=N.shiftV!=null?N.shiftV:w?a*.25:0),n(h)&&(h=N.maxLength!=null?N.maxLength:k=="center"?Math.floor(e/a)*1.8:null),n(b)&&(b=N.scrollBarActive!=null?N.scrollBarActive:!1),n(X)&&(X=N.scrollBarDrag!=null?N.scrollBarDrag:!1),n(V)&&(V=N.scrollBarColor!=null?N.scrollBarColor:C),n(O)&&(O=N.scrollBarAlpha!=null?N.scrollBarAlpha:.3),n(Z)&&(Z=N.scrollBarFade!=null?N.scrollBarFade:!0),n(W)&&(W=N.scrollBarH!=null?N.scrollBarH:!0),n(K)&&(K=N.scrollBarV!=null?N.scrollBarV:!0),n(ne)&&(ne=N.readOnly!=null?N.readOnly:!1),n(F)&&(F=N.inputType!=null?N.inputType:"text"),X&&(Z=N.scrollBarFade!=null?N.scrollBarFade:!1),n(D)&&(D=N.rtl!=null?N.rtl:j.DIR=="rtl"||t.DIR=="rtl"?"rtl":null),n(u)&&(u=N.uppercase!=null?N.uppercase:null),n(o)&&(o=N.keyboardShift!=null?N.keyboardShift:null),u&&(l&&(l=l.toUpperCase()),i&&(i=i.toUpperCase())),n(f)&&(f=N.placeholderInstant!=null?N.placeholderInstant:!0);function z(){return j.DIR&&j.DIR=="rtl"||!j.DIR&&t.DIR=="rtl"?k=="start"?k="right":k=="end"&&(k="left"):k=="start"?k="left":k=="end"&&(k="right"),k}k=z(k),this.zimWindow_constructor(e,r,null,d,C,T,m,p,!1,b,X,V,O,Z,W,K,!1,null,!1,!0,x,E,S,_,!0,null,null,null,null,null,!1,null,null,null,null,null,null,null,null,null,null,null,null,g,q,t.copy(N)),this.type="TextInput";var $=this;this.placeholderLabel=new t.Label({text:i||"",size:a,color:c,font:s,shiftH:Y,shiftV:B,valign:"top"}).alp(.5),l==""&&this.add(this.placeholderLabel);var xe=new t.Rectangle({width:e-m*2,height:r-m*2,color:t.clear,style:!1}).center(this);this.cur("text");var ie=this.label=new t.TextInput.LabelInput(l,a,h,w,A,y,v,P,s,c,null,null,null,k,"top",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,Y,B,null,null,null,null,F,D,u,f,g,q,I);this.add(ie),ie.setMask(xe),this.htmlTag=this.label.hiddenInput,this.selection=this.label.selection,this.blinker=this.label.blinker,k=="right"?(ie.x=e-S,this.placeholderLabel.x=e-this.placeholderLabel.width-S):k=="center"&&(ie.x=e/2,this.placeholderLabel.x=(e-this.placeholderLabel.width)/2),ie.ogx=ie.x,$.placeholderLabel.x=ie.x,$.placeholderLabel.align=k;var ke=new t.Rectangle({width:m,height:r,color:t.clear,style:!1}).addTo(this).expand(0);ke.on("mousedown",function(fe){ie.onMousedown(fe),fe.stopImmediatePropagation()}),ke.on("pressmove",function(fe){ie.onPressmove(fe),fe.stopImmediatePropagation()}),ke.on("dblclick",function(fe){ie.onDblclick(fe),fe.stopImmediatePropagation()});var U=new t.Rectangle({width:m,height:r,color:t.clear,style:!1}).pos(0,0,t.RIGHT,t.TOP,this).expand(0);U.on("mousedown",function(fe){ie.onMousedown(fe),fe.stopImmediatePropagation()}),U.on("pressmove",function(fe){ie.onPressmove(fe),fe.stopImmediatePropagation()}),U.on("dblclick",function(fe){ie.onDblclick(fe),fe.stopImmediatePropagation()});var Ee=ie.text;this.on("mousedown",function(fe){ie.onMousedown(fe),Ee=ie.text}),this.on("pressmove",function(fe){ie.onPressmove(fe),fe.stopImmediatePropagation()}),this.on("dblclick",function(fe){ie.onDblclick(fe),fe.stopImmediatePropagation()}),this.added(function(fe){fe.on("stagemousedown",function(ye){$.hitTestPoint(ye.stageX,ye.stageY)||(ie.focus=!1,ie.text!=Ee&&$.dispatchEvent("change"),Ee=ie.text)})});var Q=$.stage?stage.y:0;this.label.on("focus",function(){if(j.M&&o){$.re&&$.stage.frame.off("resize",$.re),$.re=$.stage.frame.on("resize",function(){$.stage&&fe>$.stage.height/4&&($.stage.y=$.stage.scaleY*($.stage.height/4-fe),$.stage.update())});var fe=$.label.localToGlobal(0,0).y;$.stage&&fe>$.stage.height/4&&($.stage.y=$.stage.scaleY*($.stage.height/4-fe),$.stage.update())}f&&$.placeholderLabel.parent&&($.placeholderLabel.removeFrom(),$.stage&&$.stage.update()),$.dispatchEvent("focus")}),this.label.on("blur",function(){j.M&&o&&$.stage&&($.re&&$.stage.frame.off("resize",$.re),$.stage.y=Q,$.stage.update()),f&&ie.text==""&&!$.placeholderLabel.parent&&($.add($.placeholderLabel),$.stage&&$.stage.update()),$.dispatchEvent("blur")});function G(){ie.text!=""&&$.placeholderLabel.parent&&($.placeholderLabel.removeFrom(),$.stage&&$.stage.update()),ie.text==""&&!$.placeholderLabel.parent&&($.add($.placeholderLabel),$.stage&&$.stage.update())}this.label.on("input",function(){G(),$.dispatchEvent("input")}),this.label.on("keydown",function(fe){this.label.deleteKey=fe.detail==46,$.dispatchEvent("keydown")}),this.label.on("blinker",function(){var fe=$.localToGlobal(0,0).x,ye=fe+e-S-ie.blinker.width,H=ie.blinker,re=H.localToGlobal(0,0).x,pe=ie.localToGlobal(0,0).x-1,te=ie.x+ie.blinker.x,ge=t.constrain(te,S,e-S-ie.blinker.width);if(te!=ge&&(ie.x-=te-ge),k=="left")ie.width<$.width?ie.x=ie.ogx:ye<re||ie.oldWidth==ie.width?ie.x-=te-ge:ie.oldWidth>ie.width&&this.label.deleteKey!=!0&&(ie.x+=Math.abs(H.oldX-re)+ie.blinker.width+S);else if(k=="right")ie.width<$.width?ie.x=ie.ogx:ye<re||ie.oldWidth==ie.width?ie.x-=te-ge:ie.oldWidth>ie.width&&this.label.deleteKey==!0&&re<pe-$.width&&(ie.x-=Math.abs(H.oldX-re)+ie.blinker.width+S);else if(k=="center"){if(ie.width<$.width)ie.x=ie.ogx;else if(ye<re)ie.x-=te-ge;else if(ie.oldWidth==ie.width)ie.x-=te-ge;else if(ie.oldWidth>ie.width&&ye>re){var Ae=fe+$.width*.5;this.label.deleteKey!=!0?ie.x+=ie.blinker.width+S:ie.x-=ie.blinker.width+S}}ie.oldWidth=ie.width,H.oldX=re,$.stage&&$.stage.update()}),Object.defineProperty($,"text",{get:function(){return ie.hiddenInput.value},set:function(fe){Ee=fe,ie.setText(fe),G(),!t.OPTIMIZE&&(mt||!j.OPTIMIZE)&&$.stage&&$.stage.update()}}),j.KEYFOCUS!=null&&(t.KEYFOCUS=j.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return t.KEYFOCUS==$},set:function(){t.KEYFOCUS=$}}),t.KEYFOCUS||ue(),this.on("mousedown",function(){ue()});function ue(){$.keyFocus=!0}Object.defineProperty($,"readOnly",{get:function(){return ne},set:function(fe){ne=fe,$.htmlTag.setAttribute("readonly",ne)}}),ne&&($.readOnly=!0),Object.defineProperty($,"focus",{get:function(){return ie.focus},set:function(fe){ie.focus=fe}}),Object.defineProperty($,"color",{get:function(){return ie.color},set:function(fe){ie.color=latestColor=fe,!t.OPTIMIZE&&(mt||!j.OPTIMIZE)&&$.stage&&$.stage.update()}}),Object.defineProperty($,"size",{get:function(){return ie.size},set:function(fe){ie.size=fe,ie.hiddenInput.style.fontSize=fe+"px",!t.OPTIMIZE&&(mt||!j.OPTIMIZE)&&$.stage&&$.stage.update()}}),Object.defineProperty($,"align",{get:function(){return ie.align},set:function(fe){ie.align=k=z(fe),k=="right"?ie.x=e-ie.width:k=="center"?ie.x=e/2:ie.x=0,$.placeholderLabel.x=ie.x,$.placeholderLabel.align=k,!t.OPTIMIZE&&(mt||!j.OPTIMIZE)&&$.stage&&$.stage.update()}}),Object.defineProperty($,"font",{get:function(){return ie.font},set:function(fe){ie.font=fe,!t.OPTIMIZE&&(mt||!j.OPTIMIZE)&&$.stage&&$.stage.update()}}),Object.defineProperty($,"selectionAlpha",{get:function(){return ie.selectionAlpha},set:function(fe){ie.selectionAlpha=fe,ie.selection.alpha!=0&&(ie.selection.alpha=fe),!t.OPTIMIZE&&(mt||!j.OPTIMIZE)&&$.stage&&$.stage.update()}}),t.styleTransforms(this,N),this.clone=function(fe){return $.cloneProps(fe||!t.isPick(L[0])?e:L[0],fe||!t.isPick(L[1])?r:L[1],fe||!t.isPick(L[2])?i:L[2],fe||!t.isPick(L[3])?l:L[3],a,s,fe||!t.isPick(L[4])?c:L[4],fe||!t.isPick(L[5])?d:L[5],fe||!t.isPick(L[6])?C:L[6],T,h,w,A,y,v,P,x,E,k,p,m,S,_,Y,B,b,X,V,O,Z,W,K,ne,F,u,f,o,g,this.group,I)}},t.extend(t.TextInput,t.Window,"clone","zimWindow",!1),t.TextInput.LabelInput=function(e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,x,E,k,p,m,S,_,Y,B,b,X,V,O,Z,W,K,ne,F,D,u,f,o,g,q,I,R,le){this.zimLabel_constructor(e,r,C,T,null,w,A,y,v,P,x,E,k,p,m,S,_,Y,B,b,X,V,O,Z,W,K,ne,null,D,u,null,f,I,R,le),this.type="LabelInput",n(T)&&(T=t.dark),n(a)&&(a=T),n(s)&&(s=.2),this.selectionAlpha=s,n(c)&&(c=T),n(d)&&(d=.5),this.hiddenInput=document.createElement("INPUT"),this.hiddenInput.value=e,o=="text"&&l&&(o="password"),this.hiddenInput.type=o,o=="number"&&(this.hiddenInput.pattern="[^(0-9).-+*/%$]*",this.hiddenInput.inputmode="numeric"),i>0&&(this.hiddenInput.maxLength=i),this.hiddenInput.autocapitalize="off",this.hiddenInput.autocorrect="off",this.hiddenInput.autocomplete="off",this.hiddenInput.spellcheck=!1,this.hiddenInput.style.position="absolute",this.hiddenInput.style.overflow="hidden",this.hiddenInput.style.touchAction="none",this.hiddenInput.style.left="-99999px",this.hiddenInput.style.top="-99999px",this.hiddenInput.style.zIndex=-999,this.hiddenInput.style.opacity=0,this.hiddenInput.style.width="1px",this.hiddenInput.style.height="1px",this.hiddenInput.style.fontSize="1px",this.onFocus=function(){this.stage&&(L=this.stage.frame),L.zil&&j.removeEventListener("keydown",L.zil[0]),this.blinker.alp(1).replayTween(),this.selection.alp(.2),this.positionBlinkerAndSelection(),this.dispatchEvent("focus")},this.onBlur=function(){this.stage&&(L=this.stage.frame),L.zil&&j.addEventListener("keydown",L.zil[0]),this.positionBlinkerAndSelection(),this.blinker.pauseAnimate(!0).alp(0),this.selection.alp(0),this.hiddenInput.type=o,this.dispatchEvent("blur")},this.onInput=function(){q&&(this.hiddenInput.value=this.hiddenInput.value.toUpperCase());var ee=this.hiddenInput.value;o=="number"&&(ee=ee.replace(/[^(0-9).\-+*/%$]*/g,""),this.hiddenInput.value=ee),this.text=this.hiddenInput.type=="password"?ee.replace(/./g,"*"):ee,this.measureText(),this.dispatchEvent("input")},this.onSelect=function(){this.positionBlinkerAndSelection(),this.focus&&this.blinker.replayTween()};var N=this;this.onKeydown=function(ee){this.deleteKey=ee.code=="Backspace"||ee.code=="Delete",this.blinker.replayTween(),setTimeout(function(){let z=new CustomEvent("keydown",{detail:ee.keyCode});N.positionBlinkerAndSelection.call(N),N.dispatchEvent(z)},10)},this.onMousedown=function(ee){var z=this.text.length,$=this.eventPositionGlobalToLocal(ee);this.focus||(this.hiddenInput.focus(),(o=="number"||o=="email")&&(this.hiddenInput.type="text"));var xe=this.mapPointToIndex($);g?this.hiddenInput.setSelectionRange(z-xe,z-xe):this.hiddenInput.setSelectionRange(xe,xe),this.positionBlinkerAndSelection()},this.onPressmove=function(ee){var z=this.text.length;this.focus||this.hiddenInput.focus();var $=this.eventPositionGlobalToLocal(ee),xe;g?xe=z-this.mapPointToIndex($):xe=this.mapPointToIndex($),this.hiddenInput.selectionStart===this.hiddenInput.selectionEnd?this.hiddenInput.selectionStart<=xe?this.hiddenInput.setSelectionRange(this.hiddenInput.selectionStart,xe,g?"backward":"forward"):this.hiddenInput.setSelectionRange(xe,this.hiddenInput.selectionEnd,g?"forward":"backward"):this.hiddenInput.selectionDirection===(g?"backward":"forward")?this.hiddenInput.setSelectionRange(this.hiddenInput.selectionStart,xe,g?"backward":"forward"):this.hiddenInput.setSelectionRange(xe,this.hiddenInput.selectionEnd,g?"forward":"backward"),this.positionBlinkerAndSelection()},this.onDblclick=function(){this.hiddenInput.select(),this.positionBlinkerAndSelection()},this.positionBlinkerAndSelection=function(){var ee=this.text.length;if(this.focus){var z=this.backing||this.background?this.paddingH:0,$=this.backing||this.background?this.paddingV:0;if(this.hiddenInput.selectionStart!==this.hiddenInput.selectionEnd){var xe,ie;g?(xe=this.textWidthArray[ee-this.hiddenInput.selectionStart],ie=this.textWidthArray[ee-this.hiddenInput.selectionEnd],this.selection.widthOnly=ie-xe,this.selection.pos(ie+z-1+K,$+ne)):(xe=this.textWidthArray[this.hiddenInput.selectionStart],ie=this.textWidthArray[this.hiddenInput.selectionEnd],this.selection.widthOnly=ie-xe,this.selection.pos(xe+z-1+K,$+ne)),this.selection.heightOnly=this.textHeight,this.selection.alp(this.selectionAlpha)}else this.selection.alp(0);this.blinker.heightOnly=this.textHeight;var ke=this.hiddenInput.selectionDirection==="backward"?this.hiddenInput.selectionStart:this.hiddenInput.selectionEnd;ke||(ke=0),g&&(ke=ee-ke),this.blinker.pos(this.textWidthArray[ke]+z-1+(y=="right"&&this.text==""?this.width:y=="center"&&this.text==""?this.width/2:0)+K,$+ne),this.dispatchEvent("blinker")}this.stage&&this.stage.update()},this.eventPositionGlobalToLocal=function(ee){var z=this.globalToLocal(ee.stageX/t.scaX,ee.stageY/t.scaY);return y=="right"?z.x-=this.label.x-this.width:y=="center"?z.x-=(this.label.x-this.width)/2:z.x-=this.label.x,z.y-=this.label.y,z},this.mapPointToIndex=function(ee){for(var z=this.textWidthArray.length-1,$=0;$<this.textWidthArray.length-1;$++){var xe=(this.textWidthArray[$]+this.textWidthArray[$+1])/2;if(ee.x<=xe){z=$;break}}return z},this.measureText=function(){var ee=this.label.clone(),z=this.text;g&&(z=z.split("").reverse().join(""));for(var $=0;$<z.length&&$<this.previousMeasuredText.length&&z[$]===this.previousMeasuredText[$];)$++;for(this.textWidthArray=this.textWidthArray.slice(0,$+1),$++;$<=z.length;$++)ee.text=z.slice(0,$),this.textWidthArray.push(ee.getMeasuredWidth());this.previousMeasuredText=z,this.textHeight=ee.getMeasuredLineHeight()},this.setText=function(ee){q&&(ee=ee.toUpperCase()),this.hiddenInput.value=ee,this.onInput()},Object.defineProperty(this,"focus",{get:function(){return document.activeElement===N.hiddenInput},set:function(ee){ee===!0?N.hiddenInput.focus():N.hiddenInput.blur()}});var L;this.added(function(ee){L=ee.frame,N.hiddenInput.addEventListener("focus",N.onFocus.bind(N)),N.hiddenInput.addEventListener("blur",N.onBlur.bind(N))}),this.hiddenInput.addEventListener("input",this.onInput.bind(this)),this.hiddenInput.addEventListener("select",this.onSelect.bind(this)),this.hiddenInput.addEventListener("keydown",this.onKeydown.bind(this)),document.body.appendChild(this.hiddenInput),this.on("mousedown",this.onMousedown.bind(this)),this.on("pressmove",this.onPressmove.bind(this)),this.on("dblclick",this.onDblclick.bind(this)),this.cur("text"),this.blinker=new t.Rectangle({width:2,height:1,color:c,style:!1}).animate({obj:{alpha:0},wait:d,time:.1,rewind:!0,rewindWait:d,loop:!0,loopWait:d}).pauseAnimate(!0).alp(0).addTo(this),this.selection=new t.Rectangle({width:1,height:1,color:a,style:!1}).alp(0).addTo(this),this.textWidthArray=[0],this.previousMeasuredText="",this.textHeight=null,this.measureText()},t.extend(t.TextInput.LabelInput,t.Label,null,"zimLabel",!1),t.List=function(e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,x,E,k,p,m,S,_,Y,B,b,X,V,O,Z,W,K,ne,F,D,u,f,o,g,q,I,R,le,N,L,ee,z,$,xe,ie,ke,U,Ee,Q,G,ue,fe,ye,H,re,pe,te,ge,Ae,ae,de,se,Ie,Te,ve,J,Se,Be,Ye,Ke,at,me,Ge){var Je="width, height, list, viewNum, vertical, currentSelected, align, valign, labelAlign, labelValign, labelIndent, labelIndentH, labelIndentV, indent, spacing, backgroundColor, rollBackgroundColor, downBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, backdropColor, color, rollColor, downColor, selectedColor, selectedRollColor, borderColor, borderWidth, padding, corner, swipe, scrollBarActive, scrollBarDrag, scrollBarColor, scrollBarAlpha, scrollBarFade, scrollBarH, scrollBarV, scrollBarOverlay, slide, slideFactor, slideSnap, slideSnapDamp, shadowColor, shadowBlur, paddingH, paddingV, scrollWheel, damp, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, draggable, boundary, onTop, close, closeColor, collapse, collapseColor, collapsed, excludeCustomTap, organizer, checkBox, pulldown, clone, cancelCurrentDrag, selectedIndex, noScale, pulldownToggle, optimize, keyEnabled, resizeHandle, resizeBoundary, resizeVisible, style, group, inherit",ce;if(ce=lt(t.List,arguments,Je,this))return ce;Le("60.5"),this.group=me;var oe=at===!1?{}:t.getStyle("List",this.group,Ge);n(e)&&(e=oe.width!=null?oe.width:300);var _e=r;n(r)&&(r=oe.height!=null?oe.height:n(ge)?200:200+ge.height),n(i)&&(i=i=oe.list!=null?oe.list:["Option 1","Option 2","Option 3","Option 4","Option 5","Option 6","Option 7","Option 8","Option 9","Option 10"]),i.length==0&&(i=["%-&"]),this.originalList=i,n(l)&&(l=oe.viewNum!=null?oe.viewNum:5),n(a)&&(a=oe.vertical!=null?oe.vertical:!0),n(s)&&(s=oe.currentSelected!=null?oe.currentSelected:!0);var je=!n(c)||!n(C);n(Ae)&&(Ae=oe.checkBox!=null?oe.checkBox:!1),n(c)&&(c=oe.align!=null?oe.align:Ae?"left":"center"),n(d)&&(d=oe.valign!=null?oe.valign:"center"),n(C)&&(C=oe.labelAlign!=null?oe.labelAlign:c),n(T)&&(T=oe.labelValign!=null?oe.labelValign:d),n(y)&&(y=oe.indent!=null?oe.indent:Ae?0:10),n(h)&&(h=oe.labelIndent!=null?oe.labelIndent:y),n(w)&&(w=oe.labelIndentH!=null?oe.labelIndentH:h),n(A)&&(A=oe.labelIndentV!=null?oe.labelIndentV:h),n(v)&&(v=oe.spacing!=null?oe.spacing:2),n(m)&&(m=oe.backdropColor!=null?oe.backdropColor:t.dark),n(P)&&(P=oe.backgroundColor!=null?oe.backgroundColor:t.tin),n(x)&&(x=oe.rollBackgroundColor!=null?oe.rollBackgroundColor:t.grey),n(E)&&(E=oe.downBackgroundColor!=null?oe.downBackgroundColor:x),n(k)&&(k=oe.selectedBackgroundColor!=null?oe.selectedBackgroundColor:t.charcoal),n(p)&&(p=oe.selectedRollBackgroundColor!=null?oe.selectedRollBackgroundColor:t.grey),n(S)&&(S=oe.color!=null?oe.color:t.white),n(_)&&(_=oe.rollColor!=null?oe.rollColor:S),n(Y)&&(Y=oe.downColor!=null?oe.downColor:_),n(B)&&(B=oe.selectedColor!=null?oe.selectedColor:S),n(b)&&(b=oe.selectedRollColor!=null?oe.selectedRollColor:_),n(m)&&(m=oe.backdropColor!=null?oe.backdropColor:m);var Ve=X,De=V;n(X)&&(X=oe.borderColor!=null?oe.borderColor:t.silver),n(V)&&(V=oe.borderWidth!=null?oe.borderWidth:1),n(O)&&(O=oe.padding!=null?oe.padding:v),n(Z)&&(Z=oe.corner!=null?oe.corner:0),n(W)&&(W=oe.swipe!=null?oe.swipe:!0),n(K)&&(K=oe.scrollBarActive!=null?oe.scrollBarActive:!0),n(ne)&&(ne=oe.scrollBarDrag!=null?oe.scrollBarDrag:!0),n(F)&&(F=oe.scrollBarColor!=null?oe.scrollBarColor:X),n(D)&&(D=oe.scrollBarAlpha!=null?oe.scrollBarAlpha:.3),n(u)&&(u=oe.scrollBarFade!=null?oe.scrollBarFade:!0),n(f)&&(f=oe.scrollBarH!=null?oe.scrollBarH:!a),n(o)&&(o=oe.scrollBarV!=null?oe.scrollBarV:a),ne&&(u=oe.scrollBarFade!=null?oe.scrollBarFade:!1),n(g)&&(g=oe.scrollBarOverlay!=null?oe.scrollBarOverlay:!0),n(q)&&(q=oe.slide!=null?oe.slide:!0),n(I)&&(I=oe.slideFactor!=null?oe.slideFactor:.95),n(R)&&(R=oe.slideSnap!=null?oe.slideSnap:a?"vertical":"horizontal"),n(N)&&(N=oe.shadowColor!=null?oe.shadowColor:"rgba(0,0,0,.3)"),n(L)&&(L=oe.shadowBlur!=null?oe.shadowBlur:20),n(z)&&(z=oe.paddingV!=null?oe.paddingV:O),n(ee)&&(ee=oe.paddingH!=null?oe.paddingH:O),n($)&&($=oe.scrollWheel!=null?oe.scrollWheel:!0),n(ie)&&(ie=oe.titleBar!=null?oe.titleBar:null),n(ke)&&(ke=oe.titleBarColor!=null?oe.titleBarColor:null),n(U)&&(U=oe.titleBarBackgroundColor!=null?oe.titleBarBackgroundColor:null),n(Ee)&&(Ee=oe.titleBarHeight!=null?oe.titleBarHeight:35),n(Q)&&(Q=oe.draggable!=null?oe.draggable:null),n(G)&&(G=oe.boundary!=null?oe.boundary:null),n(ue)&&(ue=oe.onTop!=null?oe.onTop:null),n(fe)&&(fe=oe.close!=null?oe.close:null),n(ye)&&(ye=oe.closeColor!=null?oe.closeColor:null),n(H)&&(H=oe.collapse!=null?oe.collapse:null),n(re)&&(re=oe.collapseColor!=null?oe.collapseColor:null),n(te)&&(te=oe.excludeCustomTap!=null?oe.excludeCustomTap:!1),n(Ae)&&(Ae=oe.checkBox!=null?oe.checkBox:!1),n(ae)&&(ae=oe.pulldown!=null?oe.pulldown:!1),n(ve)&&(ve=oe.pulldownToggle!=null?oe.pulldownToggle:!1),n(Te)&&(Te=oe.noScale!=null?oe.noScale:!1),n(de)&&(de=oe.clone!=null?oe.clone:!1),n(J)&&(J=oe.optimize!=null?oe.optimize:!0),n(Se)&&(Se=oe.keyEnabled!=null?oe.keyEnabled:null),n(Be)&&(Be=oe.resizeHandle!=null?oe.resizeHandle:null),n(Ye)&&(Ye=oe.resizeBoundary!=null?oe.resizeBoundary:null),n(Ke)&&(Ke=oe.resizeVisible!=null?oe.resizeVisible:!1),ie===!1&&(ie=null),this.vertical=a;var Oe=this,Re=r;j.DIR&&j.DIR=="rtl"||!j.DIR&&t.DIR=="rtl"?c=="start"?c="right":c=="end"&&(c="left"):c=="start"?c="left":c=="end"&&(c="right"),Ae&&t.loop(i,function(qe,ht){i[ht]!="%-&"&&(i[ht]=t.List.checkItem(qe,null,e,"left",10,10,v,S,_,B,b,P,x,k,p))});var Ze=Tt(),be;if(i.constructor=={}.constructor){var we=n(i.shade)?n(oe.shade)?.2:oe.shade:i.shade,Me=n(i.dim)?n(oe.dim)?.1:oe.dim:i.dim,He=n(i.shift)?n(oe.shift)?15:oe.shift:i.shift,Xe=n(i.bloom)?n(oe.bloom)?!1:oe.bloom:i.bloom,nt=n(i.whither)?n(oe.whither)?!1:oe.whither:i.whither,Ce=n(i.open)?n(oe.open)?!1:oe.open:i.open,Fe=n(i.expander)?n(oe.expander)?"plus":oe.expander:i.expander;Fe=Fe.toLowerCase(),Fe=="arrows"&&(Fe="arrow"),Fe!="none"&&Fe!="arrow"&&(Fe="plus"),Xe===!0&&(Xe=Ze=="s"?.01:10),nt===!0&&(nt=Ze=="s"?.01:10),kt(Xe),kt(nt),He===!0&&(He=15),we===!0&&(we=.2),Me===!0&&(Me=.1);var it=n(i.subStyles)?n(oe.subStyles)?{}:oe.subStyles:i.subStyles;n(i.menu)||(i=i.menu),be=Oe.tree=new t.Hierarchy(i),i=be.getLinearList(),je||(c=C="left")}ae&&(l=n(be)?i.length:be.length,n(_e)&&(r=l*e/620*100+(l+1)*v+(n(ie)?0:Ee)),V=0,k=P,m=t.clear,W=!1);var Qe=0,tt=0;t.loop(i,function(qe){qe.type=="ListItem"&&(qe.width=e-v*2),Te&&(qe.width&&(Qe+=qe.width),qe.height&&(tt+=qe.height))}),Qe&&(Qe+=v*(i.length-1)),tt&&(tt+=v*(i.length-1)),this.align=c,this.valign=d,this.indent=y,n(ge)||(r=r-ge.height,ge.list=Oe,Oe.organizer=ge,ge.setButtons(),Ee+=ge.height),this.zimWindow_constructor(e,r,null,m,X,V,O,Z,W,K,ne,F,D,u,f,o,q,I,R,le,!0,N,L,ee,z,$,xe,ie,ke,U,Ee,Q,G,ue,fe,ye,se,!1,null,Be,H,re,pe,J,Ye,Ke,at,me,t.copy(oe)),this.type="List",n(ie)||(this.titleBarLabel.pos(null,Ee-30,null,!0),n(Ee)&&(Ee=30),r=r-Ee),n(ge)||ge.addTo(Oe).loc(0,-ge.height),Qe&&Te?(Oe.itemWidth=a?e-ee*2-(K?g?0:6:0):Qe/i.length,Oe.itemHeight=a?tt/i.length:r-z*2-(K?g?0:6:0)):(Oe.itemWidth=a?e-ee*2-(K?g?0:6:0):(e-ee*2)/l,Oe.itemHeight=a?(r-z*2)/l:r-z*2-(K?g?0:6:0));var ot,gt=t.copy(oe);delete gt.borderWidth,delete gt.borderColor;function ze(qe){ot=Oe.tabs=new t.Tabs({width:a?Oe.itemWidth:Oe.itemWidth*i.length,height:a?Oe.itemHeight*i.length:Oe.itemHeight,tabs:qe,spacing:v,vertical:a,backgroundColor:P,rollBackgroundColor:x,downBackgroundColor:E,selectedBackgroundColor:k,selectedRollBackgroundColor:p,color:S,rollColor:_,downColor:Y,selectedColor:B,selectedRollColor:b,backdropColor:m,currentEnabled:!0,currentSelected:s,align:c,valign:d,labelAlign:C,labelValign:T,labelIndent:h,labelIndentH:w,labelIndentV:A,indent:y,useTap:!0,excludeCustomTap:te,keyWrap:!1,keyEnabled:Se,style:at,group:me,inherit:gt}).mov(a?0:ee,a?z:0),Oe.add(ot),t.loop(ot.labels,function(ht){ht&&(ht.backgroundColor=t.clear)})}ze(t.copy(i,de));function Mt(qe,ht,st){qe.listZID=ht,qe.label&&(we&&new t.Rectangle(He*(st.level+1),qe.height).alp(we).pos(0,0,Oe.align=="right",!1,qe),Me&&new t.Rectangle(qe.width,qe.height).alp((st.level+1)*Me).addTo(qe).bot().ord(1),He&&Oe.align!="center"&&(qe.label.x+=(Oe.align=="right"?-1:1)*He*(st.level+1)));var Ot=be.getData(ht);Ot.obj=qe,Ot.list&&!t.isEmpty(Ot.list)&&(qe.expander=new t.Label({size:Fe=="arrow"?22:36,text:Ot.open?Fe=="arrow"?"\u25B2":"-":Fe=="arrow"?"\u25BC":"+",align:"center",color:t.convertColor(S,"rgba",.6)}).center(qe).alp(Fe=="none"?0:.7).pos(15,null,Oe.align!="right").mov(0,Ot.open?-3:0))}function ut(){if(!(!Oe.selected||!Oe.selected.expander)){var qe=be.getData(Oe.selected.listZID),ht;if(qe.open){Oe.selected.expander&&(Oe.selected.expander.text=Fe=="arrow"?"\u25BC":"+",Oe.selected.expander.mov(0,3)),qe.open=!1;var st=be.getNextSibling(Oe.selected.listZID),Ot;n(st)?Ot=Oe.items.length-1:Ot=t.loop(Oe.items,function(bt,Zt){if(bt.listZID==st)return Zt-1}),nt?(ht=0,Oe.enabled=!1,t.interval(nt,function(bt){Oe.removeAt(1,Oe.selectedIndex+Ot-Oe.selectedIndex-ht),ht++,bt.total==bt.count+1&&(Oe.enabled=!0,Oe.dispatchEvent("collapsed"))},Ot-Oe.selectedIndex,!0)):(Oe.removeAt(Ot-Oe.selectedIndex,Oe.selectedIndex+1),Oe.dispatchEvent("collapsed"))}else{qe.open=!0,Oe.selected.expander&&(Oe.selected.expander.text=Fe=="arrow"?"\u25B2":"-",Oe.selected.expander.mov(0,-3));var St=be.getLinearList(qe.list),Vt=be.getLinearIDs(qe.list),Gt;if(qe.opened)Array.isArray(St)&&(Xe?(ht=0,Oe.enabled=!1,t.interval(Xe,function(bt){Oe.addAt(St[ht],Oe.selectedIndex+1+ht),Gt=new Ne.Event("bloom"),Gt.item=St[ht],Oe.dispatchEvent(Gt),bt.total==bt.count+1&&(Oe.enabled=!0,Gt=new Ne.Event("expanded"),Gt.items=St,Oe.dispatchEvent(Gt)),ht++},St.length,!0)):(Oe.addAt(St,Oe.selectedIndex+1),Gt=new Ne.Event("expanded"),Gt.items=St,Oe.dispatchEvent(Gt)));else{qe.opened=!0;var pt=it[qe.level];n(pt)&&(pt={}),Array.isArray(St)&&(Xe?(ht=0,Oe.enabled=!1,t.interval(Xe,function(bt){Oe.addAt(St[ht],Oe.selectedIndex+1+ht,{backgroundColor:pt.backgroundColor,color:pt.color,rollBackgroundColor:pt.rollBackgroundColor,rollColor:pt.rollColor,selectedBackgroundColor:pt.selectedBackgroundColor,selectedColor:pt.selectedColor,selectedRollBackgroundColor:pt.selectedRollBackgroundColor,selectedRollColor:pt.selectedRollColor});var Zt=Vt[ht],Xt=Oe.items[Oe.selectedIndex+1+ht];pt.borderColor&&(Xt.borderColor=pt.borderColor),Mt(Xt,Zt,qe),Xt.label&&(Xt.label.backgroundColor=t.clear),Gt=new Ne.Event("bloom"),Gt.item=Xt,Oe.dispatchEvent(Gt),bt.total==bt.count+1&&(Oe.enabled=!0,Gt=new Ne.Event("expanded"),Gt.items=St,Oe.dispatchEvent(Gt)),ht++,Oe.stage&&Oe.stage.update()},St.length,!0)):(Oe.addAt(St,Oe.selectedIndex+1,{backgroundColor:pt.backgroundColor,color:pt.color,rollBackgroundColor:pt.rollBackgroundColor,rollColor:pt.rollColor,selectedBackgroundColor:pt.selectedBackgroundColor,selectedColor:pt.selectedColor,selectedRollBackgroundColor:pt.selectedRollBackgroundColor,selectedRollColor:pt.selectedRollColor}),t.loop(Vt,function(bt,Zt){var Xt=Oe.items[Oe.selectedIndex+1+Zt];Mt(Xt,bt,qe),Xt.label&&(Xt.label.backgroundColor=t.clear)}),Gt=new Ne.Event("expanded"),Gt.items=St,Oe.dispatchEvent(Gt)))}}}}Oe.expandList=function(qe){return Oe.selectedIndex=qe,Oe.selected&&ut(),Oe.selected};var xt;if(be){ve&&Oe.added(function(qe){xt=qe,Oe.stageToggleEvent=xt.on("stagemousedown",function(){var ht=xt.getObjectUnderPoint(xt.frame.mouseX,xt.frame.mouseY);if(!(ht&&Oe.contains(ht))&&!(!Oe.enabled||!Oe.selected)){var st=be.getData(Oe.selected.listZID);st.open&&ut()}})});var _t=be.getLinearIDs();t.loop(_t,function(qe,ht){Oe.tabs.buttons[ht].listZID=qe}),t.loop(Oe.tabs.buttons,function(qe){var ht=be.getData(qe.listZID);t.isEmpty(ht.list)||(qe.expander=new t.Label({size:Fe=="arrow"?22:36,text:Fe=="arrow"?"\u25BC":"+",align:"center",color:t.convertColor(S,"rgba",.6)}).center(qe).alp(Fe=="none"?0:.7).pos(15,null,Oe.align!="right"))});var Yt=Ce;Oe.toggle=function(qe){if(n(qe))qe=!Yt;else if(qe==Yt)return;Oe.selectedIndex=0,Yt=qe,ut()},Object.defineProperty(Oe,"toggled",{get:function(){return Yt},set:function(qe){Yt!=qe&&Oe.toggle()}}),Oe.tap(ut)}var Et;ot.tap(function(qe){qe.target.selectedIndex!=Oe.selectedIndex&&(Oe.selectedIndex=ot.selectedIndex,Oe.dispatchEvent("change"),ve&&(Oe.selectedIndex=0),qe.preventDefault())}),ot.on("keychange",function(qe){if(qe.target.selectedIndex!=Oe.selectedIndex){Oe.selectedIndex=ot.selectedIndex;var ht;setTimeout(function(){a?(ht=Oe.selected.y+Oe.scrollY,(ht<0||ht>Oe.height-Oe.selected.height)&&Oe.animateTo(Oe.selectedIndex,Ze=="ms"?100:.1)):(ht=Oe.selected.x+Oe.scrollX,(ht<0||ht>Oe.width-Oe.selected.width)&&Oe.animateTo(Oe.selectedIndex,Ze=="ms"?100:.1))},100),Oe.dispatchEvent("change")}}),this.getItemIndex=function(qe){return Oe.items.indexOf(qe)},this.animateTo=function(qe,ht){n(qe)&&(qe=0),n(ht)&&(ht=.05);var st=Tt(ht);Oe.selectedIndex=qe;var Ot=Jt(qe),St;return a?(St=Math.abs(Oe.scrollY-Ot)/Oe.itemHeight,Oe.animate({scrollY:Ot},St*ht/(st=="s"?1:1e3))):(St=Math.abs(Oe.scrollX-Ot)/Oe.itemWidth,Oe.animate({scrollX:Ot},St*ht/(st=="s"?1:1e3))),Oe},this.addAt=function(qe,ht,st,Ot){if(n(qe))return Oe;if(Oe.tabs.loop(function(Vt){Vt.visible=!0}),qe.type=="ListItem"?qe.width=e-v*2:Array.isArray(qe)&&t.loop(qe,function(Vt){Vt.type=="ListItem"&&(Vt.width=e-v*2)}),Ot)if(Array.isArray(qe)){var St=[];t.loop(qe,function(Vt){Vt.clone?St.push(qe.clone()):St.push(t.copy(qe,Ot))}),Oe.tabs.addAt(St,ht,st)}else qe.clone?Oe.tabs.addAt(qe.clone(),ht,st):Oe.tabs.addAt(t.copy(qe,Ot),ht,st);else Ae&&(Array.isArray(qe)||(qe=[qe]),t.loop(qe,function(Vt,Gt){typeof Vt=="string"&&(qe[Gt]=t.List.checkItem(Vt,null,e,"left",10,10,v,S,_,B,b,P,x,k,p))})),Oe.tabs.addAt(qe,ht,st);return Oe.update(),Oe},this.removeAt=function(qe,ht){Oe.tabs.removeAt(qe,ht),Oe.tabs.loop(function(Ot){Ot.visible=!0}),Et=Oe.tabs.selectedIndex;var st=ot.getBounds();return ot.setBounds(0,0,st.width,st.height),st.height<r&&(Oe.scrollY=0),Oe.update(),Oe},i[0]=="%-&"&&i.length==1&&Oe.removeAt(1,0),this.clear=function(){return Oe.tabs.removeAt(Oe.length,0),Oe.contentContainer.x=0,Oe.contentContainer.y=0,Oe.update(),Oe},this.setCheck=function(qe,ht){n(qe)&&(qe=0),n(ht)&&(ht=!0),Oe.items[qe].checkBox.checked=ht,Oe.items[qe].content.zimOut()},this.getCheck=function(qe){return n(qe)&&(qe=0),Oe.items[qe].checkBox.checked},this.setChecks=function(qe){return t.loop(Oe.items,function(ht){ht.checkBox.checked=qe,ht.content.zimOut()}),Oe},Object.defineProperty(Oe,"items",{get:function(){return Oe.tabs.buttons},set:function(){dt&&$e("List() - items is read only - use addAt() and removeAt() to change")}}),Object.defineProperty(Oe,"list",{get:function(){return Oe.tabs.buttons},set:function(){dt&&$e("List() - list is read only - use addAt() and removeAt() to change")}}),Object.defineProperty(Oe,"length",{get:function(){return Oe.tabs.buttons.length},set:function(){dt&&$e("List() - length is read only")}}),Object.defineProperty(Oe,"selectedIndex",{get:function(){return Et},set:function(qe){ot.selectedIndex=qe,Oe.label=ot.label,Oe.selected=ot.selected,Et=qe,!t.OPTIMIZE&&(mt||!j.OPTIMIZE)&&Oe.stage&&Oe.stage.update()}}),s&&(Oe.selectedIndex=0),Object.defineProperty(Oe,"selectedIndexPlusPosition",{get:function(){return Et},set:function(qe){Oe.selectedIndex=qe,Et=qe,a?Oe.scrollY=Jt(qe)-2:Oe.scrollX=Jt(qe),!t.OPTIMIZE&&(mt||!j.OPTIMIZE)&&Oe.stage&&Oe.stage.update()}});function Jt(qe){if(a){var ht=-(Oe.itemHeight+v)*qe+r/2-Oe.itemHeight/2;return(Oe.itemHeight+v)*Oe.length<r&&(ht=0),ht>0&&(ht=0),(Oe.itemHeight+v)*Oe.length>r&&ht<-Oe.tabs.height+r-z*2&&(ht=-Oe.tabs.height+r-z*2),ht}else{var st=-(Oe.itemWidth+v)*qe+e/2-Oe.itemWidth/2;return(Oe.itemWidth+v)*Oe.length<e&&(st=0),st>0&&(st=0),(Oe.itemWidth+v)*Oe.length>e&&st<-Oe.tabs.width+e-ee*2&&(st=-Oe.tabs.width+e-ee*2),st}}Object.defineProperty(Oe,"text",{get:function(){return Oe.label?Oe.label.text:null},set:function(qe){Oe.label&&(Oe.label.text=qe)}}),Object.defineProperty(Oe,"bloom",{get:function(){return Xe},set:function(qe){Xe=qe}}),Object.defineProperty(Oe,"currentValue",{get:function(){return Oe.label?Oe.label.text:null},set:function(qe){var ht=t.loop(Oe.list,function(st,Ot){var St;st.label&&(St=st.label.text),st.type=="Label"&&(St=st.text);var Vt=new RegExp(qe,"i");if(St&&St.match(Vt))return Ot});ht!==!0&&(Oe.selectedIndexPlusPosition=ht)}}),Object.defineProperty(Oe,"itemDown",{get:function(){return Oe.tabs.buttonDown},set:function(){}}),Object.defineProperty(Oe,"itemsText",{get:function(){for(var qe=[],ht=0;ht<Oe.tabs.buttons.length;ht++){var st=Oe.tabs.buttons[ht].label;st&&!n(st.text)?qe.push(st.text):qe.push(null)}return qe},set:function(){dt&&$e("List() - itemsText is read only")}}),s&&(Oe.selectedIndex=0),Object.defineProperty(Oe,"checkBoxes",{get:function(){for(var qe=[],ht=0;ht<Oe.tabs.buttons.length;ht++){var st=Oe.tabs.buttons[ht].checkBox;qe.push(st)}return qe},set:function(){dt&&$e("List() - checkBoxes is read only")}}),Object.defineProperty(Oe,"accordionIndex",{get:function(){var qe=Oe.selected.listZID;return qe?Number(qe.split("id")[1]):null},set:function(){dt&&$e("List() - accordionIndex is read only")}}),this.last=function(){return this.selectedIndexPlusPosition=this.length-1,this},this.first=function(){return this.selectedIndexPlusPosition=0,this},this.openAtLevel=function(qe){if(!n(qe)){var ht=[];t.loop(qe,function(Ot){ht.push(Ot)});var st=Oe.bloom;Oe.bloom=!1,t.interval(.01,function(Ot){var St=Oe.items[Ot.count];St?ht.indexOf(Oe.tree.getData(St.listZID).level)!=-1&&Oe.expandList(Ot.count):(Ot.clear(),Oe.bloom=st)},null,!0,!1,"s")}};var qt;this.openAtNum=function(qe){if(!n(qe)){if(!qt){let bt=function(Zt,Xt){for(ht in Zt)qt[ht]=Xt,bt(Zt[ht].list,ht)};var ht;qt={},bt(Oe.tree.data);var st={};for(var Ot in qt){st[Ot]||(st[Ot]=[]);for(var St=qt[Ot];St;)st[Ot].unshift(St),St=qt[St];st[Ot].push(Ot)}}var Vt="id"+qe,Gt=st[Vt],pt=Oe.bloom;Oe.bloom=!1,ri(.01,function(bt){var Zt=Oe.items[bt.count];Zt?Gt.indexOf(Zt.listZID)!=-1&&Oe.expandList(bt.count):(bt.clear(),Oe.bloom=pt)},null,!0,!1,"s")}},Ce&&ut&&Oe.openAtLevel(1e4),n(Ie)&&(Ie=oe.selectedIndex!=null?oe.selectedIndex:0),Oe.selectedIndex=Ie,at!==!1&&t.styleTransforms(this,oe),this.clone=function(){return Oe.cloneProps(new t.List(e,Re,t.copy(Oe.originalList,!0),l,a,s,c,d,C,T,h,w,A,y,v,P,x,E,k,p,m,S,_,Y,B,b,Ve,De,O,t.copy(Z),W,K,ne,F,D,u,f,o,g,q,I,R,le,N,L,ee,z,$,xe,ie,ke,U,Ee,Q,G,ue,fe,ye,H,re,pe,te,ge,Ae,ae,de,se,Ie,Te,ve,J,Se,Be,Ye,Ke,at,this.group,Ge))},this.dispose=function(qe,ht,st){return st||(Oe.stageToggleEvent&&xt.off("stagemousedown",Oe.stageToggleEvent),Oe.organizer&&Oe.organizer.dispose(),this.zimWindow_dispose()),!0}},t.extend(t.List,t.Window,["clone","dispose"],"zimWindow",!1),t.List.makeBase=function(e,r,i,l){n(l)&&(l=t.dark),e.backing=new t.Rectangle(e.width,e.height,l).center(e),r.type=="Label"?e.label=r:e.label=new t.Label(r,null,null,t.white),e.text=e.label.text,e.label.center(e).loc(i)},t.List.slider=function(e,r,i,l,a,s,c,d,C,T,h,w,A){var y="label, min, max, val, call, step, obj, property, paddingLeft, paddingRight, factor, offset, backgroundColor",v;if(v=lt(t.List.slider,arguments,y))return v;var P=new t.Container(620,100);return P.type="ListItem",P.listItem="Slider",n(C)&&(C=20),n(T)&&(T=30),n(h)&&(h=1),n(w)&&(w=0),t.List.makeBase(P,e,C,A),P.slider=new t.Slider({inside:!0,barWidth:40,barLength:150,barColor:t.blue,min:r,max:i,step:s}).sca(1.5).center(P).mov(20).change(function(){P.stepper.currentValue=w+Math.round(P.slider.currentValue*h),c&&d&&(c[d]=P.slider.currentValue),a&&typeof a=="function"&&a(P.slider.currentValue,P.parent),P.slider.stage&&P.slider.stage.update()}),n(l)||(P.slider.currentValue=l),P.stepper=new t.Stepper({corner:0,arrows:!1,stepperType:"number",min:w+r*h,max:w+i*h,step:s}).sca(.5).center(P).pos(T,null,!0).change(function(){P.slider.currentValue=P.stepper.currentValue/(h||1)-w,c&&d&&(c[d]=P.slider.currentValue),a&&typeof a=="function"&&a(P.slider.currentValue,P.parent),P.stepper.stage&&P.stepper.stage.update()}),n(l)||(P.stepper.currentValue=w+l*h),P},t.List.checkBox=function(e,r,i,l,a,s,c,d){var C="label, checked, call, obj, property, paddingLeft, paddingRight, backgroundColor",T;if(T=lt(t.List.checkBox,arguments,C))return T;var h=new t.Container(620,100);return h.type="ListItem",h.listItem="CheckBox",n(s)&&(s=20),n(c)&&(c=30),t.List.makeBase(h,e,s,d),h.checkBox=new t.CheckBox({startChecked:r,label:""}).sca(1.2).center(h).pos(256+c,null,!0).change(function(){l&&a&&(l[a]=h.checkBox.checked),i&&typeof i=="function"&&i(h.checkBox.checked,h.parent),h.checkBox.stage&&h.checkBox.stage.update()}),h},t.List.colorPicker=function(e,r,i,l,a,s,c,d,C){var T="label, color, picker, call, obj, property, paddingLeft, paddingRight, backgroundColor",h;if(h=lt(t.List.colorPicker,arguments,T))return h;var w=new t.Container(620,100);return w.type="ListItem",w.listItem="ColorPicker",n(c)&&(c=20),n(d)&&(d=30),t.List.makeBase(w,e,c,C),n(r)&&(r=t.pink),w.colorPicker=i||new t.ColorPicker({alphaPicker:!1,selectedColor:r}),w.swatch=new t.Rectangle(132,66,r,t.lighter,5).center(w).pos(270,null,!0).cur(),w.swatch.on("mousedown",function(){w.colorPicker.selectedColor=w.swatch.color,w.colorPicker.show()}),w.colorLabel=new t.Label(w.swatch.color.toUpperCase(),40,null,t.light).center(w).pos(d,null,!0),w.colorPicker.on("close",function(){var A=w.colorPicker.stage;w.colorPicker.hide(),A&&A.update()}),w.colorPicker.on("change",function(){var A=w.colorPicker.stage;w.swatch.color=w.colorPicker.selectedColor,w.colorLabel.text=w.swatch.color.toUpperCase(),w.colorPicker.hide(),a&&s&&(a[s]=w.colorPicker.selectedColor),l&&typeof l=="function"&&l(w.colorPicker.selectedColor,w.parent),A&&A.update()}),w},t.List.checkItem=function(e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,x){var E="label, size, width, align, paddingH, paddingV, spacing, color, rollColor, selectedColor, selectedRollColor, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, group, inherit",k;if(k=lt(t.List.checkItem,arguments,E))return k;var p=t.getStyle("CheckBox",P,x);n(r)&&(r=p.size!=null?p.size:20);var m=t.getStyle("List",P,x);n(i)&&(i=300),n(a)&&(a=10),n(s)&&(s=10),n(l)&&(l=m.align!=null?m.align:"center"),n(c)&&(c=m.spacing!=null?m.spacing:2),n(w)&&(w=m.backgroundColor!=null?m.backgroundColor:t.tin),n(A)&&(A=m.rollBackgroundColor!=null?m.rollBackgroundColor:t.grey),n(y)&&(y=m.selectedBackgroundColor!=null?m.selectedBackgroundColor:t.charcoal),n(v)&&(v=m.selectedRollBackgroundColor!=null?m.selectedRollBackgroundColor:t.grey),n(d)&&(d=m.color!=null?m.color:t.white),n(C)&&(C=m.rollColor!=null?m.rollColor:d),n(T)&&(T=m.selectedColor!=null?m.selectedColor:d),n(h)&&(h=m.selectedRollColor!=null?m.selectedRollColor:C);var S=new t.Container;return S.type="CheckItem",S.checkBox=new t.CheckBox({size:r,label:e,color:d,tap:!0}),S.backing=new t.Rectangle(i-c*2,S.checkBox.height+s*2,w).addTo(S),S.checkBox.center(S),l!="center"&&l!="middle"&&S.checkBox.pos(a,null,l=="right"),S.backing.tap(function(){S.checkBox.toggle(),S.zimOut()}),S.checkBox.change(function(){S.zimOut()}),S.zimOver=function(){S.backing.color=S.checkBox.checked?v:A,S.checkBox.label.color=S.checkBox.checked?h:C,S.stage&&S.stage.update()},S.zimOut=function(){S.backing.color=S.checkBox.checked?y:w,S.checkBox.label.color=S.checkBox.checked?T:d,S.stage&&S.stage.update()},S.backing.on("mouseover",S.zimOver),S.checkBox.on("mouseover",S.zimOver),S.backing.on("mouseout",S.zimOut),S.checkBox.on("mouseout",S.zimOut),S},t.Stepper=function(e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,x,E,k,p,m,S,_,Y,B,b,X,V,O,Z,W,K,ne,F,D,u,f,o){var g="list, width, backgroundColor, borderColor, borderWidth, label, color, vertical, arrows, corner, shadowColor, shadowBlur, continuous, display, press, hold, holdDelay, holdSpeed, draggable, dragSensitivity, dragRange, stepperType, min, max, step, step2, arrows2, arrows2Scale, keyEnabled, keyArrows, rightForward, downForward, selectedIndex, currentValue, arrowColor, style, group, inherit",q;if(q=lt(t.Stepper,arguments,g,this))return q;Le("61"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Stepper",this.group=f;var I=u===!1?{}:t.getStyle(this.type,this.group,o);n(e)&&(e=I.list!=null?I.list:[]),n(r)&&(r=I.width!=null?I.width:100),n(i)&&(i=I.backgroundColor!=null?I.backgroundColor:t.white),n(l)&&(l=I.borderColor!=null?I.borderColor:null),n(a)&&(a=I.borderWidth!=null?I.borderWidth:null),l<0||a<0?l=a=null:l!=null&&a==null&&(a=1),n(c)&&(c=I.color!=null?I.color:t.grey),n(s)&&(s=I.label!=null?I.label:""),(typeof s=="string"||typeof s=="number")&&(s=new t.Label({text:s,size:I.size!=null?I.size*2:40,color:c,align:I.align!=null?I.align:"center",valign:I.valign!=null?I.valign:"center",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group}).loc(0,0)),n(d)&&(d=I.vertical!=null?I.vertical:!1),n(C)&&(C=I.arrows!=null?I.arrows:!0),n(T)&&(T=I.corner!=null?I.corner:16),n(h)&&(h=I.shadowColor!=null?I.shadowColor:"rgba(0,0,0,.3)"),n(w)&&(w=I.shadowBlur!=null?I.shadowBlur:14),n(A)&&(A=I.continuous!=null?I.continuous:!1),n(y)&&(y=I.display!=null?I.display:!0),n(v)&&(v=I.press!=null?I.press:!0),n(P)&&(P=I.hold!=null?I.hold:!0);var R=Tt(x);n(x)&&(x=I.holdDelay!=null?I.holdDelay:R=="s"?.4:400),n(E)&&(E=I.holdSpeed!=null?I.holdSpeed:R=="s"?.2:200),kt(E,R),n(k)&&(k=I.draggable!=null?I.draggable:!0),(n(p)||p<=0)&&(p=I.dragSensitivity!=null?I.dragSensitivity:.1),n(m)&&(m=I.dragRange!=null?I.dragRange:200),n(S)&&(S=I.stepperType!=null?I.stepperType:e.length>0?"list":"number"),n(_)&&(_=I.min!=null?I.min:0),n(Y)&&(Y=I.max!=null?I.max:10),n(B)&&(B=I.step!=null?I.step:1),n(b)&&(b=I.step2!=null?I.step2:B),n(X)&&b!=B&&S=="number"&&(X=I.arrows2!=null?I.arrows2:!0),n(V)&&(V=I.arrows2Scale!=null?I.arrows2Scale:.5),n(O)&&(O=I.keyEnabled!=null?I.keyEnabled:!0),n(Z)&&(Z=I.keyArrows!=null?I.keyArrows:!0),n(W)&&(W=I.rightForward!=null?I.rightForward:!0),n(K)&&(K=I.downForward!=null?I.downForward:S!="number"),n(D)&&(D=I.arrowColor!=null?I.arrowColor:i);var le=this,N,L=60,ee=L/4;i=et(i);var z=B,$,xe=1,ie;if(S=="number"){if(_=Number(_),Y=Number(Y),isNaN(_)&&(_=0),isNaN(Y)&&(Y=100),Y<_){xe=-1;var ke=Y;Y=_,_=ke,$=Y}else $=_;this.min=_,this.max=Y,0>_&&0<Y&&($=0),B=Math.abs(B),ie=Math.max(Q(B),Q(b))}else if(S=="letter"){e="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),typeof _!="string"&&(_="A"),typeof Y!="string"&&(Y="Z"),_=_.substr(0,1).toUpperCase(),Y=Y.substr(0,1).toUpperCase();var U=e.indexOf(_);U<0&&(_="A",U=0);var Ee=e.indexOf(Y);Ee<0&&(Y="Z",Ee=e.length),Ee<U&&(e.reverse(),U=e.length-1-U,Ee=e.length-1-Ee),e=e.splice(U,Ee-U+1)}else S="list";function Q(Ve){var De=String(Ve).split(".")[1];return De?De=De.length:De=0,De}var G,ue=0,fe=0;k&&this.on("mousedown",function(Ve){le.zimAccessibility&&le.zimAccessibility.aria||(this.stage.mouseMoveOutside=!0,ue=Ve.rawX/t.scaX,fe=Ve.rawY/t.scaY,G=this.stage.on("stagemousemove",function(De){ue=De.rawX/t.scaX,fe=De.rawY/t.scaY}))},null,!0),this.label=s,s.mouseChildren=!1,s.mouseEnabled=!1;var ye,H,re,pe,te,ge,Ae,ae,de,se,Ie,Te,ve;if(C&&(re=this.containerPrev=new t.Container({style:!1}),this.addChild(re),pe=this.arrowPrev=new t.Triangle(L,L*.8,L*.8,D,null,null,null,null,null,null,null,!1),h!=-1&&w>0&&(re.shadow=new Ne.Shadow(h,3,3,w)),re.addChild(pe),re.expand(),re.cur("pointer"),re.on("mousedown",function(Ve){if(!(le.zimAccessibility&&le.zimAccessibility.aria)){z=B;var De=d?K?1:-1:W?-1:1;Ke(De),Be(De,null,null,Ve.stageX/t.scaX,Ve.stageY/t.scaY)}}),P&&re.on("pressup",Ye),d?(re.rotation=180,re.x=r/2,y?re.y=re.height+ee+L+re.height/2+ee:re.y=re.height*2):(re.rotation=-90,re.x=re.height/2,re.y=re.width/2)),y){var J=this.textBox=new t.Rectangle(r,L,i,l,a,T,null,null,null,!1);J.cur("pointer"),this.addChild(J),h!=-1&&w>0&&(J.shadow=new Ne.Shadow(h,3,3,w)),C&&(d?C&&(J.y=pe.height+ee):C&&(J.x=pe.height+ee)),this.addChild(s),e.length>0&&(N=0,s.text=e[N]),s.center(le);var Se;J.on("mousedown",function(Ve){le.zimAccessibility&&le.zimAccessibility.aria||(Se=le.currentValue,v&&Ke(1),Be(1,!0,null,Ve.stageX/t.scaX,Ve.stageY/t.scaY))}),J.on("pressup",function(){le.zimAccessibility&&le.zimAccessibility.aria})}else e.length>0&&(N=0);C&&(te=this.containerNext=new t.Container({style:!1}),this.addChild(te),ge=this.arrowNext=new t.Triangle(L,L*.8,L*.8,D,null,null,null,null,null,null,null,!1),h!=-1&&w>0&&(te.shadow=new Ne.Shadow(h,3,3,w)),te.addChild(ge),te.expand(),te.cur("pointer"),te.on("mousedown",function(Ve){if(!(le.zimAccessibility&&le.zimAccessibility.aria)){z=B;var De=d?K?-1:1:W?1:-1;Ke(De),Be(De,null,null,Ve.stageX/t.scaX,Ve.stageY/t.scaY)}}),P&&te.on("pressup",Ye),d?(te.rotation=0,te.x=r/2,te.y=te.getBounds().height/2):(te.rotation=90,y?te.x=J.x+J.getBounds().width+te.getBounds().height/2+ee:te.x=re.x+re.getBounds().width,te.y=te.getBounds().width/2));function Be(Ve,De,Oe,Re,Ze){if(P){Ie=Re,Te=Ze,Ie==0&&(Ie=1),Te==0&&(Te=1),k||(p=1);var be=E*(R=="s"?1e3:1),we=x*(R=="s"?1e3:1),Me=be;ve=new t.Proportion(0,m,be,be*p),ye=setTimeout(function(){function He(){H=setTimeout(function(){var Xe=Ve;if(k){var nt=Math.abs(ue-Ie),Ce=Math.abs(fe-Te);d?(!De&&!Oe&&(nt=0),Oe&&(Ce=0)):(!De&&!Oe&&(Ce=0),Oe&&(nt=0)),(nt>=10||Ce>=10)&&(nt>Ce?(z=d?b:B,Xe=ue-Ie>0?1:-1,W||Xe*-1,Me=ve.convert(Math.abs(Ie-ue))):(z=d?B:b,Xe=fe-Te>0?1:-1,(S=="number"||!K)&&(Xe*=-1),Me=ve.convert(Math.abs(Te-fe))))}Ke(Xe),He()},Me)}He()},we)}}P&&y&&J.on("pressup",Ye);function Ye(){le.zimAccessibility&&le.zimAccessibility.aria||(clearTimeout(ye),clearTimeout(H))}X&&(Ae=this.prev2=new t.Container({style:!1}),ae=this.arrowPrev2=new t.Triangle(L,L*.8,L*.8,"rgba(0,0,0,.2)",D,2,null,null,null,null,null,!1),Ae.addChild(ae),Ae.expand(),Ae.cur("pointer"),Ae.sca(V),Ae.alpha=.5,Ae.on("mousedown",function(Ve){if(!(le.zimAccessibility&&le.zimAccessibility.aria)){z=b;var De=d?W?-1:1:K?1:-1;Ke(De),Be(De,null,!0,Ve.stageX/t.scaX,Ve.stageY/t.scaY)}}),P&&Ae.on("pressup",Ye),de=this.next2=new t.Container({style:!1}),se=this.arrowNext2=new t.Triangle(L,L*.8,L*.8,"rgba(0,0,0,.2)",D,2,null,null,null,null,null,!1),de.addChild(se),de.expand(),de.cur("pointer"),de.sca(V),de.alpha=.5,de.on("mousedown",function(Ve){if(!(le.zimAccessibility&&le.zimAccessibility.aria)){z=b;var De=d?W?1:-1:K?-1:1;Ke(De),Be(De,null,!0,Ve.stageX/t.scaX,Ve.stageY/t.scaY)}}),P&&de.on("pressup",Ye),d?(Ae.y=this.height/2,Ae.x=-Ae.width/2-ee*Math.max(.2,Math.min(1,V)),Ae.rotation=270,de.y=this.height/2,de.x=this.width+de.width/2+ee*Math.max(.2,Math.min(1,V)),de.rotation=90):(de.x=this.width/2,de.y=-de.height/2-ee*Math.max(.2,Math.min(1,V)),de.rotation=0,Ae.x=this.width/2,Ae.y=this.height+Ae.height/2+ee*Math.max(.2,Math.min(1,V)),Ae.rotation=180),this.addChild(Ae,de)),Object.defineProperty(this,"stepperArray",{get:function(){if(S=="number"){e=[];for(var Ve=le.min;Ve<=le.max;Ve+=Math.min(B,b))e.push(Number(t.decimals(Ve,ie,null,!1)))}return e},set:function(Ve){e=Ve;var De=le.selectedIndex;le.selectedIndex=De}}),Object.defineProperty(this,"min",{get:function(){return _},set:function(Ve){if(S=="number"){le.currentValue<Ve&&(le.currentValue=Ve),_=Ve;var De=le.selectedIndex;le.selectedIndex=De}else _=Ve}}),Object.defineProperty(this,"max",{get:function(){return Y},set:function(Ve){if(S=="number"){le.currentValue>Ve&&(le.currentValue=Ve),Y=Ve;var De=le.selectedIndex;le.selectedIndex=De}else Y=Ve}}),Ge(S=="number"?$:e[N],S=="number"?$:N);function Ke(Ve){var De;if(S=="number"){$=Number($);var Oe=$;$+=Number(z*Ve*xe),$=t.decimals($,ie),A?$>le.max?$=le.min:$<le.min&&($=le.max):($>le.max?($=B==1?le.max:Oe,y&&J.cur("default")):y&&J.cur("pointer"),$<le.min&&($=B==1?le.min:Oe))}else{if(De=N+Ve,A)De>e.length-1&&(De=0),De<0&&(De=e.length-1);else{if(De>e.length-1){y&&J.cur("default");return}else y&&J.cur("pointer");if(De<0)return}N=De}Ge(S=="number"?$:e[N],S=="number"?$:N),le.currentValue!=Se&&le.dispatchEvent("change"),Se=le.currentValue}Object.defineProperty(this,"selectedIndex",{get:function(){return S=="number"?le.stepperArray.indexOf(le.currentValue):N},set:function(Ve){n(Ve)||(S=="number"?(N=Math.min(le.stepperArray.length-1,Math.max(0,Ve)),$=le.stepperArray[N],Ge($,$)):(Ve=Math.min(e.length-1,Math.max(0,Ve)),N=Ve,Ge(e[N],N)))}}),Object.defineProperty(this,"currentValue",{get:function(){return S=="number"?Number($):e[N]},set:function(Ve){if(!n(Ve))if(S=="number"){if(Ve=Number(Ve),le.max>le.min){if(Ve>le.max||Ve<le.min)return}else if(Ve<le.max||Ve>le.min)return;var De=le.stepperArray.indexOf(Ve);if(De<0)return;N=De,$=Number(le.stepperArray[N]),Ge($,$)}else{if(e.indexOf(Ve)>-1)Ve=e.indexOf(Ve);else return;if(Ve==le.selectedIndex)return;N=Ve,Ge(e[N],N)}}}),Object.defineProperty(this,"currentValueEvent",{get:function(){return le.currentValue},set:function(Ve){String(Ve)!=String(le.currentValue)&&(le.currentValue=Ve,le.dispatchEvent("change"))}}),Object.defineProperty(this,"continuous",{get:function(){return A},set:function(Ve){A=Ve,S=="number"?Ge($,$):Ge(e[le.selectedIndex],le.selectedIndex)}}),this._enabled=!0,Object.defineProperty(le,"enabled",{get:function(){return le._enabled},set:function(Ve){It(le,Ve),Ve?(S=="number"?Ge($,$):Ge(e[le.selectedIndex],le.selectedIndex),j.addEventListener("keydown",le.keyDownEvent)):(Je(),ce(),j.removeEventListener("keydown",le.keyDownEvent),y&&(s.mouseChildren=!1),y&&(s.mouseEnabled=!1)),te&&!t.OPTIMIZE&&(mt||!j.OPTIMIZE)&&te.stage?te.stage.update():s&&!t.OPTIMIZE&&(mt||!j.OPTIMIZE)&&s.stage&&s.stage.update()}}),j.KEYFOCUS!=null&&(t.KEYFOCUS=j.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return t.KEYFOCUS==le},set:function(){t.KEYFOCUS=le}}),t.KEYFOCUS||at(),this.on("mousedown",function(){at()});function at(){le.keyFocus=!0;var Ve=document.activeElement;Ve&&Ve.blur()}function me(){re.alpha=1,pe.color=D,re.cur("pointer"),te.alpha=1,ge.color=D,te.cur("pointer"),A||(S=="number"?(N==le.min&&(xe>0?Je():ce()),N==le.max&&(xe>0?ce():Je())):(N==0&&(d?ce():Je()),N==e.length-1&&(d?Je():ce())))}function Ge(Ve,De){N=De,y&&(S=="number"&&Ve!=0&&ie>0&&(Ve=t.decimals(Ve,ie,!0)),s.text=Ve,s.center(le)),C&&me(),te&&!t.OPTIMIZE&&(mt||!j.OPTIMIZE)&&te.stage?te.stage.update():s&&!t.OPTIMIZE&&(mt||!j.OPTIMIZE)&&s.stage&&s.stage.update(),le.zimAccessibility&&le.zimAccessibility.changeTitle(le,null,!0)}function Je(){C&&(re.alpha=.8,pe.color=t.fog,re.cur("default"))}function ce(){C&&(te.alpha=.8,ge.color=t.fog,te.cur("default"))}var oe,_e=!0,je="";this.on("mousedown",function(){_e=!0,je="",!(le.zimAccessibility&&le.zimAccessibility.aria)&&(le.focus=!0,oe=!1)}),this.keyDownEvent=function(Ve){if(le.stage&&(le.zimAccessibility&&le.focus||!le.zimAccessibility&&le.keyFocus)){Ve||(Ve=event);var De=Ve.keyCode;if(Z&&De>=37&&De<=40){var Oe=K?40:38,Re=W?39:37,Ze=K?38:40,be=W?37:39;De==Oe||De==Re?(d&&De==Oe||!d&&De==Re?z=B:z=b,Ke(1)):(De==Ze||De==be)&&(d&&De==Ze||!d&&De==be?z=B:z=b,Ke(-1))}if(O)if(S=="number"){var we=null,Me=null;if(De==8){var He=String(je).split("");He.pop(),we=He.pop(),je=He.join("")}if(!Ve.shiftKey&&De>=48&&De<=57?we=De-48:De>=96&&De<=105?we=De-96:De==190?(je=String(je)+".",Me=!0):De==173||De==189?(le.currentValue=le.currentValue*-1,le.currentValue!=Se&&le.dispatchEvent("change"),Se=le.currentValue,oe=!oe):De==46&&(_e=!0,je=""),n(we)&&n(Me)){_e=!0,je="";return}if(n(we)||(_e?(_e=!1,je=we):je=we=+(je+""+we),we<_||we>Y))return;le.currentValue=we,le.currentValue!=Se&&le.dispatchEvent("change"),Se=le.currentValue}else _e=!0,je="",le.currentValue=String.fromCharCode(Ve.keyCode),le.currentValue!=Se&&le.dispatchEvent("change"),Se=le.currentValue}},j.addEventListener("keydown",this.keyDownEvent),this.next=function(){Ke(1)},this.prev=function(){Ke(-1)},n(ne)&&(ne=I.selectedIndex!=null?I.selectedIndex:0),le.selectedIndex=ne,n(F)&&(F=I.currentValue!=null?I.currentValue:null),n(F)||(le.currentValue=F),u!==!1&&t.styleTransforms(this,I),this.clone=function(){return le.cloneProps(new t.Stepper(e,r,i,l,a,s.clone(),c,d,C,T,h,w,A,y,v,P,x,E,k,p,m,S,_,Y,B,b,X,V,O,Z,W,K,ne,F,D,u,this.group,o))},this.dispose=function(Ve,De,Oe){return j.removeEventListener("keydown",le.keyDownEvent),le.removeAllEventListeners(),le.stage&&le.stage.off(G),Oe||this.zimContainer_dispose(!0),re=this.containerPrev=pe=this.arrowPrev=null,te=this.containerNext=ge=this.arrowNext=null,J=this.textBox=s=this.label=null,!0}},t["zut"]=function(e){if(!n(e)&&e["key"])t.async("https://zimjs.com/gamdata.php?id="+e["key"]+"&player="+e["player"]+"&score="+e["score"]+"&reverse="+e["info"]["reverse"]+"&total="+e["info"]["total"]+"&allowZero="+e["info"]["allowZero"],e["info"]["type"]);else return!0},t.extend(t.Stepper,t.Container,["clone","dispose"],"zimContainer",!1),t.Slider=function(e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,x,E,k,p,m,S,_,Y,B,b,X,V,O,Z,W,K,ne,F,D,u){var f="min, max, step, button, barLength, barWidth, barColor, vertical, useTicks, tickColor, tickStep, semiTicks, tickScale, semiTickScale, accentSize, accentOffset, accentColor, accentBackgroundColor, accentDifference, sound, inside, keyArrows, keyArrowsStep, keyArrowsH, keyArrowsV, damp, currentValue, expand, expandVertical, expandBar, expandBarVertical, useLabels, labelMargin, style, group, inherit",o;if(o=lt(t.Slider,arguments,f,this))return o;Le("62"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Slider",this.group=D;var g=F===!1?{}:t.getStyle(this.type,this.group,u);if(n(e)&&(e=g.min!=null?g.min:0),n(r)&&(r=g.max!=null?g.max:10),r-e==0){$e("ZIM Slider range must not be 0");return}n(p)&&(p=g.sound!=null?g.sound:!1),n(i)&&(i=g.step!=null?g.step:0),n(l)&&(l=g.button!=null?g.button:p?"aztec":null),l&&l.type=="Button"&&(l=l.clone()),n(a)&&(a=g.barLength!=null?g.barLength:300),n(s)&&(s=g.barWidth!=null?g.barWidth:3),n(c)&&(c=g.barColor!=null?g.barColor:p?t.lighter:t.granite),n(d)&&(d=g.vertical!=null?g.vertical:!!p),n(C)&&(C=g.useTicks!=null?g.useTicks:!!p),n(h)&&(h=g.tickStep!=null?g.tickStep:i||(C||p?(r-e)/40:0)),n(w)&&(w=g.semiTicks!=null?g.semiTicks:h?3:0),n(T)&&(T=g.tickColor!=null?g.tickColor:p?t.tin:c),n(A)&&(A=g.tickScale!=null?g.tickScale:p?1.25:1),n(y)&&(y=g.semiTickScale!=null?g.semiTickScale:1),n(v)&&(v=g.accentSize!=null?g.accentSize:p?10:0),n(P)&&(P=g.accentOffset!=null?g.accentOffset:p?-(v+s)/2:0),n(x)&&(x=g.accentColor!=null?g.accentColor:t.pink),n(E)&&(E=g.accentBackgroundColor!=null?g.accentBackgroundColor:p?t.blue:t.clear),n(k)&&(k=g.accentDifference!=null?g.accentDifference:-.5),n(m)&&(m=g.inside!=null?g.inside:!1),n(S)&&(S=g.keyArrows!=null?g.keyArrows:!0),n(Y)&&(Y=g.keyArrowsH!=null?g.keyArrowsH:!0),n(B)&&(B=g.keyArrowsV!=null?g.keyArrowsV:!0),n(_)&&(_=g.keyArrowsStep!=null?g.keyArrowsStep:(r-e)/100),n(b)&&(b=g.damp!=null?g.damp:!1),n(X)&&(X=g.currentValue!=null?g.currentValue:!1),n(V)&&(V=g.expand!=null?g.expand:t.mobile()?10:null),n(O)&&(O=g.expandVertical!=null?g.expandVertical:V),n(Z)&&(Z=g.expandBar!=null?g.expandBar:null),n(W)&&(W=g.expandBarVertical!=null?g.expandBarVertical:V),n(K)&&(K=g.useLabels!=null?g.useLabels:!1),n(ne)&&(ne=g.labelMargin!=null?g.labelMargin:20);var q,I=this,R=le(e,r,i,X);this.veeObj={min:R[0],max:R[1],step:R[2],currentValue:R[3]};function le(){return arguments}e=t.Pick.choose(e),r=t.Pick.choose(r),i=t.Pick.choose(i);var N=i;X=t.Pick.choose(X);var L;v&&(I.accentBacking=new t.Rectangle(a-.25,v+k,E).addTo(this).rot(d?90:0).mov(d?-P-s/2+k/2:.25,d?0:P+s/2-k/2),L=I.accent=new t.Rectangle(a,v,x).sca(0,1).rot(d?-90:0).mov(d?-P-v-s/2:0,d?a:P+s/2).addTo(this));function ee(){L.sca((I.currentValue-I.min)/Math.abs(I.max-I.min),1)}var z=!(!n(g.backing)&&g.backing.type!="Pattern");function $(Me,He,Xe){var nt=new t.Shape(He,Xe);return nt.f(Me).s(g.borderColor!=null?g.borderColor:t.tin).ss(g.borderWidth!=null?g.borderWidth:3).mt(2,0).lt(He+2,Xe*.2).lt(He+2,Xe*.8).lt(2,Xe).cp().centerReg({add:!1}),nt}if(n(l)||typeof l=="string"){var xe=30,ie=40;d&&(xe=50,ie=40);var ke;if(l=="pill"||l=="aztec"||l=="circle"||l=="grip"){if(l=="pill")ke={width:d?40:18,height:d?18:40,borderColor:t.tin,borderWidth:3,corner:8};else if(l=="aztec"){xe=g.width!=null?g.width:Math.max(xe,ie)*.9,ie=g.height!=null?g.height:Math.min(xe,ie)*.6;var U=$(g.backgroundColor!=null?g.backgroundColor:t.lighter,xe,ie).rot(d?0:-90),Ee=$(g.rollBackgroundColor!=null?g.rollBackgroundColor:t.white,xe,ie).rot(d?0:-90);ke={width:xe,height:ie,backing:U,rollBacking:Ee},g.borderWidth=0,g.borderColor=0}else l=="circle"&&(xe=g.width!=null?g.width:30,ie=g.height!=null?g.height:30,ke={width:xe,height:xe,corner:g.corner!=null?g.corner:xe/2});I.buttonType=l}var Q=g.borderColor!=null?g.borderColor:ke?ke.borderColor:z?t.granite:null;if(l=new t.Button({width:g.width!=null?g.width:ke?ke.width:xe,height:g.height!=null?g.height:ke?ke.height:ie,label:"",backgroundColor:g.backgroundColor!=null?g.backgroundColor:t.white,rollBackgroundColor:g.rollBackgroundColor!=null?g.rollBackgroundColor:n(g.backgroundColor)||g.backgroundColor==t.white?t.moon:g.backgroundColor.lighten(.2),borderColor:Q,rollBorderColor:g.rollBorderColor!=null?g.rollBorderColor:Q,borderWidth:g.borderWidth!=null?g.borderWidth:ke?ke.borderWidth:z?1:null,corner:g.corner!=null?g.corner:ke?ke.corner:0,backing:g.backing!=null?g.backing.clone():ke?ke.backing:null,rollBacking:g.rollBacking!=null?g.rollBacking.clone():ke?ke.rollBacking:null,shadowColor:g.shadowColor!=null?g.shadowColor:null,shadowBlur:g.shadowBlur!=null?g.shadowBlur:null,hitPadding:30,style:!1}),I.buttonType=="circle")l.scaleY=ie/xe,d||l.rot(-90);else if(I.buttonType=="grip"){var G=[1,1,1],ue=.4;t.loop(G,function(Me,He,Xe){d?new t.Line(l.width*.62,Me,l.borderColor?l.borderColor:t.grey).pos(0,l.height*ue/2+(He+1)*(l.height*(1-ue))/(Xe+1),t.CENTER,t.TOP,l):new t.Line(l.height*.62,Me,l.borderColor?l.borderColor:t.grey).rot(90).pos(l.width*ue/2+(He+1)*(l.width*(1-ue))/(Xe+1),0,t.LEFT,t.CENTER,l)})}}l.rollPersist=!0,(!n(V)||!n(O))&&l.expand(V,O);var fe,ye;d?(fe=l.width,m?(ye=a,this.setBounds(0,0,fe,ye)):(ye=a+l.height,this.setBounds(-l.width/2,-l.height/2,fe,ye))):(ye=Math.max(l.height,s),m?(fe=a,this.setBounds(0,0,fe,ye)):(fe=a+l.width,this.setBounds(-l.width/2,-l.height/2,fe,ye)));var H=e,re=0;this.button=l,this.cur("pointer");var pe,te,ge,Ae,ae;if(C){Ae=this.ticks=new t.Shape({style:!1}),this.addChild(Ae),ae=Ae.graphics,ae.ss(1).s(T);var de=Math.round((r-e)/(h||i)),se=(r-e)/de;h?(se!=h&&dt&&$e("Slider() - non-divisible step ("+h+") adjusted to "+se),h=se):(se!=i&&dt&&$e("Slider() - non-divisible step ("+i+") adjusted to "+se),i=se);var Ie;m?Ie=(a-(d?l.height:l.width))/Math.abs(de):Ie=a/Math.abs(de)}var Te,ve,J,Se,Be,Ye,Ke;if(d){if(Te=m?l.height/2:0,pe=this.bar=new t.Rectangle(s,a,c,null,null,null,null,null,null,!1),Z?pe.expand(Z,W):pe.expand(20,0),pe.centerReg(this),l.centerReg(this),ge=pe.getBounds(),te=new Ne.Rectangle(pe.x,ge.y+Te,0,ge.height-Te*2),C){for(K&&(ve=I.labels=new t.Container().addTo(I)),J=0;J<=Math.abs(de);J++)Se=J%(w+1)==0,Be=Se?25*A:15*y,Ye=Te+Ie*J,ae.mt(0,Ye).lt(Be,Ye),K&&(w&&Se||!w)&&(Ke=Math.max(t.countDecimals(N),t.countDecimals(e),t.countDecimals(r)),new t.Label({text:t.decimals(r-(r-e)/Math.abs(de)*J,Ke+1),size:g.size?g.size:10,align:"left",valign:"center"}).centerReg({add:!1}).reg(0).loc(Be+ne+2,Ye-1,ve));Ae.x=pe.x+15}}else if(Te=m?l.width/2:0,pe=this.bar=new t.Rectangle(a,s,c,null,null,null,null,null,null,!1),Z?pe.expand(Z,W):pe.expand(0,20),pe.centerReg(this),l.centerReg(this),ge=pe.getBounds(),te=new Ne.Rectangle(ge.x+Te,pe.y,ge.width-Te*2,0),C){for(K&&(ve=I.labels=new t.Container().addTo(I)),J=0;J<=Math.abs(de);J++)Se=J%(w+1)==0,Be=Te+Ie*J,Ye=-(Se?25*A:15*y),ae.mt(Be,0).lt(Be,Ye),K&&(w&&Se||!w)&&(Ke=Math.max(t.countDecimals(N),t.countDecimals(e),t.countDecimals(r)),new t.Label({text:t.decimals(e+(r-e)/Math.abs(de)*J,Ke+1),size:g.size?g.size:10,align:"center",valign:"center"}).centerReg({add:!1}).loc(Be,Ye-ne,ve));Ae.y=pe.y-10}l.x=te.x,l.y=te.y;function at(Me){return i==0?Me:Math.round(Me/i)*i}var me,Ge;l.on("mousedown",function(Me){q=Me.target.stage,I.focus=!0;var He=I.globalToLocal(Me.stageX/t.scaX,Me.stageY/t.scaY);me=He.x-l.x,Ge=He.y-l.y,q&&(q.mouseMoveOutside=!0)}),l.on("pressmove",function(Me){Je(Me)});function Je(Me){var He=I.globalToLocal(Me.stageX/t.scaX,Me.stageY/t.scaY),Xe=_e(He.x-me,He.y-Ge,te);d?(l.x=Xe.x,H=at((Xe.y-te.y)/te.height*(e-r)),l.y=te.y+H*te.height/(e-r),H+=r,l.y!=re&&I.dispatchEvent("change"),re=l.y):(H=at((Xe.x-te.x)/te.width*(r-e)),l.x=te.x+H*te.width/(r-e),H+=e,l.y=Xe.y,l.x!=re&&I.dispatchEvent("change"),re=l.x),L&&ee(),oe(),!t.OPTIMIZE&&(mt||!j.OPTIMIZE)&&I.stage&&I.stage.update()}function ce(Me){return Me>0?1:-1}function oe(){I.zimAccessibility&&I.zimAccessibility.changeTitle(I,null,!0)}function _e(Me,He,Xe){return Me=Math.max(Xe.x,Math.min(Xe.x+Xe.width,Me)),He=Math.max(Xe.y,Math.min(Xe.y+Xe.height,He)),{x:Me,y:He}}pe.on("mousedown",function(Me){q=Me.target.stage,me=0,Ge=0,!(I.zimAccessibility&&I.zimAccessibility.aria)&&Je(Me)});var je,Ve;b&&(je=e,Ve=new t.Damp(je,b),I.ticker=t.Ticker.add(function(){je=Ve.convert(H)})),Object.defineProperty(this,"currentValue",{get:function(){return b?je:H},set:function(Me){n(Me)||(e<r?(Me<e&&(Me=e),Me>r&&(Me=r)):(Me>e&&(Me=e),Me<r&&(Me=r)),H=Me=at(Me),Ve&&Ve.immediate(H),d?(l.y=(Me-r)/(e-r)*te.height+Te,re=l.y):(l.x=(Me-e)/(r-e)*te.width+Te,re=l.x),L&&ee(),oe(),!t.OPTIMIZE&&(mt||!j.OPTIMIZE)&&I.stage&&I.stage.update())}}),Object.defineProperty(this,"currentValueEvent",{get:function(){return b?je:H},set:function(Me){Me!=I.currentValue&&(I.currentValue=Me,I.dispatchEvent("change"))}}),Object.defineProperty(this,"min",{get:function(){return e},set:function(){dt&&$e("Slider() - min is read only")}}),Object.defineProperty(this,"max",{get:function(){return r},set:function(){dt&&$e("Slider() - max is read only")}}),Object.defineProperty(this,"step",{get:function(){return i},set:function(){dt&&$e("Slider() - step is read only")}}),Object.defineProperty(this,"keyArrowsH",{get:function(){return Y},set:function(Me){Y=Me}}),Object.defineProperty(this,"keyArrowsV",{get:function(){return B},set:function(Me){B=Me}}),j.KEYFOCUS!=null&&(t.KEYFOCUS=j.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return t.KEYFOCUS==I},set:function(){t.KEYFOCUS=I}}),S&&!t.KEYFOCUS&&De(),this.on("mousedown",function(){S&&De()});function De(){I.keyFocus=!0;var Me=document.activeElement;Me&&Me.blur()}var Oe=!1,Re=!1,Ze=!1,be=!1;this.keyDownEvent=function(Me){I.stage&&(I.zimAccessibility&&I.focus||!I.zimAccessibility&&I.keyFocus)&&(Me.keyCode==37&&Y?Oe=!0:Me.keyCode==40&&B?Re=!0:Me.keyCode==39&&Y?Ze=!0:Me.keyCode==38&&B&&(be=!0),I.keyInterval==null&&(Oe||Re||Ze||be)&&(we(),I.keyTimeout=setTimeout(function(){I.keyInterval==null&&(Oe||Re||Ze||be)&&(I.keyInterval=setInterval(we,40))},140)))};function we(){(Oe||Re)&&(i>0?I.currentValueEvent-=i*ce(r-e):I.currentValueEvent-=_*ce(r-e)),(Ze||be)&&(i>0?I.currentValueEvent+=i*ce(r-e):I.currentValueEvent+=_*ce(r-e))}j.addEventListener("keydown",this.keyDownEvent),I.keyUpEvent=function(Me){Me.keyCode==37?Oe=!1:Me.keyCode==40?Re=!1:Me.keyCode==39?Ze=!1:Me.keyCode==38&&(be=!1),I.keyInterval!=null&&!Oe&&!Re&&!Ze&&!be&&(clearInterval(I.keyInterval),I.keyInterval=null)},j.addEventListener("keyup",this.keyUpEvent),this._enabled=!0,Object.defineProperty(I,"enabled",{get:function(){return I._enabled},set:function(Me){It(I,Me),Me?(j.addEventListener("keydown",I.keyDownEvent),j.addEventListener("keyup",I.keyUpEvent)):(j.removeEventListener("keydown",I.keyDownEvent),j.removeEventListener("keyup",I.keyUpEvent))}}),n(X)||(I.currentValue=X),t.setSwipe(this,!1),F!==!1&&t.styleTransforms(this,g),this.clone=function(Me){return I.cloneProps(new t.Slider(Me||!t.isPick(R[0])?I.min:R[0],Me||!t.isPick(R[1])?I.max:R[1],Me||!t.isPick(R[2])?I.step:R[2],l.clone(),a,s,c,d,C,T,h,w,A,y,v,P,x,E,k,p,m,S,_,Y,B,b,Me||!t.isPick(R[3])?I.currentValue:R[3],V,O,Z,W,K,ne,F,this.group,u))},this.dispose=function(Me,He,Xe){return j.removeEventListener("keydown",I.keyDownEvent),j.removeEventListener("keyup",I.keyUpEvent),Xe||this.zimContainer_dispose(!0),!0}},t.extend(t.Slider,t.Container,["clone","dispose"],"zimContainer",!1),t.Selector=function(e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,x,E,k){var p="tile, borderColor, borderWidth, backgroundColor, corner, dashed, paddingH, paddingV, speed, diagonal, dim, multi, keyArrows, behind, resizeScale, selectedIndex, style, group, inherit",m;if(m=lt(t.Selector,arguments,p,this))return m;Le("62.5"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Selector",this.group=E;var S=x===!1?{}:t.getStyle(this.type,this.group,k),_=Tt();n(e)&&(e=S.tile!=null?S.tile:new t.Tile(new t.Circle(20,t.red),4,4,10,10)),n(r)&&(r=S.borderColor!=null?S.borderColor:t.white),n(i)&&(i=S.borderWidth!=null?S.borderWidth:2),n(l)&&(l=S.backgroundColor!=null?S.backgroundColor:"rgba(0,0,0,.1)"),n(a)&&(a=S.corner!=null?S.corner:10),n(s)&&(s=S.dashed!=null?S.dashed:!1),n(c)&&(c=S.padding!=null?S.padding:e.spacingH/2),n(d)&&(d=S.paddingV!=null?S.paddingV:e.spacingV/2),n(C)&&(C=S.speed!=null?S.speed:2),n(T)&&(T=S.diagonal!=null?S.diagonal:!1),n(h)&&(h=S.dim!=null?S.dim:!1),n(w)&&(w=S.multi!=null?S.multi:!1),w&&(C=0),n(A)&&(A=S.keyArrows!=null?S.keyArrows:!0),n(y)&&(y=S.behind!=null?S.behind:!1),n(v)&&(v=S.resizeScale!=null?S.resizeScale:!1),n(P)&&(P=S.selectedIndex!=null?S.selectedIndex:null);var Y=[],B=[];t.loop(e.items.length,function(){Y.push(et(r)),B.push(et(l))});var b=this;if(!(n(P)&&w)){var X=P,V=n(P)||P<0?0:P,O=e.getChildAt(V);b.currentItem=e.getChildAt(V),P=X,n(P)&&(P=S.selectedIndex!=null?S.selectedIndex:0)}var Z,W,K;Z=O||e.getChildAt(0),Z&&(W=Z.width+c*2,K=Z.height+d*2),b.tile=e.addTo(b).cur();var ne;if(w){var F=this.selectors=[];t.loop(10,function(){ne=new t.Rectangle(W,K,t.faint,t.faint,i,a,s,{ignoreScale:!v}).centerReg(b,y?0:1),ne.visible=!1,F.push(ne),ne.mouseEnabled=!1}),this.selector=ne}else ne=this.selector=new t.Rectangle(W,K,t.faint,t.faint,i,a,s,{ignoreScale:!v}).centerReg(b),ne.loc(e.width/2,Z.y+d,b,y?0:1),ne.visible=!1;P<0||n(O)||(ne.loc(Z.x+c,Z.y+d,b,y?0:1),ne.color=B[P],ne.borderColor=Y[P],ne.visible=!0),e.mov(c,d),this.setBounds(e.width+c*2,e.height+d*2);var D={};this.tileDown=e.on("mousedown",function(o){var g=ne;if(!(w&&(g=F.shift(),n(g)))){g.visible=!0;for(var q=o.target,I=0;q.parent!=e&&I<10;)q=q.parent,I++;if(q.parent==e&&u(q,null,g),w){var R="id"+Math.abs(o.pointerID+1);D[R]={index:P,item:O,selector:g}}}}),w&&(this.tileMove=e.on("pressmove",function(o){var g="id"+Math.abs(o.pointerID+1),q=D[g];if(!n(q)){var I=e.itemUnderPoint(o.stageX/t.scaX,o.stageY/t.scaY);if(q.item!=I){if(b.upItem=q.item,b.upIndex=q.index,b.downItem=q.item=I,b.downIndex=q.index=I?I.tileNum:null,b.dispatchEvent("change"),n(I))q.selector.visible=!1;else{var R=e.localToLocal(I.x,I.y,b);q.selector.loc(R.x,R.y).siz(I.width+c*2,I.height+d*2),q.selector.color=B[q.index],q.selector.borderColor=Y[q.index],q.selector.visible=!0}b.stage.update()}}}),this.tileUp=e.on("pressup",function(o){var g="id"+Math.abs(o.pointerID+1),q=D[g];n(q)||(b.downIndex=b.downItem=null,b.upIndex=q.index,b.upItem=q.item,F.push(q.selector),q.selector.visible=!1,b.dispatchEvent("change"),b.stage&&!t.OPTIMIZE&&(mt||!j.OPTIMIZE)&&b.stage.update(),delete D[g])})),b.noAnimate=!1;function u(o,g,q){n(q)&&(q=ne),O=o,P=o.tileNum,q.color=B[P],q.borderColor=Y[P],w&&(b.upItem=b.upIndex=null,b.downItem=O,b.downIndex=P),b.animating=!0;var I=e.localToLocal(o.x,o.y,b),R=Math.abs(I.x-ne.x),le=Math.abs(I.y-ne.y),N=b.noAnimate||g?0:C;if(b.noAnimate=!1,N==0)q.loc(I.x,I.y).siz(o.width+c*2,o.height+d*2),b.animating=!1,b.dispatchEvent("change");else if(T||(R+le)*N<=0?q.animate({x:I.x,y:I.y},(le+R)*N):(q.stopAnimate(),R>=le?q.animate([{props:{x:I.x},time:Math.max(_=="s"?.1:100,R*N/(_=="s"?1e3:1))},{props:{y:I.y},time:Math.max(_=="s"?.1:100,le*N/(_=="s"?1e3:1))}]):q.animate([{props:{y:I.y},time:Math.max(_=="s"?.1:100,le*N/(_=="s"?1e3:1))},{props:{x:I.x},time:Math.max(_=="s"?.1:100,R*N/(_=="s"?1e3:1))}])),q.animate({props:{widthOnly:o.width+c*2,heightOnly:o.height+d*2},time:Math.max(_=="s"?.2:200,(le+R)*N/(_=="s"?1e3:1)),call:function(){b.animating=!1,b.dispatchEvent("change")}}),h){if(h===!0)var L=.7;else L=t.constrain(h,0,1);e.animate({props:{alpha:L},rewind:!0,time:(le+R)*C*.7/(_=="s"?1e3:1)})}e.stage&&e.stage.update()}A&&b.added(function(){b.keyEvent=b.stage.frame.on("keydown",function(o){if(b.stage&&b.enabled&&!b.animating&&(b.zimAccessibility&&b.focus||!b.zimAccessibility&&b.keyFocus)){var g=t.loop(e.items2D,function(le,N){var L=t.loop(le,function(ee,z){if(ee==O)return[z,N]});if(Array.isArray(L))return L});g===!0&&(g=[0,0]);var q=e.items2D[g[1]].length,I=e.items2D.length,R;o.keyCode=="39"?(R=(g[0]+1)%q,u(e.items2D[g[1]][R],R<g[0])):o.keyCode=="37"?(R=(g[0]-1+q)%q,u(e.items2D[g[1]][R],R>g[0])):o.keyCode=="38"?(R=(g[1]-1+I)%I,u(e.items2D[R][g[0]],R>g[1])):o.keyCode=="40"&&(R=(g[1]+1)%I,u(e.items2D[R][g[0]],R<g[1]))}})}),Object.defineProperty(this,"selectedIndex",{get:function(){return P},set:function(o){n(o)&&(b.currentItem=null),b.currentItem=e.items[Math.round(o)]}}),Object.defineProperty(this,"text",{get:function(){return O.text},set:function(){dt&&$e("Selector() - text is read only")}}),Object.defineProperty(this,"currentItem",{get:function(){return O},set:function(o){if(n(o)){O=null,P=null,ne.visible=!1,b.selectedCol=null,b.selectedRow=null;return}ne.visible=!0,b.lastItem=O,b.lastIndex=P,b.lastCol=b.selectedCol,b.lastRow=b.selectedRow,b.selectedCol=o.tileCol,b.selectedRow=o.tileRow,P=o.tileNum,O=o,u(O)}}),this._enabled=!0,Object.defineProperty(b,"enabled",{get:function(){return b._enabled},set:function(o){o?b.mouse():b.noMouse(),b._enabled=o}}),j.KEYFOCUS!=null&&(t.KEYFOCUS=j.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return t.KEYFOCUS==b},set:function(){t.KEYFOCUS=b}}),t.KEYFOCUS||f(),this.on("mousedown",function(){f()});function f(){b.keyFocus=!0;var o=document.activeElement;o&&o.blur()}x!==!1&&t.styleTransforms(this,S),this.clone=function(o){if(o)for(var g=[],q=0;q<b.tile.items.length;q++)g.push(b.tile.items[q].clone(!0));return b.cloneProps(new t.Selector(o?t.series(g):e.clone?e.clone():e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,this.style,this.group))},this.dispose=function(o,g,q){b.keyEvent&&b.stage&&b.stage.frame.off("keydown",b.keyEvent),e.off(b.tileDown),e.dispose(),w&&(e.off(b.tileMove),e.off(b.tileUp)),q||this.zimContainer_dispose(!0)}},t.extend(t.Selector,t.Container,["clone","dispose"],"zimContainer",!1),t.Dial=function(e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,x,E,k,p,m,S,_,Y,B,b,X,V,O,Z,W,K,ne,F,D,u,f,o,g,q,I,R){var le="min, max, step, width, backgroundColor, indicatorColor, indicatorScale, indicatorType, useTicks, innerTicks, tickColor, tickStep, semiTicks, tickScale, semiTickScale, innerCircle, innerScale, innerColor, inner2Color, accentSize, accentOffset, accentColor, accentBackgroundColor, accentDifference, sound, linear, gap, limit, keyArrows, keyArrowsStep, keyArrowsH, keyArrowsV, continuous, continuousMin, continuousMax, damp, currentValue, useLabels, labelMargin, style, group, inherit",N;if(N=lt(t.Dial,arguments,le,this))return N;Le("63"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Dial",this.group=I;var L=q===!1?{}:t.getStyle(this.type,this.group,R);if(n(e)&&(e=L.min!=null?L.min:0),n(r)&&(r=L.max!=null?L.max:10),r-e==0){$e("ZIM Dial range must not be 0");return}n(B)&&(B=L.sound!=null?L.sound:!1),n(i)&&(i=L.step!=null?L.step:B?0:1),n(l)&&(l=L.width!=null?L.width:100),n(a)&&(a=L.backgroundColor!=null?L.backgroundColor:t.granite),n(s)&&(s=L.indicatorColor!=null?L.indicatorColor:B?t.white:t.licorice),n(c)&&(c=L.indicatorScale!=null?L.indicatorScale:1),n(d)&&(d=L.indicatorType!=null?L.indicatorType:B?"aztec":"arrow"),n(C)&&(C=L.useTicks!=null?L.useTicks:i!=0),n(T)&&(T=L.innerTicks!=null?L.innerTicks:!1),n(w)&&(w=L.tickStep!=null?L.tickStep:i||(C?.25:0)),n(A)&&(A=L.semiTicks!=null?L.semiTicks:B?3:0),n(h)&&(h=L.tickColor!=null?L.tickColor:B?t.tin:a),n(y)&&(y=L.tickScale!=null?L.tickScale:B?1.25:1),n(v)&&(v=L.semiTickScale!=null?L.semiTickScale:1.25),n(P)&&(P=L.innerCircle!=null?L.innerCircle:!0),n(E)&&(E=L.innerColor!=null?L.innerColor:B?t.pink:"rgba(0,0,0,.2)"),n(k)&&(k=L.inner2Color!=null?L.inner2Color:B?t.light:"rgba(0,0,0,.1)"),n(x)&&(x=L.innerScale!=null?L.innerScale:B?.4:.5),n(p)&&(p=L.accentSize!=null?L.accentSize:B?l/2*.15:0),n(m)&&(m=L.accentOffset!=null?L.accentOffset:l/2*.45),n(Y)&&(Y=L.accentDifference!=null?L.accentDifference:-.25),n(S)&&(S=L.accentColor!=null?L.accentColor:t.pink),n(_)&&(_=L.accentBackgroundColor!=null?L.accentBackgroundColor:B?t.blue:t.clear),n(X)&&(X=L.gap!=null?L.gap:B?.25:0),n(b)&&(b=L.linear!=null?L.linear:B),X&&(b=!0,ne=!1),n(V)&&(V=L.limit!=null?L.limit:!0),n(O)&&(O=L.keyArrows!=null?L.keyArrows:!0),n(Z)&&(Z=L.keyArrowsStep!=null?L.keyArrowsStep:(r-e)/100),n(W)&&(W=L.keyArrowsH!=null?L.keyArrowsH:!0),n(K)&&(K=L.keyArrowsV!=null?L.keyArrowsV:!0),n(ne)&&(ne=L.continuous!=null?L.continuous:!1),ne&&(V=L.limit!=null?L.limit:!1),n(u)&&(u=L.damp!=null?L.damp:!1),n(f)&&(f=L.currentValue!=null?L.currentValue:!1),n(o)&&(o=L.useLabels!=null?L.useLabels:!1),n(g)&&(g=L.labelMargin!=null?L.labelMargin:10),V==!1&&(u=null);var ee=this;this.cur("pointer");var z=$(e,r,i,f);this.veeObj={min:z[0],max:z[1],step:z[2],currentValue:z[3]};function $(){return arguments}e=t.Pick.choose(e),r=t.Pick.choose(r),i=t.Pick.choose(i);var xe=i;f=t.Pick.choose(f);var ie=l/2,ke=l,U=e,Ee=0,Q;if(p){var G=l/2+m+p/2,ue=360*X/2;ee.accentBacking=new t.Shape(-ie,-ie,ie*2,ie*2).addTo(this).s(_).ss(p+Y).a(0,0,G,(ue-90)*t.RAD,(360-ue-90)*t.RAD),Q=ee.accent=new t.Shape(-ie,-ie,ie*2,ie*2).addTo(this)}function fe(){Q.c().s(S).ss(p),b?Q.a(0,0,G,(ue-90)*t.RAD,(Te.rotation-ue*2)*t.RAD):Q.a(0,0,G,(ue-90)*t.RAD,(Te.rotation-90)*t.RAD)}var ye=this.backing=new t.Circle(ie,a,null,null,null,null,null,null,!1);if(p?ye.center(this):this.addChild(ye),P){var H=this.inner=new t.Circle(ie*x,E,null,null,null,null,null,null,!1);this.addChild(H);var re=this.inner2=new t.Circle(ie*(x-.1),k,null,null,null,null,null,null,!1);this.addChild(re)}B&&(ee.rotation=180);var pe=Math.abs(r-e)/(w||i)+(X?1:0),te=i?Math.abs(r-e)/i:0;if(C){var ge=this.ticks=new t.Container({style:!1});if(this.addChild(ge),o)var Ae=ee.labels=new t.Container(l*2,ke*2).centerReg(ee);for(var ae=0;ae<pe;ae++){var de=ae%(A+1)==0,se=new t.Rectangle(1,ie*(de?.2*y:.1*v),h,null,null,null,null,null,null,!1);if(se.regY=ie+(T?x-.05:se.height+ie*.1),se.regX=.5,se.rotation=(360-360*X)/(pe-(X?1:0))*ae+360*X/2,ge.addChild(se),o&&(A&&de||!A)){var Ie=Math.max(t.countDecimals(xe),t.countDecimals(e),t.countDecimals(r));new t.Label({text:t.decimals(e+(r-e)/Math.abs(te)*ae,Ie+1),size:L.size?L.size:10,align:"center",valign:"center"}).centerReg({add:!1}).loc(0,-g-1,se).addTo(Ae)}}ee.expand(se.height)}this.setBounds(-ie,-ie,l,l);var Te,ve;if(d=="dot"||d=="circle")Te=this.indicator=new t.Container({style:!1}),ve=this.indicatorShape=new t.Circle(ie*.19,s,null,null,null,null,null,null,!1),Te.addChild(ve),t.sca(Te,c),Te.regY=ie-Te.getBounds().width*c/2-ie*.07;else if(d=="line"||d=="rectangle")Te=this.indicator=new t.Container({style:!1}),ve=this.indicatorShape=new t.Rectangle(ie*.1,ie*.3,s,null,null,null,null,null,null,null,null,!1),Te.addChild(ve),t.sca(Te,c),Te.regY=ie-Te.getBounds().width*c/2-ie*.07,Te.regX=ie*.05;else if(d=="aztec"){Te=this.indicator=new t.Container({style:!1});var J=ie*.05,Se=ie*.1,Be=ie*.42;ve=this.indicatorShape=new t.Shape(-Se,0,Se*2,Be).f(s).mt(-J,0).lt(J,0).lt(Se,Be).lt(-Se,Be).cp(),Te.addChild(ve),t.sca(Te,c),Te.regY=ie-Te.getBounds().width*c/2-ie*.04}else Te=this.indicator=new t.Container({style:!1}),ve=this.indicatorShape=new t.Triangle(ie*.4,ie*.4,ie*.4,s,null,null,null,null,null,null,null,!1),Te.addChild(ve),t.sca(Te,c),Te.regY=ie-Te.getBounds().height*c*(T?.85:.75),T&&(ve.rotation=180);Te.regY/=c,this.addChild(Te);function Ye(Qe){return i==0?Qe:Math.round(Qe/i)*i}var Ke,at,me,Ge,Je=0;if(ne)var ce=0,oe=0,_e=0,je=!1,Ve=!1,De=!0;if(b)this.on("mousedown",function(Qe){if(!(ee.zimAccessibility&&ee.zimAccessibility.aria)){var tt=Ke=Te.rotation,ot=ee.parent.globalToLocal(Qe.stageX/t.scaX,Qe.stageY/t.scaY);me=ee.on("pressmove",function(gt){var ze=ee.parent.globalToLocal(gt.rawX/t.scaX,gt.rawY/t.scaY);Te.rotation=tt=Ke+(ot.y-ze.y)*100/(this.width||1),V&&(tt>360-360*X/2||tt<0+360*X/2)&&(tt=t.constrain(tt,360*X/2,360-360*X/2),ot=ee.parent.globalToLocal(gt.rawX/t.scaX,gt.rawY/t.scaY),Ke=tt),be(tt)}),Ge=this.on("pressup",function(){ee.off("pressmove",me),ee.off("pressup",Ge)})}});else{var Oe=!0;this.on("mousedown",function(Qe){if(!(ee.zimAccessibility&&ee.zimAccessibility.aria)){Ke=Te.rotation;var tt=ee.parent.globalToLocal(Qe.stageX/t.scaX,Qe.stageY/t.scaY),ot=tt.x-ee.x,gt=ee.y-tt.y;at=Math.atan2(ot,gt)*180/Math.PI;var ze=new Date().getTime();me=ee.on("pressmove",function(Mt){if(je){var ut=ee.parent.globalToLocal(Mt.rawX/t.scaX,Mt.rawY/t.scaY),xt=ut.x-ee.x,_t=ee.y-ut.y;at=Math.atan2(xt,_t)*180/Math.PI,Ke=Te.rotation}ut=ee.parent.globalToLocal(Mt.rawX/t.scaX,Mt.rawY/t.scaY),xt=ut.x-ee.x,_t=ee.y-ut.y;var Yt=Math.atan2(xt,_t)*180/Math.PI,Et=Ke+Yt-at;Et=(Et+360*1e4)%360,V&&Oe&&(Et-Je>180&&ee.currentValue!=r?Et=0:Et-Je<-180&&(Et=359)),Oe=!0,be(Et),Je=Et}),Ge=this.on("pressup",function(Mt){ee.currentValue!=ee.min&&ee.currentValue!=ee.max&&(Oe=!1);var ut=new Date().getTime()-ze;if(ut<200){tt=ee.parent.globalToLocal(Mt.rawX/t.scaX,Mt.rawY/t.scaY),ot=tt.x-ee.x,gt=ee.y-tt.y;var xt=Math.atan2(ot,gt)*180/Math.PI-ee.rotation;be(xt)}Ke=Te.rotation,ee.off("pressmove",me),ee.off("pressup",Ge)})}})}function Re(Qe){return Qe>0?1:-1}function Ze(){ee.zimAccessibility&&ee.zimAccessibility.changeTitle(ee,null,!0)}function be(Qe){if(ne){Ve&&(ce=Qe,Ve=!1),Qe>ce+180?_e-=360:Qe<ce-180&&(_e+=360),oe=_e+Qe,De=!1;var tt=ee.currentValue;return ee.currentValue=Ye(oe*(r-e)/360),tt!=ee.currentValue&&ee.dispatchEvent("change"),ce=Qe,De=!0,Q&&fe(),!0}var ot;Qe<0&&(Qe+=360),Qe=Qe%360,i!=0?(Qe=Math.min(Qe,360),ot=Ye((Qe-360*X/2)/(360-360*X)*(r-e)),Te.rotation=360*X/2+ot*(360-360*X)/(r-e)):(Te.rotation=Qe,ot=(Qe-360*X/2)/(360-360*X)*(r-e)),ot!=Ee&&(Ee=ot,U=ot+e,Q&&fe(),ee.dispatchEvent("change"),!t.OPTIMIZE&&(mt||!j.OPTIMIZE)&&ee.stage&&ee.stage.update()),Ze()}var we,Me;u&&(we=e,Me=new t.Damp(we,u),ee.ticker=t.Ticker.add(function(){we=Me.convert(U)})),Object.defineProperty(this,"currentValue",{get:function(){return u?we:U},set:function(Qe){n(Qe)||(ne?(je=!1,!n(F)&&!n(D)?F<D?(Qe<F&&(Qe=F,je=!0),Qe>D&&(Qe=D,je=!0)):(Qe>F&&(Qe=F,je=!0),Qe<D&&(Qe=D,je=!0)):n(F)?n(D)||Qe>D&&(Qe=D,je=!0):Qe<F&&(Qe=F,je=!0),De&&(Ve=!0,_e=Math.floor(Qe/(r-e))*360)):e<r?(Qe<e&&(Qe=V?e:r),Qe>r&&(Qe=V?r:e)):(Qe>e&&(Qe=V?e:r),Qe<r&&(Qe=V?r:e)),U=Qe,Qe=Ye(Qe),u&&u.immediate(U),Te.rotation=X*360/2+(Qe-e)*(360-X*360)/(r-e),Te.rotation=(Te.rotation+360*1e4)%360,Ee=Qe-e,Je=Te.rotation,Q&&fe(),Ze(),!t.OPTIMIZE&&(mt||!j.OPTIMIZE)&&ee.stage&&ee.stage.update())}}),Object.defineProperty(this,"currentValueEvent",{get:function(){return u?we:U},set:function(Qe){Qe!=ee.currentValue&&(ee.currentValue=Qe,ee.dispatchEvent("change"))}}),Object.defineProperty(this,"min",{get:function(){return e},set:function(Qe){ne?e=Qe:dt&&$e("Dial() - min is read only")}}),Object.defineProperty(this,"max",{get:function(){return r},set:function(Qe){ne?r=Qe:dt&&$e("Dial() - max is read only")}}),Object.defineProperty(this,"continuous",{get:function(){return ne},set:function(){dt&&$e("Dial() - continuous is read only")}}),Object.defineProperty(this,"continuousMin",{get:function(){return F},set:function(Qe){F=Qe,ee.currentValue<F&&(ee.currentValue=F)}}),Object.defineProperty(this,"continuousMax",{get:function(){return D},set:function(Qe){D=Qe,ee.currentValue>D&&(ee.currentValue=D)}}),Object.defineProperty(this,"step",{get:function(){return i},set:function(){dt&&$e("Dial() - step is read only")}}),Object.defineProperty(this,"keyArrowsH",{get:function(){return W},set:function(Qe){W=Qe}}),Object.defineProperty(this,"keyArrowsV",{get:function(){return K},set:function(Qe){K=Qe}}),j.KEYFOCUS!=null&&(t.KEYFOCUS=j.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return t.KEYFOCUS==ee},set:function(){t.KEYFOCUS=ee}}),O&&!t.KEYFOCUS&&He(),this.on("mousedown",function(){O&&He()});function He(){ee.keyFocus=!0;var Qe=document.activeElement;Qe&&Qe.blur()}var Xe=!1,nt=!1,Ce=!1,Fe=!1;this.keyDownEvent=function(Qe){ee.stage&&(ee.zimAccessibility&&ee.focus||!ee.zimAccessibility&&ee.keyFocus)&&(Qe.keyCode==37&&W?Xe=!0:Qe.keyCode==40&&K?nt=!0:Qe.keyCode==39&&W?Ce=!0:Qe.keyCode==38&&K&&(Fe=!0),ee.keyInterval==null&&(Xe||nt||Ce||Fe)&&(it(),ee.keyTimeout=setTimeout(function(){ee.keyInterval==null&&(Xe||nt||Ce||Fe)&&(ee.keyInterval=setInterval(it,40))},140)))};function it(){(Xe||nt)&&(i>0?ee.currentValueEvent-=i*Re(r-e):ee.currentValueEvent-=Z*Re(r-e)),(Ce||Fe)&&(i>0?ee.currentValueEvent+=i*Re(r-e):ee.currentValueEvent+=Z*Re(r-e))}j.addEventListener("keydown",this.keyDownEvent),ee.keyUpEvent=function(Qe){Qe.keyCode==37?Xe=!1:Qe.keyCode==40?nt=!1:Qe.keyCode==39?Ce=!1:Qe.keyCode==38&&(Fe=!1),ee.keyInterval!=null&&!Xe&&!nt&&!Ce&&!Fe&&(clearInterval(ee.keyInterval),ee.keyInterval=null)},j.addEventListener("keyup",this.keyUpEvent),this._enabled=!0,Object.defineProperty(ee,"enabled",{get:function(){return ee._enabled},set:function(Qe){Qe?(j.addEventListener("keydown",ee.keyDownEvent),j.addEventListener("keyup",ee.keyUpEvent)):(j.removeEventListener("keydown",ee.keyDownEvent),j.removeEventListener("keyup",ee.keyUpEvent)),ee._enabled=Qe}}),n(f)&&(f=L.currentValue!=null?L.currentValue:e),ee.currentValue=f,q!==!1&&t.styleTransforms(this,L),this.clone=function(Qe){return ee.cloneProps(new t.Dial(Qe||!t.isPick(z[0])?ee.min:z[0],Qe||!t.isPick(z[1])?ee.max:z[1],Qe||!t.isPick(z[2])?ee.step:z[2],l,a,s,c,d,C,T,h,w,A,y,v,P,x,E,k,p,m,S,_,Y,B,b,X,V,O,Z,W,K,ne,F,D,u,Qe||!t.isPick(z[3])?ee.currentValue:z[3],o,g,q,this.group,R))},this.dispose=function(Qe,tt,ot){return j.removeEventListener("keydown",ee.keyDownEvent),j.removeEventListener("keyup",ee.keyUpEvent),ot||this.zimContainer_dispose(!0),!0}},t.extend(t.Dial,t.Container,["clone","dispose"],"zimContainer",!1),t.Tabs=function(e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,x,E,k,p,m,S,_,Y,B,b,X,V,O,Z,W,K,ne,F,D,u,f,o,g,q,I,R,le,N,L,ee,z,$,xe){var ie="width, height, tabs, backgroundColor, rollBackgroundColor, downBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, color, rollColor, downColor, selectedColor, selectedRollColor, vertical, spacing, currentEnabled, currentSelected, corner, base, keyEnabled, gradient, gloss, backing, rollBacking, wait, waitTime, waitBackgroundColor, rollWaitBackgroundColor, waitColor, rollWaitColor, waitModal, waitEnabled, backdropColor, align, valign, labelAlign, labelValign, labelIndent, labelIndentH, labelIndentV, indent, useTap, excludeCustomTap, selectedIndex, styleLabels, keyWrap, style, group, inherit",ke;if(ke=lt(t.Tabs,arguments,ie,this))return ke;Le("65");var U=z===!1?{}:t.getStyle("Tabs",$,xe);n(y)&&(y=U.vertical!=null?U.vertical:!1),n(e)&&(e=U.width!=null?U.width:null);var Ee=!n(e);if(n(e)&&(e=y?60:240),n(r)&&(r=U.height!=null?U.height:y?240:60),this.zimContainer_constructor(null,null,null,null,!0),this.type="Tabs",this.group=$,(n(i)||i.length<=0)&&(i=U.tabs!=null?U.tabs:[1,2,3,4]),n(l)&&(l=U.backgroundColor!=null?U.backgroundColor:t.tin),n(a)&&(a=U.rollBackgroundColor!=null?U.rollBackgroundColor:t.grey),n(s)&&(s=U.downBackgroundColor!=null?U.downBackgroundColor:a),n(c)&&(c=U.selectedBackgroundColor!=null?U.selectedBackgroundColor:t.dark),n(d)&&(d=U.selectedRollBackgroundColor!=null?U.selectedRollBackgroundColor:a),n(C)&&(C=U.color!=null?U.color:t.white),n(T)&&(T=U.rollColor!=null?U.rollColor:C),n(h)&&(h=U.downColor!=null?U.downColor:T),n(w)&&(w=U.selectedColor!=null?U.selectedColor:C),n(A)&&(A=U.selectedRollColor!=null?U.selectedRollColor:T),n(_)&&(_=U.backing!=null?U.backing.clone():null),n(Y)&&(Y=U.rollBacking!=null?U.rollBacking.clone():null),n(F)&&(F=U.align!=null?U.align:"center"),n(D)&&(D=U.valign!=null?U.valign:"center"),n(u)&&(u=U.labelAlign!=null?U.labelAlign:F),n(f)&&(f=U.labelValign!=null?U.labelValign:D),n(I)&&(I=U.indent!=null?U.indent:10),n(o)&&(o=U.labelIndent!=null?U.labelIndent:I),n(g)&&(g=U.labelIndentH!=null?U.labelIndentH:o),n(q)&&(q=U.labelIndentV!=null?U.labelIndentV:o),n(P)&&(P=U.currentEnabled!=null?U.currentEnabled:!1),n(x)&&(x=U.currentSelected!=null?U.currentSelected:!0),x||(P=!0),n(v)&&(v=U.spacing!=null?U.spacing:1),n(E)&&(E=U.corner!=null?U.corner:0),n(m)&&(m=U.gradient!=null?U.gradient:null),n(S)&&(S=U.gloss!=null?U.gloss:null),n(k)&&(k=U.base!=null?U.base:E==0&&!Array.isArray(E)?"none":y?"left":"bottom"),n(p)&&(p=U.keyEnabled!=null?U.keyEnabled:!0),n(R)&&(R=U.useTap!=null?U.useTap:!1),n(le)&&(le=U.excludeCustomTap!=null?U.excludeCustomTap:!1),n(ne)&&(ne=U.backdropColor!=null?U.backdropColor:null),n(L)&&(L=U.styleLabels!=null?U.styleLabels:!1),n(ee)&&(ee=U.keyWrap!=null?U.keyWrap:!0),k!="none"&&E!=0&&!Array.isArray(E))switch(k){case"bottom":E=[E,E,0,0];break;case"left":E=[0,E,E,0];break;case"top":E=[0,0,E,E];break;case"right":E=[E,0,0,E];break}else Array.isArray(E)||(E=[E,E,E,E]);var Q=this;this.keyEnabled=p;var G=0,ue=[],fe=[],ye,H,re=i.length,pe=(e-v*(re-1))/re,te=(r-v*(re-1)-2)/re;if(!n(ne)){var ge=this.backdrop=new t.Rectangle(e,r,ne,null,null,null,null,null,null,!1);this.addChild(ge)}var Ae=!1,ae;function de(oe){for(var _e=0;_e<oe.length;_e++){var je=oe[_e];if(je.constructor==={}.constructor){ae&&ae!="TabObject"&&(Ae=!0),ae="TabObject",je.type="TabObject";continue}typeof je=="string"||typeof je=="number"||je.type=="Label"?(oe[_e]={type:"TabObject",label:String(je!=null)||je.type=="Label"?je:"1"},ae&&ae!="TabObject"&&(Ae=!0),ae="TabObject"):(ae&&ae=="TabObject"&&(Ae=!0),ae="Other")}}de(i);for(var se=0,Ie,Te=0,ve=0;ve<i.length;ve++)H=i[ve],y?Ee&&(H.width=H.width?H.width:e):(n(H.width)&&Te++,se+=n(H.width)?pe:H.width);if(!y){if(se>e-v*(re-1))for(ve=0;ve<i.length;ve++)H=i[ve],H.width=(e-v*(re-1))/se*(n(H.width)?pe:H.width);else if(Math.round(se)<Math.round(e-v*(re-1))&&Te>0)for(Ie=(re*pe-(se-Te*pe))/Te,ve=0;ve<i.length;ve++)H=i[ve],H.width=n(H.width)?Ie:H.width}function J(oe,_e){for(ve=0;ve<oe.length;ve++)H=oe[ve],H!=""&&H.type=="TabObject"&&(n(H.label)&&(H.label=" "),(typeof H.label=="string"||typeof H.label=="number")&&(H.label=new t.Label({text:H.label,size:U.size!=null?U.size:y?te/2:r/2,font:U.font!=null?U.font:null,style:L,valign:f,inherit:_e})))}J(i,L?U:null);var Se=0;for(ve=0;ve<i.length;ve++)H=i[ve],!H.width&&y&&H.label.width>Se&&(Se=H.label.width);var Be=0;function Ye(oe,_e){var je=[],Ve=[];for(ve=0;ve<oe.length;ve++){if(H=oe[ve],H.type=="TabObject"){var De={color:n(H.color)?t.Pick.choose(C):H.color,rollColor:n(H.rollColor)?t.Pick.choose(T):H.rollColor,downColor:n(H.downColor)?t.Pick.choose(h):H.downColor,selectedColor:n(H.selectedColor)?t.Pick.choose(w):H.selectedColor,selectedRollColor:n(H.selectedRollColor)?t.Pick.choose(A):H.selectedRollColor,backgroundColor:n(H.backgroundColor)?t.Pick.choose(l):H.backgroundColor,rollBackgroundColor:n(H.rollBackgroundColor)?t.Pick.choose(a):H.rollBackgroundColor,downBackgroundColor:n(H.downBackgroundColor)?t.Pick.choose(s):H.downBackgroundColor,selectedBackgroundColor:n(H.selectedBackgroundColor)?t.Pick.choose(c):H.selectedBackgroundColor,selectedRollBackgroundColor:n(H.selectedRollBackgroundColor)?t.Pick.choose(d):H.selectedRollBackgroundColor,wait:n(H.wait)?t.Pick.choose(B):H.wait};if(_e)for(var Oe in _e)n(_e[Oe])||(De[Oe]=_e[Oe]);ye=new t.Button({width:y?n(H.width)?Ee?e:Se+te/2+E[0]/2:H.width:n(H.width)?pe:H.width,height:y?te:r,label:H.label,borderColor:U.borderColor!=null?U.borderColor:null,borderWidth:U.borderWidth!=null?U.borderWidth:null,backgroundColor:De.backgroundColor,rollBackgroundColor:De.rollBackgroundColor,downBackgroundColor:De.downBackgroundColor,downColor:De.downColor,corner:E,shadowColor:-1,gradient:m,gloss:S,backing:_?_.clone():null,rollBacking:Y?Y.clone():null,wait:De.wait,waitTime:n(H.waitTime)?b:H.waitTime,waitBackgroundColor:n(H.waitBackgroundColor)?X:H.waitBackgroundColor,rollWaitBackgroundColor:n(H.rollWaitBackgroundColor)?V:H.rollWaitBackgroundColor,waitColor:n(H.waitColor)?O:H.waitColor,rollWaitColor:n(H.rollWaitBackgroundColor)?Z:H.rollWaitColor,waitModal:n(H.waitModal)?W:H.waitModal,waitEnabled:n(H.waitEnabled)?K:H.waitEnabled,align:u,valign:f,indentH:g,indentV:q,inherit:t.copy(U)}),ye.tabInfo=De,ye.color=ye.tabInfo.color,ye.rollColor=ye.tabInfo.rollColor,ye.type="TabsButton",ye.content=H,ye.listIndentReady=!0}else{if(H.listIndentReady)ye=H;else{ye=new t.Container,ye.type=H.type,ye.content=H;for(var Re=["text","backing","label","slider","stepper","checkBox","colorPicker","swatch","colorLabel"],Ze=0;Ze<Re.length;Ze++)H[Re[Ze]]&&(ye[Re[Ze]]=H[Re[Ze]])}H.checkBox&&(ye.checkBox=H.checkBox),n(ye.tabInfo)&&(ye.tabInfo={}),le&&(ye.excludeTap=!0),ye.tabInfo.color=n(H.color)?C:H.color,ye.tabInfo.backgroundColor=n(H.backgroundColor)?l:H.backgroundColor,H.listIndentReady||(new t.Rectangle(Math.max(H.width,y?Ee?e:Se+te/2+E[0]/2:H.width),Math.max(H.height,y?te:r),t.clear).addTo(ye).expand(0).cur(),H.center(ye).cur(),F=="center"||F=="middle"||H.pos(0,null,F=="right"),D=="center"||D=="middle"||H.pos(null,0,null,D=="bottom"),ye.listIndentReady=!0)}ye.width>Be&&(Be=ye.width),R?ye.tap(function(be){me(be.currentTarget.znum),Q.dispatchEvent("change"),!t.OPTIMIZE&&(mt||!j.OPTIMIZE)&&Q.stage&&Q.stage.update()}):ye.zimTabEvent=ye.on((mt?t.ACTIONEVENT=="mousedown":j.ACTIONEVENT=="mousedown")?"mousedown":"click",function(be){me(be.currentTarget.znum),Q.dispatchEvent("change"),!t.OPTIMIZE&&(mt||!j.OPTIMIZE)&&Q.stage&&Q.stage.update()}),ye.on("mousedown",function(be){Q.buttonDown=be.currentTarget}),ye.on("pressup",function(be){Q.buttonDown=null;var we=be.currentTarget.znum;R||t.ACTIONEVENT=="click"?setTimeout(function(){Ge(we)},50):Ge(we)}),Ve.push(H.label),je.push(ye),ye.index=ve}return[je,Ve]}var Ke=Ye(i);fe=Ke[0],ue=Ke[1];function at(){var oe=0,_e=0,je;for(ve=0;ve<fe.length;ve++)je=fe[ve],je.znum=ve,je.selectedIndex=ve,je.selectedIndex==G&&x&&(je.backgroundColor=c,je.rollBackgroundColor=d,je.color=w),ue[ve]&&(ue[ve].znum=ve),Q.addChild(je),(!y||Ee)&&(je.x=(e-je.width)/2,je.y=(r-je.height)/2),y?(je.y=_e,_e=je.y+je.height+v,F=="left"?je.x=(je.type=="TabsButton"||je.type=="ListItem"?0:I)+(je.regX-(je.getBounds()?je.getBounds().x:0))*je.scaleX:F=="right"&&(je.x=(Ee?e:Be)-je.width-(je.type=="TabsButton"||je.type=="ListItem"?0:I))):(je.x=oe,oe=je.x+je.width+v,D=="top"?je.y=(je.type=="TabsButton"&&!Ae?0:I)+(je.regY-(je.getBounds()?je.getBounds().y:0))*je.scaleY:D=="bottom"&&(je.y=r-je.height-(je.type=="TabsButton"&&!Ae?0:I))),ve==G&&!P?je.enabled=!1:je.enabled=!0;n(ne)||Q.removeChild(ge),Q._bounds=null;var Ve=Q.getBounds(),De=0,Oe=0;if(!Ve&&Ne.EaselJS.version[0]!=0?Q.setBounds():Ve&&(De=y&&Ve.width!=0&&Ee?e:Ve.width,Oe=y&&Ve.height!=0?Ve.height:r,Q.setBounds(De,Oe)),n(ne)||(ge.widthOnly=De,ge.heightOnly=Oe,Q.addChildAt(ge,0)),y&&!Ee)for(ve=0;ve<=fe.length;ve++)(F=="center"||F=="middle")&&(je.x=(De-je.width)/2)}at();function me(oe,_e){if(oe!=G){var je=fe[G];if(je&&x&&(je.tabInfo&&n(je.tabInfo.wait)&&(je.tabInfo.backgroundColor&&(je.backgroundColor=je.tabInfo.backgroundColor),je.tabInfo.rollBackgroundColor&&(je.rollBackgroundColor=je.tabInfo.rollBackgroundColor),je.tabInfo.color&&je.label&&(je.color=je.tabInfo.color),je.tabInfo.rollColor&&je.label&&(je.rollColor=je.tabInfo.rollColor)),P||(je.enabled=!0)),G=oe,je=fe[G],je){var Ve=je.tabInfo;Ve&&n(je.tabInfo.wait)&&x&&(Ve.selectedBackgroundColor&&(je.backgroundColor=!n(Ve.downBackgroundColor)&&!_e?Ve.downBackgroundColor:Ve.selectedBackgroundColor),Ve.selectedRollBackgroundColor&&(je.rollBackgroundColor=Ve.selectedRollBackgroundColor),Ve.selectedColor&&je.label&&(je.color=!n(Ve.downColor)&&!_e?Ve.downColor:Ve.selectedColor),Ve.selectedRollColor&&je.label&&(je.rollColor=Ve.selectedRollColor)),_e&&!P&&(je.enabled=!1)}}}function Ge(oe){var _e=fe[oe];if(_e&&x){var je=_e.tabInfo;je&&n(je.wait)&&(je.selectedBackgroundColor&&(_e.backgroundColor=Q.selected==_e?je.selectedBackgroundColor:je.backgroundColor),je.selectedColor&&_e.label&&(_e.color=Q.selected==_e?je.selectedColor:je.color)),P||(_e.enabled=!1)}}this.addAt=function(oe,_e,je){n(_e)&&(_e=fe.length),_e=t.constrain(_e,0,fe.length),Array.isArray(oe)||(oe=[oe]),de(oe),J(oe,je);var Ve=Ye(oe,je),De=Ve[0],Oe=Ve[1];_e<=G&&(G+=De.length);var Re=[_e,0].concat(De);return Array.prototype.splice.apply(fe,Re),Re=[_e,0].concat(Oe),Array.prototype.splice.apply(ue,Re),at(),Q},this.removeAt=function(oe,_e){if(fe.length==0)return Q;for(n(oe)&&(oe=1),n(_e)&&(_e=fe.length-oe),_e=t.constrain(_e,0,fe.length-oe),G>=_e&&G<=_e+oe&&(G=-1),G>_e+oe&&(G-=oe),ve=_e;ve<_e+oe;ve++)fe[ve].tabInfo&&(fe[ve].tabInfo.backgroundColor&&(fe[ve].backgroundColor=fe[ve].tabInfo.backgroundColor),fe[ve].tabInfo.color&&fe[ve].label&&(fe[ve].color=fe[ve].tabInfo.color)),R?fe[ve].noTap():fe[ve].off((mt?t.ACTIONEVENT=="mousedown":j.ACTIONEVENT=="mousedown")?"mousedown":"click",fe[ve].zimTabEvent),fe[ve].removeFrom();return fe.splice(_e,oe),ue.splice(_e,oe),at(),Q},Q.keyEvent=function(oe){if(!(!Q.keyEnabled||!Q.keyFocus||Q.zimAccessibility)&&oe.keyCode==9){var _e=G;oe.shiftKey?me(--_e<0?ee?i.length-1:0:_e):me(++_e>i.length-1?ee?0:i.length-1:_e),Q.dispatchEvent("change"),Q.dispatchEvent("keychange"),!t.OPTIMIZE&&(mt||!j.OPTIMIZE)&&Q.stage&&Q.stage.update(),oe.preventDefault()}},j.addEventListener("keydown",Q.keyEvent),Object.defineProperty(this,"selected",{get:function(){return fe[G]},set:function(){dt&&$e("Tabs() - selected is read only - try selectedIndex")}}),Object.defineProperty(this,"selectedIndex",{get:function(){return G},set:function(oe){me(oe,!0),!t.OPTIMIZE&&(mt||!j.OPTIMIZE)&&Q.stage&&Q.stage.update()}}),this.last=function(){return this.selectedIndex=this.buttons.length-1,this},this.first=function(){return this.selectedIndex=0,this},Object.defineProperty(this,"tabs",{get:function(){return G},set:function(oe){me(Math.min(Math.max(oe,0),i.length-1)),!t.OPTIMIZE&&(mt||!j.OPTIMIZE)&&Q.stage&&Q.stage.update()}}),Object.defineProperty(this,"color",{get:function(){return Q.buttons[0].tabItems?Q.buttons[0].tabItems.color:C},set:function(oe){if(C=oe,Q.buttons[0].tabInfo){for(var _e=0;_e<Q.buttons.length;_e++)Q.buttons[_e].tabInfo&&(Q.buttons[_e].tabInfo.color=oe),(_e!=G||!x)&&(Q.buttons[_e].color=C);!t.OPTIMIZE&&(mt||!j.OPTIMIZE)&&Q.stage&&Q.stage.update()}}}),Object.defineProperty(this,"rollColor",{get:function(){return Q.buttons[0].tabItems?Q.buttons[0].tabItems.rollColor:T},set:function(oe){if(T=oe,Q.buttons[0].tabInfo){for(var _e=0;_e<Q.buttons.length;_e++)Q.buttons[_e].tabInfo&&(Q.buttons[_e].tabInfo.rollColor=oe),Q.buttons[_e].rollColor=T,_e!=G&&Q.buttons[_e].rolled&&(Q.buttons[_e].color=T);!t.OPTIMIZE&&(mt||!j.OPTIMIZE)&&Q.stage&&Q.stage.update()}}}),Object.defineProperty(this,"selectedColor",{get:function(){return Q.buttons[0].tabItems?Q.buttons[0].tabItems.selectedColor:w},set:function(oe){if(w=oe,Q.buttons[0].tabInfo){for(var _e=0;_e<Q.buttons.length;_e++)Q.buttons[_e].tabInfo&&(Q.buttons[_e].tabInfo.selectedColor=oe),_e==G&&x&&(Q.buttons[_e].color=w);!t.OPTIMIZE&&(mt||!j.OPTIMIZE)&&Q.stage&&Q.stage.update()}}}),Object.defineProperty(this,"selectedRollColor",{get:function(){return Q.buttons[0].tabItems?Q.buttons[0].tabItems.selectedRollColor:A},set:function(oe){if(A=oe,Q.buttons[0].tabInfo){for(var _e=0;_e<Q.buttons.length;_e++)Q.buttons[_e].tabInfo&&(Q.buttons[_e].tabInfo.selectedRollColor=oe),_e==G&&x&&Q.buttons[_e].rolled&&(Q.buttons[_e].color=A);!t.OPTIMIZE&&(mt||!j.OPTIMIZE)&&Q.stage&&Q.stage.update()}}}),Object.defineProperty(this,"backgroundColor",{get:function(){return Q.buttons[0].tabItems?Q.buttons[0].tabItems.backgroundColor:l},set:function(oe){if(l=oe,Q.buttons[0].tabInfo){for(var _e=0;_e<Q.buttons.length;_e++)Q.buttons[_e].tabInfo&&(Q.buttons[_e].tabInfo.backgroundColor=oe),(_e!=G||!x)&&(Q.buttons[_e].backgroundColor=l);!t.OPTIMIZE&&(mt||!j.OPTIMIZE)&&Q.stage&&Q.stage.update()}}}),Object.defineProperty(this,"rollBackgroundColor",{get:function(){return Q.buttons[0].tabItems?Q.buttons[0].tabItems.rollBackgroundColor:a},set:function(oe){if(a=oe,Q.buttons[0].tabInfo){for(var _e=0;_e<Q.buttons.length;_e++)Q.buttons[_e].tabInfo&&(Q.buttons[_e].tabInfo.rollBackgroundColor=oe),Q.buttons[_e].rollBackgroundColor=a,_e!=G&&Q.buttons[_e].rolled&&(Q.buttons[_e].backgroundColor=a);!t.OPTIMIZE&&(mt||!j.OPTIMIZE)&&Q.stage&&Q.stage.update()}}}),Object.defineProperty(this,"selectedBackgroundColor",{get:function(){return Q.buttons[0].tabItems?Q.buttons[0].tabItems.selectedBackgroundColor:c},set:function(oe){if(c=oe,Q.buttons[0].tabInfo){for(var _e=0;_e<Q.buttons.length;_e++)Q.buttons[_e].tabInfo&&(Q.buttons[_e].tabInfo.selectedBackgroundColor=oe),_e==G&&x&&(Q.buttons[_e].backgroundColor=c);!t.OPTIMIZE&&(mt||!j.OPTIMIZE)&&Q.stage&&Q.stage.update()}}}),Object.defineProperty(this,"selectedRollBackgroundColor",{get:function(){return Q.buttons[0].tabItems?Q.buttons[0].tabItems.selectedRollBackgroundColor:d},set:function(oe){if(d=oe,Q.buttons[0].tabInfo){for(var _e=0;_e<Q.buttons.length;_e++)Q.buttons[_e].tabInfo&&(Q.buttons[_e].tabInfo.selectedRollBackgroundColor=oe),_e==G&&x&&Q.buttons[_e].rolled&&(Q.buttons[_e].backgroundColor=d);!t.OPTIMIZE&&(mt||!j.OPTIMIZE)&&Q.stage&&Q.stage.update()}}}),Object.defineProperty(this,"label",{get:function(){return ue[G]},set:function(){dt&&$e("Tabs() - selected is read only - try selectedIndex")}}),Object.defineProperty(this,"text",{get:function(){return ue[G]!=null?ue[G].text:void 0},set:function(){dt&&$e("Tabs() - selected is read only - try selectedIndex")}}),Object.defineProperty(this,"buttons",{get:function(){return fe},set:function(){dt&&$e("Tabs() - buttons is read only")}}),Object.defineProperty(this,"labels",{get:function(){return ue},set:function(){dt&&$e("Tabs() - labels is read only")}}),this._enabled=!0,Object.defineProperty(Q,"enabled",{get:function(){return Q._enabled},set:function(oe){It(Q,oe)}}),j.KEYFOCUS!=null&&(t.KEYFOCUS=j.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return t.KEYFOCUS==Q},set:function(){t.KEYFOCUS=Q}}),p&&t.KEYFOCUS&&Je(),this.on("mousedown",function(){p&&Je()});function Je(){Q.keyFocus=!0;var oe=document.activeElement;oe&&oe.blur()}var ce=Q.getBounds();n(ce)||ce.width==0?Q.setBounds(0,0,e,r):Q.width=e,n(N)&&(N=U.selectedIndex!=null?U.selectedIndex:0),Q.selectedIndex=N,z!==!1&&t.styleTransforms(this,U),this.clone=function(){for(var oe=t.copy(i,!0),_e=0;_e<oe.length;_e++)oe[_e].label=oe[_e].label.clone();return Q.cloneProps(new t.Tabs(e,r,oe,l,a,s,c,d,C,T,h,w,A,y,v,P,x,E,k,p,m,S,_,Y,B,b,X,V,O,Z,W,K,ne,F,D,u,f,o,g,q,I,R,le,N,L,ee,z,this.group,xe))},this.doDispose=function(oe,_e,je){Q.keyEvent&&j.removeEventListener("keydown",Q.keyEvent),t.loop(Q.buttons,function(Ve){Ve.dispose()}),Q.keyEvent=null,je||this.zimContainer_dispose(!0),x=H=i=ue=ye=fe=Ke=null}},t.extend(t.Tabs,t.Container,["clone","dispose"],"zimContainer",!1),t.Tabs.prototype.dispose=function(e){return this.doDispose(null,null,e)},t.Pad=function(e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,x,E,k,p,m,S,_,Y,B,b,X,V,O,Z,W,K,ne,F,D){var u="width, cols, rows, keys, backgroundColor, rollBackgroundColor, downBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, color, rollColor, downColor, selectedColor, selectedRollColor, spacing, currentEnabled, currentSelected, corner, labelColor, gradient, gloss, backing, rollBacking, wait, waitTime, waitBackgroundColor, rollWaitBackgroundColor, waitColor, rollWaitColor, waitModal, waitEnabled, selectedIndex, style, group, inherit",f;if(f=lt(t.Pad,arguments,u,this))return f;Le("66"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Pad",this.group=F;var o=ne===!1?{}:t.getStyle(this.type,this.group,D);n(e)&&(e=o.width!=null?o.width:150),n(r)&&(r=o.cols!=null?o.cols:3),n(i)&&(i=o.rows!=null?o.rows:r);var g;if(n(l))if(o.keys!=null)l=o.keys;else for(l=[],g=1;g<=i*r;g++)l.push(g);n(P)&&(P=o.currentEnabled!=null?o.currentEnabled:!0),n(v)&&(v=o.spacing!=null?o.spacing:1);var q=this,I;this.cols=r,this.rows=i;var R=e/r-v,le=[],N=0,L;for(this.labels=[],this.buttons=[],g=0;g<i;g++){for(var ee=[],z=0;z<r;z++)ee.push(l[N]!=null?l[N]:""),N++;var $=o.corner!=null?o.corner:E;$&&!Array.isArray($)&&($=[$,$,$,$]),L=le[g]=new t.Tabs({width:e,height:R,tabs:ee,backgroundColor:o.backgroundColor!=null?o.backgroundColor:a,rollBackgroundColor:o.rollBackgroundColor!=null?o.rollBackgroundColor:s,downBackgroundColor:o.downBackgroundColor!=null?o.downBackgroundColor:c,selectedBackgroundColor:o.selectedBackgroundColor!=null?o.selectedBackgroundColor:d,color:o.color!=null?o.color:T,rollColor:o.rollColor!=null?o.rollColor:h,downColor:o.downColor!=null?o.downColor:w,selectedColor:o.selectedColor!=null?o.selectedColor:A,spacing:o.spacing!=null?o.spacing:v,currentEnabled:o.currentEnabled!=null?o.currentEnabled:P,currentSelected:o.currentSelected!=null?o.currentSelected:x,corner:$,backing:o.backing!=null?o.backing.clone():S,rollBacking:o.rollBacking!=null?o.rollBacking.clone():_,base:null,keyEnabled:!1,gradient:o.gradient!=null?o.gradient:p,gloss:o.gloss!=null?o.gloss:m,wait:o.wait!=null?o.wait:Y,waitTime:o.waitTime!=null?o.waitTime:B,waitBackgroundColor:o.waitBackgroundColor!=null?o.waitBackgroundColor:b,rollWaitBackgroundColor:o.rollWaitBackgroundColor!=null?o.rollWaitBackgroundColor:X,waitColor:o.waitColor!=null?o.waitColor:V,rollWaitColor:o.rollWaitColor!=null?o.rollWaitColor:O,waitModal:o.waitModal!=null?o.waitModal:Z,waitEnabled:o.waitEnabled!=null?o.waitEnabled:W,group:F,style:!1}),this.labels=this.labels.concat(L.labels),this.buttons=this.buttons.concat(L.buttons),this.addChild(L),L.selectedIndex=-1,L.y=(R+v)*g,L.znum=g,L.on("change",xe)}this.tabs=le;function xe(ie){var ke=ie.target;q.selected=ke.selected,q.text=ke.text,q.label=ke.label;for(var U=ke.selectedIndex,Ee=0;Ee<le.length;Ee++)ke!=le[Ee]&&(le[Ee].selectedIndex=-1);I=ke.znum*r+U,q.dispatchEvent("change"),!t.OPTIMIZE&&(mt||!j.OPTIMIZE)&&q.stage&&q.stage.update()}Object.defineProperty(this,"selectedIndex",{get:function(){return I},set:function(ie){I=ie;for(var ke=0;ke<le.length;ke++)le[ke].selectedIndex=-1;var U=Math.floor(I/r);U>=0&&U<q.tabs.length&&(q.tabs[U].selectedIndex=I%r)}}),this._enabled=!0,Object.defineProperty(q,"enabled",{get:function(){return q._enabled},set:function(ie){It(q,ie)}}),n(K)&&(K=o.selectedIndex!=null?o.selectedIndex:0),q.selectedIndex=K,ne!==!1&&t.styleTransforms(this,o),this.clone=function(){return q.cloneProps(new t.Pad(e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,x,E,k,p,m,S,_,Y,B,b,X,V,O,Z,W,K,ne,this.group,D))},this.dispose=function(ie,ke,U){t.loop(le,function(Ee){Ee.dispose()}),this.labels=this.buttons=this.tabs=null,L=le=q.rowTabs=null,U||this.zimContainer_dispose(!0)}},t.extend(t.Pad,t.Container,["clone","dispose"],"zimContainer",!1),t.NumPad=function(e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,x,E,k,p,m,S,_){var Y="advanced, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, backgroundColor, borderColor, borderWidth, corner, numberCorner, close, closeColor, collapse, collapseColor, collapsed, align, shadowColor, shadowBlur, draggable, boundary, style, group, inherit",B;if(B=lt(t.NumPad,arguments,Y,this))return B;Le("57.7"),this.group=S;var b=m===!1?{}:t.getStyle("NumPad",this.group,_);n(e)&&(e=b.advanced!=null?b.advanced:!1);var X=400,V=e?620:530;n(r)&&(r=b.titleBar!=null?b.titleBar:"NUMPAD"),n(i)&&(i=b.titleBarColor!=null?b.titleBarColor:t.white),n(l)&&(l=b.titleBarBackgroundColor!=null?b.titleBarBackgroundColor:t.grey),n(a)&&(a=b.titleBarHeight!=null?b.titleBarHeight:40),n(s)&&(s=b.backgroundColor!=null?b.backgroundColor:t.darker),n(c)&&(c=b.borderColor!=null?b.borderColor:t.pewter),n(d)&&(d=b.borderWidth!=null?b.borderWidth:null),c<0||d<0?c=d=null:c!=null&&d==null&&(d=1),n(C)&&(C=b.corner!=null?b.corner:15),n(T)&&(T=b.numberCorner!=null?b.numberCorner:30),n(P)&&(P=b.align!=null?b.align:"left"),n(x)&&(x=b.shadowColor!=null?b.shadowColor:"rgba(0,0,0,.3)"),n(E)&&(E=b.shadowBlur!=null?b.shadowBlur:14),n(k)&&(k=b.draggable!=null?b.draggable:!0),n(p)&&(p=b.boundary!=null?b.boundary:null),n(h)&&(h=b.close!=null?b.close:!0),n(w)&&(w=b.closeColor!=null?b.closeColor:n(i)?t.grey:i),Array.isArray(C)||(C=[C,C,C,C]),n(A)&&(A=b.collapse!=null?b.collapse:!0),n(y)&&(y=b.collapseColor!=null?b.collapseColor:n(i)?t.grey:i),n(v)&&(v=b.collapsed!=null?b.collapsed:!1),this.zimPanel_constructor(X,V,null,r,i,l,a,s,c,d,C,h,w,null,null,null,A,y,v,P,x,E,k,p,m,S,_),this.type="NumPad";var O=this;function Z(K,ne){return n(ne)&&(ne=mist),{label:K,backgroundColor:ne,rollBackgroundColor:white,color:darker,rollColor:darker}}var W=[Z("C",t.red.darken(.1)),Z(new t.Label({text:"\u2423",size:90,shiftV:-24}),t.yellow.darken(.1)),Z(new t.Label({text:"/",size:48,bold:!0,shiftV:3})),Z(new t.Label({text:"*",size:65,shiftV:18})),1,2,3,Z(new t.Label({text:"-",size:60,shiftV:-3})),4,5,6,Z(new t.Label({text:"+",size:55,shiftV:3})),7,8,9,Z(new t.Label({text:"\u232B",size:M=="ios"?60:35}),t.red.darken(.1)),Z(new t.Label({text:",",size:70,shiftV:-3})),Z(new Xr({text:".",size:70,shiftV:-3})),0,Z(new t.Label({text:"\u23CE",size:M=="ios"?40:50,shiftV:5}),t.green.darken(.1))];e&&(W.splice(2,0,Z("%",yellow.darken(.1))),W.splice(4,0,Z(new t.Label({text:"^",size:47,shiftV:10}),yellow.darken(.1))),W.splice(4,0,Z(")",yellow.darken(.1))),W.splice(4,0,Z("(",yellow.darken(.1)))),O.pad=new t.Pad({width:380,cols:4,rows:e?6:5,keys:W,spacing:6,currentSelected:!1,backgroundColor:t.grey,rollBackgroundColor:t.tin,selectedBackgroundColor:t.grey,downBackgroundColor:t.green,corner:T}),O.pad.on("mousedown",function(){O.pad.text=="C"?O.key="clear":O.pad.text=="\u2423"?O.key="space":O.pad.text=="\u232B"?O.key="backspace":O.pad.text=="\u23CE"?O.key="enter":O.key=O.pad.text,O.dispatchEvent("pressed")}),O.add(O.pad,null,!0),m!==!1&&t.styleTransforms(this,b),this.clone=function(){return O.cloneProps(new t.NumPad(e,r?r.clone():"",i,l,a,s,c,d,C,T,h,w,A,y,O.collapsed,P,x,E,k,p,m,this.group,_))}},t.extend(t.NumPad,t.Panel,["clone"],"zimPanel",!1),t.DPad=function(e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,x){var E="axis, width, backgroundColor, borderWidth, borderColor, indicatorColor, indicatorPressColor, indicatorScale, indicatorRadius, innerCircle, innerScale, activeRadius, clamp, logo, style, group, inherit",k;if(k=lt(t.DPad,arguments,E,this))return k;Le("66.2"),this.zimContainer_constructor(null,null,null,null,!1),this.type="DPad",this.group=P;var p=v===!1?{}:t.getStyle(this.type,this.group,x);n(e)&&(e=p.axis!=null?p.axis:"all"),n(r)&&(r=p.width!=null?p.width:100),n(i)&&(i=p.backgroundColor!=null?p.backgroundColor:t.granite),n(a)&&(a=p.borderColor!=null?p.borderColor:null),n(l)&&(l=p.borderWidth!=null?p.borderWidth:null),a<0||l<0?a=l=null:a!=null&&l==null&&(l=1),n(s)&&(s=p.indicatorColor!=null?p.indicatorColor:t.moon),n(c)&&(c=p.indicatorPressColor!=null?p.indicatorPressColor:t.lighter),n(d)&&(d=p.indicatorScale!=null?p.indicatorScale:1),n(C)&&(C=p.indicatorRadius!=null?p.indicatorRadius:null),n(T)&&(T=p.innerCircle!=null?p.innerCircle:!0),n(h)&&(h=p.innerScale!=null?p.innerScale:.5),n(w)&&(w=p.activeRadius!=null?p.activeRadius:r),n(A)&&(A=p.clamp!=null?p.clamp:!0),n(y)&&(y=p.logo!=null?p.logo:!1);var m=this;this.axis=e,this.outer=new t.Circle(r/2,i,a,l).addTo(this);var S=this.inner=new t.Circle(r*h/2,"rgba(0,0,0,.2)").center(this);y&&(this.logo=new t.Label({text:"D",bold:!0}).center(S).mov(1,2).alp(.3));var _=new t.Container().addTo(this),Y=(r-l)*.2*d,B=8;e=="vertical"?B=2:e=="horizontal"?(B=2,_.rotation=90):e=="both"&&(B=4),t.loop(B,function(K,ne){new t.Triangle(Y,Y,Y,s).addTo(_).reg(null,n(C)?(r-l)*.475:C).rot(K*360/ne)});var b=0,X=0,V;m.dirX=0,m.dirY=0;var O,Z=!0;this.on("mousedown",function(K){O=K,_.loop(function(ne){ne.color=c}),Z?m.ticker=t.Ticker.add(function(){W()}):t.Ticker.add(m.ticker)}),this.on("pressmove",function(K){O=K}),this.on("pressup",function(){t.Ticker.remove(m.ticker),m.dirX=m.dirY=0,_.loop(function(K){K.color=s}),m.stage&&m.stage.update()});function W(){var K=O;b=K.stageX/t.scaX,X=K.stageY/t.scaY,V=m.globalToLocal(b,X),K=new Ne.Event("change"),K.dirX=((V.x+w)/(w*2)-.5)*2,K.dirY=((V.y+w)/(w*2)-.5)*2,A&&(K.dirX=t.constrain(K.dirX,-1,1),K.dirY=t.constrain(K.dirY,-1,1)),m.dirX=K.dirX,m.dirY=K.dirY,m.dispatchEvent(K)}this._enabled=!0,Object.defineProperty(m,"enabled",{get:function(){return m._enabled},set:function(K){It(m,K)}}),t.styleTransforms(this,p),this.clone=function(){return m.cloneProps(new t.DPad(e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,this.group,x))},this.dispose=function(K,ne,F){return this.ticker&&t.Ticker.remove(this.ticker),F||this.zimContainer_dispose(!0),!0}},t.extend(t.DPad,t.Container,["clone","dispose"],"zimContainer",!1),t.Radial=function(e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,x,E,k,p,m,S,_,Y,B,b,X,V,O,Z,W,K,ne,F,D,u,f,o){var g="labels, size, font, height, coreRadius, coreColor, startAngle, totalAngle, angles, flip, shiftRadial, icons, rollIcons, rotateIcons, iconsShiftRadial, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, backdropColor, color, rollColor, selectedColor, selectedRollColor, borderColor, borderWidth, gradient, gap, gapAsAngle, spacing, spacingInner, spacingOuter, currentEnabled, currentSelected, selectedIndex, style, group, inherit",q;if(q=lt(t.Radial,arguments,g,this))return q;Le("66.4"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Radial",this.group=f;var I=u===!1?{}:t.getStyle(this.type,this.group,o);n(e)&&(e=I.labels!=null?I.labels:["A","B","C","D","E"]),n(r)&&(r=I.size!=null?I.size:30),n(i)&&(i=I.font!=null?I.font:"verdana"),n(c)&&(c=I.startAngle!=null?I.startAngle:null),n(d)&&(d=I.totalAngle!=null?I.totalAngle:360),n(C)&&(C=I.angles!=null?I.angles:null),n(T)&&(T=I.flip!=null?I.flip:!0),n(h)&&(h=I.shiftRadial!=null?I.shiftRadial:0),n(w)&&(w=I.icons!=null?I.icons:null),n(A)&&(A=I.rollIcons!=null?I.rollIcons:null),n(y)&&(y=I.rotateIcons!=null?I.rotateIcons:!1),n(v)&&(v=I.iconsShiftRadial!=null?I.iconsShiftRadial:0),n(l)&&(l=I.height!=null?I.height:60),n(a)&&(a=I.coreRadius!=null?I.coreRadius:100),n(s)&&(s=I.coreColor!=null?I.coreColor:t.dark),n(p)&&(p=I.backdropColor!=null?I.backdropColor:t.clear),n(P)&&(P=I.backgroundColor!=null?I.backgroundColor:t.granite),n(x)&&(x=I.rollBackgroundColor!=null?I.rollBackgroundColor:t.tin),n(E)&&(E=I.selectedBackgroundColor!=null?I.selectedBackgroundColor:t.charcoal),n(k)&&(k=I.selectedRollBackgroundColor!=null?I.selectedRollBackgroundColor:E),n(m)&&(m=I.color!=null?I.color:t.white),n(S)&&(S=I.rollColor!=null?I.rollColor:m),n(_)&&(_=I.selectedColor!=null?I.selectedColor:m),n(Y)&&(Y=I.selectedRollColor!=null?I.selectedRollColor:S),n(B)&&(B=I.borderColor!=null?I.borderColor:t.dark),n(b)&&(b=I.borderWidth!=null?I.borderWidth:2),n(O)&&(O=I.gapAsAngle!=null?I.gapAsAngle:!1),n(V)&&(V=I.gap!=null?I.gap:O?3:6),n(X)&&(X=I.gradient!=null?I.gradient:null),X===!0&&(X=.1),n(Z)&&(Z=I.spacing!=null?I.spacing:6),n(W)&&(W=I.spacingInner!=null?I.spacingInner:Z),n(K)&&(K=I.spacingOuter!=null?I.spacingOuter:Z),n(ne)&&(ne=I.currentEnabled!=null?I.currentEnabled:!1),n(F)&&(F=I.currentSelected!=null?I.currentSelected:!0);var R=this,le=this.innerRadius=a+W,N=this.outerRadius=le+l;this.setBounds(-N,-N,N*2,N*2);var L=this.backdrop=new t.Circle(N+K,p).center(this);if(a>0&&(this.core=new t.Circle(a,s).center(this)),C&&C.length<e.length-1)return dt&&$e("Radial() - not enough angles provided"),this;if(e&&e.length>0||w&&w.length>0){var ee;if(e&&e.length>0&&(ee=e.length),w&&w.length>0&&(ee>0?ee=Math.min(w.length,ee):ee=w.length),A&&A.length<ee)for(var z=0;z<ee-A.length;z++)A.push(new t.Circle(1,t.clear));var $=L.width,xe=this.buttons=new t.Container(-$/2,-$/2,$,$).centerReg(this),ie=V;O||(V=V/N*180/Math.PI,ie=ie/le*180/Math.PI);for(var ke=(d-V*ee+(d==360?0:V))/ee,U=c||0,Ee=0;Ee<ee;Ee++){C&&(ke=C[Ee]);var Q=new t.Shape(-$/2,-$/2,$,$).centerReg(xe);Q.num=Ee,Q.zimSelected=!1,Q.angle=ke;var G=Q.graphics;Q.backgroundColor=t.Pick.choose(P),Q.rollBackgroundColor=t.Pick.choose(x),Q.selectedBackgroundColor=t.Pick.choose(E),Q.selectedRollBackgroundColor=t.Pick.choose(k),Q.color=t.Pick.choose(m),Q.rollColor=t.Pick.choose(S),Q.selectedColor=t.Pick.choose(_),Q.selectedRollColor=t.Pick.choose(Y),Q.colorCommand=G.f(Q.backgroundColor).command,(n(b)||b>0)&&(!n(B)||!n(b))&&(n(B)&&(B=t.black),Q.borderColorCommand=G.s(B).command,Q.borderWidthCommand=G.ss(b).command);var ue=(U-90-ke/2)*Math.PI/180,fe=(U-90+ke/2)*Math.PI/180,ye=(U-90+(ke+V-ie)/2)*Math.PI/180,H=(U-90-(ke+V-ie)/2)*Math.PI/180;if(G.arc(0,0,N,ue,fe,!1),G.arc(0,0,le,ye,H,!0).cp(),X&&(G.s().ss().rf(["rgba(0,0,0,"+X+")","rgba(255,255,255,"+X+")"],[0,1],0,0,le,0,0,N),G.arc(0,0,N,ue,fe,!1),G.arc(0,0,le,ye,H,!0).cp()),Q.cur("pointer"),Q.zimOverEvent=Q.on("mouseover",function(de){var se=de.target;se.colorCommand.style=se==R.selected&&F?se.selectedRollBackgroundColor:se.rollBackgroundColor,se.label&&(se.label.color=se==R.selected&&F?se.selectedRollColor:se.rollColor),A&&(se.holder.removeAllChildren(),A[se.num].loc(1,0,se.holder)),R.stage&&R.stage.update()}),Q.zimOutEvent=Q.on("mouseout",function(de){var se=de.target;se.colorCommand.style=se==R.selected&&F?se.selectedBackgroundColor:se.backgroundColor,se.label&&(se.label.color=se==R.selected&&F?se.selectedColor:se.color),A&&(se.holder.removeAllChildren(),w&&w[se.num].loc(1,0,se.holder)),R.stage&&R.stage.update()}),Q.zimDownEvent=Q.on((mt?t.ACTIONEVENT=="mousedown":j.ACTIONEVENT=="mousedown")?"mousedown":"click",function(de){var se=de.target,Ie=se!==R.selected;R.lastSelected=R.selected,ae=se.num,F?Ie?(R.selected&&(R.selected.colorCommand.style=R.selected.backgroundColor,R.selected.label&&(R.selected.label.color=R.selected.color)),R.selected=se,R.label=se.label,R.label&&(R.text=R.label.text),R.icon=se.icon,se.colorCommand.style=se.selectedRollBackgroundColor,se.label&&(se.label.color=se.selectedRollColor)):ne||(ae=-1,R.selected=null,R.label=null,R.text=null,R.icon=null,se.colorCommand.style=se.rollBackgroundColor,se.label&&(se.label.color=se.rollColor)):(R.selected=se,R.label=se.label,R.label&&(R.text=R.label.text),R.icon=se.icon),R.dispatchEvent("change"),!t.OPTIMIZE&&(mt||!j.OPTIMIZE)&&R.stage&&R.stage.update()}),w&&w.length>0){var re=le+l/2+v,pe=Q.holder=new t.Container(3,re).addTo(this).reg(1,re).rot(U);pe.mouseChildren=!1,pe.mouseEnabled=!1,Q.icon=w[Ee],w[Ee].loc(1,0,pe),y||(w[Ee].rotation=-U)}if(e&&e.length>0){var te;if(e[Ee].type!="LabelOnArc"){var ge=e[Ee].type=="Label"?e[Ee]:new t.Label({text:e[Ee],size:r,font:i,color:m,style:u,inherit:o});te=new t.LabelOnArc({label:ge,color:m,size:r,spacing:-5,flip:T&&U>90&&U<270,radius:le+(l-ge.height)/2+2+h,style:u,inherit:o})}else te=e[Ee];e[Ee]=te,Q.label=te,te.center(this).rot(U),te.mouseChildren=!1,te.mouseEnabled=!1}if(Ee!=e.length-1){var Ae=C?C[Ee+1]:ke;U+=(ke+Ae)/2+V}}n(c)||(R.rotation+=R.buttons.getChildAt(0).angle/2)}var ae=null;Object.defineProperty(this,"selectedIndex",{get:function(){return ae},set:function(de){var se;R.buttons&&(se=R.buttons.getChildAt(de)),se!==R.selected&&(R.selected&&(R.selected.colorCommand.style=R.selected.backgroundColor,R.selected.label&&(R.selected.label.color=R.selected.color)),R.selected=se,se&&(F&&(se.colorCommand.style=se.selectedRollBackgroundColor),se.label&&(F&&(se.label.color=se.selectedColor),R.text=se.label.text))),!t.OPTIMIZE&&(mt||!j.OPTIMIZE)&&R.stage&&R.stage.update()}}),n(D)&&(D=I.selectedIndex!=null?I.selectedIndex:0),R.selectedIndex=D,t.styleTransforms(this,I),this.clone=function(){return R.cloneProps(new t.Radial(e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,x,E,k,p,m,S,_,Y,B,b,X,V,O,Z,W,K,ne,F,D,u,this.group,o))}},t.extend(t.Radial,t.Container,"clone","zimContainer",!1),t.RadialMenu=function(e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,x,E,k,p,m,S,_,Y,B,b,X,V,O,Z,W,K,ne,F,D,u,f,o){var g="menu, size, font, height, coreRadius, coreColor, title, titleIcon, startAngle, totalAngle, flip, shiftRadial, rotateIcons, iconsShiftRadial, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, backdropColor, color, rollColor, selectedColor, selectedRollColor, borderColor, borderWidth, gradient, gap, gapAsAngle, spacing, spacingInner, spacingOuter, currentEnabled, currentSelected, open, under, style, group, inherit",q=g.split(", "),I=!1;if(e&&e.constructor==={}.constructor){for(var R in e)if(q.indexOf(R)>=0){I=!0;break}}if(e&&I){var le;if(le=lt(t.RadialMenu,arguments,g,this))return le}Le("66.6"),this.zimContainer_constructor(null,null,null,null,!1),this.type="RadialMenu",this.group=f;var N=u===!1?{}:t.getStyle(this.type,this.group,o);n(e)&&(e=N.menu!=null?N.menu:{A:{A1:["AA1","AA2","AA3","AA4"],A2:[],A3:[]},B:["B1","B2","B3","B4","B5","B6"],C:[]}),n(r)&&(r=N.size!=null?N.size:30),n(i)&&(i=N.font!=null?N.font:"verdana"),n(C)&&(C=N.startAngle!=null?N.startAngle:null),n(T)&&(T=N.totalAngle!=null?N.totalAngle:360),n(h)&&(h=N.flip!=null?N.flip:!0),n(A)&&(A=N.rotateIcons!=null?N.rotateIcons:!1),n(w)&&(w=N.shiftRadial!=null?N.shiftRadial:0),n(y)&&(y=N.iconsShiftRadial!=null?N.iconsShiftRadial:0),n(l)&&(l=N.height!=null?N.height:60),n(a)&&(a=N.coreRadius!=null?N.coreRadius:100),n(s)&&(s=N.coreColor!=null?N.coreColor:t.dark),n(c)&&(c=N.title!=null?N.title:"MENU"),n(d)&&(d=N.titleIcon!=null?N.titleIcon:null),n(k)&&(k=N.backdropColor!=null?N.backdropColor:t.clear),n(v)&&(v=N.backgroundColor!=null?N.backgroundColor:t.granite),n(P)&&(P=N.rollBackgroundColor!=null?N.rollBackgroundColor:t.tin),n(x)&&(x=N.selectedBackgroundColor!=null?N.selectedBackgroundColor:t.charcoal),n(E)&&(E=N.selectedRollBackgroundColor!=null?N.selectedRollBackgroundColor:x),n(p)&&(p=N.color!=null?N.color:t.white),n(m)&&(m=N.rollColor!=null?N.rollColor:p),n(S)&&(S=N.selectedColor!=null?N.selectedColor:p),n(_)&&(_=N.selectedRollColor!=null?N.selectedRollColor:m),n(Y)&&(Y=N.borderColor!=null?N.borderColor:t.dark),n(B)&&(B=N.borderWidth!=null?N.borderWidth:2),n(V)&&(V=N.gapAsAngle!=null?N.gapAsAngle:!1),n(X)&&(X=N.gap!=null?N.gap:V?3:6),n(O)&&(O=N.spacing!=null?N.spacing:6),n(b)&&(b=N.gradient!=null?N.gradient:null),b===!0&&(b=.1),n(Z)&&(Z=N.spacingInner!=null?N.spacingInner:O),n(W)&&(W=N.spacingOuter!=null?N.spacingOuter:O),n(K)&&(K=N.currentEnabled!=null?N.currentEnabled:!1),n(ne)&&(ne=N.currentSelected!=null?N.currentSelected:!0),n(F)&&(F=N.open!=null?N.open:!1),n(D)&&(D=N.under!=null?N.under:!0);var L=this,ee=(mt?t.ACTIONEVENT=="mousedown":j.ACTIONEVENT=="mousedown")?"mousedown":"click",z=null,$=this.core=new t.Circle({radius:a,color:s,style:u,inherit:o}).addTo(this);d&&(this.titleIcon=d.center($)),c&&(this.title=new t.Label({text:c,size:r,font:i,color:p,style:u,inherit:o}).center($)),$.cur("pointer"),$.on(ee,function(){L.leafNode=!1,U.length==0?Ee():(t.loop(U,function(G){G.selectedIndex=-1,G.removeFrom(),U=[]}),L.outerLevel=0,L.selected=L.outerMenu=L.selectedMenu=L.text=null),(K||L.selected!=z)&&L.dispatchEvent("change"),z=L.selected,L.stage&&L.stage.update()}),this.closeRings=function(G){n(G)&&(G=L.outerLevel);var ue=L.outerLevel-G;t.loop(U,function(fe,ye){ye>ue-1&&(fe.removeFrom(),fe.selectedIndex=-1,U.pop())},!0),L.outerLevel=ue,L.outerMenu=U[U.length-1],L.outerMenu&&(L.outerMenu.selectedIndex=-1),L.selected=L.selectedMenu=L.text=null,U[U.length-2]?(L.selectedMenu=U[U.length-2],L.selectedIndex=L.selectedMenu.selectedIndex):L.selectedIndex=-1,L.selected!=z&&L.dispatchEvent("change"),z=L.selected,L.stage&&L.stage.update()};var xe={},ie,ke;L.outerLevel=0,e.constructor=={}.constructor&&(e={core:e},ie=L.tree=new t.Hierarchy(e),ke=ie.getLinearIDs()),L.lastRadial=null;var U=this.radials=[];F&&Ee();function Ee(G){var ue,fe;G?ue=G.ringLevel:(ue=0,fe=a),t.loop(U,function(re,pe){pe>ue-1&&(re.removeFrom(),re.selectedIndex=-1,U.pop())},!0);var ye;if(G&&(ye=G.selected),ye){var H=ye.id;fe=G.outerRadius,Q(H,ue+1,fe)}else G||Q("id0",ue+1,fe);L.selected=ye,L.selected?(L.selectedMenu=U[L.selected.menu.ringLevel-1],L.selectedIndex=L.selected.num,L.selected.label?L.text=L.selected.label.text:L.text=null):K&&G?(L.selectedIndex=G.selectedIndex,L.label=G.label,L.text=G.text,L.icon=G.icon,L.selectedMenu=G):(L.text=null,L.selectedIndex=-1,L.selectedMenu=null),L.stage&&L.stage.update()}function Q(G,ue,fe){ue&&(L.outerLevel=ue);var ye;if(!xe[G]){var H=ie.getData(G),re=H.list;if(re&&!t.isEmpty(re)){var pe={labels:ie.getLinearList(re),coreRadius:fe,size:r,font:i,startAngle:C,totalAngle:T,flip:h,rotateIcons:A,shiftRadial:w,iconsShiftRadial:y,height:l,coreColor:t.clear,backdropColor:k,backgroundColor:v,rollBackgroundColor:P,selectedBackgroundColor:x,selectedRollBackgroundColor:E,color:p,rollColor:m,selectedColor:S,selectedRollColor:_,borderColor:Y,borderWidth:B,gapAsAngle:V,gap:X,gradient:b,spacingInner:Z,spacingOuter:W,currentSelected:ne,currentEnabled:K,style:u,inherit:o};H.styles&&(pe=t.merge(pe,H.styles)),ye=xe[G]=new t.Radial(pe),ke=ie.getLinearIDs(re),ye.buttons.loop(function(te,ge){te.menu=ye,te.id=ke[ge]}),ye.ringLevel=L.outerLevel,ye.selectedIndex=-1,ye.on("change",function(te){L.leafNode=!1,Ee(te.target),(K||L.selected!=z)&&L.dispatchEvent("change"),z=L.selected})}}xe[G]?(U.push(xe[G]),xe[G].center(L),D&&xe[G].bot()):(L.leafNode=!0,L.outerLevel-=1),L.outerMenu=ye}t.styleTransforms(this,N),this.clone=function(){return L.cloneProps(new t.RadialMenu(e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,x,E,k,p,m,S,_,Y,B,b,X,V,O,Z,W,K,ne,F,D,u,this.group,o))}},t.extend(t.RadialMenu,t.Container,"clone","zimContainer",!1),t.ColorPicker=function(e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,x,E,k,p,m,S,_,Y,B,b,X,V,O){var Z="width, colors, cols, spacing, greyPicker, alphaPicker, startBackgroundColor, draggable, shadowColor, shadowBlur, buttonBar, circles, indicator, backgroundColor, keyArrows, container, selectedIndex, selectedColor, dropperTarget, spectrumCollapse, spectrumMode, spectrumClose, spectrumOk, spectrumTitle, tolerancePicker, collapsed, style, group, inherit",W;if(W=lt(t.ColorPicker,arguments,Z,this))return W;Le("67"),this.zimContainer_constructor(null,null,null,null,!1),this.type="ColorPicker",this.group=V;var K=X===!1?{}:t.getStyle(this.type,this.group,O),ne;n(e)&&(e=K.width!=null?K.width:500),n(r)&&(r=K.colors!=null?K.colors:"spectrum"),r=="legacy"&&(ne=!0),n(i)&&(i=K.cols!=null?K.cols:10),n(l)&&(l=K.spacing!=null?K.spacing:2);var F=!ne&&r.length>0&&r.length<=i;r=="spectrum"&&(i=10,l=2,F=!1),n(s)&&(s=K.alphaPicker!=null?K.alphaPicker:!F),n(B)&&(B=K.tolerancePicker!=null?K.tolerancePicker:!1),B&&(s=!1),n(a)&&(a=K.greyPicker!=null?K.greyPicker:!F),n(C)&&(C=K.shadowColor!=null?K.shadowColor:"rgba(0,0,0,.3)"),n(T)&&(T=K.shadowBlur!=null?K.shadowBlur:14),n(h)&&(h=K.buttonBar!=null?K.buttonBar:!F),n(d)&&(h||r=="spectrum"?d=K.draggable!=null?K.draggable:!0:d=K.draggable!=null?K.draggable:!1),n(w)&&(w=K.circles!=null?K.circles:!1),n(A)&&(A=K.indicator!=null?K.indicator:!1,h||(A=K.indicator!=null?K.indicator:!0)),n(y)&&(y=K.backgroundColor!=null?K.backgroundColor:t.black),n(c)&&(c=K.startBackgroundColor!=null?K.startBackgroundColor:null),n(v)&&(v=K.keyArrows!=null?K.keyArrows:!0),n(k)&&(k=K.dropperTarget!=null?K.dropperTarget:!1),n(p)&&(p=K.spectrumCollapse!=null?K.spectrumCollapse:!0),n(m)&&(m=K.spectrumMode!=null?K.spectrumMode:!0),n(S)&&(S=K.spectrumClose!=null?K.spectrumClose:!0),n(_)&&(_=K.spectrumOk!=null?K.spectrumOk:!0),n(Y)&&(Y=K.spectrumTitle!=null?K.spectrumTitle:null),n(b)&&(b=K.collapsed!=null?K.collapsed:!1);var D=this;if(n(P))if(j.zdf)P=j.zdf.stage;else return;else if(P.getBounds){if(n(P.getStage))return}else return;D.container=P;var u="#e472c4",f="#50c4b7",o=1,g=1,q=new t.Shape;this.addChild(q),q.x+=l,q.y+=l,ne=!1;var I,R,le=[],N,L,ee,z,$,xe=r=="spectrum";if(n(r)||r=="legacy"||r=="spectrum"){ne=!0;var ie=6,ke=ie*ie*ie;ie=Math.ceil(Math.pow(ke,1/2)),R=(e-l)/18-l,$=Math.floor(Math.pow(ie*ie,1/3)),I=[];for(var U=0;U<6;U++)for(var Ee=0;Ee<6;Ee++)for(var Q=0;Q<6;Q++)I.push("#"+re(U*3)+re(Ee*3)+re(Q*3));for(r=[],U=0;U<I.length;U++)N=Math.floor(U/6),L=U%6,N>=6*3?$=1:$=0,ee=N-$*6*3,z=L+$*6,r[z*18+ee]=I[U];i=18,le=[f,u]}else R=(e-l)/i-l;var G=Math.ceil(r.length/i),ue=1,fe=String(r[r.length-1]);if(!n(c)){var ye=c.match(/rgba\((.*)\)/);ye&&(N=ye[1].split(","),ue=N.pop(),c="rgb("+N.join(",")+")"),fe=String(c)}var H;ne&&(H=f);function re(vt){return vt=Math.floor(vt).toString(16),vt+""+vt}$=0;var pe=q.graphics,te,ge,Ae=K.borderColor!=null?K.borderColor:null,ae=K.borderWidth!=null?K.borderWidth:null;!n(Ae)&&n(ae)&&(ae=1),ae&&n(Ae)&&(Ae=t.dark),ae&&pe.s(Ae).ss(ae);var de=r.length;for(xe&&(de=56),U=0;U<de;U++)N=U%i,L=Math.floor(U/i),te=N*(R+l),ge=L*(R+l),w?pe.f(r[U]).dc(te+R/2,ge+R/2,R/2):pe.f(r[U]).r(te,ge,R,R);var se=ge+R+l;D.colors=r;var Ie=se;if(a){for(U=0;U<16;U++)le.push("#"+re(U)+re(U)+re(U));for(U=0;U<le.length;U++)N=Math.floor(U/i),L=U%i,te=L*(R+l),ge=N*(R+l)+se,w?pe.f(le[U]).dc(te+R/2,ge+R/2,R/2):pe.f(le[U]).r(te,ge,R,R);se=ge+R+l;var Te=i,ve=Math.ceil(le.length/i)}D.greys=le,A&&!xe&&(A=this.indicator=w?new t.Circle(R/2*.5,null,null,null,null,null,null,null,!1):new t.Rectangle(R*.5,R*.5,null,null,null,null,null,null,null,!1),A.alpha=.5,A.centerReg(),this.addChild(A),A.mouseEnabled=!1,J(r.indexOf(fe)));function J(vt){if(n(vt)||vt<0){A.visible=!1;return}else A.visible=!0;fe=="#000"||fe=="#000000"||fe=="black"?(A.color="#222",A.alpha=1):(A.color="black",A.alpha=.5),A.x=q.x+vt%i*(R+l)+R/2,A.y=q.x+Math.floor(vt/i)*(R+l)+R/2}var Se=10,Be=se;if(s||B){var Ye=new t.Container({style:!1});Ye.setBounds(0,0,600,70),this.addChild(Ye),Ye.x=0,Ye.y=se;var Ke=this.alphaBacking=new t.Rectangle(600-Se*2,50,t.licorice,null,null,0,null,null,null,!1);Ye.addChild(Ke),t.centerReg(Ke,Ye);var at=this.alphaBut=new t.Button({width:20,height:30,backgroundColor:"darkorange",rollBackgroundColor:"orange",label:"",corner:0,hitPadding:20,style:!1}),me=this.alphaSlider=new t.Slider({min:0,max:1,step:B?0:.05,button:at,barLength:B?500*.55:600*.55,barWidth:2,barColor:t.silver,vertical:!1,useTicks:!1,inside:!1,style:!1});me.currentValue=n(ue)?1:ue,B&&(me.currentValue=.1),Ye.addChild(me),me.x=40,me.y=Ye.height/2;var Ge=this.alphaText=new t.Label({text:B?"Tolerance: 0.1":"Alpha: "+t.decimals(ue),size:30,color:"orange",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",backgroundColor:"ignore",rollColor:"orange",group:this.group});Ye.addChild(Ge),Ge.x=me.x+me.bar.width+40,Ge.y=Ye.height/2-Ge.height/2,Ye.scaleX=Ye.scaleY=e/600,me.on("change",function(){Ge.text=B?"Tolerance: "+sn(me.currentValue):"Alpha: "+sn(me.currentValue),s&&De&&(De.alpha=g=me.currentValue),D.dispatchEvent("change"),D.stage&&D.stage.update()}),se+=Ye.height-Se,B&&(D.toleranceBacking=D.alphaBacking,D.toleranceBut=D.alphaBut,D.toleranceSlider=D.alphaSlider,D.alphaBacking=D.alphaBut=D.alphaSlider=null)}if(h){var Je=new t.Container({style:!1});Je.setBounds(0,0,600,100),this.addChild(Je),Je.x=0,Je.y=se+Se;var ce=this.swatchText=new t.TextInput({align:"left",selectionAlpha:.5,text:fe.toUpperCase(),width:140,size:30,color:"orange",shadowColor:"ignore",shadowBlur:"ignore",backgroundColor:"ignore",group:this.group});if(ce.on("input",function(){(ce.text.length==4||ce.text.length==7)&&(De.color=ce.text,fe=De.color)}),Je.addChild(ce),t.centerReg(ce),ce.x=200/2-10,ce.y=50-2,d){var oe=this.grip=new t.Shape({style:!1});oe.cur("pointer"),Je.addChild(oe),oe.graphics.f("rgba(256,256,256,.25)").r(0,0,5,20).r(10,0,5,20).r(20,0,5,20).r(30,0,5,20),oe.x=70,oe.y=65,ce.y=50-10,oe.mouseEnabled=!1}var _e=this.closeBut=new t.Button({width:90,height:90,label:"X",backgroundColor:t.licorice,rollBackgroundColor:t.charcoal,corner:0,style:!1});Je.addChild(_e),_e.x=600-_e.width-Se,_e.y=0,_e.on((mt?t.ACTIONEVENT=="mousedown":j.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){D.hide(),D.dispatchEvent("close")});var je=this.okBut=new t.Button({width:150,height:90,label:"OK",backgroundColor:t.licorice,rollBackgroundColor:t.charcoal,corner:0,style:!1});Je.addChild(je),je.x=_e.x-je.width-Se,je.y=0,je.on((mt?t.ACTIONEVENT=="mousedown":j.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){Ot(),D.dispatchEvent("ok")});var Ve=this.swatchBacking=new t.Shape({style:!1});Je.addChild(Ve),pe=Ve.graphics,pe.f(t.black).r(.5,.5,50,89).f(t.granite).r(50,.5,50,89).f(t.white).r(100,.5,49.5,89),Ve.x=je.x-150-Se,Ve.y=0;var De=this.swatch=new t.Rectangle(150,90,fe,null,null,null,null,null,null,!1);Je.addChild(De),De.x=Ve.x,De.y=0,De.on((mt?t.ACTIONEVENT=="mousedown":j.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){D.dispatchEvent("swatch")}),De.cur("pointer"),De.alpha=g=ue,Je.scaleX=Je.scaleY=e/600,se+=Je.height}else q.cur("pointer");!s&&!h&&(se-=Se-l);var Oe=se+Se;this.setBounds(0,0,e,Oe);var Re=this.background=new t.Rectangle(e,Oe,y,null,null,null,null,null,null,!1);this.addChildAt(Re,0),C!=-1&&T>0&&(Re.shadow=new Ne.Shadow(C,8,8,T));var ft=j.zdf,Ze,be=!1;if(this.dropperTarget=k,xe){r="spectrum";var we=30,Me=20,He=Be-we+1,Xe=He-Me+1,nt=D.bar=new t.Rectangle(D.width,we+1,t.black).addTo(D);Y&&(D.title=new t.Label(Y,18,null,t.light).pos(12,1,LEFT,CENTER,D.bar).noMouse()),d&&nt.cur();var Ce=new t.Container(D.width,He).loc(0,we,D),Fe=new t.Rectangle(D.width,Xe,new t.GradientColor(["rgb(255 0 0)","rgb(255 255 0)","rgb(0 255 0)","rgb(0 255 255)","rgb(0 0 255)","rgb(255 0 255)","rgb(255 0 0)"],[0,1/6,2/6,3/6,4/6,5/6,6/6],0,0,500,0)).addTo(Ce).mov(0,Me-1);new t.Rectangle(D.width,Xe/2,new t.GradientColor(["rgba(255,255,255,1)","rgba(255,255,255,0)"],[0,1],0,0,0,Xe/2)).loc(Fe,null,Ce),new t.Rectangle(D.width,Xe/2+.5,new t.GradientColor(["rgba(0,0,0,1)","rgba(0,0,00,0)"],[1,0],0,0,0,Xe/2+.5)).loc(Fe,null,Ce).mov(0,Xe/2),new t.Rectangle(D.width,20,new t.GradientColor(["black","white"],[.1,.9],0,0,D.width,0)).addTo(Ce);var it=D.gradient=new t.Bitmap(Ce).loc(Ce,null,D).cur("none"),Qe=D.pixels=new t.Pixel(Ce,.5).loc(Ce,null,D).vis(!1).cur("none");Ce.dispose();var tt;!h&&S&&(tt=D.closeIcon=new t.Shape(-40,-40,80,80,null,!1),tt.graphics.f(t.light).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg"),tt.sca(.25).expand(10,10,10,1).pos(7,0,t.RIGHT,t.CENTER,nt).cur().addTo(D),tt.on((mt?t.ACTIONEVENT=="mousedown":j.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){D.hide(),D.dispatchEvent("close")}));var ot=D.collapseIcon=new t.Triangle(20,20,20,t.faint,t.light,2).expand(10,10,10,1).pos(40+(tt?30:0),0,t.RIGHT,t.CENTER,nt).cur().addTo(D);ot.on("mousedown",function(){D.collapse(ot.rotation==0)});var gt=new t.Rectangle(20,20,t.white).reg("center");new t.Tile(new t.Rectangle(10,10,t.series(t.silver,t.white,t.white,t.silver)),2,2,0,0).addTo(gt),gt.mouseChildren=!1;var ze=D.modeIcon=new t.Button({width:20,height:20,shadowColor:-1,label:"",backing:gt,toggleEvent:"mousedown",toggleBacking:new t.Rectangle(20,20,new t.GradientColor([t.white,t.grey],[0,1],0,0,20,20)).reg("center")}).pos(8+(tt?30:0),5,t.RIGHT,t.TOP,D).expand(10,10,10,1);ze.on("mousedown",function(){Qe.vis(ze.toggled),D.spectrumToggled=!ze.toggled,ft.stage.update()}),m||(ze.removeFrom(),ot.mov(28)),p||ot.removeFrom(),_||D.okBut&&D.okBut.removeFrom(),!S&&_e&&_e.removeFrom();var Mt=new t.Rectangle(D.width,D.height-He-we,t.faint).pos(0,0,t.LEFT,t.BOTTOM,D).noMouse(),ut=this.dropper=new t.Circle(10,t.clear,t.white,8);new t.Circle(5,t.clear,t.black,2).center(ut),new t.Circle(7,t.clear,t.white,2).center(ut),ut.noMouse()}this.updateDropperTarget=function(){ut.vis(!1),qe(),ut.vis(!0).top()},this.spectrumToggled=xe,this.toggleSpectrum=function(vt){vt!=D.spectrumToggled&&(n(vt)&&(vt=!D.spectrumToggled),D.spectrumToggled=vt,ze.toggle(!vt),Qe.vis(!vt),D.updateDropperTarget())};var xt=!1;function _t(){ft.stage.mouseInBounds?ut.alp(1):ut.alp(0),ut.loc(ft.mouseX,ft.mouseY,ft.stage),xt=D.spectrumToggled?it.hitTestReg(ut):Qe.hitTestReg(ut);var vt;D.dropperTarget?vt=ut.x>=Ze.x&&ut.x<=Ze.x+Ze.width&&ut.y>=Ze.y&&ut.y<=Ze.y+Ze.height:vt=!1;var Nt;if(D.dropperTarget?Nt=(xt||vt)&&!Mt.hitTestReg(ut)&&!nt.hitTestReg(ut):Nt=xt,!be&&Nt)Yt(vt);else if(be&&!Nt){Et(),ft.stage.update();return}if(Nt){var zt;if(xt)zt=D.spectrumToggled?it:Qe;else if(D.dropperTarget)zt=Ze;else return;var xn=zt.globalToLocal(ft.mouseX,ft.mouseY),en=zt.getColorAt(xn.x,xn.y,!0),bn="rgba("+en[0]+","+en[1]+","+en[2]+","+en[3]+")";en[3]<.05&&(bn=ft.color),ut.borderColor=bn,ft.stage.update()}}function Yt(vt){be=!0,vt&&qe(),ut.vis(!0).top()}function Et(){be=!1,Ze.dispose(),ut.vis(!1)}this.collapsed=!1,this.collapse=function(vt){n(vt)&&(vt=!0),vt!=D.collapsed&&(D.collapsed=vt,vt?(ze.enabled=!1,ot.rot(180),D.background.vis(!1),it.vis(!1),Mt.vis(!1),q.visible=!1,Qe&&Qe.vis(!1),Ye&&Ye.vis(!1),h&&Je.vis(!1),be=!1,qt(),ht(),D.dispatchEvent("collapsed")):(ze.enabled=!0,ot.rot(0),D.background.vis(!0),it.vis(!0),Mt.vis(!0),q.visible=!0,D.spectrumToggled||Qe.vis(!0),Ye&&Ye.vis(!0),h&&Je.vis(!0),be=!0,Jt(),qe(),nt.hitTestReg(ut)&&ht(),D.dispatchEvent("expanded")),ft.stage.update())},xe&&p&&(D.collapseEvent=nt.on("dblclick",function(){D.collapsed?D.collapse(!1):D.collapse(!0)})),xe&&b&&p&&(D.vis(!1),setTimeout(function(){D.collapse(!0),D.vis(!0),D.stage&&D.stage.update()},50));function Jt(){qt(),D.dropperDown=ft.stage.on("stagemousedown",_t),D.dropperMove=ft.stage.on("stagemousemove",_t),D.dropperUp=ft.stage.on("stagemouseup",function(){_t(),De&&xe&&xt&&De.color!=ut.borderColor&&st()})}function qt(){D.dropperDown&&ft.stage.off("stagemousedown",D.dropperDown),D.dropperMove&&ft.stage.off("stagemousemove",D.dropperMove),D.dropperUp&&ft.stage.off("stagemouseup",D.dropperUp)}function qe(){Ze&&Ze.dispose&&Ze.dispose();var vt=new t.Rectangle(ft.width,ft.height,ft.color).addTo(ft.stage,0),Nt;D.dropperTarget&&D.dropperTarget.getBounds&&D.dropperTarget.type&&!D.dropperTarget.type.includes("Stage")?Nt=D.dropperTarget.boundsToGlobal():Nt=ft.stage.getBounds(),Ze=new t.Bitmap(ft.stage,Nt.width,Nt.height,Nt.x,Nt.y).loc(Nt).cur("none"),vt.dispose(),Ze.on("mousedown",st)}function ht(){Ze&&Ze.dispose&&Ze.dispose(),ut.vis(!1)}function st(){ut.vis(!1),D.currentValue=t.convertColor(ut.borderColor,"hex"),D.dispatchEvent("change"),be&&(k?(qe(),ut.vis(!0).top(),setTimeout(function(){D.updateDropperTarget(),ft.stage.update()},50)):(ut.vis(!0).top(),ft.stage.update()))}function Ot(){if(ne&&a){f=u,u=H;var vt=[f,u];for(U=0;U<2;U++){var Nt=q.graphics;N=Math.floor(U/i),L=U%i,te=L*(R+l),ge=N*(R+l)+Ie,le[U]=vt[U],Nt.f(Re.color).r(te-1,ge-1,R+2,R+2).f(vt[U]).r(te,ge,R,R)}}H=fe,o=g,D.dispatchEvent("change"),!t.OPTIMIZE&&(mt||!j.OPTIMIZE)&&D.stage&&D.stage.update()}if(d){var St,Vt;Re.on("mousedown",Gt),Re.on("pressmove",pt),Re.on("pressup",bt),xe&&(nt.on("mousedown",Gt),nt.on("pressmove",pt),nt.on("pressup",bt))}function Gt(vt){St=vt.stageX/t.scaX-D.x,Vt=vt.stageY/t.scaY-D.y}function pt(vt){D.x=vt.stageX/t.scaX-St,D.y=vt.stageY/t.scaY-Vt,D.stage&&D.stage.update()}function bt(){D.stage&&D.stage.update()}var Zt=i*(R+l),Xt=G*(R+l);if(a)var tn=Te*(R+l),fn=ve*(R+l);q.on((mt?t.ACTIONEVENT=="mousedown":j.ACTIONEVENT=="mousedown")?"mousedown":"click",function(vt){var Nt=t.hitTestGrid(q,Zt,Xt,i,G,vt.stageX,vt.stageY,0,0,l,l);n(Nt)||(fe=r[Nt],h&&(De.color=fe,ce.text=String(r[Nt]).toUpperCase()),Ot()),a&&(Nt=null,Nt=t.hitTestGrid(q,tn,fn,Te,ve,vt.stageX,vt.stageY,0,Xt,l,l),n(Nt)||(fe=le[Nt],h&&(De.color=fe,ce.text=le[Nt].toUpperCase()),Ot())),A&&J(r.indexOf(fe)),h?D.stage&&D.stage.update():A&&D.stage&&D.stage.update(),Kt()}),Object.defineProperty(this,"selectedColor",{get:function(){return fe},set:function(vt){vt=vt.toLowerCase(),H=fe=vt,h&&(De.color=fe,ce.text=fe,D.stage&&D.stage.update()),A&&!xe&&J(r.indexOf(fe)),Kt()}}),Object.defineProperty(this,"currentValue",{get:function(){return fe},set:function(vt){D.selectedColor=vt}}),Object.defineProperty(this,"currentValueEvent",{get:function(){return fe},set:function(vt){vt!=D.selectedColor&&(D.selectedColor=vt,D.dispatchEvent("change"))}}),Object.defineProperty(this,"selectedIndex",{get:function(){return xe?null:r.indexOf(fe)},set:function(vt){xe||(H=fe=r[vt],h&&(De.color=fe,ce.text=fe,D.stage&&D.stage.update()),A&&J(r.indexOf(fe)),Kt())}}),Object.defineProperty(this,"selectedAlpha",{get:function(){return s?sn(me.currentValue):1},set:function(vt){s&&(o=me.currentValue=vt,De&&(De.alpha=o),Ge&&(Ge.text="Alpha: "+sn(me.currentValue)),D.stage&&D.stage.update())}}),Object.defineProperty(this,"selectedTolerance",{get:function(){return B?sn(me.currentValue):1},set:function(vt){B&&(me.currentValue=vt,D.stage&&D.stage.update())}}),Object.defineProperty(this,"colors",{get:function(){return xe?"spectrum":a?r.concat(le):r},set:function(){dt&&$e("ColorPicker() colors is read only - make a new ColorPicker to change")}}),j.KEYFOCUS!=null&&(t.KEYFOCUS=j.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return t.KEYFOCUS==D},set:function(){mt?t.KEYFOCUS=D:j.KEYFOCUS=D}}),v&&t.KEYFOCUS&&an(),this.on("mousedown",function(){v&&an()});function an(){D.keyFocus=!0;var vt=document.activeElement;vt&&vt.blur()}function Kt(){D.zimAccessibility&&D.zimAccessibility.changeTitle(D,null,!0)}this.keyDownEvent=function(vt){if(D.stage&&!xe&&(D.zimAccessibility&&D.focus||!D.zimAccessibility&&D.keyFocus)){var Nt=D.selectedIndex;vt.keyCode==37||vt.keyCode==40?(Nt--,Ct(Nt)):(vt.keyCode==38||vt.keyCode==39)&&(Nt++,Ct(Nt))}};function Ct(vt){vt<0&&(vt=D.colors.length-1),vt>D.colors.length-1&&(vt=0),D.selectedIndex=vt,D.dispatchEvent("change"),D.stage&&D.stage.update()}j.addEventListener("keydown",this.keyDownEvent);var Ue,ft;this.hide=function(){return Ue=D.stage,D.removeFrom(),Ue&&Ue.update(),D},this.on("removed",Ht);function Ht(){if(xe&&(be=!1,qt(),ht()),D.toggled=!1,D.zimAccessibility){var vt=D.zimAccessibility;vt.resize(D),Wt?Wt.focus():D.zimTabTag.nextSibling.focus(),setTimeout(function(){vt.talk("ColorPicker has been closed.")},50)}Ue&&Ue.update()}var Wt,ln=!1;this.show=function(){return D.center(D.container),D};function jt(){if(D.stage&&(Ue=D.stage,ft=Ue.frame),D.zimAccessibility){var vt=D.zimAccessibility;setTimeout(function(){vt.activatedObject&&(Wt=vt.activatedObject.zimTabTag)},50),vt.resize(D),vt.tabIndex=D.zimTabIndex}D.toggled=!0,setTimeout(function(){xe&&(be=!0,qe(),Jt(),Yt(),_t()),D.stage&&D.stage.update()},20)}this.on("added",jt),this.toggle=function(vt){return vt===!0?D.show():vt===!1||D.container.contains(D)?D.hide():D.show(),D};function sn(vt){return Math.round(vt*Math.pow(10,2))/Math.pow(10,2)}n(x)&&(x=K.selectedIndex!=null?K.selectedIndex:0),D.selectedIndex=x,n(E)&&(E=K.selectedColor!=null?K.selectedColor:null),E!=null?D.selectedColor=E:xe&&(D.selectedColor="#888888"),X!==!1&&t.styleTransforms(this,K),this.clone=function(){return D.cloneProps(new t.ColorPicker(e,ne?null:r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,x,E,k,p,m,S,_,Y,B,b,X,this.group,O))},this.dispose=function(vt,Nt,zt){return j.removeEventListener("keydown",D.keyDownEvent),xe&&(qt(),D.gradient.cur("default"),D.pixels.cur("default"),k&&k.cur("default"),Ze.cur("default"),be=!1,ht()),me&&me.dispose(),ut&&ut.dispose(),D.dropperDown&&ft.stage.off("stagemousedown",D.dropperDown),D.dropperMove&&ft.stage.off("stagemousemove",D.dropperMove),D.dropperUp&&ft.stage.off("stagemouseup",D.dropperUp),zt||this.zimContainer_dispose(!0),!0}},t.extend(t.ColorPicker,t.Container,["clone","dispose"],"zimContainer",!1),t.EmojiPicker=function(e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,x,E,k){var p="width, height, emojis, monochrome, backgroundColor, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, cache, size, collapse, collapseColor, collapsed, colSize, rowSize, style, group, inherit",m;if(m=lt(t.EmojiPicker,arguments,p,this))return m;Le("67.05"),this.group=E;var S=x===!1?{}:t.getStyle("EmojiPicker",this.group,k);n(e)&&(e=S.width!=null?S.width:400),n(r)&&(r=S.height!=null?S.height:600),n(l)&&(l=S.monochrome!=null?S.monochrome:!1),n(a)&&(a=S.backgroundColor!=null?S.backgroundColor:t.lighter),n(s)&&(s=S.titleBar!=null?S.titleBar:"Emojis"),n(c)&&(c=S.titleBarColor!=null?S.titleBarColor:null),n(d)&&(d=S.titleBarBackgroundColor!=null?S.titleBarBackgroundColor:t.silver.toAlpha(.8)),n(C)&&(C=S.titleBarHeight!=null?S.titleBarHeight:40),n(T)&&(T=S.cache!=null?S.cache:!!t.mobile()),n(h)&&(h=S.size!=null?S.size:30),n(v)&&(v=S.colSize!=null?S.colSize:h+15),n(P)&&(P=S.rowSize!=null?S.rowSize:h+14),n(w)&&(w=S.collapse!=null?S.collapse:!1),n(A)&&(A=S.collapseColor!=null?S.collapseColor:n(c)?t.grey:c),n(y)&&(y=S.collapsed!=null?S.collapsed:!1),this.zimWindow_constructor(e,r,null,a,null,S.borderWidth!=null?S.borderWidth:2,S.padding!=null?S.padding:10,S.corner!=null?S.corner:10,null,S.scrollBarActive!=null?S.scrollBarActive:!0,S.scrollBarDrag!=null?S.scrollBarDrag:!0,null,null,null,!1,null,null,null,null,!0,null,null,null,null,null,null,s,c,d,C,S.draggable!=null?S.draggable:!0,null,null,S.close!=null?S.close:!0,null,null,S.fullSize!=null?S.fullSize:!1,null,S.resizeHandle!=null?S.resizeHandle:!1,w,A,y,null,x,E,t.copy(S)),this.type="EmojiPicker";var _=this;this.emojiData=n(i)?["\u{1F4A5}","\u{1F335}","\u{1F382}","\u{1F370}","\u{1F429}","\u{1F525}","\u{1F32B}","\u{1F30A}","\u{1F34F}","\u{1F34E}","\u{1F34B}","\u{1F34C}","\u{1F347}","\u{1F351}","\u{1F345}","\u{1F346}","\u{1F9C0}","\u{1F355}","\u{1F36C}","\u{1F36D}","\u{1F369}","\u{1F37A}","\u{1F37B}","\u{1F378}","\u{1F37E}","\u2615\uFE0F","\u{1F4A9}","\u{1F47B}","\u{1F916}","\u{1F4A4}","\u{1F440}","\u{1F483}","\u{1F483}\u{1F3FB}","\u{1F483}\u{1F3FC}","\u{1F483}\u{1F3FD}","\u{1F483}\u{1F3FE}","\u{1F483}\u{1F3FF}","\u{1F454}","\u{1F457}","\u{1F459}","\u{1F458}","\u{1F460}","\u{1F452}","\u{1F3A9}","\u{1F431}","\u{1F43B}","\u{1F436}","\u{1F43C}","\u{1F42F}","\u{1F981}","\u{1F42E}","\u{1F437}","\u{1F419}","\u{1F435}","\u{1F412}","\u{1F414}","\u{1F426}","\u{1F434}","\u{1F984}","\u{1F41D}","\u{1F422}","\u{1F420}","\u{1F410}","\u{1F54A}","\u{1F415}","\u{1F408}","\u{1F409}","\u{1F432}","\u{1F384}","\u{1F340}","\u{1F33B}","\u{1F339}","\u{1F490}","\u{1F344}","\u2600\uFE0F","\u{1F327}","\u26BD\uFE0F","\u{1F3C0}","\u{1F3C8}","\u26BE\uFE0F","\u{1F3BE}","\u{1F3D2}","\u26F7","\u{1F3C4}","\u{1F3CA}","\u{1F6B4}","\u{1F3AD}","\u{1F3A8}","\u{1F3B7}","\u{1F3BA}","\u{1F3B8}","\u{1F3BB}","\u{1F3B0}","\u{1F3B3}","\u{1F697}","\u{1F695}","\u{1F68C}","\u{1F68E}","\u{1F691}","\u{1F692}","\u{1F69C}","\u{1F682}","\u2708\uFE0F","\u26F5\uFE0F","\u{1F6F0}","\u{1F301}","\u{1F30B}","\u{1F3DE}","\u{1F305}","\u{1F386}","\u{1F308}","\u{1F3E0}","\u{1F3E5}","\u{1F3EB}","\u231A\uFE0F","\u{1F4F1}","\u{1F5A5}","\u{1F4BE}","\u{1F4FC}","\u{1F3A5}","\u260E\uFE0F","\u{1F4FA}","\u{1F4FB}","\u{1F4E1}","\u{1F56F}","\u{1F4B0}","\u{1F48E}","\u{1F6AC}","\u26B0","\u{1F52E}","\u{1F488}","\u{1F6BD}","\u{1F511}","\u{1F6CF}","\u{1F389}","\u{1F38A}","\u2764\uFE0F","\u{1F921}","\u{1F600}","\u{1F62C}","\u{1F601}","\u{1F602}","\u{1F603}","\u{1F604}","\u{1F605}","\u{1F606}","\u{1F607}","\u{1F609}","\u{1F60A}","\u{1F642}","\u{1F643}","\u263A\uFE0F","\u{1F60B}","\u{1F60C}","\u{1F60D}","\u{1F618}","\u{1F617}","\u{1F619}","\u{1F61A}","\u{1F61C}","\u{1F61D}","\u{1F61B}","\u{1F911}","\u{1F913}","\u{1F60E}","\u{1F917}","\u{1F60F}","\u{1F636}","\u{1F610}","\u{1F611}","\u{1F612}","\u{1F644}","\u{1F914}","\u{1F633}","\u{1F61F}","\u{1F620}","\u{1F614}","\u{1F615}","\u{1F641}","\u2639\uFE0F","\u{1F623}","\u{1F62B}","\u{1F629}","\u{1F631}","\u{1F628}","\u{1F630}","\u{1F62F}","\u{1F626}","\u{1F622}","\u{1F62A}","\u{1F613}","\u{1F62D}","\u{1F635}","\u{1F632}","\u{1F910}","\u{1F637}","\u{1F912}","\u{1F915}","\u{1F634}","\u{1F480}","\u2620\uFE0F","\u{1F47D}","\u{1F63A}","\u{1F638}","\u{1F639}","\u{1F63B}","\u{1F63C}","\u{1F63D}","\u{1F640}","\u{1F63F}","\u{1F63E}","\u{1F444}","\u{1F48B}","\u{1F445}","\u{1F5E3}","\u{1F464}","\u{1F465}","\u{1F456}","\u{1F463}","\u{1F461}","\u{1F462}","\u{1F45E}","\u{1F45F}","\u{1F393}","\u{1F451}","\u{1F45C}","\u{1F45B}","\u{1F4BC}","\u{1F453}","\u{1F576}","\u{1F48D}","\u{1F302}","\u2744\uFE0F","\u{1F32A}","\u26A1\uFE0F","\u{1F951}","\u{1F98B}","\u{1F648}","\u{1F649}","\u{1F64A}","\u{1F427}","\u{1F577}","\u{1F982}","\u{1F980}","\u{1F40D}","\u{1F41B}","\u{1F40C}","\u{1F41E}","\u{1F41C}","\u{1F41F}","\u{1F421}","\u{1F42C}","\u{1F433}","\u{1F40B}","\u{1F40A}","\u{1F406}","\u{1F332}","\u{1F333}","\u{1F334}","\u{1F331}","\u{1F33F}","\u{1F343}","\u{1F342}","\u{1F341}","\u{1F33A}","\u{1F33C}","\u{1F338}","\u{1F330}","\u{1F383}","\u{1F41A}","\u{1F578}","\u{1F30E}","\u{1F30D}","\u{1F30F}","\u{1F315}","\u{1F316}","\u{1F317}","\u{1F318}","\u{1F311}","\u{1F312}","\u{1F313}","\u{1F314}","\u{1F31A}","\u{1F31D}","\u{1F31B}","\u{1F31C}","\u{1F31E}","\u{1F319}","\u2B50\uFE0F","\u{1F31F}","\u{1F4AB}","\u2728","\u2604\uFE0F","\u{1F354}","\u{1F373}","\u{1F35F}","\u{1F32D}","\u{1F35D}","\u{1F32E}","\u{1F32F}","\u{1F363}","\u{1F368}","\u{1F366}","\u{1F377}","\u{1F379}","\u{1F3C6}","\u{1F3AA}","\u{1F3B9}","\u{1F680}","\u26F2\uFE0F","\u{1F3A2}","\u26F0","\u{1F3D4}","\u{1F5FB}","\u{1F4AF}","\u{1F3B5}","\u{1F3B6}","\u{1F4AC}","\u{1F4AD}","\u{1F5EF}","\u{1F0CF}","\u{1F3F3}\uFE0F\u200D\u{1F308}","\u{1F953}","\u{1F943}","\u{1F3A4}","\u{1F6A8}","\u{1F3CD}","\u{1F3D5}","\u26FA\uFE0F","\u{1F3DC}","\u{1F3D6}","\u{1F3DD}","\u{1F307}","\u{1F306}","\u{1F3D9}","\u{1F303}","\u{1F3D8}","\u{1F3E1}","\u{1F3E2}","\u{1F528}","\u2699","\u{1F52B}","\u{1F4A3}","\u{1F52A}","\u{1F48A}","\u{1F573}","\u{1F489}","\u{1F6C1}","\u26F1","\u{1F381}","\u{1F388}","\u{1F380}","\u{1F4C5}","\u{1F5F3}","\u{1F4DA}","\u270F\uFE0F","\u26AA\uFE0F","\u26AB\uFE0F","\u2B1B\uFE0F","\u2B1C\uFE0F","\u{1F5BC}","\u{1F3DA}","\u{1F3ED}","\u{1F532}","\u{1F533}","\u{1F3B1}","\u{1F53A}","\u{1F53B}","\u{1F4A6}","\u26F3\uFE0F","\u{1F3DF}","\u{1F4A1}","\u{1F52D}","\u{1F52C}","\u{1F570}","\u{1F42A}","\u{1F42B}","\u{1F418}","\u{1F438}","\u{1F430}","\u{1F42D}","\u{1F6AA}","\u{1F6CD}","\u{1F441}","\u{1F353}","\u{1F352}","\u{1F336}","\u{1F33D}","\u{1F360}","\u{1F36F}","\u{1F35E}","\u{1F36B}","\u{1F37F}","\u{1F36A}","\u{1F34A}","\u{1F3F9}","\u{1F46F}","\u{1F46F}\u200D\u2642\uFE0F","\u{1F5D1}"]:i;var Y=[];t.loop(this.emojiData,function(B){var b=new t.Emoji(B,h,l);Y.push(b)}),this.wrapper=new t.Wrapper({items:Y,width:e,alignInner:t.CENTER,valignInner:t.CENTER,wrapperType:"column",colSize:v,rowSize:P}).cur(),this.backdrop=new t.Rectangle(this.wrapper.width,this.wrapper.height,t.faint),t.timeout(.2,function(){_.scrollBar&&_.scrollBar.vertical&&_.scrollBar.vertical.getBounds()&&_.scrollBar.vertical.expand(),_.backdrop.heightOnly=_.wrapper.height,T&&_.wrapper.cache()}),this.add(this.backdrop),this.add(this.wrapper),this.wrapper.tap(function(B){_.currentEmoji=B.target,_.dispatchEvent("change")}),x!==!1&&t.styleTransforms(this,S),this.clone=function(){return _.cloneProps(new t.EmojiPicker(e,r,x,this.group,k))},this.dispose=function(){return!0}},t.extend(t.EmojiPicker,t.Window,["clone","dispose"],"zimWindow",!1),t.TextEditor=function(e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,x,E,k,p,m,S,_,Y,B,b,X,V,O,Z,W,K,ne,F,D){var u="width, color, backgroundColor, fieldColor, fieldHeight, textSize, sizeList, optionList, colorList, fontList, live, button, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, wrap, limit, scroll, placeholder, password, borderColor, borderWidth, margin, corner, shadowColor, shadowBlur, draggable, boundary, frame, fontListHeight, fontListViewNum, style, group, inherit",f;if(f=lt(t.TextEditor,arguments,u,this))return f;Le("67.1"),this.group=F;var o=ne===!1?{}:t.getStyle("TextEditor",this.group,D);if(n(e)&&(e=o.width!=null?o.width:400),n(i)&&(i=o.backgroundColor!=null?o.backgroundColor:t.lighter),n(A)&&(A=o.titleBar!=null?o.titleBar:"Text Editor"),n(V)&&(V=o.draggable!=null?o.draggable:!0),n(P)&&(P=o.titleBarHeight!=null?o.titleBarHeight:30),n(l)&&(l=o.fieldColor!=null?o.fieldColor:i.darken(.05)),n(h)&&(h=o.live!=null?o.live:!0),n(x)&&(x=o.wrap!=null?o.wrap:!0),n(k)&&(k=o.scroll!=null?o.scroll:!0),n(Y)&&(Y=o.margin!=null?o.margin:10),n(E)&&(E=o.limit!=null?o.limit:null),n(A)&&(A=o.titleBar!=null?o.titleBar:null),n(c)&&(c=o.sizeList!=null?o.sizeList:null),n(C)&&(C=o.colorList!=null?o.colorList:null),n(d)&&(d=o.optionList!=null?o.optionList:null),n(T)&&(T=o.fontList!=null?o.fontList:null),n(l)&&(l=o.fieldColor!=null?o.fieldColor:null),n(a)&&(a=o.fieldHeight!=null?o.fieldHeight:null),n(s)&&(s=o.textSize!=null?o.textSize:null),n(W)&&(W=o.fontListHeight!=null?o.fontListHeight:100),n(K)&&(K=o.fontListViewNum!=null?o.fontListViewNum:3),typeof Z>"u")if(j.zdf)var Z=j.zdf;else{dt&&$e("zim.TextEditor - please provide a reference to zim Frame");return}this.zimPanel_constructor(e,300,null,A,y,v,P,i,S,_,B,!0,null,null,null,null,null,null,null,null,b,X,V,O,ne,F,D);var g=this;n(w)&&(w=new t.Button({width:50,height:50,label:"",icon:new t.Shape().sca(.4).f("white").p("AikFsQg5jmhphxIA1gXQBeBGA3CwQC8mRCpjOIBfAoQkPFGiSFpg"),color:t.white,corner:10,backgroundColor:t.green.darken(.2),borderColor:t.white,borderWidth:2,rollBackgroundColor:t.green,shadowBlur:3}).pos(Y,P+Y*2,t.RIGHT,t.TOP,g)),g.button=w,w.on((mt?t.ACTIONEVENT=="mousedown":j.ACTIONEVENT=="mousedown")?"mousedown":"click",q),n(a)&&(a=o.fieldHeight!=null?o.fieldHeight:w.height+Y*2);function q(){h||(R.text=I.text),g.hide(),g.dispatchEvent("set")}var I=g.textArea=new t.TextArea({color:r,backgroundColor:l,width:e-w.width-Y*3,height:n(a)?w.height+Y*2:a,expand:10,password:m,placeholder:p,frame:Z}).loc(Y,P+Y+(a&&a<w.height+Y*2?(w.height-a)/2+Y:0),null,null,!1);x||(I.tag.style.whiteSpace="nowrap"),E&&I.tag.setAttribute("maxLength",E),k&&(I.tag.style.overflowY="auto");var R=new t.Label;g.on("pressmove",function(){I.resize()}),g.on("close",function(){g.inputEvent&&I.off("input",g.inputEvent),I.removeFrom()}),g.panelHeight=P+Y+Math.max(a,w.height+Y*2)+Y;var le=t.mobile(),N=le?35:30;if(c||d||C){new t.Rectangle(e,N+Y,"rgba(0,0,0,.05)").loc(0,g.panelHeight,g);var L=[];if(C){var ee=Array.isArray(C),z=g.colorPicker=new t.ColorPicker({colors:ee?C:null,cols:ee?Math.min(C.length,12):null,alphaPicker:!1,greyPicker:!ee,container:Z.stage});z.on("close",Ee),z.on("change",function(){R.color=r.color=z.selectedColor,g.dispatchEvent("update"),Ee()}),g.closeColorPicker=function(){Ee()},r=g.swatch=new t.Rectangle(N,N,R.color,t.dark,1).cur(),r.on("mousedown",function(){g.dispatchEvent("color"),I.tag.style.display="none",z.selectedColor=r.color,z.show(),g.stage&&g.stage.update()}),L.push(r)}if(d){d===!0&&(d=["bold","italic","align"]),n(j.STYLE)&&(j.STYLE={}),n(j.STYLE.group)&&(j.STYLE.group={}),j.STYLE.group.zimEditor={width:N,height:N,corner:0,borderColor:t.tin,shadowBlur:-1,backgroundColor:t.light,rollBackgroundColor:t.light,toggleBackgroundColor:t.green,toggleColor:t.grey};var $,xe,ie;t.loop(d,function(ye){if(ye.toLowerCase()=="bold")$=g.bold=new t.Button({label:new t.Label({text:"B",color:t.grey,size:16,bold:!0}),toggle:"B",group:"zimEditor"}),$.on("click",function(){R.bold=$.toggled,g.dispatchEvent("update"),g.stage&&g.stage.update()}),L.push($),R.bold&&$.toggle();else if(ye.toLowerCase()=="italic")xe=g.italic=new t.Button({label:new t.Label({text:"I",color:t.grey,size:16,bold:!0,italic:!0}),toggle:"I",group:"zimEditor"}),xe.on("click",function(){R.italic=xe.toggled,g.dispatchEvent("update"),g.stage&&g.stage.update()}),L.push(xe),R.italic&&xe.toggle();else if(ye.toLowerCase()=="align"){var H=new t.Tile(new t.Rectangle(N-10,N-10,t.grey).centerReg(),3,1,10,10),re=le?["\u21DA","\u21D4","\u21DB"]:["\u21D0","\u21D4","\u21D2"];t.loop(3,function(te){var ge=H.getChildAt(te);new t.Label(re[te],N*2/3,null,t.white).center(ge).expand(10)});var pe=0;R.align=="right"?pe=2:(R.align=="center"||R.align=="middle")&&(pe=1),ie=g.align=new t.Selector({tile:H,corner:0,borderWidth:1,borderColor:t.grey,backgroundColor:t.clear,selectedIndex:pe}),ie.on("change",function(){ie.selectedIndex==0?R.align="left":ie.selectedIndex==1&&(R.align="center"),ie.selectedIndex==2&&(R.align="right"),g.dispatchEvent("update"),g.stage&&g.stage.update()}),L.push(ie)}}),delete j.STYLE.group.zimEditor}if(c){var ke=g.sizePicker=new t.Stepper({list:c===!0?null:c,stepperType:c===!0?null:"list",min:c===!0?5:null,max:c===!0?500:null,width:150,shadowBlur:-1,borderColor:t.dark,borderWidth:2,corner:0,backgroundColor:t.green,downForward:!1}).siz(null,N);ke.arrowPrev.expand(0),ke.textBox.color=t.lighter,ke.on("change",function(){R.size=ke.currentValue,g.dispatchEvent("update"),g.stage&&g.stage.update()}),ke.currentValue=R.size,L.push(ke)}var U=new t.Tile(L,L.length,1,10,10,!0).loc(Y,g.panelHeight+Y/2,g);g.panelHeight=g.panelHeight+Y+U.height+Y}function Ee(){I.tag.style.display="block",z.hide(),g.stage&&g.stage.update()}var Q;if(T){Array.isArray(T)?Q=T:(Q=["Arial","Courier New","Georgia","Helvetica","Palatino","Tahoma","Verdana"],le||(Q=Q.concat(["Comic Sans MS","Impact"])),Q.sort());var G=g.fonts=new t.List({width:e-Y*2,height:W,viewNum:K,backgroundColor:t.moon,color:t.grey,rollColor:t.dark,rollBackgroundColor:t.green.lighten(.5),selectedBackgroundColor:t.mist,selectedRollBackgroundColor:t.green.lighten(.6),selectedColor:t.dark,backdropColor:t.light,scrollBarColor:t.dark,shadowBlur:-1,list:Q}).center(g).loc(null,g.panelHeight);G.on("change",function(){R.font=G.currentValue,g.dispatchEvent("update"),g.stage&&g.stage.update()}),g.panelHeight=g.panelHeight+Y+G.height+Y}g.show=function(ye,H,re,pe){if(g.parent)return ye==g.label||(g.label=ye),g;R=ye,I.addTo(g);var te;if(R&&R.stage)te=R.stage;else if(pe)te=pe.stage;else if(j.zdf)te=j.zdf.stage;else return g;return!n(H)||!n(re)?g.loc(H,re):R&&R.y>te.height/2?g.loc(te.width/2-e/2,R.y-g.panelHeight-te.height*.05,te):R&&R.y<=te.height/2?g.loc(te.width/2-e/2,R.y+R.height+te.height*.05,te):g.center(te),g.y<20&&(g.y=20),g.y+g.height>g.stage.height&&(g.y=g.stage.height-g.height-20),ue(),g.stage.update(),g};function ue(){R&&(I.text=R.text),r&&(r.color=R.color),$&&$.toggle(R.bold==!0),xe&&xe.toggle(R.italic==!0),ie&&(ie.noAnimate=!0,R.align=="center"?ie.selectedIndex=1:R.align=="right"?ie.selectedIndex=2:ie.selectedIndex=0),ke&&(ke.currentValue=R.size),G&&(G.currentValue=R.font),g.inputEvent&&I.off("input",g.inputEvent),g.inputEvent=I.on("input",function(){h&&R&&(R.text=I.text),g.dispatchEvent("input"),g.dispatchEvent("update"),g.stage&&g.stage.update()})}g.hide=function(){if(C&&z.hide(),I&&I.removeFrom(),!n(g.stage)){var ye=g.stage;return g.removeFrom(),ye.update(),g}},j.KEYFOCUS!=null&&(t.KEYFOCUS=j.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return t.KEYFOCUS==g},set:function(){t.KEYFOCUS=g}}),t.KEYFOCUS||fe(),this.on("mousedown",function(){fe()});function fe(){g.keyFocus=!0}Object.defineProperty(g,"label",{get:function(){return R},set:function(ye){R=ye,ue()}}),ne!==!1&&t.styleTransforms(this,o),this.clone=function(){return g.cloneProps(new t.TextEditor(e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,x,E,k,p,m,S,_,Y,B,b,X,V,O,Z,W,K,ne,this.group,D))},this.dispose=function(ye,H,re){return g.inputEvent&&I.off("input",g.inputEvent),z&&z.dispose(),r&&r.dispose(),G&&G.dispose(),w&&w.dispose(),I&&I.dispose(),ie&&ie.dispose(),$&&$.dispose(),xe&&xe.dispose(),ke&&ke.dispose(),re||this.zimPanel_dispose(),g.stage&&g.stage.update(),g.textArea=g.color=g.colorPicker=g.font=g.button=g.selector=g.bold=g.italic=g.size=null,!0}},t.extend(t.TextEditor,t.Panel,["clone","dispose"],"zimPanel",!1),t.Keyboard=function(e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,x,E,k,p,m,S,_,Y,B,b,X,V,O,Z,W,K,ne){var F="labels, backgroundColor, color, shiftBackgroundColor, shiftHoldBackgroundColor, placeBackgroundColor, placeColor, cursorColor, shadeAlpha, borderColor, borderWidth, margin, corner, draggable, placeClose, shadowColor, shadowBlur, container, data, place, placeShiftH, placeShiftV, special, rtl, hardKeyboard, layout, numPadScale, numPadDraggable, numPadOnly, numPadAdvanced, style, group, inherit",D;if(D=lt(t.Keyboard,arguments,F,this))return D;Le("67.2"),this.zimContainer_constructor(1e3,400,null,null,!1),this.type="Keyboard",this.group=K;var u=W===!1?{}:t.getStyle(this.type,this.group,ne);n(e)&&(e=u.labels!=null?u.labels:[]),Array.isArray(e)||(e=[e]),n(r)&&(r=u.backgroundColor!=null?u.backgroundColor:t.dark),n(i)&&(i=u.color!=null?u.color:t.white),n(l)&&(l=u.shiftBackgroundColor!=null?u.shiftBackgroundColor:"orange"),n(a)&&(a=u.shiftHoldBackgroundColor!=null?u.shiftHoldBackgroundColor:"red"),n(s)&&(s=u.placeBackgroundColor!=null?u.placeBackgroundColor:t.blue),n(c)&&(c=u.placeColor!=null?u.placeColor:i),n(d)&&(d=u.cursorColor!=null?u.cursorColor:t.blue),n(C)&&(C=u.shadeAlpha!=null?u.shadeAlpha:.2),n(T)&&(T=u.borderColor!=null?u.borderColor:"rgba(0,0,0,.1)"),n(h)&&(h=u.borderWidth!=null?u.borderWidth:null),T<0||h<0?T=h=null:T!=null&&h==null&&(h=1),n(w)&&(w=u.margin!=null?u.margin:5),n(A)&&(A=u.corner!=null?u.corner:30),n(y)&&(y=u.draggable!=null?u.draggable:!1),n(v)&&(v=u.placeClose!=null?u.placeClose:!0),n(P)&&(P=u.shadowColor!=null?u.shadowColor:"rgba(0,0,0,.2)"),n(x)&&(x=u.shadowBlur!=null?u.shadowBlur:14),n(k)&&(k=u.data!=null?u.data:[[["q","w","e","r","t","y","u","i","o","p"],["a","s","d","f","g","h","j","k","l"],["shift","z","x","c","v","b","n","m","backspace"],["?123","@"]],[["1","2","3","4","5","6","7","8","9","0"],["!","@","#","$","/","^","&","*","(",")"],["1/2","-","'",'"',":",";",",","?","backspace"],["ABC","@"]],[["+","x","%","=","<",">","{","}","[","]"],["\u20AC","\xA3","\xA5","$","\uFFE6","~","`","\xA4","\u2661","\u2606"],["2/2","_","\\","|","\u300A","\u300B","\xA1","\xBF","backspace"],["ABC","@"]]]),k[3]||(k[3]={e:["\u0117","\u0113","\u0119","\xEA","\xE9","\xEB","\xE8"],u:["\u016B","\xFB","\xFA","\xFC","\xF9"],i:["\u012B","\u012F","\xEC","\xED","\xEF","\xEE"],o:["\u014D","\u0153","\xF8","\xF5","\xF4","\xF3","\xF6","\xF2"],a:["\u0101","\xE3","\xE5","\xE2","\xE1","\xE4","\xE0","\xE6"],n:["\xF1","\u0144"]});var f=this;n(p)&&(p=u.place!=null?u.place:!0),n(m)&&(m=u.placeShiftH!=null?u.placeShiftH:0),n(S)&&(S=u.placeShiftV!=null?u.placeShiftV:0),n(Y)&&(Y=u.rtl!=null?u.rtl:!1),n(B)&&(B=u.hardKeyboard!=null?u.hardKeyboard:!0),n(X)&&(X=u.numPadScale!=null?u.numPadScale:.8),n(O)&&(O=u.numPadOnly!=null?u.numPadOnly:!1),n(V)&&(V=u.numPadDraggable!=null?u.numPadDraggable:!0),n(Z)&&(Z=u.numPadAdvanced!=null?u.numPadAdvanced:!1),n(b)&&(b=u.layout!=null?u.layout:"qwerty"),b=b.toLowerCase(),b!="qwerty"&&(b=="arabic"?k=[[["\u0636","\u0635","\u062B","\u0642","\u0641","\u063A","\u0639","\u0647","\u062E","\u062D","\u062C"],["\u0634","\u0633","\u064A","\u0628","\u0644","\u0627","\u062A","\u0646","\u0645","\u0643","\u0637"],["\u0630","\u0621","\u0624","\u0631","\u0649","\u0629","\u0648","\u0632","\u0638","\u062F","back"],["?123","\u0640"]],[["1","2","3","4","5","6","7","8","9","0","*"],["!","@","#","$","/","^","&","*","(",")","*"],["1/2","-","'",'"',":",";",",","?","*","backspace"],["ABC","*"]],[["+","x","%","=","<",">","{","}","[","]","*"],["\u20AC","\xA3","\xA5","$","\uFFE6","~","`","\xA4","\u2661","\u2606","*"],["2/2","_","\\","|","\u300A","\u300B","\xA1","\xBF","*","backspace"],["ABC","*"]],{\u0627:["\u0623","\u0625","\u0622","\u0621"],\u0649:["\u0626"],\u0621:["\u0626","\u0624"],\u0648:["\u0624"],\u0640:["\u064D","\u064B","\u064C","\u0652","\u064F","\u0650","\u064E","\u0651"],"*":["\u064D","\u064B","\u064C","\u0652","\u064F","\u0650","\u064E","\u0651"],n:["\xF1","\u0144"]}]:b=="hebrew"?k=[[["\u05E7","\u05E8","\u05D0","\u05D8","\u05D5","\u05DF","\u05DD","\u05E4","backspace"],["\u05E9","\u05D3","\u05D2","\u05DB","\u05E2","\u05D9","\u05D7","\u05DC","\u05DA","\u05E3"],["\u05D6","\u05E1","\u05D1","\u05E0","\u05D4","\u05DE","\u05E6","\u05EA","\u05E5"],["?123","@"]],[["1","2","3","4","5","6","7","8","9","0"],["!","@","#","$","/","^","&","*","(",")"],["1/2","-","'",'"',":",";",",","?","backspace"],["ABC","@"]],[["+","x","%","=","<",">","{","}","[","]"],["\u20AC","\xA3","\xA5","$","\uFFE6","~","`","\xA4","\u2661","\u2606"],["2/2","_","\\","|","\u300A","\u300B","\xA1","\xBF","backspace"],["ABC","@"]],{e:["\u0117","\u0113","\u0119","\xEA","\xE9","\xEB","\xE8"],u:["\u016B","\xFB","\xFA","\xFC","\xF9"],i:["\u012B","\u012F","\xEC","\xED","\xEF","\xEE"],o:["\u014D","\u0153","\xF8","\xF5","\xF4","\xF3","\xF6","\xF2"],a:["\u0101","\xE3","\xE5","\xE2","\xE1","\xE4","\xE0","\xE6"],n:["\xF1","\u0144"]}]:b=="azerty"?k=[[["a","z","e","r","t","y","u","i","o","p"],["q","s","d","f","g","h","j","k","l","m"],["shift","w","x","c","v","b","n","\xB4","backspace"],["?123","@"]],[["1","2","3","4","5","6","7","8","9","0"],["!","@","#","$","/","^","&","*","(",")"],["1/2","-","'",'"',":",";",",","?","backspace"],["ABC","@"]],[["+","x","%","=","<",">","{","}","[","]"],["\u20AC","\xA3","\xA5","$","\uFFE6","~","`","\xA4","\u2661","\u2606"],["2/2","_","\\","|","\u300A","\u300B","\xA1","\xBF","backspace"],["ABC","@"]],{e:["\u0117","\u0113","\u0119","\xEA","\xE9","\xEB","\xE8"],u:["\u016B","\xFB","\xFA","\xFC","\xF9"],i:["\u012B","\u012F","\xEC","\xED","\xEF","\xEE"],o:["\u014D","\u0153","\xF8","\xF5","\xF4","\xF3","\xF6","\xF2"],a:["\u0101","\xE3","\xE5","\xE2","\xE1","\xE4","\xE0","\xE6"],n:["\xF1","\u0144"]}]:b=="turkish"&&(k=[[["q","w","e","r","t","y","u","\u0131","o","p","\u011F","\xFC"],["a","s","d","f","g","h","j","k","l","\u015F","i"],["shift","z","x","c","v","b","n","m","\xF6","\xE7","backspace"],["?123","*"]],[["1","2","3","4","5","6","7","8","9","0","*"],["!","@","#","$","/","^","&","*","(",")","*"],["1/2","-","'",'"',":",";",",","?","*","backspace"],["ABC","*"]],[["+","x","%","=","<",">","{","}","[","]","*"],["\u20AC","\xA3","\xA5","$","\uFFE6","~","`","\xA4","\u2661","\u2606","*"],["2/2","_","\\","|","\u300A","\u300B","\xA1","\xBF","*","backspace"],["ABC","*"]],{e:["\u0117","\u0113","\u0119","\xEA","\xE9","\xEB","\xE8"],u:["\u016B","\xFB","\xFA","\xFC","\xF9"],i:["\u012B","\u012F","\xEC","\xED","\xEF","\xEE"],o:["\u014D","\u0153","\xF8","\xF5","\xF4","\xF3","\xF6","\xF2"],a:["\u0101","\xE3","\xE5","\xE2","\xE1","\xE4","\xE0","\xE6"],n:["\xF1","\u0144"]},{\u0131:"I",i:"\u0130"},{I:"\u0131",\u0130:"i"}])),f.data=k;var o="zim display - Keyboard(): Please pass in a reference to a container with bounds set";if(n(E))if(j.zdf)E=j.zdf.stage;else{$e(o);return}else if(E.getBounds){if(n(E.stage)){$e("zim display - Keyboard(): The container must have a stage property");return}}else{$e(o);return}P!=-1&&x>0&&(f.shadow=new Ne.Shadow(P,3,3,x));var g=j.zdf?j.zdf.stage:null;f.labels=e;var q,I=10;t.loop(k[0],function(we){we.length>I&&(I=we.length)});var R=I,le=["/","",",",".","numpad","away"];n(_)||le.splice(1,0,_);var N=t.copy(k[0]);N[3]=N[3].concat(le);var L=t.copy(k[1]);L[3]=L[3].concat(le);var ee=t.copy(k[2]);ee[3]=ee[3].concat(le);var z=[],$=(1e3-(R-1)*5)/R,xe={def:"default",shift:"shift",number1:"number1",number2:"number2"},ie=xe.def,ke,U,Ee,Q=!1,G,ue,fe=0,ye,H=[],re,pe,te,ge,Ae,ae,de,se;Be(),J(ie),y&&Ye(),this.on("mousedown",Ie);function Ie(we){g=f.stage,U&&f.removeChild(U),ye&&H.indexOf(we.target)<0&&ce(),n(we.target.na)||(y&&we.target===de?(f.tickerMouseEvent=g.on("stagemousemove",function(Me){f.mouseYAmount=Me.stageY}),t.Ticker.add(at),f.on("pressup",me),se=we.stageY-f.localToGlobal(0,0).y):!n(_)&&we.target.na===_?f.dispatchEvent("special"):we.target.na==="shift"?ve():we.target.toggle==="?123"?(f.removeChild(ke),J(xe.number1)):we.target.toggle==="ABC"?(f.removeChild(ke),ie=xe.def,J(),Q&&ve(!0)):we.target.toggle==="1/2"?(f.removeChild(ke),J(xe.number2)):we.target.toggle==="2/2"?(f.removeChild(ke),J(xe.number1)):we.target.na==="numpad"?Ke(we.target):we.target.na==="away"?(f.hideKeyboard(),f.dispatchEvent("close")):k[3]&&k[3][we.target.na]?Se(we.target.na):we.target.na==="return"?oe(`
`):we.target.na==="backspace"||we.target.na==="back"?Ve():we.target.na===""?oe(" "):oe(we.target.na),g.update())}f.addChar=function(we){!n(we)&&we.match(/^.$/)&&oe(we)},f.removeChar=function(){Ve(!0)},f.clearText=function(){ue.text="",Ve(!0),je(),f.selectedIndex=0},f.setText=function(we){ue.text=we,je(),f.selectedIndex=we.length};var Te;function ve(we){var Me=!1,He,Xe;if(ie===xe.def){for(G.color=we?a:l,He=0;He<z.length-6-(n(_)?0:1);He++)Xe=z[He],Xe.label.text.length>0&&(Xe.na.length===1?(k[4]&&k[4][Xe.label.text]?Xe.label.text=k[4][Xe.label.text]:Xe.label.text=Xe.label.text.toUpperCase(),Xe.label.centerReg(Xe).mov(0,6)):Xe.label.centerReg(Xe));we||(Me=!0,setTimeout(nt,500),Te=f.on("pressup",Ce)),ie=xe.shift}else{for(G.color=r,Q=!1,He=0;He<z.length-6;He++)Xe=z[He],Xe.label.text.length>0&&(Xe.na.length===1?(k[5]&&k[5][Xe.label.text]?Xe.label.text=k[5][Xe.label.text]:Xe.label.text=Xe.label.text.toLowerCase(),Xe.label.centerReg(Xe).mov(0,3)):Xe.label.centerReg(Xe));ie=xe.def}ke.updateCache(),f.stage&&f.stage.update();function nt(){Me&&(Q=!0,G.color=a,ke.updateCache(),f.stage&&f.stage.update())}function Ce(){f.off("pressup",Te),Me=!1}}function J(we){var Me,He,Xe,nt=0,Ce=0,Fe,it,Qe=!1,tt,ot,gt=!1;n(we)&&(we=xe.def),we===xe.def?Me=N:we===xe.number1?Me=L:we===xe.number2&&(Me=ee),f.keys=ke=new t.Container(1e3,430,null,null,!1).addTo(f).vis(!O);for(var ze=0;ze<Me.length;ze++){(ze<=1||we==xe.def&&ze==2&&Me[2][0]!="shift")&&(nt=($/2+2.5)*(R-Me[ze].length));for(var Mt=0;Mt<Me[ze].length;Mt++){if(Qe=!1,tt=null,gt=!1,Me[ze][Mt]=="backspace"?(it=!0,tt=pe,gt=!0):Me[ze][Mt]=="back"?(it=!1,tt=pe,gt=!0):Me[ze][Mt]=="shift"?(it=!0,tt=re):(ze==3||we!=xe.def&&ze==2)&&Mt==0?(it=!0,gt=!0):Me[ze][Mt]==""?(it=!1,Qe=!0):Me[ze][Mt]=="numpad"?(tt=ge,it=!1,gt=!0):Me[ze][Mt]=="away"?(tt=te,it=!0,gt=!0):it=!1,it?Fe=$*1.5+2.5:Qe?(Fe=($+5)*((n(_)?3:2)+R-10+1-k[0][3].length)-5,k[0][3].indexOf("backspace")!=-1&&(Fe-=$/2)):Fe=$,Xe=new t.Rectangle(Fe,$,r,T,h,A,null,null,null,!1).cur().addTo(ke),gt&&Xe.addChild(new t.Rectangle(Fe,$,"black",null,null,A,null,null,null,!1).alp(C)),tt?Xe.label=He=new t.Label({text:"",backgroundColor:"ignore",font:u.font!=null?u.font:null,style:!1}):Xe.label=He=new t.Label({lineWidth:10,lineHeight:25,font:u.font!=null?u.font:null,text:Me[ze][Mt],color:i,align:"center",style:!1}),tt){var ut=tt.clone(),xt;Me[ze][Mt]=="numpad"?(xt=60,ae=Xe):xt=70,ut.scaleTo(Xe,xt,xt),ut.centerReg(Xe)}ot?(ot=!1,nt+=67.33):(He.centerReg(Xe).mov(0,isNaN(He.text)?3:7),Xe.x=nt,Xe.y=Ce,Xe.na=Me[ze][Mt],ze==2&&Mt==0&&we==xe.number1&&(Xe.toggle="1/2"),ze==2&&Mt==0&&we==xe.number2&&(Xe.toggle="2/2"),ze==3&&Mt==0&&we==xe.def&&(Xe.toggle="?123"),ze==3&&Mt==0&&we!=xe.def&&(Xe.toggle="ABC"),Xe.toggle&&He.mov(0,3),z.push(Xe),Xe.na=="shift"&&(G=Xe),nt=Xe.x+Xe.width+5)}Ce+=$+5,nt=0}ke.cache(h?-h:0,h?-h:0,h?ke.width+h*2:ke.width,h?ke.height+h*2:ke.height)}function Se(we){var Me=k[3][we],He=!1,Xe=!1,nt;nt=t.timeout(500,it,null,"ms");var Ce=f.on("pressup",Fe);function Fe(){He=!0,f.off("pressup",Ce),Xe||oe(we)}function it(){var Qe,tt,ot,gt=0,ze;if(nt.clear(),!He){Xe=!0,U=new t.Container(1e3,$,null,null,!1).addTo(f,0),U.y=-$-5;for(var Mt=0;Mt<Me.length;Mt++)ie===xe.shift?ze=Me[Mt].toUpperCase():ze=Me[Mt],Qe=new t.Label({lineWidth:10,lineHeight:25,text:ze,font:u.font!=null?u.font:null,color:i,align:"center",style:!1}),tt=new t.Rectangle($,$,r,T,h,A,null,null,null,!1).addTo(U),ot=new t.Rectangle($,$,"white",null,null,A,null,null,null,!1).alp(.2),tt.addChild(ot),Qe.center(tt),tt.na=Me[Mt],tt.x=gt,gt+=$+5;f.stage&&f.stage.update()}}}function Be(){re=new t.Shape({style:!1}),re.graphics.f(i).p("AhIFoIAAjYIixAAID5n3ID6H3IixAAIAADYgAjHBxICeAAIAADYIBTAAIAAjYICeAAIjImSg"),re.setBounds(-51/2,-72/2,51,72),pe=new t.Container({style:!1});var we=new t.Shape({style:!1});we.graphics.f(i).p("ACgC+IigigIifCgQgGAGgJAAQgJAAgGgGQgGgGgBgJQABgJAGgGICgigIigifQgGgGgBgJQABgJAGgGQAGgGAJAAQAIAAAHAGICfCgICgigQAGgGAJAAQAJAAAGAGQAGAGABAJQgBAJgGAGIigCfICgCgQAGAGABAJQgBAJgGAGQgGAGgJAAQgJAAgGgGg"),we.setTransform(82.6,32),we.addTo(pe);var Me=new t.Shape({style:!1});Me.graphics.f(i).s().p("AkhFAQgcAAgUgUIkHj6QgVgUAAgeQAAgdAVgVIEHj6QAUgTAcAAINKAAQAdAAAUAUQAUAUAAAdIAAH1QAAAdgUATQgUAVgdAAgAk0kOIkGD8QgIAHAAALQAAALAIAIIEGD7QAIAHALAAINKAAQALAAAIgIQAHgHAAgLIAAn1QAAgLgHgIQgIgIgLAAItKAAQgLAAgIAHg"),Me.setTransform(62.2,32),Me.addTo(pe),pe.setBounds(0,0,125,64),te=new t.Container({style:!1}),te.setBounds(0,0,147,86);for(var He=[{p:"Ai+heIF9AAIi/C9g",transform:[73.4,76]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[128.4,43.2]},{p:"AnNAzIAAhlIObAAIAABlg",transform:[73,43.2]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[18.8,43.2]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[128.2,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[114.5,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[100.8,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[87.1,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[73.4,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[59.7,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[46,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[32.3,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[18.6,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[128,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[114.3,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[100.6,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[86.9,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[73.2,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[59.5,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[45.8,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[32.1,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[18.4,15.8]},{p:"AphEnQgzAAgkgkQglglAAgzIAAlVQAAgzAlglQAkgkAzAAITDAAQAzAAAkAkQAlAlAAAzIAAFVQAAAzglAlQgkAkgzAAgAqjjtQgcAcAAAnIAAFVQAAAnAcAbQAbAcAnAAITDAAQAnAAAcgcQAbgbAAgnIAAlVQAAgngbgcQgcgcgnAAIzDAAQgnAAgbAcg",transform:[73.4,29.5]}],Xe,nt=0;nt<He.length;nt++)Xe=new t.Shape({style:!1}),Xe.graphics.f(i).s().p(He[nt].p),Xe.setTransform(He[nt].transform[0],He[nt].transform[1]),Xe.addTo(te);ge=new t.Container({style:!1}),ge.setBounds(0,0,62,86),Ae=new t.Container({style:!1}),Ae.setBounds(0,0,62,86);for(var Ce=[{p:"Ai+heIF9AAIi/C9g",transform:[33,76,1,1,180]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[46,43.2]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[32.3,43.2]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[18.8,43.2]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[46,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[32.3,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[18.6,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[45.8,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[32.1,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[18.4,15.8]}],nt=0;nt<Ce.length;nt++){var Fe=new t.Shape({style:!1});Fe.graphics.f(i).s().p(Ce[nt].p),Fe.setTransform(Ce[nt].transform[0],Ce[nt].transform[1],Ce[nt].transform[2],Ce[nt].transform[3],Ce[nt].transform[4]),Fe.addTo(ge);var it=new t.Shape({style:!1});it.graphics.f(i).s().p(Ce[nt].p),it.setTransform(Ce[nt].transform[0],Ce[nt].transform[1]),it.addTo(Ae)}Fe.graphics.ef().s(white).ss(3).rr(-16,-14,60,55,10),it.graphics.ef().s(white).ss(3).rr(-16,-14,60,55,10)}function Ye(){de=new t.Rectangle($*1.5+2.5+2.5,$,r,T,h,A,null,null,null,!1).addTo(f,0).cur();for(var we,Me=0;Me<4;Me++)we=new t.Rectangle(de.width*.4,4,i,null,null,null,null,null,null,!1).centerReg(de).alp(.2),we.y-=-22+Me*15;de.x=8.5*$+40,de.y=-$-5,de.na="drag"}function Ke(we){f.numPad||(f.numPad=new t.NumPad({advanced:Z,draggable:V}).sca(X),V||O?f.numPad.center({add:!1}):f.numPad.pos({x:0,y:8,horizontal:"center",vertical:"bottom",add:!1}),f.numPad.on("pressed",function(){f.numPad.key=="enter"?f.dispatchEvent("enter"):f.numPad.key=="backspace"?f.removeChar():f.numPad.key=="clear"?f.clearText():f.numPad.key=="space"?oe(" "):oe(f.numPad.key)}),f.numPad.on("close",function(){ae.removeChildAt(2),ge.clone().scaleTo(ae,60,60).centerReg(ae,2),ke.updateCache(),(!f.keys.parent||!f.keys.visible)&&Ee&&(Ee.visible=!1,f.toggled=!1,ce())})),ae.removeChildAt(2),f.numPad.parent||we===!1?(f.numPad.removeFrom(),ge.clone().scaleTo(ae,60,60).centerReg(ae,2)):(!f.numPad.parent||we===!0)&&(f.numPad.addTo(),Ae.clone().scaleTo(ae,60,60).centerReg(ae,2)),ke.updateCache(),f.stage&&f.stage.update()}function at(){f.mouseYAmount&&(f.y=f.parent.globalToLocal(0,f.mouseYAmount-se).y)}function me(){g.off("pressmousemove",f.tickerMouseEvent),t.Ticker.remove(at)}f.setBounds(1e3,400-(R-10)*26);function Ge(){if(!(!ue||!Ee)){for(var we=ue.label.x+ue.label.getBounds().x,Me=0;Me<fe;Me++)we+=ue.widthArray[Me]?ue.widthArray[Me]:0;Ee.heightOnly=ue.getBounds().height*(ue.backing&&n(ue.padding)?.9:1)-(ue.paddingV&&ue.background?ue.paddingV*2:0),Ee.center(ue),Ee.x=we}}function Je(){if(ye||!ue)return f;var we=v?["<",">","x"]:["<",">"],Me,He,Xe;H=[],Xe=ue.localToLocal(0,0,f),ye=f.place=new t.Container({style:!1}).addTo(f).cur();for(var nt=0;nt<we.length;nt++)Me=new t.Rectangle($,$,s,T,h,A,null,null,null,!1),we[nt]=="x"&&new t.Rectangle($,$,"black",null,null,A,null,null,null,!1).alp(C).addTo(Me),He=new t.Label({lineWidth:10,text:we[nt],backing:Me,font:u.font!=null?u.font:null,color:c,align:"center",valign:"center",style:!1}),He.pos(0,0,t.LEFT,t.TOP,ye).cache(),He.x=He.x+nt*($+5),H.push(He);Xe=ue.localToLocal(0,0,f),ye.x=Xe.x+m,ye.y=Xe.y+ue.height+15+S,ye.on("click",Ce);function Ce(Fe){H.indexOf(Fe.target)==0?fe>0&&fe--:H.indexOf(Fe.target)==1?fe<ue.text.length&&fe++:ce(),Ge()}f.stage&&f.stage.update()}function ce(){if(!ye)return f;ye.dispose(),ye=null}function oe(we){if(ue){var Me,He;if(we==="del")ue&&(ue.text=[ue.text.slice(0,fe-1),ue.text.slice(fe)].join("")),fe--,je();else{ie===xe.shift&&(we=we.toUpperCase());var Xe=ue.text;Me=ue.clone().removeFrom(),Me.text=we,He=Me.label.getMeasuredWidth(),ue.widthArray?ue.widthArray.splice(fe,0,He):ue.widthArray=[ue.breedte],fe<ue.text.length?ue.text=[ue.text.slice(0,fe),we,ue.text.slice(fe)].join(""):ue.text+=we,ue&&ue.label.getBounds().width<q?(fe++,Ge()):ue.text=Xe}ie===xe.shift&&!Q&&(f.removeChild(ke),J(),ie=xe.def),Ge();var nt=new Ne.Event("keydown");nt.letter=we,f.dispatchEvent(nt),f.stage&&f.stage.update()}}function _e(we){if(f.stage){var Me,He=0,Xe=!1;ue=we.target,ue.widthArrayCheck||je(),q=ue.label.lineWidth?ue.label.lineWidth:1e4,Me=ue.globalToLocal(we.stageX/t.scaX,we.stageY/t.scaY),Me.x-=ue.label.x,Me.y-=ue.label.y;for(var nt=0;nt<ue.widthArray.length;nt++)if(He+=ue.widthArray[nt],Me.x<He-ue.widthArray[nt]/2+ue.label.getBounds().x){fe=nt,Xe=!0;break}Xe||(fe=ue.text.length),Ge(),p&&!ye&&ue.text.length>0&&Je(),ye&&ue&&(ue.text.length>0?(Me=ue.localToLocal(0,0,f),ye.x=Me.x+m,ye.y=Me.y+ue.height+15+S):ce())}}function je(){if(ue){var we=new t.Label("");ue.widthArray=[];for(var Me=0;Me<ue.text.length;Me++)we=ue.clone().removeFrom(),we.text=ue.text[Me],ue.widthArray.push(we.label.getMeasuredWidth());we.text=ue.text,ue.widthArrayCheck=!0,Ge()}}function Ve(we){var Me=!0,He;function Xe(){(!ue||ue.text.length<1||f.currentIndex==0)&&(Me=!1),Me&&(nt(),He&&(He=t.timeout(200,Xe,null,"ms"))),ue&&ue.text.length<1&&Ce()}function nt(){ue&&ue.text.length>0?(f.selectedIndex>0&&oe("del"),we?Ce():f.on("pressup",Ce)):oe("del")}function Ce(){Me=!1,He&&He.clear(),f.off("pressup",Ce)}nt(),He=t.timeout(300,Xe,null,"ms"),f.stage&&f.stage.update()}function De(){for(var we=0;we<e.length;we++)e[we].clickEvent=e[we].on("click",_e)}De();function Oe(){if(e.length>1)for(var we=0;we<e.length;we++)e[we].off("click",e[we].clickEvent)}function Re(){if(!Ee&&(ue=e[0],q=ue&&ue.label.lineWidth?ue.label.lineWidth:1e4,ue)){Ee=new t.Rectangle(3,ue.height-(ue.paddingV&&ue.background?ue.paddingV*2:0),d,null,null,null,null,null,null,!1).center(ue),Ee.x=0,Ee.visible=!1,Ee.animate({obj:{alpha:0},rewind:!0,loop:!0,loopWait:750,time:250,id:"knipperTekst",timeUnit:"ms"});for(var we=0;we<e.length;we++)e[we].widthArray=[0];je()}}Re();function Ze(){t.stopAnimate("knipperTekst"),ue&&ue.removeChild(Ee),Ee=null,ue=null}Object.defineProperty(this,"selectedLabel",{get:function(){return ue},set:function(we){var Me={target:we};_e(Me),f.hidePlace()}}),Object.defineProperty(this,"selectedIndex",{get:function(){return fe},set:function(we){fe=we,Ge()}}),this.show=function(we,Me){if(f.addTo(E),!n(we)){var He={target:e[we]};_e(He)}return Ee&&(Ee.visible=!0),f.toggled=!0,O?Ke():(!O||Me)&&(f.keys.vis(!0),be.vis(!0)),f.numPad&&f.numPad.parent&&f.numPad.top(),f},this.hide=function(){return f.removeFrom(E),Ke(!1),Ee&&(Ee.visible=!1),g.update(),f.toggled=!1,f},this.showNumPad=function(){Ke(!0),f.toggled=!0,Ee&&(Ee.visible=!0)},this.hideNumPad=function(){Ke(!1),(!f.keys.parent||!f.keys.visible)&&Ee&&(Ee.visible=!1,f.toggled=!1,ce())},this.showKeyboard=function(){f.show(null,!0)},this.hideKeyboard=function(){!f.numPad||!f.numPad.parent?f.hide():(f.keys.vis(!1),be.vis(!1))},this.toggle=function(we){return we===!0?f.show():we===!1||f.parent?f.hide():f.show(),f},this.showPlace=function(){return Je(),f},this.hidePlace=function(){return ce(),f},this.addLabels=function(we){Array.isArray(we)||(we=[we]);for(var Me=we.length-1;Me>=0;Me--){var He=e.indexOf(we[Me]);He>=0||we[Me].type!="Label"?we.splice(Me,1):we[Me].widthArray=[0]}return Oe(),e=e.concat(we),De(),Re(),Ee&&(Ee.visible=!0),f},this.removeLabels=function(we){Array.isArray(we)||(we=[we]),Oe();for(var Me=0;Me<we.length;Me++){var He=e.indexOf(we[Me]);He>=0&&e.splice(He,1)}return De(),e.length==0?ue&&Ze():ue&&e.indexOf(ue)==-1&&(Ze(),Re()),f};var be=new t.Rectangle(this.width,this.height,t.clear,null,null,null,null,null,null,!1).addTo(this).expand().bot();be.on("mousedown",function(){}),be.on("click",function(){}),O&&be.vis(!1),this.resize=function(){if(f.scaleTo(g,100-w*2/g.width*100,50-w*2/g.height*100),f.y=g.height-f.height-w,f.x=g.width/2-f.width/2,ue&&ye){var we=ue.localToLocal(0,0,f);ye.x=we.x,ye.y=we.y+ue.height+15}return f.stage&&f.stage.update(),f},this.resize(),f.selectedLabel&&(f.selectedIndex=f.selectedLabel.text.length),B&&(this.keydownEvent=function(we){if(f.stage){var Me=f;n(Me)||(we.keyCode==35&&(Me.selectedIndex=Me.selectedLabel.text.length),we.keyCode==36&&(Me.selectedIndex=0),we.keyCode==37&&(Me.selectedIndex=Me.selectedIndex-1),we.keyCode==39&&(Me.selectedIndex=Me.selectedIndex+1),we.keyCode==46&&Me.selectedIndex<Me.selectedLabel.text.length&&(Me.selectedIndex=Me.selectedIndex+1,Me.removeChar()),we.keyCode==8&&(we.preventDefault(),Me.removeChar()),Me.addChar(we.key),f.stage&&f.stage.update())}},j.addEventListener("keydown",this.keydownEvent)),W!==!1&&t.styleTransforms(this,u),this.clone=function(){var we=new t.Keyboard(e,r,i,l,a,s,d,C,w,A,y,v,P,x,E,k,p,m,S,_,Y,B,b,X,V,O,Z,W,this.group,ne);return f.cloneProps(we)},this.dispose=function(we,Me,He){be.removeAllEventListeners(),be=null,f.keydownEvent&&j.removeEventListener("keydown",f.keydownEvent);for(var Xe=0;Xe<f.labels.length;Xe++)f.labels[Xe].removeAllEventListeners();return f.numPad&&f.numPad.dispose(),Ee&&Ee.dispose(),f.labels=ue=null,g&&g.off("pressmousemove",f.tickerMouseEvent),He||f.zimContainer_dispose(!0),!0}},t.extend(t.Keyboard,t.Container,["clone","dispose"],"zimContainer",!1),t.Organizer=function(e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,x,E,k,p,m,S,_,Y,B,b,X){var V="width, list, useAdd, useRemove, usePosition, autoAdd, autoRemove, autoPosition, addForward, removeForward, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, color, rollColor, selectedColor, selectedRollColor, spacing, corner, keyEnabled, gradient, gloss, backdropColor, style, group, inherit",O;if(O=lt(t.Organizer,arguments,V,this))return O;Le("67.3"),this.group=b;var Z=B===!1?{}:t.getStyle("Organizer",this.group,X);if(n(e)&&(e=Z.width!=null?Z.width:r&&r.vertical?r.width:300),n(i)&&(i=Z.useAdd!=null?Z.useAdd:!0),n(l)&&(l=Z.useRemove!=null?Z.useRemove:!0),n(a)&&(a=Z.usePosition!=null?Z.usePosition:!0),n(s)&&(s=Z.autoAdd!=null?Z.autoAdd:i),n(c)&&(c=Z.autoRemove!=null?Z.autoRemove:l),n(d)&&(d=Z.autoPosition!=null?Z.autoPosition:a),n(C)&&(C=Z.addForward!=null?Z.addForward:!0),n(T)&&(T=Z.removeForward!=null?Z.removeForward:!0),n(h)&&(h=Z.backgroundColor!=null?Z.backgroundColor:t.tin),n(w)&&(w=Z.rollBackgroundColor!=null?Z.rollBackgroundColor:t.grey),n(A)&&(A=Z.selectedBackgroundColor!=null?Z.selectedBackgroundColor:t.dark),n(v)&&(v=Z.color!=null?Z.color:t.white),n(P)&&(P=Z.rollColor!=null?Z.rollColor:v),n(x)&&(x=Z.selectedColor!=null?Z.selectedColor:v),n(E)&&(E=Z.selectedRollColor!=null?Z.selectedRollColor:v),n(k)&&(k=Z.spacing!=null?Z.spacing:1),n(p)&&(p=Z.corner!=null?Z.corner:0),n(S)&&(S=Z.gradient!=null?Z.gradient:.2),n(_)&&(_=Z.gloss!=null?Z.gloss:null),n(Y)&&(Y=Z.backdropColor!=null?Z.backdropColor:null),Array.isArray(p)||(p=[p,p,p,p]),!(!i&&!a&&!l)){var W=(i?1:0)+(a?4:0)+(l?1:0),K=(e+k)/W,ne={width:K,height:K,label:"",shadowColor:-1,gradient:S,corner:p,backgroundColor:h,rollBackgroundColor:w},F=[],D=new t.Shape;if(D.graphics.f(v).p("AAAA4Ih6B8Ig5g4IB8h8Ih7h6IA4g5IB6B8IB7h8IA5A5Ih8B6IB8B7Ig5A5g"),i&&F.push(new t.Button({icon:D.sca(.55).rot(-45).reg(1),inherit:ne})),a){var u=new t.Shape;u.graphics.f(v).p("AiJieIETCeIkTCfg"),F.push(new t.Button({icon:u.sca(.6).rot(r&&!r.vertical?180:-90).reg(-2),inherit:ne})),F.push(new t.Button({icon:u.clone().sca(.6).rot(r&&!r.vertical?0:90).reg(-2),inherit:ne}));var f=new t.Shape;f.graphics.f(v).p("AiFCLIAAkVIBXAAIAAEVgAgiAAICoiHIAAEQg"),F.push(new t.Button({icon:f.sca(.62).rot(r&&!r.vertical?0:90).reg(0),inherit:ne})),F.push(new t.Button({icon:f.clone().sca(.62).rot(r&&!r.vertical?180:-90).reg(0),inherit:ne}))}l&&F.push(new t.Button({icon:D.clone().rot(0).sca(.55),inherit:ne})),F.length==0&&(F=[""]),this.zimTabs_constructor(e,K,F,h,w,null,A,y,v,P,null,x,E,!1,k,!0,!1,p,null,!0,S,_,null,null,null,null,null,null,null,null,null,null,Y);var o=this;o.list=r,o.type="Organizer",o.setButtons=function(){if(a){var I=i?1:0;F[I+0]&&(F[I+0].icon.rotation=o.list&&!o.list.vertical?180:-90),F[I+1]&&(F[I+1].icon.rotation=o.list&&!o.list.vertical?0:90),F[I+2]&&(F[I+2].icon.rotation=o.list&&!o.list.vertical?0:90),F[I+3]&&(F[I+3].icon.rotation=o.list&&!o.list.vertical?180:-90)}};var g=!1,q=r;o.change(function(I){(!g&&o.list||o.list&&o.list!=q)&&(o.list!=q&&q&&q.noChange(),o.list.change(function(){o.orgItem=o.list.selected,o.orgIndex=o.list.selectedIndex}),g=!0,q=o.list);var R=I.target.selectedIndex;i||R++,!a&&(!i||R>0)&&(R=5);var le=n(o.list.selectedIndex)||o.list.selectedIndex<0;le&&(o.currentValue=null),o.lastIndex=o.list.selectedIndex;var N;switch(R){case 0:s&&(N=Math.max(0,o.list.selectedIndex),o.add(N)),o.orgType="add";break;case 1:if(le)break;d&&(N=o.list.selectedIndex,o.up(N)),o.orgType="up";break;case 2:if(le)break;d&&(N=o.list.selectedIndex,o.down(N)),o.orgType="down";break;case 3:if(le)break;d&&(N=o.list.selectedIndex,o.toTop(N)),o.orgType="top";break;case 4:if(le)break;d&&(N=o.list.selectedIndex,o.toBottom(N)),o.orgType="bottom";break;case 5:if(le)break;c&&(N=o.list.selectedIndex,o.remove(N)),o.orgType="remove";break}}),this.add=function(I,R,le){return n(I)&&(I=o.lastIndex),n(R)&&(R=""),C?I=Math.min(o.list.length,Math.max(0,o.list.selectedIndex)+1):I=Math.max(0,o.list.selectedIndex),o.list.addAt(R,I,le),o.list.selectedIndexPlusPosition=I,o.orgItem=o.list.selected,o.orgIndex=o.list.selectedIndex,o},this.up=function(I){n(I)&&(I=o.lastIndex);var R=o.list.items[I];return n(R)||(o.list.removeAt(1,I),o.list.addAt(R,I-1),o.list.selectedIndexPlusPosition=Math.max(0,I-1),o.orgItem=o.list.selected,o.orgIndex=o.list.selectedIndex),o},this.down=function(I){n(I)&&(I=o.lastIndex);var R=o.list.items[I];return n(R)||(o.list.removeAt(1,I),o.list.addAt(R,I+1),o.list.selectedIndexPlusPosition=Math.min(o.list.length-1,I+1),o.orgItem=o.list.selected,o.orgIndex=o.list.selectedIndex),o},this.toTop=function(I){n(I)&&(I=o.lastIndex);var R=o.list.items[I];return n(R)||(o.list.removeAt(1,I),o.list.addAt(R,0),o.list.first(),o.orgItem=o.list.selected,o.orgIndex=o.list.selectedIndex),o},this.toBottom=function(I){n(I)&&(I=o.lastIndex);var R=o.list.items[I];if(!n(R))return o.list.removeAt(1,I),o.list.addAt(R,o.list.length),o.list.last(),o.orgItem=o.list.selected,o.orgIndex=o.list.selectedIndex,o},this.remove=function(I){if(n(I))if(o.list.selectedIndex>=0)I=o.list.selectedIndex;else return o;var R=I==o.list.selectedIndex;return o.removedItem=o.list.items[I],o.list.removeAt(1,I),R?T||(I=Math.max(0,I-1)):I=o.list.selectedIndex,o.list.selectedIndexPlusPosition=Math.min(o.list.length-1,I),o.orgItem=o.list.selected,o.orgIndex=o.list.selectedIndex,o},B!==!1&&t.styleTransforms(this,Z),this.clone=function(){return o.cloneProps(new t.Organizer(e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,x,E,k,p,m,S,_,Y,B,o.group,X))},this.dispose=function(I,R,le){return F=null,le||o.zimTabs_dispose(!0),!0}}},t.extend(t.Organizer,t.Tabs,["clone","dispose"],"zimTabs",!1),t.Connectors=function(e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,x,E,k,p,m,S,_,Y,B,b,X,V,O,Z,W,K,ne,F,D,u,f){var o="width, height, points, node, line, linear, linearWrap, linearOrder, num, snapH, snapV, dropType, dropArray, continuous, startIndex, duplicateLine, deleteNode, dblclick, fullMove, min, max, boundary, expand, nodeRollColor, nodeRollBorderColor, nodeSelectedColor, nodeSelectedBorderColor, baseColor, baseBorderColor, baseRollover, rootLock, grandChildren, dblclickTime, steps, style, group, inherit",g;if(g=lt(t.Connectors,arguments,o,this))return g;Le("67.39"),this.group=u;var q=D===!1?{}:t.getStyle("Connectors",this.group,f);n(e)&&(e=q.width!=null?q.width:null),n(r)&&(r=q.height!=null?q.height:null),this.zimContainer_constructor(null,null,null,null,!1),this.type="Connectors",n(i)&&(i=q.points!=null?q.points:[[0,0],[100,0],[100,100],[0,100]]),n(l)&&(l=q.node!=null?q.node:new t.Circle(10,t.grey,t.grey)),l.removeFrom(),l.color==t.clear&&!l.hitArea&&l.expand(0),n(a)&&(a=q.line!=null?q.line:new t.Line({length:10,thickness:3,color:t.tin,strokeObj:{caps:"round"}})),n(C)&&(C=q.num!=null?q.num:10),n(s)&&(s=q.linear!=null?q.linear:!1),n(c)&&(c=q.linearWrap!=null?q.linearWrap:!0),n(Y)&&(Y=q.nodeRollColor!=null?q.nodeRollColor:l.color.match("rgb")?l.color:l.color.lighten(.2)),n(B)&&(B=q.nodeRollBorderColor!=null?q.nodeRollBorderColor:l.borderColor),n(b)&&(b=q.nodeSelectedColor!=null?q.nodeSelectedColor:t.white),n(X)&&(X=q.nodeSelectedBorderColor!=null?q.nodeSelectedBorderColor:l.borderColor),n(V)&&(V=q.baseColor!=null?q.baseColor:l.color),n(O)&&(O=q.baseBorderColor!=null?q.baseBorderColor:l.borderColor),n(Z)&&(Z=q.baseRollover!=null?q.baseRollover:!1),n(p)&&(p=q.min!=null?q.min:l.radius?l.radius*2:Math.min(l.width,l.height)),n(m)&&(m=q.max!=null?q.max:null),n(_)&&(_=q.expand!=null?q.expand:t.mobile()?10:0),n(w)&&(w=q.dropType!=null?q.dropType:"any"),n(A)&&(A=q.dropArray!=null?q.dropArray:null),n(y)&&(y=q.continuous!=null?q.continuous:!1),n(v)&&(v=q.startIndex!=null?q.startIndex:null),n(P)&&(P=q.duplicateLine!=null?q.duplicateLine:!0),n(x)&&(x=q.deleteNode!=null?q.deleteNode:!0),n(E)&&(E=q.dblclick!=null?q.dblclick:!0),n(k)&&(k=q.fullMove!=null?q.fullMove:!0),n(ne)&&(ne=q.dblclickTime!=null?q.dblclickTime:.5);var I=Tt(ne);if(ne*=I=="s"?1e3:1,n(T)&&(T=q.snapH!=null?q.snapH:null),n(h)&&(h=q.snapV!=null?q.snapV:null),n(W)&&(W=q.rootLock!=null?q.rootLock:!1),n(K)&&(K=q.grandChildren!=null?q.grandChildren:!0),n(F)&&(F=q.steps!=null?q.steps:null),s&&i.length<=1){dt&&$e("Connector() - linear needs more than one point");return}var R=this,le=0;R.node=l,R.line=a;var N=[],L=l.color,ee=l.borderColor,z=R.lines=new t.Container(e,r).addTo(R),$=R.nodes=new t.Container(e,r).addTo(R);if(i.type=="Blob"||i.type=="Squiggle"){var xe=[];t.loop(i.points,function(me){xe.push([me[0],me[1]])}),i=xe}R.points=i,this.addNode=function(me,Ge,Je){if(!s)return ie(me,Ge,Je)};function ie(me,Ge,Je,ce){if(me.addChild){w="on",W=!0,K=!1,Je=me,Je.connectorMoveEvent||(R.bases||(R.bases=[]),R.bases.push(Je),Je.connectorMoveEvent=Je.on("pressmove",function(){Je.positionConnectors(Je,!0,!0)}),Je.connectorUpEvent=Je.on("pressup",function(){Je.positionConnectors(Je,!0,!0)}),Z&&(Je.connectorOverEvent=Je.on("mouseover",function(){de(Je)}),Je.connectorOutEvent=Je.on("mouseout",function(){se(Je)})),Je.positionConnectors=function(Ve,De,Oe){t.loop(Ve.connectors,function(Re){var Ze=Ve.parent.localToLocal(Ve.x-Ve.baseStart.x+Re.nodeStart.x,Ve.y-Ve.baseStart.y+Re.nodeStart.y,Re.parent);Re.x=Ze.x,Re.y=Ze.y,Ye(Re,De,Oe)}),Ve.stage&&Ve.stage.update()},Je.setConnectorColors=function(Ve,De,Oe,Re){return n(Ve)||(Je.connectorColor=Ve),n(De)||(Je.connectorBorderColor=De),n(Oe)||(Je.connectorRollColor=Oe),n(Re)||(Je.connectorRollBorderColor=Re),t.loop(Je.connectors,function(Ze){n(Ve)||(Ze.color=Ve),n(De)||(Ze.borderColor=De)}),Je},Je.setConnectorColors(V,O,Y,B));var oe=Je.getBounds();a.endHead,Array.isArray(Ge)||(Ge=[Ge,Ge]);var _e=[];return Ge.length==2&&(Ge=[Ge[0],Ge[1],Ge[0],Ge[1]]),(a.lineOrientation==t.HORIZONTAL||a.lineOrientation=="auto")&&t.loop([Ge[0],Ge[1]],function(Ve,De){if(Ve==-1||Ve==-2){var Oe=Je.localToLocal(De==0?oe.x:oe.x+oe.width,oe.y,R);_e.push([Oe.x,Oe.y,t.HORIZONTAL])}if(Ve==-1||Ve==-3){var Re=Je.localToLocal(De==0?oe.x:oe.x+oe.width,oe.y+oe.height,R);_e.push([Re.x,Re.y,t.HORIZONTAL])}Ve>0&&t.loop(Ve,function(Ze,be){var we=Je.localToLocal(De==0?oe.x:oe.x+oe.width,oe.y+oe.height*(Ze+1)/(be+1),R);_e.push([we.x,we.y,t.HORIZONTAL])})}),(a.lineOrientation==t.VERTICAL||a.lineOrientation=="auto")&&t.loop([Ge[2],Ge[3]],function(Ve,De){if(Ve==-1||Ve==-2){var Oe=Je.localToLocal(oe.x,De==0?oe.y:oe.y+oe.height,R);_e.push([Oe.x,Oe.y,t.VERTICAL])}if(Ve==-1||Ve==-3){var Re=Je.localToLocal(oe.x+oe.width,De==0?oe.y:oe.y+oe.height,R);_e.push([Re.x,Re.y,t.VERTICAL])}Ve>0&&t.loop(Ve,function(Ze,be){var we=Je.localToLocal(oe.x+oe.width*(Ze+1)/(be+1),De==0?oe.y:oe.y+oe.height,R);_e.push([we.x,we.y,t.VERTICAL])})}),Je.connectors=[],Je.baseStart=new t.Point(Je.x,Je.y),t.loop(_e,function(Ve){var De=ie(Ve[0],Ve[1],Je,Ve[2]);Ie(Je,De)}),setTimeout(function(){Je.positionConnectors(Je,!0,!0)},50),R}var je=l.clone().loc(me,Ge,$).drag({boundary:S}).expand(_);return je.orientation=ce,je.nodeColor=je.color,je.on("mouseover",Ee),je.on("mouseout",Q),je.on("mousedown",re),je.on("pressmove",pe),je.on("pressup",te),x&&je.hold(U),je.nodeNum=le++,je.creations=[],je}function ke(){t.loop(i,function(me,Ge){var Je=ie(me[0],me[1]);Je.dropIndex=Ge,A&&(Je.dropArray=A[Ge])}),s&&$.loop(function(me,Ge,Je){Ge==0?(c?me.before=$.getChildAt(Je-1):me.before=null,me.after=$.getChildAt(Ge+1)):Ge==Je-1?(c?me.after=$.getChildAt(0):me.after=null,me.before=$.getChildAt(Ge-1)):(me.before=$.getChildAt(Ge-1),me.after=$.getChildAt(Ge+1)),d&&Ge>0&&me.noMouse()})}ke(),R.setAvailableIndexes=function(me){return Array.isArray(me)||(me=[me]),R.nodes.loop(function(Ge,Je){me.indexOf(Je)==-1?Ge.noMouse():Ge.mouse()}),R},n(v)||R.setAvailableIndexes(v),R.keyEvent=function(me){x&&me.keyCode==46&&(t.loop(G,function(Ge){Ge&&Ge.parent&&Ke(Ge)}),R.stage&&R.stage.update())},j.addEventListener("keydown",R.keyEvent);function U(me){var Ge=me.target.stage,Je=me.target;R.bases||W&&!Je.creator.creator||(Je.adding?Ke(Je.creator):Ke(Je),R.stage&&R.stage.update())}function Ee(me){var Ge=me.target;Ge.selected||(Ge.color=Ge.base?Ge.base.connectorRollColor:Y,Ge.borderColor=Ge.base?Ge.base.connectorRollBorderColor:B,R.stage&&R.stage.update())}function Q(me){var Ge=me.target;Ge.selected||(Ge.color=Ge.base?Ge.base.connectorColor:Ge.nodeColor,Ge.borderColor=Ge.base?Ge.base.connectorBorderColor:ee,R.stage&&R.stage.update())}var G=[],ue,fe=0,ye,H;function re(me,Ge,Je,ce){var oe=me.target;if(!n(oe)&&(Je&&(oe.selected=!0,G=[],R.selectNode(oe,!ce)),H=oe.nodeNum,!s&&(!W||oe.creator)&&E&&!Ge&&(fe==0&&(ye=setTimeout(function(){if(fe=0,G){var De=R.stage?R.stage.frame:j.zdf,Oe=$.loop(function(Re){if(Re.hitTestPoint(De.mouseX,De.mouseY)&&Re.selected)return!1});Oe&&Be()}},ne)),fe++),oe.startX=oe.x,oe.startY=oe.y,!s&&G.length>0&&t.loop(G,function(De){De.startX=De.x,De.startY=De.y}),!(oe.creations.length>=C||oe.selected||oe.creator&&!K))){oe.adding=!0;var _e=ie(oe.x,oe.y).bot();_e.creations=oe.creations,_e.creatorLine=oe.creatorLine,_e.creator=oe.creator,_e.orientation=oe.orientation,_e.startX=oe.startX,_e.startY=oe.startY,_e.dropIndex=oe.dropIndex,_e.dropArray=oe.dropArray,_e.lineArray=oe.lineArray,_e.color=_e.nodeColor=oe.nodeColor;var je=_e.nodeNum;if(_e.nodeNum=oe.nodeNum,oe.nodeNum=je,oe.base&&(_e.base=oe.base,_e.baseStart=oe.baseStart,_e.nodeStart=oe.nodeStart,_e.connectors=oe.connectors,oe.base=oe.baseStart=oe.nodeStart=oe.connectors=null,_e.base.connectors&&_e.base.connectors.splice(_e.base.connectors.indexOf(oe),1,_e),_e.color=_e.base.connectorColor,_e.borderColor=_e.base.connectorBorderColor),_e.before=oe.before,_e.after=oe.after,_e.before&&(_e.before.after=_e),_e.after&&(_e.after.before=_e),_e.creator){var Ve=_e.creator.creations.indexOf(oe);Ve!=-1&&_e.creator.creations.splice(Ve,1,_e)}t.loop(_e.creations,function(De){De.creator=_e}),oe.creator=_e,oe.creatorLine=a.clone().setPoints(oe.x,oe.y,oe.x,oe.y).addTo(z).alp(0),oe.creatorLine.lineOrientation=oe.orientation,oe.creatorLine.node=oe,oe.creatorLine.creatorNode=_e,oe.creations=[],oe.veeObj&&!n(oe.veeObj.color)?oe.color=t.Pick.choose(oe.veeObj.color):oe.color=_e.color,oe.nodeColor=oe.color,_e.creations.push(oe),R.latestNode=oe}}function pe(me,Ge,Je,ce){var oe=me.target;oe.creatorLine&&oe.creatorLine.alp(1),!s&&G.length>0&&G.indexOf(oe)==-1&&Be(),Ye(oe,!1,!0),R.bases&&t.loop(R.bases,function(_e){oe.creator&&oe.creator.base==_e||(!_e.connectorsOn&&oe.hitTestBounds(_e)&&de(_e),_e.connectorsOn&&!oe.hitTestBounds(_e)&&se(_e))}),R.stage&&R.stage.update()}function te(me,Ge,Je,ce){var oe=me.target;R.bases&&t.loop(R.bases,function(Xe){Xe!=oe.base&&Xe.connectorsOn&&se(Xe)});var _e=!1;if(!s&&fe>1&&!Ge){clearTimeout(ye);var je=oe.adding?oe.creator:oe;if(oe.adding&&Ke(je.creations[je.creations.length-1],!0),!je.selected){var Ve=R.stage?R.stage.frame:j.zdf;J(je,!Ve.ctrlKey)}fe=0,_e=!0}if(!s&&!R.base&&(T&&(oe.x=Math.round(oe.x/T)*T),h&&(oe.y=Math.round(oe.y/h)*h)),p&&t.dist(oe.x,oe.y,oe.startX,oe.startY)<p||m&&t.dist(oe.x,oe.y,oe.startX,oe.startY)>m){oe.adding?Ke(oe,!0):(oe.loc(oe.startX,oe.startY),_e||Ye(oe)),R.stage&&R.stage.update(),R.lastNode=null,R.targetNode=null,R.dispatchEvent("noconnection");return}var De=!1,Oe=!1;if(s){var Re=oe.creator;if(R.connectionStart=Re,R.connectionEnd=oe,Re.before&&oe.hitTestCircle(Re.before)&&!d)oe.loc(Re.before).removeFrom(),Re.before.after=null,Re.before.before||Re.before.noMouse(),Re.before=null,Re.after||Re.noMouse(),Oe=!0,De=Se();else if(Re.after&&oe.hitTestCircle(Re.after))oe.loc(Re.after).removeFrom(),Re.after.before=null,Re.after.after||Re.after.noMouse(),d&&Re.after.mouse(),Re.after=null,Re.before||Re.noMouse(),d&&Re.noMouse(),Oe=!0,De=Se();else if(!Re||oe.creations.length>0)oe.loc(oe.startX,oe.startY).bot();else{Ke(oe,!0),R.stage&&R.stage.update(),R.lastNode=null,R.targetNode=null,R.dispatchEvent("noconnection");return}}else if(w=="off"){var Ze=$.loop(function(Xe){if(oe!=Xe&&oe.hitTestCircles(Xe)){oe.adding?Ke(oe,!0):(oe.loc(oe.startX,oe.startY),Ye(oe)),W&&ve(oe),!k&&oe.creator&&C>0&&oe.creator.creations.length>=C&&oe.creator.noMouse(),R.targetNode=Xe,y&&R.nodes.loop(function(nt){nt!=R.latestNode&&nt.noMouse()}),y&&R.nodes.loop(function(nt){nt!=R.latestNode&&nt.noMouse()}),ge(),R.dispatchEvent("connection"),R.stage&&R.stage.update();return}});if(!Ze){ae(oe);return}}else if(w=="on"||w=="single"){var be=0,we,Me=$.loop(function(Xe){if(oe!=Xe&&oe.hitTestCircles(Xe)){if(we=Xe,R.bases&&(oe.orientation!=Xe.orientation||oe.creator&&oe.creator.base&&oe.creator.base==Xe.base)||oe.dropArray&&oe.dropArray.indexOf(Xe.dropIndex)==-1||!P&&oe.lineArray&&oe.lineArray.indexOf(Xe.dropIndex)!=-1)return;if(w=="on")return!1;be++,be+=Xe.creations.length}});if(Me&&!(w=="single"&&be==1)){ae(oe);return}else{if(oe.loc(we),oe.creator&&oe.orientation==t.VERTICAL&&Math.round(oe.y)==Math.round(oe.creator.startY)||oe.creator&&oe.orientation==t.HORIZONTAL&&Math.round(oe.x)==Math.round(oe.creator.startX))return;R.targetNode=we;var He=oe.dropIndex;oe.dropIndex=we.dropIndex,oe.dropArray=t.copy(we.dropArray),we.lineArray?we.lineArray.push(He):we.lineArray=[He],oe.lineArray=t.copy(we.lineArray),oe.creator&&(oe.creator.lineArray||(oe.creator.lineArray=[]),oe.creator.lineArray.push(oe.dropIndex)),we.base&&we.base.connectors&&Ie(we.base,oe),Oe=!0}}else oe.selected||(Oe=!0);!k&&oe.creator&&C>0&&oe.creator.creations.length>=C&&oe.creator.noMouse(),oe.adding=!1,Ye(oe,!0,!0),t.loop(G,function(Xe){if(G.indexOf(Xe.creator)==-1){var nt=t.loop(Xe.creations,function(Ce){if(G.indexOf(Ce)>=0)return!1});ge(Xe.nodeNum,null,t.decimals(Xe.x,2),t.decimals(Xe.y,2),nt||nt===void 0?1:0)}Xe.startX=Xe.x,Xe.startY=Xe.y}),oe.startX=oe.x,oe.startY=oe.y,W&&ve(oe),Oe?(y&&R.nodes.loop(function(Xe){Xe!=R.latestNode&&Xe.noMouse()}),ge(),R.dispatchEvent("connection"),t.arraysEqual(oe.dropArray,oe.lineArray,!1)&&R.dispatchEvent("blocked")):R.dispatchEvent("noconnection"),De&&R.dispatchEvent("complete"),R.stage&&R.stage.update()}function ge(me,Ge,Je,ce,oe){Ge?N.push([me,null,null,1]):n(Je)?N.push([H,t.decimals(R.latestNode.x,2),t.decimals(R.latestNode.y,2)]):N.push([me,null,null,null,Je,ce,oe])}R.makeConnection=function(me,Ge,Je,ce,oe){var _e=R.stage?R.stage.frame:j.zdf;return ce?(_e.ctrlKey=oe==1,re({target:me},!0,!0,oe),me.loc(Ge,Je),pe({target:me},!0,!0,oe),te({target:me},!0,!0,oe)):(re({target:me},!0,!1,null),R.latestNode.loc(Ge,Je),pe({target:R.latestNode},!0,!1,null),te({target:R.latestNode},!0,!1,null)),_e.ctrlKey=!1,R.latestNode};function Ae(me){var Ge=R.nodes.loop(function(Je){if(Je.nodeNum==me)return Je});if(Ge.type)return Ge}R.setSteps=function(me){return t.loop(me,function(Ge){var Je=Ae(Ge[0]);Je&&(Ge[3]?Je&&Ke(Je):n(Ge[4])?R.makeConnection(Je,Ge[1],Ge[2]):(R.makeConnection(Je,Ge[4],Ge[5],!0,Ge[6]),Be()))}),R},R.applySteps=R.setSteps,R.getSteps=function(me){return me&&(R.stage||(R.stage=zdf.stage),R.pane||(R.pane=new t.Pane({displayClose:!1,container:R.stage,width:Math.min(500,R.stage.width-20),height:Math.min(500,R.stage.height-20),draggable:!0}),R.textArea=new t.TextArea(Math.min(400,R.stage.width-70),Math.min(400,R.stage.height-70)).centerReg(R.pane)),R.pane.show(),R.textArea.text=JSON.stringify(N)),N},Object.defineProperty(this,"steps",{get:function(){return N},set:function(me){R.setSteps(me)}});function ae(me){me.adding||!K?Ke(me,!0):(me.loc(me.startX,me.startY),Ye(me)),W&&ve(me),me.base&&me.base.connectors&&Te(me.base,me),R.lastNode=null,R.targetNode=null,R.dispatchEvent("noconnection"),R.stage&&R.stage.update()}function de(me){t.loop(me.connectors,function(Ge){Ge.color=me.connectorRollColor,Ge.borderColor=me.connectorRollBorderColor}),me.connectorsOn=!0,me.stage&&me.stage.update()}function se(me){t.loop(me.connectors,function(Ge){Ge.color=me.connectorColor,Ge.borderColor=me.connectorBorderColor}),me.connectorsOn=!1,me.stage&&me.stage.update()}function Ie(me,Ge){me.connectors.push(Ge),Ge.nodeStart=Ge.parent.localToLocal(Ge.x,Ge.y,me.parent),Ge.nodeStart.x-=me.x-me.baseStart.x,Ge.nodeStart.y-=me.y-me.baseStart.y,Ge.base=me}function Te(me,Ge){me.connectors.splice(me.connectors.indexOf(Ge),1),Ge.nodeStart=null,Ge.base=null}function ve(me){if(me.creator){if(me.creator.creator){ve(me.creator);return}me.creator&&me.creator.creations.length>=C?me.creator.noMouse():me.creator.mouse()}}function J(me,Ge){Ge&&t.loop(me.creations,function(Je){J(Je,Ge)}),me.selected=!0,me.color=me.base?me.base.connectorColor:b,me.borderColor=me.base?me.base.connectorBorderColor:X,G.push(me),me.top(),ue||(ue=R.stage.on("stagemousedown",function(){var Je=R.stage?R.stage.frame:j.zdf,ce=$.loop(function(oe){if(oe.hitTestPoint(Je.mouseX,Je.mouseY))return!1});ce&&Be()}))}this.selectNode=function(me,Ge){J(me,Ge)};function Se(){var me=$.loop(function(Ge){if(Ge.before||Ge.after)return!1});if(me)return $.loop(function(Ge){Ge.noMouse()}),!0}function Be(){t.loop(G,function(me){me.selected=!1,me.color=me.base?me.base.connectorColor:me.nodeColor,me.borderColor=me.base?me.base.connectorBorderColor:ee}),G=[],R.stage.off("stagemousedown",ue),ue=null,R.stage&&R.stage.update()}function Ye(me,Ge,Je){var ce=G.length>0?G:[me];t.loop(ce,function(oe){oe!=me&&oe.loc(oe.startX+me.x-me.startX,oe.startY+me.y-me.startY),oe.creator&&oe.creatorLine.setPoints(oe.x,oe.y,oe.creator.x,oe.creator.y,Ge,Je),t.loop(oe.creations,function(_e){_e.creatorLine.setPoints(_e.x,_e.y,_e.creator.x,_e.creator.y,Ge,Je)})})}function Ke(me,Ge){if(t.loop(me.creations,function(ce){Ke(ce)},!0),me.creatorLine){me.creatorLine.removeFrom();var Je=me.creator.creations.indexOf(me);Je!=-1&&me.creator.creations.splice(Je,1),!me.creator.mouseEnabled&&!(W&&!me.creator.creator)&&me.creator.mouse()}return me.removeFrom(),me.removeAllEventListeners(),Ge?le--:ge(me.nodeNum,1),me=null,R}this.removeNode=function(me){Ke(me)},this.removeConnectors=function(){t.loop($,function(me){Ke(me)},!0),ke(),R.stage&&R.stage.update()},this.removeBase=function(me){t.loop(me.connectors,function(Ge){Ke(Ge)}),at(me)},this.addBase=function(me,Ge){ie(me,Ge)};function at(me){me.off("pressmove",me.connectorMoveEvent),me.off("pressup",me.connectorUpEvent),me.connectorOverEvent&&me.off("mouseover",me.connectorOverEvent),me.connectorOutEvent&&me.off("mouseout",me.connectorOutEvent),me.connectors=null,me.baseStart=null,me.positionConnectors=me.setConnectorColors=null,me.connectorColor=me.connectorBorderColor=me.connectorRollColor=me.connectorRollBorderColor=null,R.bases.splice(R.bases.indexOf(me),1),R.stage&&R.stage.update()}F&&R.added(function(){R.setSteps(F),R.stage.update()}),Object.defineProperty(this,"selectedList",{get:function(){return G},set:function(){dt&&$e("Selectors() - selectedList is read only")}}),this.dispose=function(me,Ge,Je){return R.nodes.loop(function(ce){ce.removeFrom(),ce.removeAllEventListeners(),ce=null},!0),R.lines.loop(function(ce){ce.removeFrom(),ce=null},!0),j.removeEventListener("keydown",R.keyEvent),R.keyEvent=null,R.bases&&t.loop(R.bases,function(ce){at(ce)}),Je||(R.zimContainer_dispose(!0),R.stage&&R.stage.update()),!0},D!==!1&&t.styleTransforms(this,q),this.clone=function(){return R.cloneProps(new t.Connectors(e,r,i,l,a,s,c,d,C,T,h,w,t.copy(A),y,v,P,x,E,k,p,m,S,_,Y,B,b,X,V,O,Z,W,K,ne,F,D,R.group,f))}},t.extend(t.Connectors,t.Container,["clone","dispose"],"zimContainer",!1),t.Marquee=function(e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,x){var E="width, height, items, time, transition, speed, direction, marginLeft, marginRight, marqueeType, borderColor, borderWidth, refresh, mix, style, group, inherit",k;if(k=lt(t.Marquee,arguments,E,this))return k;Le("67.4"),this.group=P;var p=v===!1?{}:t.getStyle("Marquee",this.group,x),m=this;n(e)&&(e=p.width!=null?p.width:300),n(r)&&(r=p.height!=null?p.height:100);var S=Tt(l);n(l)&&(l=p.time!=null?p.time:S=="s"?5:5e3),n(a)&&(a=p.transition!=null?p.transition:"slide"),n(h)&&(h=p.borderColor!=null?p.borderColor:t.dark),n(w)&&(w=p.borderWidth!=null?p.borderWidth:1),h<0||w<0?h=w=null:h!=null&&w==null&&(w=1),n(d)&&(d=p.marginLeft!=null?p.marginLeft:25),n(C)&&(C=p.marginRight!=null?p.marginRight:25),n(s)&&(s=p.speed!=null?p.speed:S=="s"?.5:500),kt(s,S),n(c)&&(c=p.direction!=null?p.direction:"right"),n(A)&&(A=p.refresh!=null?p.refresh:S=="s"?30*60:30*60*1e3),n(y)&&(y=p.mix!=null?p.mix:!0),this.zimContainer_constructor(e+d+C,r,null,null,!1),this.type="Marquee",this.speed=s;var _=new t.Rectangle(e-1,r-1,t.clear).addTo(m).mov(d+.5,.5),Y=this.content=new t.Container(e,r).loc(d,0,m).setMask(_),B=this.pages=new t.Pages(null,a,s,null,Y).addTo(Y),b=!1;this.add=function(I,R,le,N,L){n(L)&&(L=!0),I.scaleTo(Y,100,100),R&&I.cur().on("click",function(){zn(R,le)}),B.addPage(I),L&&B.center(),I.marqueeViews=0,I.marquee=m,b||X(),N||D(),q&&q.top()},this.remove=function(I){if(m.selected==I){if(m.pages.pages.length==1)return;var R=m.selectedIndex+1;R==m.pages.pages.length&&(R=0),m.pages.go(R,null,null,0),setTimeout(function(){m.pages.removePage(I),I.dispose&&I.dispose(),D()},20)}else m.pages.removePage(I),I.dispose&&I.dispose(),D()};function X(){b=!0,m.selectedIndex=0,m.selected=B.pages[m.selectedIndex].page,m.lastSelected=null,m.selected.marqueeOn&&m.selected.marqueeOn(),m.interval=t.interval(l,function(){m.go()})}if(!n(i)&&!Array.isArray(i)&&(i=[i]),i&&i.length>0&&(y&&t.shuffle(i),t.loop(i,function(I){m.add(I,null,null,!0)})),A>0)var V=t.timeout(A*(S=="s"?1e3:1),function(){location.reload()},null,"ms");m.go=function(I){if(m.selected.marqueeViews+=1,m.selected.marqueeOff&&m.selected.marqueeOff(),I)m.selected=I,t.loop(B.pages,function(le,N){if(le.page==I){m.selectedIndex=N;return}}),m.interval.interval=m.selected.marqueeTime?m.selected.marqueeTime:l,m.interval.pause(ne.toggled,null,!0);else{var R=m.selectedIndex+1;m.selectedIndex=R%B.pages.length,m.selected=B.pages[m.selectedIndex].page,m.interval.time=m.selected.marqueeTime?m.selected.marqueeTime:l}m.dispatchEvent("page"),m.selected.marqueeOn&&m.selected.marqueeOn(),B.go(m.selected,c,a,s)},B.on("pagetransitioned",function(){m.dispatchEvent("pagetransitioned"),m.indicator&&(m.indicator.selectedIndex=m.selectedIndex)});var O=!1,Z=m.left=new t.Container(d-4,r-4),W=new t.Shape().sca(.6);W.graphics.f(t.light).mt(0,0).p("AAhCLIAAkVIBXAAIAAEVgAh3CLIAAkVIBXAAIAAEVg");var K=new t.Shape().sca(.6).reg(-2,0);K.graphics.f(t.light).mt(0,0).p("AiJieIETCeIkTCfg");var ne=m.button=new t.Button({label:"",icon:W,toggleIcon:K,width:45,height:45,corner:0,shadowBlur:0}).scaleTo(Z,100).pos(0,0,!1,!0,Z);ne.on("click",function(){m.interval&&m.interval.pause(ne.toggled),O=ne.toggled,m.stage.update()});var F;function D(){if(!(n(d)||d==0)){var I=4*d/25;Z.pos(d-Z.width-I,I/2,!1,!0,m),m.indicator&&(m.indicator.dispose(),m.indicator.removeFrom()),F||(F=new t.Proportion(8,16,Z.width+I,Z.width/2+I,-1)),m.indicator=new t.Indicator({width:(B.pages.length<=2?B.pages.length:B.pages.length-1)*(Z.width-3),height:F.convert(B.pages.length),num:B.pages.length,shadowBlur:-1,interactive:!0,scale:1.2,indicatorType:T}),m.indicator.fit(0,0,r-ne.height,ne.width),m.indicator.rot(c=="down"?-90:90).center(Z).pos(null,Z.width-I/2,null,!0),m.indicator.selectedIndex=m.selectedIndex,m.indicator.on("change",function(){m.go(B.pages[m.indicator.selectedIndex].page)})}}if(D(),!n(C)&&C>0&&j.zdf&&j.zdf){var u=4*C/25,f=m.right=new t.Container(45,270),o=m.icon=j.zdf.makeIcon(t.grey,t.lighter,t.silver).sca(.5).pos(0,0,!0,!0,f).mov(0,0).cur();o.on("mouseover",function(){g.animate({props:{scaleX:1},time:500,ease:"backOut",override:!0,timeUnit:"ms"}),o.stage.update()}),o.on("mouseout",function(){g.animate({props:{scaleX:0},time:300,ease:"backIn",override:!0,timeUnit:"ms"}),o.stage.update()}),o.on("mousedown",function(){zn("https://zimjs.com/marquee","_blank")});var g=m.label=new t.Label({text:"MARQUEE",color:t.dark,backgroundColor:t.lighter,shiftV:1,paddingV:5}).rot(-90).pos(0,13,!0,!1,f).reg(-10).sca(0,1).mov(0);f.fit(0,0,C-u,r-u),f.pos(C-f.width-u,u/2,!0,!0,m)}if(m.stage&&m.stage.update(),this.pause=function(I,R){n(I)&&(I=!0),I!=O&&(O=I,m.interval.pause(I,R),m.button.toggle(I))},Object.defineProperty(this,"paused",{get:function(){return O},set:function(){dt&&$e("Marquee() - paused is read only - use pause()")}}),Object.defineProperty(this,"time",{get:function(){return l},set:function(I){l=I,m.interval.time=l}}),this.load=function(I,R){var le=[];y&&t.shuffle(I),t.loop(I,function(L){Array.isArray(L)?le.push(L[0]):le.push(L)});var N=m.stage?m.stage.frame:j.zdf;return m.marqueeLoader=N.loadAssets(le,R),m.loadEvent=m.marqueeLoader.on("assetload",function(L){var ee=I[L.asset.id],z,$;Array.isArray(ee)?(z=ee[0],$=ee[1]):(z=ee,$="_self"),m.add(L.asset,z,$),D()}),m},!n(h)){var q=new t.Rectangle(e-1,r-1,t.clear,h,w).loc(_,null,m);q.mouseEnabled=!1}v!==!1&&t.styleTransforms(this,p),this.clone=function(){return m.cloneProps(new t.Marquee(e,r,i,l,a,s,c,T,h,w,A,y,v,this.group,x))},this.dispose=function(I,R,le){return V&&V.clear(),m.interval&&m.interval.clear(),m.loadEvent&&m.marqueeLoader.off("assetload",m.loadEvent),B.dispose(),B=null,le||this.zimContainer_dispose(!0),!0}},t.extend(t.Marquee,t.Container,["clone","dispose"],"zimContainer"),t.Carousel=function(e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,x,E,k,p){var m="items, viewNum, time, spacing, backgroundColor, backing, padding, paddingH, paddingV, arrowLeft, arrowRight, arrowGap, valign, ease, swipe, remember, selectedIndex, style, group, inherit",S;if(S=lt(t.Carousel,arguments,m,this))return S;Le("67.45"),this.group=k;var _=E===!1?{}:t.getStyle("Carousel",this.group,p),Y=this;this.zimContainer_constructor(),n(e)&&(e=_.items!=null?_.items:[new On({color:red}),new On({color:orange}),new On({color:yellow}),new On({color:green}),new On({color:blue}),new On({color:purple}),new On({color:pink})]),n(a)&&(a=_.backgroundColor!=null?_.backgroundColor:t.clear),n(s)&&(s=_.backing!=null?_.backing:null),n(A)&&(A=_.valign!=null?_.valign:"center"),n(r)&&(r=_.viewNum!=null?_.viewNum:3),n(l)&&(l=_.spacing!=null?_.spacing:20),n(c)&&(c=_.padding!=null?_.padding:0),n(d)&&(d=_.paddingH!=null?_.paddingH:c),n(C)&&(C=_.paddingV!=null?_.paddingV:c),n(T)&&(T=_.arrowLeft!=null?_.arrowLeft:new t.Arrow().rot(180)),n(h)&&(h=_.arrowRight!=null?_.arrowRight:new t.Arrow),n(w)&&(w=_.arrowGap!=null?_.arrowGap:20);var B=Tt(i);n(i)&&(i=_.time!=null?_.time:B=="s"?.2:200),n(y)&&(y=_.ease!=null?_.ease:"quadInOut"),n(v)&&(v=_.swipe!=null?_.swipe:!0),n(P)&&(P=_.remember!=null?_.remember:"zimCarousel"),n(x)&&(x=_.selectedIndex!=null?_.selectedIndex:0),P&&localStorage&&!n(localStorage[P])&&(x=Number(localStorage[P])),Y.items=e,Y.viewNum=r,Y.spacing=l,Y.arrowLeft=T,Y.arrowRight=h,s&&(Y.backing=s);var b={};t.loop(e,function(u,f){typeof u=="string"&&(u=e[f]=new t.Pic(u)),u.reg(CENTER,CENTER);var o=b["width"+u.width];o?b["width"+u.width]+=1:b["width"+u.width]=1});var X=0,V=0;t.loop(b,function(u,f){f>X&&(X=f,V=Number(u.substring(5)))});var O=0;t.loop(e,function(u){u.width=V,u.height>O&&(O=u.height)}),Y.itemWidth=V,Y.itemHeight=O;var Z=T.width+w+d,W;function K(){var u=r*(V+l)-l,f=O;W=u+d*2+w*2+T.width+h.width,Y.setBounds(0,0,W,f+C*2),Y.tile=new t.Tile({obj:e,cols:e.length,spacingH:l,rows:1,unique:!0,align:"center",valign:A}).center(Y).loc(Z),Y.background=new On(u+d*2,f+C*2,a).center(Y,0),Y.tile.setMask(Y.background)}function ne(){T.pos(0,0,"left","center",Y),h.pos(0,0,"right","center",Y),T.on("mousedown",function(){Y.cycleInterval&&(Y.cycleClear(),Y.dispatchEvent("cyclecleared")),Y.goLeft()}),h.on("mousedown",function(){Y.cycleInterval&&(Y.cycleClear(),Y.dispatchEvent("cyclecleared")),Y.goRight()}),D()}function F(){if(Y.swipe){var u=Y.swipeObj=new t.Swipe(Y.tile);u.on("swipe",function(f){f.swipeX!=0&&Y.cycleInterval&&(Y.cycleClear(),Y.dispatchEvent("cyclecleared")),f.swipeX==1?Y.goLeft():f.swipeX==-1&&Y.goRight()})}}function D(){localStorage&&P&&(localStorage[P]=x),T.activate(!0),h.activate(!0),Y.tile.x+Y.tile.width<=W-h.width-d-w&&h.activate(!1),Y.tile.x>=Z&&T.activate(!1)}Y.goLeft=function(u){return n(u)&&(u=i),Y.tile.x<Z&&(Y.disableArrows(),x--,Y.tile.animate({props:{x:Y.tile.x+V+l},time:u,ease:y,call:function(){D(),Y.enableArrows(),Y.dispatchEvent("transitioned")}})),Y},Y.goRight=function(u){return n(u)&&(u=i),Y.tile.x+Y.tile.width>W-h.width-d-w&&(Y.disableArrows(),x++,Y.tile.animate({props:{x:Y.tile.x-V-l},time:u,ease:y,call:function(){D(),Y.enableArrows(),Y.dispatchEvent("transitioned")}})),Y},Y.cycleClear=function(){return Y.cycleInterval.clear(),Y.cycleInterval=null,Y},Y.cycle=function(u,f,o,g,q,I){var R="cycleTime, transitionTime, bounce, bounceNum, recycle, rtl",le;if(le=lt(Y.cycle,arguments,R))return le;n(u)&&(u=_.cycleTime!=null?_.cycleTime:B=="s"?5:5e3),n(f)&&(f=_.transitionTime!=null?_.transitionTime:B=="s"?1:1e3),n(o)&&(o=!0),n(g)&&(g=0),n(q)&&(q=u*2),n(I)&&(I=j.DIR&&j.DIR=="rtl"||!j.DIR&&t.DIR=="rtl");let N=I?-1:1;return Y.cycleInterval&&Y.cycleInterval.clear(),q&&q!=-1&&(Y.recycleEvent&&Y.off("cyclecleared",Y.recycleEvent),Y.recycleWait&&Y.recycleWait.clear(),Y.recycleEvent=Y.on("cyclecleared",function(){Y.recycleWait&&Y.recycleWait.clear(),Y.recycleWait=Rr(q,function(){Y.cycle(u,f,o,g,q,I)})})),Y.bounceTotal=.5,Y.cycleInterval=t.interval(u,function(L){if(Y.selectedIndex==0)if(o){if(L.count!=1&&(Y.bounceTotal+=.5),g!=0&&Y.bounceTotal>g){Y.cycleInterval.clear(),Y.dispatchEvent("bouncedone");return}Y.bounceTotal>=1&&Y.dispatchEvent("bounced"),N=1,Y.goRight(f)}else I?Y.cycleInterval.clear():N==1?Y.goRight(f):Y.goLeft(f);else if(Y.selectedIndex==e.length-r){if(L.count!=1&&(Y.bounceTotal+=.5),g!=0&&Y.bounceTotal>g){Y.cycleInterval.clear(),Y.dispatchEvent("bouncedone");return}Y.bounceTotal>=1&&Y.dispatchEvent("bounced"),o?(N=-1,Y.goLeft(f)):I?N==1?Y.goRight(f):Y.goLeft(f):Y.cycleInterval.clear()}else N==1?Y.goRight(f):Y.goLeft(f)}),Y},Y.enableArrows=function(){return Y.swipeObj&&(Y.swipeObj.active=!0),T.mouse(),h.mouse(),Y},Y.disableArrows=function(){return Y.swipeObj&&(Y.swipeObj.active=!1),T.noMouse(),h.noMouse(),Y},Object.defineProperty(Y,"selectedIndex",{get:function(){return x},set:function(u){x=t.constrain(u,0,e.length-r),Y.tile.x=Z-x*(V+l),D()}}),Object.defineProperty(Y,"swipe",{get:function(){return v},set:function(u){v=u,v&&!Y.swipeObj&&F(),Y.swipeObj.active=v}}),K(),ne(),F(),s&&s.center(Y,1),x&&(Y.selectedIndex=x),this.dispose=function(u,f,o){return Y.swipeObj&&Y.swipeObj.dispose(),Y.recycleEvent&&Y.off("cyclecleared",Y.recycleEvent),Y.cycleWait&&Y.cycleWait.clear(),Y.cycleInterval&&Y.cycleInterval.clear(),Y.swipeObj=Y.recycleEvent=Y.cycleWait=null,o||this.zimContainer_dispose(),!0},E!==!1&&t.styleTransforms(this,_),this.clone=function(){return Y.cloneProps(new t.Carousel(t.copy(e),r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,x,E,this.group))}},t.extend(t.Carousel,t.Container,["clone","dispose"],"zimContainer",!1),t.Loader=function(e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,x,E,k,p,m,S,_,Y,B,b,X,V,O,Z,W,K,ne,F,D){var u="width, height, label, type, backgroundColor, rollBackgroundColor, color, rollColor, borderColor, rollBorderColor, borderWidth, corner, shadowColor, shadowBlur, hitPadding, gradient, gloss, dashed, backing, rollBacking, rollPersist, icon, rollIcon, toggle, toggleBacking, rollToggleBacking, toggleIcon, rollToggleIcon, toggleEvent, frame, multiple, accept, style, group, inherit",f;if(f=lt(t.Loader,arguments,u,this))return f;Le("67.5"),this.group=F;var o=ne===!1?{}:t.getStyle("Loader",this.group,D);if(n(e)&&(e=o.width!=null?o.width:250),n(r)&&(r=o.height!=null?o.height:70),n(l)&&(l=o.type!=null?o.type:"image"),l=l.toLowerCase(),n(a)&&(a=o.backgroundColor!=null?o.backgroundColor:"rgba(0,0,0,.05)"),n(s)&&(s=o.rollBackgroundColor!=null?o.rollBackgroundColor:"rgba(0,0,0,.1)"),n(c)&&(c=o.color!=null?o.color:"rgba(0,0,0,.5)"),n(d)&&(d=o.rollColor!=null?o.rollColor:c),n(C)&&(C=o.borderColor!=null?o.borderColor:"rgba(0,0,0,.3)"),n(h)&&(h=o.borderWidth!=null?o.borderWidth:1),n(E)&&(E=o.dashed!=null?o.dashed:!0),n(w)&&(w=o.corner!=null?o.corner:0),n(W)&&(W=o.multiple!=null?o.multiple:!0),n(i)&&(i=o.label!=null?o.label:new t.Label({text:"UPLOAD PIC",color:c,rollColor:d,valign:"center",align:"center",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",backgroundColor:"ignore",group:this.group})),typeof Z>"u")if(j.zdf)var Z=j.zdf;else{dt&&$e("zim.Loader - please provide a reference to zim Frame");return}this.zimButton_constructor(e,r,i,a,s,null,c,d,null,C,h,T,null,k,p,null,S,_,null,w,E,A,y,P,x,null,null,null,null,null,v,null,null,null,m,Y,null,null,null,null,null,null,B,b,null,X,V,null,O,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,!1),this.type="Loader";var g=this,q=Z.stage;i=g.label;var I=g.tag=document.createElement("input");Z.tag?Z.tag.appendChild(I):document.body.appendChild(I),I.setAttribute("type","file"),I.setAttribute("aria-hidden",!0),W&&I.setAttribute("multiple","multiple"),K&&I.setAttribute("accept",K),I.hidden=!0,I.zimDisplay=I.style.display||"inline-block",I.style.cssText="border:thin solid grey; z-index:2; width:"+e+"px; height:"+r+"px; overflow:hidden; outline:none;position:absolute; left:0px; top:0px; display:none; cursor:pointer; opacity: 0; filter: alpha(opacity=0);",this.addEventListener("mousedown",function(){I.click()}),I.addEventListener("change",L);var R=new Ne.DOMElement(I);q.addChild(R),R.alpha=0;var le=Z.retina&&j.devicePixelRatio||1;this.resize=function($,xe){if(!g.stage){I.setAttribute("aria-hidden",!0),I.hidden=!0,I.style.display="none";return}I.setAttribute("aria-hidden",!1),I.hidden=!1,I.style.display=I.zimDisplay,n($)&&($=!0),g.time1&&clearTimeout(g.time1),xe||(g.time1=setTimeout(function(){g.resize(null,!0)},40));var ie=g.getConcatenatedMatrix().decompose(),ke=g.localToGlobal(0,0);if(Z.retina){var U=t.browserZoom();Z.tag?(R.x=ke.x/le/U,R.y=ke.y/le/U):(R.x=Z.x/q.scaleX+ke.x/le/U,R.y=Z.y/q.scaleY+ke.y/le/U),t.sca(R,ie.scaleX/le/q.scaleX/U,ie.scaleY/le/q.scaleY/U)}else R.x=Z.x+ke.x*Z.scale,R.y=Z.y+ke.y*Z.scale,t.sca(R,Z.scale*ie.scaleX,Z.scale*ie.scaleY);return q.update(),g},this.resize(),g.on("added",function(){I.style.display="block",I.hidden=!1,I.style.display="block",g.resize()}),g.added(N);function N(){g.resize(),g.time2=setTimeout(function(){I.style.display="block",I.hidden=!1,I.style.display="block"},50),g.on("added",N,null,!0)}g.on("removed",function(){g.time1&&clearTimeout(g.time1),g.time2&&clearTimeout(g.time2),I&&(I.style.display="none",I.hidden=!0,I.style.display="none")});function L($){var xe;if($.dataTransfer&&$.dataTransfer.files&&$.dataTransfer.files.length>0?xe=$.dataTransfer.files:xe=$.target.files,l=="text"||l=="json"){var ie=[],ke;if(l.toLowerCase()=="json")var U=[],Ee}else if(l=="other")var Q=[],G;else var ue=[],fe;for(var ye=0;ye<xe.length;ye++)(function(H){var re=new FileReader;re.onload=function(pe){if(l=="text"||l=="json"){var te=pe.target.result;if(ie.push(te),l=="json"){var ge=JSON.parse(te);U.push(ge)}if(ie.length==1&&(ke=te,l=="json"&&(Ee=ge)),ie.length==xe.length){var Ae=new Ne.Event("loaded");Ae.texts=ie,Ae.text=ke,Ae.lastText=te,Ae.total=ie.length,l=="json"&&(Ae.jsons=U,Ae.json=Ee,Ae.lastJSON=ge),g.dispatchEvent(Ae),I.value=""}}else if(l=="other"){var ae=pe.target.result;if(Q.push(ae),Q.length==1&&(G=ae),Q.length==xe.length){var Ae=new Ne.Event("loaded");Ae.others=Q,Ae.other=G,Ae.lastOther=ae,Ae.total=Q.length,g.dispatchEvent(Ae),I.value=""}}else{var de=new Image;de.onload=function(){var se=new t.Bitmap(de);if(ue.push(se),ue.length==1&&(fe=se),ue.length==xe.length){var Ie=new Ne.Event("loaded");Ie.bitmaps=ue,Ie.bitmap=fe,Ie.lastBitmap=se,Ie.total=ue.length,g.dispatchEvent(Ie),I.value=""}},de.src=pe.target.result}},l=="text"||l=="json"?re.readAsText(H):re.readAsDataURL(H)})(xe[ye])}var ee=new XMLHttpRequest;if(ee.upload){var z=function($){I.removeEventListener("change",L),L($),setInterval(function(){I.addEventListener("change",L)},100)};I.addEventListener("drop",z)}this.save=function($,xe,ie,ke,U,Ee,Q,G,ue,fe,ye){var H="content, filename, x, y, width, height, cached, cachedBounds, type, data, quality",re;if(re=lt(g.save,arguments,H))return re;if(n($)&&($=Z.stage),n(ue)&&(ue="png"),n(xe))xe="saved_"+String(t.makeID("numbers",5))+"."+ue;else{var pe=xe.split(".");if(pe.length==1)xe+="."+ue;else{var te=["png","jpg","jpeg"],ge=te.indexOf(pe[pe.length-1].toLowerCase());ge==-1?xe+="."+ue:ue=te[ge]}}if(n(ie)&&(ie=0),n(ke)&&(ke=0),n(U)&&(U=$.getBounds&&$.getBounds()?$.getBounds().width:Z.width),n(Ee)&&(Ee=$.getBounds&&$.getBounds()?$.getBounds().height:Z.height),$.cache(ie,ke,U,Ee),fe){var Ae=$.cacheCanvas.toDataURL("image/"+ue,ye);return Q?G&&$.cache(G.x,G.y,G.width,G.height):$.uncache(),Ae}var ae=/Edge\/(\d)+/.test(navigator.userAgent);if(ae){var de=j.open();de.document.write("<html><head><title>saved</title></head><body style='margin:0px;padding:0px;overflow:hidden'><img src="+$.cacheCanvas.toDataURL("image/"+ue)+"></body></html>"),de.document.close()}else{ue=="jpg"&&(ue="jpeg");var se=document.createElement("a");se.setAttribute("download",xe),se.setAttribute("href",$.cacheCanvas.toDataURL("image/"+ue,ye)),document.body.appendChild(se),se.click(),document.body.removeChild(se)}return Q?G&&$.cache(G.x,G.y,G.width,G.height):$.uncache(),g},ne!==!1&&t.styleTransforms(this,o),this.clone=function(){var $=new t.Loader(e,r,n(i)?null:i.clone(),a,s,c,d,C,h,w,A,y,v,P,x,n(k)?null:k.clone(),n(p)?null:p.clone(),m,n(S)?null:S.clone(),n(_)?null:_.clone(),Y,n(B)?null:B.clone(),n(b)?null:b.clone(),n(X)?null:X.clone(),n(V)?null:V.clone(),O,Z,ne,this.group);return g.cloneProps($)},Object.defineProperty(this,"frame",{get:function(){return Z},set:function($){$!=Z&&(Z.off("update",g.updateEvent),Z.off("resize",g.resizeEvent),Z=$,g.resizeEvent=Z.on("resize",g.resize),g.updateEvent=Z.on("update",g.resize),g.resize())}}),this.resizeEvent=Z.on("resize",g.resize),this.updateEvent=Z.on("update",g.resize),this.dispose=function($,xe,ie){var ke;return g.stage&&(ke=g.stage),Z.off("update",g.updateEvent),Z.off("resize",g.resizeEvent),L&&I.removeEventListener("change",L),z&&I.removeEventListener("drop",z),I&&I.parentNode&&I.parentNode.removeChild(I),I=null,ie||(this.zimButton_dispose(),ke&&ke.update()),!0}},t.extend(t.Loader,t.Button,["clone","dispose"],"zimButton",!1),t.TextArea=function(e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,x,E,k,p,m,S,_,Y,B,b,X){var V="width, height, placeholder, text, size, padding, color, backgroundColor, borderColor, borderWidth, corner, shadowColor, shadowBlur, dashed, id, readOnly, spellCheck, password, inputType, wrap, maxLength, frame, expand, keyboardShift, style, group, inherit",O;if(O=lt(t.TextArea,arguments,V,this))return O;Le("67.6"),this.group=b;var Z=B===!1?{}:t.getStyle("TextArea",this.group,X);if(n(e)&&(e=Z.width!=null?Z.width:250),n(r)&&(r=Z.height!=null?Z.height:70),n(i)&&(i=Z.placeholder!=null?Z.placeholder:null),n(l)&&(l=Z.text!=null?Z.text:null),n(a)&&(a=Z.size!=null?Z.size:20),n(s)&&(s=Z.padding!=null?Z.padding:5),n(c)&&(c=Z.color!=null?Z.color:t.granite),n(d)&&(d=Z.backgroundColor!=null?Z.backgroundColor:"rgba(256,256,256,.1)"),n(C)&&(C=Z.borderColor!=null?Z.borderColor:"rgba(0,0,0,.1)"),n(T)&&(T=Z.borderWidth!=null?Z.borderWidth:null),C<0||T<0?C=T=null:C!=null&&T==null&&(T=1),n(h)&&(h=Z.corner!=null?Z.corner:0),!n(A)&&n(w)&&(w=Z.shadowColor!=null?Z.shadowColor:"rgba(0,0,0,.3)"),!n(w)&&n(A)&&(A=Z.shadowBlur!=null?Z.shadowBlur:10),n(E)&&(E=Z.password!=null?Z.password:!1),n(k)&&(k=Z.inputType!=null?Z.inputType:!1),n(p)&&(p=Z.wrap!=null?Z.wrap:!0),n(m)&&(m=Z.maxLength!=null?Z.maxLength:null),n(x)&&(x=Z.spellCheck!=null?Z.spellCheck:!0),n(P)&&(P=Z.readOnly!=null?Z.readOnly:!1),n(Y)&&(Y=Z.keyboardShift!=null?Z.keyboardShift:!1),this.maxLength=m,n(_)&&(_=Z.expand!=null?Z.expand:20),_===!0&&(_=20),typeof S>"u")if(j.zdf)var S=j.zdf;else{dt&&$e("zim.TextArea - please provide a reference to zim Frame");return}this.zimContainer_constructor(e,r,null,null,!1),this.type="TextArea";var W=this,K=S.stage,ne=this.background=new t.Rectangle(e,r,d,C,T,h,y,null,null,!1).expand(_);w!=-1&&A>0&&(ne.shadow=new Ne.Shadow(w,3,3,A)),W.addChild(ne);var F=W.tag=k||E?document.createElement("input"):document.createElement("textarea");S.tag?S.tag.appendChild(F):document.body.appendChild(F),n(v)||(F.setAttribute("id",v),F.setAttribute("name",v)),E?F.setAttribute("type","password"):k&&F.setAttribute("type",k),F.readOnly=P,F.spellcheck=x,i&&F.setAttribute("placeholder",i),l&&(F.value=l),F.zimDisplay=F.style.display||"inline-block",F.style.cssText="background-color:rgba(0,0,0,.01); color:"+c+"; resize:none; z-index:3; width:"+(e-s*2)+"px; height:"+(r-s*2)+"px; overflow:hidden; outline:none;font-size:"+a+"px; font-family:"+(Z.font!=null?Z.font:"arial")+"; border:none; position:absolute; left:0px; top:0px; display:none;",W.taInput=function(){!n(W.maxLength)&&W.text.length>W.maxLength&&(W.text=W.text.substring(0,W.maxLength)),W.dispatchEvent("input")};var D=W.y;W.taFocus=function(){if(j.M&&Y){W.re&&W.stage.frame.off("resize",W.re),W.re=W.stage.frame.on("resize",function(){W.stage&&g>W.stage.height/4&&(W.stage.y=W.stage.scaleY*(W.stage.height/4-g),W.stage.update())});var g=W.localToGlobal(0,0).y;W.stage&&g>W.stage.height/4&&(W.stage.y=W.stage.scaleY*(W.stage.height/4-g),W.stage.update())}W.stage&&(S=W.stage.frame),S.zil&&j.removeEventListener("keydown",S.zil[0]),W.dispatchEvent("focus")},W.taBlur=function(){j.M&&Y&&W.stage&&(W.re&&W.stage.frame.off("resize",W.re),W.stage.y=D,W.stage.update()),W.stage&&(S=W.stage.frame),S.zil&&j.addEventListener("keydown",S.zil[0]),W.dispatchEvent("blur")},F.addEventListener("change",W.taChange),F.addEventListener("input",W.taInput),F.addEventListener("focus",W.taFocus),F.addEventListener("blur",W.taBlur);var u=new Ne.DOMElement(F);u.alpha=0,this.on("mousedown",function(){setTimeout(function(){F.focus()},100)}),this.setFocus=function(g){return n(g)&&(g=!0),g?F.focus():F.blur(),W};var f=S.retina&&j.devicePixelRatio||1;this.resize=function(g,q){n(g)&&(g=!0),W.time1&&clearTimeout(W.time1),q||(W.time1=setTimeout(function(){W.resize(null,!0)},40));var I=W.getConcatenatedMatrix().decompose(),R=W.localToGlobal(s,s);if(S.retina){var le=t.browserZoom();S.tag?(u.x=R.x/f/le,u.y=R.y/f/le):(u.x=S.x/K.scaleX+R.x/f/le,u.y=S.y/K.scaleY+R.y/f/le),t.sca(u,I.scaleX/f/K.scaleX/le,I.scaleY/f/K.scaleY/le)}else S.tag?(u.x=R.x*S.scale,u.y=R.y*S.scale):(u.x=S.x+R.x*S.scale,u.y=S.y+R.y*S.scale),t.sca(u,S.scale*I.scaleX,S.scale*I.scaleY);return u.alpha=W.alpha,W.parent&&(u.alpha*=W.parent.alpha),g&&W.stage&&K.update(),W},this.resize(),W.added(o);function o(){K.addChild(u),W.time2=setTimeout(function(){F.style.display=F.zimDisplay},50),W.resize(),W.on("added",o,null,!0),W.FOEvent=K.on("stagemousedown",function(){W.focus=!1})}W.on("removed",function(){W.time1&&clearTimeout(W.time1),W.time2&&clearTimeout(W.time2),K.removeChild(u),W.FOEvent&&K.off("stagemousedown",W.FOEvent),F&&(F.style.display="none")}),Object.defineProperty(this,"currentValue",{get:function(){return F.value},set:function(g){F.value=g}}),Object.defineProperty(this,"text",{get:function(){return F.value},set:function(g){F.value=g}}),Object.defineProperty(this,"focus",{get:function(){return document.activeElement==F},set:function(g){W.setFocus(g)}}),Object.defineProperty(this,"readOnly",{get:function(){return F.readOnly},set:function(g){F.readOnly=g}}),j.KEYFOCUS!=null&&(t.KEYFOCUS=j.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return t.KEYFOCUS==W},set:function(){t.KEYFOCUS=W}}),t.KEYFOCUS||(W.keyFocus=!0),W.taMousedown=function(){W.keyFocus=!0},F.addEventListener("mousedown",W.taMousedown),p||(F.style.whiteSpace="pre"),B!==!1&&t.styleTransforms(this,Z),this.clone=function(){var g=new t.TextArea(e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,x,E,k,p,m,S,_,Y,B,this.group,X);return W.cloneProps(g)},Object.defineProperty(this,"frame",{get:function(){return S},set:function(g){g!=S&&(S.off("update",W.updateEvent),S.off("resize",W.resizeEvent),S=g,W.resizeEvent=S.on("resize",W.resize),W.updateEvent=S.on("update",W.resize),f=S.retina&&j.devicePixelRatio||1,K=S.stage,W.resize())}}),this.resizeEvent=S.on("resize",W.resize),this.updateEvent=S.on("update",W.resize),this.dispose=function(g,q,I){var R;return W.stage&&(R=W.stage),S.off("update",W.updateEvent),S.off("resize",W.resizeEvent),R&&W.FOEvent&&R.off("stagemousedown",W.FOEvent),F&&F.parentNode&&F.parentNode.removeChild(F),F.removeEventListener("change",W.taChange),F.removeEventListener("input",W.taInput),F.removeEventListener("focus",W.taFocus),F.removeEventListener("blur",W.taBlur),F.removeEventListener("mousedown",W.taMousedown),F=null,I||(this.zimContainer_dispose(!0),R&&R.update()),W.background=null,!0}},t.extend(t.TextArea,t.Container,["clone","dispose"],"zimContainer",!1),t.Tag=function(e,r,i,l,a,s,c,d,C,T,h,w){var A="width, height, id, frame, backgroundColor, padding, paddingH, paddingV, expand, style, group, inherit",y;if(y=lt(t.Tag,arguments,A,this))return y;Le("67.7"),this.group=h;var v=T===!1?{}:t.getStyle("Tag",this.group,w);if(n(e)&&(e=v.width!=null?v.width:250),n(r)&&(r=v.height!=null?v.height:70),n(i)&&(i=v.id!=null?v.id:"zimTag_"+t.rand(1e4)),typeof l>"u")if(j.zdf)var l=j.zdf;else{dt&&$e("zim.Tag - please provide a reference to zim Frame");return}n(a)&&(a=v.backgroundColor!=null?v.backgroundColor:"rgba(0,0,0,0)"),n(s)&&(s=v.padding!=null?v.padding:10),n(c)&&(c=v.paddingH!=null?v.paddingH:s),n(d)&&(d=v.paddingV!=null?v.paddingV:s),n(C)&&(C=v.expand!=null?v.expand:20),C===!0&&(C=20),this.zimContainer_constructor(e,r,null,null,!1),this.type="Tag",this.tagID=i,this.id=i;var P=this,x=l.stage;P.background=new t.Rectangle(e+c,r+d,a).center(this).expand(C||0);var E=P.tag=document.createElement("div");l.tag?l.tag.appendChild(E):document.body.appendChild(E),E.setAttribute("id",i),E.setAttribute("name",i),E.zimDisplay=E.style.display||"inline-block",E.style.cssText="resize:none; z-index:3; width:"+e+"px; height:"+r+"px; overflow:hidden; outline:none;position:absolute; left:0px; top:0px; display:none;";var k=new Ne.DOMElement(E);k.alpha=0;var p=l.retina&&j.devicePixelRatio||1;this.resize=function(S,_){n(S)&&(S=!0),P.time1&&clearTimeout(P.time1),_||(P.time1=setTimeout(function(){P.resize(null,!0)},40));var Y=P.getConcatenatedMatrix().decompose(),B=P.localToGlobal(0,0);if(l.retina){var b=t.browserZoom();l.tag?(k.x=B.x/p/b,k.y=B.y/p/b):(k.x=l.x/x.scaleX+B.x/p/b,k.y=l.y/x.scaleY+B.y/p/b),t.sca(k,Y.scaleX/p/x.scaleX/b,Y.scaleY/p/x.scaleY/b)}else k.x=l.x+B.x*l.scale,k.y=l.y+B.y*l.scale,t.sca(k,l.scale*Y.scaleX,l.scale*Y.scaleY);return k.alpha=P.alpha,P.parent&&(k.alpha*=P.parent.alpha),S&&P.stage&&x.update(),P},this.resize(),P.added(m);function m(){x.addChild(k),P.time2=setTimeout(function(){E.style.display=E.zimDisplay},50),P.resize(),P.on("added",m,null,!0)}P.on("removed",function(){P.time1&&clearTimeout(P.time1),P.time2&&clearTimeout(P.time2),x.removeChild(k),E&&(E.style.display="none")}),this.add=function(S){return E.innerHTML+=S,P},Object.defineProperty(this,"innerHTML",{get:function(){return E.innerHTML},set:function(S){E.innerHTML=S}}),Object.defineProperty(this,"style",{get:function(){return E.style},set:function(S){E.style=S}}),T!==!1&&t.styleTransforms(this,v),this.clone=function(){var S=new t.Tag(e,r,i,l,a,s,c,d,C,T,this.group,w);return P.cloneProps(S)},Object.defineProperty(this,"frame",{get:function(){return l},set:function(S){S!=l&&(l.off("update",P.updateEvent),l.off("resize",P.resizeEvent),l=S,P.resizeEvent=l.on("resize",P.resize),P.updateEvent=l.on("update",P.resize),P.resize())}}),this.resizeEvent=l.on("resize",P.resize),this.updateEvent=l.on("update",P.resize),this.dispose=function(S,_,Y){var B;return P.stage&&(B=P.stage),l.off("update",P.updateEvent),l.off("resize",P.resizeEvent),E&&E.parentNode&&E.parentNode.removeChild(E),E=null,Y||(this.zimContainer_dispose(!0),B&&B.update()),!0}},t.extend(t.Tag,t.Container,["clone","dispose"],"zimContainer",!1);function It(e,r){r?(e.mouseChildren=!0,e.mouseEnabled=!0,e._enabled=!0):(e.mouseChildren=!1,e.mouseEnabled=!1,e._enabled=!1)}if(t.addTo=function(e,r,i,l){var a="obj, container, index, localToLocal",s;if(s=lt(t.addTo,arguments,a))return s;if(Le("47.5"),n(e)){$e("zim methods - addTo(): please provide object");return}if(n(r))if(j.zdf)r=j.zdf.stage;else{$e("zim methods - addTo(): please provide container");return}if(n(l)&&(l=!0),e.parent||(l=!1),l)var c=e.parent.localToLocal(e.x,e.y,r);return n(i)||isNaN(i)?r.addChild(e):r.addChildAt(e,i),l&&(e.x=c.x,e.y=c.y),e},t.removeFrom=function(e,r){if(Le("47.6"),n(e)){$e("zim methods - removeFrom(): please provide object");return}return e.removePhysics&&e.removePhysics(),n(r)?e.parent&&e.parent.removeChild(e):r.removeChild(e),e},t.added=function(e,r,i,l){if(Le("47.7"),!(n(e)||n(r)||typeof r!="function")){var a=Tt(i);if(n(i)&&(i=a=="s"?.1:100),e.stage){r(e.stage,e);return}var s=i*(a=="s"?1e3:1),c;l&&(kt(l),c=l*(a=="s"?1e3:1));var d=Date.now(),C=0,T=setInterval(function(){if(C>5){clearInterval(T);return}C++,e.stage&&(r(e.stage,e),clearInterval(T),clearInterval(h))},10),h=setInterval(function(){c>0&&d-Date.now()>c&&clearInterval(h),e.stage&&(r(e.stage,e),clearInterval(h))},s);return h}},t.centerReg=function(e,r,i,l){var a="obj, container, index, add",s;if(s=lt(t.centerReg,arguments,a))return s;if(e.type=="AC"&&j.zdf)return j.zdf.ac("centerReg",arguments),e.addTo(r,i);if(Le("48"),n(e)||!e.getBounds||!e.getBounds())return $e("zim methods - centerReg(): please provide object with bounds set"),e;n(l)&&(l=!0),n(r)&&e.parent&&l&&(r=e.parent,n(i)&&(i=e.parent.getChildIndex(e)),e.parent.removeChild(e)),!n(r)&&r==e.parent&&(n(i)&&(i=e.parent.getChildIndex(e)),e.parent.removeChild(e));var c=e.getBounds();return e.regX=c.x+c.width/2,e.regY=c.y+c.height/2,l?t.center(e,r,i):e},t.center=function(e,r,i,l){var a="obj, container, index, add",s;if(s=lt(t.center,arguments,a))return s;if(e.type=="AC"&&j.zdf)return j.zdf.ac("center",arguments),e.addTo(r,i);if(t.centerCheck||(Le("48.1"),t.centerCheck=!0),n(e)||!e.getBounds)return $e("zim.center(): please provide object with bounds"),e;if(n(r)&&(e.parent?r=e.parent:j.zdf&&(r=j.zdf.stage)),n(r)||!r.getBounds)return $e("zim.center(): please provide container with bounds"),e;var c=e.getBounds(),d=r.getBounds();n(l)&&(l=!0);var C=!1;if(n(d)&&(r.setBounds(0,0),d=r.getBounds(),C=!0),l&&r.addChild&&(n(i)||typeof i=="number"&&isNaN(i)?(!e.parent||e.parent!=r)&&r.addChild(e):r.addChildAt(e,i)),n(c))return e.x=d.x+d.width/2,e.y=d.y+d.height/2,e;var T=!1,h=!1;r.scaleX==0&&(T=!0,r.scaleX=1e-5),r.scaleY==0&&(h=!0,r.scaleY=1e-5);var w=e.localToLocal(e.regX,e.regY,r),A=t.boundsToGlobal(e),y=t.boundsToGlobal(r,A,!0);if(T&&(r.scaleX=0),h&&(r.scaleY=0),e.x=d.x+d.width/2-y.width/2+(w.x-y.x),e.y=d.y+d.height/2-y.height/2+(w.y-y.y),!l&&r.getStage&&r.stage&&e.parent){var v=r.localToLocal(e.x,e.y,e.parent);e.x=v.x,e.y=v.y}return C&&r.setBounds(null),e},t.place=function(e,r){if(Le("49"),n(e))return;n(r)&&(r="obj"),t.lastPlace=e;function i(){$e(r+".x = "+Math.round(e.x)+"; "+r+".y = "+Math.round(e.y)+";"),$e(r+".loc("+Math.round(e.x)+", "+Math.round(e.y)+");")}t.drag({obj:e,currentTarget:!0,dragCursor:"crosshair"}),e.on("mousedown",function(){t.lastPlace=e});var l=j.zdf;return l&&l.on("keydown",function(a){if(e==t.lastPlace){var s=a.keyCode;if(s>=37&&s<=40){var c=a.shiftKey?10:1;e.mov(s==37?-1*c:s==39?1*c:0,s==38?-1*c:s==40?1*c:0),i(),e.stage&&e.stage.update()}}}),$e("place "+r+" - to get new position"),e.on("click",i),e},t.placeReg=function(e,r){if(Le("49.5"),n(e))return;var i=e.stage;if(n(i))return $e("zim.placeReg() - add object to stage before calling placeReg()"),e;n(r)&&(r="obj");function l(){var c=e.globalToLocal(s.x,s.y);$e(r+".regX = "+Math.round(c.x)+"; "+r+".regY = "+Math.round(c.y)+";"),$e(r+".reg("+Math.round(c.x)+", "+Math.round(c.y)+");")}var a=e.parent.localToGlobal(e.x,e.y),s=new t.Shape(-25,-25,50,50,null,!1).addTo(i).pos({x:a.x,y:a.y,reg:!0});return s.graphics.s("white").mt(-25,0).lt(25,0).mt(0,-25).lt(0,20),s.compositeOperation="difference",s.expand(0),t.drag({obj:s}),$e("place cursor to get new registration point location"),i.on("stagemouseup",l),e},t.pos=function(e,r,i,l,a,s,c,d,C,T,h){var w="obj, x, y, horizontal, vertical, container, index, add, reg, regX, regY",A;if(A=lt(t.pos,arguments,w))return A;if(e.type=="AC"&&j.zdf)return j.zdf.ac("pos",arguments),e.addTo(s,c);Le("41.5"),j.DIR&&j.DIR=="rtl"||!j.DIR&&t.DIR=="rtl"?l=="start"?l="right":l=="end"&&(l="left"):l=="start"?l="left":l=="end"&&(l="right");var y=!1;l=="right"&&(y=!0);var v=!1;a=="bottom"&&(v=!0);var P=t.POSREG;if(j.POSREG!=null&&(P=j.POSREG),n(C)&&(C=P),n(e))return;n(C)&&n(T)&&(T=!1),n(C)&&n(h)&&(h=!1),!n(C)&&n(T)&&(T=C),!n(C)&&n(h)&&(h=C),n(d)&&(d=!0),!n(s)&&!s.addChild&&(s=null),!e.getBounds&&!e.getBounds()&&(T=h=!1),e.zimPos={x:r,y:i,h:l,v:a,i:c},n(s)&&(e.parent?s=e.parent:j.zdf&&(s=j.zdf.stage)),!e.parent&&n(r)&&(r=0),!e.parent&&n(i)&&(i=0);var x=!1;e.getBounds()||(e.setBounds(0,0),x=!0);var E=!1;s&&!s.getBounds()&&(s.setBounds(0,0),E=!0);function k(){n(c)||typeof c=="number"&&isNaN(c)?s.contains(e)||s.addChild(e):s.addChildAt(e,c)}if(!n(s)&&s.addChild&&d){var p=s.getBounds().clone();k();var m=s.getBounds();(p.width!=m.width||p.height!=m.height||p.x!=m.x||p.y!=m.y)&&(e.removeFrom(),s.setBounds(p.x,p.y,p.width,p.height),E=!0,k())}if(!T&&!h&&(l=="center"||l=="middle")&&(a=="center"||a=="middle"))return e.center({container:s}),e.mov(r,i),x&&e.setBounds(null),E&&s.setBounds(null),e;if(l=="center"||l=="middle"){if(T)e.x=s.width/2;else{var S=e.y;e.center(),e.y=S}e.mov(r),r=null,l=null}else l===!0&&(y=!0);if(a=="center"||a=="middle"){if(h)e.y=s.height/2;else{var _=e.x;e.center(),e.x=_}e.mov(0,i),i=null,a=null}else a===!0&&(v=!0);function Y(){var Z=e.getBounds(),W=Z.x,K=Z.y,ne=Z.width,F=Z.height,D=e._props.matrix;D=e.getMatrix(D),(W||K)&&D.appendTransform(0,0,1,1,0,0,0,-W,-K);var u=ne*D.a,f=ne*D.b,o=F*D.c,g=F*D.d,q=D.tx,I=D.ty,R=q,le=q,N=I,L=I;return(W=u+q)<R?R=W:W>le&&(le=W),(W=u+o+q)<R?R=W:W>le&&(le=W),(W=o+q)<R?R=W:W>le&&(le=W),(K=f+I)<N?N=K:K>L&&(L=K),(K=f+g+I)<N?N=K:K>L&&(L=K),(K=g+I)<N?N=K:K>L&&(L=K),{x:R,y:N,width:le-R,height:L-N}}if(e.parent&&e.parent.getBounds){if(s=e.parent,n(r)&&y==!0&&(r=0),n(i)&&v==!0&&(i=0),n(r)||(e.x=r),n(i)||(e.y=i),n(r)&&n(i)&&!y&&!v)return x&&e.setBounds(null),E&&s.setBounds(null),e;var B=0,b=0;if(e.getBounds()){var X=Y();if(!n(r)){var V;y?V=new t.Point(X.x+X.width,X.y+X.height):V=new t.Point(X.x,X.y),B=V.x-r}n(i)||(v?V=new t.Point(X.x+X.width,X.y+X.height):V=new t.Point(X.x,X.y),b=V.y-i);var O=s.getBounds();n(r)||(y?T?e.x=O.width+O.x-r:e.x=O.width+O.x-r-B:(T?e.x=r:e.x=r-B,e.x+=O.x)),n(i)||(v?h?e.y=O.height+O.y-i:e.y=O.height+O.y-i-b:(h?e.y=i:e.y=i-b,e.y+=O.y))}}return x&&e.setBounds(null),E&&s.setBounds(null),d||e.removeFrom(),e},t.loc=function(e,r,i,l,a,s,c,d){var C="obj, target, y, container, index, add, localToLocal, x",T;if(T=lt(t.loc,arguments,C))return T;if(e.type=="AC"&&j.zdf)return j.zdf.ac("loc",arguments),e.addTo(l,a);if(Le("41.55"),!n(e)){if(typeof r=="number"&&(d=r,r=null),n(r)||(Array.isArray(r)?(d=r[0],i=r[1]):(n(r.x)||(d=r.x),n(r.y)||(i=r.y))),n(d)&&n(r)&&(d=e.x),n(i)&&n(r)&&(i=e.y),n(s)&&(s=!0),n(l)&&(e.parent?l=e.parent:j.zdf&&(l=j.zdf.stage)),s&&l&&(!e.parent||l!=e.parent?n(a)||isNaN(a)?l.addChild(e):l.addChildAt(e,a):n(a)||l.addChildAt(e,a)),n(c)&&(c=!0),r&&r.parent&&e.parent&&c){var h=r.parent.localToLocal(d,i,e.parent);d=h.x,i=h.y}return e.x=d,e.y=i,e}},t.mov=function(e,r,i){var l="obj, x, y",a;if(a=lt(t.mov,arguments,l))return a;if(e.type=="AC"&&j.zdf)return j.zdf.ac("mov",arguments),e;if(Le("41.6"),!n(e))return n(r)||(e.x+=r),n(i)||(e.y+=i),e},t.sca=function(e,r,i){return e.type=="AC"&&j.zdf?(j.zdf.ac("sca",arguments),e):(Le("41.97"),n(e)||n(e.scaleX)||(n(r)&&(r=e.scaleX),n(i)&&(i=r),e.scaleX=r,e.scaleY=i),e)},t.alp=function(e,r){if(Le("41.7"),!n(e))return n(r)||(e.alpha=e.hovOriginal=r,e.tag&&e.tag.style&&(e.type!="Loader"&&(e.tag.style.opacity=r),r==0?e.tag.style.display=e.tag.zimDisplay="none":e.tag.style.display=e.tag.zimDisplay="inline-block")),e},t.vis=function(e,r){if(Le("41.71"),!n(e))return e.visible=r,e.tag&&e.tag.style&&(r?e.tag.style.display=e.tag.zimDisplay="inline-block":e.tag.style.display=e.tag.zimDisplay="none"),e},t.ble=function(e,r){if(Le("41.72"),!n(e))return n(r)&&(r="difference"),e.compositeOperation=r,(e.type=="Blob"||e.type=="Squiggle")&&e.update(),e},t.dye=function(e,r){if(Le("41.73"),!n(e))return e.hasOwnProperty("backgroundColor")?e.backgroundColor=r:e.hasOwnProperty("color")&&(e.color=r),e},t.hov=function(e,r,i){if(Le("41.75"),!n(e))return n(r)&&(r=1),n(i)&&(i=typeof r=="number"?"alpha":"color"),e.hovMouseover&&(e.off("mouseover",e.hovMouseover),e.off("mouseout",e.hovMouseout)),r==-1?(e.cur("default"),n(e.hovOld)||(e[e.hovType]=e.hovOld),e.hovOld=null,e.stage&&e.stage.update(),e):(e.cur(),e.hovOld=e[i],e.hovNew=r,e.hovType=i,e.hovMouseover=e.on("mouseover",function(){e[i]=e.hovNew,e.stage&&e.stage.update()}),e.hovMouseout=e.on("mouseout",function(){e[i]=e.hovOld,e.stage&&e.stage.update()}),e)},t.rot=function(e,r,i,l){if(Le("41.8"),!n(e)){if(e.type=="AC"&&j.zdf)return j.zdf.ac("rot",arguments),e;if(!n(r))if(e.parent&&(!n(i)||!n(l))){n(i)&&(i=e.x),n(l)&&(l=e.y);var a=e.parent.localToLocal(i,l,e),s=new t.Point(e.x,e.y);e.reg(a.x,a.y),e.rotation=r,e.x=i,e.y=l;var c=e.parent.localToLocal(s.x,s.y,e);e.reg(c.x,c.y),e.x=s.x,e.y=s.y}else e.rotation=r;return e}},t.siz=function(e,r,i,l){if(Le("41.85"),!n(e))return e.type=="AC"&&j.zdf?(j.zdf.ac("siz",arguments),e):(n(l)&&(l=!1),!n(r)&&!n(i)?(e.widthOnly=r,e.heightOnly=i):n(r)?n(i)||(l?e.heightOnly=i:e.height=i):l?e.widthOnly=r:e.width=r,e)},t.ske=function(e,r,i){if(Le("41.9"),!n(e))return e.type=="AC"&&j.zdf?(j.zdf.ac("ske",arguments),e):(n(r)||(e.skewX=r),n(i)||(e.skewY=i),e)},t.reg=function(e,r,i,l){if(Le("41.95"),!n(e)){if(e.type=="AC"&&j.zdf)return j.zdf.ac("reg",arguments),e;var a=e.regX,s=e.regY,c=r,d=j.DIR||t.DIR||"ltr",C;if(r=="default"&&(r=null),typeof r=="string"&&(C=e.getBounds(),C?(r=="start"&&(r=d=="ltr"?"left":"right"),r=="end"&&(r=d=="ltr"?"right":"left"),r=="left"?r=C.x:r=="right"?r=C.x+C.width:(r=="center"||r=="middle")&&(r=C.x+C.width/2)):r=null),typeof i=="string"?(C||(C=e.getBounds()),C?i=="top"?i=C.y:i=="bottom"?i=C.y+C.height:(i=="center"||i=="middle")&&(i=C.y+C.height/2):i=null):n(i)&&(c=="center"||c=="middle")&&(C||(C=e.getBounds()),C?i=C.y+C.height/2:i=null),i=="default"&&(i=null),n(r)||(e.regX=r),n(i)||(e.regY=i),l&&e.parent){var T=e.localToLocal(a,s,e.parent);e.x-=T.x-e.x,e.y-=T.y-e.y}return e}},t.top=function(e){return Le("41.62"),n(e)||!e.parent||e.parent.setChildIndex(e,e.parent.numChildren-1),e},t.bot=function(e){return Le("41.63"),n(e)||!e.parent||e.parent.setChildIndex(e,0),e},t.ord=function(e,r){if(Le("41.64"),!(n(e)||!e.parent))return n(r)&&(r=0),e.parent.setChildIndex(e,t.constrain(e.parent.getChildIndex(e)+r,0,e.parent.numChildren-1)),e},t.cur=function(e,r){if(Le("41.1"),n(e))return $e("zim methods - cur(): please provide object"),e;n(r)&&(r="pointer");var i=j.zdf;return e.stage&&(i=e.stage.frame),i.cursors&&i.cursors[r]?(e.cursor="none",e._cursor=r,i.cursorList.add(e,r),e):(i.cursorList&&i.cursorList.add(e,!0),e.cursor=r,e)},t.sha=function(e,r,i,l,a){return Le("41.2"),n(e)?($e("zim methods - sha(): please provide object"),e):(n(r)&&(r="rgba(0,0,0,.3)"),r.blur?(e.shadow=r,e):(n(i)&&(i=e.width?e.width*.08:5),n(l)&&(l=e.height?e.height*.08:5),n(a)&&(a=e.width?e.width*.16:10),r==-1?e.shadow=null:e.shadow=new Ne.Shadow(r,i,l,a),e))},t.dep=function(e,r){if(Le("41.65"),!n(e))return n(r)&&(r=0),e.depth=r,e},t.nam=function(e,r){if(Le("41.67"),!(n(e)||n(r)))return e.name=r,t.zimObjectIDs[r]=e,e},t.movement=function(e,r,i){Le("47.75");var l=e.stage||j.zdf.stage;function a(){l=e.stage,e.zimMovementStage=l,e.zimMovementEvent&&l.off("stagemousemove",e.zimMovementEvent),e.zimMovementEvent=l.on("stagemousemove",function(s){r(s)}),e.on("mouseout",function(){e.zimMovementEvent&&l.off("stagemousemove",e.zimMovementEvent)},null,!0)}return t.mobile()?(e.zimMovementEvent&&l.off("pressmove",e.zimMovementEvent),e.zimMovementEvent=e.on("pressmove",function(s){r(s)})):(e.zimMouseoverEvent&&e.off("mouseover",e.zimMouseoverEvent),e.zimMouseoverEvent=e.on("mouseover",a),i&&a()),e},t.noMovement=function(e){if(Le("47.9"),!n(e))return e.zimMouseoverEvent&&e.off("mouseover",e.zimMouseoverEvent),e.zimMovementEvent&&e.zimMovementStage&&e.zimMovementStage.off("stagemousemove",e.zimMovementEvent),e},t.tap=function(e,r,i,l,a,s,c,d,C,T){var h="obj, call, distance, time, once, dbl, dblTime, call2, call3, call4",w;if(w=lt(t.tap,arguments,h))return w;if(Le("47.8"),!(n(e)||n(r)||typeof r!="function")){n(i)&&(i=s?10:5);var A=Tt(l);n(l)&&(l=A=="s"?8:8e3),n(a)&&(a=!1),n(s)&&(s=!1),n(c)&&(T?c=A=="s"?.5:500:c=A=="s"?1:1e3),e.cur("pointer");var y=!1,v=!1,P;return s?e.zimDblClickDownEvent=e.on("mousedown",function(x){if(P=!1,y){y=!1;return}if(y=!0,x.currentTarget.type=="List"){if(x.target.type=="WindowBacking")return;var E=x.currentTarget.globalToLocal(x.stageX/t.scaX,x.stageY/t.scaY);if(E.y<=0)return}var k=x.stageX/t.scaX,p=x.stageY/t.scaY,m=Date.now(),S,_;v=!0,e.zimDoubleTimeout&&clearTimeout(e.zimDoubleTimeout),e.zimDoubleTimeout=setTimeout(function(){if(v=!1,y=!1,e.zimDblClickUpEvent&&e.off("pressup",e.zimDblClickUpEvent),P&&T)if(Math.abs(k+p-S/t.scaX-_/t.scaY)<i){if(e.excludeTap)return;T(x)}else d&&d(x)},A=="s"?c*1e3:c),e.zimDblClickUpEvent=e.on("pressup",function(Y){if(S=Y.stageX,_=Y.stageY,P=!0,y){C&&C(Y);return}else if(!v)return;if(Math.abs(k+p-Y.stageX/t.scaX-Y.stageY/t.scaY)<i&&Date.now()-m<(A=="s"?l*1e3:l)){if(e.excludeTap)return;clearTimeout(e.zimDoubleTimeout),r(Y)}else d&&d(Y);Y.remove()})},null,a):e.zimClickDownEvent=e.on("mousedown",function(x){if(x.currentTarget.type=="List"){if(x.target.type=="WindowBacking")return;var E=x.currentTarget.globalToLocal(x.stageX/t.scaX,x.stageY/t.scaY);if(E.y<=0)return}var k=x.stageX/t.scaX,p=x.stageY/t.scaY,m=Date.now();e.zimClickUpEvent=e.on("pressup",function(S){if(Math.abs(k+p-S.stageX/t.scaX-S.stageY/t.scaY)<i&&Date.now()-m<(A=="s"?l*1e3:l)){if(e.excludeTap)return;r(S)}else d&&d(S);S.remove()})},null,a),e}},t.noTap=function(e){if(Le("47.9"),!n(e))return e.cursor&&e.cur("default"),e.zimClickDownEvent&&e.off("mousedown",e.zimClickDownEvent),e.zimClickUpEvent&&e.off("pressup",e.zimClickUpEvent),e.zimDoubleTimeout&&clearInterval(e.zimDoubleTimeout),e},t.hold=function(e,r,i,l,a){if(Le("47.87"),!(n(e)||n(r)||typeof r!="function")){n(i)&&(i=5);var s=Tt(l);n(l)&&(l=s=="s"?1.5:1500),n(a)&&(a=!1),e.cur("pointer");var c;return e.zimClickHoldDownEvent=e.on("mousedown",function(d){if(c||(c=d.target.stage),!!c){if(n(c.frame)&&(c.frame=j.zdf),(n(c.frame)||!c.frame.mousemoveEvent)&&(n(c.frame)&&(c.frame={}),c.frame.mouseX=d.stageX/t.scaX,c.frame.mouseY=d.stageY/t.scaY,c.frame.mouseholdEvent&&c.off("stagemousemove",c.frame.mouseholdEvent),c.frame.mouseholdEvent=c.on("stagemousemove",function(A){c.frame.mouseX=A.stageX/t.scaX,c.frame.mouseY=A.stageY/t.scaY})),d.currentTarget.type=="List"){if(d.target.type=="WindowBacking")return;var C=d.currentTarget.globalToLocal(d.stageX/t.scaX,d.stageY/t.scaY);if(C.y<=0)return}var T=d.stageX/t.scaX,h=d.stageY/t.scaY;clearInterval(e.zimHoldInterval);var w=0;e.zimHoldInterval=setInterval(function(){if(w<10)Math.abs(T+h-c.frame.mouseX-c.frame.mouseY)>i&&clearInterval(e.zimHoldInterval);else{if(Math.abs(T+h-c.frame.mouseX-c.frame.mouseY)<i){if(e.excludeHold)return;r(d)}clearInterval(e.zimHoldInterval)}w++},l/10*(s=="s"?1e3:1)),e.zimClickHoldUpEvent=e.on("pressup",function(){clearInterval(e.zimHoldInterval),c&&c.frame.mouseholdEvent&&c.off("stagemousemove",c.frame.mouseholdEvent)},null,!0)}},null,a),e}},t.noHold=function(e){if(Le("47.88"),!n(e))return e.cursor&&e.cur("default"),e.off("mousedown",e.zimClickHoldDownEvent),e.off("pressup",e.zimClickHoldUpEvent),e.stage&&e.stage.frame.mouseEvent&&e.stage.off("stagemousemove",e.stage.frame.mouseEvent),clearInterval(e.zimHoldTimeout),e},t.change=function(e,r,i){if(Le("47.85"),!(n(e)||n(r)||typeof r!="function"))return n(i)&&(i=!1),e.zimChangeEvent=e.on("change",function(l){r(l)},null,i),e},t.noChange=function(e){if(Le("47.95"),!n(e))return e.off("mousedown",e.zimChangeEvent),e},t.drag=function(e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,x,E,k,p,m,S){var _="obj, boundary, axis, overCursor, dragCursor, all, swipe, localBoundary, onTop, surround, slide, slideFactor, slideSnap, slideSnapDamp, reg, removeTweens, startBounds, rect, currentTarget, offStage, immediateBoundary, singleTouch",Y;if(Y=lt(t.drag,arguments,_))return Y;if(Le("31"),n(e)||!e.on)return;var B=t.DRAGALL;if(j.DRAGALL!=null&&(B=j.DRAGALL),n(s)&&n(k)&&(s=B),n(s)&&n(k)?k=!1:n(s)?n(k)&&(k=!1):k=s,(e.type=="Tag"||e.type=="TextArea"||e.type=="Loader")&&(k=!0),r&&r.getBounds&&(e.type=="Container"||e.type=="Tile")&&e.mouseChildren==!0&&!s){var b=Array.prototype.slice.call(arguments);return b[4]=!0,setTimeout(function(){e.loop(function(ve){b[0]=ve,t.drag.apply(null,b)})},m?0:50),e}(n(i)||i=="all"||i!="horizontal"&&i!="vertical")&&(i="both"),e.zimDown&&e.noDrag(),e.cur(n(l)?"pointer":l),n(c)&&(c=!1),n(d)&&(d=!1),n(C)&&(C=!0),n(T)&&(T=!1),n(h)&&(h=!1),n(w)&&(w=.9),n(A)&&(A=!0);var X=["horizontal","vertical","auto"];if(A!==!0&&X.indexOf(A)<0&&(A=!1),A=="auto"&&(A=!0),n(y)&&(y=.1),n(v)&&(v=!1),n(P)&&(P=!0),n(x)&&(x=!0),n(r)&&!n(E)&&(r=E),n(S)&&(S=!1),e.dragPaused=!1,h)var V,O,Z,W,K,ne,F,D,u,f,o,g,q,I,R,le,N,L,ee=j.M?20:10,z,$,xe,ie,ke=!1,U=!1,Ee=50;else e.zimDragTicker=function(){};e._draggable=!0,t.setSwipe(e,c),e.zimBoundary=r,e.zimlocalBoundary=d,e.circleBounds=r&&r.type=="Circle"?r.radius:!1,e.downCheck=!1;var Q=!1,G,ue,fe,ye,H;e.zimAdded=e.on("added",re,null,!0),e.zimRemoved=e.on("removed",pe,null,!0),e.parent&&re();function re(){if(e.off("added",e.zimAdded),r=e.zimBoundary,r&&r.getBounds&&r.type!="Blob"){if(e.zimlocalBoundary=!1,r.type!="Stage"&&r.type!="StageGL"?r=r.boundsToGlobal():r=new t.Boundary(0,0,r.width,r.height),!T){var ve=e.boundsToGlobal();H=e.localToGlobal(e.regX,e.regY);var J=new t.Point(H.x-ve.x,H.y-ve.y),Se=e.borderWidth?e.borderWidth:0;r.x+=J.x+Se/2,r.y+=J.y+Se/2,r.width-=ve.width+Se,r.height-=ve.height+Se}e.zimBoundary=r}G=0,ue=0,e.zimBoundary&&e.zimBoundary.type!="Blob"&&(d?(fe=t.boundsToGlobal(e.parent,e.zimBoundary),T&&(ye=e.zimBoundary)):(fe=e.zimBoundary,T&&(ye=t.boundsToGlobal(e.parent,e.zimBoundary,!0)))),fe&&x&&(H=e.parent.localToGlobal(e.x,e.y),ae(e,H.x,H.y)),h&&setTimeout(function(){h&&A&&(V=new t.Damp(null,y),O=new t.Damp(null,y)),e.zimDragImmediate=function(Be,Ye){o=Be,g=Ye,z=$=0,xe=ie=0,D=q=u=I=f=R=0,h&&A&&(n(Be)||V.immediate(Be),n(Ye)||O.immediate(Ye))},Z=3,W=0,K=[],ne=[],F=[],D=e.x,u=e.y,o=e.x,g=e.y,q=e.x,I=e.y,R=Date.now(),le=-1e4,N=-1e4,e.zimDragMoving=!0,Te()},50),n(e.zimMaskDynamic)||e.zimMaskApply()}function pe(){e.zimDragTicker&&t.Ticker.remove(e.zimDragTicker)}var te,ge;e.pointers={};var Ae=!1;e.zimDown=e.on("mousedown",function(ve){if(!(!e.stage||e.dragPaused)&&!(S&&Ae)){Ae=!0,ge=e.stage,e.zmu||(e.zmu=ge.frame.on("mouseupplus",function(Ke){e.downCheck&&(h||(e.downCheck=!1),de(Ke,!0))})),e.dragMouseX=Math.round(ve.stageX/t.scaX)+ge.x,e.dragMouseY=Math.round(ve.stageY/t.scaY)+ge.y;var J="id"+Math.abs(ve.pointerID+1);if(e.pointers[J]=!0,te=k?ve.currentTarget:ve.target,e.zimBoundary&&!te.getBounds()){$e("zim.drag() - drag object needs bounds set");return}if(e.downCheck=!0,e.stage.mouseMoveOutside=!0,t.Ticker.has(e.zimDragTicker)||t.Ticker.add(e.zimDragTicker,e.stage),P&&e.zimTweens)for(var Se in e.zimTweens){var Be=e.zimTweens[Se];Be.zimObj&&(Be.zimObj.x!=null||Be.zimObj.y!=null)&&e.stopAnimate(Se)}if(te.parent){if(C){var Ye=te.parent.numChildren-1;te.parent.getChildAt(Ye).type=="Keyboard"&&Ye--,te.parent.setChildIndex(te,Ye),te.ZIMoutlineShape&&te.outline()}te.parent==e.stage?H=new t.Point(ve.stageX/t.scaX,ve.stageY/t.scaY):H=te.parent.globalToLocal(ve.stageX/t.scaX,ve.stageY/t.scaY),v&&(te.x=H.x,te.y=H.y),G=H.x-te.x,ue=H.y-te.y,fe=null,e.zimBoundary&&(d?(fe=t.boundsToGlobal(te.parent,e.zimBoundary),T&&(ye=e.zimBoundary)):(fe=e.zimBoundary,T&&(ye=t.boundsToGlobal(te.parent,e.zimBoundary,!0)))),e.cur(n(a)?"pointer":a),h&&(e.slideStartX=e.x,e.slideStartY=e.y,L=e.zimDragMoving,W=0,K=[H.x],ne=[H.y],F=[Date.now()],le=-1e4,N=-1e4,e.zimDragMoving=!0),e.type=="Pen"&&(e.zimDragCheck=!0,Q=!1)}}},!0),e.zimMove=e.on("pressmove",function(ve){if(!(S&&!e.pointers["id"+Math.abs(ve.pointerID+1)])&&!(!e.downCheck||e.dragPaused)){var J=(p?ve.rawX:ve.stageX)/t.scaX+ge.x,Se=(p?ve.rawY:ve.stageY)/t.scaY+ge.y;e.dragMouseX=Math.round(J),e.dragMouseY=Math.round(Se),ae(te,J,Se),te.ZIMoutlineShape&&te.outline(),e.type=="Pen"&&!Q&&e.drawing?Q=!0:(e.type=="Tag"||e.type=="TextArea"||e.type=="Loader")&&e.resize()}},!0);function ae(ve,J,Se){if(n(ve)&&(ve=te||e),!!ve.parent){if(n(J)||n(Se)){var Be=ve.parent.localToGlobal(ve.x,ve.y);G=ue=0,e.zimBoundary&&(d?(fe=t.boundsToGlobal(ve.parent,e.zimBoundary),T&&(ye=ve.zimBoundary)):(fe=e.zimBoundary,T&&(ye=t.boundsToGlobal(ve.parent,e.zimBoundary,!0)))),J=Be.x,Se=Be.y,h&&(o=ve.x,g=ve.y,te=ve)}var Ye;ge&&ge.type?Ye=ve.parent.globalToLocal(J,Se):Ye=ve.parent.globalToLocal(J*t.scaX,Se*t.scaY);var Ke=i=="both"||i=="horizontal",at=i=="both"||i=="vertical",me;h&&A?A=="vertical"?(me=se(ve,Ye.x-G,Ye.y-ue),Ke&&(ve.x=me.x),at&&(ve.y=Ye.y-ue)):A=="horizontal"?(me=se(ve,Ye.x-G,Ye.y-ue),Ke&&(ve.x=Ye.x-G),at&&(ve.y=me.y)):(Ke&&(ve.x=Ye.x-G),at&&(ve.y=Ye.y-ue)):(me=se(ve,Ye.x-G,Ye.y-ue),Ke&&(ve.x=me.x),at&&(ve.y=me.y)),h&&!L&&(ve.slideStartX!=ve.x||ve.slideStartY!=ve.y)&&(L=!0)}}e.zimPosition=ae,e.zimUp=e.on("pressup",function(ve){de(ve)},!0);function de(ve,J){if(!(S&&!J&&!e.pointers["id"+Math.abs(ve.pointerID+1)])){Ae=!1;var Se="id"+Math.abs(ve.pointerID+1);if(delete e.pointers[Se],!(!e.downCheck||e.dragPaused)){if(e.cur(n(l)?"pointer":l),h){if(te.dispatchEvent("slidestart"),te.parent){var Be=p?ve.rawX:ve.stageX,Ye=p?ve.rawY:ve.stageY;H=te.parent.globalToLocal(Be/t.scaX,Ye/t.scaY)}else H=new t.Point(0,0);D=H.x,u=H.y,f=Date.now(),xe=D-q,ie=u-I;var Ke=f-R;z=t.constrain(xe*ee/Ke,-Ee,Ee),$=t.constrain(ie*ee/Ke,-Ee,Ee),ke=!1,U=!1,e.downCheck=!1,o=te.x,g=te.y,J&&(q=D=0,I=u=0,R=f=0)}else{e.downCheck=!1;var at=0;for(var me in e.pointers)at++;at==0&&t.Ticker.remove(e.zimDragTicker),e.type=="Pen"&&(e.zimDragCheck=!1,Q&&e.drawing&&e.stopCheck())}e.stage&&e.stage.update()}}}function se(ve,J,Se){if(!ve.parent)return{x:J,y:Se};if(fe)if(T){var Be=ve.getBounds().width,Ye=ve.getBounds().height,Ke=ve.getBounds().x,at=ve.getBounds().y;Be<ye.width?J=ye.x+(ye.width-Be)/2+(ve.regX-Ke):(J-(ve.regX-Ke)>ye.x&&(J=ye.x+(ve.regX-Ke)),J-(ve.regX-Ke)+Be<ye.x+ye.width&&(J=ye.x+ye.width+(ve.regX-Ke)-Be)),ve.height<ye.height?Se=ye.y+(ye.height-Ye)/2+(ve.regY-at):(Se-(ve.regY-at)>ye.y&&(Se=ye.y+(ve.regY-at)),Se-(ve.regY-at)+Ye<ye.y+ye.height&&(Se=ye.y+ye.height+(ve.regY-at)-Ye))}else{if(fe.type=="Blob")return fe.shape.hitTestPoint(J,Se)?{x:J,y:Se}:{x:e.x,y:e.y};if(H=ve.parent.localToGlobal(J,Se),e.circleBounds){var me=fe.x+fe.width/2,Ge=fe.y+fe.height/2,Je=e.circleBounds;if(t.dist(me,Ge,H.x,H.y)<=Je)J=H.x,Se=H.y;else{var ce=t.angle(me,Ge,H.x,H.y)*RAD;J=me+Je*Math.cos(ce),Se=Ge+Je*Math.sin(ce)}}else J=Math.max(fe.x,Math.min(fe.x+fe.width,H.x)),Se=Math.max(fe.y,Math.min(fe.y+fe.height,H.y));H=ve.parent.globalToLocal(J,Se),J=H.x,Se=H.y}return{x:J,y:Se}}function Ie(ve,J,Se,Be,Ye){Math.abs(ve.x-le)<.1&&Math.abs(ve.y-N)<.1?(e.zimDragMoving=!1,ve.x=Be,ve.y=Ye,ve.slideStartX=null,ve.slideStartY=null,L&&(ve.dispatchEvent("slidestop"),t.Ticker.remove(e.zimDragTicker)),e.type=="Pen"&&(e.zimDragCheck=!1,Q&&e.drawing&&e.stopCheck())):(le=J,N=Se)}function Te(){e.zimDragTicker=function(){if(!n(e.slideStartX))if(te||(te=e),e.downCheck){var ve;te.parent?ve=te.parent.globalToLocal(e.dragMouseX,e.dragMouseY):ve=new t.Point(0,0),W++,K.push(ve.x),ne.push(ve.y),F.push(Date.now()),W>=Z?(q=K.shift(),I=ne.shift(),R=F.shift()):(q=K[0],I=ne[0],R=F[0])}else{if(!e.zimDragMoving)return;xe=z,ie=$;var J,Se;(i==BOTH||i==HORIZONTAL)&&(J=te.x+xe),(i==BOTH||i==VERTICAL)&&(Se=te.y+ie),z=xe*w,$=ie*w;var Be;fe&&(Be=se(te,J,Se),(A===!0||A=="horizontal")&&(Math.round(J)!=Math.round(Be.x)&&(ke||(V.immediate(J),ke=!0),z=0,J=V.convert(Be.x)),A=="horizontal"&&(Se=Be.y)),(A===!0||A=="vertical")&&(Math.round(Se)!=Math.round(Be.y)&&(U||(U=!0,O.immediate(Se),$=0),Se=O.convert(Be.y)),A=="vertical"&&(J=Be.x)),A||(J=Be.x,Se=Be.y)),te.x=J,te.y=Se,Ie(te,te.x,te.y,J,Se)}}}return e},t.noDrag=function(e,r){if(Le("32"),n(e)||!e.on)return;if(n(r)&&(r=!0),r&&e.numChildren&&e.numChildren>1)for(var i=0;i<e.numChildren;i++){var l=e.getChildAt(i);a(l)}a(e);function a(s){s.cur("default"),s._draggable=!1,t.setSwipe(s,!0),s.off("added",s.zimAdded),s.off("removed",s.zimRemoved),s.off("mousedown",s.zimDown),s.off("pressmove",s.zimMove),s.off("pressup",s.zimUp),s.zmu&&(s.stage?s.stage.frame.off("mouseupplus",s.zmu):j.zdf.off("mouseupplus",s.zmu)),t.Ticker&&(s.zimDragSlide&&t.Ticker.remove(s.zimDragSlide),s.zimDragTicker&&t.Ticker.remove(s.zimDragTicker)),s.zimDragMoving=s.zimAdded=s.zimRemoved=s.zimDown=s.zimMove=s.zimUp=s.zimBoundary=s.zimDragSlide=null,s.slideStartX=s.slideStartY=s.zimDragImmediate=null,s.dragMouseX=s.zimPosition=s.dragMouseY=s.zimDown=s.zimUp=null,s.zimDragTicker=s.zimDragSlide=null}return e},t.dragBoundary=function(e,r){if(Le("33"),!(n(e)||!e.on))return e.zimBoundary=r,e.zimDragMoving=!0,e.zimPosition&&e.zimPosition(),e},t.dragRect=t.dragBoundary,t.mouse=function(e){return Le("33.1"),e.zimLastMouse&&(e.mouseChildren=e.zimLastMouse),e.mouseEnabled=!0,e.zimLastMouseEnabled=!0,e},t.noMouse=function(e){return Le("33.15"),e.zimLastMouse=e.mouseChildren,e.mouseChildren=!1,e.mouseEnabled=!1,e.zimLastMouseEnabled=!1,e},t.wire=function(e,r,i,l,a,s,c,d){var C="source, target, prop, twoWay, setSource, filter, call, input",T;if(T=lt(t.wire,arguments,C))return T;if(Le("33.2"),n(t.Ticker)&&dt)return $e("wire() - requires ZIM Frame"),e;if(n(r)&&dt)return $e("wire() - requires a target"),e;var h=t.DEFAULTWIRE;return j.DEFAULTWIRE!=null&&(h=j.DEFAULTWIRE),n(d)&&(h&&h!="currentValue"&&h!="selectedIndex"||h&&Object.prototype.hasOwnProperty.call(e,h)?d=h:Object.prototype.hasOwnProperty.call(e,"currentValue")?d="currentValue":Object.prototype.hasOwnProperty.call(e,"selectedIndex")?d="selectedIndex":d=i),n(i)&&(i=d),e.addChild&&(e.zimWire=!0),r.addChild&&(r.zimWired=!0),t.Ticker.addWire(e,[r,i,l,a,s,c,d]),e},t.noWire=function(e,r,i,l){var a="source, target, prop, input",s;return(s=lt(t.noWire,arguments,a))?s:(Le("33.25"),n(t.Ticker)&&dt?($e("noWire() - requires ZIM Frame"),e):(t.Ticker.removeWire(e,r,i,l),e))},t.wired=function(e,r,i,l,a,s,c,d){var C="target, source, prop, twoWay, setSource, filter, call, input",T;return(T=lt(t.wired,arguments,C))?T:(Le("33.3"),n(t.Ticker)&&dt?($e("wired() - requires ZIM Frame"),e):(t.wire(r,e,i,l,a,s,c,d),e))},t.noWired=function(e,r,i,l){var a="target, source, prop, input",s;return(s=lt(t.noWire,arguments,a))?s:(Le("33.35"),n(t.Ticker)&&dt?($e("noWired() - requires ZIM Frame"),e):(t.Ticker.removeWire(r,e,i,l),e))},typeof At>"u")var At;if(t.bind=function(e,r,i,l,a,s){var c="obj, id, props, extra, filter, bindObj",d;if(d=lt(t.bind,arguments,c))return d;if(Le("33.17"),!At)return dt&&$e("bind() - needs a Bind() object created first"),e;if(n(r))return dt&&$e("bind() - needs a unique id"),e;var C=s||At;return C.add(r,e,i,l,a),e},t.noBind=function(e,r,i,l,a){var s="obj, props, removeConnectionData, call, bindObj",c;if(c=lt(t.noBind,arguments,s))return c;if(Le("33.18"),!At)return e;var d=a||At;return d.remove(e,r,i,l),e},t.transform=function(e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,x,E,k,p,m,S,_,Y,B,b,X,V,O){var Z="obj, move, stretchX, stretchY, scale, rotate, allowToggle, visible, onTop, showStretch, showRotate, showScale, showReg, showBorder, borderColor, borderWidth, dashed, customCursors, handleSize, regSize, snapDistance, snapRotation, cache, events, ghostColor, ghostWidth, ghostDashed, ghostHidden, frame",W;if(W=lt(t.transform,arguments,Z))return W;if(e.type=="AC"&&j.zdf)return j.zdf.ac("transform",arguments),e;if(Le("33.5"),n(e)||!e.getBounds)return $e("zim methods - transform(): please provide object with bounds set"),e;if(!e.getBounds())return $e("zim methods - transform(): please setBounds() on object"),e;if(!e.parent)return $e("zim methods - transform(): object should be on stage first"),e;n(r)&&(r=!0),n(i)&&(i=!0),n(l)&&(l=!0),e.width==0&&(i=!1),e.height==0&&(l=!1),n(a)&&(a=!0),n(s)&&(s=!0);var K=t.mobile();n(c)&&(c=!0),n(d)&&(d=!0),n(C)&&(C=!0),n(T)&&(T=!!K),n(h)&&(h=!!K),n(w)&&(w=!0),n(A)&&(A=!0),n(y)&&(y=!0),n(v)&&(v="brown"),n(P)&&(P=1),n(B)&&(B=null),n(b)&&(b=null),B<0||b<0?B=b=null:B!=null&&b==null&&(b=1),n(X)&&(X=!0),n(V)&&(V=!1),n(O)&&(O=j.zdf),n(E)&&(E=!K),n(k)&&(k=K?20:10),n(p)&&(p=16),n(m)&&(m=10),n(S)&&(S=5),n(_)&&(_=!0),n(Y)&&(Y=!1),(e.type=="Tag"||e.type=="TextArea"||e.type=="Loader")&&(Y=!0),e.mouseChildren=!1;var ne=e.getConcatenatedMatrix().decompose(),F=e.stage?e.stage:O.stage;n(O.eventRemove)&&(F.enableMouseOver(),O.ctrlKey=!1,O.shiftKey=!1,j.addEventListener("keydown",function(Ue){O.altKey=Ue.altKey,O.ctrlKey=Ue.ctrlKey}),j.addEventListener("keyup",function(Ue){O.altKey=Ue.altKey,O.ctrlKey=Ue.ctrlKey}));var D=e.getBounds(),u=new t.Shape({style:!1}),f=new t.Shape({style:!1}),o=new t.Shape({style:!1});f.mouseEnabled=!1,o.controlType="reg";var g=e.parent,q=u.graphics,I=f.graphics,R=o.graphics,le,N,L,ee,z,$,xe,ie,ke,U=new t.Container({style:!1});U.type="TransformControls";var Ee=new t.Container({style:!1}),Q=new t.Container({style:!1}),G=new t.Container({style:!1}),ue=new t.Container({style:!1}),fe,ye,H,re,pe;n(e.zimMaskDynamic)||e.zimMaskApply();function te(Ue,ft){Ue==ft&&new t.Triangle(16,12,12,"white",null,null,0).addTo(Ue).mov(0,-13.5),new t.Triangle(16,12,12,"white",null,null,0).addTo(Ue).mov(13.5).rot(90),Ue==ft&&new t.Triangle(16,12,12,"white",null,null,0).addTo(Ue).mov(0,13.5).rot(180),new t.Triangle(16,12,12,"white",null,null,0).addTo(Ue).mov(-13.5).rot(-90),Ue==ft&&new t.Triangle(10,7,7,"black",null,null,0).addTo(Ue).mov(0,-13),new t.Triangle(10,7,7,"black",null,null,0).addTo(Ue).mov(13).rot(90),Ue==ft&&new t.Triangle(10,7,7,"black",null,null,0).addTo(Ue).mov(0,13).rot(180),new t.Triangle(10,7,7,"black",null,null,0).addTo(Ue).mov(-13).rot(-90),_&&Ue.cache(-20,-20,40,40)}if(E){var ge=new t.Container({style:!1}),Ae=new t.Container({style:!1});te(ge,ge),te(Ae,ge);var ae={"nw-resize":45,"ne-resize":-45,"n-resize":90,"e-resize":0}}function de(){var Ue=e;for(fe=0,ye=1,H=1,re=0,pe=0;Ue.parent;)fe+=Ue.rotation,ye*=Ue.scaleX,H*=Ue.scaleY,re+=Ue.skewX,pe+=Ue.skewY,Ue=Ue.parent}de();var se=fe,Ie=["nw-resize","ne-resize","nw-resize","ne-resize"],Te=[2,3,0,1],ve,J;for(J=0;J<4;J++)w?(ve=new t.Rectangle(k,k,t.pink,t.grey,2,null,null,null,null,!1),ve.centerReg(Ee),_&&ve.cache(-1,-1,k+2,k+2)):(ve=new t.Rectangle(k,k,"rgba(0,0,0,0)","rgba(0,0,0,0)",2,null,null,null,null,!1),ve.centerReg(Ee),ve.expand(0)),ve.rotation=fe,xe=E?"none":Ie[J],ve.drag({overCursor:xe,dragCursor:xe,onTop:!1}),ve.controlType="corner",ve.cu=Ie[J];for(J=0;J<Te.length;J++)Ee.getChildAt(J).op=Ee.getChildAt(Te[J]);var Se=["n-resize","e-resize","n-resize","e-resize"];for(Te=[1,1,0,0],J=0;J<4;J++){var Be=J%2==0?e.width/2:k,Ye=J%2==0?k:e.height/2;T?(ve=new t.Rectangle(k,k,t.fog,t.dark,2,null,null,null,null,!1),ve.centerReg(J%2==0?G:Q),_&&ve.cache(-1,-1,k+2,k+2)):(ve=new t.Rectangle(Be,Ye,"rgba(0,0,0,0)",null,null,null,null,null,null,!1),ve.centerReg(J%2==0?G:Q),ve.expand(0)),ve.rotation=fe,xe=E?"none":Se[J],ve.drag({overCursor:xe,dragCursor:xe,onTop:!1}),ve.controlType="side",ve.cu=Se[J]}for(J=0;J<Te.length;J++){var Ke=J%2==0?G:Q;Ke.getChildAt(Math.floor(J/2)).op=Ke.getChildAt(Te[J])}var at=["ne-resize","nw-resize","ne-resize","nw-resize"];for(J=0;J<4;J++)h?(ve=new t.Circle(k,t.pink,null,null,null,null,null,null,!1),ve.addTo(ue),_&&ve.cache(-k,-k,k*2,k*2)):(ve=new t.Circle(k,"rgba(0,0,0,0)",null,null,null,null,null,null,!1),ve.addTo(ue),ve.expand(0)),xe=E?"none":at[J],ve.drag({overCursor:xe,dragCursor:xe,onTop:!1}),ve.controlType="rotate",ve.cu=at[J];var me=1.8;ue.alpha=.5,Ge();function Ge(){var Ue=k*me*t.sign(ye),ft=k*me*t.sign(H);ue.getChildAt(0).reg(Ue,ft),ue.getChildAt(1).reg(-Ue,ft),ue.getChildAt(2).reg(-Ue,-ft),ue.getChildAt(3).reg(Ue,-ft),F.update()}function Je(){q.c(),I.c(),R.c(),le=e.localToGlobal(D.x,D.y),N=e.localToGlobal(D.x+D.width,D.y),L=e.localToGlobal(D.x+D.width,D.y+D.height),ee=e.localToGlobal(D.x,D.y+D.height);var Ue=e.localToGlobal(D.x+D.width/2,D.y),ft=e.localToGlobal(D.x+D.width,D.y+D.height/2),Ht=e.localToGlobal(D.x+D.width/2,D.y+D.height),Wt=e.localToGlobal(D.x,D.y+D.height/2);z=e.localToGlobal(e.regX,e.regY),$=e.localToGlobal(D.x+D.width/2,D.y+D.height/2),ke=[le,N,L,ee],ie=[Ue,ft,Ht,Wt],y&&(q.s(v),x&&q.sd([10,5],0),q.ss(P).mt(le.x,le.y).lt(N.x,N.y).lt(L.x,L.y).lt(ee.x,ee.y).lt(le.x,le.y).cp()),n(B)||(I.s(B),X&&I.sd([10,5],0),I.ss(b).mt(le.x,le.y).lt(N.x,N.y).lt(L.x,L.y).lt(ee.x,ee.y).lt(le.x,le.y).cp()),u.setBounds(le.x,le.y,N.x-le.x,ee.y-le.y),A&&(R.s("#eee").ss(P).f("rgba(0,0,0,.1)").dc(0,0,p),R.s("#222").ss(P).dc(0,0,p*.3)),de();for(var ln=Math.min(50,Math.abs(re))*t.sign(re),jt=Math.min(50,Math.abs(pe))*t.sign(pe),sn=fe*t.sign(ye*H)*t.sign(e.scaleX*e.scaleY),vt=0;vt<ke.length;vt++){var Nt=ke[vt];Ee.getChildAt(vt).loc(Nt.x,Nt.y).ske(ln,jt).rot(sn),ue.getChildAt(vt).loc(Nt.x,Nt.y).rot(sn);var zt=ie[vt],xn=vt%2==0?G:Q;xn.getChildAt(Math.floor(vt/2)).loc(zt.x,zt.y).ske(ln,jt).rot(sn),T||xn.getChildAt(Math.floor(vt/2)).sca(vt%2==0?ye/2:1,vt%2==0?1:H/2)}o.x=z.x,o.y=z.y}Je();var ce=new t.Shape(1e3,1e3,null,null,null,!1);function oe(){ce.x=0,ce.y=0,ce.graphics.c().f("rgba(0,0,0,.01)").mt(le.x,le.y).lt(N.x,N.y).lt(L.x,L.y).lt(ee.x,ee.y).lt(le.x,le.y).cp(),ce.reg(z.x,z.y),ce.x=z.x,ce.y=z.y}oe(),U.on("dblclick",function(Ue){O.ctrlKey&&e.transformControls.visible&&(e.scaleX=1,e.scaleY=1,e.rotation=0,Je(),oe(),F.update()),qt(Ue,!0)});var _e=U.on("mousedown",Ve),je=e.on("mousedown",Ve);function Ve(Ue){var ft=F.getObjectUnderPoint(Ue.stageX,Ue.stageY,1);K||ft&&(e.contains&&e.contains(ft)||!e.contains&&e==ft)?e.transformControls.visible||(E?(pt=!1,ce.mouseEnabled=!1):O.canvas.style.cursor="move",e.transformControls.show(),e.dispatchEvent("transformshow")):e.transformControls.visible&&(!ft||!U.contains(ft))&&(e.transformControls.hide(),e.dispatchEvent("transformhide"))}var De=F.on("stagemousedown",function(Ue){var ft=F.getObjectUnderPoint(Ue.stageX,Ue.stageY,1),Ht=ft&&ft.parent&&ft.parent.layer&&ft.parent.layer==e;e.transformControls.visible&&(!ft||!U.contains(ft)&&!Ht)&&(e.dispatchEvent("transformhide"),e.transformControls.hide())});c||(U.off("mousedown",_e),e.off("mousedown",je),F.off("stagemousedown",De));var Oe,Re,Ze,be,we,Me,He,Xe,nt,Ce,Fe,it,Qe,tt=!1,ot=!1,gt,ze,Mt=e.cursor,ut,xt=new t.Circle(30,"rgba(0,0,0,0)",null,null,null,null,null,null,!1).expand(20);if(E){xt.mouseEnabled=!1,xt.mouseChildren=!1,xt.addChild(Ae),Ee.on("mouseover",ht),Ee.on("mouseout",st),Q.on("mouseover",ht),Q.on("mouseout",st),G.on("mouseover",ht),G.on("mouseout",st),ue.on("mouseover",ht),ue.on("mouseout",st);var _t=new t.Circle(30,"rgba(0,0,0,0)",null,null,null,null,null,null,!1).expand(20);_t.cursor="none"}Ee.on("mousedown",Yt),Ee.on("pressmove",Et),Ee.on("pressup",qt),Q.on("mousedown",Yt),Q.on("pressmove",Et),Q.on("pressup",qt),G.on("mousedown",Yt),G.on("pressmove",Et),G.on("pressup",qt),ue.on("mousedown",Yt),ue.on("pressmove",Jt),ue.on("pressup",qt);function Yt(Ue){if(ot=!0,C&&Ot(),gt&&F.off("stagemousemove",gt),Oe=Ue.target.x,Re=Ue.target.y,Ce=e.x,Fe=e.y,Ze=e.scaleX,be=e.scaleY,Ue.target.controlType=="rotate"){tt=!0,we=e.rotation;var ft=Ue.stageX/t.scaX,Ht=Ue.stageY/t.scaY,Wt=g.localToGlobal(Ce,Fe);it=Wt.x,Qe=Wt.y,Me=Math.atan2(Ht-Qe,ft-it)*180/Math.PI}O.ctrlKey||Ue.target.controlType=="rotate"?(He=Math.abs(Oe-e.x),Xe=Math.abs(Re-e.y)):(He=Math.abs(Oe-Ue.target.op.x),Xe=Math.abs(Re-Ue.target.op.y)),Ue.target.controlType!="rotate"&&(nt=Ue.target.op.parent.localToLocal(Ue.target.op.x,Ue.target.op.y,e.parent)),xt.stage?F.setChildIndex(xt,F.getChildIndex(U)):xt.addTo(F,F.getChildIndex(U)+1),xt.x=Ue.stageX/t.scaX,xt.y=Ue.stageY/t.scaY,xt.cursor=E?"none":Ue.target.cu,E&&(e.getConcatenatedMatrix().decompose(ne),ne.rotation||(ne.rotation=0),Ae.rotation=ne.rotation*t.sign(ye*H)*t.sign(e.scaleX*e.scaleY)+ae[Ue.target.cu]+se,Ue.target.controlType!="side"&&ye*H<0&&(Ae.rotation+=90),_t.addTo(F,1).pos({x:Ue.stageX/t.scaX,y:Ue.stageY/t.scaY,reg:!0})),ce.visible=!1,e.cursor="none"}function Et(Ue){var ft=1;if(O.ctrlKey&&Ue.target.controlType=="corner"?ft=He>Xe?(Ue.target.x-Ce)/(Oe-Ce):(Ue.target.y-Fe)/(Re-Fe):He>Xe?Oe-Ue.target.op.x&&(ft=(Ue.target.x-Ue.target.op.x)/(Oe-Ue.target.op.x)):Re-Ue.target.op.y&&(ft=(Ue.target.y-Ue.target.op.y)/(Re-Ue.target.op.y)),Ue.target.controlType=="corner"?(e.scaleX=ft*Ze,e.scaleY=ft*be):(e.scaleX=Ue.target.cu=="e-resize"?ft*Ze:Ze,e.scaleY=Ue.target.cu=="n-resize"?ft*be:be),Je(),xt.x=Ue.stageX/t.scaX,xt.y=Ue.stageY/t.scaY,E&&(_t.x=Ue.stageX/t.scaX,_t.y=Ue.stageY/t.scaY),!O.ctrlKey||Ue.target.controlType=="side"){var Ht=Ue.target.op.parent.localToLocal(Ue.target.op.x,Ue.target.op.y,e.parent);e.x-=(Ht.x-nt.x)*t.sign(ye)*t.sign(e.scaleX),e.y-=(Ht.y-nt.y)*t.sign(H)*t.sign(e.scaleY)}if(Je(),e.transformControls.events){var Wt=Ue.target.controlType;qe(Ue,Wt)}}function Jt(Ue){var ft=Math.atan2(Ue.stageY/t.scaY-Qe,Ue.stageX/t.scaX-it)*180/Math.PI;if(O.shiftKey?e.rot(Math.round((we+(ft-Me)*t.sign(ye)*t.sign(e.scaleX))/45)*45):e.rot(we+(ft-Me)*t.sign(ye)*t.sign(e.scaleX)),Je(),xt.x=Ue.stageX/t.scaX,xt.y=Ue.stageY/t.scaY,E&&(e.getConcatenatedMatrix().decompose(ne),ne.rotation||(ne.rotation=0),Ae.rotation=ne.rotation*t.sign(ye*H)*t.sign(e.scaleX*e.scaleY)+ae[Ue.target.cu]+se,Ue.target.controlType!="side"&&ye*H<0&&(Ae.rotation+=90),_t.x=Ue.stageX/t.scaX,_t.y=Ue.stageY/t.scaY),Je(),e.transformControls.events){var Ht=Ue.target.controlType;qe(Ue,Ht,null,!1)}}function qt(Ue,ft){Ge();var Ht=Ue?Ue.target.controlType:"move";ft&&(Ht="reset"),E&&_t.removeFrom(F),qe(Ue,Ht,!0),F.update()}function qe(Ue,ft,Ht,Wt){Wt==null&&(Wt=!0);var ln=!1;ut=null,ft=="move"?((e.x!=fn.x||e.y!=fn.y)&&(ut=new Ne.Event("transformed"),ut.transformType="move"),Wt&&(ln=ce.hitTestPoint(Ue.stageX/t.scaX,Ue.stageY/t.scaY))):ft=="corner"?((e.scaleX!=fn.scaleX||e.scaleY!=fn.scaleY)&&(ut=new Ne.Event("transformed"),ut.transformType="size"),Wt&&(ln=Ee.hitTestPoint(Ue.stageX/t.scaX,Ue.stageY/t.scaY))):ft=="side"?((e.scaleX!=fn.scaleX||e.scaleY!=fn.scaleY)&&(ut=new Ne.Event("transformed"),ut.transformType="stretch"),Wt&&(ln=Q.hitTestPoint(Ue.stageX/t.scaX,Ue.stageY/t.scaY)||G.hitTestPoint(Ue.stageX/t.scaX,Ue.stageY/t.scaY))):ft=="rotate"?(e.rotation!=fn.rotation&&(ut=new Ne.Event("transformed"),ut.transformType="rotate"),Wt&&(ln=ue.hitTestPoint(Ue.stageX/t.scaX,Ue.stageY/t.scaY))):ft=="reg"?(e.regX!=fn.regX||e.regY!=fn.regY)&&(ut=new Ne.Event("transformed"),ut.transformType="reg"):ft=="reset"?(ut=new Ne.Event("transformed"),ut.transformType="reset"):(ut=new Ne.Event("transformed"),ut.transformType="unknown"),Wt&&!ln&&(xt.removeFrom(F),O.canvas.style.cur("default"),e.cursor=Mt),ut&&(ut.pressup=Ht,(e.type=="Tag"||e.type=="TextArea"||e.type=="Loader")&&e.resize(),e.dispatchEvent(ut))}function ht(Ue){ot||(xt.stage?F.setChildIndex(xt,F.getChildIndex(U)):xt.addTo(F,F.getChildIndex(U)+1),_t.addTo(F,1),xt.x=Ue.stageX/t.scaX,xt.y=Ue.stageY/t.scaY,_t.x=Ue.stageX/t.scaX,_t.y=Ue.stageY/t.scaY,e.getConcatenatedMatrix().decompose(ne),ne.rotation||(ne.rotation=0),Ae.rotation=ne.rotation*t.sign(ye*H)*t.sign(e.scaleX*e.scaleY)+ae[Ue.target.cu]+se,Ue.target.controlType!="side"&&ye*H<0&&(Ae.rotation+=90),F.update(),gt&&F.off("stagemousemove",gt),gt=F.on("stagemousemove",function(ft){xt.x=ft.stageX/t.scaX,xt.y=ft.stageY/t.scaY,F.update()}))}function st(){F.off("stagemousemove",gt),!ot&&(e.cursor=Mt,xt.removeFrom(F),_t.removeFrom(F),F.update())}function Ot(){if(C){var Ue=g.numChildren-1;g.getChildAt(Ue).type=="Keyboard"&&Ue--,g.setChildIndex(e,Ue),St()}}function St(){if(g==F)U.removeFrom(),F.addChildAt(U,F.getChildIndex(e)+1);else{for(var Ue=g;Ue.parent&&Ue.parent!=F;)Ue=Ue.parent;e.stage&&(U.parent==F&&F.removeChild(U),F.addChildAt(U,F.getChildIndex(Ue)+1))}}var Vt,Gt;o.drag(),o.on("mousedown",Ot),o.on("pressup",function(Ue){if(!O.ctrlKey){for(var ft=0;ft<ke.length;ft++)if(t.dist(o.x,o.y,ke[ft].x,ke[ft].y)<m){o.x=ke[ft].x,o.y=ke[ft].y;break}t.dist(o.x,o.y,$.x,$.y)<m&&(o.x=$.x,o.y=$.y)}var Ht=e.rotation;Vt=e.globalToLocal(o.x,o.y),g==F?Gt=new t.Point(o.x,o.y):Gt=g.globalToLocal(o.x,o.y),e.reg(Vt.x,Vt.y),e.rotation=0,e.x=e.x+Gt.x-e.x,e.y=e.y+Gt.y-e.y,e.rotation=Ht,Je(),oe(),qt(Ue),F.update()});var pt=!0;xe=E?"none":"move",ce.drag({overCursor:xe,dragCursor:xe,onTop:!1}),ce.controlType="move",E&&(ce.on("mouseover",Zt),ce.on("mouseout",bt));function bt(){F.off("stagemousemove",ze),!ot&&(ge.removeFrom(U),F.update())}function Zt(Ue){ot||!E||!pt||(ge.addTo(U).pos({x:Ue.stageX/t.scaX,y:Ue.stageY/t.scaY,reg:!0}),F.update(),ze&&F.off("stagemousemove",ze),ze=F.on("stagemousemove",function(ft){ge.x=ft.stageX/t.scaX,ge.y=ft.stageY/t.scaY,F.update()}))}ce.on("mousedown",Ot),ce.on("pressmove",function(Ue){if(e.transformControls.visible){var ft;if(g==F?ft=new t.Point(ce.x,ce.y):ft=g.globalToLocal(ce.x,ce.y),e.x=ft.x,e.y=ft.y,Je(),e.transformControls.events){var Ht="move";qe(Ue,Ht)}}}),ce.on("pressup",function(Ue){e.transformControls.visible&&qt(Ue)});var Xt=F.on("stagemouseup",function(){ot=!1,ce.mouseEnabled=!0,pt||(ut=new Ne.Event("transformed"),e.x!=fn.x||e.y!=fn.y?ut.transformType="move":ut.transformType="select",ut.pressup=!0,e.dispatchEvent(ut)),pt=!0,ce.visible=!0,tt&&!O.ctrlKey&&S>1&&(e.rotation=Math.round(e.rotation/S)*S,Je()),oe(),ce.mouseEnabled=!0,tt=!1,F.update()});function tn(){fn={x:e.x,y:e.y,rotation:e.rotation,regX:e.regX,regY:e.regY,scaleX:e.scaleX,scaleY:e.scaleY}}var fn;tn();var an=e.on("mousedown",tn);U.on("mousedown",tn),U.addChild(u),r&&U.addChild(ce),a&&U.addChild(Ee),i&&U.addChild(Q),l&&U.addChild(G),s&&U.addChild(ue),U.addChild(o);var Kt;r&&(e.drag({overCursor:"pointer",dragCursor:"pointer",onTop:!1,removeTweens:!1}),Kt=e.on("pressmove",function(Ue){if(Je(),oe(),Ge(),e.transformControls.events){var ft="move";qe(Ue,ft)}}));var Ct=c;return e.transformControls={visible:d,events:Y,ghost:!n(B),ghostEnabled:!n(B),show:function(){return C&&Ot(),St(),e.toggled=!0,e.transformControls.visible=!0,f.parent&&f.removeFrom(),F.update(),e},hide:function(){if(e.transformControls.ghost)var Ue=F.getChildIndex(U);return F.removeChild(U),e.transformControls.ghost&&e.transformControls.ghostEnabled&&F.addChildAt(f,Ue),e.toggled=!1,e.transformControls.visible=!1,E&&(gt&&F.off("stagemousemove",gt),ze&&F.off("stagemousemove",ze),ot=!1,xt.removeFrom(F),_t.removeFrom(F)),r||e.cur(Mt),F.update(),e},remove:function(Ue){Ue||e.transformControls.hide(),c=!1,r&&(e.noDrag(),e.off("pressmove",Kt))},add:function(Ue){Ue||e.transformControls.show(),c=Ct,r&&(e.drag({overCursor:"pointer",dragCursor:"pointer",onTop:!1,removeTweens:!1}),Kt=e.on("pressmove",Kt))},allowToggleOn:function(){c=Ct=!0,_e=U.on("mousedown",_e),je=e.on("mousedown",je),De=F.on("stagemousedown",De)},allowToggleOff:function(){c=Ct=!1,U.off("mousedown",_e),e.off("mousedown",je),F.off("stagemousedown",De)},disable:function(){U.mouseChildren=!1,U.mouseEnabled=!1,r&&(e.noDrag(),e.off("pressmove",Kt))},enable:function(){U.mouseChildren=!0,U.mouseEnabled=!0,r&&(e.drag({overCursor:"pointer",dragCursor:"pointer",onTop:!1,removeTweens:!1}),Kt=e.on("pressmove",Kt))},recordData:function(Ue){var ft={type:e.type,index:g.getChildIndex(e),x:e.x,y:e.y,scaleX:e.scaleX,scaleY:e.scaleY,rotation:e.rotation,skewX:e.skewX,skewY:e.skewY,regX:e.regX,regY:e.regY,controls:e.transformControls.visible};return Ue?JSON.stringify(ft):ft},setData:function(Ue,ft){if(!n(Ue)){ft&&(Ue=JSON.parse(Ue)),delete Ue.controls;var Ht=Ue.index;n(Ht)&&(Ht=0),delete Ue.index;for(var Wt in Ue)e[Wt]=Ue[Wt];return setTimeout(function(){Je(),oe(),Ge(),g.setChildIndex(e,Ht),e.transformControls.visible&&e.type!="Layer"?e.transformControls.show():e.transformControls.hide(),e.transformControls.ghost&&!e.transformControls.ghostEnabled&&!e.transformControls.visible&&F.addChild(f)},90),e}},hideGhost:function(){e.transformControls.ghost=!1,f.removeFrom()},showGhost:function(){if(e.transformControls.ghost=!0,e.transformControls.ghostEnabled&&!e.transformControls.visible){for(var Ue=g;Ue.parent&&Ue.parent!=F;)Ue=Ue.parent;f.stage?F.setChildIndex(f,F.getChildIndex(Ue)+1):F.addChildAt(f,F.getChildIndex(Ue)+1)}},addGhost:function(){b>0?(e.transformControls.ghostEnabled=!0,e.transformControls.showGhost()):dt&&$e("transform() - ghostWidth must be > 0 when making transform")},removeGhost:function(){e.transformControls.ghostEnabled=!1,e.transformControls.hideGhost()},resize:function(Ue){if(g=e.parent,Je(),oe(),Ge(),d&&e.transformControls.show(),Ue){var ft=new Ne.Event("transformed");ft.pressup=!0,ft.transformType="resize",e.dispatchEvent(ft)}return e},dispose:function(){e.transformControls.hide(),c=!1,r&&(e.noDrag(),e.off("pressmove",Kt)),e.transformControls.hideGhost(),ce.removeAllEventListeners(),ue.removeAllEventListeners(),o.removeAllEventListeners(),Q.removeAllEventListeners(),G.removeAllEventListeners(),Ee.removeAllEventListeners(),U.removeAllEventListeners(),je&&e.off("mousedown",je),_e&&e.off("mousedown",_e),De&&F.off("stagemousedown",De),gt&&F.off("stagemousemove",gt),ze&&F.off("stagemousemove",ze),Xt&&F.off("stagemouseup",Xt),an&&e.off("mousedown",an),Kt&&e.off("pressmove",Kt),U=xt=_t=null,e.transformControls=null},controls:U,scaleControls:Ee,stretchXControls:Q,stretchYControls:G,rotateControls:ue},e.toggle=function(Ue){return Ue===!0?e.transformControls.show():Ue===!1||e.transformControls.visible?e.transformControls.hide():e.transformControls.show(),e},e.transformControls.ghost&&(e.transformControls.toggleGhost=function(Ue){return Ue===!0?e.transformControls.showGhost():Ue===!1||e.transformControls.visible?e.transformControls.hideGhost():e.transformControls.showGhost(),e}),d?e.transformControls.show():!V&&e.transformControls.ghost&&e.transformControls.showGhost(),e},t.gesture=function(e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P){var x="obj, move, scale, rotate, boundary, minScale, maxScale, snapRotate, localBoundary, slide, slideFactor, regControl, onTop, surround, circularBounds, rect",E;if(E=lt(t.gesture,arguments,x))return E;if(Le("34.5"),n(e)||!e.on)return;n(r)&&(r=!0),n(i)&&(i=!0),n(l)&&(l=!0),n(C)&&(C=!1),n(d)&&(d=1),n(T)&&(T=!1),n(h)&&(h=5),n(w)&&(w=!1),n(A)&&(A=!0),n(y)&&(y=!1),y&&l&&(y=P=null,dt&&$e("gesture() - does not support surround when rotate is true")),n(v)&&(v=!1),n(a)&&!n(P)&&(a=P);var k,p,m,S,_=Tt();if(n(e.zimMaskDynamic)||e.zimMaskApply(),!e.zimTouch){var Y=new t.Damp(e.scaleX,.05),B=new t.Damp(e.scaleY,.05),b=e.scaleX/e.scaleY;if(e.zimTouch={move:r,scale:i,rotate:l,pointers:{},checkBounds:function(o,g){if(e.zimTouch.boundary){var q=e.zimTouch.boundary,I=e.parent.localToLocal(o,g,e.parent);y?(o=Math.min(q.x,Math.max(q.x+q.width,I.x)),g=Math.min(q.y,Math.max(q.y+q.height,I.y))):(o=Math.max(q.x,Math.min(q.x+q.width,I.x)),g=Math.max(q.y,Math.min(q.y+q.height,I.y))),I=e.parent.globalToLocal(o,g),o=I.x,g=I.y}return{x:o,y:g}}},a){e.zimTouch.boundary=a,C&&(e.zimTouch.boundary=t.boundsToGlobal(e.parent,a)),e.zimTouch.boundaryStartX=e.zimTouch.boundary.x,e.zimTouch.boundaryStartY=e.zimTouch.boundary.y,e.zimTouch.boundaryStartW=e.zimTouch.boundary.width,e.zimTouch.boundaryStartH=e.zimTouch.boundary.height;var X=e.zimTouch.checkBounds(e.x,e.y);e.x=X.x,e.y=X.y}T&&(m=10,S=5,p=0,k=[],e.zimTouch.slideInterval=t.interval(m/(_=="s"?1e3:1),function(){k[p++%S]=[e.x,e.y]}),e.zimTouch.slideInterval.pause(),e.animate({x:e.x,y:e.y},10/(_=="s"?1e3:1),"quadOut"));var V,O,Z,W,K,ne,F,D;e.zimTouch.mousedown=e.on("mousedown",function(o){if(n(D)?D=1:D++,A){var g=e.parent.numChildren-1;e.parent.getChildAt(g).type=="Keyboard"&&g--,e.parent.setChildIndex(e,g),e.ZIMoutlineShape&&e.outline()}w||(F=null,O=e.scaleX,Z=e.scaleY,W=e.rotation,K=e.regX,ne=e.regY,e.reg(0,0),V=e.getMatrix(),e.regX=K,e.regY=ne);var q="id"+Math.abs(o.pointerID+1),I=e.parent.globalToLocal(o.stageX/t.scaX,o.stageY/t.scaY);e.zimTouch.pointers[q]={startX:I.x,startY:I.y,x:I.x,y:I.y},(e.zimTouch.move||e.zimTouch.rotate)&&(e.zimTouch.total=0,t.loop(e.zimTouch.pointers,function(){e.zimTouch.total++})),T&&e.zimTouch.total==1&&e.zimTouch.slideInterval.pause(!1),u()}),e.zimTouch.pressmove=e.on("pressmove",function(o){var g="id"+Math.abs(o.pointerID+1),q=e.parent.globalToLocal(o.stageX/t.scaX,o.stageY/t.scaY);e.zimTouch.pointers[g]&&(e.zimTouch.pointers[g].x=q.x,e.zimTouch.pointers[g].y=q.y);var I=0,R=0,le=0,N=0,L=0,ee=0;if(t.loop(e.zimTouch.pointers,function(ge,Ae){I+=Ae.x-Ae.startX,R+=Ae.y-Ae.startY,le+=Ae.x,N+=Ae.y}),e.zimTouch.total!=0){L=I/e.zimTouch.total,ee=R/e.zimTouch.total,I=e.zimTouch.startX+L,R=e.zimTouch.startY+ee,le=le/e.zimTouch.total,N=N/e.zimTouch.total;var z={x:e.x,y:e.y,scaleX:e.scaleX,scaleY:e.scaleY,rotation:e.rotation};if(e.zimTouch.move){var $=e.zimTouch.checkBounds(I,R);z.x=$.x,z.y=$.y}if(e.zimTouch.pair.length==2){var xe=e.zimTouch.pair[0],ie=e.zimTouch.pair[1];if(e.zimTouch.scale){var ke=Math.sqrt(Math.pow(ie.startX-xe.startX,2)+Math.pow(ie.startY-xe.startY,2)),U=Math.sqrt(Math.pow(ie.x-xe.x,2)+Math.pow(ie.y-xe.y,2)),Ee=e.zimTouch.startSX+(U/ke-1),Q=e.zimTouch.startSY+(U/ke-1);z.scaleX=Ee,z.scaleY=Q,z.scaleX=Y.convert(Ee),z.scaleY=B.convert(Q);var G=!n(s)&&Math.min(Ee,Q)<s,ue=!n(c)&&Math.max(Ee,Q)>c;(G||ue)&&(G?b>1?(z.scaleY=s,z.scaleX=s*b):(z.scaleX=s,z.scaleY=s/b):ue&&(b>1?(z.scaleX=c,z.scaleY=c/b):(z.scaleY=c,z.scaleX=c*b)),Y.immediate(z.scaleX),B.immediate(z.scaleY))}if(e.zimTouch.rotate){var fe=Math.atan2(xe.startY-ie.startY,xe.startX-ie.startX)*(180/Math.PI),ye=Math.atan2(xe.y-ie.y,xe.x-ie.x)*(180/Math.PI),H=ye-fe;z.rotation=e.zimTouch.startR+H}if(w)e.scaleX=z.scaleX,e.scaleY=z.scaleY,e.rotation=z.rotation,e.zimTouch.move&&(e.x=z.x,e.y=z.y);else{e.reg(0,0);var re=e.parent.localToGlobal(le,N);le=re.x,N=re.y;var pe=n(F)?e.globalToLocal(le,N):e.globalToLocal(F.x,F.y),te=V.clone().translate(pe.x,pe.y).rotate(z.rotation-W).scale(z.scaleX/O,z.scaleY/Z).translate(-pe.x,-pe.y);te.decompose(e),e.zimTouch.move&&(e.x+=L,e.y+=ee),F=e.localToGlobal(pe.x,pe.y),e.reg(K,ne)}e.zimTouch.scale&&e.dispatchEvent("scale"),e.zimTouch.rotate&&e.dispatchEvent("rotate"),e.zimTouch.move&&e.dispatchEvent("move")}else e.x=z.x,e.y=z.y,e.zimTouch.move&&e.dispatchEvent("move");(e.type=="Tag"||e.type=="TextArea"||e.type=="Loader")&&e.resize(),e.ZIMoutlineShape&&e.outline(),e.getStage&&e.stage&&e.stage.update()}}),e.on("mousedown",function(){var o=1;e.stage.on("stagemousedown",function(){o++}),e.stage.on("stagemouseup",function(){o--,o==0&&setTimeout(function(){e.zimTouch&&(e.zimTouch.total=0),e.zimTouch&&(e.zimTouch.pointers={}),D=null},50)})},null,!0),e.zimTouch.pressup=e.on("pressup",function(o){var g="id"+Math.abs(o.pointerID+1);if(delete e.zimTouch.pointers[g],(e.zimTouch.move||e.zimTouch.rotate)&&e.zimTouch.total--,l&&!n(d)&&e.zimTouch.total==0&&(d>0?e.rotation=Math.round(e.rotation/d)*d:d==0&&(e.rotation=Math.round(e.rotation))),T&&e.zimTouch.total==0&&D==1){e.zimTouch.slideInterval.pause();var q=k[(p+1)%k.length],I=k[p%k.length],R=e.x+(q[0]-I[0])*h,le=e.y+(q[1]-I[1])*h,N=e.zimTouch.checkBounds(R,le),L=S*m*h*Math.min((e.x-N.x)/(e.x-R)||1,(e.y-N.y)/(e.y-le)||1);e.animate({x:N.x,y:N.y},L/(_=="s"?1e3:1),"quadOut",function(){e.dispatchEvent("slidestop")})}e.zimTouch.total==0&&(D=null),e.getStage&&e.stage&&e.stage.update(),u()}),a&&(f(),e.on("move",f))}function u(){e.zimTouch.pair=[],t.loop(e.zimTouch.pointers,function(o,g,q){g.startX=g.x,g.startY=g.y,q<=1&&e.zimTouch.pair.push(g)}),e.zimTouch.startX=e.x,e.zimTouch.startY=e.y,e.zimTouch.startSX=e.scaleX,e.zimTouch.startSY=e.scaleY,e.zimTouch.startR=e.rotation}function f(){var o=e.localToGlobal(e.regX,e.regY),g;if(v){var q=e.parent.localToGlobal(e.x-e.width/2,e.y-e.height/2),I=e.parent.localToGlobal(e.x+e.width/2,e.y+e.height/2);g={x:q.x,y:q.y,width:I.x-q.x,height:I.y-q.y}}else g=e.boundsToGlobal();var R={x:e.zimTouch.boundaryStartX+o.x-g.x,y:e.zimTouch.boundaryStartY+o.y-g.y,width:e.zimTouch.boundaryStartW-g.width,height:e.zimTouch.boundaryStartH-g.height};e.gestureBoundary(R,!1)}return e},t.noGesture=function(e,r,i,l){var a="obj, move, scale, rotate",s;if(s=lt(t.noGesture,arguments,a))return s;if(Le("34.6"),!(n(e)||!e.on||!e.zimTouch))return n(r)&&(r=!0),n(i)&&(i=!0),n(l)&&(l=!0),e.zimTouch.move=!r,e.zimTouch.scale=!i,e.zimTouch.rotate=!l,!e.zimTouch.move&&!e.zimTouch.scale&&!e.zimTouch.rotate&&(e.off("mousedown",e.zimTouch.mousedown),e.off("pressmove",e.zimTouch.pressmove),e.off("pressup",e.zimTouch.pressup),delete e.zimTouch),e},t.gestureBoundary=function(e,r,i){if(Le("34.7"),!(n(e)||!e.on)&&!(n(r)||!e.zimTouch)){e.zimTouch.localBoundary&&e.parent?e.zimTouch.boundary=t.boundsToGlobal(e.parent,r):e.zimTouch.boundary=r,n(i)&&(i=!0),i&&(e.zimTouch.boundaryStartX=r.x,e.zimTouch.boundaryStartY=r.y,e.zimTouch.boundaryStartW=r.width,e.zimTouch.boundaryStartH=r.height);var l=e.zimTouch.checkBounds(e.x,e.y);return e.x=l.x,e.y=l.y,e}},t.effect=function(e,r,i,l,a,s){if(Le("33.16"),n(r))return e;n(e.effects)&&(e.effects={}),Array.isArray(r)||(r=[r]);for(var c=0,d=0;d<r.length;d++){var C=r[d];C.type||(C instanceof Ne.BlurFilter?C.type="BlurEffect":C instanceof Ne.ColorFilter?C.type="ColorEffect":C instanceof Ne.AlphaMaskFilter?C.type="AlphaEffect":C instanceof Ne.ColorMatrixFilter?C.type="MultiEffect":n(C.type)&&(C.type="custom"+c++));var T=C.type.replace(/effect/i,"");e.effects[T.toLowerCase()]=C}e.filters=[];for(var h in e.effects)e.filters.push(e.effects[h]);return e.cache(i,l,a,s),e},t.updateEffects=function(e,r){return Le("33.163"),e.updateCache&&(r?e.cache():e.updateCache()),e},t.noEffect=function(e,r,i){if(Le("33.165"),n(i)&&(i=!1),n(r)){var l;e.effects.multi&&(l=e.effects.multi),e.effects={},l&&(e.effects.multi=l)}else{e.effects||(e.effects={}),Array.isArray(r)||(r=[r]);for(var a=0;a<r.length;a++){var s=r[a].replace(/effect/i,"");delete e.effects[s.toLowerCase()]}}e.filters=[];for(var c in e.effects)e.filters.push(e.effects[c]);return i||e.filters.length>0?e.updateCache&&e.updateCache():e.uncache&&e.uncache(),e},t.addPhysics=function(e,r,i,l,a,s,c,d,C,T,h,w,A,y){var v="obj, dynamic, contract, shape, friction, linear, angular, density, bounciness, maskBits, categoryBits, physics, restitution, sensor",P;if(P=lt(t.addPhysics,arguments,v))return P;if(Le("34.8"),n(w)){if(typeof zimPhysics>"u")return dt&&$e("ZIM Physics module must be imported"),e;n(j.zimDefaultPhysics)&&(j.zimDefaultPhysics=new t.Physics),w=j.zimDefaultPhysics}e.physics=w;var x="rectangle";return e.type=="Circle"||e.type=="Dial"?x="circle":e.type=="Triangle"?x="triangle":e.type=="Blob"&&(x="poly"),n(l)&&(l=x),n(C)&&(C=A),We(e,r,i,l,a,s,c,d,C,T,h,y),e},t.removePhysics=function(e){return Le("34.85"),n(e.physics)||(e==e.physics.followObj&&e.physics.follow(null),e.follow=e.noFollow=e.control=e.noControl=e.sleep=e.wake=null,e.impulse=e.force=e.spin=e.torque=null,e.physics.remove(e.body),e.physics=null),e},t.hitTestPoint=function(e,r,i,l){if(t.zimhtp||(Le("35"),t.zimhtp=!0),!e.stage||n(r)||n(i))return!1;if(!(n(e)||!e.globalToLocal)){if(n(l)&&(l=!0),l){var a=e.getBounds();if(a){var s=e.globalToLocal(r,i);if(s.x>a.x+a.width||s.x<a.x||s.y>a.y+a.height||s.y<a.y)return!1}}var c={x:r,y:i};return e.image||e.spriteSheet||e.type=="Shape"?c=e.globalToLocal(c.x,c.y):c=e.globalToLocal(c.x*t.scaX,c.y*t.scaY),e.hitTest(c.x,c.y)}},t.hitTestReg=function(e,r,i){if(t.zimhtr||(Le("36"),t.zimhtr=!0),!e.stage||!r.stage)return!1;if(!(n(e)||n(r)||!e.localToLocal||!r.localToLocal)){n(i)&&(i=!0);var l=r.localToGlobal(r.regX,r.regY),a=e.getBounds();if(i&&a){var s=e.globalToLocal(l.x,l.y);if(s.x>a.x+a.width||s.x<a.x||s.y>a.y+a.height||s.y<a.y)return!1}return e.image||e.spriteSheet||e.type=="Shape"?l=e.globalToLocal(l.x,l.y):l=e.globalToLocal(l.x*t.scaX,l.y*t.scaY),e.hitTest(l.x,l.y)}},t.hitTestRect=function(e,r,i,l,a){if(t.zimhtr||(Le("37"),t.zimhtr=!0),!e.stage||!r.stage)return!1;if(n(e)||n(r)||!e.hitTest||!r.getBounds)return;n(i)&&(i=0),n(l)&&(l=!0);var s=r.getBounds();if(!s){dt&&$e(`hitTestRect():
 please setBounds() on param b object`);return}if(l){var c=e.getBounds();if(c&&!t.hitTestBounds(e,r))return!1}function d(v){if(e.image||e.spriteSheet||e.type=="Shape"?v=e.globalToLocal(v.x,v.y):v=e.globalToLocal(v.x*t.scaX,v.y*t.scaY),e.hitTest(v.x,v.y))return!0}var C=s.x+s.width/2,T=s.y+s.height/2,h=r.localToGlobal(C,T),w,A;if(a){if(!d(h))return!1;for(var y=0;y<=i;y++)if(w=s.width*(y+1)/(i+1),A=s.height*(y+1)/(i+1),h=r.localToGlobal(s.x+w,s.y),!d(h)||(h=r.localToGlobal(s.x+s.width,s.y+A),!d(h))||(h=r.localToGlobal(s.x+s.width-w,s.y+s.height),!d(h))||(h=r.localToGlobal(s.x,s.y+s.height-A),!d(h)))return!1;return!0}else{if(d(h))return!0;for(var y=0;y<=i;y++)if(w=s.width*(y+1)/(i+1),A=s.height*(y+1)/(i+1),h=r.localToGlobal(s.x+w,s.y),d(h)||(h=r.localToGlobal(s.x+s.width,s.y+A),d(h))||(h=r.localToGlobal(s.x+s.width-w,s.y+s.height),d(h))||(h=r.localToGlobal(s.x,s.y+s.height-A),d(h)))return!0}},t.hitTestCircle=function(e,r,i,l,a){if(t.zimhtc||(Le("38"),t.zimhtr=!0),Le("38"),!e.stage||!r.stage||n(e)||n(r)||!e.hitTest||!r.getBounds)return;n(i)&&(i=8),n(l)&&(l=!0);var s=r.getBounds();if(!s){dt&&$e(`hitTestCircle():
 please setBounds() on param b object`);return}var c=e.getBounds();if(l&&c&&!t.hitTestBounds(e,r))return!1;function d(x){if(e.image||e.spriteSheet||e.type=="Shape"?x=e.globalToLocal(x.x,x.y):x=e.globalToLocal(x.x*t.scaX,x.y*t.scaY),e.hitTest(x.x,x.y))return!0}var C=s.x+s.width/2,T=s.y+s.height/2,h=r.localToGlobal(C,T),w=(s.width+s.height)/2/2,A,y,v;if(a){if(!d(h))return!1;for(var P=0;P<i;P++)if(A=P/i*2*Math.PI,y=C+w*Math.cos(A),v=T+w*Math.sin(A),h=r.localToGlobal(y,v),!d(h))return!1;return!0}else{if(d(h))return!0;for(var P=0;P<i;P++)if(A=P/i*2*Math.PI,y=C+w*Math.cos(A),v=T+w*Math.sin(A),h=r.localToGlobal(y,v),d(h))return!0}return!1},t.hitTestCircleRect=function(e,r,i){if(t.zimhtcr||(Le("38.2"),t.zimhtcr=!0),!(!e.stage||!r.stage)){var l=e.stage;if(!(n(e)||n(r)||!e.getBounds||!r.getBounds)){var a=e.getBounds(),s=r.getBounds();if(!a||!s){dt&&$e(`hitTestCircleRect():
 please setBounds() on both objects`);return}n(i)&&(i=0);var c=(e.radius?e.radius:(a.width+a.height)/2)+i,d=e.getConcatenatedMatrix().decompose().scaleX;c*=d/l.scaleX;var C=r.boundsToGlobal(),T=e.localToGlobal(0,0),h=T.x,w=T.y,A=C.x,y=C.y,v=C.x+C.width,P=C.y+C.height,x=h<A?A:h>v?v:h,E=w<y?y:w>P?P:w,k=x-h,p=E-w;return k*k+p*p<=c*c}}},t.hitTestCircles=function(e,r,i){if(t.zimhtcs||(Le("38.5"),t.zimhtcs=!0),!(!e.stage||!r.stage)){var l=e.stage;if(!(n(e)||n(r)||!e.hitTest||!e.getBounds||!r.getBounds)){var a=e.getBounds(),s=r.getBounds();if(!a||!s){dt&&$e(`hitTestCircles():
 please setBounds() on both objects`);return}n(i)&&(i=0);var c=e.localToGlobal(a.x+a.width/2,a.y+a.height/2),d=r.localToGlobal(s.x+s.width/2,s.y+s.height/2),C=e.getConcatenatedMatrix(),T=r.getConcatenatedMatrix(),h=Math.sqrt(C.a/l.scaleX*C.a/l.scaleX+C.c/l.scaleX*C.c/l.scaleX),w=Math.sqrt(C.b/l.scaleY*C.b/l.scaleY+C.d/l.scaleY*C.d/l.scaleY),A=Math.sqrt(T.a/l.scaleX*T.a/l.scaleX+T.c/l.scaleX*T.c/l.scaleX),y=Math.sqrt(T.b/l.scaleY*T.b/l.scaleY+T.d/l.scaleY*T.d/l.scaleY),v=Math.sqrt(Math.abs(Math.pow(c.x-d.x,2)+Math.pow(c.y-d.y,2)));return a.width*Math.max(h,w)/2+s.width*Math.max(A,y)/2>=v-i}}},t.hitTestBounds=function(e,r,i,l){if(t.zimhtb||(Le("39"),t.zimhtb=!0),!(!e.stage||!r.stage)&&!(n(e)||n(r)||!e.getBounds||!r.getBounds)){var a=!1;l&&l.graphics&&(a=!0);var s=e.getBounds(),c=r.getBounds();if(!s||!c){dt&&$e(`hitTestBounds():
 please setBounds() on both objects`);return}n(i)&&(i=0);var d=t.boundsToGlobal(e),C=t.boundsToGlobal(r);if(a){var T=l.graphics;T.c(),T.ss(1).s("blue"),T.r(d.x,d.y,d.width,d.height),T.s("green"),T.r(C.x,C.y,C.width,C.height),l.stage.update()}return t.rectIntersect(d,C,i)}},t.hitTestPath=function(e,r,i,l,a,s){if(t.zimhtpa||(Le("37.5"),t.zimhtpa=!0),!e.stage||!r.stage||n(e)||n(r)||!e.hitTest||r.type!="Squiggle"&&r.type!="Blob")return;var c=e.getBounds();n(i)&&(i=2),n(l)&&(l=!1),n(a)&&(a=!1),n(s)&&(s=!1);var d=[],C;function T(v){var P;if(e.image||e.spriteSheet||e.type=="Shape"?P=e.globalToLocal(v.x,v.y):P=e.globalToLocal(v.x*t.scaX,v.y*t.scaY),e.hitTest(P.x,P.y))if(a)d.push({x:Math.round(v.x),y:Math.round(v.y)});else if(s)C=w/h.length*100;else return!0}var h=r.interpolate(i,null,!0,null,!0),w,A;if(l)for(r.hitPathPoints?r.hitPathPoints.removeAllChildren():r.hitPathPoints=new t.Container().addTo(),r.hitPathPoints.top(),w=0;w<h.length;w++)A=h[w],A=r.localToGlobal(A.x,A.y),new t.Circle(3).loc(A.x,A.y,r.hitPathPoints);if(c){var y=t.boundsAroundPoints(h);if(!t.rectIntersect(e.boundsToGlobal(c),r.boundsToGlobal(y)))return!1}for(w=0;w<h.length;w++){if(A=h[w],A=r.localToGlobal(A.x,A.y),T(A))return!0;if(C!=null)return C}return d.length>0?d:!1},t.hitTestGrid=function(e,r,i,l,a,s,c,d,C,T,h,w,A){if(t.zimhtg||(Le("41"),t.zimhtg=!0),!e.stage)return!1;if(!n(e)&&!w){var y=e.globalToLocal(s,c);s=y.x,c=y.y}n(d)&&(d=0),n(C)&&(C=0),n(T)&&(T=0),n(h)&&(h=0),r+=T,i+=h;var v=r/l,P=i/a,x=Math.min(l-1,Math.max(0,Math.floor((s-d+T/2)/v))),E=Math.min(a-1,Math.max(0,Math.floor((c-C+h/2)/P)));if(!(A!="open"&&(s-d>v*(x+1)-T||s-d<v*x||c-C>P*(E+1)-h||c-C<P*E))){var k=E*l+x;if(n(A)||A=="index")return k;if(A=="col")return x;if(A=="row")return E;if(A=="array"||A=="open")return[k,x,E]}},t.animate=function(e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,x,E,k,p,m,S,_,Y,B,b,X,V,O,Z,W,K,ne,F,D,u,f,o,g,q,I,R,le,N,L,ee,z,$,xe,ie,ke,U,Ee,Q){var G="target, props, time, ease, call, params, wait, waitedCall, waitedParams, loop, loopCount, loopWait, loopCall, loopParams, loopWaitCall, loopWaitParams, loopPick, rewind, rewindWait, rewindCall, rewindParams, rewindWaitCall, rewindWaitParams, rewindTime, rewindEase, sequence, sequenceCall, sequenceParams, sequenceReverse, ticker, cjsProps, css, protect, override, from, set, id, events, sequenceTarget, dynamic, drag, clamp, startPaused, clean, obj, seriesWait, sequenceWait, rate, pauseOnBlur, easeAmount, easeFrequency, timeUnit, timeCheck, noAnimateCall";if(e&&(e.props||e.obj)){var ue;if(ue=lt(t.animate,arguments,G))return ue}if(e.type=="AC"&&j.zdf)return j.zdf.ac("animate",arguments),e;if(t.animateCheck||(Le("45"),t.animateCheck=!0),!e)return;var fe=t.ANIMATE;if(j.ANIMATE!=null&&(fe=j.ANIMATE),!fe)return n(Q)&&(Q=!0),a&&Q&&typeof a=="function"&&a(n(s)?e:s),e;n(Ee)&&(Ee=!0);var ye=Tt(null,U,null,null,n(Ee)?!1:!Ee);(h||A||w)&&(T=!0),(Y||p||Y||B||k)&&(E=!0);var H,re,pe,te=arguments,ge=Array.prototype.slice.call(arguments);if(n(r)&&!n(L)&&(r=L),L=r,n(L))return dt&&$e("animate() - need props"),e;if(e.type=="BeadsContainer"&&n(b)&&(b=0),e.type=="Tone"&&(xe=!1),xe===!1?t.pauseAnimateOnBlur=!1:(xe||n(xe)&&t.pauseAnimateOnBlur!==!1)&&(n(t.blurCheck)&&t.setBlurDetect(),t.pauseAnimateOnBlur=!0),!(!n(b)&&e.addChild)){i=t.Pick.choose(i),l=t.Pick.choose(l),c=t.Pick.choose(c),h=t.Pick.choose(h),w=t.Pick.choose(w),E=t.Pick.choose(E),k=t.Pick.choose(k),n(Y)?Y=i:Y=t.Pick.choose(Y),O=t.Pick.choose(O),D=t.Pick.choose(D),u=t.Pick.choose(u);var Ae=["loopCount","loopWait","rewind","rewindWait"];for(re in W)Ae.indexOf(re)>=0&&(W[re]=t.Pick.choose(W[re]))}var ae={override:!n(e)&&!n(e.zimX)&&!n(L.x)||!n(e)&&!n(e.zimY)&&!n(L.y)};n(T)||(ae.loop=T),n(h)||(ae.count=h),n(w)||(ae.loopWait=w),n(A)||(ae.loopCall=A),n(P)||(ae.loopWaitParams=P),n(v)||(ae.loopWaitCall=v),n(y)||(ae.loopParams=y),n(x)||(ae.loopPick=x),n(E)||(ae.rewind=E),n(k)||(ae.rewindWait=k),n(p)||(ae.rewindCall=p),n(m)||(ae.rewindParams=m),n(S)||(ae.rewindWaitCall=S),n(_)||(ae.rewindWaitParams=_),n(r)||(ae=t.merge(ae,W)),W=ae,t.loop(L,function(Pe,rt){if(typeof Pe=="string"){var ct=Pe.split(".");if(ct.length>1&&Pe.substr(0,1)!="."&&(L["."+Pe]=rt,delete L[Pe],Pe="."+Pe),ct.length>1&&typeof rt=="string"){var yt=rt.substr(0,1);yt!="+"&&yt!="-"&&(L[Pe]="+"+rt)}}});function de(Pe,rt){if(rt.substr(0,1)=="."){for(var ct=rt.split("."),yt=Pe,Lt=1;Lt<ct.length;Lt++)yt=yt[ct[Lt]];return yt}else return rt=="transform"&&Pe.style?Pe.style.transform:Pe[rt]}function se(Pe,rt,ct){if(rt.substr(0,1)=="."){for(var yt=rt.split("."),Lt=Pe,Rt=1;Rt<yt.length-1;Rt++)Lt=Lt[yt[Rt]];Lt[yt[yt.length-1]]=ct}else Pe[rt]=ct}if(e.zimTweenOriginals={},!n(b)&&e.addChild){var Ie=[];for(H=0;H<e.numChildren;H++)Ie.push(e.getChildAt(H));g=e,e=Ie}var Te=["extra","zoom","speed","layer","fade"],ve={zoom:e.type=="Pen"?"size":"scale",speed:"percentSpeed",layer:"layer",fade:"alpha"};if(e instanceof Array){for(O&&e.reverse(),H=0;H<e.length;H++){var J=e[H];if(D){var Se;J.zimObj={};for(re in L){if(Te.indexOf(re)>=0?Se=L[re]:Se=t.Pick.choose(L[re]),J.zimObj[re]=J[re],typeof Se=="string"&&re!="transform"){var Be;J.zimLastObj&&!n(J.zimLastObj[re])?Be=J.zimLastObj[re]:Be=J[re],Se=Be+Number(Se.replace(/\s/g,""))}J.zimLastObj&&(J.zimLastObj[re]=E?J.zimTweenOriginals[re]:L[re]),J[re]=Se}}else{J.zimObj={};for(re in L)Te.indexOf(re)>=0,J.zimObj[re]=L[re]}var Ye=H*b;H==0&&b!=0&&(Ye=ye=="s"?.02:20),t.animate(J,J.zimObj,i,l,H==e.length-1?a:null,H==e.length-1?s:null,c,d,C,null,null,null,null,null,null,null,x,null,null,null,null,null,null,Y,B,null,X,V,null,Z,t.copy(W),K,ne,F,null,u,f,o,g,q,I,R,le,N,L,ee,Ye,$,xe,ie,ke,U,Ee,Q)}return g}var Ke=i,at=Y;n(Ke)&&(Ke=ye=="s"?1:1e3),n(Y)&&(Y=at=Ke),n(l)&&(l="quadInOut"),n(c)&&(c=0),n(k)&&(k=0),n(W)&&(W={override:!n(e.zimX)&&!n(L.x)||!n(e.zimY)&&!n(L.y)}),n(s)&&(s=e),n(Z)&&(Z=!0),n(K)&&(K=!1),n(ne)&&(ne=!1),n(D)&&(D=!1),n(u)&&(u={}),u.scale&&(u.scaleX=u.scaleY=u.scale,delete u.scale),n(F)||(W.override=F),n(I)&&(I=!1),n(le)&&(le=!!I),n(q)&&(q=!1),n(R)&&(R=!0),n(N)&&(N=!0),n($)&&($=1),e.futureRate=$;var me,Ge,Je;if(L instanceof Array){if(pe=1,L.length==0)return this;var ce,oe;return Ve(),ze(),_e(),e}function _e(){e.zimLastObj&&t.loop(e.zimLastObj,function(pn){n(e.zimTweenOriginals[pn])||(e[pn]=e.zimTweenOriginals[pn],e.zimLastObj[pn]=e.zimTweenOriginals[pn])});for(var Pe,rt=c,ct=0,yt,Lt,Rt=0;Rt<L.length;Rt++)if(Pe=L[Rt],!n(Pe.target)){n(Pe.time)&&(Pe.time=Ke),rt+=Pe.wait?Pe.wait:0,yt=Pe.time,Lt=n(Pe.rewindTime)?yt:Pe.rewindTime,Pe.rewind&&(yt=yt+Lt+(Pe.rewindWait?Pe.rewindWait:0)),Pe.loop&&(yt*=Pe.loopCount,yt+=(Pe.loopCount-1)*(Pe.loopWait?Pe.loopWait:0)),n(Pe.params)&&(Pe.params=Pe.target),oe=Pe.target,rt<0&&(ct+=rt,rt=0);var hn={target:Pe.target,obj:t.copy(Pe.obj),seriesWait:ct,wait:rt,waitedCall:Pe.waitedCall,waitedParams:Pe.waitedParams,time:Pe.time,ease:Pe.ease,from:Pe.from,rewind:Pe.rewind,call:Pe.call,params:Pe.params,loop:Pe.loop,loopCount:Pe.loopCount,loopWait:Pe.loopWait,loopCall:Pe.loopCall,loopParams:Pe.loopParams,loopWaitCall:Pe.loopWaitCall,loopWaitParams:Pe.loopWaitParams,loopPick:Pe.loopPick,rewindWait:Pe.rewindWait,rewindCall:Pe.rewindCall,rewindParams:Pe.rewindParams,rewindWaitCall:Pe.rewindWaitCall,rewindWaitParams:Pe.rewindWaitParams,rewindTime:Pe.rewindTime,rewindEase:Pe.rewindEase,set:t.copy(Pe.masterSet),events:o,rate:e.futureRate,pauseOnBlur:Pe.pauseOnBlur,easeAmount:Pe.easeAmount,easeFrequency:Pe.easeFrequency,override:!1,id:f};Rt==L.length-1&&je(hn),t.animate(hn),ct+=rt+yt,rt=0}}function je(Pe){var rt=Pe.call,ct=Pe.params;W.loop&&(!W.count||pe<W.count)?Pe.call=function(){rt&&typeof rt=="function"&&rt(ct),W.loopCall&&typeof W.loopCall=="function"&&W.loopCall(W.loopParams),W.loopWait?(n(e.zimTweens)&&(e.zimTweens={}),me=e.zimTweens[f]=e.zimTween=Ne.Tween.get(e,{override:W.override}).wait(W.loopWait,!0).call(yt),me.timeScale=e.futureRate):yt();function yt(){for(var Lt=0;Lt<ce.objects.length;Lt++)ce.objects[Lt].set&&ce.objects[Lt].set(ce.values[Lt]);W.loopWaitCall&&typeof W.loopWaitCall=="function"&&W.loopWaitCall(W.loopWaitParams),_e()}}:Pe.call=function(){rt&&typeof rt=="function"&&rt(ct),n(s)&&(s=oe),a&&typeof a=="function"&&a(s),hr(f),e.zimLastObj=null},pe++}function Ve(){e&&!e.seriesTweens&&(e.seriesTweens=[],e.seriesCalls=[],e.seriesParams=[]);for(var Pe,rt=0;rt<L.length;rt++)Pe=L[rt],Pe.target?(Pe.target.seriesTweens||(Pe.target.seriesTweens=[]),Pe.target.seriesCalls||(Pe.target.seriesCalls=[]),Pe.target.seriesParams||(Pe.target.seriesParams=[]),Pe.target.seriesTweens.push(Pe.props),Pe.target.seriesCalls.push(Pe.call),Pe.target.seriesParams.push(Pe.params)):(e.seriesTweens.push(Pe.props),e.seriesCalls.push(Pe.call),e.seriesParams.push(Pe.params));e.seriesCalls.push(a),e.seriesParams.push(s),Pe=L[0];var ct;for(e?ct=e:ct=Pe.target,ct.zimSeriesOriginals={},rt=L.length-1;rt>=0;rt--)Pe=L[rt],n(Pe.props)&&!n(Pe.obj)&&(Pe.props=Pe.obj),Pe.obj=Pe.props,t.loop(Pe.obj,function(lr){lr=="path"?ct.zimSeriesOriginals[lr]=L[lr]:ct.zimSeriesOriginals[lr]=de(ct,lr)});var yt=new t.Dictionary;for(ce=new t.Dictionary,rt=0;rt<L.length;rt++)if(Pe=L[rt],e||(e=Pe.target),n(Pe.target)&&(Pe.target=e),n(Pe.ease)&&(Pe.ease=l),!n(Pe.target)){if(rt==0&&(Pe.target.zimSeriesArgs=te),n(Pe.props)&&!n(Pe.obj)&&(Pe.props=Pe.obj),Pe.obj=Pe.props,Pe.loop&&(n(Pe.loopCount)||Pe.loopCount<=0)&&(Pe.loopCount=0,L.splice(rt+1,L.length)),n(Pe.obj.scale)||(Pe.obj.scaleX=Pe.obj.scaleY=Pe.obj.scale,delete Pe.obj.scale),Pe.from){var Lt=yt.at(Pe.target);if(Lt){if(Pe.set){var Rt=t.copy(Pe.obj),hn=t.merge(Lt,Pe.set);Pe.obj=st(Pe.target,Pe.obj,hn),Pe.set=t.merge(Pe.set,Rt)}else Pe.set=t.copy(Pe.obj),Pe.obj=st(Pe.target,Pe.obj,Lt);Pe.from=!1}else yt.add(Pe.target,st(Pe.target,Pe.obj,Pe.set))}var pn={};for(var Sn in Pe.obj)pn[Sn]=Pe.set&&Pe.set[Sn]?Pe.set[Sn]:Pe.target[Sn];n(ce.at(Pe.target))&&ce.add(Pe.target,{});var $n=t.merge(ce.at(Pe.target),pn);ce.remove(Pe.target),ce.add(Pe.target,$n),Pe.masterSet=t.copy(Pe.set)}n(e.zimTweens)&&(e.zimTweens={})}if(L&&(L.x&&(e.zimX=!0),L.y&&(e.zimY=!0)),!n(L.shape)&&L.shape.type==e.type&&(e.type=="Blob"||e.type=="Squiggle")){var De=e.pointObjects,Oe=L.shape.pointObjects;if(De.length!=Oe.length)dt&&$e("animate() - shapes must be of same number of points"),delete L.shape;else{delete L.shape;var Re=n(L.blobShift)?0:L.blobShift;delete L.blobShift;var Ze=!0;for(H=0;H<De.length;H++){var be=De[H],we=Oe[(De.length*2e4+H+Re)%De.length];for(In=0;In<4;In++)if(In!=1){var Me=be[In],He=t.copy(ge);He[0]=Me,He[1]={x:we[In].x,y:we[In].y,rotation:we[In].rotation},Ze&&(He[37]=!0,Me.animateEvent&&Me.off("animation",Me.animateEvent),Me.animateEvent=Me.on("animation",function(){e.update()})),Ze=!1,t.animate.apply(t.animate,He)}}if(t.isEmpty(L))return e}}if(n(e))return;e.tweenStates||(e.tweenStates={all:!0});var Xe=!1;if(L.note){if(Array.isArray(L.note))t.loop(L.note,function(Pe,rt){typeof Pe=="string"&&(L.note[rt]=t.Synth.note(Pe))});else if(L.note.min)L.note.min=t.Synth.note(L.note.min),L.note.max=t.Synth.note(L.note.max);else if(L.note.array)t.loop(L.note.array,function(Pe,rt){typeof Pe=="string"&&(L.note.array[rt]=t.Synth.note(Pe))});else if(typeof L.note=="function"){if(dt)return $e("animate() - use frequency in ZIM VEE functions not note"),e}else L.note=t.Synth.note(L.note);L.frequency=L.note,delete L.note}function nt(Pe,rt){return!!Object.getOwnPropertyDescriptor(Pe,rt).get}(e.type=="Sprite"||!Object.prototype.hasOwnProperty.call(e,"paused"))&&(Object.defineProperty(e,"paused",{get:function(){return e.animatePaused},set:function(Pe){e.animatePaused=Pe}}),e.type!=null&&(e.paused=!0),e.animating=!1),e.endTween=function(Pe,rt){if(e.stopAnimate(rt),Pe!="all"&&Pe!="main"&&Pe!="none"&&(Pe="all"),!e.seriesTweens)t.loop(e.zimLastObj,function(yt){typeof e.zimLastObj[yt]=="string"&&yt!="transform"&&(e.zimLastObj[yt]=e[yt]+Number(e.zimLastObj[yt].replace(/\s/g,""))),se(e,yt,e.zimLastObj[yt])}),Pe!="none"&&a&&a(s);else{if(t.loop(e.seriesTweens,function(yt,Lt){t.loop(yt,function(Rt){typeof yt[Rt]=="string"&&Rt!="transform"&&(yt[Rt]=e[Rt]+Number(yt[Rt].replace(/\s/g,""))),se(e,Rt,yt[Rt])}),Pe=="all"&&e.seriesCalls[Lt]&&e.seriesCalls[Lt](e.seriesParams[Lt])}),Pe!="none"){var ct=e.seriesCalls[e.seriesCalls.length-1];ct&&ct(e.seriesParams[e.seriesParams.length-1])}e.seriesTweens=null,e.seriesCalls=null,e.seriesParams=null}return e.stage&&e.stage.update(),e};var Ce=!1;if(t.loop(L,function(Pe,rt){Pe=="path"?e.zimTweenOriginals[Pe]=L[Pe]:e.zimTweenOriginals[Pe]=de(e,Pe),Pe.match("hue")?(L.hueBatch=rt,delete L.hue,Ce=!0):Pe.match("saturation")?(L.saturationBatch=rt,delete L.saturation,Ce=!0):Pe.match("brightness")?(L.brightnessBatch=rt,delete L.brightness,Ce=!0):Pe.match("contrast")?(L.contrastBatch=rt,delete L.contrast,Ce=!0):Pe.match(/^.effects/)&&(Ce=!0)}),e.resetTween=function(Pe){n(Pe)&&(Pe=!0),e.pauseAnimate(),e.percent=null,e.startPercent=null;var rt=e.zimSeriesOriginals?e.zimSeriesOriginals:e.zimTweenOriginals;return t.loop(rt,function(ct){if(ct=="path"){e.percentComplete=0,e.zimPath=rt[ct];var yt;e.zimStartPercent,yt=e.zimPath.getCurvePoint(e.zimStartPercent/100),e.loc(yt.x,yt.y)}else se(e,ct,rt[ct])}),e.zimLastObj=null,e.stage&&e.stage.update(),e.stopAnimate(),e.zimPath&&(ge[1].path=e.zimPath),n(e.zimStartRotation)||(e.rotation=e.zimStartRotation),e.zimStartRotation=null,n(e.zimStartScaleX)||(e.scaleX=e.zimStartScaleX),e.zimStartScaleX=null,n(e.zimStartScaleY)||(e.scaleY=e.zimStartScaleY),e.zimStartScaleY=null,t.animate.apply(null,e.zimSeriesArgs?e.zimSeriesArgs:ge),e.pauseAnimate(Pe),e},e.replayTween=function(){return e.resetTween(!1),e},L.path||q){var Fe;e.requestedPercentComplete?Fe=e.requestedPercentComplete:e.percentComplete&&!nt(e,"percentComplete")&&(Fe=e.percentComplete),e.requestedPercentComplete=null,n(Fe)&&(Fe=0),e.pathRatio=0,e.zimStartRotation=e.rotation,e.percent=null,e.parent&&e.parent.type=="BeadsContainer"||(e.startPercent=null)}K&&(Z=!1),n(e.zimTweens)&&(e.zimTweens={});var it;if(K||(e.stage?it=e.stage:j.zdf?it=j.zdf.stage:K=!0),e.setColorRange&&!n(L.color)){var Qe=L.color;delete L.color,L.colorRange=1,e.setColorRange(e.color,Qe),e.colorRange=0}var tt={};for(H in L)Te.indexOf(H)>=0||(tt[H]=t.copy(L[H]),L[H]=t.Pick.choose(L[H]));n(L.scale)||(L.scaleX=L.scaleY=t.Pick.choose(L.scale),delete L.scale);for(var ot in L){if(!e.zimBusy)break;e.zimBusy[ot]&&delete L[ot]}if(t.isEmpty(L))return;e.type!="Sprite"&&(e.type!=null&&(e.paused=!1),e.animating=!0);function gt(){e.zimMouseEnabledCheck||(e.zimMouseEnabledCheck=!0,e.zimLastMouseEnabled=e.mouseEnabled),e.mouseEnabled=!1,setTimeout(function(){e.zimBusy||(e.zimBusy={});for(var Pe in L)e.zimBusy[Pe]=!0;e.zimMouseEnabledCheck=null,e.mouseEnabled=e.zimLastMouseEnabled},70)}(ne||W.loop||W.rewind)&&gt(),ze();function ze(){n(f)?f=t.makeID(null,10):(f=String(f),Je=f),n(e.zimIdSets)&&(e.zimIdSets={}),n(e.zimIdSets[f])?n(e.zimTweens[f])||(Ge=f,f=t.makeID(null,10),e.zimIdSets[Ge]=[Ge],e.zimTweens[Ge].zimIdSet=Ge,e.zimIdSets[Ge].push(f)):(Ge=f,f=t.makeID(null,10),e.zimIdSets[Ge].push(f))}Te.shift();for(H in u)u[H]=t.Pick.choose(u[H]);for(H in W)H=="waitedCall"||H=="waitedParams"||H=="loopCall"||H=="rewindCall"||H=="loopWaitCall"||H=="rewindWaitCall"||(W[H]=t.Pick.choose(W[H]));Mt();function Mt(){xt(),_t(),e.seriesTweens&&(e.seriesTweens[0]=L),D&&!Xe&&(L=st(e,L,u,!0))}function ut(){xt(),D&&!Xe&&(L=st(e,L,u,!0))}function xt(){var Pe;e.zimLastObj||(e.zimLastObj={});for(H in L){if(typeof L[H]=="string"&&H!="transform"){if(H.substring&&H.substring(0,1)=="."){if(L[H].substr(0,1)=="+"||L[H].substr(0,1)=="-")continue}else if(L[H].substr(0,1)=="+")continue;if(L[H].substr(0,3)=="rgb")continue;e.zimLastObj&&!n(e.zimLastObj[H])?Pe=e.zimLastObj[H]:Pe=e[H],L[H]=Pe+Number(L[H].replace(/\s/g,""))}e.zimLastObj[H]=E?e.zimTweenOriginals[H]:L[H]}}function _t(){var Pe;for(H in u){if(typeof u[H]=="string"&&H!="transform"){if(H.substring&&H.substring(0,1)=="."){if(u[H].substr(0,1)=="+"||u[H].substr(0,1)=="-")continue}else if(u[H].substr(0,1)=="+")continue;if(u[H].substr(0,3)=="rgb")continue;e.zimLastObj&&!n(e.zimLastObj[H])?Pe=e.zimLastObj[H]:Pe=e[H],u[H]=Pe+Number(u[H].replace(/\s/g,""))}e.zimLastObj[H]=E?e.zimTweenOriginals[H]:L[H]}}e.getBounds&&n(e.percentCompleteCheck)&&(e.percentCompleteCheck=!0,Object.defineProperty(e,"percentComplete",{get:function(){return this.zimTween&&this.zimTween.duration?this.zimTween.position/this.zimTween.duration*100:0},set:function(Pe){this.zimTween?(xn=!0,Yt(Pe,!0)):this.requestedPercentComplete=Pe}}),Object.defineProperty(e,"percentCompleteNoAngle",{get:function(){return this.zimTween&&this.zimTween.duration?this.zimTween.position/this.zimTween.duration*100:0},set:function(Pe){this.zimTween?Yt(Pe,!1):this.requestedPercentComplete=Pe}})),Object.defineProperty(e,"rate",{get:function(){return e.futureRate},set:function(Pe){e.futureRate=Pe,t.loop(e.zimTweens,function(rt,ct){ct.timeScale=Pe})},configurable:!0});function Yt(Pe,rt){e.zimTween.startPaused=!1,q?n(e.zimTween.currentTime)||(e.zimTween.currentTime=e.zimTween.currentTime-e.zimTween.position+Pe*e.zimTween.duration/100):e.zimTween.setPosition(Math.round(Pe*e.zimTween.duration/100)),rt&&Et&&L.orient!==!1&&Et.getCurvePoint&&(e.rotation=Et.getCurvePoint(e.pathRatio,null,null,!0).angle+(kn||0)),xn&&typeof Xt<"u"&&(Xt=Pe),e.handlePath&&e.handlePath()}var Et,Jt,qt,qe;if(!n(L.path)&&L.path.segmentPoints){n(L.orient)&&(L.orient=!0),L.orient&&n(L.flip)&&(L.flip=!0),e.type=="Pen"&&(e.infinite=!0),e.zimOnPath=!0,n(e.pathRatio)&&(e.pathRatio=0),L.orient&&(L.orient=L.path,L.startOrient=L.rotation),Et=L.path,I?(delete L.path,delete L.percent,(dt&&e.startPercent&&e.startPercent>0||e.percent&&e.percent!=100)&&$e("ZIM.animate() - startPercent and percent currently not supported with drag on path"),Jt=Et.getCurvePoint(e.pathRatio,bt,qe),Jt&&(qt=e.parent.globalToLocal(Jt.x,Jt.y),e.x=qt.x,e.y=qt.y)):(n(e.startPercent)&&(e.startPercent=t.Pick.choose(n(L.startPercent)?0:L.startPercent)),n(e.percent)&&(e.percent=t.Pick.choose(n(L.percent)?100:L.percent)),delete L.path,delete L.percent);var ht=!Et.lockControls;delete L.path,L.pathRatio=1}function st(Pe,rt,ct,yt){Xe=!0,Et&&(!n(Pe.percentComplete)||ct&&!n(ct.percentComplete))&&(ct||(ct={}),n(ct.pathRatio)&&(ct.pathRatio=n(ct.percentComplete)?Pe.percentComplete/100:ct.percentComplete/100));var Lt={};for(H in rt)ct&&!n(ct[H])?Lt[H]=ct[H]:Lt[H]=Pe[H],yt&&(Pe[H]=rt[H]);return Lt}var Ot=!0,St=!1,Vt=!0,Gt=!0;n(L.redirect)||(Gt=L.redirect,delete L.redirect);function pt(Pe){var rt=Et.globalToLocal(Pe.rawX/t.scaX,Pe.rawY/t.scaY),ct=Wt;Et.type=="Blob"&&(zt[0]<zt[4]?an=!0:zt[0]>zt[4]&&(an=!1),ct<10&&!an?(ln=Wt=ct=Ue-5,sn.immediate(ln/Ue*100),zt=[Ue-1,Ue-2,Ue,Ue-3,Ue-4]):ct>Ue-10&&an&&(ln=Wt=ct=5,sn.immediate(ln/Ue*100),zt=[0,0,0,0,0]));var yt={x:rt.x,y:rt.y,r:ct};Ht.sort(function(Lt,Rt){var hn={x:Lt.x,y:Lt.y,r:Lt.r*Ue},pn={x:Rt.x,y:Rt.y,r:Rt.r*Ue},Sn=Math.sqrt(Math.pow(yt.x-hn.x,2)+Math.pow(yt.y-hn.y,2)+Math.pow(yt.r-hn.r,2)),$n=Math.sqrt(Math.pow(yt.x-pn.x,2)+Math.pow(yt.y-pn.y,2)+Math.pow(yt.r-pn.r,2));return Sn-$n}),ln=Ht[0].r*Ue,Xt=ln/Ue*100,Xt=t.constrain(Xt,0,99.95),E&&(Xt/=2,me.position>me.duration/2&&(Xt=100-Xt))}if(Et){var bt;ht||(qe=t.copy(Et.segmentPoints),bt=t.copy(Et.segmentRatios)),e.currentPercent=e.startPercent+e.percent*e.pathRatio;var Zt=(1e6+e.currentPercent)%100/100;if(Jt=Et.getCurvePoint(Zt,bt,qe),e.parent&&Jt&&(qt=e.parent.globalToLocal(Jt.x,Jt.y),e.x=qt.x,e.y=qt.y),I){l="linear",e.cur("pointer");var Xt=e.percentComplete,tn=!1,fn=!0,an=!0,Kt=Xt,Ct=10;qe=t.copy(Et.segmentPoints);var Ue=0;t.loop(qe,function(Pe){Ue+=t.distanceAlongCurve(Pe)});var ft=Math.round(Ue/qe.length/Ct),Ht=Et.interpolate(ft,null,!0,null,!0),Wt=(Xt||0)/100*Ue,ln=Wt;Et.zimAnimateChanged=!1,e.zimAnimatePathChange=Et.on("change",function(){Et.zimAnimateChanged=!0}),e.zimAnimatePathDown=Et.on("mousedown",function(){tn=!0,e.paused==!0&&(St=!0)}),e.zimAnimatePathUp=Et.on("pressup",function(){St=!1}),e.zimAnimateDragDown=e.on("mousedown",function(Pe){it=Pe.target.stage,e.amu||(e.amu=it.frame.on("mouseupplus",function(){St=!1})),it.mouseMoveOutside=!0,Ot=!1,Vt=!0,setTimeout(function(){Ot=!0},50),St=!0,Et.zimAnimateChanged&&(qe=t.copy(Et.segmentPoints),Ue=0,t.loop(qe,function(ct){Ue+=t.distanceAlongCurve(ct)}),ft=Math.round(Ue/qe.length/Ct),Ht=Et.interpolate(ft,null,!0,null,!0)),Et.zimAnimateChanged=!1,Xt=e.percentComplete,sn.immediate(Xt);var rt=Xt;E&&(me.position>me.duration/2?rt=(100-Xt)*2:rt=Xt*2),Wt=(rt||0)/100*Ue,ln=Wt});var jt=!1;e.zimAnimateDragPress=e.on("pressmove",function(Pe){jt=!0,pt(Pe)}),e.animateReturn=function(){if(!E){dt&&$e("animate() - animateReturn() needs rewind set to true");return}fn=!1,an=!1,e.percentComplete<50&&(e.percentComplete=100-e.percentComplete),e.pauseAnimate(!1)},e.zimAnimateDragUp=e.on("pressup",function(){e.paused==!1&&(St=!1),Ot=!1,setTimeout(function(){Ot=!0},50),zt[0]<zt[4]?an=!0:zt[0]>zt[4]&&(an=!1),!e.paused&&E&&Gt&&an!=fn&&(e.percentComplete=100-e.percentComplete,fn=an)});var sn=new t.Damp(Xt,.15),vt=0,Nt=0,zt=[0,0,0,0,0],xn=!1;e.zimDragAnimateTicker=t.Ticker.add(function(){var Pe;I&&(++Nt%20&&(zt.push(ln),zt.shift()),Wt=ln,tn&&(Xt=e.percentComplete),St||Vt&&e.paused==!0?(tn||xn||Et.type=="Blob"&&Math.abs(vt-Xt)>(E?45:90)?(tn=!1,Pe=Xt,sn.immediate(Pe),xn=!1):Pe=sn.convert(Xt),Math.abs(vt-Pe)>.1?(e.percentCompleteNoAngle=Pe,vt=Pe):(e.percentCompleteNoAngle=Pe,Vt=!1,jt=!1)):Vt=!1)},it)}}var en;if(L.orient){if(L.orient===!0){var bn=e.parent.localToGlobal(n(L.x)?e.x:L.x,n(L.y)?e.y:L.y);L.orient={x:bn.x,y:bn.y}}en=L.orient,delete L.orient;var kn=e.rotation;if(e.rotation=Et.getPointAngle(0)+kn,en!=Et){var Wn;en.parent?Wn=en.parent.localToLocal(en.x,en.y,e.parent):Wn=e.parent.globalToLocal(en.x,en.y),e.rotation=t.angle(e.x,e.y,Wn.x,Wn.y)+kn}}var Un=e.scaleX,Qn=e.scaleY,An=L.flip!=null?L.flip:!1,nn=L.flipVertical!=null?L.flipVertical:!1,vn=e.x,Ln=e.y,wn=0;W.loop&&(n(W.count)||(wn=W.count,delete W.count,pe=1));var $t=0;W.loopWait&&($t=W.loopWait,w=W.loopWait,delete W.loopWait);var Xn;W.loopCall&&(Xn=W.loopCall,delete W.loopCall);var Nn=e;W.loopParams&&(Nn=W.loopParams,delete W.loopParams),j.TIMECHECK&&Ee&&(Ke&&kt(Ke,ye),at&&kt(at,ye),c&&kt(c,ye),Mn&&kt(Mn,ye),$t&&kt($t,ye),w&&kt(w,ye),W.rewindWait&&kt(W.rewindWait,ye),ee&&kt(ee,ye),z&&kt(z,ye)),ye=="s"&&(Ke&&(Ke*=1e3),at&&(at*=1e3),c&&(c*=1e3),Mn&&(Mn*=1e3),$t&&($t*=1e3),w&&(w*=1e3),W.rewindWait&&(W.rewindWait*=1e3),ee&&(ee*=1e3),z&&(z*=1e3));function or(){if($t>0&&(e.waiting=!1),!!W.loop){if(X&&typeof X=="function"){var Pe=n(V)?e:V;X(Pe)}if(Xn&&typeof Xn=="function"&&Xn(Nn),x){var rt=t.Pick.choose(e.futureRate);n(e.futureRate)||(me.timeScale=rt);var ct;if(n(tt.scale)||(ct=t.Pick.choose(tt.scale)),!D&&me.step&&me.step.prev&&me.step.prev.props){for(var yt in me.step.prev.props)if(!(Te.indexOf(yt)>=0)){var Lt=t.Pick.choose(tt[yt]);if(typeof Lt=="string"&&yt!="transform"&&Lt.substr(0,1)!="+"&&Lt.substr(0,1)!="-"){var Rt;e.zimLastObj&&!n(e.zimLastObj[yt])?Rt=e.zimLastObj[yt]:Rt=e[yt],Lt=Rt+Number(Lt.replace(/\s/g,""))}e.zimLastObj[yt]=E?e.zimTweenOriginals[yt]:Lt,E?(n(tt[yt])||(me.step.prev.props[yt]=Lt),yt=="scaleX"&&!n(ct)&&(me.step.prev.props.scaleX=ct),yt=="scaleY"&&!n(ct)&&(me.step.prev.props.scaleY=ct)):(n(tt[yt])||(me.step.props[yt]=Lt),yt=="scaleX"&&!n(ct)&&(me.step.props.scaleX=ct),yt=="scaleY"&&!n(ct)&&(me.step.props.scaleY=ct))}}}}}var qn;W.loopWaitCall&&(qn=W.loopWaitCall,delete W.loopWaitCall);var Zn=e;W.loopWaitParams&&(Zn=W.loopWaitParams,delete W.loopWaitParams);function Pn(){qn&&typeof qn=="function"&&qn(Zn)}var Fn=["ballisticIn","ballisticOut","ballisticInOut","snapIn","snapOut","snapInOut","slowmoIn","slowmoOut","slowmoInOut"];Fn.indexOf(l)!=-1&&(l=Ut(l));function Ut(Pe){var rt=[.4,.75,.9,.95],ct=[.99,-.69,.53,.014],yt=[1.18,.69,1,.96];return Pe=="ballisticIn"?Pe=et(t.zimEase(rt)):Pe=="ballisticOut"?Pe=et(t.zimEase(rt).reverse()):Pe=="ballisticInOut"?Pe=et(t.zimEase(rt,null,!0)):Pe=="snapIn"?Pe=et(t.zimEase(ct)):Pe=="snapOut"?Pe=et(t.zimEase(ct).reverse()):Pe=="snapInOut"?Pe=et(t.zimEase(ct,null,!0)):Pe=="slowmoIn"?Pe=et(t.zimEase(yt)):Pe=="slowmoOut"?Pe=et(t.zimEase(yt).reverse()):Pe=="slowmoInOut"&&(Pe=et(t.zimEase(yt,null,!0))),Pe}var Qt,rn,dn;if(W.rewind&&(l&&(l instanceof Function?Qt=et(l.reverse()):(Qt=l,Qt.indexOf("InOut")==-1&&(Qt.indexOf("Out")!=-1?Qt=Qt.replace("Out","In"):Qt.indexOf("In")!=-1&&(Qt=Qt.replace("In","Out"))))),B&&(Qt=B,Fn.indexOf(Qt)!=-1&&(Qt=Ut(Qt)))),l instanceof Function)rn=l;else{var Cn="get"+l.charAt(0).toUpperCase()+l.slice(1),cn=et(ie),yn=et(ke);(!n(cn)||!n(yn))&&Ne.Ease[Cn]?(!n(yn)&&n(cn)&&(cn=1),!n(cn)&&n(yn)&&(yn=.3*1.5),rn=Ne.Ease[Cn](cn,yn)):rn=Ne.Ease[l]}Qt&&(Qt instanceof Function?dn=Qt:(Cn="get"+Qt.charAt(0).toUpperCase()+Qt.slice(1),cn=et(ie),yn=et(ke),(!n(cn)||!n(yn))&&Ne.Ease[Cn]?(!n(yn)&&n(cn)&&(cn=1),!n(cn)&&n(yn)&&(yn=.3*1.5),dn=Ne.Ease[Cn](cn,yn)):dn=Ne.Ease[Qt]));function Bn(){Mn>0&&(e.waiting=!1),Kn&&typeof Kn=="function"&&Kn(er)}function Yn(){Mn>0&&(e.waiting=!0),Hn&&typeof Hn=="function"&&Hn(tr)}function fr(Pe){ut(),c>0&&(e.waiting=!0),me=e.zimTweens[f]=e.zimTween=Ne.Tween.get(e,{override:W.override}).wait(c,!0).call(function(){e.waiting=!1,d&&typeof d=="function"&&d(n(C)?e:C),c=0,ur(me)}),me.timeScale=e.futureRate,Pe&&Jn(Pe,me)}function ur(Pe){var rt=Mr();e.set&&!D&&e.set(u),me=e.zimTweens[f]=e.zimTween=Ne.Tween.get(e,W).to(L,Ke,rn).call(Yn).wait(Mn,!0).call(Bn).to(rt,at,dn).call(Pr).wait($t,!0).call(or),me.timeScale=e.futureRate,Pe&&Jn(Pe,me),wr()}function cr(Pe){ut(),c>0&&(e.waiting=!0),me=e.zimTweens[f]=e.zimTween=Ne.Tween.get(e,{override:W.override}).wait(c,!0).call(function(){c=0,e.waiting=!1,d&&typeof d=="function"&&d(n(C)?e:C),dr(me)}),me.timeScale=e.futureRate,Pe&&Jn(Pe,me)}function dr(Pe){e.set&&!D&&e.set(u),me=e.zimTweens[f]=e.zimTween=Ne.Tween.get(e,W).to(L,Ke,rn).call(Pr).wait($t,!0).call(or),me.timeScale=e.futureRate,Pe&&Jn(Pe,me),wr()}if(W.rewind){var Mn=0;delete W.rewind,E=!0,k=W.rewindWait,W.rewindWait&&(Mn=W.rewindWait,delete W.rewindWait);var Kn;if(W.rewindCall){Kn=W.rewindCall;var er=W.rewindParams;n(er)&&(er=e),delete W.rewindCall,delete W.rewindParams}var Hn;if(W.rewindWaitCall){Hn=W.rewindWaitCall;var tr=W.rewindWaitParams;n(tr)&&(tr=e),delete W.rewindWaitCall,delete W.rewindWaitParams}ee>0||z>0||c>0?ee>0||z>0?(e.waiting=!0,me=e.zimTweens[f]=e.zimTween=Ne.Tween.get(e,{override:W.override}).wait(ee>0?ee:0,!0).wait(z>0?z:0,!0).call(function(Pe){Pe.waiting=!1,z=ee=0,fr(me)}),me.timeScale=e.futureRate):fr():(ut(),ur())}else ee>0||z>0||c>0?ee>0||z>0?(e.waiting=!0,me=e.zimTweens[f]=e.zimTween=Ne.Tween.get(e,{override:W.override}).wait(ee>0?ee:0,!0).wait(z>0?z:0,!0).call(function(){z=ee=0,e.waiting=!1,cr(me)}),me.timeScale=e.futureRate):cr():(ut(),dr());function Jn(Pe,rt){rt.zimIdSet=Pe.zimIdSet,rt.zimObj=Pe.zimObj,rt.zimTicker=Pe.zimTicker,rt.zimExtraTickers=Pe.zimExtraTickers,rt.requestID=Pe.requestID}me.startPaused=le,me.rewinding=!1,n($)||(me.timeScale=t.Pick.choose($));var Gn;!K&&Z&&(Fe&&(e.pathRatio=e.percentComplete&&Math.round(e.percentComplete)!=100?e.percentComplete/100:0,e.percentCompleteNoAngle=Math.round(Fe)!=100?Fe:0),o&&!n(g)&&g.dispatchEvent?Gn=t.Ticker.add(function(){Ce&&e.updateEffects(),(Et||en||An||nn)&&ir(),g.dispatchEvent("animation")},it):o&&e.dispatchEvent?Gn=t.Ticker.add(function(){Ce&&e.updateEffects(),(Et||en||An||nn)&&ir(),e.dispatchEvent("animation")},it):Gn=t.Ticker.add(function(){Ce&&e.updateEffects(),(Et||en||An||nn)&&ir()},it));function Tn(Pe){if(Array.isArray(Pe)){for(var rt=0,ct=0,yt=Pe.length;ct<yt;ct++)rt+=Pe[ct];return rt}}var nr=[1,1,1],rr=0,ii=1,ir=function(){if(!(!e.parent||me.passive||me.startPaused)){if(I&&E&&(Kt<50&&e.percentComplete>50||Kt>50&&e.percentComplete<50)&&(fn=e.percentComplete<50),Kt=e.percentComplete,Et){if(ht&&(qe=Et.segmentPoints,bt=Et.segmentRatios),I)var Pe=Et.getCurvePoint(e.pathRatio,bt,qe);else{e.currentPercent=e.startPercent+e.percent*e.pathRatio;var rt=(1e6+e.currentPercent)%100/100;e.pathRatio==1&&(rt+=e.percent>0?1:0),Pe=Et.getCurvePoint(rt,bt,qe)}if(Pe){var ct=e.parent.globalToLocal(Pe.x,Pe.y);e.x=ct.x,e.y=ct.y}}var yt=Math.abs(vn-e.x),Lt=Math.abs(Ln-e.y),Rt=kn==90||kn==270||kn==-90;An&&Ot&&(vn>e.x&&yt>.01&&t.sign(Rt?e.scaleY:e.scaleX)==t.sign(Un)||vn<e.x&&yt>.01&&t.sign(Rt?e.scaleY:e.scaleX)!=t.sign(Un)||e.percentComplete<99&&e.percentComplete>1&&yt<.01&&Lt>.01&&t.sign(Rt?e.scaleY:e.scaleX)!=t.sign(Un))&&(Rt?e.scaleY*=-1:e.scaleX*=-1),nn&&Ot&&(Ln>e.y&&Lt>.01&&t.sign(Rt?e.scaleX:e.scaleY)==t.sign(Qn)||Ln<e.y&&Lt>.01&&t.sign(Rt?e.scaleX:e.scaleY)!=t.sign(Qn)||e.percentComplete<99&&e.percentComplete>1&&Lt<.01&&yt>.01&&t.sign(Rt?e.scaleX:e.scaleY)!=t.sign(Qn))&&(Rt?e.scaleX*=-1:e.scaleY*=-1);var hn;if(en&&yt>.05||en&&Lt>.05){if(Et==en)hn=t.angle(vn,Ln,e.x,e.y)+kn;else{var pn;en.parent?pn=en.parent.localToLocal(en.x,en.y,e.parent):pn=e.parent.globalToLocal(en.x,en.y),hn=t.angle(e.x,e.y,pn.x,pn.y)+kn}if(hn!=0&&(!e.paused||jt)){An&&vn-e.x>.01&&(hn+=180);var Sn=hn;e.rotation=Math.round(Sn==kn?e.rotation:Sn),E&&e.percentComplete>50&&!An&&(e.rotation+=180)}}if(I){var $n=e.x-vn+e.y-Ln;Math.abs($n)>2&&(nr.push(t.sign($n)),nr.shift(),me.forward=Tn(nr))}vn=e.x,Ln=e.y}};(Et||en||An||nn)&&(e.handlePath=ir),n(e.zimMaskDynamic)||e.zimMaskApply();function Pr(){if(e.seriesTweens&&e.seriesTweens.shift(),e.seriesCalls&&e.seriesCalls.shift(),e.seriesParams&&e.seriesParams.shift(),e.paused&&e.type!="Sprite"){a&&typeof a=="function"&&a(s);return}if(W.loop)if(wn>0)if(pe<wn){$t>0&&(e.waiting=!0),Pn(),pe++;return}else E?e.set&&e.set(Mr()):e.set&&e.set(L);else{$t>0&&(e.waiting=!0),Pn();return}if(N?hr(f):e.pauseAnimate(!0,f),!W.loop&&X&&typeof X=="function"){var Pe=n(V)?e:V;X(Pe)}a&&typeof a=="function"&&a(s)}function Mr(){var Pe={};for(var rt in L)if(K&&e.style)!n(u[rt])&&!D?Pe[rt]=u[rt]:rt=="transform"?Pe[rt]=e.style[rt]:Pe[rt]=_n(e.style[rt]);else if(!n(u[rt])&&!D)Pe[rt]=u[rt];else if(rt.substr(0,1)=="."){for(var ct=rt.split("."),yt=e,Lt=1;Lt<ct.length;Lt++)yt=yt[ct[Lt]];Pe[rt]=yt}else Pe[rt]=e[rt];return Pe}function Qr(Pe){if(e.zimBusy){for(var rt in Pe)delete e.zimBusy[rt];t.isEmpty(e.zimBusy)&&(e.zimBusy=null)}}var qr=!1;wr();function wr(){me.zimObj=L,me.zimTicker=Gn,me.zimPaused=qr,Ge&&(me.zimIdSet=Ge),Je&&(n(t.idSets)&&(t.idSets={}),n(t.idSets[Je])?t.idSets[Je]=[e]:t.idSets[Je].indexOf(e)<0&&t.idSets[Je].push(e)),t.animatedObjects||(t.animatedObjects=new t.Dictionary(!0)),t.animatedObjects.add(e,!0)}function hr(Pe){if(e.tweenStates&&e.tweenStates[Pe]&&delete e.tweenStates[Pe],!(n(e.zimTweens)||n(e.zimTweens[Pe]))){e.zimX=null,e.zimY=null,Qr(e.zimTweens[Pe].zimObj),e.zimTweens[Pe].paused=!0,Ir(Pe);var rt=e.zimTweens[Pe].zimIdSet;if(!n(rt)&&e.zimIdSets){var ct=e.zimIdSets[rt];ct&&ct.splice(ct.indexOf(Pe),1),ct&&ct.length==0&&(delete e.zimIdSets[rt],t.isEmpty(e.zimIdSets)&&delete e.zimIdSets)}if(e.type=="Pen"&&e.zimOnPath&&(e.stop(),e.zimOnPath=!1),delete e.zimTweens[Pe],e.zimLastObj=null,t.isEmpty(e.zimTweens)&&e.stopAnimate(null,null,null,!1,!0),!(e.zimTweens&&e.zimTweens[Pe]||e.zimIdSets&&e.zimIdSets[rt||Pe])){if(t.idSets&&t.idSets[rt||Pe]){t.idSets[rt||Pe];var yt=t.idSets[rt||Pe].indexOf(e);yt>=0&&t.idSets[rt||Pe].splice(yt,1),t.idSets[rt||Pe].length<=0&&(delete t.idSets[rt||Pe],t.isEmpty(t.idSets)&&delete t.idSets)}}}}function Ir(Pe){-function(){var rt=e.zimTweens[Pe].zimTicker;if(e.zimTweens[Pe].extraTickers)for(var ct=0;ct<e.zimTweens[Pe].extraTickers.length;ct++)t.Ticker.remove(e.zimTweens[Pe].extraTickers[ct]);e.zimTweens[Pe].requestID&&cancelAnimationFrame(e.zimTweens[Pe].requestID),rt&&setTimeout(function(){rt&&t.Ticker.remove(rt),rt=null},200)}()}function gr(Pe,rt){var ct=e.zimTweens[Pe];ct.paused=rt,rt!=ct.zimPaused&&(ct.zimPaused=rt,rt?ct.zimTicker&&(ct.zimAnimateTimeout=setTimeout(function(){t.Ticker.remove(ct.zimTicker)},200)):(ct.startPaused=!1,clearTimeout(ct.zimAnimateTimeout),ct.zimTicker&&(ct.zimTicker=t.Ticker.add(ct.zimTicker,it))))}function Sr(Pe){for(var rt=[],ct=0;ct<Pe.length;ct++)e.zimIdSets&&!n(e.zimIdSets[Pe[ct]])?rt=rt.concat(e.zimIdSets[Pe[ct]]):rt.push(Pe[ct]);return rt}(!e.stopAnimate||!e.stopAnimate.real)&&(e.stopAnimate=function(Pe,rt,ct,yt,Lt){var Rt;if(e.dynamicAnimation=null,Lt&&I){e.pauseAnimate();return}if(n(Pe)&&(e.tweenStates={}),rt)return e.endTween(null,Pe),e;if(n(yt)&&(yt=!0),e.pan==null&&(e.type!=null&&(e.paused=!0),e.animating=!1),e.type=="Pen"&&e.zimOnPath&&(e.stop(),e.zimOnPath=!1),n(ct)&&(ct=!0),yt&&I&&(Et&&Et.off("change",e.zimAnimatePathChange),e.off("mousedown",e.zimAnimateDragDown),e.off("pressmove",e.zimAnimateDragPress),e.off("pressup",e.zimAnimateDragUp),e.amu&&it.frame.off("mouseupplus",e.amu),t.Ticker.remove(e.zimDragAnimateTicker)),n(Pe)){if(!ct)return e;e.zimBusy=null,Ne.Tween.removeTweens(e);for(Rt in e.zimTweens)Ir(Rt);e.zimTweens=null,e.zimIdSets=null,e.zimTween=null,t.idSets&&t.idSets[Ge||Rt]&&(delete t.idSets[Ge||Rt],t.isEmpty(t.idSets)&&delete t.idSets),t.animatedObjects.remove(e)}else{Array.isArray(Pe)||(Pe=[Pe]);var hn=Sr(Pe);for(Rt in e.zimTweens)e.zimTweens[Rt].requestID&&cancelAnimationFrame(e.zimTweens[Rt].requestID),ct&&hn.indexOf(Rt)>=0&&hr(Rt,yt),!ct&&hn.indexOf(Rt)<0&&hr(Rt,yt)}return e},e.stopAnimate.real=!0,e.pauseAnimate=function(Pe,rt,ct,yt){var Lt;if(rt=="pauseOnBlur"?rt=null:n(rt)&&(e.tweenStates={all:Pe===!1}),e.type=="Pen"&&(Pe===!1?e.zimOnPath&&(e.infinite=!0):e.stop()),Lr&&!yt){if(n(rt))for(Lt in e.zimTweens)gr(Lt,Pe);else e.pause(Pe,rt);return e}if(n(Pe)&&(Pe=!0),St=!1,e.type!=null&&(e.paused=Pe),e.animating=!Pe,n(ct)&&(ct=!0),n(rt)&&!ct)return e;if(n(rt))for(Lt in e.zimTweens)gr(Lt,Pe);else{Array.isArray(rt)||(rt=[rt]);var Rt=Sr(rt);for(Lt in e.zimTweens)ct&&Rt.indexOf(Lt)>=0&&(gr(Lt,Pe),e.tweenStates[Lt]=!Pe),!ct&&Rt.indexOf(Lt)<0&&(gr(Lt,Pe),e.tweenStates[Lt]=!Pe)}return e.type=="Sprite"&&(e.running||e.stop()),e}),le&&e.pauseAnimate(!0,f,null,!0);var En;for(L.extra&&(En=L.extra,delete L.extra,Array.isArray(En)||(En=[En])),H=0;H<Te.length;H++){var pr=Te[H];L[pr]&&(n(En)&&(En=[]),Zr(pr,L[pr]),delete L[pr])}function Zr(Pe,rt){rt===!0?En.push({outputProp:ve[Pe]}):Array.isArray(rt)?En.push({outputProp:ve[Pe],outputMin:rt[0],outputMax:rt[1],inputMin:rt[2],inputMax:rt[3]}):En.push({outputProp:ve[Pe],outputMax:rt})}if(En){e.zimStartScaleX=e.scaleX,e.zimStartScaleY=e.scaleY,me.extraTickers=[];var Or;for(H=0;H<En.length;H++){var on=En[H];n(on.inputObj)&&(on.inputObj=e),n(on.inputProp)&&(on.inputProp="y"),n(on.inputMin)&&(on.inputMin=0),n(on.inputMax)&&(on.inputMax=on.inputProp=="x"?it.width:it.height),n(on.outputObj)&&(on.outputObj=e),n(on.outputProp)&&(on.outputProp="scale"),n(on.outputMin)&&(on.outputMin=0),n(on.outputMax)&&(on.outputMax=on.outputMin+1),n(on.constrain)&&(on.constrain=!0);for(var In in on)L[In]=t.Pick.choose(L[In]);on.outputProp=="percentSpeed"&&(q=!0),Or=new t.Proportion(on.inputMin,on.inputMax,on.outputMin,on.outputMax,on.factor,on.outputRound);var br=function(){var Pe=on,rt=Or;return function(){var ct,yt=Pe.outputObj,Lt=Pe.inputObj[Pe.inputProp];if((Pe.inputProp=="x"||Pe.inputProp=="y")&&Pe.inputObj.parent){var Rt=Pe.inputObj.parent.localToGlobal(Lt,Lt);Lt=Rt[Pe.inputProp]}if(Pe.constrain?ct=t.constrain(rt.convert(Lt),Pe.outputMin,Pe.outputMax):ct=rt.convert(Lt),Number.isNaN(ct)&&(ct=Pe.outputMin!=null?Pe.outputMin:0),Pe.outputProp=="scale")yt.scaleX=t.sign(yt.scaleX)*ct,yt.scaleY=t.sign(yt.scaleY)*ct;else if(Pe.outputProp=="scaleX")yt.scaleX=t.sign(yt.scaleX)*ct;else if(Pe.outputProp=="scaleY")yt.scaleY=t.sign(yt.scaleY)*ct;else if(Pe.outputProp=="layer"){if(!yt.parent)return;var hn=t.constrain(Math.round(ct),0,yt.parent.numChildren-1);hn!=yt.parent.getChildIndex(yt)&&yt.parent.setChildIndex(yt,hn)}else Pe.outputProp=="percentSpeed"?yt[Pe.outputProp]=ct*100:yt[Pe.outputProp]=ct}}();br(),me.extraTickers.push(t.Ticker.add(br,it))}}var Lr;function Br(){if(me.requestID=requestAnimationFrame(Br),!(!q||me.startPaused&&e.percentSpeed==0)){me.startPaused=!1,me!=Dr&&(Dr=me,me.currentTime=0,e.pauseAnimate(!0,f,null,!0),e.type!=null&&(e.paused=!1),e.animating=!0,Cr=!z&&!ee&&!c&&!wn&&W.loop),Cr&&(me.currentTime+=1e4*mr,me.setPosition(me.currentTime,!0),Cr=!1);var Pe=me.currentTime+Kr*e.percentSpeed/100;Tr&&c==0&&(Pe=t.constrain(Pe,0,Tr)),me.currentTime=Pe,me.setPosition(me.currentTime),(Et||en||An||nn)&&ir(),it.update()}}if(q&&(e.dynamicAnimation=!0),q||e.zimAnimateDragDown){if(q){Lr=!0,e.pauseAnimate(!0,f,null,!0),e.type!=null&&(e.paused=!1),e.animating=!0,me.currentTime=0;var Dr=me;n(e.percentSpeed)&&(e.percentSpeed=me.startPaused?0:100);var Kr=1e3/60;me.currentTime=0;var Cr=!z&&!ee&&!c&&!wn&&W.loop;R&&W.loop&&!wn&&(R=!1);var mr=i+(E?Y||i:0)+(k||0)+(w||0);mr*=ye=="s"?1e3:1;var Yr=1;W.loop&&wn&&(Yr=wn);var Tr;R&&(Tr=mr*Yr),Br()}var vr;e.pause=function(Pe,rt){if(n(Pe)&&(Pe=!0),n(rt)&&(rt=0),Pe){if(e.zimAnimateDragDown&&(I=!1,e.cur("default"),Et&&Et.off("change",e.zimAnimatePathChange),e.off("mousedown",e.zimAnimateDragDown),e.off("pressmove",e.zimAnimateDragPress),e.off("pressup",e.zimAnimateDragUp),!q))return;vr=e.percentSpeed,rt>0?t.animate({target:e,props:{percentSpeed:0},override:!1,ticker:!1,time:rt,call:function(){e.percentSpeed=0,e.type!=null&&(e.paused=!0),e.animating=!1,q=!1,e.dispatchEvent("pause")}}):(me.startPaused=!1,e.percentSpeed=0,e.type!=null&&(e.paused=!0),e.animating=!1,q=!1,setTimeout(function(){e.dispatchEvent("pause")},10))}else{if(e.zimAnimateDragDown&&(I=!0,e.cur("pointer"),Et&&(e.zimAnimatePathChange=Et.on("change",e.zimAnimatePathChange)),e.zimAnimateDragDown=e.on("mousedown",e.zimAnimateDragDown),e.zimAnimateDragPress=e.on("pressmove",e.zimAnimateDragPress),e.zimAnimateDragUp=e.on("pressup",e.zimAnimateDragUp),!q&&le!=!1))return;St=!1,me.currentTime=me.position,rt>0?t.animate({target:e,props:{percentSpeed:vr},override:!1,ticker:!1,time:rt,call:function(){e.percentSpeed=vr,e.paused=!1,e.animating=!0,q=!0}}):(e.percentSpeed=vr,e.type!=null&&(e.paused=!1),e.animating=!0,q=!0)}return e}}return e},t.stopAnimate=function(e,r){Le("45.12");var i;if(n(e)){if(t.animatedObjects)for(i=t.animatedObjects.length-1;i>=0;i--)t.animatedObjects.objects[i].stopAnimate(null,r);return}if(Array.isArray(e)||(e=[e]),!!t.idSets)for(var l=0;l<e.length;l++){var a=e[l];if(t.idSets[a]){var s=t.idSets[a].length-1;for(i=s;i>=0;i--)t.idSets[a][i].stopAnimate(a,r)}}},t.stopZimAnimate=function(e){Le("45.1"),t.stopAnimate(e)},t.pauseAnimate=function(e,r){Le("45.22"),n(e)&&(e=!0);var i;if(n(r)||r=="pauseOnBlur"){if(t.animatedObjects)for(i=t.animatedObjects.length-1;i>=0;i--)t.animatedObjects.objects[i].pauseAnimate(e,r);return}if(Array.isArray(r)||(r=[r]),!!t.idSets)for(var l=0;l<r.length;l++){var a=r[l];if(t.idSets[a])for(i=t.idSets[a].length-1;i>=0;i--)t.idSets[a][i].pauseAnimate(e,a)}},t.pauseZimAnimate=function(e,r){Le("45.2"),t.pauseAnimate(e,r)},t.wiggle=function(e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P){var x="target, property, baseAmount, minAmount, maxAmount, minTime, maxTime, totalTime, type, ease, integer, id, startType, ticker, wait, pauseOnBlur",E;if(E=lt(t.wiggle,arguments,x))return E;if(Le("45.25"),n(e)||n(i)||n(l))return e;n(a)&&(a=l);var k=Tt(s,null,40);n(s)&&(s=k=="s"?1:1e3),n(c)&&(c=s),kt(c,k,40),n(T)&&(T="quadInOut"),n(h)&&(h=!1),n(w)&&(w=t.makeID()),n(C)&&(C="both"),n(A)&&(A="both"),n(y)&&(y=!0),n(v)&&(v=0),kt(d,k,40),n(d)||(e.wiggleTimeout=setTimeout(function(){e.stopAnimate(w),e.dispatchEvent("wigglestop")},d*(k=="s"?1e3:1)));var p=0,m;function S(){var _=t.rand(t.Pick.choose(s),t.Pick.choose(c),!1),Y={},B={},b;B[r]=t.Pick.choose(i),C=="negative"||p==0&&A=="negative"?b=-t.rand(t.Pick.choose(l),t.Pick.choose(a),h):C=="positive"||p==0&&A=="positive"?b=t.rand(t.Pick.choose(l),t.Pick.choose(a),h):p==0?b=t.rand(t.Pick.choose(l),t.Pick.choose(a),h,!0):b=t.rand(t.Pick.choose(l),t.Pick.choose(a),h)*t.sign(m)*-1,Y[r]=t.Pick.choose(i)+b,p==0&&(_=_/2),m=b,p++;var X=e.futureRate;C=="negative"||C=="positive"?t.animate({target:e,obj:Y,set:B,ease:T,time:_*2,wait:et(v),rewind:!0,override:!1,call:S,id:w,ticker:!!e.stage,timeCheck:!1,pauseOnBlur:P}):t.animate({target:e,obj:Y,ease:T,time:_,wait:et(v),override:!1,call:S,id:w,ticker:!!e.stage,timeCheck:!1,pauseOnBlur:P}),X&&(e.futureRate=X)}return e.addTo&&!e.stage?e.added(S):S(),e},t.loop=function(e,r,i,l,a,s,c,d){var C="obj, call, reverse, interval, step, start, end, immediate",T;if(T=lt(t.loop,arguments,C))return T;if(t.zimLoopCheck||Le("45.3"),t.zimLoopCheck=!0,n(e)||n(r))return;n(i)&&(i=!1),n(l)&&(l=0),(n(a)||a<=0)&&(a=1),n(d)&&(d=!0),e.constructor===Number&&(e=Number(e)),e.constructor===String&&(e=String(e));var h=typeof e=="number"?"number":e.constructor===Array?"array":e.constructor==={}.constructor?"object":e instanceof NodeList?"nodelist":typeof e=="string"?"string":e instanceof HTMLCollection?"htmlcollection":e.type&&e.type=="Dictionary"?"Dictionary":"invalid";if(h=="container"&&!e.addChild)return;var w,A,y,v;if(h=="number"||h=="string"||h=="array"||h=="nodelist"||h=="htmlcollection"||h=="Dictionary"){if(h=="Dictionary"){var P=t.copy(e.values);e=t.copy(e.objects)}if(w=h=="number"?e:e.length,y=E(w-1),y==0)return;if(i)if(l===0){for(A=s;A>=c;A-=a)if(h=="number"?v=r(A,y,s,c,e):h=="array"||h=="string"?v=r(e[A],A,y,s,c,e):h=="Dictionary"?v=r(e[A],P[A],A,y,s,c,e):v=r(e.item(A),A,y,s,c,e),typeof v<"u"&&v!="next")return v}else t.interval(l,function(k){if(A=k.count,d||A--,a&&(A*=a),A=s-A,h=="number"?v=r(A,y,s,c,e):h=="array"||h=="string"?v=r(e[A],A,y,s,c,e):h=="Dictionary"?v=r(e[A],P[A],A,y,s,c,e):v=r(e.item(A),A,y,s,c,e),v=="next")k.next();else if(typeof v<"u")return k.clear(),v},y,d);else if(l===0){for(A=s;A<=c;A+=a)if(h=="number"?v=r(A,y,s,c,e):h=="array"||h=="string"?v=r(e[A],A,y,s,c,e):h=="Dictionary"?v=r(e[A],P[A],A,y,s,c,e):v=r(e.item(A),A,y,s,c,e),typeof v<"u"&&v!="next")return v}else t.interval(l,function(k){if(A=k.count,d||A--,a&&(A*=a),h=="number"?v=r(A,y,s,c,e,k):h=="array"||h=="string"?v=r(e[A],A,y,s,c,e,k):h=="Dictionary"?v=r(e[A],P[A],A,y,s,c,e):v=r(e.item(A),A,y,s,c,e,k),v=="next")k.next();else if(typeof v<"u")return k.clear(),v},y,d);return!0}else if(h=="object"){w=0;var x=[];for(A in e)w++,x.push(A);if(y=E(w-1),y==0)return;if(i)if(l===0){for(A=s;A>=c;A-=a)if(v=r(x[A],e[x[A]],A,y,s,c,e),typeof v<"u"&&v!="next")return v}else t.interval(l,function(k){if(A=k.count,d||A--,a&&(A*=a),A=s-A,v=r(x[A],e[x[A]],A,y,s,c,e),v=="next")k.next();else if(typeof v<"u")return k.clear(),v},y,d);else if(l===0){for(A=s;A<=c;A+=a)if(v=r(x[A],e[x[A]],A,y,s,c,e),typeof v<"u"&&v!="next")return v}else t.interval(l,function(k){if(A=k.count,d||A--,a&&(A*=a),v=r(x[A],e[x[A]],A,y,s,c,e),v=="next")k.next();else if(typeof v<"u")return k.clear(),v},y,d);return!0}else{if(y=E(e.numChildren-1),y==0)return;if(i)if(l===0){for(A=s;A>=c;A-=a)if(v=r(e.getChildAt(A),A,y,s,c,e),typeof v<"u"&&v!="next")return v}else t.interval(l,function(k){if(A=k.count,d||A--,a&&(A*=a),A=s-A,v=r(e.getChildAt(A),A,y,s,c,e),v=="next")k.next();else if(typeof v<"u")return k.clear(),v},y,d);else if(l===0){for(A=s;A<=c;A+=a)if(v=r(e.getChildAt(A),A,y,s,c,e),typeof v<"u"&&v!="next")return v}else t.interval(l,function(k){if(A=k.count,d||A--,a&&(A*=a),v=r(e.getChildAt(A),A,y,s,c,e),v=="next")k.next();else if(typeof v<"u")return k.clear(),v},y,d);return!0}function E(k){return n(s)&&(s=i?k:0),n(c)&&(c=i?0:k),i&&c>s||!i&&s>c||(s<0&&c)<0||s>k&&c>k?0:(s=Math.max(0,Math.min(s,k)),c=Math.max(0,Math.min(c,k)),Math.floor((i?s-c:c-s)/a)+1)}},t.scaleTo=function(e,r,i,l,a,s,c){var d="obj, boundObj, percentX, percentY, type, boundsOnly, simple",C;if(C=lt(t.scaleTo,arguments,d))return C;if(e.type=="AC"&&j.zdf)return j.zdf.ac("scaleTo",arguments),e;if(Le("43"),n(r)&&(r=j.zdf&&j.zdf.stage?j.zdf.stage:null),n(e)||!e.getBounds||!e.getBounds())return Rn("zim methods - scaleTo(): please provide an object (with setBounds) to scale"),e;if(n(r)||!r.getBounds||!r.getBounds())return Rn("zim methods - scaleTo(): please provide a boundObject (with setBounds) to scale to"),e;n(i)&&(i=-1),n(l)&&(l=-1),i==-1&&l==-1&&(i=l=100,n(a)&&(a="fill")),n(a)&&(a="fit"),a=="smallest"?a="fit":a=="biggest"||a=="outside"||a=="largest"?a="fill":(a=="both"||a=="stretch")&&(a="full"),n(s)&&(s=!1),n(c)&&(c=!1);var T=r.getBounds().width*i/100*(s?1:r.scaleX),h=r.getBounds().height*l/100*(s?1:r.scaleY);(r.type=="Stage"||r.type=="StageGL")&&(T=r.width*i/100,h=r.height*l/100);var w,A;if(c)w=e.getBounds().height,A=e.getBounds().width;else{var y=t.boundsToGlobal(e);w=y.height/e.scaleX,A=y.width/e.scaleY,(isNaN(w)||isNaN(A)||w>5e3)&&(w=e.getBounds().height,A=e.getBounds().width)}if((i==-1||l==-1)&&a!="full")return i==-1?t.sca(e,h/w):t.sca(e,T/A),e;var v;return a=="full"?(e.scaleX=i!=-1?T/A:e.scaleX,e.scaleY=l!=-1?h/w:e.scaleY,e):(a=="fill"?v=Math.max(T/A,h/w):v=Math.min(T/A,h/w),t.sca(e,v),e)},t.fit=function(e,r,i,l,a,s){var c="obj, left, top, width, height, type",d;if(d=lt(t.fit,arguments,c))return d;if(e.type=="AC"&&j.zdf)return j.zdf.ac("fit",arguments),e;if(Le("46"),!(n(e)||!e.getBounds)){if(!e.getBounds()){$e("zim methods - fit(): please setBounds() on object");return}if(n(r)){if(!e.stage){$e("zim methods - fit(): please add boundary dimensions or add obj to stage first");return}if(!e.stage.getBounds()){$e("zim methods - fit(): please add boundary dimensions or add obj with bounds to stage first");return}var C=e.stage.getBounds().width,T=e.stage.getBounds().height;r=0,i=0,l=C,a=T}s===!0?s="fit":s===!1&&(s="fill"),n(s)&&(s="fit"),e.scaleX=e.scaleY=1;var h=l,w=a,A=e.getBounds().width,y=e.getBounds().height,v,P,x,E,k;return s=="full"?(e.scaleX=x=h/A,e.scaleY=E=w/y,v=h,P=w):(s=="fit"?h/w>=A/y?k=w/y:k=h/A:s=="fill"&&(h/w>=A/y?k=h/A:k=w/y),x=E=k),e.scaleX=x,e.scaleY=E,v=A*x,P=y*E,e.x=(e.regX-e.getBounds().x)*x+r+(h-v)/2,e.y=(e.regY-e.getBounds().y)*E+i+(w-P)/2,{x:e.x,y:e.y,width:v,height:P,scale:k,scaleX:x,scaleY:E,bX:r,bY:i,bWidth:l,bHeight:a}}},t.boundsCheck=!1,t.boundsToGlobal=function(e,r,i,l,a){if(t.boundsCheck||(Le("40"),t.boundsCheck=!0),!(n(e)||!e.getBounds)){if(n(i)&&(i=!1),a&&!e.getBounds&&!e.getBounds())return e;var s=e.getBounds();if(!s&&n(r)){$e(`zim methods - boundsToGlobal():
 please setBounds() on object (or a rectangle)`);return}r&&(s=r);var c,d,C,T;a&&a.type&&!(a.type=="Stage"||a.type=="StageGL")?(c=e.localToLocal(s.x,s.y,a),d=e.localToLocal(s.x+s.width,s.y,a),C=e.localToLocal(s.x+s.width,s.y+s.height,a),T=e.localToLocal(s.x,s.y+s.height,a)):i?(c=e.globalToLocal(s.x,s.y),d=e.globalToLocal(s.x+s.width,s.y),C=e.globalToLocal(s.x+s.width,s.y+s.height),T=e.globalToLocal(s.x,s.y+s.height)):(c=e.localToGlobal(s.x,s.y),d=e.localToGlobal(s.x+s.width,s.y),C=e.localToGlobal(s.x+s.width,s.y+s.height),T=e.localToGlobal(s.x,s.y+s.height));var h=Math.min(c.x,d.x,C.x,T.x),w=Math.min(c.y,d.y,C.y,T.y),A=Math.max(c.x,d.x,C.x,T.x),y=Math.max(c.y,d.y,C.y,T.y);return new Ne.Rectangle(h,w,A-h,y-w)}},t.resetBounds=function(e,r,i,l,a,s){var c="obj, a, b, c, d, margin",d;if(d=lt(t.resetBounds,arguments,c))return d;Le("40.5");var C,T,h,w;return n(l)?(C=0,T=r,h=0,w=i):(C=r,T=l,h=i,w=a),n(w)&&(w=T),n(r)?e.setBounds(null):e.setBounds(C,h,T,w),s&&(i=e.getBounds(),i&&e.setBounds(i.x-s,i.y-s,i.width+s*2,i.height+s*2)),e},t.copyMatrix=function(e,r){return Le("45.5"),e.x=r.x,e.y=r.y,e.scaleX=r.scaleX,e.scaleY=r.scaleY,e.regX=r.regX,e.regY=r.regY,e.rotation=r.rotation,e.skewX=r.skewX,e.skewY=r.skewY,e},t.duplicate=function(e,r){Le("45.6");var i=e.clone(r);for(var l in e)if(Object.prototype.hasOwnProperty.call(e,l)&&i[l]==null){if(l=="parent"||l=="zimTouch")continue;i[l]=e[l]}return i},t.expand=function(e,r,i,l,a){var s="obj, padding, paddingV, paddingRight, paddingBottom",c;if(c=lt(t.expand,arguments,s))return c;if(Le("50"),n(e)||!e.getBounds||!e.getBounds())return $e("zim methods - expand(): please provide object with bounds set"),e;n(r)&&(r=20),n(i)&&(i=r);var d,C;!n(l)||!n(a)?(n(l)&&(l=r),n(a)&&(a=i),d=r,C=i):(d=l=r,C=a=i);var T=e.getBounds(),h=new Ne.Shape;return h.graphics.f("0").r(T.x-d,T.y-C,T.width+d+l,T.height+C+a),e.hitArea=h,e},t.setSwipe=function(e,r){if(Le("34"),n(e)||!e.on)return;e.zimNoSwipe=r?null:!0,e instanceof Ne.Container&&i(e);function i(l){for(var a=l.numChildren,s,c=0;c<a;c++)s=l.getChildAt(c),s.zimNoSwipe=e.zimNoSwipe,s instanceof Ne.Container&&i(s)}return e},t.setMask=function(e,r,i){if(Le("50.1"),n(e)&&$e("zim methods - setMask(): please provide obj"),n(r))return a(),e;var l=e.stage||(j.zdf?j.zdf.stage:null);function a(){e.zimMask&&e.zimMask.parent&&e.zimMask.parent.removeChild(e.zimMask),e.zimMask=null,e.zimMaskTicker&&t.Ticker.remove(e.zimMaskTicker),e.mask=null}e.zimMaskOriginal&&e.zimMaskOriginal!=r&&a(),n(i)&&(i=r.type=="Blob"||!n(r.zimDown)||!n(r.transformControls)||!n(r.zimTouch)||!n(r.zimTweens),r.zimMaskDynamic=i),e.zimMaskOriginal=r;var s;function c(){if(i&&(!l||!r.stage))return e;if(s&&s.dispose&&s.dispose(),s=null,e.zimMask=r.zimMask=s=r.shape.clone(),t.copyMatrix(s,r),r.addChildAt(s,0),s.alpha=0,!e.parent){e.mask=s;return}var d=r.getConcatenatedMatrix().decompose(),C=e.parent.getConcatenatedMatrix().decompose();s.scaleX=d.scaleX/C.scaleX,s.scaleY=d.scaleY/C.scaleY,s.rotation=(d.rotation?d.rotation:0)-(C.rotation?C.rotation:0);var T=r.localToLocal(r.shape.x+r.regX,r.shape.y+r.regY,e.parent);s.x=T.x,s.y=T.y,e.mask=s}return r.zimMaskApply=function(){e.zimMaskTicker&&t.Ticker.remove(e.zimMaskTicker),e.zimMaskTicker=t.Ticker.add(c)},r&&r.shape?(c(),i&&r.zimMaskApply()):(s=r,e.mask=s),e},t.outline=function(e,r,i,l){var a="obj, color, size, boundsOnly",s;if(s=lt(t.outline,arguments,a))return s;if(e.type=="AC"&&j.zdf)return j.zdf.ac("outline",arguments),e;if(Le("47"),e.type&&e.type=="zimOultineShape")return dt&&$e("zim.outline() - warning, you are trying to outline an outline - do not outline in a loop"),e;if(n(e)||!e.getBounds)return $e("zim methods - outline(): please provide object with bounds set"),e;if(!e.getBounds())return $e("zim methods - outline(): please setBounds() on object"),e;if(!e.parent)return $e("zim methods - outline(): object should be on stage first"),e;if(n(r)&&(r="brown"),n(i)&&(i=2),i<=0){e.ZIMoutlineShape&&e.ZIMoutlineShape.parent.removeChild(e.ZIMoutlineShape),e.ZIMoutlineShapeC&&e.ZIMoutlineShapeC.parent.removeChild(e.ZIMoutlineShapeC),e.ZIMoutlineShape=e.ZIMoutlineShapeC=null;return}var c=e.getBounds(),d=e.ZIMoutlineShape=e.ZIMoutlineShape?e.ZIMoutlineShape:new t.Shape;d.type="zimOutlineShape";var C=e.ZIMoutlineShapeC=e.ZIMoutlineShapeC?e.ZIMoutlineShapeC:new t.Shape;C.type="zimOutlineShape";var T=e.parent;e.outlineToggled=!0,e.outlineToggle=function(m){return m===!0?(e.ZIMoutlineShape.visible=!0,e.ZIMoutlineShapeC.visible=!0):m===!1?(e.ZIMoutlineShape.visible=!1,e.ZIMoutlineShapeC.visible=!1):(e.ZIMoutlineShape.visible=!e.ZIMoutlineShape.visible,e.ZIMoutlineShapeC.visible=!e.ZIMoutlineShapeC.visible),e.outlineToggled=e.ZIMoutlineShape.visible,e};var h=e.localToLocal(c.x,c.y,T),w=e.localToLocal(c.x+c.width,c.y,T),A=e.localToLocal(c.x+c.width,c.y+c.height,T),y=e.localToLocal(c.x,c.y+c.height,T),v=e.localToLocal(0,0,T),P=d.graphics.c(),x=C.graphics.c();if(P.s(r).ss(i).mt(h.x,h.y).lt(w.x,w.y).lt(A.x,A.y).lt(y.x,y.y).lt(h.x,h.y).cp(),!l){var E=10,k=E+1;x.s("white").ss(i+2),x.mt(-k,0).lt(k,0),x.mt(0,-k).lt(0,k),x.s(r).ss(i),x.mt(-E,0).lt(E,0),x.mt(0,-E).lt(0,E),x.cp(),C.x=v.x,C.y=v.y,C.rotation=e.rotation,P.s("white").ss(i+2).dc(e.x,e.y,E+6),P.s(r).ss(i).dc(e.x,e.y,E+6)}e.parent.removeChild(d),e.parent.removeChild(C);var p=e.parent.getChildIndex(e);return e.parent.addChildAt(C,p+1),e.parent.addChildAt(d,p+1),d.mouseEnabled=!1,C.mouseEnabled=!1,e},t.blendmodes=function(e,r,i){Le("47.05"),n(r)&&(r=1);var l=["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"];i===!1&&l.push("source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","copy","xor");var a=0,s=t.interval(r,function(){var c=l[a%l.length];a++,e.ble(c),Gr(c),e.stage&&e.stage.update()});return e.on("mousedown",function(){s.pause(!s.paused)}),e},t.STYLE=null,t.ignore="ignore",t.getStyle=function(e,r,i){t.STYLECHECK||(Le("50.34"),t.STYLECHECK=!0);var l=["tap","change","hold","noTap","noChange","noHold","pos","addTo","center","centerReg","reg","mov","move","drag","transform","gesture","mouse","expand","outline","bounds","animate","wiggle","cache"],a=j.STYLE||t.STYLE,s=a,c;a&&a.type&&typeof a.type=="string"&&(a.ttype=a.type,delete a.type);for(var d in a)c=a[d],d.match(/^[(A-Z)]/)?(a.type||(a.type={}),a.type[d]?a.type[d]=t.merge(a.type[d],c):a.type[d]=c,delete a[d]):c.constructor==={}.constructor&&d!="group"&&d!="type"&&!t.isPick(c)&&l.indexOf(d)==-1&&(a.group||(a.group={}),a.group[d]?a.group[d]=t.merge(a.group[d],c):a.group[d]=c,delete a[d]);n(s)?s={}:s=t.copy(s);var C;if(n(i))i={};else for(C=0;C<l.length;C++)delete i[l[C]];var T=i,h=s.type;if(h&&delete s.type,!n(r)&&!n(s.group)){var w=r.split(","),A={};for(C=0;C<w.length;C++){var y=w[C].trim();n(s.group[y])||(A=t.merge(A,s.group[y]))}delete s.group}!n(e)&&!n(h)&&!n(h[e])&&(s=t.merge(s,h[e])),!n(r)&&!n(A)&&(s=t.merge(s,A));for(var v in s){if(T[v]){delete s[v];continue}if(c=l.indexOf(v)==-1&&!s.delayPick?t.Pick.choose(s[v]):s[v],c=="ignore"){delete s[v];continue}else c&&c.constructor==={}.constructor&&(c=t.copy(c,!0,!1));var P;for(var x in s)(P=x.match(/^(.+)gColor$/))&&(s[P[1]+"ackgroundColor"]=s[x],delete s[x]);s[v]=c}return s=t.merge(s,T),s.ttype&&!s.type&&(s.type=s.ttype,delete s.ttype),s.style===!1?{}:s},t.styleTransforms=function(e,r){var i=["visible","x","y","scale","scaleX","scaleY","rotation","alpha","skewX","skewY","blendMode"],l;if(r){for(r.add&&e.addTo(),r.addTo&&e.addTo(r.addTo===!0?null:r.addTo),l=0;l<i.length;l++)r[i[l]]!=null&&(e[i[l]]=t.Pick.choose(r[i[l]]));if((r.regX!=null||r.regY!=null)&&e.reg(n(r.regX)?DEFAULT:r.regX,n(r.regY)?DEFAULT:r.regY),r.bounds&&r.bounds.constructor==={}.constructor&&e.setBounds(r.bounds.x?r.bounds.x:0,r.bounds.y?r.bounds.y:0,r.bounds.width?r.bounds.width:100,r.bounds.height?r.bounds.height:100),r.center&&e.center(r.center===!0?null:r.center),r.centerReg&&e.centerReg(r.centerReg===!0?null:r.centerReg),r.reg!=null&&(r.reg.constructor==={}.constructor?e.reg(t.Pick.choose(r.reg.x),t.Pick.choose(r.reg.y),r.reg.still):e.reg(r.reg)),r.x!=null&&(r.loc?r.loc.x==null&&(r.loc.x=r.x):r.loc={x:r.x}),r.y!=null&&(r.loc?r.loc.y==null&&(r.loc.y=r.y):r.loc={y:r.y}),r.loc&&(r.loc.constructor==={}.constructor?e.loc(t.Pick.choose(r.loc.x),t.Pick.choose(r.loc.y)):e.loc(t.Pick.choose(r.loc))),r.pos)if(r.pos.constructor==={}.constructor)e.pos(t.Pick.choose(r.pos.x),t.Pick.choose(r.pos.y),t.Pick.choose(r.pos.horizontal),t.Pick.choose(r.pos.vertical),t.Pick.choose(r.pos.container),t.Pick.choose(r.pos.index),r.pos.add,t.Pick.choose(r.pos.reg),t.Pick.choose(r.pos.regX),t.Pick.choose(r.pos.regY));else{var a=t.Pick.choose(r.pos);(a=="left"||a=="top")&&e.pos(),a=="right"&&e.pos({horizontal:"right"}),a=="bottom"&&e.pos({vertical:"bottom"}),(a=="rightbottom"||a=="bottomright")&&e.pos({horizontal:"right",vertical:"bottom"}),a=="center"&&e.center()}if((r.mov||r.move)&&(r.move&&(r.mov=r.move),r.mov.constructor==={}.constructor?e.mov(t.Pick.choose(r.mov.x),t.Pick.choose(r.mov.y)):e.mov(t.Pick.choose(r.mov))),r.outline&&setTimeout(function(){e.outline(r.outline.constructor==={}.constructor?r.outline:null),e.stage&&e.stage.update()},20),r.drag&&e.drag(r.drag.constructor==={}.constructor?r.drag:{currentTarget:!0}),r.gesture&&e.gesture(r.gesture.constructor==={}.constructor?r.gesture:null),r.mouse===!1&&e.noMouse(),r.transform&&setTimeout(function(){e.transform(r.transform.constructor==={}.constructor?r.transform:null)},20),r.animate)for(Array.isArray(r.animate)||(r.animate=[r.animate]),l=0;l<r.animate.length;l++)-function(){var c=r.animate[l];c.constructor==={}.constructor&&setTimeout(function(){e.animate(c)},20)}();if(r.wiggle)for(Array.isArray(r.wiggle)||(r.wiggle=[r.wiggle]),l=0;l<r.wiggle.length;l++)-function(){var c=r.wiggle[l];c.constructor==={}.constructor&&setTimeout(function(){e.wiggle(c)},20)}();r.expand&&e.expand(r.expand===!0?null:r.expand),r.cache&&(r.cache.constructor==={}.constructor?r.cache.x?e.cache(t.Pick.choose(r.cache.x),t.Pick.choose(r.cache.y),t.Pick.choose(r.cache.x),t.Pick.choose(r.cache.y)):e.cache(t.Pick.choose(r.cache.width),t.Pick.choose(r.cache.height)):e.cache()),r.tap&&e.tap&&e.tap(r.tap),r.change&&e.change&&e.change(r.change),r.hold&&e.hold&&e.hold(r.hold),r.noChange&&e.noChange&&e.noChange(),r.noTap&&e.noTap&&e.noTap(),r.noHold&&e.noHold&&e.noHold();var s=j.STYLE||t.STYLE;s&&(s.once===!0||s.once==e.type)&&(j.STYLE?j.STYLE={}:t.STYLE={})}},t.Style={remembered:{},clear:function(){return j.STYLE&&(j.STYLE={}),t.STYLE&&(t.STYLE={}),t.Style},clearTypes:function(){var e=j.STYLE||t.STYLE;return delete e.types,t.Style},clearGroups:function(){var e=j.STYLE||t.STYLE;return delete e.groups,t.Style},remember:function(e){n(e)&&(e="default");var r=j.STYLE||t.STYLE;return r||(mt?r=t.STYLE={}:r=j.STYLE={}),t.Style.remembered[e]=t.copy(r,!0),t.Style},clearRemembered:function(e){return n(e)?t.Style.remembered={}:delete t.Style.remembered[e],t.Style},recall:function(e){return n(e)&&(e="default"),j.STYLE?j.STYLE=t.Style.remembered[e]:t.STYLE=t.Style.remembered[e],t.Style},add:function(e){var r=j.STYLE||t.STYLE;return r||(mt?r=t.STYLE={}:r=j.STYLE={}),j.STYLE?j.STYLE=t.merge(r,e):t.STYLE=t.merge(r,e),t.Style},addType:function(e,r){var i=j.STYLE||t.STYLE;return i||(mt?i=t.STYLE={}:i=j.STYLE={}),i.type||(i.type={}),i.type[e]=r,t.Style},addGroup:function(e,r){var i=j.STYLE||t.STYLE;return i||(mt?i=t.STYLE={}:i=j.STYLE={}),i.group||(i.group={}),i.group[e]=r,t.Style},remove:function(e){var r=j.STYLE||t.STYLE;return r||(mt?r=t.STYLE={}:r=j.STYLE={}),delete r[e],t.Style},removeType:function(e){var r=j.STYLE||t.STYLE;return r||(mt?r=t.STYLE={}:r=j.STYLE={}),r.type&&delete r.type[e],t.Style},removeGroup:function(e){var r=j.STYLE||t.STYLE;return r||(mt?r=t.STYLE={}:r=j.STYLE={}),r.group&&delete r.group[e],t.Style}},t.PATH=null,t.TIME="seconds",t.TIMECHECK=!1,t.DIR="ltr",t.SEEDRAND=null,t.SEEDRANDCOUNT=0,t.ANIMATE=!0,t.OPTIMIZE=!1,t.ACTIONEVENT="mousedown",t.DEFAULTWIRE="currentValue",t.KEYFOCUS=null,t.POSREG=!1,t.DRAGALL=!1,t.MOBILE="default",t.Ticker={stages:null,myUpdate:null,alwaysList:new t.Dictionary,list:new t.Dictionary,wire:new t.Dictionary,setFPS:function(e,r){n(e)&&n(r)?(e=60,r=60):n(e)?e=60:n(r)&&(r=e),t.Ticker.framerate=Ne.Ticker.framerate=t.mobile()?e:r},setTimingMode:function(e){Ne.Ticker.timingMode=Ne.Ticker.RAF,e=="synched"&&(Ne.Ticker.timingMode=Ne.Ticker.RAF_SYNCHED),e=="timeout"&&(Ne.Ticker.timingMode=Ne.Ticker.TIMEOUT)},add:function(e,r){Le("30");var i=t.Ticker;if(i.has(e,r))return e;if((n(r)||!r.update)&&(r=j.zdf.stage),n(e)||typeof e!="function"){$e("zim.Ticker.add() - only add functions");return}return i.list.at(r)?i.list.at(r).push(e):i.list.add(r,[e]),i.ticker||(i.ticker=Ne.Ticker.on("tick",i.call)),i.framerate||i.setFPS(),e},addWire:function(e,r){if(Le("30"),n(r[0]))return e;var i=t.Ticker;i.wire.add(e,r);var l=r[0][r[1]];return r[4]&&(l=r[4](l,"from")),r[3]&&(e[r[6]]=r[7]=l),i.ticker||(i.ticker=Ne.Ticker.on("tick",i.call)),i.framerate||i.setFPS(),e},rawID:{},raw:function(e){Le("30");var r=t.makeID("letters",7);return-function i(l){e(l),t.Ticker.rawID[r]=requestAnimationFrame(i)}(),r},removeRaw:function(e){cancelAnimationFrame(t.Ticker.rawID[e]),delete t.Ticker.rawID[e]},call:function(e){var r=t.Ticker,i,l,a,s=[];for(a=0;a<r.list.length;a++){i=r.list.objects[a],l=r.list.values[a];for(var c=0;c<l.length;c++)l[c](e);var d=!1;(r.alwaysList.at(i)||l.length>0&&(n(r.update)&&!t.OPTIMIZE&&(mt||!j.OPTIMIZE)||r.update))&&(d=!0),d&&s.indexOf(i)<0&&s.push(i)}for(a=r.wire.length-1;a>=0;a--){var C=r.wire.objects[a],T=r.wire.values[a];if(T){var h=C[T[6]];h!=T[7]&&(T[4]&&(h=T[4](h,"to",T[7])),T[0][T[1]]=T[7]=h,T[5]&&T[5](h),i=T[0].stage,i&&s.indexOf(i)<0&&s.push(i)),T[2]&&T[0]&&(h=T[0][T[1]],T[7]!=h&&(T[4]&&(h=T[4](h,"from",T[7])),C[T[6]]=T[7]=h,T[5]&&T[5](h),i=C.stage,i&&s.indexOf(i)<0&&s.push(i)))}}if(r.list.length==0)for(a=0;a<r.alwaysList.length;a++)i=r.alwaysList.objects[a],s.indexOf(i)<0&&s.push(i);var w=s.length;for(a=0;a<w;a++)s[a].update()},always:function(e){Le("30");var r=t.Ticker;r.framerate||r.setFPS(),(n(e)||!e.update)&&(e=j.zdf.stage),r.alwaysList.add(e,!0),r.ticker||(r.ticker=Ne.Ticker.on("tick",r.call))},alwaysOff:function(e){var r=t.Ticker;(n(e)||!e.update)&&(e=j.zdf.stage),r.alwaysList.remove(e)},remove:function(e){var r=t.Ticker;if(n(e)||typeof e!="function"){$e("zim.Ticker - only remove functions");return}for(var i=0;i<r.list.length;i++){var l=r.list.values[i].indexOf(e);l>-1&&r.list.values[i].splice(l,1)}r.alwaysList.length>0||r.list.length>0||r.wire.length>0||(Ne.Ticker.off("tick",r.ticker),r.ticker=null)},removeAll:function(e){for(var r=t.Ticker,i,l=0;l<r.list.length;l++)i=r.list.objects[l],(n(e)||e===i)&&(r.list.values[l]=[]);r.alwaysList.length>0||r.list.length>0||r.wire.length>0||(Ne.Ticker.off("tick",r.ticker),r.ticker=null)},removeWire:function(e,r,i,l){var a=t.Ticker;if(n(e)&&n(r)&&n(i)&&n(l))a.wire.clear();else for(var s=a.wire.length-1;s>=0;s--){var c=a.wire.objects[s],d=a.wire.values[s];d&&(e&&c!=e||r&&d[0]!=r||i&&d[1]!=i||l&&d[6]!=l||(a.wire.objects.splice(s,1),a.wire.values.splice(s,1)))}a.alwaysList.length>0||a.list.length>0||a.wire.length>0||(Ne.Ticker.off("tick",a.ticker),a.ticker=null)},isUpdating:function(e){n(e)&&(e=j.zdf.stage);var r=!1,i=t.Ticker;return(i.alwaysList.at(e)||i.list&&i.list.values.at(e)&&i.list.values.at(e).length>0&&(n(i.update)&&!t.OPTIMIZE&&(mt||!j.OPTIMIZE)||i.update))&&(r=!0),r},has:function(e,r){return(n(r)||!r.update)&&(r=j.zdf.stage),t.Ticker.list&&t.Ticker.list.at(r)&&t.Ticker.list.at(r).indexOf(e)>=0},dispose:function(e){for(var r=t.Ticker,i=0,l,a=r.list.length-1;a>=0;a--)l=r.list.objects[a],n(e)||e===l?(r.list.remove(e),r.alwaysList.remove(e)):i+=r.list.values[a].length;if(!(r.alwaysList.length>0))return i==0&&(Ne.Ticker.off("tick",r.ticker),r.ticker=null),!0}},t.Ticker.setFPS(),Object.defineProperty(t.Ticker,"update",{get:function(){return t.Ticker.myUpdate},set:function(e){var r=t.Ticker;typeof e!="boolean"&&(e=null),r.myUpdate=e,r.myUpdate===!1&&(cancelAnimationFrame(r.ticker),r.alwaysList=new t.Dictionary)}}),t.Pages=function(e,r,i,l,a,s,c,d,C){var T="pages, transition, speed, transitionTable, holder, arrowDisableColor, style, group, inherit",h;if(h=lt(t.Pages,arguments,T,this))return h;Le("71"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Pages",this.group=d;var w=c===!1?{}:t.getStyle(this.type,this.group,C),A=Tt(i);if(n(e)&&(e=w.pages!=null?w.pages:[]),this.pages=e,n(r)&&(r=w.transition!=null?w.transition:"none"),n(i)&&(i=w.speed!=null?w.speed:A=="s"?.2:200),n(l)&&(l=w.transitionTable!=null?w.transitionTable:[]),this.transitionTable=l,n(s)&&(s=w.arrowDisableColor!=null?w.arrowDisableColor:t.grey),this.arrowDisableColor=s,n(a)&&(a=w.holder!=null?w.holder:null),n(a)&&j.zdf&&(a=j.zdf.stage),!a.getBounds||!a.getBounds()){$e(`zim controls - Pages():
holder object must have bounds set`);return}this.speed=i,this.active=!0;var y=this;y.transitioning=!1;var v=a.getBounds().width,P=a.getBounds().height,x,E;(r!="none"||l!=[])&&k();function k(){x=new Ne.Shape,x.graphics.f("black").r(0,0,v,P+1),E=new Ne.Shape,E.graphics.f("white").r(0,0,v,P+1)}var p=["left","right","up","down"],m,S,_=!0,Y;for(Y=0;Y<e.length;Y++)m=e[Y],m.constructor!={}.constructor&&(m=e[Y]={page:e[Y]}),m.swipe&&(_=!1);for(Y=0;Y<e.length;Y++){if(m=e[Y],m.constructor!=={}.constructor&&(m=e[Y]={page:e[Y]}),_){var B=e[Y-1],b=e[Y+1];m.swipe=[B?B.page:null,b?b.page:null]}W(m.page,m.swipe)}var X=this.page=e[0]?e[0].page:null;n(this.page)||(this.index=0),this.addChild(X),K(X),this.swipe=new t.Swipe(a);var V,O=!1,Z=this.swipe.on("swipe",function(D){if(y.active){var u=D.currentTarget.direction;if(u!="none"){var f="";u=="left"?f="right":u=="right"?f="left":u=="up"?f="down":u=="down"&&(f="up"),u=f;var o=p.indexOf(u);S=X.zimSwipeArray[o],V=[S,u,null,null,!0],y.page=X,y.nextPage=S,y.direction=u,y.dispatchEvent("swipe"),setTimeout(function(){O||y.go(S,u,null,null,!0)},50)}}});function W(D,u){n(D)||(D.zimHTMLList=new t.Dictionary,ne(D),D.zimSwipeArray=u||[],D.zimOriginalAlpha=D.alpha,D.parent&&D.parent.removeChild(m.page))}function K(D){if(!n(D))for(D.removedHTML=!1,Y=0;Y<D.zimHTMLList.length;Y++)D.addChildAt(D.zimHTMLList.values[Y].obj,D.zimHTMLList.values[Y].depth)}function ne(D){if(!D.removedHTML){D.removedHTML=!0,D.zimHTMLList.clear();var u,f;for(f=0;f<D.numChildren;f++)if(u=D.getChildAt(f),u.type=="TextArea"||u.type=="Loader"||u.type=="Tag"){var o={obj:u,depth:D.getChildIndex(u)};D.zimHTMLList.add(u,o)}for(f=D.numChildren-1;f>=0;f--)u=D.getChildAt(f),(u.type=="TextArea"||u.type=="Loader"||u.type=="Tag")&&D.removeChild(u)}}this.addPage=function(D,u){W(D,u),y.pages.push({page:D}),X?D.parent&&D.parent.removeChild(D):(X=y.page=D,y.addChild(X))},this.removePage=function(D){ne(D),y.currentPage==D&&(y.removeChild(D),a.stage&&a.stage.update()),t.loop(y.pages,function(u,f){(u.page==D||u==D)&&y.pages.splice(f,1)},!0),D.zimSwipeArray=null},this.setSwipeArray=function(D,u){n(u)&&(u=[]);var f={page:D,swipe:u};f.page.zimSwipeArray=f.swipe?f.swipe:[]},this.pause=function(){O=!0},this.unpause=function(){O&&y.go(V[0],V[1],V[2],V[3],V[4])};var F=!0;this.go=function(D,u,f,o,g){if(typeof D=="number"){var q=y.pages[D];if(n(q))return;D=q.page}setTimeout(function(){O=!1},200);for(var I=[{x:v},{x:-v},{y:P},{y:-P}],R=[{x:0},{x:0},{y:0},{y:0}],le=[{x:v/2,alpha:0},{x:-v/2,alpha:0},{y:P/2,alpha:0},{y:-P/2,alpha:0}],N=r,L=y.speed,ee=0;ee<y.transitionTable.length;ee++)if(y.transitionTable[ee][0]==X&&y.transitionTable[ee][1]==D){N=y.transitionTable[ee][2],n(y.transitionTable[ee][3])||(L=y.transitionTable[ee][3]);break}n(f)&&(f=N),n(o)&&(o=L),y.speed=o;function z(pe){pe[0].uncache(),pe[1].uncache(),y.transitioning=!1,y.dispatchEvent("pagetransitioned"),y.removeChild(y.lastPage),f=="fan"&&(u=="right"||u=="down"?(y.lastPage.rotation=0,y.lastPage.regY=0,y.lastPage.mov(0,-y.lastPage.height)):(y.page.rotation=0,y.page.regY=0,y.page.mov(0,-y.lastPage.height))),y.removeChild(x),y.removeChild(E),K(X),F=!0}function $(pe){y.removeChild(y.lastPage),t.animate(pe.shift(),{alpha:0},y.speed/2,null,z,pe)}if(y.direction=u,D==""||D==null)y.page=X,y.dispatchEvent("nothing");else if(typeof D=="string")y.page=X,y.dispatchEvent(D);else{if(D==X)return;n(u)&&(u="right");var xe=p.indexOf(u);if(!F)return;F=!1,D.x=0,D.y=0,D.alpha=D.zimOriginalAlpha;var ie,ke=["pixelDark","pixelLight","pixelZIM","bubbleDark","bubbleLight","bubbleZIM","lineDark","lineLight","lineZIM"];if(ke.indexOf(f)>=0){var U=f;ie=!0,f="slide"}var Ee=["explodeDark","explodeLight","explodeZIM"];if(Ee.indexOf(f)>=0){var Q=f;ie=!0,f="fade"}if(f.type=="Emitter"&&(ie=f,f.horizontal||f.vertical?f="slide":f="fade"),y.transitioning=!0,f=="slide"?(D.x=-(I[xe].x|0),D.y=-(I[xe].y|0),D.cache(0,0,(v+1)/D.scaleX,(P+1)/D.scaleY),X.cache(0,0,(v+1)/X.scaleX,(P+1)/X.scaleY),y.addChild(D),y.addChild(X),t.animate(X,I[xe],y.speed,null,z,[X,D]),t.animate(D,R[xe],y.speed)):f=="reveal"?(D.cache(0,0,(v+1)/D.scaleX,(P+1)/D.scaleY),X.cache(0,0,(v+1)/X.scaleX,(P+1)/X.scaleY),y.addChild(D),y.addChild(X),t.animate(X,le[xe],y.speed,null,z,[X,D])):f=="fade"?(D.cache(0,0,(v+1)/D.scaleX,(P+1)/D.scaleY),X.cache(0,0,(v+1)/X.scaleX,(P+1)/X.scaleY),D.alpha=1,y.addChild(D),y.addChild(X),t.animate(X,{alpha:0},y.speed,null,z,[X,D])):f=="black"?(D.cache(0,0,(v+1)/D.scaleX,(P+1)/D.scaleY),X.cache(0,0,(v+1)/X.scaleX,(P+1)/X.scaleY),D.alpha=1,y.addChild(D),y.addChild(X),x.alpha=0,y.addChild(x),t.animate(x,{alpha:1},y.speed/2,null,$,[x,X,D])):f=="clear"?(D.cache(0,0,(v+1)/D.scaleX,(P+1)/D.scaleY),X.cache(0,0,(v+1)/X.scaleX,(P+1)/X.scaleY),D.alpha=0,y.addChild(D),y.addChild(X),t.animate(X,{alpha:0},y.speed/2),t.animate(D,{alpha:1},y.speed/2,null,z,[X,D],y.speed/2)):f=="white"?(D.cache(0,0,(v+1)/D.scaleX,(P+1)/D.scaleY),X.cache(0,0,(v+1)/X.scaleX,(P+1)/X.scaleY),D.alpha=1,y.addChild(D),y.addChild(X),E.alpha=0,y.addChild(E),t.animate(E,{alpha:1},y.speed/2,null,$,[E,X,D])):f=="fan"?(D.cache(0,0,(v+1)/D.scaleX,(P+1)/D.scaleY),X.cache(0,0,(v+1)/X.scaleX,(P+1)/X.scaleY),D.alpha=1,u=="right"||u=="down"?(y.addChild(D),y.addChild(X),X.regY=X.height,X.mov(0,X.height),t.animate(X,{rotation:-90},y.speed,null,z,[X,D])):(y.addChild(X),y.addChild(D),D.regY=X.height,D.mov(0,X.height),D.rotation=-90,t.animate(D,{rotation:0},y.speed,null,z,[X,D]))):(y.transitioning=!1,y.addChild(D),y.removeChild(X),F=!0),ie){var G=xe<2,ue,fe;if(U||f=="slide"){U?(U=="lineDark"||U=="lineLight"?ue=new t.Rectangle(G?30:v+5,G?P+5:30,U=="lineDark"?t.dark:t.white).alp(.2):U=="lineZIM"?ue=new t.Rectangle(G?50:v+5,G?P+5:50,[t.green,t.yellow,t.orange,t.pink,t.blue]).alp(.5):U=="pixelDark"||U=="pixelLight"?ue=new t.Rectangle(40,40,t.clear,U=="pixelDark"?t.dark:t.white,2).alp(.7):U=="pixelZIM"?ue=new t.Rectangle(40,40,[t.green,t.yellow,t.orange,t.pink,t.blue]).alp(.7):U=="bubbleDark"||U=="bubbleLight"?ue=new t.Circle(30,t.clear,U=="bubbleDark"?t.dark:t.white,2).alp(.7):U=="bubbleZIM"&&(ue=new t.Circle(30,[t.green,t.yellow,t.orange,t.pink,t.blue]).alp(.7)),ue.centerReg({add:!1}),U=="lineDark"||U=="lineLight"||U=="lineZIM"?fe=new t.Emitter({obj:ue,life:.5,decayTime:.5,shrink:!1,force:0,gravity:0,width:0,startPaused:!0}):fe=new t.Emitter({obj:ue,num:6,life:.5,decayTime:.5,width:G?0:v,height:G?P:0,vertical:G,horizontal:!G,startPaused:!0})):fe=ie;var ye=[{x:0,y:P/2},{x:v,y:P/2},{x:v/2,y:0},{x:v/2,y:P}],H=[{x:v,y:P/2},{x:0,y:P/2},{x:v/2,y:P},{x:v/2,y:0}];fe.centerReg(a).spurt(null,y.speed),fe.x=ye[xe].x,fe.y=ye[xe].y,t.animate(fe,H[xe],y.speed,null,function(){U&&fe.dispose()})}else(Q||f=="fade")&&(Q?(Q=="explodeDark"||Q=="explodeLight"?ue=new t.Circle(150,Q=="explodeDark"?t.dark:t.white).alp(.5):Q=="explodeZIM"&&(ue=new t.Circle(130,[t.green,t.yellow,t.orange,t.pink,t.blue]).alp(.7)),fe=new t.Emitter({obj:ue,num:5,gravity:0,force:{min:20,max:40},life:.5,shrink:!1,decayTime:.5,startPaused:!0})):fe=ie,fe.centerReg(a).spurt(null,y.speed*.35),fe.on("fizzed",function(){Q&&fe.dispose()}));a&&a.type!="Stage"&&a.type!="StageGL"&&fe.particles&&a.shape&&fe.particles.setMask(a.shape)}for(a&&a.shape&&fe&&fe.particles&&fe.particles.setMask(a.shape),ne(X),y.lastPage=X,y.page=D,y.index=-1,ee=0;ee<y.pages.length;ee++){var re=y.pages[ee].page;re==y.page&&(y.index=ee)}f=="none"&&K(D),n(g)&&(g=!1),y.fromSwipe=g,y.dispatchEvent("page"),X=D,y.setArrows(e.index),a.stage&&a.stage.update()}},a&&a.shape&&(a.mouseChildren=!0,a.mouseEnabled=!0,y.setMask(a.shape)),this.resize=function(){v=a.getBounds().width,P=a.getBounds().height,(r!="none"||l!=[])&&k()},this.puff=function(D){for(var u=0;u<e.length;u++)y.addChild(e[u].page);y.addChild(X),D>0&&setTimeout(function(){y.settle()},D*(A=="s"?1e3:1))},this.settle=function(){y.removeAllChildren(),y.addChild(X),y.dispatchEvent("puffed")},this.disable=function(){y.active=!1},this.enable=function(){y.active=!0},this.arrows={},this.setArrows=function(){if(!t.isEmpty(y.arrows)){var D=y.pages[y.index];if(!(!D||!D.swipe)){var u=D.swipe,f=[t.LEFT,t.RIGHT,t.DOWN,t.UP];t.loop(f,function(o,g){u[g]?t.loop(y.arrows[o],function(q){if(q.setDisabled===!0){q.activate(!1,y.arrowDisableColor),q.setDisabled=null;return}q.enabled||q.activate(!0,q.arrowBackgroundColor)}):t.loop(y.arrows[o],function(q){if(q.setDisabled===!1){q.activate(!0,q.arrowBackgroundColor),q.setDisabled=null;return}q.enabled&&q.activate(!1,y.arrowDisableColor)})}),y.stage&&y.stage.update()}}},y.added(function(D){if(D.frame&&D.frame.scaling=="full"){if(!t.globalManager){var u=t.globalManager=new t.Manager;u.frame=D.frame,u.event=D.frame.on("resize",function(){u.resize()})}t.globalManager.add(y)}}),c!==!1&&t.styleTransforms(this,w),this.dispose=function(D,u,f){if(t.globalManager){var o=t.globalManager;o.remove(y),t.globalManager.items.length==0&&(o.frame.off("resize",o.event),o.dispose(),t.globalManager=null)}return y.swipe.off("swipe",Z),y.swipe.dispose(),f||this.zimContainer_dispose(!0),!0}},t.extend(t.Pages,t.Container,["clone","dispose"],"zimContainer",!1),t.Arrow=function(e,r,i,l,a,s,c,d,C,T,h){var w="backgroundColor, rollBackgroundColor, pages, direction, type, newPage, trans, speed, style, group, inherit",A;if(A=lt(t.Arrow,arguments,w,this))return A;Le("71.2"),this.group=T;var y=C===!1?{}:t.getStyle("Arrow",this.group,h);n(l)&&(l=y.direction!=null?y.direction:"right"),n(e)&&(e=y.backgroundColor!=null?y.backgroundColor:t.blue),this.arrowBackgroundColor=e,n(r)&&(r=y.rollBackgroundColor!=null?y.rollBackgroundColor:t.blue.lighten(.2)),this.arrowRollBackgroundColor=r,n(a)&&(a=y.type!=null?y.type:"triangle"),n(s)&&(s=y.newPage!=null?y.newPage:null),n(c)&&(c=y.trans!=null?y.trans:null),n(d)&&(d=y.speed!=null?y.speed:null);var v,P,x,E,k;a=="triangle"?(v=new t.Triangle(45,45,45,e,null,null,null,null,-7).rot(90),P=new t.Triangle(45,45,45,r,null,null,null,null,-7).rot(90)):a=="thick"?(v=new t.Shape,x=v.graphics.f(e).command,k="AhFBdIiWAAIAAi4ICWAAIAAh7IEhDWIkhDXg",v.p(k).reg(-4),P=new t.Shape,E=P.graphics.f(r).command,P.p(k).reg(-4)):a=="thin"?(v=new t.Shape,x=v.graphics.f(e).command,k="AhBCIIBZhbIjWAAIAAhVIDaAAIhdhfIA9g+IDDDFIAAAAIAAAAIjDDGg",v.p(k).reg(-4),P=new t.Shape,E=P.graphics.f(r).command,P.p(k).reg(-4)):a=="angle"&&(v=new t.Shape,x=v.graphics.f(e).command,k="AiNC5IC4i5Ii4i5IAxgxIDqDqIjqDrg",v.p(k).reg(-3),P=new t.Shape,E=P.graphics.f(r).command,P.p(k).reg(-3)),this.zimButton_constructor(50,50,"",t.clear,t.clear,null,null,null,null,null,null,null,null,null,null,null,v,P),this.type="Arrow";var p=this;if(this.activate=function(Y,B){return n(Y)&&(Y=!0),n(B)&&(B=t.grey),B===!1||(Y?(p.enabled=!0,B!==!1&&(a=="triangle"?(p.icon.color=p.arrowBackgroundColor,p.rollIcon.color=p.arrowRollBackgroundColor):(x.style=p.arrowBackgroundColor,E.style=p.arrowRollBackgroundColor))):(p.enabled=!1,B!==!1&&(a=="triangle"?(p.icon.color=B,p.rollIcon.color=B):(x.style=B,E.style=B)))),p},n(i)||i.type!="Pages")return;var m=(mt?t.ACTIONEVENT=="mousedown":j.ACTIONEVENT=="mousedown")?"mousedown":"click";n(i.arrows)&&(i.arrows={}),n(i.arrows[l])&&(i.arrows[l]=[]),i.arrows[l].push(this);var S=_();S||this.activate(!1,i.arrowDisableColor);function _(){var Y=i.pages[i.index];if(!(!Y||!Y.page||!Y.page.zimSwipeArray)){var B=Y.page.zimSwipeArray;if(l=="left")return B[0];if(l=="right")return B[1];if(l=="up")return B[2];if(l=="down")return B[3]}}this.expand(),this.on(m,function(){if(!i.transitioning){var Y=_();Y&&i.go(Y,l,c,d)}}),C!==!1&&t.styleTransforms(this,y),this.clone=function(){return p.cloneProps(new t.Arrow(e,r,i,l,a,s,c,d,C,this.group,h))}},t.extend(t.Arrow,t.Button,"clone","zimButton",!1),t.HotSpots=function(e,r,i){var l="spots, local, mouseDowns",a;if(a=lt(t.HotSpots,arguments,l,this))return a;Le("72"),this.zimContainer_constructor(null,null,null,null,!1),this.type="HotSpots",n(r)&&(r=!0),n(i)&&(i=!1);var s=(mt?t.ACTIONEVENT=="mousedown":j.ACTIONEVENT=="mousedown")?"mousedown":"click",c=this,d,C,T=c.hotSpots=[];n(e)&&(e=[]);for(var h=0;h<e.length;h++)w(e[h]);function w(y){var v=null;if(!Array.isArray(y.rect)){if(v=y.rect,!v){$e("zim controls - HotSpots(): HotSpot "+y.page+" "+y.rect+" button does not exist");return}y.rect=[v.x,v.y,v.width||1,v.height||1]}C=new t.HotSpot(y.page,y.rect[0],y.rect[1],y.rect[2],y.rect[3],y.call,y.callOver,y.callOut,r,y.talk),C.zimHSpage=y.page,C.button=v,T.push(C),C.on(s,A),v&&n(y.callOver)&&n(y.callOut)&&(C.spot.mouseEnabled=!1,C.spot.mouseChildren=!1,v.zimHScall=y.call,v.zimHSEvent=v.on(s,A,!0),i||(v.zimHSMDEvent=v.on("mousedown",function(P){P.stopImmediatePropagation()})),v.cur("pointer"))}function A(y){y.stopImmediatePropagation&&y.stopImmediatePropagation(),j.event&&(j.event.cancelBubble=!0),typeof y.currentTarget.zimHScall=="function"&&y.currentTarget.zimHScall(y)}this.add=this.addHotSpot=function(y,v,P,x,E,k){d={page:y,rect:v,call:P,callOver:x,callOut:E,talk:k},e.push(d),w(d)},this.show=function(){for(var y=0;y<T.length;y++)C=T[y],C.button||(C.spot.alpha=.2)},this.hide=function(){for(var y=0;y<T.length;y++)C=T[y],C.spot.alpha=0},this.remove=this.removeHotSpots=function(y,v){for(var P=e.length-1;P>=0;P--)d=e[P],C=T[P],v&&!Array.isArray(v)&&(v=[v.x,v.y,v.getBounds().width,v.getBounds().height]),(n(y)&&n(v)||n(v)&&y==d.page||n(y)&&t.arraysEqual(v,d.rect)||y==d.page&&t.arraysEqual(v,d.rect))&&(e.splice(P,1),C.button&&(C.button.off(s,C.button.zimHSEvent),C.button.zimHSEvent=null,i||(C.button.off("mousedown",C.button.zimHSMDEvent),C.button.zimHSMDEvent=null)),C.off(s,A),C.dispose(),T.splice(P,1))},this.dispose=function(){for(var y=0;y<T.length;y++)C=T[y],C.button&&(C.button.off(s,C.button.zimHSEvent),C.button.zimHSCall=null,C.button.zimHSEvent=null,i||(C.button.off("mousedown",C.button.zimHSMDEvent),C.button.zimHSMDEvent=null)),C.off(s,A),C.dispose();return!0}},t.extend(t.HotSpots,t.Container,"dispose","zimContainer",!1),t.HotSpot=function(e,r,i,l,a,s,c,d,C,T){var h="obj, x, y, width, height, call, callOver, callOut, local, talk",w;if(w=lt(t.HotSpot,arguments,h,this))return w;if(Le("73"),this.zimContainer_constructor(null,null,null,null,!1),this.type="HotSpot",n(e)||!e.addChild){$e(`zim controls - HotSpot():
Please pass in container object for obj`);return}if(!(e instanceof Ne.Container)){$e(`zim controls - HotSpot():
Objects passed in should be Containers`);return}if(n(r)||n(i)||n(l)||n(a)){$e(`zim controls - HotSpot():
Please pass in x, y, width, height`);return}n(C)&&(C=!0);var A=(mt?t.ACTIONEVENT=="mousedown":j.ACTIONEVENT=="mousedown")?"mousedown":"click",y=l,v=a,P,x,E;if(C)P=new t.Point(r,i),x=l,E=a;else{P=e.globalToLocal(r,i);var k=e.globalToLocal(r+y,i+v);x=k.x-P.x,E=k.y-P.y}var p=new t.Shape(l,a);if(p.talk=n(T)?"HotSpot":T,p.alpha=0,p.graphics.f("black").dr(0,0,x,E),p.x=P.x,p.y=P.y,p.cur("pointer"),p.expand(0),this.spot=p,typeof s=="function")var m=p.on(A,function(Y){s(Y)});if(typeof c=="function")var S=p.on("mouseover",function(Y){c(Y)});if(typeof d=="function")var _=p.on("mouseout",function(Y){d(Y)});e.addChild(p),this.show=function(){p.alpha=.5,e.stage&&e.stage.update()},this.hide=function(){p.alpha=0,e.stage&&e.stage.update()},this.dispose=function(){return m&&p.off(A,S),S&&p.off("mouseover",S),_&&p.off("mouseout",_),e.removeChild(p),p=null,!0}},t.extend(t.HotSpot,t.Container,"dispose","zimContainer",!1),t.Guide=function(e,r,i,l,a,s,c,d){var C="obj, vertical, pixels, hideKey, pixelKey, style, group, inherit",T;if(T=lt(t.Guide,arguments,C,this))return T;Le("76"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Guide",this.group=c;var h=s===!1?{}:t.getStyle(this.type,this.group,d);if(n(e)&&(j.zdf?e=j.zdf.stage:e="stage"),n(r)&&(r=h.vertical!=null?h.vertical:!0),e!="stage"&&(!e.addChild||!e.getBounds||!e.getBounds())){Rn("zim controls - Guide(): Please provide container with bounds for the obj (setBounds())");return}n(i)&&(i=h.pixels!=null?h.pixels:!(zdf&&zdf.scaling=="full")),n(l)&&(l=h.hideKey!=null?h.hideKey:"G"),n(a)&&(a=h.pixelKey!=null?h.pixelKey:"P");var w=this,A,y=80,v=26,P=y/6+y/2,x=v*2,E,k,p;r?(p=m("#00c5af","white","white"),p.shape.regX=y+y/6,p.shape.regY=v/2,p.label.x=-y/2-y/6):(p=m("#d61fa0","white","white"),p.shape.regX=y/2,p.shape.regY=v+v/4,p.label.y=-v*3/4);function m(F,D,u){var f=new t.Container({style:!1});return f.shape=new t.Shape,f.shape.graphics.s(D).ss(1).f(F).r(0,0,y,v),f.shape.alpha=.9,f.addChild(f.shape),f.label=new Ne.Text("10","16px arial",u),f.label.textAlign="center",f.label.textBaseline="middle",f.addChild(f.label),f.mouseChildren=!1,f.mouseEnabled=!1,f}var S;e!="stage"&&e.addChild(w);var _=t.added(w,O),Y=!1,B,b,X,V;function O(){if(e=="stage"?(S=w.stage,e=S):S=e.stage,S.frame&&S.frame.scaling=="full"){if(!t.globalManager){var F=t.globalManager=new t.Manager;F.frame=S.frame,F.event=S.frame.on("resize",function(){F.resize()})}t.globalManager.add(w)}e.addChild(w),B=e.getBounds().width,b=e.getBounds().height,r?(p.y=b/2,p.label.text="x:"+(w.pixels?Math.round(B*70/100):"70%")):(p.x=B/2,p.label.text="y:"+(w.pixels?Math.round(b*70/100):"70%")),X=new t.Shape,w.addChild(X),r?X.x=B*.7:X.y=b*.7,Y||(e.addChild(w),K()),S.off("stagemousemove",A),A=S.on("stagemousemove",W),S.update()}var Z={x:0,y:0};function W(F){var D,u;F?(D=e.globalToLocal(F.rawX/t.scaX,F.rawY/t.scaY),Z=D):D={x:Z.x,y:Z.y},i?r?(u=Math.round(Math.abs(D.x-X.x)),p.label.text="x:"+Math.max(0,Math.min(u,Math.round(B))),p.y=Math.max(x,Math.min(D.y,k))):(u=Math.round(Math.abs(D.y-X.y)),p.label.text="y:"+Math.max(0,Math.min(u,Math.round(b))),p.x=Math.max(P,Math.min(D.x,E))):r?(u=Math.round(Math.abs(D.x-X.x)/B*100),p.label.text="x:"+Math.max(0,Math.min(u,100))+"%",p.y=Math.max(x,Math.min(D.y,k))):(u=Math.round(Math.abs(D.y-X.y)/b*100),p.label.text="y:"+Math.max(0,Math.min(u,100))+"%",p.x=Math.max(P,Math.min(D.x,E))),S&&S.update()}function K(){Y=!0,B=e.getBounds().width,b=e.getBounds().height;var F;r?(F="ew-resize",V=new Ne.Rectangle(0,0,B,0)):(F="ns-resize",V=new Ne.Rectangle(0,0,0,b)),t.noDrag(X),setTimeout(function(){t.drag(X,V,null,F,F,null,null,!0)},500),S.mouseMoveOutside=!0,S.enableMouseOver(10),E=B-y*2/3,k=b-v-v,X.uncache();var D=X.graphics;r?(D.c().s("rgba(0,255,255,.1)").ss(20).mt(0,0).lt(0,b),D.f().s("white").ss(2).mt(0,0).lt(0,b),D.s("#00c5af").sd([20,20]).mt(0,0).lt(0,b).sd(),X.cache(-10,0,20,b)):(D.c().s("rgba(255,0,255,.1)").ss(20).mt(0,0).lt(B,0),D.f().s("white").ss(2).mt(0,0).lt(B,0),D.s("#d61fa0").sd([20,20]).mt(0,0).lt(B,0).sd(),X.cache(0,-10,B,20)),r?p.x=B:p.y=b,w.addChild(p)}Object.defineProperty(this,"pixels",{get:function(){return i},set:function(F){i=F,w.resize()}}),j.addEventListener("keydown",ne);function ne(F){F||(F=event),S&&(String.fromCharCode(F.keyCode)==l.toUpperCase()&&w.toggle(),String.fromCharCode(F.keyCode)==a.toUpperCase()&&(w.pixels=!w.pixels))}this.toggled=!0,this.toggle=function(F){return F===!0?w.visible=w.toggled=!0:F===!1?w.visible=w.toggled=!1:(w.visible=!w.visible,w.toggled=w.visible),S&&(S.off("stagemousemove",A),w.visible&&(A=S.on("stagemousemove",W,w)),S.update()),w},this.resize=function(){return w?(S&&(K(),W()),!0):!1},s!==!1&&t.styleTransforms(this,h),this.dispose=function(){if(!w)return!1;if(t.globalManager){var F=t.globalManager;F.remove(w),t.globalManager.items.length==0&&(F.frame.off("resize",F.event),F.dispose(),t.globalManager=null)}return t.noDrag(X),clearInterval(_),w.removeAllChildren(),j.removeEventListener("keydown",ne),w.parent&&w.parent.removeChild(w),w=null,!0}},t.extend(t.Guide,t.Container,"clone","zimContainer",!1),t.Grid=function(e,r,i,l,a,s,c,d,C,T,h){var w="obj, color, pixels, hideKey, pixelKey, allowToggle, cache, numbers, style, group, inherit",A;if(A=lt(t.Grid,arguments,w,this))return A;Le("78"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Grid",this.group=T;var y=C===!1?{}:t.getStyle(this.type,this.group,h);if(n(e)&&(j.zdf?e=j.zdf.stage:e="stage"),n(r)&&(r=y.color!=null?y.color:t.black),e!="stage"&&(!e.addChild||!e.getBounds||!e.getBounds())){Rn("zim controls - Grid(): Please provide container with bounds for the obj (setBounds())");return}n(i)&&(i=y.pixels!=null?y.pixels:!(zdf&&zdf.scaling=="full")),n(l)&&(l=y.hideKey!=null?y.hideKey:"G"),n(a)&&(a=y.pixelKey!=null?y.pixelKey:"P"),n(s)&&(s=y.allowToggle!=null?y.allowToggle:!0),n(c)&&(c=y.cache!=null?y.cache:!0),n(d)&&(d=y.numbers!=null?y.numbers:!0);var v=this,P=10,x;this.mouseChildren=!1,this.mouseEnabled=!1;var E=80,k=26,p=v.numbersX=S("#dddddd",r,"#333333");p.shape.regX=E/2,p.shape.regY=-k/4,p.label.y=k*3/4;var m=v.numbersY=S("#dddddd",r,"#333333");m.shape.regX=-E/6,m.shape.regY=k/2,m.label.x=E/2+E/6,d||(p.visible=!1,m.visible=!1);function S(o,g,q){var I=new t.Container({style:!1});return I.shape=new Ne.Shape,I.shape.graphics.s(g).ss(1).f(o).r(0,0,E,k),I.shape.alpha=.9,I.addChild(I.shape),I.label=new Ne.Text("10","16px arial",q),I.label.textAlign="center",I.label.textBaseline="middle",I.addChild(I.label),I.mouseChildren=!1,I.mouseEnabled=!1,I}var _=E/6+E/2,Y=k*2,B,b;p.x=_,m.y=Y,p.label.text="x:0",m.label.text="y:0";var X;e!="stage"&&e.addChild(v);var V=t.added(v,Z),O=!1;function Z(){if(e=="stage"?(X=v.stage,e=X):X=e.stage,X.frame&&X.frame.scaling=="full"){if(!t.globalManager){var o=t.globalManager=new t.Manager;o.frame=X.frame,o.event=X.frame.on("resize",function(){o.resize()})}t.globalManager.add(v)}O||(u(),e.addChild(v)),X.off("stagemousemove",x),x=X.on("stagemousemove",K),X.update()}var W={x:0,y:0};function K(o){var g;o?(g=e.globalToLocal(o.rawX/t.scaX,o.rawY/t.scaY),W=g):g={x:W.x,y:W.y},i?(p.label.text="x:"+Math.max(0,Math.min(Math.round(g.x),Math.round(ne))),p.x=Math.max(_,Math.min(g.x,B)),m.label.text="y:"+Math.max(0,Math.min(Math.round(g.y),Math.round(F))),m.y=Math.max(Y,Math.min(g.y,b))):(p.label.text="x:"+Math.max(0,Math.min(Math.round(g.x/ne*100),100))+"%",p.x=Math.max(_,Math.min(g.x,B)),m.label.text="y:"+Math.max(0,Math.min(Math.round(g.y/F*100),100))+"%",m.y=Math.max(Y,Math.min(g.y,b))),X&&X.update()}var ne,F,D;function u(){O=!0,e&&e.getBounds&&(ne=e.getBounds().width,F=e.getBounds().height),X&&(X.mouseMoveOutside=!0,X.enableMouseOver(10)),B=ne-E*2/3,b=F-k-k,D=v.grid=new t.Container({style:!1}),v.addChild(D);var o=new Ne.Shape;D.addChild(o);var g=o.graphics;g.s(r).ss(1);var q=new Ne.Shape;D.addChild(q);var I;if(i){for(I=0;I<ne/P;I++)g.mt(I*P,0).lt(I*P,F);for(I=0;I<F/P;I++)g.mt(0,I*P).lt(ne,I*P);for(o.alpha=.3,g=q.graphics,g.s(r).ss(1),I=0;I<ne/(P*10);I++)g.mt(I*(P*10),0).lt(I*(P*10),F);for(I=0;I<F/(P*10);I++)g.mt(0,I*(P*10)).lt(ne,I*(P*10))}else{for(I=1;I<20+1;I++)g.mt(I*ne/20,0).lt(I*ne/20,F);for(I=1;I<20;I++)g.mt(0,I*F/20).lt(ne,I*F/20);for(o.alpha=.3,g=q.graphics,g.s(r).ss(1),I=1;I<10;I++)g.mt(I*ne/10,0).lt(I*ne/10,F);for(I=1;I<10;I++)g.mt(0,I*F/10).lt(ne,I*F/10)}var R=80;g.s("#FFFFFF").ss(8),g.mt(ne/2,F/2-R/2).lt(ne/2,F/2+R/2),g.mt(ne/2-R/2,F/2).lt(ne/2+R/2,F/2),g.s("#000000").ss(4),g.mt(ne/2,F/2-R/2).lt(ne/2,F/2+R/2),g.mt(ne/2-R/2,F/2).lt(ne/2+R/2,F/2),g.s(r).ss(c?3:2),g.dr(0,0,ne,F),q.alpha=.5,c&&D.cache(0,0,ne,F),v.addChild(p),v.addChild(m),X&&X.update()}Object.defineProperty(this,"pixels",{get:function(){return i},set:function(o){i=o,v.resize()}}),j.addEventListener("keydown",f);function f(o){o||(o=event),!(!X||!s)&&(String.fromCharCode(o.keyCode)==l.toUpperCase()&&v.toggle(),String.fromCharCode(o.keyCode)==a.toUpperCase()&&(v.removeChild(D),D=null,v.pixels=!v.pixels))}this.toggled=!0,this.toggle=function(o){return o===!0?v.visible=v.toggled=!0:o===!1?v.visible=v.toggled=!1:(v.visible=!v.visible,v.toggled=v.visible),X.off("stagemousemove",x),v.visible&&(x=X.on("stagemousemove",K,v)),X&&X.update(),v},this.resize=function(){return v?(v.removeChild(D),D=null,X&&(u(),K(),setTimeout(function(){v&&v.removeChild(D),D=null,u()},200)),!0):!1},C!==!1&&t.styleTransforms(this,y),this.dispose=function(){if(t.globalManager){var o=t.globalManager;o.remove(v),t.globalManager.items.length==0&&(o.frame.off("resize",o.event),o.dispose(),t.globalManager=null)}return clearInterval(V),v.removeAllChildren(),j.removeEventListener("keydown",f),v.parent&&v.parent.removeChild(v),v=null,!0}},t.extend(t.Grid,t.Container,"clone","zimContainer",!1),t.Wrapper=function(e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,x,E,k,p,m,S,_,Y){var B="items, width, spacingH, spacingV, wrapperType, align, valign, alignInner, valignInner, flip, reverse, bottomFull, colSize, rowSize, height, minSpreadNum, minStretchNum, percentVoidH, offsetVoidH, percentVoidV, offsetVoidV, style, group, inherit",b=null;if(b=lt(t.Wrapper,arguments,B,this))return b;Le("78.5"),this.group=_;var X=S===!1?{}:t.getStyle("Wrapper",this.group,Y);n(r)&&(r=X.width!=null?X.width:300),n(v)&&(v=X.height!=null?X.height:null),n(i)&&(i=X.spacingH!=null?X.spacingH:null),n(l)&&(l=X.spacingV!=null?X.spacingV:null),n(a)&&(a=X.wrapperType!=null?X.wrapperType:"spacing"),n(s)&&(s=X.align!=null?X.align:"left"),n(c)&&(c=X.valign!=null?X.valign:"top"),n(d)&&(d=X.alignInner!=null?X.alignInner:"left"),n(C)&&(C=X.valignInner!=null?X.valignInner:"bottom"),n(T)&&(T=X.flip!=null?X.flip:!1),n(h)&&(h=X.reverse!=null?X.reverse:!1),n(w)&&(w=X.bottomFull!=null?X.bottomFull:!1),n(A)&&(A=X.colSize!=null?X.colSize:100),n(y)&&(y=X.rowSize!=null?X.rowSize:null),n(i)&&(i=0),n(l)&&(l=0),n(P)&&(P=X.minSpreadNum!=null?X.minSpreadNum:2),n(x)&&(x=X.minStretchNum!=null?X.minStretchNum:3),n(E)&&(E=X.percentVoidH!=null?X.percentVoidH:0),n(k)&&(k=X.offsetVoidH!=null?X.offsetVoidH:0),n(p)&&(p=X.percentVoidV!=null?X.percentVoidV:0),n(m)&&(m=X.offsetVoidV!=null?X.offsetVoidV:0);var V=200,O=0,Z=0,W=0,K=r;this.items=[];var ne,F;a=="spread"?ne=!0:a=="stretch"&&(F=!0),this.zimContainer_constructor(r,V),this.type="Wrapper",s=="middle"&&(s="center"),c=="middle"&&(c="center"),d=="middle"&&(d="center"),C=="middle"&&(C="center");var D=this;this.add=function(f){return this.addAt(f,this.numChildren-1),D},this.addAt=function(f,o){return n(f)||((n(o)||o<0)&&(o=0),Array.isArray(f)||(f=[f]),t.loop(f,function(g,q){D.addChildAt(g,o+q)}),D.resize()),D},this.remove=function(f){return Array.isArray(f)||(f=[f]),t.loop(f,function(o){o&&o.removeFrom&&o.removeFrom()},!0),D.resize(),D},this.convert=function(f,o){var g=[];return f.loop(function(q){g.push(q),o&&q.cache()}),D.add(g),f.removeFrom(),D},this.resize=function(f,o){if(!D.preventResize){n(f)||(r=f),n(o)||(v=o),this.items2D=[],this.items=[],O=0,Z=0,W=0,n(E)&&(E=0),n(k)&&(k=0);var g=t.Pick.choose(E),q=t.Pick.choose(k);K=r*(100-g)/100,this.setBounds(K,V);var I=0,R=0,le=0;D.cols=0,D.rows=0;var N=[],L=[0],ee=null,z=0,$=null,xe=t.Pick.choose(A);a!="column"&&(xe=null);var ie=t.Pick.choose(y),ke=0,U,Ee;t.loop(this,function(pe,te){w||T?pe.pos(I+(pe.marginRight?pe.marginRight:0),R+(pe.marginTop?pe.marginTop:0),t.RIGHT,T?t.TOP:t.BOTTOM):pe.pos(I+(pe.marginLeft?pe.marginLeft:0),R+(pe.marginTop?pe.marginTop:0)),ke++,$=pe.boundsToGlobal();var ge=D.globalToLocal($.x,$.y),Ae=D.globalToLocal($.x+$.width,$.y+$.height);if(w||T?U=D.globalToLocal($.x,$.y):U=D.globalToLocal($.x+$.width,$.y+$.height),pe.wrapHeight=Ae.y-ge.y,pe.wrapWidth=Ae.x-ge.x,g){var ae=D.globalToLocal($.x+pe.wrapWidth/2,$.y+pe.wrapHeight/2);pe.centerX=ae.x,pe.centerY=ae.y,ae=null}xe?Ee=xe*ke:w||T?Ee=K-U.x+(pe.marginLeft?pe.marginLeft:0)+i:Ee=U.x+(pe.marginRight?pe.marginRight:0)+i,Math.round(Ee)-i>K&&(u(N,ee,le,z,xe,g,q,!1),z=0,D.cols==0&&(D.cols=te),I=0,R+=le+(ie?0:t.Pick.choose(l)),le=0,ie=t.Pick.choose(y),g=t.Pick.choose(E),q=t.Pick.choose(k),ke=0,D.items2D.push(t.copy(N)),D.rows++,L.push(R),N=[],w||T?pe.pos(I+(pe.marginRight?pe.marginRight:0),R+(pe.marginTop?pe.marginTop:0),t.RIGHT,T?t.TOP:t.BOTTOM):pe.pos(I+(pe.marginLeft?pe.marginLeft:0),R+(pe.marginTop?pe.marginTop:0)),g&&($=pe.boundsToGlobal(),ae=D.globalToLocal($.x+pe.wrapWidth/2,$.y+pe.wrapHeight/2),pe.centerX=ae.x,pe.centerY=ae.y,ae=null),ke++,xe?Ee=0:(Ee=(pe.marginLeft?pe.marginLeft:0)+pe.wrapWidth+(pe.marginRight?pe.marginRight:0)+t.Pick.choose(i),w||T?U.x=K-((pe.marginRight?pe.marginRight:0)+pe.wrapWidth):U.x=(pe.marginLeft?pe.marginLeft:0)+pe.wrapWidth)),N.push(pe),z+=pe.wrapWidth,I=Ee,ie?le=ie:le=Math.max(le,pe.wrapHeight+(pe.marginTop?pe.marginTop:0)+(pe.marginBottom?pe.marginBottom:0)),ee=new t.Point(U.x,R+le)},h&&w?!1:h||w),D.numChildren>0&&(D.cols==0&&(D.cols=D.numChildren),D.items2D.push(t.copy(N)),L.push(R),u(N,ee,le,z,xe,g,q,!0),D.rows+=1);var Q=t.Pick.choose(c),G;n(Q)&&(Q="top"),w&&(G=R+le-V,t.loop(this,function(pe){pe.mov(0,G)}),D.items2D.reverse(),t.loop(D.items2D,function(pe){pe.reverse()}));var ue=t.Pick.choose(p),fe=t.Pick.choose(m);if(!n(ue)){n(fe)&&(fe=0);var ye=R+le,H=ye*ue/100,re=ye/2+fe/100*ye;t.loop(L,function(pe,te){if(pe>=re)return t.loop(D.items2D,function(ge){t.loop(ge,function(Ae){Ae.mov(0,H)})},null,1,te),"break"})}return n(v)||(c=="bottom"?(G=v-(R+le),t.loop(this,function(pe){pe.mov(0,G)})):(c=="center"||c=="middle")&&(G=(v-(R+le))/2,t.loop(this,function(pe){pe.mov(0,G)}))),D.setBounds(null),$=D.getBounds(),$&&D.setBounds(0,$.y,r,$.height),t.loop(D.items2D,function(pe){t.loop(pe,function(te){D.items.push(te)})}),this.stage&&this.stage.update(),D}};function u(f,o,g,q,I,R,le,N){var L=t.Pick.choose(s),ee=t.Pick.choose(ne),z=t.Pick.choose(F),$=t.Pick.choose(T),xe=t.Pick.choose(d),ie=t.Pick.choose(C);n(L)&&(L="left"),n(ie)&&(ie="top"),n(xe)&&(xe="left"),$&&f.reverse();var ke=((100-R)/100/2+le/100)*r,U=r*R/100,Ee=0,Q=!1,G,ue;if(I){(w||T)&&f.reverse();var fe=K%I,ye=K/2+le/100*K,H=0,re=0,pe=Math.floor(K/I);D.rows!=0&&N&&(Q=!0),t.loop(f,function(de,se){Ee=0,xe=="right"?re=I*se+H+I-de.wrapWidth:xe=="center"||xe=="middle"?re=I*se+H+(I-de.wrapWidth)/2:re=I*se+H,G=de.x,de.pos(re),ue=de.x-G,de.centerX+=ue,de.marginLeft&&(Ee+=de.marginLeft),de.marginRight&&(Ee-=de.marginRight);var Ie;L=="center"||L=="middle"?(Ie=Math.floor(K/I)-f.length,Ee+=(fe+(Ie?Ie*I:0))/2):L=="right"&&(Ie=Math.floor(K/I)-f.length,Ee+=fe+(Ie?Ie*I:0)),de.mov(Ee),de.centerX+=Ee}),L=="center"&&Q&&(f.length+pe)%2!=0&&(Ee=(ye<=K/2?-1:1)*I/2,t.loop(f,function(de){de.mov(Ee),de.centerX+=Ee}))}else if(ee||z){var te,ge;ee?te=f.length?(K-q)/(f.length+1):0:z&&(te=f.length-1>0?(K-q)/(f.length-1):0),f.length<x&&D.rows!=0&&N&&(te=W,Q=!0),W=te;var Ae=0;if((w||T)&&f.reverse(),t.loop(f,function(de,se){Ee=0,G=de.x,de.pos(te*(se+(ee?1:0))+Ae),ue=de.x-G,de.centerX+=ue,Q||(de.marginLeft&&(Ee+=de.marginLeft),de.marginRight&&(Ee-=de.marginRight),de.mov(Ee),de.centerX+=Ee),Ae+=de.wrapWidth}),Q){Ee=0;var ae=ee?te:0;ue=0,t.loop(f,function(de){if(L=="right")G=de.x,de.pos(ae,null,t.RIGHT),ue=de.x-G,ae+=de.wrapWidth+te;else if(L=="center"){var se=(K-(Ae+(f.length-1)*te))/2-(ee?te:0);G=de.x,de.pos(ae+se,null,t.RIGHT),ue=de.x-G,ae+=de.wrapWidth+te}de.marginLeft&&(Ee+=de.marginLeft),de.marginRight&&(Ee-=de.marginRight),de.mov(Ee),de.centerX+=ue+Ee},!0)}}else L=="center"?t.loop(f,function(de){Ee=((w||T?0:r)-o.x)/2,(ee||z)&&(de.marginLeft&&(Ee+=de.marginLeft),de.marginRight&&(Ee-=de.marginRight)),de.mov(Ee),de.centerX+=Ee}):(w||T)&&L=="left"?(ge=f[f.length-1].marginLeft,t.loop(f,function(de){Ee=-o.x+(ge||0),ee&&(Ee+=Z),de.mov(Ee),de.centerX+=Ee})):!(w||T)&&L=="right"?(ge=f[f.length-1].marginRight,t.loop(f,function(de){Ee=r-o.x-(ge||0),ee&&(Ee-=Z),de.mov(Ee),de.centerX+=Ee})):ee&&ee&&t.loop(f,function(de){Ee=Z*(L=="right"?-1:1),de.mov(Ee),de.centerX+=Ee});R&&(ke=(1/2+le/100)*K,U=r*R/100,t.loop(f,function(de){I||z||ee?L=="right"?de.centerX>K-ke&&de.mov(U):L=="center"?Math.round(de.centerX)==Math.round(K/2+le/100*K)?de.mov(U/2):Math.round(de.centerX)>Math.round(K/2+le/100*K)&&de.mov(U):de.centerX>ke&&de.mov(U):!(w||T)&&L=="right"?de.centerX<r-ke&&de.mov(-U):!(w||T)&&L=="center"?de.centerX>r/2+le/100*K?de.mov(U/2):de.mov(-U/2):(w||T)&&L=="right"?de.centerX>K-ke&&de.mov(U):(w||T)&&L=="center"?de.centerX>K/2+le/100*K&&de.mov(U):de.centerX>ke&&de.mov(U)})),ee&&(O+=te,Z=O/(D.rows+1)),ie=="center"?t.loop(f,function(de){de.mov(0,(g-de.wrapHeight)/2*(w?-1:1))}):!w&&ie=="bottom"?t.loop(f,function(de){de.mov(0,g-de.wrapHeight-(de.marginBottom?de.marginBottom:0))}):w&&ie=="top"&&t.loop(f,function(de){de.mov(0,-(g-de.wrapHeight)+(de.marginTop?de.marginTop:0))})}Object.defineProperty(D,"spacingH",{get:function(){return i},set:function(f){i=f,this.resize()}}),Object.defineProperty(D,"spacingV",{get:function(){return l},set:function(f){l=f,this.resize()}}),Object.defineProperty(D,"wrapperType",{get:function(){return a},set:function(f){f=="spread"?ne=!0:ne=!1,f=="stretch"?F=!0:F=!1,a=f,this.resize()}}),Object.defineProperty(D,"align",{get:function(){return s},set:function(f){s=f,s=="middle"&&(s="center"),this.resize()}}),Object.defineProperty(D,"valign",{get:function(){return c},set:function(f){c=f,c=="middle"&&(c="center"),this.resize()}}),Object.defineProperty(D,"alignInner",{get:function(){return d},set:function(f){d=f,d=="middle"&&(d="center"),this.resize()}}),Object.defineProperty(D,"valignInner",{get:function(){return C},set:function(f){C=f,C=="middle"&&(C="center"),this.resize()}}),Object.defineProperty(D,"colSize",{get:function(){return A},set:function(f){A=f,a=="column"&&this.resize()}}),Object.defineProperty(D,"rowSize",{get:function(){return y},set:function(f){y=f,this.resize()}}),Object.defineProperty(D,"flip",{get:function(){return T},set:function(f){T=f,this.resize()}}),Object.defineProperty(D,"reverse",{get:function(){return h},set:function(f){h=f,this.resize()}}),Object.defineProperty(D,"bottomFull",{get:function(){return w},set:function(f){w=f,this.resize()}}),Object.defineProperty(D,"percentVoidH",{get:function(){return E},set:function(f){E=f,this.resize()}}),Object.defineProperty(D,"offsetVoidH",{get:function(){return k},set:function(f){k=f,this.resize()}}),Object.defineProperty(D,"percentVoidV",{get:function(){return p},set:function(f){p=f,this.resize()}}),Object.defineProperty(D,"offsetVoidV",{get:function(){return m},set:function(f){m=f,this.resize()}}),n(e)||D.add(e),S!==!1&&t.styleTransforms(this,X),this.clone=function(){var f=D.cloneProps(new t.Wrapper(e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,x,E,k,p,m,this.style,this.group));return f}},t.extend(t.Wrapper,t.Container,"clone","zimContainer",!1),t.Tile=function(e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,x,E,k,p,m,S,_,Y){var B="obj, cols, rows, spacingH, spacingV, unique, width, height, squeezeH, squeezeV, colSize, rowSize, align, valign, count, mirrorH, mirrorV, snapToPixel, clone, events, exact, style, group, inherit",b;if(b=lt(t.Tile,arguments,B,this))return b;Le("66.5"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Tile",this.group=_;var X=S===!1?{}:t.getStyle(this.type,this.group,Y);n(e)&&(e=X.obj!=null?X.obj:new t.Circle),n(r)&&(r=X.cols!=null?X.cols:1121),n(i)&&(i=X.rows!=null?X.rows:1121);var V;r==1121&&i==1121?r=i=V=3:r==1121?r=1:i==1121&&(i=1),n(s)&&(s=X.unique!=null?X.unique:!1),n(c)&&(c=X.width!=null?X.width:null),n(d)&&(d=X.height!=null?X.height:null),n(h)&&(h=X.colSize!=null?X.colSize:null),n(w)&&(w=X.rowSize!=null?X.rowSize:null),n(c)||(h=null),n(d)||(w=null),n(l)&&(l=X.spacingH!=null?X.spacingH:V?3:null),n(a)&&(a=X.spacingV!=null?X.spacingV:V?3:null),(n(l)||!n(h))&&(l=0),(n(a)||!n(w))&&(a=0),n(C)&&(C=X.squeezeH!=null?X.squeezeH:!1),n(T)&&(T=X.squeezeV!=null?X.squeezeV:!1),n(A)&&(A=X.align!=null?X.align:"left"),n(y)&&(y=X.valign!=null?X.valign:"top"),n(v)&&(v=X.count!=null?X.count:s&&Array.isArray(e)?e.length:null),v===0&&(v=null,dt&&$e("ZIM Tile() - count parameter of 0 is ignored - see docs")),n(P)&&(P=X.mirrorH!=null?X.mirrorH:!1),n(x)&&(x=X.mirrorV!=null?X.mirrorV:!1),n(E)&&(E=X.snapToPixel!=null?X.snapToPixel:!0),E&&(e&&e.stage?e.stage.snapToPixelEnabled=!0:typeof elem<"u"&&j.zdf&&(j.zdf.stage.snapToPixelEnabled=!0)),n(k)&&(k=X.clone!=null?X.clone:s?!1:null),k==null&&(k=!(typeof e=="function"&&e.type!="series")),n(p)&&(p=X.events!=null?X.events:!0);var O=this;O.cols=r=Math.round(r),O.rows=i=Math.round(i),O.spacingH=l,O.spacingV=a,O.squeezeH=C,O.squeezeV=T;var Z=typeof A=="function",W=typeof y=="function";O.align=Z?"left":A,O.valign=W?"top":y,O.mirrorH=P,O.mirrorV=x,O.items=[];var K,ne=0,F=!1;e:for(var D=0;D<i;D++)for(var u=0;u<r;u++){if(ne++,!n(v)&&ne>v)break e;K=s?e[ne-1]:t.Pick.choose(e),typeof K=="string"&&(K=j.asset(K).centerReg({add:!1}).clone()),n(K)&&(K=new t.Container(0,0,0,0)),k&&(D!=0||u!=0)&&(K=K.clone(m)),p&&K.on("change",function(H){var re=new Ne.Event("change");re.item=H.currentTarget,O.dispatchEvent(re)}),O.items.push(K),K.type=="AC"&&(F=!0),K.tileNum=ne-1,K.tileCol=u,K.tileRow=D}F&&dt&&$e("ZIM Tile - assets must have dimensions for Tile");var f,o,g,q,I,R,le,N,L,ee,z,$,xe,ie;function ke(){O.removeAllChildren(),f=[],o=[],g=[],q=[],I=[],R=0,le=0,N=0,L=0,ee=[],z=[],$=[],ie=[],xe=[],(!O.items||!O.items.length)&&(O.items=[]),v=O.items.length;var H=0,re,pe,te=0,ge=0,Ae,ae;for(pe=0;pe<v;pe++)te=Math.floor(pe/O.cols),ge=pe%O.cols,n(f[te])&&(f[te]=[]),n(O.items[pe])&&(O.items[pe]=new t.Container(0,0,0,0)),f[te][ge]=O.items[pe];O.rows=Math.max(1,f.length),O.cols=Math.max(1,n(f[0])?0:f[0].length);e:for(te=0;te<O.rows;te++)for(ee.push([]),z.push([]),ie.push([]),w&&n(d)&&(Ae=t.Pick.choose(w)),pe=0;pe<O.cols;pe++){if(H++,!n(v)&&H>v)break e;re=f[te][pe],re.snapToPixel=E,O.addChild(re),ee[te].push(re.scaleX),z[te].push(re.scaleY),h&&n(c)&&(ae=t.Pick.choose(h)),te==0&&xe.push(t.Pick.choose(A)),(!h||!n(c))&&(ae=Math.abs(re.width)),(!w||!n(d))&&(Ae=Math.abs(re.height)),ie[te][pe]=[ae,Ae],n(q[pe])&&(q[pe]=0),n(I[te])&&(I[te]=0),ae>q[pe]&&(q[pe]=ae),Ae>I[te]&&(I[te]=Ae),n(o[te])&&(o[te]=0),n(g[pe])&&(g[pe]=0),o[te]+=ae,g[pe]+=Ae,o[te]>R&&(R=o[te]),g[pe]>le&&(le=g[pe]),n($[pe])&&($[pe]=0),$[pe]++}var de;if(O.squeezeH===!1)for(pe=0;pe<q.length;pe++)de=q[pe],N+=de;if(O.squeezeV===!1)for(pe=0;pe<I.length;pe++)de=I[pe],L+=de}ke();var U,Ee,Q,G;function ue(H,re){H<=0&&(H=null),re<=0&&(re=null),!n(H)&&O.squeezeH=="full"?U=H:n(H)?N>0?U=N+(O.cols-1)*O.spacingH:U=R+(O.cols-1)*O.spacingH:U=Math.max(R+(O.cols-1)*O.spacingH,H),!n(re)&&O.squeezeV=="full"?Ee=re:n(re)?L>0?Ee=L+(O.rows-1)*O.spacingV:Ee=le+(O.rows-1)*O.spacingV:Ee=Math.max(le+(O.rows-1)*O.spacingV,re),O.setBounds(0,0,U,Ee);var pe,te;Q=[],G=[];var ge=[];for(D=0;D<f.length;D++)for(pe=f[D],te=0,u=0;u<pe.length;u++){K=pe[u];var Ae,ae;if(D==0&&(Q[u]=0,n(re)||(O.squeezeV=="full"?G[u]=$[u]>1?(re-g[u])/($[u]-1):0:O.squeezeV?G[u]=$[u]>1?Math.max(O.spacingV,(re-g[u])/($[u]-1)):0:G[u]=$[u]>1?Math.max(O.spacingV,(Ee-g[u])/($[u]-1)):0),O.squeezeV?O.valign=="center"||O.valign=="middle"?ge[u]=(Ee-(g[u]+($[u]-1)*(n(re)?O.spacingV:G[u])))/2:O.valign=="bottom"?ge[u]=Ee-(g[u]+($[u]-1)*(n(re)?O.spacingV:G[u])):ge[u]=0:ge[u]=0),u==0){n(H)||(O.squeezeH=="full"?ae=pe.length>1?(H-o[D])/(pe.length-1):0:O.squeezeH?ae=pe.length>1?Math.max(O.spacingH,(H-o[D])/(pe.length-1)):0:ae=pe.length>1?Math.max(O.spacingH,(U-o[D])/(pe.length-1)):0),O.squeezeH?O.align=="center"||O.align=="middle"?Ae=(U-(o[D]+(pe.length-1)*(n(H)?O.spacingH:ae)))/2:O.align=="right"?Ae=U-(o[D]+(pe.length-1)*(n(H)?O.spacingH:ae)):Ae=0:Ae=0;var de=t.Pick.choose(y)}A=xe[u];var se=ie[D][u][0],Ie=ie[D][u][1];O.mirrorH&&u%2==1&&(K.scaleX=-ee[D][u]),K.pos(te,null),!O.squeezeH&&Z?n(H)&&(A=="center"||A=="middle")?K.x+=(q[u]-K.width)/2:n(H)&&A=="right"&&(K.x+=q[u]-K.width):O.squeezeH?n(H)&&(O.align=="center"||O.align=="middle")?K.x+=(se-K.width)/2:n(H)&&O.align=="right"&&(K.x+=se-K.width):n(H)&&(O.align=="center"||O.align=="middle")?K.x+=(q[u]-K.width)/2:n(H)&&O.align=="right"&&(K.x+=q[u]-K.width),O.mirrorV&&D%2==1&&(K.scaleY=-z[D][u]),K.pos(null,Q[u]),!O.squeezeV&&W?n(re)&&(de=="center"||de=="middle")?K.y+=(I[D]-K.height)/2:n(re)&&de=="bottom"&&(K.y+=I[D]-K.height):O.squeezeV?n(re)&&(O.valign=="center"||O.valign=="middle")?K.y+=(Ie-K.height)/2:n(re)&&O.valign=="bottom"&&(K.y+=Ie-K.height):n(re)&&(O.valign=="center"||O.valign=="middle")?K.y+=(I[D]-K.height)/2:n(re)&&O.valign=="bottom"&&(K.y+=I[D]-K.height),O.squeezeH===!0||!n(H)?te+=se+(n(H)?O.spacingH:ae):te+=q[u]+(n(H)?O.spacingH:ae),K.x+=Ae,K.y+=ge[u],O.squeezeV===!0||!n(re)?Q[u]+=Ie+(n(re)?O.spacingV:G[u]):Q[u]+=I[D]+(n(re)?O.spacingV:G[u])}}ue(c,d),this.itemUnderPoint=function(H,re,pe){if(n(pe)&&(pe=!0),!(n(H)||n(re))){var te=O.globalToLocal(H,re);H=te.x,re=te.y;var ge=0,Ae=t.loop(q,function(se,Ie){if(ge+=se+O.spacingH,(!pe||pe=="vertical")&&H>ge-O.spacingH&&H<ge)return!1;if(H<ge-O.spacingH/2)return Ie});if(Ae!==!1&&(Ae===!0&&(Ae=r-1),!(H<0||H>U||re<0||re>Ee))){var ae=0,de=t.loop(I,function(se,Ie){var Te=n(d)?O.spacingV:G[u];if((!pe||pe=="horizontal")&&re>ae-Te&&re<ae)return!1;if(ae+=se+Te,re<ae-Te/2)return Ie});if(de!==!1)return de===!0&&(de=i-1),O.items2D[de][Ae]}}},this.remake=function(H){return n(H)||(O.items=H),ke(),ue(c,d),O},this.resize=function(H,re){return n(H)&&(H=c),n(re)&&(re=d),c=H,d=re,ue(H,re),O};function fe(H){for(var re=[],pe,te=0;te<H.length;te++)te%O.cols==0&&(pe=[],re.push(pe)),pe.push(H[te]);return re}function ye(H){var re=[],pe;for(pe=0;pe<O.cols;pe++)re.push([]);for(pe=0;pe<H.length;pe++)re[pe%O.cols][Math.floor(pe/O.cols)]=H[pe];return re}Object.defineProperty(this,"items2D",{get:function(){return fe(O.items)},set:function(){dt&&$e("Tile() - items2D is read only")}}),Object.defineProperty(this,"items2DCols",{get:function(){return ye(O.items)},set:function(){dt&&$e("Tile() - items2DCols is read only")}}),Object.defineProperty(this,"current",{get:function(){var H=[];return t.loop(O.items,function(re){var pe=re.getBounds(),te=re.x-re.regX+pe.x+pe.width/2,ge=re.y-re.regY+pe.y+pe.height/2,Ae=O.hitTestGrid(O.width,O.height,O.cols,O.rows,te,ge,null,null,O.spacingH,O.spacingV,!0,"open");Ae!=null&&(H[Ae[0]]=re)}),H},set:function(){dt&&$e("Tile() - current is read only")}}),Object.defineProperty(this,"current2D",{get:function(){return fe(O.current)},set:function(){dt&&$e("Tile() - current2D is read only")}}),Object.defineProperty(this,"current2DCols",{get:function(){return ye(O.current)},set:function(){dt&&$e("Tile() - current2DCols is read only")}}),S!==!1&&t.styleTransforms(this,X),this.clone=function(H){if(H)for(var re=[],pe=0;pe<O.items.length;pe++)re.push(O.items[pe].clone(!0));return O.cloneProps(new t.Tile(H?t.series(re):e.clone?e.clone():e,O.cols,O.rows,O.spacingH,O.spacingV,s,c,d,O.squeezeH,O.squeezeV,h,w,A,y,O.items.length,O.mirrorH,O.mirrorV,E,H?!1:k,p,H,this.style,this.group))}},t.extend(t.Tile,t.Container,"clone","zimContainer",!1),t.Pack=function(e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,x,E,k,p,m,S,_,Y,B){var b="width, height, items, spacingH, spacingV, flatten, direction, lock, backgroundColor, align, valign, lastAlign, paddingH, paddingV, dragOrder, dragColor, dragThickness, dragDashed, reverse, funnel, showPacking, order, style, group, inherit",X;if(X=lt(t.Pack,arguments,b,this))return X;Le("66.52"),this.group=Y;var V=_===!1?{}:t.getStyle("Pack",this.group,B);n(e)&&(e=V.width!=null?V.width:500),n(r)&&(r=V.height!=null?V.height:500),this.zimContainer_constructor(e,r),this.type="Pack",n(i)&&(i=V.items!=null?V.items:[new t.Rectangle(400,300,t.orange),new t.Rectangle(400,200,t.purple),new t.Rectangle(500,300,t.blue)]),n(l)&&(l=V.spacingH!=null?V.spacingH:10),n(a)&&(a=V.spacingV!=null?V.spacingV:10),n(s)&&(s=V.flatten!=null?V.flatten:"top"),n(c)&&(c=V.direction!=null?V.direction:"horizontal"),n(d)&&(d=V.lock!=null?V.lock:"auto"),n(C)&&(C=V.backgroundColor!=null?V.backgroundColor:t.clear),n(T)&&(T=V.align!=null?V.align:"center"),n(h)&&(h=V.valign!=null?V.valign:"center"),n(w)&&(w=V.lastAlign!=null?V.lastAlign:c=="horizontal"?"left":"top"),n(A)&&(A=V.paddingH!=null?V.paddingH:0),n(y)&&(y=V.paddingV!=null?V.paddingV:0),n(v)&&(v=V.dragOrder!=null?V.dragOrder:!1),n(P)&&(P=V.dragColor!=null?V.dragColor:t.white),n(x)&&(x=V.dragThickness!=null?V.dragThickness:2),n(E)&&(E=V.dragDashed!=null?V.dragDashed:!0),n(k)&&(k=V.reverse!=null?V.reverse:!1),n(p)&&(p=V.funnel!=null?V.funnel:!1),n(m)&&(m=V.showPacking!=null?V.showPacking:!1),n(S)&&(S=V.order!=null?V.order:null);var O=this;O.funnel=p;var Z=i.length,W=e-A*2,K=r-y*2,ne=50;s===!1&&(s=NONE);var F=this.backing=new On({width:e,height:r,color:C,scaleDimensions:!1}).addTo(this);if(O.items=t.copy(i),i.length<=0)return this;if(i.length==1)return u(i[0]),f(i[0]),this;var D=function(ae,de,se){return ae.width>de.width?1:ae.width<de.width?-1:0};function u(ae){ae.scaleTo(F,100-A/W*100*2,100-y/K*100*2),ae.scale*=O.scale,ae.scale<0&&(ae.scale=.05)}function f(ae){ae.pos(T!=CENTER&&T!=MIDDLE?A:0,h!=CENTER&&h!=MIDDLE?y:0,T,h,F).addTo(O)}function o(ae){var de=[];t.loop(ae,function(se,Ie){de[Ie]=O.items[se]}),i=[],t.loop(de,function(se){se&&i.push(se)})}var g=O.content=new t.Container,q,I,R,le,N,L,ee,z,$,xe,ie,ke,U,Ee;t.loop(i,function(ae,de){ae.zpRotation=ae.rotation,ae.zpIndex=de}),S&&o(S),c==VERTICAL&&Q(!0);function Q(ae){g.rotation=0;var de=r;r=e,e=de;var se=K;K=W,W=se;var Ie=a;a=l,l=Ie;var Te=y;y=A,A=Te,s==RIGHT?s=BOTTOM:s!=CENTER&&s!=NONE&&(s=TOP),w==BOTTOM?w=LEFT:w!=CENTER&&w!=MIDDLE&&(w=RIGHT),F.dispose(),F=new On(e,r,C).center(O),ae?(d==HORIZONTAL?d=VERTICAL:d==VERTICAL&&(d=HORIZONTAL),t.loop(i,function(ve,J){var Se=new t.Container(ve.height,ve.width);ve.rotation+=90,ve.pos(0,0,TOP,LEFT,Se),i[J]=Se})):(d==HORIZONTAL?d=VERTICAL:d==VERTICAL&&(d=HORIZONTAL),g.rotation-=90,t.loop(i,function(ve,J){var Se=ve,Be=ve.getChildAt(0).addTo(g).sca(Se.scale);Se.dispose(),i[J]=Be}))}var G=d;function ue(ae){d==AUTO&&(d=HORIZONTAL),q=Math.ceil(Math.sqrt(Z)),I=Math.ceil(Z/q),N=null,L=null,ee=0,Ee=null,z=0,$=0,xe=null,ie=null,ke=null,U=null,Ae(ae,q,I),ge(g,q,I)}ue(i),fe();function fe(){if(u(g),f(g),s==NONE){t.loop(i,function(Ie){Ie.surrogate?(i.splice(i.indexOf(Ie),1),Ie.dispose()):Ie.bot()},!0);var ae=I*q-Z;if(s==NONE&&ae>0){var de=g.getChildAt(g.numChildren-1);if(c==HORIZONTAL&&!k&&w!=LEFT){var se=g.getBounds().width-(de.x+(de.getBounds().x-de.regX)*de.scaleX+de.width);t.loop(q-ae,function(Ie){g.getChildAt(g.numChildren-Ie-1).mov(w==RIGHT?se:se/2)})}else if(c==HORIZONTAL&&k&&w!=RIGHT){var se=de.x+(de.getBounds().x-de.regX)*de.scaleX;t.loop(q-ae,function(Te){g.getChildAt(g.numChildren-Te-1).mov(w==LEFT?-se:-se/2)})}else if(c==VERTICAL&&!k&&w!=RIGHT){var se=de.x;t.loop(q-ae,function(Te){g.getChildAt(g.numChildren-Te-1).mov(w==LEFT?-se:-se/2)})}else if(c==VERTICAL&&k&&w!=LEFT){var se=g.getBounds().width-de.x;t.loop(q-ae,function(Te){g.getChildAt(g.numChildren-Te-1).mov(w==RIGHT?se:se/2)})}}}c==VERTICAL&&(Q(!1),u(g),f(g)),O.cols=q,O.rows=I,O.iterations=ee-2,O.currentItems=i,O.dispatchEvent("change")}var ye,H,re;v&&O.added(pe);function pe(){te(),re=Math.min(30,c==HORIZONTAL?g.height/I/3*O.scale*g.scale:g.width/q/3*O.scale*g.scale),ye?ye.siz(re,re).reg(CENTER):ye=O.beacon=new t.Rectangle({width:re,height:re,borderColor:P,borderWidth:x,scaleDimensions:!1}).reg(CENTER).rot(45),H||(H=O.ghost=new t.Rectangle({width:100,height:100,borderColor:P,borderWidth:x,dashed:E,scaleDimensions:!1}).reg(CENTER));var ae,de,se,Ie;O.mdEvent=O.on("mousedown",function(Te){if(se=Te.target,ye.top(),ae=null,!(i.indexOf(se)<0)){Ie=O.localToGlobal(O.getBounds().x,O.getBounds().y);var ve=se.boundsToGlobal();O.ghost.siz(ve.width,ve.height).reg(CENTER).loc(ve.x+H.width/2,ve.y+H.height/2,O.stage),H.diffX=O.stage.frame.mouseX-H.x,H.diffY=O.stage.frame.mouseY-H.y,de=g.getChildIndex(se),O.stage.update()}}),O.pmEvent=O.on("pressmove",function(){if(H.parent){var Te=O.stage.frame;H.loc(Te.mouseX-H.diffX,Te.mouseY-H.diffY);var ve=O.getObjectUnderPoint((H.x-Ie.x)/O.scaleX,(H.y-Ie.y)/O.scaleY,1);if(i.indexOf(ve)>=0){var J=ve.boundsToGlobal();c==HORIZONTAL?H.x>=J.x+J.width/2?(ye.loc(J.x+J.width+l/2*O.scaleX*g.scaleX,J.y+J.height/2,O.stage),ae=g.getChildIndex(ve)+(k?0:1)):(ye.loc(J.x-l/2*O.scaleX*g.scaleX,J.y+J.height/2,O.stage),ae=g.getChildIndex(ve)+(k?1:0)):H.y>=J.y+J.height/2?(ye.loc(J.x+J.width/2,J.y+J.height+a/2,O.stage),ae=g.getChildIndex(ve)+(k?0:1)):(ye.loc(J.x+J.width/2,J.y-a/2,O.stage),ae=g.getChildIndex(ve)+(k?1:0))}O.stage.update()}}),O.puEvent=O.on("pressup",function(){H.parent&&(ae!=null&&(ae>de&&ae--,ae!=de&&(se.level=ae,i=[],g.loop(function(Te,ve){i.push(Te.rot(Te.zpRotation||0).sca(1))}),d=G,c==VERTICAL&&Q(!0),ue(i),fe())),H.removeFrom(),ye.removeFrom(),O.stage.update())})}function te(){O.mdEvent&&O.off("mousedown",O.mdEvent),O.pmEvent&&O.off("pressmove",O.pmEvent),O.puEvent&&O.off("pressup",O.puEvent),ye&&ye.removeFrom(),H&&H.removeFrom()}function ge(ae,de,se){if(ae.scale=1,ee++>20){Ee&&Ee.clear();return}var Ie=!1;if(ae.height>K){if(R=de+1,le=Math.ceil(Z/R),de==L&&d==VERTICAL)if($>z)R=ie,le=U,Ie=!0;else return ae}else if(ae.height<=K&&(R=Math.max(de-1,1),le=Math.ceil(Z/R),de==L&&d==HORIZONTAL))if($>z)R=ie,le=U,Ie=!0;else return ae;if(L=N,N=q,q=R,I=le,t.loop(i,function(Te){s==NONE&&Te.surrogate?(i.splice(i.indexOf(Te),1),Te.dispose()):Te.siz(null,K)},!0),Ae(i,q,I),$=z,ie=xe,U=ke,G==AUTO||d==HORIZONTAL&&Math.round(ae.width)==W||d==VERTICAL&&Math.round(ae.height)==K?z=ae.width*ae.height:z=0,xe=q,ke=I,Ie){Ee&&Ee.clear(),f(ae),O.stage&&O.stage.update();return}m?(Ee=Rr(1,function(){ge(ae,q,I)}),f(ae),O.stage&&O.stage.update(),ae.sca(1)):(ae.sca(1),ge(ae,q,I))}function Ae(ae,de,se){var Ie=0;t.loop(ae,function(me,Ge){me.siz(null,ne),Ie+=me.width});var Te=Ie/Z,ve=ae;Z%de!=0&&s==NONE&&t.loop(de-Z%de,function(){var me=new t.Rectangle(Te,ne,grey);me.surrogate=!0,ve.push(me)});var J=new Nr(ve,de,se,0,0,!0),Se=[],Be=t.copy(J.items2D);if(s!=NONE&&de*se!=Z&&Be.length>1){var Ye;if(s==BOTTOM)Ye=O.funnel?Math.floor((de*se-Z)/2):Math.ceil((de*se-Z)/2),t.loop(Ye,function(me){Be[se-1].unshift(Be[se-2].pop())});else{var Ke=de*se-Z;t.loop(Be,function(me,Ge,Je){Ge!=Je-1&&t.loop(me.splice(-Ke,Ke),function(ce){Be[Ge+1].unshift(ce)},!0)}),Ye=O.funnel?Math.floor((de*se-Z)/2):Math.ceil((de*se-Z)/2),t.loop(Ye,function(me){Be[0].push(Be[1].shift())})}}t.loop(Be,function(me,Ge,Je){var ce=0;t.loop(me,function(Ve){ce+=Ve.width});var oe=(W-l*(me.length-1))/ce;t.loop(me,function(Ve){Ve.scale*=oe});var _e=t.copy(me);(k&&c==HORIZONTAL||!k&&c==VERTICAL)&&_e.reverse();var je=new Nr(_e,me.length,1,l,0,!0);k&&je.loop(function(Ve){Ve.bot()}),Se.push(je)}),J.dispose();var at=0;return g.loc(F,null,O),g.removeAllChildren(),t.loop(Se,function(me){me.loc(0,at,g),at+=me.height+a,me.loop(function(Ge,Je,ce){Ge.addTo(g).ord(-(ce-Je))},!0)}),t.loop(Se,function(me){me.dispose()},!0),u(g),g}O.getOrder=function(ae){if(n(ae)&&(ae=!1),ae){if(!de){var de=O.pane=new t.Pane({displayClose:!1,container:O.stage,width:Math.min(500,O.stage.width-20),height:Math.min(500,O.stage.height-20),draggable:!0}),se=O.textArea=new t.TextArea(Math.min(400,O.stage.width-70),Math.min(400,O.stage.height-70));se.centerReg(de)}de.show(),se.text=JSON.stringify(O.order)}return O.order},this.setOrder=function(ae){return o(ae),ue(i),fe(),O},this.addAt=function(ae,de){return n(ae)||(n(de)&&(de=O.items.length),Array.isArray(ae)||(ae=[ae]),t.loop(ae,function(se,Ie){O.items.push(se),se.zpIndex=O.items.length-1,O.currentItems.splice(de+Ie,0,se)}),ue(O.currentItems),fe()),O},this.removeAt=function(ae,de){n(ae)&&(ae=1),n(de)&&(de=O.items.length);var se=O.currentItems.splice(de,ae);return t.loop(se,function(Ie){var Te=O.items.indexOf(Ie);O.items.splice(Te,1)}),ue(O.currentItems),fe(),O},Object.defineProperty(O,"order",{get:function(){var ae=[];return g.loop(function(de){ae.push(de.zpIndex)}),ae},set:function(ae){O.setOrder(ae)}}),Object.defineProperty(O,"lock",{get:function(){return G},set:function(ae){ae!=G&&(d=ae,ue(i),fe(),v&&pe())}}),Object.defineProperty(O,"direction",{get:function(){return c},set:function(ae){ae!=c&&(c=ae,g.rotation=0,i=[],g.loop(function(de,se){i.push(de.rot(de.zpRotation||0).sca(1))}),c==VERTICAL&&Q(!0),ue(i),fe(),v&&pe())}}),Object.defineProperty(O,"spacing",{get:function(){return c==VERTICAL?a:l},set:function(ae){l=a=ae,ue(i),fe()}}),Object.defineProperty(O,"outerWidth",{get:function(){return e},set:function(ae){e!=ae&&(e=ae,W=e-A*2,F&&(F.widthOnly=e,F.center(O)),ue(i),fe(),v&&pe())}}),Object.defineProperty(O,"outerHeight",{get:function(){return r},set:function(ae){r!=ae&&(r=ae,K=r-y*2,F&&(F.heightOnly=r,F.center(O)),ue(i),fe(),v&&pe())}}),Object.defineProperty(O,"flatten",{get:function(){return s},set:function(ae){s!=ae&&(s=ae,ue(i),fe())}}),Object.defineProperty(O,"dragOrder",{get:function(){return v},set:function(ae){ae?pe():(te(),O.stage&&O.stage.update())}}),_!==!1&&t.styleTransforms(this,V),this.dispose=function(ae){return v&&te(),O.items=null,O.currentItems=null,ae||this.zimContainer_dispose(!0),!0},this.clone=function(){return O.cloneProps(new t.Pack(e,r,t.copy(i,!0),l,a,s,c,d,C,T,h,w,A,y,v,P,x,E,k,p,m,t.copy(O.order),this.style,this.group))}},t.extend(t.Pack,t.Container,["dispose","clone"],"zimContainer",!1),t.Beads=function(e,r,i,l,a,s,c,d,C,T,h,w,A,y,v){var P="path, obj, count, angle, startPercent, endPercent, percents, onTop, showControls, visible, interactive, clone, group, style, inherit",x;if(x=lt(t.Beads,arguments,P,this))return x;Le("66.7"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Beads",this.group=A;var E=y===!1?{}:t.getStyle(this.type,this.group,v);n(d)&&(d=E.onTop!=null?E.onTop:!1),n(C)&&(C=E.showControls!=null?E.showControls:!1),n(T)&&(T=E.visible!=null?E.visible:!0),n(h)&&(h=E.interactive!=null?E.interactive:!0),n(e)&&(e=E.path!=null?E.path:new t.Blob({color:null,borderWidth:3,borderColor:t.blue})),e.visible=T,e.interactive=h,e.toggle(C),e.onTop=d,n(r)&&(r=E.obj!=null?E.obj:new t.Circle(10)),n(i)&&(i=E.count!=null?E.count:10),n(l)&&(l=E.angle!=null?E.angle:null),n(a)&&(a=E.startPercent!=null?E.startPercent:0),n(s)&&(s=E.endPercent!=null?E.endPercent:100),n(c)&&(c=E.percents!=null?E.percents:null);var k=s;s<a&&(k=100+s);var p;if(n(c)){var m;e.type=="Squiggle"?m=(k-a)/(i-1):m=(k-a)/(i-(a!=k%100?1:0)),c=[];var S=a-m;for(p=0;p<i;p++)c.push(S+m),S+=m,S>100&&(S-=100)}n(w)&&(w=E.clone!=null?E.clone:!0);var _=this;_.count=i,_.percents=c,_.items=[];var Y;for(p=0;p<i;p++)Y=t.Pick.choose(r),w&&p!=0&&(Y=Y.clone()),Y.beadNum=p,Y.startPercent=c[p],_.items.push(Y);_.path=e.addTo(_),_.beads=new t.Container().addTo(_,d?0:null),_.beads.type="BeadsContainer",this.resize=function(){for(var B=e.segmentRatios,b=e.segmentPoints,X=0;X<_.count;X++){var V=e.getCurvePoint(Math.max(0,Math.min(.9999,c[X]/100)),B,b,!0);if(V){var O=_.beads.globalToLocal(V.x,V.y);O&&_.items[X].loc(O,null,_.beads).rot(n(l)?V.angle>180?V.angle-360+e.rotation:V.angle+e.rotation:l)}}return this},_.resize(),h&&(e.on("pressmove",_.resize),e.on("update",_.resize)),y!==!1&&t.styleTransforms(this,E),this.dispose=function(B){return B||this.zimContainer_dispose(!0),_.items=[],!0},this.clone=function(B){if(B)for(var b=[],X=0;X<_.items.length;X++)b.push(_.items[X].clone(!0));return _.cloneProps(new t.Beads(e.clone(),B?t.series(b):r.clone?r.clone():r,_.count,l,a,s,c,d,C,T,h,w,this.style,this.group))}},t.extend(t.Beads,t.Container,["clone","dispose"],"zimContainer",!1),t.Layout=function(e,r,i,l,a,s,c,d,C,T,h,w){var A="holder, regions, lastMargin, lastMarginMin, backgroundColor, vertical, showRegions, scalingObject, hideKey, style, group, inherit",y;if(y=lt(t.Layout,arguments,A,this))return y;Le("80"),this.cjsEventDispatcher_constructor(),this.type="Layout",this.group=h;var v=T===!1?{}:t.getStyle(this.type,this.group,w);if(n(e)&&(e=v.holder!=null?v.holder:null),n(d)&&(d=v.scalingObject!=null?v.scalingObject:null),n(e)||!e.getBounds){Rn("zim controls - Layout(): please provide an object with bounds set that holds the objects being laid out");return}if(d=n(d)?e:d,!d.getBounds||!d.getBounds()){Rn("zim controls - Layout(): holder must have bounds set or provide a scalingObject with bounds");return}var P=d.getBounds();e.setBounds(0,0,P.width,P.height),n(i)&&(i=v.lastMargin!=null?v.lastMargin:0),n(l)&&(l=v.lastMarginMin!=null?v.lastMarginMin:0),n(s)&&(s=v.vertical!=null?v.vertical:!0),n(a)&&(a=v.backgroundColor!=null?v.backgroundColor:""),n(C)&&(C=v.hideKey!=null?v.hideKey:"B"),n(c)&&(c=v.showRegions!=null?v.showRegions:null);var x;c&&(x=new t.Shape);var E=this.backing=new t.Shape,k=this;if(this.active=!0,n(r)&&(r=v.regions!=null?t.copy(v.regions):null),n(r))return;t.loop(r,function(u,f){u instanceof Ne.DisplayObject&&(r[f]={obj:u}),r[f].object&&(r[f].obj=r[f].object,delete r[f].object)}),this.regions=r;var p,m=0,S="minWidth",_="width",Y="height",B="marginLeft",b="marginMinLeft",X="maxHeight";s&&(S="minHeight",_="height",Y="width",B="marginTop",b="marginMinTop",X="maxWidth");for(var V=[],O=0,Z=0;Z<r.length;Z++){if(p=r[Z],!p.obj||!p.obj.getBounds()){$e("Layout(): each region object must have an object with setBounds() set");return}p[S]||(p[S]=0),p[_]||(p[_]=0),p.backgroundColor||(p.backgroundColor=""),p.given=0,p.maxGiven=0,p[B]=="auto"?(V[Z]=!0,O++,p[b]?p[B]=p[b]:delete p[B]):p[B]&&p[b]&&p[B]<p[b]&&(p[B]=p[b]),n(p[B])&&(p[B]=1e-4),p[X]||(p[X]=100),s?(p.align||(p.align="middle"),p.valign||(Z==0?p.valign="top":Z==r.length-1?p.valign="bottom":p.valign="middle",r.length==1&&(p.valign="middle"))):(p.valign||(p.valign="top"),p.align||(Z==0?p.align="left":Z==r.length-1?p.align="right":p.align="middle",r.length==1&&(p.align="middle"))),p[_]&&(p[S]=0),m+=p[_]+p[B]}if(i=="auto"?(V[r.length]=!0,i=l||0):i&&l&&i<l&&(i=l),m+=i,m>100){$e("Layout(): cannot fit regions into 100% bounds");return}var W=100-m;K();function K(){var u=0,f;for(f=0;f<r.length;f++)p=r[f],p.given=0,p[_]==0&&(u+=p.obj.getBounds()[_]);for(f=0;f<r.length;f++)p=r[f],p[_]==0&&(p.given=p.obj.getBounds()[_]/u*W)}this.resize=function(){var u;if(k.active){for(P=d.getBounds(),e.setBounds(0,0,P.width,P.height),E.graphics.clear(),a!=""&&(ne(E,a),E.graphics.r(0,0,P.width,P.height)),u=0;u<r.length;u++)p=r[u],p.maxGiven=0,p.marginGiven=0;for(var f=!0,o,g,q,I,R,le,N=W;f;){for(f=!1,o=!0,u=0;u<r.length;u++)p=r[u],p.given>0&&p.maxGiven==0&&(g=p.obj.getBounds()[_],q=p.obj.getBounds()[Y],I=p.given*P[_]/100,R=p[X]*P[Y]/100,le=q/g*I,le>R&&p.obj.type!="Window"?(p.maxGiven=g/q*R*100/P[_],N-=p.maxGiven):o=!1);if(o)break;var L=0;for(u=0;u<r.length;u++)p=r[u],p[_]==0&&p.maxGiven==0&&(L+=p.obj.getBounds()[_]);for(u=0;u<r.length;u++)p=r[u],p[_]==0&&p.maxGiven==0&&(p.given=p.obj.getBounds()[_]/L*N)}var ee=!0;if(p=r[0],p.maxGiven>0?p.maxGiven<p[S]&&(p[_]=p[S],ee=!1):p.given>0&&p.given<p[S]&&(p[_]=p[S],ee=!1),p=r[r.length-1],p.maxGiven>0?p.maxGiven<p[S]&&(p[_]=p[S],ee=!1):p.given>0&&p.given<p[S]&&(p[_]=p[S],ee=!1),!ee){for(m=0,u=0;u<r.length;u++)p=r[u],m+=p[_]+p[B];if(m+=i,m>100){$e("zim display - Layout(): cannot fit regions into 100% bounds");return}W=100-m,K(),k.resize();return}var z=!0,$=0,xe=0;for(u=0;u<r.length;u++)p=r[u],$+=p[B],p[_]>0?xe+=p[_]:p.maxGiven>0?xe+=p.maxGiven:p.given>0&&(xe+=p.given),p[_]==0&&(z=!1);if(z||o){$+=i;var ie=100-xe-$;if($-=i+r[0][B],ie!=0&&$!=0)for(u=0;u<r.length;u++)u!=0&&(p=r[u],p.marginGiven=p[B]/$*($+ie))}if(O>0){var ke=0,U=0;for(u=0;u<r.length;u++)p=r[u],p.marginGiven>0?U+=p.marginGiven:U+=p[B],p.marginGiven=0,ke+=p[B]>.05?p[B]:0;var Ee=(U-ke)/O;for(u=0;u<V.length;u++)V[u]&&r[u]&&(p=r[u],p.marginGiven=(p[b]?p[b]:0)+Ee)}var Q=0,G=0,ue,fe,ye;if(x&&x.graphics){var H=x.graphics;H.c()}for(u=0;u<r.length;u++)p=r[u],p.marginGiven>0?Q+=p.marginGiven*P[_]/100:Q+=p[B]*P[_]/100,p[_]>0?g=p[_]:p.maxGiven>0?g=p.maxGiven:p.given>0?g=p.given:g=0,g=g*P[_]/100,q=p[X]*P[Y]/100,G=(P[Y]-q)/2,s?(p.obj.type=="Wrapper"&&p.obj.resize(q),p.obj.type=="Window"&&p.obj.resize(q,g),p.obj.type=="Region"&&p.obj.setBounds(q,g),ue=t.fit(p.obj,G,Q,q,g)):(p.obj.type=="Wrapper"&&p.obj.resize(g),p.obj.type=="Window"&&p.obj.resize(g,q),p.obj.type=="Region"&&p.obj.setBounds(g,q),ue=t.fit(p.obj,Q,G,g,q)),p.valign=="top"?p.obj.y=ue.bY:p.valign=="bottom"&&(p.obj.y=ue.bY+ue.bHeight-ue.height),p.align=="left"?p.obj.x=ue.bX:p.align=="right"&&(p.obj.x=ue.bX+ue.bWidth-ue.width),x&&x.graphics&&(H.s("white").ss(2).r(ue.bX,ue.bY,ue.bWidth,ue.bHeight),H.s("#ff8203").sd([20,20]).r(ue.bX,ue.bY,ue.bWidth,ue.bHeight).sd()),ye=fe=0,(Q==0||Q+g==P[_])&&(s?ye=1:fe=1),q==P[Y]&&(s?fe=1:ye=1),p.backgroundColor!=""&&(ne(E,p.backgroundColor),E.graphics.r(ue.bX,ue.bY,ue.bWidth+fe,ue.bHeight+ye)),Q+=g,p.obj.ZIMoutlineShape&&p.obj.outline()}};function ne(u,f){f.type=="GradientColor"?u.graphics.lf(f.colors,f.ratios,f.x0,f.y0,f.x1,f.y1):f.type=="RadialColor"?u.graphics.rf(f.colors,f.ratios,f.x0,f.y0,f.r0,f.x1,f.y1,f.r1):f.type=="BitmapColor"?u.graphics.bf(f.image,f.repetition,f.matrix):u.graphics.f(p.backgroundColor)}this.resize(),x&&e.addChild(x),e.addChildAt(E,0),j.addEventListener("keydown",F);function F(u){u||(u=event),x&&String.fromCharCode(u.keyCode)==C.toUpperCase()&&(k.toggle(),x.stage&&x.stage.update())}this.disable=function(){k.active=!1,j.removeEventListener("keydown",F),x&&(x.alpha=0)},this.enable=function(){k.active=!0,j.addEventListener("keydown",F),k.resize(),x&&(x.alpha=1)},this.removeShape=function(){x&&(x.graphics.clear(),x.dispose(),x=null,x=!1),j.removeEventListener("keydown",F)},this.toggled=!0,this.toggle=function(u){return u===!0?x.visible=!0:u===!1?x.visible=!1:x.visible=!x.visible,k.toggled=x.visible,k},this.addShape=function(u){k.removeShape(),x=u,j.addEventListener("keydown",F),e.addChild(x),k.resize()},T!==!1&&t.styleTransforms(this,v),d.added?d.added(D):D(d);function D(u){if(u&&u.frame&&u.frame.scaling=="full"){if(!t.globalManager){var f=t.globalManager=new t.Manager;f.frame=u.frame,f.event=u.frame.on("resize",function(){f.resize()})}t.globalManager.add(k)}}this.dispose=function(){if(k.resize=null,t.globalManager){var u=t.globalManager;u.remove(k),t.globalManager.items.length==0&&(u.frame.off("resize",u.event),u.dispose(),t.globalManager=null)}return k.backing&&k.backing.dispose(),k.backing=null,k.removeShape(),!0}},t.extend(t.Layout,Ne.EventDispatcher,null,"cjsEventDispatcher",!1),t.Accessibility=function(e,r,i,l,a,p,c,d,C,T,h,w,A,y,v){var P="appName, tabOrder, tabIndex, cycle, decimals, frame, application, alwaysHighlight, AHTime, AHColor, AHBorderWidth, AHBorderPadding, AHAlpha, AHObject, AHObjectScale",x;if(x=lt(t.Accessibility,arguments,P,this))return x;Le("30.5"),this.cjsEventDispatcher_constructor(),this.type="Accessibility",n(e)&&(e="application"),n(l)&&(l=!1),n(a)&&(a=2),n(p)&&(p=j.zdf),n(c)&&(c=!t.mobile()),n(d)&&(d=!1);var E=Tt(C);if(n(C)&&(C=E=="s"?.7:700),n(T)&&(T="brown"),n(h)&&(h=3),n(w)&&(w=5),n(A)&&(A=.8),n(v)&&(v=.8),n(y)){var k=new t.Shape({style:!1});k.mouseEnabled=!1}else y.mouseEnabled&&(y.mouseEnabled=!1);if(typeof p>"u")var p=j.zdf;if(n(p)){dt&&$e("Accessibility - needs a Frame");return}var m=p.retina&&j.devicePixelRatio||1,S=this;S.cycle=l,S.decimals=a,S.alwaysHighlight=d,S.AHTime=C,S.AHColor=T,S.AHBorderWidth=h,S.AHBorderPadding=w,S.AHAlpha=A,S.AHObjectScale=v;var _=-1,Y=-1,B=[],b=[],X={RadioButtons:"option",Tabs:"tab",Pad:"key"},V,O=p.canvas.id,Z=t.mobile(),W=!1,K=null,ne=[],F,D,u,f,o,g,q,I=150,R;Object.defineProperty(this,"tabOrder",{get:function(){return _},set:function(se){var Ie;for(F&&F.removeEventListener("focus",L),D&&D.removeEventListener("focus",L),Ie=0;Ie<B.length;Ie++)B[Ie].parentElement&&(B[Ie].outerHTML="");B=[];var Te,ve;for(Ie=0;Ie<b.length;Ie++)Te=_[Ie],Te&&b[Ie][0].off("mousedown",b[Ie][1]);b=[],_=[];var J=[];R=p.shim?document.body:p.canvas,ae=!1;var Se=0;for(Ie=0;Ie<se.length;Ie++){if(Te=se[Ie],Te.type=="HotSpots"&&(se.splice.apply(se,[Ie,1].concat(Te.hotSpots)),Te=Te.hotSpots[0]),Te.type=="HotSpot"&&(Te=Te.spot),Te.constructor=={}.constructor){if(ve=Te.obj,!ve||!ve.getStage)continue;Te.title||(Te.title=Q(ve,Ie+Se))}else ve=Te,Te={obj:Te,title:Q(Te,Ie+Se)};if(ve.type=="RadioButtons"||ve.type=="Tabs"||ve.type=="Pad"){var Be=[];Se--;for(var Ye=0;Ye<ve.buttons.length;Ye++){Se++;var Ke=ve.buttons[Ye],at={obj:Ke,title:Te.title+" - "+X[ve.type]+": "+(Ke.text=="a"||Ke.text=="A"?"eh":Ke.text)};Be.push(at),Ke.zimTabParent=ve,Ke.zimTabParent.zimAccessibility=S,Ke.zimTabIndex=Ie+Se,Ke.tabIndex=Ye,Ke.zimAccessibility=S,G(at),R=ue(O+"Tab"+(Ie+Se),at.title,R,at),b.push([Ke,Ke.on("mousedown",Ee)]),W||ne.push([Ke,Ke.on("mousedown",N)])}J=J.concat(Be)}else ve.zimTabIndex=Ie+Se,ve.zimTabParent=ve,G(Te),ve.zimAccessibility=S,b.push([ve,ve.on("mousedown",Ee)]),W||ne.push([ve,ve.on("mousedown",N)]),J.push(Te),R=ue(O+"Tab"+(Ie+Se),Te.title,R,Te)}F=S.startAppTag=ue(O+"PrefixTab",e+" start",p.shim?document.body:p.canvas,null,"before"),F.addEventListener("focus",L),W||(F.addEventListener("focus",ie),f=ue(O+"noAriaTab","",F,null,"before"),f.setAttribute("aria-hidden",!0),f.focusTab=F,f.addEventListener("focus",xe),g=ue(O+"noAriaTab","",F),g.setAttribute("aria-hidden",!0),g.focusTab=F,g.addEventListener("focus",xe)),R=ue(O+"BufferTab","",R),Z&&R.setAttribute("aria-hidden",!0),R=D=S.endAppTag=ue(O+"SuffixTab",e+" end",R),D.addEventListener("focus",L),W||(D.addEventListener("focus",ie),R=o=ue(O+"noAriaTab","",D),o.setAttribute("aria-hidden",!0),o.focusTab=D,o.addEventListener("focus",xe),q=ue(O+"noAriaTab","",D,null,"before"),q.setAttribute("aria-hidden",!0),q.focusTab=D,q.addEventListener("focus",xe)),_=J}});function le(){F&&(F.removeEventListener("focus",L),F.removeEventListener("focus",ie),F.parentNode&&(F.outerHTML="")),f&&(f.removeEventListener("focus",xe),f.parentNode&&(f.outerHTML="")),g&&(g.removeEventListener("focus",xe),g.parentNode&&(g.outerHTML="")),R&&R.parentNode&&(R.outerHTML=""),D&&(D.removeEventListener("focus",L),D.removeEventListener("focus",ie),D.parentNode&&(D.outerHTML="")),o&&(o.removeEventListener("focus",xe),o.parentNode&&(o.outerHTML="")),q&&(q.removeEventListener("focus",xe),q.parentNode&&(q.outerHTML=""))}Object.defineProperty(this,"tabIndex",{get:function(){return Y},set:function(se){if(!de)return;if(se<0||se>=_.length)me();else{se!=Y&&at();var Ie=_[se].obj;if(Ie.stage){if(Y=se,Ie.focus=!0,fe=!0,ye=!1,S.changeTitle(Ie),Ie.zimTabTag.focus(),setTimeout(function(){Ie.zimTabTag.focus();var Ge=new Ne.Event("change");Ge.title=Ie.zimTabTag.getAttribute("aria-label"),S.dispatchEvent(Ge)},I),S.alwaysHighlight&&(!K||!Z)){if(S.AHObject){V=S.AHObject;var Ke=t.boundsToGlobal(Ie);S.AHObject.alp(S.AHAlpha).addTo(p.stage,null,!1),S.AHObject.fit(Ke.x,Ke.y,Ke.width,Ke.height),S.AHObject.sca(S.AHObject.scaleX*S.AHObjectScale),S.AHTime>0&&(ge=setTimeout(function(){p.stage.removeChild(S.AHObject),p.stage.update()},S.AHTime*(E=="s"?1e3:1)))}else{V=k;var Te=Ie.getBounds(),ve=Ie.localToGlobal(Te.x-5,Te.y-5),J=Ie.localToGlobal(Te.x+Te.width+5,Te.y-5),Se=Ie.localToGlobal(Te.x+Te.width+5,Te.y+Te.height+5),Be=Ie.localToGlobal(Te.x-5,Te.y+Te.height+5),Ye=k.graphics;Ye.clear(),Ye.s(S.AHColor).ss(S.AHBorderWidth).mt(ve.x-S.AHBorderPadding,ve.y-S.AHBorderPadding).lt(J.x+S.AHBorderPadding,J.y-S.AHBorderPadding).lt(Se.x+S.AHBorderPadding,Se.y+S.AHBorderPadding).lt(Be.x-S.AHBorderPadding,Be.y+S.AHBorderPadding).lt(ve.x-S.AHBorderPadding,ve.y-S.AHBorderPadding).cp(),k.alpha=S.AHAlpha,S.AHTime>0&&(ge=setTimeout(function(){p.stage.removeChild(k),p.stage.update()},S.AHTime*(E=="s"?1e3:1)))}p.stage.addChild(V),p.stage.update()}}else me()}function at(){if(Y&&Y>-1)_&&_[Y]&&(_[Y].obj.focus=!1);else for(var Ge=0;Ge<_.length;Ge++)_[Ge].obj.focus=!1}function me(){at(),fe=!1,S.AHObject&&p.stage.removeChild(S.AHObject),S.alwaysHighlightShape&&p.stage.removeChild(S.alwaysHighlightShape),p.stage.update(),Y=-1}}}),Object.defineProperty(this,"aria",{get:function(){return K},set:function(se){K=se,K&&ee()}});function N(se){var Ie=se.currentTarget,Te=Ie.boundsToGlobal(),ve=Te.x+Te.width/2,J=Te.y+Te.height/2,Se=5;se.stageX/t.scaX<ve-Se||se.stageX/t.scaX>ve+Se||se.stageY/t.scaY<J-Se||se.stageY/t.scaY>J+Se?z():ee()}function L(){u&&(u.innerHTML="")}Z=="android"&&(t.ACTIONEVENT="click",mt||(j.ACTIONEVENT="click"));function ee(){K=!0,ke(),u&&u.setAttribute("aria-hidden",!1),t.ACTIONEVENT="click",mt||(j.ACTIONEVENT="click"),p.stage.removeChild(V),Z&&(S.alwaysHighlight=!1),p.stage.update();for(var se,Ie,Te,ve=0;ve<_.length;ve++)se=_[ve],Ie=se.obj,Te=Ie.zimTabTag,Te.disabled=!1,se.title=se.title.replace(/\s\(use arrow keys\)/,""),Te.setAttribute("aria-label",se.title),Te.addEventListener("focus",$)}function z(){K=!1;for(var se,Ie,Te,ve=0;ve<_.length;ve++)se=_[ve],Ie=se.obj,Te=Ie.zimTabTag,Te.disabled=!1;ke(),d&&U()}function $(se){var Ie=se.currentTarget,Te=Ie.zimObject;Y=Te.zimTabIndex,Te.focus=!0;var ve=new Ne.Event("change");ve.title=Ie.getAttribute("aria-label"),S.dispatchEvent(ve)}function xe(se){K=!1,se.target.focusTab.focus()}function ie(){n(K)||K?ee():z()}function ke(){W=!0,F.removeEventListener("focus",ie),D.removeEventListener("focus",ie),f.removeEventListener("focus",xe),o.removeEventListener("focus",xe),f.parentNode&&(f.parentNode.removeChild(f),o.parentNode.removeChild(o)),g.removeEventListener("focus",xe),q.removeEventListener("focus",xe),g.parentNode&&(g.parentNode.removeChild(g),q.parentNode.removeChild(q));for(var se=0;se<ne.length;se++)ne[se][0].off("mousedown",ne[se][1])}function U(){for(var se=0;se<B.length;se++){var Ie=B[se];Ie.zimObject&&(Ie.zimObject.type=="Loader"||Ie.zimObject.type=="TextArea"||Ie.zimObject.type=="Tag")||(B[se].style.left="-2000px")}}n(r)?setTimeout(function(){if(_==-1){_=[];var se=[];t.loop(p.stage,function(Ie){Ie.type&&se.push(Ie)}),S.tabOrder=se,n(i)||(S.tabIndex=i)}},50):(_=[],S.tabOrder=r,n(i)||(S.tabIndex=i));function Ee(se){var Ie=se.currentTarget;if(Ie.type=="RadioButton"||Ie.type=="TabsButton"||Ie.type=="PadButton")for(var Te=0;Te<Ie.zimTabParent.buttons.length;Te++){var ve=Ie.zimTabParent.buttons[Te];ve.zimTabTag.setAttribute("aria-label",ve.zimTabTag.getAttribute("aria-label").split(" - currently")[0]+(Ie.zimTabParent.selectedIndex==ve.tabIndex?" - currently selected.":" - currently not selected."))}S.tabIndex=se.currentTarget.zimTabIndex,S.activatedObject=Ie}function Q(se){return se.talk?se.talk:se.type=="TextArea"||se.type=="RadioButtons"||se.type=="Tabs"||se.type=="Pad"?se.type:se.type=="Waiter"?"Waiter active - please wait":se.text?se.type+" - "+(se.text=="a"||se.text=="A"?"eh":se.text):se.type+(se.type=="Dial"||se.type=="Slider"||se.type=="ColorPicker"||se.type=="Stepper"?" (use arrow keys)":"")+(se.type=="TextArea"?" (press ENTER to edit)":"")}function G(se){var Ie=se.obj;se.title=se.title.replace(/\.$/,""),Ie.type=="RadioButton"||Ie.type=="TabsButton"||Ie.type=="PadButton"?se.title=se.title+(Ie.tabIndex==Ie.zimTabParent.selectedIndex?" - currently selected":" - currently not selected"):Ie.type=="CheckBox"?se.title=se.title+(Ie.checked?" - currently checked":" - currently not checked"):Ie.type=="Stepper"?se.title=se.title+" - currently displaying "+Ie.currentValue:Ie.type=="Slider"||Ie.type=="Dial"?se.title=se.title+" - currently at "+t.decimals(Ie.currentValue,S.decimals):Ie.type=="ColorPicker"?se.title=se.title+" - currently at "+Ie.selectedColor:Ie.type=="TextArea"?se.title=se.title+(Ie.tag.value!=""?"":" - placeholder: "+Ie.tag.placeholder):Ie.type=="Indicator"?se.title=se.title+" - currently "+(Ie.selectedIndex>=0?"at "+(Ie.selectedIndex+1)+" of "+Ie.num:"not indicating"):Ie.type=="TextInput"&&(se.title=se.title+(Ie.htmlTag.value!=""?"":" - placeholder: "+Ie.htmlTag.placeholder)),se.title+="."}function ue(se,Ie,Te,ve,J){var Se,Be;if(ve&&(Se=ve.obj),ve&&(Se.type=="TextArea"||Se.type=="Loader"))return Be=Se.tag,Be.setAttribute("aria-label",Ie),Se&&Be.setAttribute("aria-hidden",!Se.stage),J=="before"?Te.parentNode.insertBefore(Be,Te):Te.parentNode.insertBefore(Be,Te.nextSibling),Se.type=="TextArea"?Be.style.zIndex=3:Be.style.zIndex=-5,Be.zimObject=Se,ve.obj.zimTabTag=Be,B.push(Be),Be;if(ve&&Se.type=="TextInput")return Be=Se.htmlTag,Be.setAttribute("aria-label",Ie),Se&&Be.setAttribute("aria-hidden",!Se.stage),J=="before"?Te.parentNode.insertBefore(Be,Te):Te.parentNode.insertBefore(Be,Te.nextSibling),Be.style.zIndex=-5,Be.zimObject=Se,ve.obj.zimTabTag=Be,B.push(Be),Be;var Ye;if(ve&&(Se.type=="Dial"||Se.type=="Slider"||Se.type=="Stepper"||Se.type=="ColorPicker")){var Ke=[];if(Se.type=="Dial"||Se.type=="Slider"){var at=Se.step<=0?(Se.max-Se.min)/20:Se.step;for(Ye=Se.min;Ye<Se.max;Ye=Ye+at)Ke.push(Se.min+Ye)}else Se.type=="Stepper"?Ke=Se.stepperArray:Se.type=="ColorPicker"&&(Ke=Se.colors);Be=document.createElement("select"),Be.disabled=!0,Be.zimObject=Se,Be.addEventListener("change",function(ce){!K&&!Z=="android"||(ce.currentTarget.zimObject.zimTabParent.currentValueEvent=ce.target.value,p.stage.update())}),Be.size=1;var me,Ge;for(Ye=0;Ye<Ke.length;Ye++)me=Ke[Ye],Ge=document.createElement("option"),Ge.setAttribute("aria-label",me),Ge.innerHTML=me,Be.add(Ge),me==Se.zimTabParent.currentValue&&Ge.setAttribute("selected","selected");Be.setAttribute("role","button")}else Be=document.createElement("div"),Se&&(Be.zimObject=Se),Be.innerHTML="tag",Be.setAttribute("role",c?"application":"button"),Z=="android"&&Be.addEventListener("click",function(){Se.dispatchEvent("click")});if(Be.setAttribute("id",se),Be.setAttribute("tabindex",0),Be.setAttribute("aria-label",Ie),Se&&Be.setAttribute("aria-hidden",!Se.stage),J=="before"?Te.parentNode.insertBefore(Be,Te):Te.parentNode.insertBefore(Be,Te.nextSibling),Be.style.position="absolute",ve){Se=ve.obj;var Je=Se.boundsToGlobal();p.retina?(Be.style.left=p.x+Je.x*p.scale/m+"px",Be.style.top=p.y+Je.y*p.scale/m+"px",Be.style.width=Je.width*p.scale/m+"px",Be.style.height=Je.height*p.scale/m+"px"):(Be.style.left=p.x+Je.x*p.scale+"px",Be.style.top=p.y+Je.y*p.scale+"px",Be.style.width=Je.width*p.scale+"px",Be.style.height=Je.height*p.scale+"px"),ve.obj.zimTabTag=Be}else Be.style.left="-1000px",Be.style.top=p.y+"px";return Be.style.overflow="hidden",Be.style.zIndex=-5,Be.style.fontSize="20px",Be.style.color="rgba(0,0,0,.01)",B.push(Be),Be}var fe=!1,ye=!0,H=p.on("keydown",function(se){if(se.keyCode==9&&(re()||(fe=!1,S.tabIndex!=-1&&(S.tabIndex=-1)),fe?te(se):pe(se)),fe&&_.length>0&&S.tabIndex>=0&&se.keyCode==13){var Ie=_[S.tabIndex],Te=Ie.obj;if(Ie&&Te.stage){var ve=new Ne.Event("mousedown"),J=new Ne.Event("click");ve.fromEnter=J.fromEnter=!0,Te.type=="Pane"?(Te.backdrop.dispatchEvent(ve),Te.backdrop.dispatchEvent(J)):(Te.dispatchEvent(ve),Te.dispatchEvent(J))}}});function re(){for(var se=!1,Ie=0;Ie<B.length;Ie++)if(document.activeElement==B[Ie]){se=!0;break}return!!(document.activeElement==p.canvas||se)}function pe(se){!p.shiftKey&&(gn(O+"PrefixTab")==document.activeElement||p.canvas==document.activeElement)?(_.length>0&&(_[_.length-1].obj.focus=!0),ye=!0,fe=!0,te(se)):p.shiftKey&&(gn(O+"SuffixTab")==document.activeElement||gn(O+"BufferTab")==document.activeElement)&&(_.length>0&&(_[0].obj.focus=!0),ye=!0,fe=!0,te(se))}function te(se){if(se.ctrlKey){Ae(se.shiftKey?-1:1);return}se.shiftKey?S.tab(-1):S.tab(1),se.preventDefault()}var ge;this.tab=function(se){if(clearTimeout(ge),V&&p.stage.removeChild(V),n(se)&&(se=1),_.length==0){Ae(se);return}for(var Ie=0;Ie<_.length;Ie++){var Te=_[Ie].obj;if(Te.focus){Te.focus=!1;var ve=Ie+se,J=(ve+_.length*1e4)%_.length,Se=_[J];Te=Se.obj;for(var Be=0,Ye=!1;!(Te.stage&&(!Te.zimTabParent&&(n(Te.enabled)||Te.enabled)||Te.zimTabParent&&(n(Te.zimTabParent.enabled)||Te.zimTabParent.enabled)));)if(Be++,ve=ve+se,J=(ve+_.length*100)%_.length,Se=_[J],Te=Se.obj,Be==_.length){Ye=!0;break}if(Ye||!S.cycle&&ve!=J&&!ye){Ae(se);return}ye=!1,S.tabIndex=J;break}}};function Ae(se){fe=!1,gn(O+(se==1?"SuffixTab":"PrefixTab")).focus(),p.stage.removeChild(y),p.stage.update(),S.tabIndex=-1}this.changeTitle=function(se,Ie,Te){if(typeof se!="number"&&(se=se.zimTabIndex),!n(se)){if(Te&&n(Ie)){S.tabIndex=se;return}var ve=_[se],J=ve.obj;n(Ie)&&(Ie=J.zimTabTag.getAttribute("aria-label").split(" - currently")[0]),ve.title=Ie,G(ve),J.zimTabTag.setAttribute("aria-label",ve.title),Te&&(S.tabIndex=se)}};var ae=!1;this.talk=function(se){ae||(u=ue(O+"TalkTab","",D),u.setAttribute("role","alert"),ae=!0),u.removeAttribute("role"),u.setAttribute("aria-label",se),u.setAttribute("role","alert");var Ie=new Ne.Event("change");Ie.title=se,S.dispatchEvent(Ie)},this.resize=function(se){if(n(se))for(var ve=0;ve<_.length;ve++)J(_[ve].obj);else{if(typeof se!="number"&&(se=se.zimTabIndex),se<0)return;var Ie=_[se],Te=Ie.obj;!Te.stage&&V&&Te==S.currentObject&&(p.stage.removeChild(V),p.stage.update()),J(Te)}function J(Se){if(Se.type=="TextArea"||Se.type=="Loader"){Se.resize();return}else{var Be=Se.boundsToGlobal(),Ye=Se.zimTabTag;p.retina?(Ye.style.left=p.x+Be.x*p.scale/m+"px",Ye.style.top=p.y+Be.y*p.scale/m+"px",Ye.style.width=Be.width*p.scale/m+"px",Ye.style.height=Be.height*p.scale/m+"px"):(Ye.style.left=p.x+Be.x*p.scale/m/m+"px",Ye.style.top=p.y+Be.y*p.scale/m/m+"px",Ye.style.width=Be.width*p.scale/m/m+"px",Ye.style.height=Be.height*p.scale/m/m+"px")}Ye.setAttribute("aria-hidden",!Se.stage),Ye.hidden=!Se.stage}},Object.defineProperty(this,"currentObject",{get:function(){return _[Y]&&_[Y].obj?_[Y].obj:null},set:function(se){for(var Ie=0;Ie<_.length;Ie++)if(_[Ie].obj==se){S.tabIndex=Ie;break}}});var de=!0;Object.defineProperty(this,"enabled",{get:function(){return de},set:function(se){de=se}}),this.dispose=function(){k&&k.graphics.clear(),S.tabOrder=[];for(var se=0;se<B.length;se++)B[se].parentElement&&(B[se].outerHTML="");le(),S.removeAllEventListeners(),p.off("keydown",H)}},t.extend(t.Accessibility,Ne.EventDispatcher,null,"cjsEventDispatcher",!1),t.Manager=function(e){Le("75");var r=this;this.type=e,this.items=[],this.add=function(a){return Array.isArray(a)?r.items=r.items.concat(a):r.items.push(a),r};var i,l;this.remove=function(a){if(r){if(!a)r.items=[];else for(Array.isArray(a)||(a=[a]),i=a.length-1;i>=0;i--){l=a[i];var s=r.items.indexOf(l);s!=-1&&r.items.splice(s,1)}return r}},this.resize=function(a){if(r){if(a)for(Array.isArray(a)||(a=[a]),i=a.length-1;i>=0;i--)l=a[i],!l.resize&&r.items.indexOf(l)!=-1?r.items.splice(r.items.indexOf(l),1):l.resize();else for(i=r.items.length-1;i>=0;i--)r.items[i].resize?r.items[i].resize():r.items.splice(i,1);return r}},this.toggle=function(a,s){if(r){if(s)for(Array.isArray(s)||(s=[s]),c=s.length-1;c>=0;c--)l=s[c],!l.resize&&r.items.indexOf(l)!=-1?r.items.splice(r.items.indexOf(l),1):l.toggle(a);else for(var c=r.items.length-1;c>=0;c--)r.items[c].resize?r.items[c].toggle(a):r.items.splice(c,1);return r}},this.dispose=function(a){if(r){if(r.resize=null,a)for(Array.isArray(a)||(a=[a]),i=a.length-1;i>=0;i--)l=a[i],r.items.indexOf(l)!=-1&&r.items.splice(r.items.indexOf(l)),l.dispose&&l.dispose();else{for(i=r.items.length-1;i>=0;i--)r.items[i].resize?r.items[i].dispose():r.items.splice(i,1);r.items=null}return!0}}},t.ResizeManager=function(){Le("75.5"),t.Manager.call(this,"ResizeManager")},t.ResizeManager.prototype=new t.Manager,t.ResizeManager.prototype.constructor=t.ResizeManager,t.TransformManager=function(e,r){Le("75.7");var i=this;this.type="TransformManager",this.persistID=r,this.items=[];function l(s){!localStorage||s&&!s.pressup||i.savePersist(s)}this.add=function(s){var c=[];Array.isArray(s)?c=s:c=[s];for(var d,C=!1,T=0;T<c.length;T++)if(d=c[T],d.transformControls&&(d.originalVisible=d.transformControls.visible),d.toggle&&d.toggle(!1),i.items.length==0&&T==0&&(C=!0),d.type=="Blob"||d.type=="Squiggle")i.persistID||C&&(C=!1,d.controlsVisible=!0,i.currentObject=d),d.on("change",function(w){var A=new Ne.Event("transformed");A.transformObject=w.target,A.transformType=w.controlType,i.dispatchEvent(A)}),d.on("controlsshow",function(w){var A=new Ne.Event("transformshow");i.currentObject=A.transformObject=w.target,i.dispatchEvent(A)}),d.on("controlshide",function(w){var A=new Ne.Event("transformhide");A.transformObject=w.target,i.currentObject=null,i.dispatchEvent(A)}),d.on("update",function(w){var A=new Ne.Event("transformed");A.transformObject=w.target,A.transformType=w.controlType,i.dispatchEvent(A)});else if(d.type=="Connectors")i.persistID||C&&(C=!1,i.currentObject=d),d.on("connection",function(w){var A=new Ne.Event("transformed");A.transformObject=w.target,A.transformType="connection",i.dispatchEvent(A)});else if(d.type=="Pack")i.persistID||C&&(C=!1,i.currentObject=d),d.on("change",function(w){var A=new Ne.Event("transformed");A.transformObject=w.target,A.transformType="change",i.dispatchEvent(A)});else{var h=d.transformControls;i.persistID||C&&d.type!="Layer"&&(C=!1,d.originalVisible&&(h.show(),i.currentObject=d)),d.on("transformed",function(w){var A=new Ne.Event("transformed");A.transformObject=w.target,A.transformType=w.transformType,i.dispatchEvent(A)}),d.on("transformshow",function(w){var A=new Ne.Event("transformshow");i.currentObject=A.transformObject=w.target,i.dispatchEvent(A)}),d.on("transformhide",function(w){var A=new Ne.Event("transformhide");A.transformObject=w.target,i.currentObject=null,i.dispatchEvent(A)})}i.items=i.items.concat(s),i.persist&&!n(i.persistID)&&i.persist(i.persistID)},this.remove=function(s){if(n(s)){i.items=[];return}Array.isArray(s)||(s=[s]);for(var c,d=0;d<s.length;d++){c=s[d],i.currentObject==c&&(i.currentObject=null),c.transformedEvent&&(c.off("transformed",c.transformedEvent),c.transformedEvent=null),c.type=="Blob"||c.type=="Squiggle"?c.controlsVisible=!1:c.transformControls&&c.transformControls.remove();var C=i.items.indexOf(c);C!=-1&&i.items.splice(C,1)}r&&i.savePersist()},this.show=function(s){if(!n(s)){if(s.type=="Blob"||s.type=="Squiggle")s.controlsVisible||(s.controlsVisible=!0);else{var c=s.transformControls;if(!c||c.visible)return;c.show()}i.currentObject=s}},this.hide=function(s){if(!n(s))if(i.currentObject==s&&(i.currentObject=null),s.type=="Blob"||s.type=="Squiggle")s.controlsVisible&&(s.controlsVisible=!1);else{var c=s.transformControls;if(!c||c.visible)return;c.hide()}},this.hideAll=function(s){for(var c,d,C=0;C<i.items.length;C++)if(d=i.items[C],!d||!(d.transformControls||d.update))i.items.splice(C);else{if(i.items[C]==s)continue;d.type=="Blob"||d.type=="Squiggle"?d.controlsVisible&&(d.controlsVisible=!1):(c=i.items[C].transformControls,c.visible&&c.hide())}i.currentObject=null},this.resize=function(){if(i){for(var s,c=0;c<i.items.length;c++)s=i.items[c],!s||!(s.transformControls||s.update)?i.items.splice(c):s.type=="Blob"||s.type=="Squiggle"?s.update():s.transformControls.resize();r&&i.savePersist()}},n(e)||i.add(e);var a="TransformManager persist(persistID) - sorry, must provide id";this.persist=function(s){var c,d;if(n(s)&&dt){$e(a);return}i.persistID=s;var C=0;if(localStorage&&localStorage[s]){var T=i.persistData=JSON.parse(localStorage[s]);if(T.length==i.items.length)for(d=0;d<i.items.length;d++)T[d].controls&&(i.currentObject=i.items[d]),T[d]&&(T[d].type=="Blob"||T[d].type=="Squiggle")?(i.items[d].points.length!=T[d].points.length&&(i.items[d].points=T[d].points),i.items[d].setData(T[d]),i.items[d]==i.currentObject&&i.currentObject.toggle(!0),C++,C==T.length&&setTimeout(function(){i.dispatchEvent("persistcomplete")},100)):T[d]&&T[d].type=="Connectors"?(i.items[d].setSteps(T[d].steps),i.items[d].loc(T[d].x,T[d].y),i.items[d].sca(T[d].scale),C++,C==T.length&&setTimeout(function(){i.dispatchEvent("persistcomplete")},100)):T[d]&&T[d].type=="Pack"?(i.items[d].setOrder(T[d].order),i.items[d].outerWidth=T[d].outerWidth,i.items[d].outerHeight=T[d].outerHeight,C++,C==T.length&&setTimeout(function(){i.dispatchEvent("persistcomplete")},100)):T[d]&&(n(i.items[d].transformControls)?-function(){var h=c=i.items[d],w=T[d];t.interval(50,function(A){h.transformControls&&(h.transformControls.setData(w),h.dispatchEvent("persistset"),C++,C==T.length&&(setTimeout(function(){h==i.currentObject&&i.currentObject.toggle(!0),i.dispatchEvent("persistcomplete")},100),A.clear()))},20,null,null,"ms")}():(i.items[d].transformControls.setData(T[d]),-function(){var h=c=i.items[d];t.interval(50,function(w){h.dispatchEvent("persistset"),C++,C==T.length&&(setTimeout(function(){h==i.currentObject&&i.currentObject.toggle(!0),i.dispatchEvent("persistcomplete")},100),w.clear())},20,null,null,"ms")}()))}for(d=0;d<i.items.length;d++)c=i.items[d],c.transformedEvent||(c.type=="Blob"||c.type=="Squiggle"?(c.transformedEvent=c.on("change",function(h){h.pressup=!0,l(h)}),c.transformedUEvent=c.on("update",function(h){h.pressup=!0,l(h)}),c.transformedSEvent=c.on("controlsshow",function(h){h.pressup=!0,l(h)}),c.transformedHEvent=c.on("controlshide",function(h){h.pressup=!0,l(h)})):c.type=="Connectors"?c.transformedEvent=c.on("connection",function(h){h.pressup=!0,l(h)}):c.type=="Pack"?c.transformedEvent=c.on("change",function(h){h.pressup=!0,l(h)}):(c.transformedEvent=c.on("transformed",l),c.transformedSEvent=c.on("transformshow",l),c.transformedHEvent=c.on("transformhide",l)))},this.savePersist=function(){for(var s=[],c=0;c<i.items.length;c++){var d=i.items[c];d.type=="Blob"||d.type=="Squiggle"?d.recordData&&s.push(d.recordData()):d.type=="Connectors"?s.push({type:d.type,x:d.x,y:d.y,scale:d.scale,steps:d.getSteps()}):d.type=="Pack"?s.push({type:d.type,outerWidth:d.outerWidth,outerHeight:d.outerHeight,order:d.getOrder()}):d.transformControls&&d.transformControls.recordData&&s.push(d.transformControls.recordData())}i.persistData=s,localStorage[i.persistID]=JSON.stringify(s)},this.clearPersist=function(s){if(n(s)&&dt){$e(a);return}i.persistData=null,localStorage&&localStorage.removeItem(s)},this.stopPersist=function(){for(var s=0;s<i.items.length;s++){var c=i.items[s];c.transformedEvent&&(c.type=="Blob"||c.type=="Squiggle"?(c.off("change",c.transformedEvent),c.off("update",c.transformedUEvent),c.off("controlsshow",c.transformedSEvent),c.off("controlshide",c.transformedHEvent)):c.type=="Connectors"?c.off("connection",c.transformedEvent):c.type=="Pack"?c.off("change",c.transformedEvent):(c.off("transformed",c.transformedEvent),c.off("transformshow",c.transformedSEvent),c.off("transformhide",c.transformedHEvent)),c.transformedEvent=null,c.transformedUEvent=null,c.transformedSEvent=null,c.transformedHEvent=null)}i.persistData=null},n(r)||i.persist(r),this.dispose=function(s,c){if(n(s)&&(s=!0),i.removeAllEventListeners(),i.persistID&&s&&i.stopPersist(),c)for(var d=0;d<i.items.length;d++){var C=i.items[d];C.type=="Blob"||C.type=="Squiggle"?C.dispose():C.transformControls.dispose()}}},t.extend(t.TransformManager,Ne.EventDispatcher,null,"cjsEventDispatcher",!1),t.GuideManager=function(){Le("77"),t.Manager.call(this,"GuideManager")},t.GuideManager.prototype=new t.Manager,t.GuideManager.prototype.constructor=t.GuideManager,t.GridManager=function(){Le("79"),t.Manager.call(this,"GridManager")},t.GridManager.prototype=new t.Manager,t.GridManager.prototype.constructor=t.GridManager,t.LayoutManager=function(){Le("81"),t.Manager.call(this,"LayoutManager")},t.LayoutManager.prototype=new t.Manager,t.LayoutManager.prototype.constructor=t.LayoutManager,t.SelectionSet=function(e){Le("81.5"),this.type="SelectionSet",n(e)&&(e=[]),this.selections=e,this.clear=function(){this.selections=[]},this.isSelected=function(r){return this.selections.indexOf(r)>=0},this.add=function(r,i,l,a){if(!n(r)){n(i)&&(n(this.selectionManager)||(i=this.selectionManager.multiple)),n(this.selectionManager)||(this.selectionManager.setCurrent(this),!i&&this.selectionManager.multipleSets&&this.selectionManager.clear()),i||this.clear();var s=this.selections.indexOf(r);if(!(s>=0)){if(this.selections.push(r),!n(l)){Array.isArray(l)||(l=[l]);for(var c=0;c<=l.length;c++)l[c].add(r,i)}if(!n(a))for(Array.isArray(a)||(a=[a]),c=0;c<=a.length;c++)a[c].remove(r,i)}}},this.remove=function(r,i,l,a){if(!n(r)){n(i)&&(n(this.selectionManager)||(i=this.selectionManager.multiple)),n(this.selectionManager)||this.selectionManager.setCurrent(this),i||this.clear();var s=this.selections.indexOf(r);if(n(this.selectionManager)||(this.selectionManager.setCurrent(this),!i&&this.selectionManager.multipleSets&&this.selectionManager.clear()),i||this.clear(),i?s>=0&&this.selections.splice(s,1):this.clear(),!n(l)){Array.isArray(l)||(l=[l]);for(var c=0;c<=l.length;c++)l[c].remove(r,i)}if(!n(a))for(Array.isArray(a)||(a=[a]),c=0;c<=a.length;c++)a[c].add(r,i)}},this.toggle=function(r,i,l,a){this.isSelected(r)?this.remove(r,i,l,a):this.add(r,i,l,a)},this.dispose=function(){return this.clear(),this.selections=null,!0}},t.SelectionManager=function(e,r,i){Le("81.6"),this.cjsEventDispatcher_constructor(),this.type="SelectionManager",n(e)&&(e=[]),n(i)&&(i=!0),Array.isArray(e)||(e=[e]),this.sets=e,this.multipleKey=r,this.multipleSets=i,this.multiple=!1;for(var l=this,a=0;a<e.length;a++)e[a].selectionManager=this;this.clear=function(){this.currentSet=null;for(var c=0;c<e.length;c++)e[c].clear()},this.setCurrent=function(c){this.currentSet=c;for(var d=0;d<e.length;d++)e[d]!=c&&(this.multipleSets||e[d].clear())};var s=new Ne.Event("keydown");this.eventRemove=s.remove,this.keydownEvent=function(c){c.remove=l.eventRemove,l.multipleKey&&(l.multiple=c[l.multipleKey+"Key"]),l.ctrlKey=c.ctrlKey,l.shiftKey=c.shiftKey,l.metaKey=c.metaKey,l.dispatchEvent(c),c.keyCode==90&&(l.ctrlKey||l.metaKey)&&l.dispatchEvent("undo")},j.addEventListener("keydown",this.keydownEvent),this.keyupEvent=function(c){l.multipleKey&&(l.multiple=c[l.multipleKey+"Key"]),l.ctrlKey=c.ctrlKey,l.shiftKey=c.shiftKey,l.metaKey=c.metaKey,c.remove=l.eventRemove,l.dispatchEvent(c)},j.addEventListener("keyup",this.keyupEvent),this.dispose=function(){this.clear(),j.removeEventListener("keydown",this.keydownEvent),j.removeEventListener("keyup",this.keyupEvent)}},t.extend(t.SelectionManager,Ne.EventDispatcher,null,"cjsEventDispatcher",!1),typeof At>"u")var At;t.Bind=function(e,r,i,l,a,s,c,d){var C="connection, bindType, master, masterFilter, couple, smartDecimals, report, setDefault",T;if(T=lt(t.Bind,arguments,C,this))return T;Le("81.8"),this.type="Bind";var h=this;n(e)&&localStorage&&n(At)&&(n(r)||r==t.LOCALSTORAGE)?(e="zimBind",r=t.LOCALSTORAGE):e&&e.match(/\/|\./)?(n(r)&&(r=t.GET),e.match(/\?/)?e+="&":e+="?"):e&&n(r)&&(r=t.LOCALSTORAGE),n(s)&&(s=!0),r==t.LOCALSTORAGE&&!localStorage&&(dt&&$e("Bind() - no localStorage"),h.error="error - no localStorage"),this.connection=e,this.bindType=r,this.master=i,this.masterFilter=l,this.smartDecimals=s,n(c)&&(c=!1),(!At||d)&&(At=this),Object.defineProperty(h,"default",{get:function(){return h==At},set:function(x){!x&&At==h?At=null:x&&(At=h)}}),this.bindType==t.POST&&(h.ajax=new t.Ajax),this.bindings={},this.ids=[],this.data={},this.objIDs=new t.Dictionary(!0),this.toIDs={},this.fromIDs={},this.add=function(x,E,k,p,m){if(n(k)||n(E)||n(x))return h;if(h.bindings[x]){if(h.bindings[x].obj!=E)return dt&&$e("Bind() - id can be used with only one object"),h}else{h.ids.indexOf(x)<=0&&h.ids.push(x),h.bindings[x]={obj:E,props:[]},!n(m)&&typeof m=="function"&&(h.bindings[x].filter=m);var S=h.objIDs.at(E);S?S.indexOf(x)<0&&S.push(x):h.objIDs.add(E,[x])}!Array.isArray(k)&&k.constructor!={}.constructor&&(k=[k]);var _=h.bindings[x].props;Array.isArray(k)?t.loop(k,function(B){Y(h.toIDs,B,x),Y(h.fromIDs,B,x),_.indexOf(B)<0&&_.push(B)}):t.loop(k,function(B,b){(b==t.BOTH||b==t.TO)&&Y(h.toIDs,B,x),(b==t.BOTH||b==t.FROM)&&Y(h.fromIDs,B,x),_.indexOf(B)<0&&_.push(B)});function Y(B,b,X){n(B[b])?B[b]=[X]:B[b].indexOf(X)<0&&B[b].push(X)}return c&&P("Bind Report: ADD ["+x+"]",(k?" "+k:"")+(p?" "+p:"")),h.bindType==t.LOCALSTORAGE?(h.from(null,x,k,p),(!h.data||t.isEmpty(h.data))&&h.to(x,k)):(y("bind",null,[m],h.data,p),h.applyData()),h},this.updatefilter=function(x,E){var k=h.bindings[x];return k&&(n(E)?k.filter&&delete k.filter:typeof E=="function"&&(k.filter=E)),h},this.remove=function(x,E,k,p,m,S){var _;if(!n(x)&&!Array.isArray(x)&&(x=[x]),!n(x)){_=[];var Y=[];t.loop(x,function(ne){typeof ne=="string"?_.push(ne):Y.push(ne)})}!n(E)&&!Array.isArray(E)&&(E=[E]),n(m)&&(m=!0),x=_.concat(Y),x.length==0&&(x=null);var B=w("from",x,E,!1),b=B[0];B=B[1];var X=y("remove",p,b,B,k);if(X=="stop")return;var V=t.copy(B);n(E)||E.length==0?(_.length>0&&t.loop(_,function(ne){K(ne,!0)}),Y.length>0&&t.loop(Y,function(ne){_=h.objIDs.at(ne),_.length>0&&t.loop(_,function(F){K(F,!1)}),h.objIDs.remove(ne)})):(_=[],t.loop(B,function(ne,F){var D=h.bindings[ne],u=D.props;t.loop(F,function(f){var o=u.indexOf(f);o>=0&&u.splice(o,1),W(f,ne)}),u.length==0&&_.push(ne)}),_.length>0&&h.remove(_));function O(ne){S&&typeof S=="function"&&(a&&(ne=t.couple(ne)),S(ne)),c&&P("Bind Report: REMOVE"+(k?" ["+k+"]":""),ne)}if(m){var Z="type="+h.bindType+"&";h.bindType==t.LOCALSTORAGE?(h.to(),O("success")):h.bindType==t.GET?(X=JSON.stringify(V),a&&(X=t.couple(X)),t.async(h.connection+Z+"remove="+X,O,"callbackRemove")):h.bindType==t.POST?h.ajax.post(h.connection+Z,V,O,"remove"):h.bindType==t.SOCKET}function W(ne,F){var D,u;D=h.fromIDs[ne],D&&(u=D.indexOf(F),u>=0&&D.splice(u,1),D.length==0&&delete h.fromIDs[ne]),D=h.toIDs[ne],D&&(u=D.indexOf(F),u>=0&&D.splice(u,1),D.length==0&&delete h.toIDs[ne])}function K(ne,F){var D=h.bindings[ne].obj,u=h.bindings[ne].props,f=h.objIDs.at(D),o=f.indexOf(ne);o>=0&&f.splice(o,1),F&&f.length==0&&Y.push(D),o=h.ids.indexOf(ne),o>=0&&h.ids.splice(o,1),t.loop(u,function(g){W(g,ne)}),delete h.bindings[ne]}return h};function w(x,E,k){var p=[],m;if(n(E)&&n(k)){if(x=="from"&&h.bindType!=t.LOCALSTORAGE)return t.loop(h.bindings,function(B){B.filter&&p.push(B.filter)}),[p,"full"];m=h.ids}else!n(E)&&!Array.isArray(E)&&(E=[E]),!n(k)&&!Array.isArray(k)&&(k=[k]),E&&(m=[],t.loop(E,function(B){if(typeof B=="string")m.indexOf(B)<0&&m.push(B);else{var b=h.objIDs.at(B);b&&t.loop(b,function(X){m.indexOf(X)<0&&m.push(X)})}}));var S={};return m?_(k):k&&Y(),[p,S];function _(B){t.loop(m,function(b){var X=h.bindings[b];if(X){X.filter&&p.push(X.filter);var V=X.obj;t.loop(B||X.props,function(O){var Z=h.toIDs[O];if(Z&&Z.indexOf(b)>=0)if(x=="from")S[b]||(S[b]=[]),S[b].push(O);else{S[b]||(S[b]={});var W=V[O];typeof W=="number"&&h.smartDecimals&&(W>1?W=t.decimals(W,1):W=t.decimals(W,2)),S[b][O]=t.copy(W)}})}})}function Y(){var B=[];t.loop(k,function(b){t.loop(h.toIDs[b],function(X){var V=h.bindings[X];B.indexOf(X)<0&&(V.filter&&p.push(V.filter),B.push(X));var O=V.obj;if(x=="from")S[X]||(S[X]=[]),S[X].push(b);else{S[X]||(S[X]={});var Z=O[b];typeof Z=="number"&&h.smartDecimals&&(Z>1?Z=t.decimals(Z,1):Z=t.decimals(Z,2)),S[X][b]=t.copy(Z)}})})}}this.stopProcess=!1,this.stop=function(){h.stopped=!0};var A=function(){var x=this;x.stop=function(){x.stopped=!0}};function y(x,E,k,p,m){var S=new A,_=p!=null&&!t.isEmpty(p)&&h.data;if(v(S,m))return["stop",p];h.masterFilter&&typeof h.masterFilter=="function"&&(p=h.data=h.masterFilter(p,x,m,S));var Y=t.loop(k,function(B){if(typeof B=="function"){if(v(S,m))return"stop";p=h.data=B(p,x,m,S)}});return Y=="stop"||v(S,m)?["stop",p]:(E&&typeof E=="function"&&(p=h.data=E(p,x,m,S)),v(S,m)?["stop",p]:(_&&!h.data&&dt&&$e("Bind()"+(x?" ["+x+"]":"")+(m?" ["+m+"]":"")+" - warning, a filter may not have returned data"),["go",p]))}function v(x,E){if(h.stopped||x.stopped)return P("STOP"+(E?" ["+E+"]":""),x.stopped?"process stopped":"bind stopped"),x.stopped?x.stop=null:h.stopped=!1,!0}this.to=function(x,E,k,p,m,S,_,Y){var B="targets, props, extra, filter, smartDecimals, call, lock, unique",b;if(b=lt(h.to,arguments,B))return b;var X=w("to",x,E,m),V=X[0];X=X[1];var O=y("to",p,V,X,k);if(X=O[1],O[0]=="stop")return;if(h.bindType==t.LOCALSTORAGE)localStorage[h.connection]=JSON.stringify(X),f(X);else{var Z="type="+h.bindType+"&";if(!X||t.isEmpty(X))return h;if(h.bindType==t.GET){var W=X;t.isJSON(W)||(W=JSON.stringify(W)),a&&(W=t.couple(W)),c&&P("Bind Report: TO [bindings]",W),W=t.urlEncode(W);var K=n(h.master)?"":"&master="+t.urlEncode(i),ne=n(_)?"":"&lock="+t.urlEncode(_),F=n(Y)?"":"&unique="+t.urlEncode(Y),D=n(k)?"":"&extra="+t.urlEncode(k),u=h.connection+Z+"command=to&data="+W+K+ne+F+D;c&&P("Bind Report: TO [url]",u),t.async(u,f,"callbackTo")}else h.bindType==t.POST&&(h.ajax.master=i,h.ajax.couple=a,h.ajax.lock=_,h.ajax.unique=Y,c&&P("Bind Report: TO [bindings]",X),h.ajax.post(h.connection+Z,X,"to",k,f))}function f(o){a&&(o=t.decouple(o)),S&&typeof S=="function"&&S(o),c&&P("Bind Report: TO"+(k?" ["+k+"]":" -"),o)}return h},this.toLock=function(x,E,k,p,m,S){var _="targets, props, extra, filter, smartDecimals, call",Y;if(Y=lt(h.toLock,arguments,_))return Y;if(h.bindType.toLowerCase()=="localstorage")return h.to(x,E,k,p,m,S),h;var B=t.makeID();h.from(b,x,E,k,p,B);function b(){h.to(x,E,k,p,m,S,B)}return h},this.toUnique=function(x,E,k,p,m,S){var _="targets, props, extra, filter, smartDecimals, call",Y;return(Y=lt(h.toUnique,arguments,_))?Y:(h.to(x,E,k,p,m,S,null,!0),h)},this.toggleReport=function(x){return n(x)?c=!c:c=x,h},c&&P("Bind Report: CREATE ["+r.toUpperCase()+"]",e+(i?" "+i:""));function P(x,E){h==At?yr(x,E):xr(x,E)}return this.report=function(){var x="Bind {DATA} Report:",E=t.copy(h.data);return h==At?yr(x,E):xr(x,E),x="Bind {BINDINGS} Report:",E=t.copy(h.bindings),h==At?yr(x,E):xr(x,E),h},this.from=function(x,E,k,p,m,S){var _="call, targets, props, extra, filter, lock",Y;if(Y=lt(h.from,arguments,_))return Y;var B=w("from",E,k,s),b=B[0];B=B[1];var X=y("fromTo",m,b,B,p);if(B=X[1],X[0]=="stop")return;var V="type="+h.bindType+"&";if(h.bindType==t.LOCALSTORAGE)(!localStorage[h.connection]||localStorage[h.connection]==null)&&(localStorage[h.connection]="{}"),h.data=JSON.parse(localStorage[h.connection]),F(h.data);else if(h.bindType==t.GET){var O=B;t.isJSON(O)||(O=JSON.stringify(O)),a&&(O=t.couple(O)),c&&P("Bind Report: FROM [bindings]",O),O=t.urlEncode(O);var Z=n(h.master)?"":"&master="+t.urlEncode(i),W=n(S)?"":"&lock="+t.urlEncode(S),K=n(p)?"":"&extra="+t.urlEncode(p),ne=h.connection+V+"data="+O+"&command=from"+Z+W+K;c&&P("Bind Report: FROM [url]",ne),t.async(ne,F,"callbackFrom")}else h.bindType==t.POST&&(h.ajax.master=i,h.ajax.couple=a,h.ajax.lock=S,c&&P("Bind Report: FROM [bindings]",B),h.ajax.post(h.connection+V,B,"from",p,F));function F(D){if(h.data=D,a&&(h.data=t.decouple(h.data)),!n(S))var u=JSON.stringify(h.data);var f=y("from",m,b,h.data,p);if(f[0]!="stop"){var o=!1;(n(S)||u!=JSON.stringify(h.data))&&(o=!0,h.applyData()),c&&P("Bind Report: FROM"+(p?" ["+p+"]":" -"),o?h.data:"data not applied in toLock()"),x&&typeof x=="function"&&x(h.data)}}return h},this.applyData=function(){return t.loop(h.data,function(x,E){var k=h.bindings[x];if(k){var p=h.bindings[x].obj;t.loop(E,function(m,S){p[m]=S})}}),h},this.clear=function(){return h.bindType==t.LOCALSTORAGE&&(localStorage[h.connection]=null),h},this.removeAllBindings=function(x,E){if(n(x)&&(x=!0),this.bindings={},this.ids=[],this.data={},this.objIDs=new t.Dictionary(!0),this.toIDs={},this.fromIDs={},x){var k="type="+h.bindType+"&";if(h.bindType==t.LOCALSTORAGE)h.clear(),m("success");else if(h.bindType==t.GET){var p=n(h.master)?"":"&master="+encodeURI(i);t.async(h.connection+k+"command=removeAll"+p,m,"callbackRemoveAll")}else h.bindType==t.POST&&(h.ajax.master=i,h.ajax.post(h.connection+k,{},"removeAll",null,m,"removeAll"))}function m(S){E&&typeof E=="function"&&E(S),c&&P("Bind Report: REMOVEALL",S)}return h},h},t.Swipe=function(e,r,i,l,a){var s="obj, distance, duration, isometric, overrideNoSwipe",c;if(c=lt(t.Swipe,arguments,s,this))return c;if(Le("70"),this.cjsEventDispatcher_constructor(),this.type="Swipe",n(e)||!e.on){$e(`zim controls - Swipe():
Please pass in object`);return}n(r)&&(r=30);var d=Tt(i);n(i)&&(i=d=="s"?.08:80),this.distance=r,this.duration=i,this.active=!0;var C,T,h,w,A,y,v=this,P,x,E=e.on("mousedown",function(k){if(!v.active||!a&&k.target.zimNoSwipe)return;v.obj=k.target,w=C=k.stageX/t.scaX,A=T=k.stageY/t.scaY,h=!0,v.dispatchEvent("swipedown"),clearTimeout(y),y=setTimeout(function(){h&&(p(),h=!1)},v.duration*(d=="s"?1e3:1)),P=e.on("pressmove",function(m){w=m.stageX/t.scaX,A=m.stageY/t.scaY}),x=e.on("pressup",function(){h&&(p(),h=!1,clearTimeout(y))});function p(){var m=new Ne.Event("swipe");if(m.obj=v.obj,m.stageX=k.stageX/t.scaX,m.stageY=k.stageY/t.scaY,m.rawX=k.rawX/t.scaX,m.rawY=k.rawY/t.scaY,m.swipeX=m.swipeY=0,v.direction="none",l){if(Math.abs(w-C)>v.distance||Math.abs(A-T)>v.distance){var S=Math.atan2(A-T,w-C)*180/Math.PI;S=(S+360)%360,S>=270&&S<360?(m.swipeY=-1,v.direction="up"):S>=0&&S<90?(m.swipeX=1,v.direction="right"):S>=90&&S<180?(m.swipeY=1,v.direction="down"):S>=180&&S<270&&(m.swipeX=-1,v.direction="left")}}else Math.abs(w-C)>Math.abs(A-T)?(w-C>v.distance&&(m.swipeX=1,v.direction="right"),C-w>v.distance&&(m.swipeX=-1,v.direction="left")):(A-T>v.distance&&(m.swipeY=1,v.direction="down"),T-A>v.distance&&(m.swipeY=-1,v.direction="up"));v.dispatchEvent(m)}});this.disable=function(){v.active=!1},this.enable=function(){v.active=!0},this.dispose=function(){E&&e.off("mousedown",E),P&&e.off("pressmove",P),x&&e.off("pressup",x)}},t.extend(t.Swipe,Ne.EventDispatcher,null,"cjsEventDispatcher",!1),t.Swiper=function(e,r,i,l,a,s,c,d,C,T,h,w,A){var y="swipeOn, target, property, sensitivity, swiperType, min, max, damp, integer, factor, loop, pauseTime, otherSwiper",v;if(v=lt(t.Swiper,arguments,y,this))return v;if(Le("69.5"),this.cjsEventDispatcher_constructor(),this.type="Swiper",n(e)||!e.getStage||!e.stage){$e("zim.Swiper() - please provide container on stage");return}if(n(r))return;n(l)&&(l=1),n(a)&&(a="horizontal"),n(d)&&(d=.1),n(C)&&(C=!1),n(T)&&(T=1),n(h)&&(h=!1);var P=Tt(w);n(w)&&(w=P=="s"?.2:200);var x=this,E=e,k,p,m=x.desiredValue=r[i],S;this.target=r,this.property=i,this.sensitivity=l;var _=!1,Y=j.zdf||e.stage?e.stage.frame:{};E.canvas?(S=E,x.downEvent=E.on("stagemousedown",function(N){_=!0,F(N),x.moveEvent=E.on("stagemousemove",D),x.upEvent=E.on("stagemouseup",B),x.upEvent2=Y.on("mouseupplus",B)})):(S=E.stage,I(),x.downEvent=E.on("mousedown",F),x.moveEvent=E.on("pressmove",D),x.upEvent=E.on("pressup",b),x.upEvent2=Y.on("mouseupplus",b));function B(){_=!1,E.off("stagemousemove",x.moveEvent),E.off("stagemouseup",x.upEvent),x.dispatchEvent("swipeup")}function b(){_=!1,x.dispatchEvent("swipeup")}var X,V,O,Z=Math.sqrt(Math.pow(E.width,2)+Math.pow(E.height,2)),W,K,ne=!1;function F(N){ne=!0,S=N.target.stage,O=(E.parent?E.parent:E).localToGlobal(E.x,E.y),_=!0,a=="radial"?(W=N.stageX/t.scaX,K=N.stageY/t.scaY,X=Math.atan2(K-O.y,W-O.x)*t.DEG):k=a=="horizontal"?N.stageX/t.scaX:N.stageY/t.scaY,p=x.target[x.property],x.dispatchEvent("swipedown")}function D(N){if(_){if(a=="radial"){x.diff=t.dist(W,K,N.stageX/t.scaX,N.stageY/t.scaY),V=Math.atan2(N.stageY/t.scaY-O.y,N.stageX/t.scaX-O.x)*t.DEG;var L=t.sign(X-V);if(Math.abs(V-X)>180){_=!1;return}x.diff=x.diff*L;var ee=Math.max(10,t.dist(O.x,O.y,N.stageX/t.scaX,N.stageY/t.scaY));x.diff*=(Z-ee)/Z}else x.diff=k-(a=="horizontal"?N.stageX/t.scaX:N.stageY/t.scaY);if(A&&(Math.abs(x.diff)<Math.abs(A.diff)?(x.override=!0,A.override=!1):(x.override=!1,A.override=!0)),!x.override){if(Math.abs(x.diff)>0&&(x.swiperMoving=!0),m=p-x.diff*x.sensitivity*T,!n(s)&&!n(c)&&h){var z=m;m=(m+(c-s)*1e4-s)%(c-s)+s,Math.abs(z-m)>Math.abs(c-s)*.8&&(x.immediate(m),k=a=="horizontal"?N.stageX/t.scaX:N.stageY/t.scaY,p=x.target[x.property])}else n(s)||(m=Math.max(m,s)),n(c)||(m=Math.min(m,c));x.desiredValue=m,x.dispatchEvent("swipemove")}}}var u=new t.Damp(x.target[x.property],d),f=m,o=m;x.swiperTicker=t.Ticker.add(function(){m==f?m!=o&&(x.pauseTimeout&&x.pauseTimeout.clear(),o=m,x.pauseTimeout=t.timeout(w,function(){_&&x.dispatchEvent("swipepause"),x.pauseTimeout=null})):(o=null,f=m,x.pauseTimeout&&x.pauseTimeout.clear()),x.swiperMoving&&(x.target[x.property]=C?Math.round(u.convert(m)):u.convert(m),ne&&!_&&Math.abs(x.target[x.property]-m)<l/2&&(x.swiperMoving=!1,ne=!1,x.target[x.property]=m,x.immediate(x.target[x.property]),x.dispatchEvent("swipestop")))},S),this.immediate=function(N){u.immediate(N),x.target[x.property]=C?Math.round(N):N,x.desiredValue=m=N};var g=!0;Object.defineProperty(x,"enabled",{get:function(){return g},set:function(N){g!=N&&(N?le():R(),g=!!N)}}),Object.defineProperty(x,"desiredValue",{get:function(){return m},set:function(N){x.swiperMoving=!0,m=N}}),Object.defineProperty(x,"damp",{get:function(){return d},set:function(N){d=N,u.damp=d}});function q(){E.off("stagemousedown",x.downEvent),E.off("stagemousemove",x.moveEvent),E.off("stagemouseup",x.upEvent),Y.off("mouseupplus",x.upEvent2)}function I(){E.off("mousedown",x.downEvent),E.off("pressmove",x.moveEvent),E.off("pressup",x.upEvent),Y.off("mouseupplus",x.upEvent2)}function R(){E.canvas?q():I(),t.Ticker.remove(x.swiperTicker)}function le(){E.canvas?x.downEvent=E.on("stagemousedown",x.downEvent):(x.downEvent=E.on("mousedown",x.downEvent),x.moveEvent=E.on("pressmove",x.moveEvent),x.upEvent=E.on("pressup",x.upEvent),x.upEvent2=Y.on("mouseupplus",x.upEvent2)),x.immediate(x.target[x.property]),x.swiperTicker=t.Ticker.add(x.swiperTicker,S)}this.dispose=function(){R(),u=null,x.swiperTicker=null}},t.extend(t.Swiper,Ne.EventDispatcher,null,"cjsEventDispatcher",!1),t.MotionController=function(e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,x,E,k,p,m,S,_){var Y="target, type, speed, axis, boundary, map, diagonal, damp, flip, orient, constant, firstPerson, turnSpeed, moveThreshold, stickThreshold, container, localBoundary, mouseMoveOutside, mousedownIncludes, minPercentSpeed, maxPercentSpeed, dampKeyup, rotate",B;if(B=lt(t.MotionController,arguments,Y,this))return B;Le("69.7"),this.cjsEventDispatcher_constructor(),this.type="MotionController";var b=this,X,V="zim MotionController(): Please pass in a reference to the stage or a container on the stage";if(n(P))if(j.zdf)X=P=j.zdf.stage;else{$e(V);return}else if(n(P.stage))if(j.zdf)X=j.zdf.stage;else{$e(V);return}else X=P.stage;var O=X.frame;n(T)||(_=T),n(e)&&(e=new t.Container(1,1,null,null,!1));var Z=e.type=="Accelerator";if(n(i)&&(i=r=="pressmove"?20:7),!n(r)&&r.type=="DPad"){var W=r;r="manual",n(l)&&(l=W.axis),l=="all"&&(l="both"),W.on("change",function(){b.convert(e.x+W.dirX*i,e.y+W.dirY*i)})}(n(r)||r!="mousemove"&&r!="pressmove"&&r!="pressdrag"&&r!="keydown"&&r!="gamebutton"&&r!="gamestick"&&r!="swipe"&&r!="follow"&&r!="manual")&&(r="mousedown"),n(l)&&(l=Z?"horizontal":"both"),r=="keydown"&&n(s)&&(s=[[65,37],[68,39],[87,38],[83,40]]),r=="gamebutton"&&n(s)&&(w?s=[14,15,t.GamePad.RT,t.GamePad.LT]:s=[14,15,12,13]),r=="gamestick"&&n(s)&&(w?s=[[0,2],[0,2],[1],[1]]:s=[0,0,1,1]),r=="gamestick"&&n(s)&&(s=[0,0,1,1]),n(c)&&(c=!0),(l=="horizontal"||l=="vertical")&&(c=!1),n(d)&&(d=r=="keydown"||r=="gamebutton"?1:r=="pressmove"?.5:.1),n(w)&&(w=!1),n(A)&&(A=i*.4),n(y)&&(y=4),n(v)&&(v=.2),n(E)&&(E=!0),X.mouseMoveOutside=E,n(k)&&(k=[]),Array.isArray(k)||(k=[k]),e.type=="Pen"&&!e.move?k.push(e,e.paper):k.push(e),a&&a.getBounds&&(k?k.indexOf(a)==-1&&k.push(a):k=[a]),e.motionController=this,this.mousedownIncludes=k,n(S)&&(S=.3),b.dampKeyup=S,this.dirX=0,this.dirY=0,this.speed=i,this.turnSpeed=A,this.axis=l,this.target=e,this.moveThreshold=y,this.stickThreshold=v,this.boundary=a,e.zimMCStartAngle=e.rotation;var K=b.speed,ne=b.speed,F=0;b.rotation=e.zimMCStartAngle;var D,u;if(Z){u=P.getBounds();var f;!u||l=="vertical"&&!u.height||l!="vertical"&&!u.width?f=1e3:f=l=="vertical"?u.height:u.width,n(p)&&(p=0),n(m)&&(m=100),n(this.target.percentSpeed)&&(this.target.percentSpeed=(m-p)/2),b.x=f/2,b.y=f/2,D=new t.Proportion(0,f,p,m)}else b.x=this.target.x,b.y=this.target.y;var o=b.scaleX=e.scaleX,g=b.scaleY=e.scaleY,q,I,R,le,N=!1,L=!1,ee,z,$,xe,ie;if(r=="keydown"||r=="gamebutton"){for(z=0;z<4;z++)Array.isArray(s[z])||(s[z]=[s[z]]);var ke=[0,0,0,0],U=[],Ee=["X","X","Y","Y"],Q=[-1,1,-1,1],G={dirX:0,dirY:0};if(r=="keydown")var ue=O.on("keydown",ae);else{xe=b.gamepad=new t.GamePad;var fe=xe.on("buttondown",ae)}if(n(h))if(r=="keydown")var ye=O.on("keyup",de);else var H=xe.on("buttonup",de);ie={rotation:0,speedX:b.speed,speedY:b.speed};var re=t.Ticker.add(function(){if(w){Ie(G);return}var De=b.speed,Oe=b.speed;if(b.axis=="both"&&G.dirX!=0&&G.dirY!=0){var Re=J(G.dirX,G.dirY);De=Re.speedX,Oe=Re.speedY}(b.axis=="horizontal"||b.axis=="both")&&(b.x+=De*G.dirX),(b.axis=="vertical"||b.axis=="both")&&(b.y+=Oe*G.dirY),Te()},X)}else if(r=="mousedown"||r=="mousemove")q=X.on("stage"+r,function(De){if(X=De.target.stage,r=="mousedown"){if(Array.isArray(b.mousedownIncludes)||(b.mousedownIncludes=[b.mousedownIncludes]),b.mousedownIncludes.indexOf(P)<0)for(z=0;z<P.numChildren;z++){var Oe=P.getChildAt(z);if(b.mousedownIncludes.indexOf(Oe)==-1&&Oe.mouseEnabled&&Oe.hitTestPoint&&Oe.hitTestPoint(De.stageX/t.scaX,De.stageY/t.scaY))return}b.dispatchEvent("mousedown")}var Re=P.globalToLocal(E?De.rawX/t.scaX:De.stageX/t.scaX,E?De.rawY/t.scaY:De.stageY/t.scaY);b.x=Re.x,b.y=Re.y,Te()});else if(r=="pressmove"||r=="pressdrag"||r=="follow")e.type=="Pen"&&(e.write=!1),q=X.on("stagemousedown",function(De){var Oe;if(!((e.type=="Pen"||r=="pressmove")&&b.boundary&&!b.boundary.type=="Blob"&&(Oe={x:De.stageX/t.scaX,y:De.stageY/t.scaY},Oe.x<b.boundary.x||Oe.x>b.boundary.x+b.boundary.width||Oe.y<b.boundary.y||Oe.y>b.boundary.y+b.boundary.height))&&!(b.boundary&&b.boundary.type=="Blob"&&(r=="pressmove"||r=="pressdrag")&&(Oe={x:De.stageX/t.scaX,y:De.stageY/t.scaY},!b.boundary.shape.hitTestPoint(Oe.x,Oe.y)))&&!(r=="pressdrag"&&!e.hitTestPoint(De.stageX/t.scaX,De.stageY/t.scaY))){L=!1,Array.isArray(b.mousedownIncludes)||(b.mousedownIncludes=[b.mousedownIncludes]);var Re=!1;for(b.mouseDownIncludes&&(ee=X.getObjectUnderPoint(De.stageX,De.stageY,1)),z=0;z<b.mousedownIncludes.length;z++)ee&&b.mousedownIncludes[z].hitTestPoint&&b.mousedownIncludes[z].hitTestPoint(De.stageX/t.scaX,De.stageY/t.scaY)&&b.mousedownIncludes[z].contains(ee)&&(Re=!0);if(!Re)for(z=0;z<P.numChildren;z++){var Ze=P.getChildAt(z);if(b.mousedownIncludes.indexOf(Ze)==-1&&Ze.mouseEnabled&&Ze.hitTestPoint&&Ze.hitTestPoint(De.stageX/t.scaX,De.stageY/t.scaY))return}var be=P.globalToLocal(E?De.rawX/t.scaX:De.stageX/t.scaX,E?De.rawY/t.scaY:De.stageY/t.scaY);r!="follow"&&r!="pressdrag"&&b.immediate(l=="both"||l=="horizontal"?be.x:null,l=="both"||l=="vertical"?be.y:null),Te(),b.dispatchEvent("mousedown"),N=!0,b.moveX=E?De.rawX/t.scaX:De.stageX/t.scaX,b.moveY=E?De.rawY/t.scaY:De.stageY/t.scaY,I=X.on("stagemousemove",function(we){b.moveX=E?we.rawX/t.scaX:we.stageX/t.scaX,b.moveY=E?we.rawY/t.scaY:we.stageY/t.scaY,r!="follow"&&se()}),le&&t.Ticker.remove(le),r=="follow"&&(le=t.Ticker.add(se)),e.type=="Pen"&&(e.write=!0,e.paper.noMouse(),e.zimDragCheck=!0)}}),R=X.on("stagemouseup",function(){e.type=="Pen"&&(e.write=!1,e.paper.mouse(),e.zimDragCheck=!1,L&&e.stopCheck()),le&&t.Ticker.remove(le),X.off("stagemousemove",I),N=!1});else if(r=="gamestick"){for(xe=this.gamepad=new t.GamePad,z=0;z<4;z++)Array.isArray(s[z])||(s[z]=[s[z]]);ie={rotation:e.zimMCStartAngle,speedX:b.speed,speedY:b.speed};var pe=xe.on("data",function(De){for(G={dirX:0,dirY:0},z=0;z<s[0].length;z++)if($=De.axes[s[0][z]],Math.abs($)>b.stickThreshold){G.dirX=$;break}for(z=0;z<s[2].length;z++)if($=De.axes[s[2][z]],Math.abs($)>b.stickThreshold){G.dirY=$;break}if(w){Ie(G);return}b.x+=b.speed*G.dirX,b.y+=b.speed*G.dirY,Te()})}else if(r=="swipe")var te=new t.Swiper(X,b,"x",.8),ge=new t.Swiper(X,b,"y",.8,!1),Ae=te.on("swipemove",function(){Te()});function ae(De){var Oe=r=="keydown"?De.keyCode:De.buttonCode,Re;for(z=0;z<4;z++)if(s[z].indexOf(Oe)>-1){if(!c&&b.axis=="both"&&(G.dirX=G.dirY=0),G["dir"+Ee[z]]=Q[z],ke[z]=1,Re=U.indexOf(z),Re==0)return;Re>0&&U.splice(Re,1),U.unshift(z);return}}function de(De){var Oe=r=="keydown"?De.keyCode:De.buttonCode,Re;for(z=0;z<4;z++)if(s[z].indexOf(Oe)>-1){if(ke[z]=0,Re=U.indexOf(z),Re>=0&&U.splice(Re,1),b.axis!="both"||c)G["dir"+Ee[z]]=-ke[Math.floor(z/2)*2]+ke[Math.floor(z/2)*2+1];else if(U.length>0){G["dir"+Ee[z]]=0;var Ze=U[0];G["dir"+Ee[Ze]]=Q[Ze]}else G.dirX=G.dirY=0;return}}function se(){var De=P.globalToLocal(b.moveX,b.moveY);b.x=De.x,b.y=De.y,Te(),e.type=="Pen"&&!L&&e.drawing&&(L=!0)}function Ie(De){ie.rotation+=De.dirX*b.turnSpeed,b.rotation=ie.rotation,ie.speedX=Math.sin(ie.rotation*Math.PI/180)*b.speed*-De.dirY,ie.speedY=-Math.cos(ie.rotation*Math.PI/180)*b.speed*-De.dirY,b.x+=ie.speedX,b.y+=ie.speedY}function Te(){var De=b.x-(Z?b.target.percentSpeed:b.target.x),Oe=b.y-(Z?b.target.percentSpeed:b.target.y),Re=J(De,Oe);if(K=Re.speedX,ne=Re.speedY,!!_){if(n(Re.angle)||(b.rotation=Re.angle+e.zimMCStartAngle),n(b.rotation)){b.rotation=b.target.rotation;return}b.rotation+=F;var Ze=ve(b.rotation),be=b.target.rotation=ve(b.target.rotation);Math.abs(Ze-be)>180&&(be>Ze?be-=360:Ze-=360),b.dampR.immediate(be),b.target.rotation=be,b.rotation=Ze}}function ve(De){return(De%360+360)%360}function J(De,Oe){var Re=b.speed,Ze=b.speed,be,we=Math.sqrt(Math.pow(De,2)+Math.pow(Oe,2));return we>0&&(Re=Math.abs(De)/we*b.speed,Ze=Math.abs(Oe)/we*b.speed,be=90-Math.atan2(De,Oe)*180/Math.PI),{speedX:Re,speedY:Ze,angle:be}}var Se=this.x,Be=this.y,Ye=this.x,Ke=this.y,at=this.x=Z?f/2:this.target.x,me=this.y=Z?f/2:this.target.y;this.dampX=new t.Damp(at,d),this.dampY=new t.Damp(me,d),this.dampR=new t.Damp(this.target.rotation,d);var Ge=0,Je=0,ce=t.Ticker.add(function(){if(r=="manual"&&Te(),b.boundary&&b.boundary.type!="Blob"&&(b.x=t.constrain(b.x,b.boundary.x,b.boundary.x+b.boundary.width),b.y=t.constrain(b.y,b.boundary.y,b.boundary.y+b.boundary.height)),b.axis=="horizontal"||b.axis=="both"){if(b.dirX=t.sign(b.x-at),Math.abs(b.x-at)<K?at=b.x:at+=b.dirX*K,G&&G.dirX==0){var De=b.boundary?b.boundary.width/2:X.width/2,Oe=b.x-(b.x-De)*(Z?b.dampKeyup:0);at=Oe,b.x=at}Z&&u&&u.width?b.target.percentSpeed=D.convert(b.dampX.convert(at)):b.target.x=b.dampX.convert(at)}if(b.axis=="vertical"||b.axis=="both"){if(b.dirY=t.sign(b.y-me),Math.abs(b.y-me)<ne?me=b.y:me+=t.sign(b.y-me)*ne,G&&G.dirY==0){De=b.boundary?b.boundary.height/2:X.height/2;var Re=b.y-(b.y-De)*(Z?b.dampKeyup:0);me=Re,b.y=me}Z&&u&&u.height?b.target.percentSpeed=D.convert(b.dampY.convert(me)):b.target.y=b.dampY.convert(me)}if(b.boundary&&b.boundary.type=="Blob"&&(b.boundary.shape.hitTestPoint(b.target.x,b.target.y)?(Se=b.target.x,Be=b.target.y):(b.target.x=b.x=Se,b.target.y=b.y=Be,b.immediate(Se,Be))),r=="pressmove"&&N&&b.dispatchEvent("pressing"),d==1?(b.movingX=Math.round(Ye-b.x)!=0,b.movingY=Math.round(Ke-b.y)!=0,Ye=b.x,Ke=b.y):(b.movingX=Math.abs(at-(Z?b.target.percentSpeed:b.target.x))>b.moveThreshold,b.movingY=Math.abs(me-(Z?b.target.percentSpeed:b.target.y))>b.moveThreshold),b.moving&&!(b.movingX||b.movingY)?b.dispatchEvent("stopmoving"):!b.moving&&(b.movingX||b.movingY)&&b.dispatchEvent("startmoving"),b.moving=b.movingX||b.movingY,b.moving&&b.dispatchEvent("moving"),b.dirX!=Ge||b.dirY!=Je){var Ze=new Ne.Event("change"),be;b.dirX!=Ge?(be=["left",null,"right"],Ze.dir=be[b.dirX+1],Ge=b.dirX,!e.zimMCStartAngle&&(C=="horizontal"||C=="both")&&(b.scaleX=e.scaleX=b.dirX?Math.abs(e.scaleX)*b.dirX:e.scaleX,o!=0&&Math.round(b.scaleX/o)==-1?F=180:F=0)):(be=["up",null,"down"],Ze.dir=be[b.dirY+1],Je=b.dirY,!e.zimMCStartAngle&&(C=="vertical"||C=="both")&&(b.scaleY=e.scaleY=b.dirY?-Math.abs(e.scaleY)*b.dirY:e.scaleY,g!=0&&Math.round(b.scaleY/g)==-1?F=180:F=0)),b.dispatchEvent(Ze)}_&&!n(b.rotation)&&(b.target.rotation=b.dampR.convert(b.rotation))},X);this.immediate=function(De,Oe,Re){return!n(De)&&b.dampX&&(b.dampX.immediate(De),Z?b.x=b.target.percentSpeed=at=De:b.x=b.target.x=at=De,te&&te.immediate(De)),!n(Oe)&&b.dampY&&(b.dampY.immediate(Oe),Z?b.y=b.target.percentSpeed=me=Oe:b.y=b.target.y=me=Oe,ge&&ge.immediate(Oe)),!n(Re)&&b.dampR&&(b.dampR.immediate(Re),b.rotation=b.target.rotation=Re),Se=b.x,Be=b.y,b},this.convert=function(De,Oe){n(De)||(b.x=De),n(Oe)||(b.y=Oe),Te()},Object.defineProperty(b,"pausingSpeed",{get:function(){return b.speed},set:function(De){b.speed=De}}),this.paused=!1;var oe;this.pause=function(De,Oe,Re){return n(De)&&(De=!0),n(Oe)&&(Oe=0),n(Re)&&(Re=!1),De?(oe=b.speed,Oe>0?(t.animate({target:b,obj:{pausingSpeed:0},ticker:!1,time:Oe,call:function(){b.speed=0,b.paused=!0,b.enabled=!1,b.immediate(b.target.x,b.target.y),b.dispatchEvent("pause")}}),Re&&(N=!1,I&&X.off("stagemousemove",I),le&&t.Ticker.remove(le),e.type=="Pen"&&(e.write=!1,e.zimDragCheck=!1),R&&X.off("stagemouseup",R),L&&e.stopCheck(),r=="keydown"?ye&&O.off("keyup",ye):H&&xe.off("buttonup",H))):(b.speed=0,b.paused=!0,b.enabled=!1,b.immediate(b.target.x,b.target.y),setTimeout(function(){b.dispatchEvent("pause")},10))):(b.enabled=!0,Oe>0?t.animate({target:b,obj:{pausingSpeed:oe},ticker:!1,time:Oe,call:function(){b.speed=oe,b.paused=!1}}):(b.speed=oe,b.paused=!1)),b};var _e=!0;Object.defineProperty(b,"enabled",{get:function(){return _e},set:function(De){_e!=De&&(De?(je(),b.paused=!1):(Ve(),b.paused=!0),_e=!!De)}});function je(){r=="keydown"?(ue=O.on("keydown",ue),ye&&(ye=O.on("keyup",ye)),re=t.Ticker.add(re,X)):r=="gamebutton"?(fe=xe.on("buttondown",fe),H&&(H=xe.on("buttonup",H)),re=t.Ticker.add(re,X)):r=="gamestick"?pe=xe.on("data",pe):r=="swipe"?(te.enabled=!0,ge.enabled=!0,Ae&&(Ae=te.on("swipemove",Ae))):r=="mousedown"||r=="mousemove"?q=X.on("stage"+r,q):r=="pressmove"&&(q=X.on("stagemousedown",q),I&&(I=X.on("stagemousemove",I)),R&&(R=X.on("stagemouseup",R))),ce=t.Ticker.add(ce,X)}function Ve(){r=="keydown"?(O.off("keydown",ue),O.off("keyup",ye),t.Ticker.remove(re)):r=="gamebutton"?(xe.off("buttondown",fe),xe.off("buttonup",H),t.Ticker.remove(re)):r=="gamestick"?xe.off("data",pe):r=="swipe"?(te.enabled=!1,ge.enabled=!1,te.off("swipemove",Ae)):r=="mousedown"||r=="mousemove"?X.off("stage"+r,q):r=="pressmove"&&(X.off("stagemousedown",q),X.off("stagemousemove",I),X.off("stagemouseup",R)),t.Ticker.remove(ce)}this.dispose=function(){Ve(),xe&&xe.dispose(),te&&te.dispose(),ge&&te.dispose()}},t.extend(t.MotionController,Ne.EventDispatcher,"enabled","cjsEventDispatcher"),t.GamePad=function(){if(Le("69.8"),this.type="GamePad",this.cjsEventDispatcher_constructor(),!navigator.getGamepads){this.error=!0,dt&&$e("zim.GamePad() - no browswer support");return}var e;j.addEventListener("gamepadconnected",i),this.currentIndex=0;var r=this;function i(c){r.connected=!0,a("gamepadconnected",c);var d=navigator.getGamepads()[r.currentIndex];r.lastData=[];for(var C=0;C<d.buttons.length;C++)r.lastData[C]=d.buttons[C].pressed;function T(){if(e=requestAnimationFrame(T),r.data=navigator.getGamepads()[r.currentIndex],!!r.data){for(var h=r.buttons=[],w,A=0;A<r.data.buttons.length;A++)h[A]=r.data.buttons[A].pressed,h[A]!=r.lastData[A]&&(r.lastData[A]=h[A],h[A]?w=new Ne.Event("buttondown"):w=new Ne.Event("buttonup"),w.buttonCode=A,w.button=Bt[A],r.dispatchEvent(w));w=new Ne.Event("data"),w.axes=r.axes=r.data.axes,w.buttons=r.buttons,r.dispatchEvent(w)}}T()}var l=setInterval(function(){navigator.getGamepads&&navigator.getGamepads()[0]&&(r.connected||i(),clearInterval(l))},500);function a(c,d){var C=new Ne.Event(c);C.index=d.gamepad.index,C.id=d.gamepad.id,C.buttons=d.gamepad.buttons,C.axes=d.gamepad.axes,r.dispatchEvent(C)}var s=function(c){c.gamepad.index==r.currentIndex&&(cancelAnimationFrame(e),r.connected=!1,r.dispatchEvent("gamepaddisconnected"))};j.addEventListener("gamepaddisconnected",s),this.dispose=function(){j.removeEventListener("gamepadconnected",i),j.removeEventListener("gamepaddisconnected",s),cancelAnimationFrame(e),clearInterval(l),r.connected=!1}};var Bt=["A","B","X","Y","LB","RB","LT","RT","BACK","START","LS","RS","DPAD_UP","DPAD_DOWN","DPAD_LEFT","DPAD_RIGHT"];for(mn=0;mn<Bt.length;mn++)t.GamePad[Bt[mn]]=mn;var Ft=["LSX","LSY","RSX","RSY"];for(mn=0;mn<Ft.length;mn++)t.GamePad[Ft[mn]]=mn;t.extend(t.GamePad,Ne.EventDispatcher,null,"cjsEventDispatcher"),t.Portal=function(e,r){var i="obj, lands",l;if(l=lt(t.Portal,arguments,i,this))return l;if(Le("69.96"),n(e)||!e.stage)return;this.type="Portal";var a=this,s=r&&r.numChildren&&r.numChildren>0;if(s){var c=r.getChildAt(r.numChildren-1),d=r.getChildAt(r.numChildren-2);r.setChildIndex(d,r.numChildren-1),d.setMask(e)}function C(){r.setChildIndex(c,0),c=d,d=r.getChildAt(r.numChildren-2),r.setChildIndex(d,r.numChildren-1),c.setMask(null),d.setMask(e),e.stage.update()}e.on(t.mobile()?"mousedown":"mouseover",function(){a._enabled&&(s&&C(),a.dispatchEvent("enter"))}),e.on(t.mobile()?"pressup":"mouseout",function(){a._enabled&&a.dispatchEvent("exit")}),Object.defineProperty(this,"portal",{get:function(){return e},set:function(T){if((n(T)||!T.stage)&&dt){$e("zim.Portal() - please provide a Display Object to act as the portal");return}d.setMask(e)}}),Object.defineProperty(this,"currentLand",{get:function(){return c},set:function(T){if(r.contains(T))for(;T!=c;)C()}}),Object.defineProperty(this,"nextLand",{get:function(){return d},set:function(){if(dt){$e("zim.Portal() - nextLand is read only - remake Portal to change");return}}}),this._enabled=!0,Object.defineProperty(a,"enabled",{get:function(){return a._enabled},set:function(T){a._enabled=T}})},t.extend(t.Portal,Ne.EventDispatcher,null,"cjsEventDispatcher",!1),j.zimContactListener=null;var wt,Dt;function We(e,r,i,l,a,s,c,d,C,T,h,w){if(Le("69.97"),n(i)&&(i=0),l=="rectangle")e.body=e.physics.makeRectangle(e.width-i,e.height-i,r,a,c,d,C,T,h,s,w);else if(l=="circle")e.body=e.physics.makeCircle(e.width/2-i,r,a,c,d,C,T,h,s,w);else if(l=="triangle")n(e.a)&&(e.a=e.width,e.b=e.c=Math.sqrt(Math.pow(e.a/2,2)+Math.pow(e.height,2))),e.body=e.physics.makeTriangle(e.a-i,e.b-i,e.c-i,r,a,c,d,C,T,h,s,w);else if(l=="poly"){var A=[];e.reg(0,0,!0);var y=e;e.scale!=1&&(y=e.clone().transformPoints("scale",e.scale)),i&&(y=e.clone().transformPoints("scale",Math.max(0,1-i/((e.width+e.height)/4)))),t.loop(y.points,function(P){A.push({x:P[0],y:P[1]})}),e.body=e.physics.makePoly(A,e.width,e.height,r,a,c,d,C,T,h,s,w)}e.body.x=e.x,e.body.y=e.y,e.body.rotation=e.rotation,e.physics.addMap(e.body,e),e.impulse=function(P,x,E,k){n(P)&&(P=0),n(x)&&(x=0);var p=e.body.GetWorldCenter();return n(E)&&(E=p.x*e.physics.scale),n(k)&&(k=p.y*e.physics.scale),e.body.ApplyImpulse(new j.b2Vec2(P,x),new j.b2Vec2(E/e.physics.scale,k/e.physics.scale)),e},e.force=function(P,x,E,k){n(P)&&(P=0),n(x)&&(x=0);var p=e.body.GetWorldCenter();return n(E)&&(E=p.x*e.physics.scale),n(k)&&(k=p.y*e.physics.scale),e.body.ApplyForce(new j.b2Vec2(P,x),new j.b2Vec2(E/e.physics.scale,k/e.physics.scale)),e},e.setLinearVelocity=function(P,x){return e.body.SetLinearVelocity(new j.b2Vec2(P,x)),e},e.setAngularVelocity=function(P){return e.body.SetAngularVelocity(P),e},e.spin=function(P){return n(P)&&(P=10),e.body.ApplyTorque(P*1e3),e},e.torque=function(P){return n(P)&&(P=10),e.body.ApplyTorque(P),e},e.follow=function(P,x,E,k,p,m,S,_,Y,B,b,X){var V="damp, dampY, leftOffset, rightOffset, upOffset, downOffset, offsetDamp, offsetDampY, horizontal, vertical, borderLock, borderOriginal",O;return(O=lt(e.follow,arguments,V))?O:(e.physics.follow(e,P,x,E,k,p,m,S,_,Y,B,b,X),e)},e.noFollow=function(){return e.physics.follow(null),e},e.control=function(P,x,E,k,p){var m="type, speed, speedY, horizontal, vertical",S;return(S=lt(e.control,arguments,m))?S:(e.physics.control(e,P,x,E,k,p),e)},e.customControl=function(P,x,E){var k="dir, speed, speedY",p;return(p=lt(e.customControl,arguments,k))?p:(e.physics.customControl(P,x,E),e)},e.noControl=function(){return e.physics.noControl(e),e},e.sleep=function(){return e.body.SetAwake(!1),e},e.wake=function(){return e.body.SetAwake(!0),e};function v(){j.zimContactListener=new j.b2ContactListener,wt=new t.Dictionary(!0),Dt=new t.Dictionary(!0),j.zimContactListener.BeginContact=P,j.zimContactListener.EndContact=x;function P(E){var k=wt.at(E.m_fixtureB.GetBody());k&&k(E.m_fixtureA.GetBody().zimObj,E.m_fixtureA.GetBody()),k=wt.at(E.m_fixtureA.GetBody()),k&&k(E.m_fixtureB.GetBody().zimObj,E.m_fixtureB.GetBody())}function x(E){var k=Dt.at(E.m_fixtureB.GetBody());k&&k(E.m_fixtureA.GetBody().zimObj,E.m_fixtureA.GetBody()),k=Dt.at(E.m_fixtureA.GetBody()),k&&k(E.m_fixtureB.GetBody().zimObj,E.m_fixtureB.GetBody())}e.physics.world.SetContactListener(j.zimContactListener)}e.contact=function(P){return j.zimContactListener||v(),wt.add(e.body,P),e},e.noContact=function(){return wt.remove(e.body),e},e.contactEnd=function(P){return j.zimContactListener||v(),Dt.add(e.body,P),e},e.noContactEnd=function(){return Dt.remove(e.body),e},e.hasOwnProperty("dynamic")||Object.defineProperty(e,"dynamic",{get:function(){return e.body.GetType()==2},set:function(P){e.body.SetType(P==!0?2:0)}})}for(t.BlurEffect=function(e,r,i,l,a,s){var c="blurX, blurY, quality, style, group, inherit",d;if(d=lt(t.BlurEffect,arguments,c,this))return d;Le("69.972"),this.group=a;var C=l===!1?{}:t.getStyle("BlurEffect",a,s);n(e)&&(e=C.blurX!=null?C.blurX:10),n(r)&&(r=C.blurY!=null?C.blurY:10),n(i)&&(i=C.quality!=null?C.quality:1);var T=h(e,r,i);this.veeObj={blurX:T[0],blurY:T[1],quality:T[2]};function h(){return arguments}e=et(e),r=et(r),i=et(i),this.createjsBlurFilter_constructor(e,r,i),this.type="BlurEffect",this.clone=function(w){return new t.BlurEffect(w||!t.isPick(T[0])?e:T[0],w||!t.isPick(T[1])?r:T[1],w||!t.isPick(T[2])?i:T[2],l,this.group,s)}},t.extend(t.BlurEffect,Ne.BlurFilter,"clone","createjsBlurFilter",!1),t.GlowEffect=function(e,r,i,l,a,s,c,d,C,T,h,w){var A="color, alpha, blurX, blurY, strength, quality, inner, knockout, hideObject, style, group, inherit",y;if(y=lt(t.GlowEffect,arguments,A,this))return y;Le("69.9725"),this.group=h;var v=T===!1?{}:t.getStyle("GlowEffect",h,w);n(e)&&(e=v.color!=null?v.color:t.white),n(r)&&(r=v.alpha!=null?v.alpha:1),n(i)&&(i=v.blurX!=null?v.blurX:30),n(l)&&(l=v.blurY!=null?v.blurY:30),n(a)&&(a=v.strength!=null?v.strength:1),n(s)&&(s=v.quality!=null?v.quality:1),n(c)&&(c=v.inner!=null?v.inner:!1),n(d)&&(d=v.knockout!=null?v.knockout:!1),n(C)&&(C=v.hideObject!=null?v.hideObject:!1);var P=x(e,r,i,l,a,s,c,d,C);this.veeObj={color:P[0],alpha:P[1],blurX:P[2],blurY:P[3],strength:P[4],quality:P[5],inner:P[6],knockout:P[7],hideObject:P[8]};function x(){return arguments}i=et(i),l=et(l),s=et(s),e=et(e),this.alpha=et(r),this.strength=et(a),this.inner=et(c),this.knockout=et(d),this.hideObject=et(C),this.createjsBlurFilter_constructor(i,l,s),this.type="GlowEffect",this.usesContext=!0,this.applyFilter=function(E,k,p,m,S,_,Y,B){if((this.alpha<=0||this.strength<=0)&&!this.knockout)return!0;_=_||E,Y===void 0&&(Y=k),B===void 0&&(B=p);var b=_.getImageData(Y,B,m,S),X=b.data,V=document.createElement("canvas");V.width=m,V.height=S;for(var O=V.getContext("2d",{willReadFrequently:!0}),Z=O.getImageData(0,0,m,S),W=Z.data,K=this.inner,ne=this._red,F=this._green,D=this._blue,u=0,f=W.length;u<f;u+=4){var o=u+3,g=X[o];K?g!==255&&(W[u]=ne,W[u+1]=F,W[u+2]=D,W[o]=255-g):g!==0&&(W[u]=ne,W[u+1]=F,W[u+2]=D,W[o]=g)}O.putImageData(Z,0,0);var q=this.strength;if(0<q){this.createjsBlurFilter_applyFilter(O,0,0,m,S),255<q&&(q=255);for(var I=1;I<q;I++)O.drawImage(V,0,0)}var R=this.alpha;R<0?R=0:1<R&&(R=1);var le;return this.knockout?K?le="source-in":le="source-out":this.hideObject?K?le="source-in":le="copy":K?le="source-atop":le="destination-over",_.save(),_.setTransform(1,0,0,1,0,0),_.globalAlpha=R,_.globalCompositeOperation=le,_.drawImage(V,Y,B),_.restore(),!0},Object.defineProperty(this,"color",{get:function(){return this._red<<16|this._green<<8|this._blue},set:function(E){E=t.convertColor(E,"hexNumber"),this._red=E>>16&255,this._green=E>>8&255,this._blue=E&255}}),this.color=e,this.clone=function(E){return new t.GlowFilter(E||!t.isPick(P[0])?e:P[0],E||!t.isPick(P[1])?r:P[1],E||!t.isPick(P[2])?i:P[2],E||!t.isPick(P[3])?l:P[3],E||!t.isPick(P[4])?s:P[4],E||!t.isPick(P[5])?a:P[5],E||!t.isPick(P[6])?c:P[6],E||!t.isPick(P[7])?d:P[7],E||!t.isPick(P[8])?d:P[8],T,this.group,w)}},t.extend(t.GlowEffect,Ne.BlurFilter,["clone","applyFilter"],"createjsBlurFilter",!1),t.ShadowEffect=function(e,r,i,l,a,s,c,d,C,T,h,w,A,y){var v="distance, angle, color, alpha, blurX, blurY, strength, quality, inner, knockout, hideObject, style, group, inherit",P;if(P=lt(t.ShadowEffect,arguments,v,this))return P;Le("69.973"),this.group=A;var x=w===!1?{}:t.getStyle("ShadowEffect",A,y);n(e)&&(e=x.distance!=null?x.distance:10),n(r)&&(r=x.angle!=null?x.angle:45),n(i)&&(i=x.color!=null?x.color:t.black),n(l)&&(l=x.alpha!=null?x.alpha:.4),n(a)&&(a=x.blurX!=null?x.blurX:15),n(s)&&(s=x.blurY!=null?x.blurY:15),n(c)&&(c=x.strength!=null?x.strength:1),n(d)&&(d=x.quality!=null?x.quality:1),n(C)&&(C=x.inner!=null?x.inner:!1),n(T)&&(T=x.knockout!=null?x.knockout:!1),n(h)&&(h=x.hideObject!=null?x.hideObject:!1);var E=k(e,r,i,l,a,s,c,d,C,T,h);this.veeObj={distance:E[0],angle:E[1],color:E[2],alpha:E[3],blurX:E[4],blurY:E[5],strength:E[6],quality:E[7],inner:E[8],knockout:E[9],hideObject:E[10]};function k(){return arguments}a=et(a),s=et(s),d=et(d),i=et(i),e=et(e),r=et(r);var p=this;this.alpha=et(l),this.strength=et(c),this.inner=et(C),this.knockout=et(T),this.hideObject=et(h),this.createjsBlurFilter_constructor(a,s,d),this.type="ShadowEffect",this.usesContext=!0,Object.defineProperty(this,"angle",{get:function(){return r},set:function(S){r=S=(S%360+360)%360,m(e,S)}}),this.angle=r,Object.defineProperty(this,"distance",{get:function(){return e},set:function(S){e=S,m(S,r)}}),this.distance=e;function m(S,_){var Y=_*t.RAD;p._offsetX=Math.cos(Y)*S,p._offsetY=Math.sin(Y)*S}Object.defineProperty(this,"color",{get:function(){return this._red<<16|this._green<<8|this._blue},set:function(S){S=t.convertColor(S,"hexNumber"),this._red=S>>16&255,this._green=S>>8&255,this._blue=S&255}}),this.color=i,this.applyFilter=function(S,_,Y,B,b,X,V,O){if((this.alpha<=0||this.strength<=0)&&!this.knockout&&!this.hideObject)return!0;X=X||S,V===void 0&&(V=_),O===void 0&&(O=Y);var Z=X.getImageData(V,O,B,b),W=Z.data,K=document.createElement("canvas");K.width=B,K.height=b;for(var ne=K.getContext("2d",{willReadFrequently:!0}),F=ne.getImageData(0,0,B,b),D=F.data,u=this.inner,f=this._red,o=this._green,g=this._blue,q=0,I=D.length;q<I;q+=4){var R=q+3,le=W[R];u?le!==255&&(D[q]=f,D[q+1]=o,D[q+2]=g,D[R]=255-le):le!==0&&(D[q]=f,D[q+1]=o,D[q+2]=g,D[R]=le)}ne.putImageData(F,0,0);var N=this.strength;if(0<N){this.createjsBlurFilter_applyFilter(ne,0,0,B,b),255<N&&(N=255);for(var L=1;L<N;L++)ne.drawImage(K,0,0)}var ee=this.alpha;ee<0?ee=0:1<ee&&(ee=1);var z;return this.knockout?u?z="source-in":z="source-out":this.hideObject?u?z="source-in":z="copy":u?z="source-atop":z="destination-over",X.save(),X.setTransform(1,0,0,1,0,0),X.globalAlpha=ee,X.globalCompositeOperation=z,X.drawImage(K,V+this._offsetX,O+this._offsetY),X.restore(),!0},this.getBounds=function(S){var _=this.createjsBlurFilter_getBounds(S),Y=this._offsetX,B=this._offsetY;return Y!==0&&(Y<0?(_.x+=Y,_.width+=-Y):_.width+=Y),B!==0&&(B<0?(_.y+=B,_.height+=-B):_.height+=B),_},this.clone=function(S){return new t.ShadowFilter(S||!t.isPick(E[0])?e:E[0],S||!t.isPick(E[1])?r:E[1],S||!t.isPick(E[2])?i:E[2],S||!t.isPick(E[3])?l:E[3],S||!t.isPick(E[4])?a:E[4],S||!t.isPick(E[5])?s:E[5],S||!t.isPick(E[6])?d:E[6],S||!t.isPick(E[7])?c:E[7],S||!t.isPick(E[8])?C:E[8],S||!t.isPick(E[9])?T:E[9],S||!t.isPick(E[10])?h:E[10],w,this.group,y)}},t.extend(t.ShadowEffect,Ne.BlurFilter,["clone","getBounds","applyFilter"],"createjsBlurFilter",!1),t.ColorEffect=function(e,r,i,l,a,s,c,d,C,T,h){var w="redMultiplier, greenMultiplier, blueMultiplier, alphaMultiplier, redOffset, greenOffset, blueOffset, alphaOffset, style, group, inherit",A;if(A=lt(t.ColorEffect,arguments,w,this))return A;Le("69.9735"),this.group=T;var y=C===!1?{}:t.getStyle("ColorEffect",T,h);n(e)&&(e=y.redMultiplier!=null?y.redMultiplier:1),n(r)&&(r=y.greenMultiplier!=null?y.greenMultiplier:1),n(i)&&(i=y.blueMultiplier!=null?y.blueMultiplier:1),n(l)&&(l=y.alphaMultiplier!=null?y.alphaMultiplier:1),n(a)&&(a=y.redOffset!=null?y.redOffset:0),n(s)&&(s=y.greenOffset!=null?y.greenOffset:0),n(c)&&(c=y.blueOffset!=null?y.blueOffset:0),n(d)&&(d=y.alphaOffset!=null?y.alphaOffset:0);var v=P(e,r,i,l,a,s,c,d);this.veeObj={redMultiplier:v[0],greenMultiplier:v[1],blueMultiplier:v[2],alphaMultiplier:v[3],redOffset:v[4],greenOffset:v[5],blueOffset:v[6],alphaOffset:v[7]};function P(){return arguments}e=et(e),r=et(r),i=et(i),l=et(l),a=et(a),s=et(s),c=et(c),d=et(d),this.createjsColorFilter_constructor(e,r,i,l,a,s,c,d),this.type="ColorEffect",this.clone=function(x){return new t.ColorEffect(e,r,i,l,a,s,c,d,x||!t.isPick(v[0])?e:v[0],x||!t.isPick(v[1])?r:v[1],x||!t.isPick(v[2])?i:v[2],x||!t.isPick(v[2])?l:v[3],x||!t.isPick(v[2])?a:v[4],x||!t.isPick(v[2])?s:v[5],x||!t.isPick(v[2])?c:v[6],x||!t.isPick(v[2])?d:v[7],C,this.group,h)}},t.extend(t.ColorEffect,Ne.ColorFilter,"clone","createjsColorFilter",!1),t.MultiEffect=function(e,r,i,l,a,s,c){var d="hue, saturation, brightness, contrast, style, group, inherit",C;if(C=lt(t.MultiEffect,arguments,d,this))return C;Le("69.974"),this.group=s;var T=a===!1?{}:t.getStyle("MultiEffect",s,c);n(e)&&(e=T.hue!=null?T.hue:0),n(r)&&(r=T.saturation!=null?T.saturation:0),n(i)&&(i=T.brightness!=null?T.brightness:0),n(l)&&(l=T.contrast!=null?T.contrast:0);var h=w(e,r,i,l);this.veeObj={hue:h[0],saturation:h[1],brightness:h[2],contrast:h[3]};function w(){return arguments}e=et(e),this.createjsColorMatrixFilter_constructor(new Ne.ColorMatrix().adjustColor(i,l,r,e)),this.type="MultiEffect",this.adjustColor=function(A,y,v,P){n(e)||(e=et(A)),n(r)||(r=et(y)),n(i)||(i=et(v)),n(l)||(l=et(P)),this.matrix.reset().adjustColor(A,y,v,P)},Object.defineProperty(this,"brightness",{get:function(){return i},set:function(A){i=et(A),this.matrix.reset().adjustColor(i,l,r,e)}}),Object.defineProperty(this,"contrast",{get:function(){return l},set:function(A){l=et(A),this.matrix.reset().adjustColor(i,l,r,e)}}),Object.defineProperty(this,"saturation",{get:function(){return r},set:function(A){r=et(A),this.matrix.reset().adjustColor(i,l,r,e)}}),Object.defineProperty(this,"hue",{get:function(){return e},set:function(A){e=et(A),this.matrix=new Ne.ColorMatrix().adjustColor(i,l,r,e),this.applyFilter()}}),this.clone=function(A){return new t.MultiEffect(A||!t.isPick(h[0])?e:h[0],A||!t.isPick(h[0])?r:h[0],A||!t.isPick(h[0])?i:h[0],A||!t.isPick(h[0])?l:h[0],a,this.group,c)}},t.extend(t.MultiEffect,Ne.ColorMatrixFilter,"clone","createjsColorMatrixFilter",!1),t.AlphaEffect=function(e,r,i,l){var a="mask, style, group, inherit",s;if(s=lt(t.AlphaEffect,arguments,a,this))return s;Le("69.9745"),this.group=i;var c=r===!1?{}:t.getStyle("AlphaEffect",i,l);n(e)&&(e=c.mask!=null?c.mask:null);var d=C(e);this.veeObj={mask:d[0]};function C(){return arguments}e=et(e),e.type=="Bitmap"?e=e.image:e.cache&&(e=e.cache().cacheCanvas),this.createjsAlphaMaskFilter_constructor(e),this.type="AlphaEffect",this.clone=function(T){return new t.AlphaEffect(T||!t.isPick(d[0])?e:d[0],r,this.group,l)}},t.extend(t.AlphaEffect,Ne.AlphaMaskFilter,"clone","createjsAlphaMaskFilter",!1),t.Pixel=function(e,r,i,l,a,s,c,d,C,T,h,w,A){var y="obj, amount, amountY, blur, dynamic, blendmode, boundary, expand, amountFactor, blurFactor, style, group, inherit",v;if(v=lt(t.Pixel,arguments,y,this))return v;Le("69.9747"),this.group=w;var P=h===!1?{}:t.getStyle("Pixel",w,A);n(e)&&(e=P.obj!=null?P.obj:null),n(r)&&(r=P.amount!=null?P.amount:.5),n(i)&&(i=P.amountY!=null?P.amountY:null);var x=!1;i==null&&(x=!0,i=r),n(l)&&(l=P.blur!=null?P.blur:0),n(a)&&(a=P.dynamic!=null?P.dynamic:!1),n(s)&&(s=P.blendmode!=null?P.blendmode:null),n(c)&&(c=P.boundary!=null?P.boundary:new t.Boundary(e.getBounds())),n(d)&&(d=P.expand!=null?P.expand:0),n(C)&&(C=P.amountFactor!=null?P.amountFactor:.6),n(T)&&(T=P.blurFactor!=null?P.blurFactor:.6);var E=k(e,r,i,l,s,C,T);this.veeObj={obj:E[0],amount:E[1],amountY:E[2],blur:E[3],blendmode:E[4],amountFactor:E[5],blurFactor:E[6]};function k(){return arguments}e=et(e),r=et(r),i=et(i),l=et(l),s=et(s),C=et(C),T=et(T),d&&(Array.isArray(d)?d.length==1?c.contract(-d):d.length==2?c.contract(-d[0],-d[1]):c.contract(-d[0],-d[1],-d[2],-d[3]):c.contract(-d));var p=t.constrain(C*10,0,10),m=t.constrain(T*10,0,10),S=this,_=Math.pow(Math.E,-r*p),Y=Math.pow(Math.E,-i*p),B=Math.pow(Math.E,-l*m);n(e)&&(e=new t.Tile(new t.Circle(20,[t.green,t.blue,t.yellow,t.pink,t.purple]),5,5,5,5));var b=document.createElement("canvas"),X=b.getContext("2d"),V=document.createElement("canvas"),O=V.getContext("2d"),Z=B;this.update=function(){!e.cacheCanvas||B!=Z?(e.cache(c.x,c.y,c.width,c.height,B),Z=B):e.updateCache(s);var W=e.width,K=e.height,ne=e.width*_,F=e.height*Y;b.width=W,b.height=K,V.width=W,V.height=K,O.msImageSmoothingEnabled=!1,O.mozImageSmoothingEnabled=!1,O.webkitImageSmoothingEnabled=!1,O.imageSmoothingEnabled=!1,X.drawImage(e.cacheCanvas,0,0,ne,F),O.drawImage(b,0,0,ne,F,-d*e.scale,-d*e.scale,V.width+d*2*e.scaleX,V.height+d*2*e.scaleY)},this.update(),this.zimBitmap_constructor(V),a&&(this.dynamicTicker=t.Ticker.add(function(){S.update()})),Object.defineProperty(this,"amount",{get:function(){return r},set:function(W){r=W,_=Math.pow(Math.E,-r*p),x&&(Y=Math.pow(Math.E,-r*p),i=r),S.update()}}),Object.defineProperty(this,"amountX",{get:function(){return r},set:function(W){r=W,x=!1,_=Math.pow(Math.E,-r*p),S.update()}}),Object.defineProperty(this,"amountY",{get:function(){return i},set:function(W){i=W,x=!1,Y=Math.pow(Math.E,-i*p),S.update()}}),Object.defineProperty(this,"amountFactor",{get:function(){return C},set:function(W){C=W,p=t.constrain(C*10,0,10),_=Math.pow(Math.E,-r*p),Y=Math.pow(Math.E,-i*p),S.update()}}),Object.defineProperty(this,"blur",{get:function(){return l},set:function(W){l=W,B=Math.pow(Math.E,-l*m),S.update()}}),Object.defineProperty(this,"blurFactor",{get:function(){return T},set:function(W){T=W,m=t.constrain(T*10,0,10),B=Math.pow(Math.E,-l*m),S.update()}}),Object.defineProperty(this,"dynamic",{get:function(){return a},set:function(W){a!=W&&(a=W,a?S.dynamicTicker?S.dynamicTicker=t.Ticker.add(S.dynamicTicker):S.dynamicTicker=t.Ticker.add(S.update):S.dynamicTicker&&t.Ticker.remove(S.dynamicTicker))}}),this.dispose=function(){S.dynamicTicker&&t.Ticker.remove(S.dynamicTicker),this.zimBitmap_dispose()},h!==!1&&t.styleTransforms(this,P),this.clone=function(W){return S.cloneProps(new t.Pixel(W||!t.isPick(E[0])?e:E[0],W||!t.isPick(E[1])?r:E[1],W||!t.isPick(E[2])?i:E[2],W||!t.isPick(E[3])?l:E[3],a,W||!t.isPick(E[4])?s:E[4],c,d,W||!t.isPick(E[5])?C:E[5],W||!t.isPick(E[6])?T:E[6],h,this.group,A))}},t.extend(t.Pixel,t.Bitmap,["clone","dispose"],"zimBitmap",!1),t.Parallax=function(e,r,i,l,a,s,c){var d="layers, damp, auto, stage, startPaused, mouseMoveOutside, clamp",C;if(C=lt(t.Parallax,arguments,d,this))return C;if(Le("68"),this.type="Parallax",n(l))if(e&&e[0]&&e[0].obj&&e[0].obj.stage)l=e[0].obj.stage;else if(j.zdf)l=j.zdf.stage;else return;n(i)?i=!0:i=!1,n(a)&&(a=!1),n(s)&&(s=!1);var T=l.getBounds().width,h=l.getBounds().height;l.mouseMoveOutside=s;var w=this;w.stageEvent=l.on("stagemousemove",function(E){w.mouseX=E.rawX/t.scaX,w.mouseY=E.rawY/t.scaY});var A=n(r)?.1:r;this.addLayer=function(E){if(!(n(E.obj)||n(E.prop)||n(E.propChange))){var k={obj:E.obj,prop:E.prop};k[k.prop]=E.propChange,n(E.input)&&(E.input="mouseX"),k.input=E.input,k.split=n(E.split)?!!(E.input=="mouseX"&&i):E.split;var p=n(E.inMin)?0:E.inMin,m=n(E.inMax)?E.input=="mouseX"||E.input=="scrollX"?T:h:E.inMax,S=n(E.factor)?1:E.factor,_=n(E.integer)?!1:E.integer;return k["p_"+k.prop]=new t.ProportionDamp(p,m,0,k[k.prop],A,S,_,c),k.prop=="scale"?k["s_"+k.prop]=k.obj.scaleX:k.prop=="frame"?k["s_"+k.prop]=k.obj.currentFrame:k["s_"+k.prop]=k.obj[k.prop],n(E.immediate)||k["p_"+k.prop].immediate(E.immediate),y.push(k),w}},this.removeLayer=function(E){if(!n(E)){var k=y[E];return k["p_"+k.prop].dispose(),y.splice(E,1),w}},this.immediate=function(E){for(var k,p=0;p<y.length;p++)k=y[p],k["p_"+k.prop].immediate(E[p]);return w},this.dispose=function(){return l.off("stagemousemove",w.stageEvent),y=null,i&&t.Ticker.remove(P),!0},e=n(e)?[]:e;for(var y=[],v=0;v<e.length;v++)this.addLayer(e[v]);if(i){var P=t.Ticker.add(x,l);a&&t.Ticker.remove(P)}function x(){w.step()}this.step=function(E){for(var k,p,m=0;m<y.length;m++)k=y[m],n(E)?k.input=="mouseX"?p=w.mouseX:k.input=="mouseY"?p=w.mouseY:k.input=="scrollX"?p=t.scrollX():k.input=="scrollY"&&(p=t.scrollY()):p=E,k.prop=="scale"?k.obj.scaleX=k.obj.scaleY=k["s_"+k.prop]+k["p_"+k.prop].convert(p):k.prop=="frame"?k.obj.gotoAndStop(k["s_"+k.prop]+k["p_"+k.prop].convert(p)):(k.obj[k.prop]=k["s_"+k.prop]+k["p_"+k.prop].convert(p),k.split&&(k.obj[k.prop]-=k[k.prop]/2));return w},w.paused=a,w.pause=function(E){return n(E)&&(E=!0),w.paused!=E&&(w.paused=E,P&&(E?t.Ticker.remove(P):P=t.Ticker.add(P))),w},Object.defineProperty(w,"damp",{get:function(){return A},set:function(E){A=E;for(var k,p=0;p<y.length;p++)k=y[p],k["p_"+k.prop].damp=A}})},t.Flipper=function(e,r,i,l,a,s,c,d,C,T,h,w,A,y){var v="front, back, interactive, time, vertical, flipped, easeRoot, frontPress, backPress, reverse, continuous, style, group, inherit",P;if(P=lt(t.Flipper,arguments,v,this))return P;Le("68.5"),this.group=A;var x=w===!1?{}:t.getStyle("Flipper",this.group,y);if(n(e)&&(e=x.front!=null?x.front:j.zdf.makeIcon().sca(2)),n(r)&&(r=x.back!=null?x.back:new t.Page(e.width,e.height,t.dark)),this.front=e,this.back=r,s){var E=e;e=r,r=E}var k=Math.max(e.width,r.width),p=Math.max(e.height,r.height);this.zimContainer_constructor(k,p),this.type="Flipper",n(l)&&(l=x.time!=null?x.time:.2),n(a)&&(a=x.vertical!=null?x.vertical:!1),n(i)&&(i=x.interactive!=null?x.interactive:!1),n(s)&&(s=x.flipped!=null?x.flipped:!1),n(c)&&(c=x.easeRoot!=null?x.easeRoot:"quad"),n(d)&&(d=x.frontPress!=null?x.frontPress:!0),n(C)&&(C=x.backPress!=null?x.backPress:!0),n(T)&&(T=x.reverse!=null?x.reverse:!1),n(h)&&(h=x.continuous!=null?x.continuous:!1);var m=s;this.flipped=s;var S=this;e.centerReg(this);var _;(d&&!s||C&&s)&&(_=i&&e.backing?e.backing:e,_.on("mousedown",function(){Y(e,r)}),_.cur()),(C&&!s||d&&s)&&(_=i&&r.backing?r.backing:r,_.on("mousedown",function(){Y(r,e,-1)}),_.cur()),e.oScale=e.scale,r.oScale=r.scale,e.flipper=S,e.other=r,r.flipper=S,r.other=e,i||(e.mouseChildren=r.mouseChildren=!1),this.flip=function(B,b){B!=S.flipped&&(S.flipped?Y(m?e:r,m?r:e,-1,b):Y(m?r:e,m?e:r,1,b))};function Y(B,b,X,V){if(n(X)&&(X=1),X*=T?-1:1,h&&(X=T?m?1:-1:m?-1:1),n(V)&&(V=l),S.flipped=!S.flipped,S.dispatchEvent("flip"),V==0){S.removeAllChildren(),b.scale=b.oScale,b.skewX=b.skewY=0,b.centerReg(S),S.dispatchEvent("flipped");return}var O,Z;a?(O={skewX:-90*X,scaleY:B.oScale/2},Z={skewX:0,scaleY:b.oScale},b.ske(90*X,0).sca(b.oScale,b.oScale/2)):(O={skewY:-90*X,scaleX:B.oScale/2},Z={skewY:0,scaleX:b.oScale},b.ske(0,90*X).sca(b.oScale/2,b.oScale)),B.animate({props:O,time:l,ease:c+"In",call:function(){B.removeFrom(),b.centerReg(S).animate({props:Z,time:l,ease:c+"Out",call:function(){S.dispatchEvent("flipped")}})}})}w!==!1&&t.styleTransforms(this,x),this.clone=function(){return S.cloneProps(new t.Flipper(e.clone(),r.clone(),i,l,a,s,c,d,C,T,h,w,this.group,y))}},t.extend(t.Flipper,t.Container,"clone","zimContainer"),t.Book=function(e,r,i,l,a,s,c,d){var C="width, height, pages, startPage, rollUp, radius, backgroundColor, arrows",T;if(T=lt(t.Book,arguments,C,this))return T;Le("68.7"),n(e)&&(e=j.zdf?j.zdf.stage.width:1024),n(r)&&(r=j.zdf?j.zdf.stage.height:768),this.zimContainer_constructor(e,r),this.type="Book",n(i)&&(i=[]),n(l)&&(l=0),n(a)&&(a=!0),n(c)&&(c=t.darker),n(d)&&(d=!0);var h=Tt(),w=this;if(i.length==0)return;w.backing=new t.Rectangle(e-2,r-2,c),t.loop(i,function(S,_){typeof S=="string"&&(i[_]=t.asset(S)),i[_].zimBookIndex=_,x(S)}),w.added(P);var A,y,v;function P(S){A=S,y=A.frame;var _=new t.Shape,Y,B,b,X,V,O,Z;w._currentPage=l;function W(g){if(w._currentPage=g,w.removeAllChildren(),w.backing.loc(1,1,w),w.setMask(w.backing),_.addTo(w),_.c().f(t.black).dr(0,0,0,0),w.moving=!1,i[g-1]?Y=i[g-1].reg(0,0).rot(0).loc(0,0,w):g>0&&Z.reg(0,0).rot(0).loc(0,0,w).setMask(null),i[g-2]?B=i[g-2].reg(e/2,r).loc(0,r,w).rot(-90):B=new t.Rectangle(e/2,r,c).reg(e/2,r).loc(0,r,w).rot(-90),i[g-3]?b=i[g-3].rot(0).loc(0,0,w).setMask(_):b=new t.Rectangle(e/2,r,c).loc(0,0,w).setMask(_),i[g])X=i[g].rot(0).reg(0,0).pos(0,0,t.RIGHT,t.TOP,w);else{A.update();return}i[g+1]?V=i[g+1].reg(0,r).loc(e,r,w).rot(90):(V=new t.Rectangle(e/2,r,c).reg(0,r).loc(e,r,w).rot(90),Z=V),i[g+2]?O=i[g+2].rot(0).pos(0,0,t.RIGHT,t.TOP,w).setMask(_):O=new t.Rectangle(e/2,r,c).pos(0,0,t.RIGHT,t.TOP,w).setMask(_),A.update()}W(l),Object.defineProperty(w,"directPage",{get:function(){return w._currentPage},set:function(g){m(),l%2==1?g=Math.ceil(g/2)*2-1:g=Math.ceil(g/2)*2,g!=w.page&&(g>w.page?(V.reg(0,0),O.setMask(null)):(B.reg(0,0),b.setMask(null)),W(g),w.moving=!1,K=!1,w.currentW=0,w.currentH=0,p())}});var K=!1;w.currentW=0,w.currentH=0,w.moving=!1;function ne(){w.stageEvent=A.on("stagemousedown",function(){var g,q;if(!w.moving){var I=w.globalToLocal(y.mouseX,y.mouseY);if(!(I.x<0||I.x>e||I.y<0||I.y>r)&&!(s>0&&t.dist(I,new t.Point(0,r))>s&&t.dist(I,new t.Point(e,r))>s)){var R=I.x>e/2?"right":"left";R=="right"&&w._currentPage>=i.length-1||R=="left"&&w._currentPage<=1||(w.moving=!0,R=="right"?(X.addTo(w),V.addTo(w),O.addTo(w),w.pageNext=O.zimBookIndex):(Y.addTo(w),B.addTo(w),b.addTo(w),w.rolledUp&&u(0,0,"right"),w.pageNext=B.zimBookIndex),m(),w.direction=R,w.dispatchEvent("rollpress"),w.moveEvent=A.on("stagemousemove",function(){F&&(F.clear(),F=null);var le=w.globalToLocal(y.mouseX,y.mouseY);R=="right"?g=e-le.x:g=le.x,q=r-le.y+g,w.currentW=g=t.constrain(g,0,e/2),w.currentH=q=t.constrain(q,0,r),u(g,q,R)}),w.upEvent=A.on("stagemouseup",function(){A.off("stagemousemove",w.moveEvent),!K&&D(g,q,R)},null,!0))}}})}if(ne(),w.rollUp=function(g,q,I,R,le){if(!w.moving&&!(I=="right"&&w._currentPage>=i.length-1)&&!(I=="left"&&w._currentPage<=1)){I=="right"?(X.addTo(w),V.addTo(w),O.addTo(w)):(w.rolledUp&&u(0,0,"right"),Y.addTo(w),B.addTo(w),b.addTo(w)),w.moving=!0,n(R)&&(R=h=="s"?.5:.5/1e3),n(le)&&(le=null),w.animate({props:{currentW:g,currentH:q},time:R,ease:le,call:function(){t.Ticker.remove(N),w.moving=!1,u(g,q,I)}});var N=t.Ticker.add(function(){u(w.currentW,w.currentH,I)})}},a!==!1){w.rolledUp=!0,a===!0&&(a=h=="s"?1:1/1e3);var F=t.timeout(a,function(){w.rollUp(60,130,"right",.5),w.dispatchEvent("rollup")})}w.rollDown=function(g,q,I,R){w.moving||I=="right"&&w._currentPage>=i.length-1||I=="left"&&w._currentPage<=1||D(g,q,I,R)};function D(g,q,I,R){w.moving=!0,w.rolledUp=!1,n(R)&&(R=h=="s"?.7:.7/1e3),w.animate({props:{currentW:0,currentH:0},time:R,call:function(){t.Ticker.remove(le),u(0,0,I),w.moving=!1,p(),w.dispatchEvent("rolldown")}});var le=t.Ticker.add(function(){u(w.currentW,w.currentH,I)})}function u(g,q,I){var R;I=="right"?(_.c().mt(e,r).lt(e-g,r).lt(e,r-q).cp(),R=Math.atan2(g,q),V.loc(e-(g+g*Math.cos(2*R)),r-g*Math.sin(2*R)).rot(R*2*t.DEG),!K&&g>=e/2&&q>=r&&f()):(_.c().mt(0,r).lt(g,r).lt(0,r-q).cp(),R=Math.atan2(g,q),B.loc(g+g*Math.cos(2*R),r-g*Math.sin(2*R)).rot(-R*2*t.DEG),!K&&g>=e/2&&q>=r&&o()),A.update()}function f(){m(),K=!0,w.moving=!0,w.moveEvent&&A.off("stagemousemove",w.moveEvent),w.upEvent&&A.off("stagemouseup",w.upEvent),w.currentW=0,w.currentH=0,w.lastPage=t.constrain(w._currentPage),w.direction="right",w.pageNext=O.zimBookIndex,w.dispatchEvent("pageanimate"),w.animate({ease:"quadOut",props:{currentW:e/2},time:.3,timeUnit:"s",call:function(){t.Ticker.remove(g),V.reg(0,0),O.setMask(null),W(w._currentPage+2),w.moving=!1,K=!1,w.currentW=0,w.currentH=0,p(),w.dispatchEvent("page")}});var g=t.Ticker.add(function(){_.c().mt(e,r).lt(e/2,r).lt(e-w.currentW,0).lt(e,0).cp()});V.reg(e/2,r).loc(e/2,r,w).animate({props:{rotation:0},time:.3,ease:"quadOut",timeUnit:"s"})}function o(){m(),K=!0,w.moving=!0,w.moveEvent&&A.off("stagemousemove",w.moveEvent),w.upEvent&&A.off("stagemouseup",w.upEvent),w.currentW=0,w.currentH=0,w.lastPage=t.constrain(w._currentPage),w.direction="left",w.pageNext=B.zimBookIndex,w.dispatchEvent("pageanimate"),w.animate({ease:"quadOut",props:{currentW:e/2},time:.3,timeUnit:"s",call:function(){t.Ticker.remove(g),B.reg(0,0),b.setMask(null),W(w._currentPage-2),w.moving=!1,K=!1,w.currentW=0,w.currentH=0,p(),w.dispatchEvent("page")}});var g=t.Ticker.add(function(){_.c().mt(0,r).lt(e/2,r).lt(w.currentW,0).lt(0,0).cp()});B.reg(0,r).loc(e/2,r,w).animate({props:{rotation:0},time:.3,timeUnit:"s",ease:"quadOut"})}d&&(d===!0&&(d=.2),w.keydown=y.on("keydown",function(g){g.keyCode==39?w.nextPage(d):g.keyCode==37&&w.prevPage(d)})),w.changeFrame=function(g){return w.stageEvent&&A.off("stagemousedown",w.stageEvent),w.moveEvent&&A.off("stagemousemove",w.moveEvent),w.upEvent&&A.off("stagemouseup",w.upEvent),y=g,A=g.stage,ne(),w},p()}w.nextPage=function(S){if(n(w.rollUp))return setTimeout(function(){w.nextPage(S)},10),w;w.moving||w.rollUp(e/2+.1,r+.1,"right",S,"quadIn")},w.prevPage=function(S){if(n(w.rollUp))return setTimeout(function(){w.prevPage(S)},10),w;w.moving||w.rollUp(e/2+.1,r+.1,"left",S,"quadIn")},w.gotoPage=function(S,_){if(n(w.rollUp))return setTimeout(function(){w.gotoPage(S,_)},10),w;S=t.constrain(S,0,w.pages.length-1),n(_)&&(_=h=="s"?.3:300);var Y=_+(h=="s"?.35:350);w.pageInterval=t.interval(Y,function(B){var b=!1;w._currentPage<S?w.nextPage(_):w._currentPage>S?w.prevPage(_):b=!0,w.dispatchEvent("pageturn"),B.count==B.total-1&&(b?(p(),w.dispatchEvent("pagedone")):t.timeout(Y,function(){p(),w.dispatchEvent("pagedone")}))},Math.floor(Math.abs(S-w._currentPage)/2+1),!0)};function x(S){S.addChild&&(S.zimHTMLList=new t.Dictionary,k(S),S.parent&&S.parent.removeChild(data.page))}function E(S){if(!(n(S)||!S.addChild))for(S.removedHTML=!1,v=0;v<S.zimHTMLList.length;v++)S.addChildAt(S.zimHTMLList.values[v].obj,S.zimHTMLList.values[v].depth)}function k(S){if(!(S.removedHTML||!S.addChild)){S.removedHTML=!0,S.zimHTMLList.clear();var _,Y;for(Y=0;Y<S.numChildren;Y++)if(_=S.getChildAt(Y),_.type=="TextArea"||_.type=="Loader"||_.type=="Tag"){var B={obj:_,depth:S.getChildIndex(_)};S.zimHTMLList.add(_,B)}for(Y=S.numChildren-1;Y>=0;Y--)_=S.getChildAt(Y),(_.type=="TextArea"||_.type=="Loader"||_.type=="Tag")&&S.removeChild(_)}}function p(){w.pages[w.page]&&E(w.pages[w.page]),w.pages[w.page-1]&&E(w.pages[w.page-1])}function m(){w.pages[w.page]&&k(w.pages[w.page]),w.pages[w.page-1]&&k(w.pages[w.page-1])}Object.defineProperty(w,"page",{get:function(){return w._currentPage},set:function(S){w.gotoPage(S,h=="s"?.1:100)}}),Object.defineProperty(w,"pages",{get:function(){return i},set:function(){dt&&$e("Book() - pages is read only")}}),this.dispose=function(S,_,Y){return w.stageEvent&&A.off("stagemousedown",w.stageEvent),w.moveEvent&&A.off("stagemousemove",w.moveEvent),w.upEvent&&A.off("stagemouseup",w.upEvent),w.keydown&&y.off("keydown",w.keydown),w.removeFrom(),Y||this.zimContainer_dispose(!0),!0}},t.extend(t.Book,t.Container,["clone","dispose"],"zimContainer"),t.Scrambler=function(e,r,i,l,a,s,c,d,C,T,h,w,A,y){var v="tile, keys, keyProperty, scramble, time, wait, num, shadowColor, shadowBlur, swap, swapLock, style, group, inherit",P;if(P=lt(t.Scrambler,arguments,v,this))return P;Le("67.35"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Scrambler",this.group=A;var x=w===!1?{}:t.getStyle(this.type,this.group,y);n(e)&&(e=x.tile!=null?x.tile:e),n(r)&&(r=x.keys!=null?x.keys:null),n(i)&&(i=x.keyProperty!=null?x.keyProperty:null),n(l)&&(l=x.scramble!=null?x.scramble:!0),n(a)&&(a=x.time!=null?x.time:0),n(s)&&(s=x.wait!=null?x.wait:0),n(c)&&(c=x.num!=null?x.num:1),n(d)&&(d=x.shadowColor!=null?x.shadowColor:"rgba(0,0,0,.3)"),n(C)&&(C=x.shadowBlur!=null?x.shadowBlur:5),n(T)&&(T=x.swap!=null?x.swap:!1),n(h)&&(h=x.swapLock!=null?x.swapLock:!1),h&&(T=!0),n(e)&&(e=new t.Tile(new t.Rectangle(100,100,t.series(t.silver,t.tin,t.grey,t.dark,t.darker)),5,1,5)),e.addTo(this);var E=this;E.complete=!0;var k=Tt(a);Tt(s);var p=(e.width+e.spacingH)/e.cols,m=(e.height+e.spacingV)/e.rows,S=j.zdf,_=t.makeID(null,10),Y,B,b,X=!1;e.pointers={},e.on("mousedown",function(D){if(X)return;X=!0,O(D.target),E.myDownCheck=!0,b=D.target;var u="id"+Math.abs(D.pointerID+1);if(e.pointers[u]=!0,h){var f=e.current;if(E.testItem(D.target,f.indexOf(D.target))){D.target.noMouse(),D.target.noDrag(),D.target.locked=!0,E.myDownCheck=!1;return}}if(Y=D.target.x,B=D.target.y,d!=-1&&C>0){var o=new Ne.Shadow(d,3,3,C);D.target.backing?D.target.backing.shadow=o:D.target.shadow=o}S&&(E.scrmu||(E.scrmu=S.on("mouseupplusonly",function(I){if(E.myDownCheck){E.myDownCheck=!1;var R=t.loop(e.pointers,function(le,N){return N});R||(e.pointers.id0=!0),I={target:b,pointerID:I.pointerID?R:-1},g(I)}}))),E.upEvent&&e.off("pressup",E.upEvent),E.upEvent=e.on("pressup",function(I){var R="id"+Math.abs(I.pointerID+1);e.pointers[R]&&(E.myDownCheck=!1,g(I))});function g(I){var R="id"+Math.abs(I.pointerID+1);if(e.pointers[R]){delete e.pointers[R];var le=!0;if(Z(),X=!1,E.moveEvent&&e.off("pressmove",E.moveEvent),h){var N=I.target.boundsToGlobal(),L=e.hitTestGrid(e.width,e.height,e.cols,e.rows,N.x+N.width/2,N.y+N.height/2,null,null,e.spacingH,e.spacingV,null,"open");if(n(L))le=!1;else{var ee=f[L[0]];I.target==ee?le=!1:le=!E.testItem(ee,L[0])}}T&&le&&V(I),I.target.mouseEnabled=!1,I.target.animate({props:{x:Y,y:B},time:.1,id:_,timeUnit:"seconds",pauseOnBlur:!1,call:q,params:I})}}function q(I){!E.complete&&E.test()&&(E.complete=!0,E.dispatchEvent("complete")),d!=-1&&C>0&&(I.target.backing?I.target.backing.shadow=null:I.target.shadow=null),I.target.mouseEnabled=!0}T||(E.moveEvent&&e.off("pressmove",E.moveEvent),E.moveEvent=e.on("pressmove",function(I){V(I)}))});function V(D){var u=D.target;u.stopAnimate();var f=u.boundsToGlobal(),o=e.hitTestGrid(e.width,e.height,e.cols,e.rows,f.x+f.width/2,f.y+f.height/2,null,null,e.spacingH,e.spacingV,null,"open");n(o)||t.loop(e,function(g){if(!(g==u||g.paused===!1)){var q=g.boundsToGlobal(),I=e.hitTestGrid(e.width,e.height,e.cols,e.rows,q.x+q.width/2,q.y+q.height/2,null,null,e.spacingH,e.spacingV,null,"open");if(!n(I)){var R;o[2]==I[2]&&(g.x>=u.x&&g.x<=u.x+p/2||g.x<=u.x&&g.x>=u.x-p/2)&&(R=g.x,g.top().ord(-1),g.animate({props:{x:Y},time:.2,id:_,timeUnit:"seconds",call:function(){T&&!E.complete&&E.test()&&(E.complete=!0,E.dispatchEvent("complete"))}}),Y=R),o[1]==I[1]&&(g.y>=u.y&&g.y<=u.y+m/2||g.y<=u.y&&g.y>=u.y-m/2)&&(R=g.y,g.top().ord(-1),g.animate({props:{y:B},time:.201,override:!1,id:_,timeUnit:"seconds",call:function(){T&&!E.complete&&E.test()&&(E.complete=!0,E.dispatchEvent("complete"))}}),B=R)}}},!0)}function O(D){e.loop(function(u){u!=D&&u.noMouse()})}function Z(){e.loop(function(D){D.locked||D.mouse()})}this.test=function(){var D=e.current;return t.loop(D,function(u,f){if(n(u)||!E.testItem(u,f))return!1})},this.testItem=function(D,u){if(!n(D)){if(n(u)&&(u=e.current.indexOf(D)),r){var f=n(i)?D.key:D[i];if(f!=r[u])return!1}else if(e.items[u]!=D)return!1;return!0}},this.starts=[];var W=[];t.loop(e.rows*e.cols,function(D){W.push(D)});var K=W.slice();e.loop(function(D){D.mouseChildren=!1,E.starts.push({x:D.x,y:D.y})}),this.inactive=!1,this.scramble=function(D,u,f){n(u)&&(u=0),n(D)&&(D=0),(n(f)||D==0)&&(f=1),ne(),t.timeout(u,function(){D>0?t.interval(D/f,o,f,!0):o()}),setTimeout(function(){E.complete=!1,e.loop(function(g){g.mouse(),g.locked=!1}),E.mouse(),e.drag({boundary:e,singleTouch:!0}),X=!1},k=="s"?(u+D)*1e3:u+D);function o(){for(var g=!0,q=0;g&&q<50;)q++,t.shuffle(W),g=t.loop(W,function(I,R){var le=e.getChildAt(I);if(r){var N=n(i)?le.key:le[i];if(N!=r[R])return!1}else if(e.items[R]!=le)return!1});F(W,D/f),t.timeout(D,function(){E.dispatchEvent("scrambled")})}return E},l?E.scramble(a,s,c):E.added(function(){e.drag({boundary:e,singleTouch:!0})});function ne(){E.upEvent&&e.off("pressup",E.upEvent),E.moveEvent&&e.off("pressmove",E.moveEvent),e.noDrag(),s+a>0&&E.noMouse()}function F(D,u,f){t.stopAnimate(_),t.loop(e.items,function(o,g,q){var I=E.starts[D[g]];u?o.animate({props:{x:I.x,y:I.y},time:u,ease:f?"quadInOut":"quadOut",wait:f,timeUnit:"seconds",id:_}):(o.loc(I),E.stage?o.drag({boundary:e,singleTouch:!0}):g==q-1&&E.added(function(){e.drag({boundary:e,singleTouch:!0})}))})}this.solve=function(D,u,f){n(f)&&(f=!0),n(u)&&(u=0),n(D)&&(D=0),u+D==0&&f&&E.noMouse(),setTimeout(function(){W=K.slice(),ne(),F(W,D,0,f)},k=="s"?u*1e3:u),f||setTimeout(function(){E.mouse(),e.drag({boundary:e,singleTouch:!0})},k=="s"?(u+D)*1e3:u+D)},this._enabled=!0,Object.defineProperty(E,"enabled",{get:function(){return E._enabled},set:function(D){It(E,D),!t.OPTIMIZE&&(mt||!j.OPTIMIZE)&&E.stage&&E.stage.update()}}),Object.defineProperty(E,"order",{get:function(){var D=[],u=t.loop(e.current,function(f){if(!f)return!1;D.push(f.tileNum)});return!u||D.length!=W.length||(W=D),W},set:function(D){var u=[];t.loop(D,function(f){u.push(e.items[f])}),e.remake(u),e.stage&&e.stage.update()}}),this.dispose=function(D,u,f){return E.scrmu&&S.off("mouseupplus",E.scrmu),e.removeAllEventListeners(),f||(E.zimContainer_dispose(!0),E.stage&&E.stage.update()),!0},w!==!1&&t.styleTransforms(this,x),this.clone=function(){return E.cloneProps(new t.Scrambler(e.clone(),r,i,l,a,s,c,d,C,T,h,w,E.group,y))}},t.extend(t.Scrambler,t.Container,["clone","dispose"],"zimContainer",!1),t.Scroller=function(e,r,i,l,a,s,c,d,C,T){var h="backing, speed, direction, horizontal, gapFix, stage, container, style, group, inherit",w;if(w=lt(t.Scroller,arguments,h,this))return w;Le("69"),this.cjsEventDispatcher_constructor(),this.type="Scroller",this.group=C;var A=d===!1?{}:t.getStyle(this.type,this.group,T);if(n(e)&&(e=A.backing!=null?A.backing:null),n(e))return;var y=this.backing1=e;if(n(y)||!y.getBounds)return;var v=this.backing2=e.clone(!0);n(l)&&(l=A.horizontal!=null?A.horizontal:!0),n(a)&&(a=A.gapFix!=null?A.gapFix:0),n(c)&&(c=A.container!=null?A.container:null),n(s)&&(s=A.stage!=null?A.stage:null);var P=this;n(r)&&(r=A.speed!=null?A.speed:1),this.speed=r;var x=this.baseSpeed=this.speed;n(i)&&(i=A.direction!=null?A.direction:1),this.direction=i;var E=l?y.scaleX:y.scaleY;if(y.type=="AC"){$e("ZIM Scroller(): please provide Pic() with dimensions for backing objects");return}if(!y.getBounds()){$e("ZIM Scroller(): please setBounds() on backing objects");return}if(!s&&!y.stage){$e("ZIM Scroller(): please pass in stage parameter or add backing objects to stage to start");return}if(!y.parent){$e("ZIM Scroller(): please add object to container or stage before adding to Scroller");return}if(y.parent.addChildAt(v,y.parent.getChildIndex(y)),s=s||y.stage,n(c)&&(c=s),!c.getBounds()){$e("zim display - Scroller(): please setBounds() on container or stage if no container");return}var k=y.getBounds().width*E-a,p=y.getBounds().height*E-a,m,S;l?v.x=k:v.y=p;var _=!1,Y=t.Ticker.add(B,s);function B(){m||(m=c.getBounds().width,S=c.getBounds().height),!(P.speed==0||P.direction==0)&&(l?(y.x-=P.speed*P.direction,y.x<v.x?v.x=y.x+k:v.x=y.x-k,P.direction*P.speed>0?v.x<0&&y.x<v.x?y.x=v.x+k:y.x<0&&v.x<y.x&&(v.x=y.x+k):v.x>m&&v.x>y.x?v.x=y.x-k:y.x>m&&y.x>v.x&&(y.x=v.x-k)):(y.y-=P.speed*P.direction,y.y<v.y?v.y=y.y+p:v.y=y.y-p,P.direction*P.speed>0?v.y<0&&y.y<v.y?y.y=v.y+p:y.y<0&&v.y<y.y&&(v.y=y.y+p):v.y>S&&v.y>y.y?v.y=y.y-p:y.y>S&&y.y>v.y&&(y.y=v.y-p)))}this.paused=!1,this.pause=function(b,X){return n(b)&&(b=!0),n(X)&&(X=0),b?(x=P.speed,X>0?(_=!0,t.animate({target:P,obj:{pausingSpeed:0},ticker:!1,time:X,call:function(){P.speed=0,P.paused=!0,_=!1,P.dispatchEvent("pause")}})):(_=!1,P.speed=0,P.paused=!0,setTimeout(function(){P.dispatchEvent("pause")},10))):(_=!1,X>0?t.animate({target:P,obj:{pausingSpeed:x},ticker:!1,time:X,call:function(){P.speed=x,P.paused=!1,_=!1}}):(P.speed=x,P.paused=!1)),P},Object.defineProperty(P,"percentSpeed",{get:function(){return P.baseSpeed==0?NaN:P.speed/P.baseSpeed*100},set:function(b){_||P.paused||(P.speed=P.baseSpeed*b/100)}}),Object.defineProperty(P,"pausingSpeed",{get:function(){return P.baseSpeed==0?NaN:P.speed/P.baseSpeed*100},set:function(b){P.speed=P.baseSpeed*b/100}}),Object.defineProperty(P,"percentComplete",{get:function(){return l?y.x<0&&y.x>v.x?-y.x/y.width*100:(-v.x/v.width*100+1e9)%100:y.y<0&&y.y>v.y?-y.y/y.height*100:(-v.y/v.height*100+1e9)%100},set:function(b){b=(b+1e9)%100,l?(y.x=-b*y.width/100,v.x=y.x+k):(y.y=-b*y.height/100,v.y=y.y+p)}}),d!==!1&&t.styleTransforms(this,A),this.dispose=function(){return t.Ticker.remove(Y),!0}},t.extend(t.Scroller,Ne.EventDispatcher,null,"cjsEventDispatcher"),t.Dynamo=function(e,r,i,l,a,s,c,d,C,T,h,w){var A="sprite, speed, label, startFrame, endFrame, update, reversible, flip, flipVertical, style, group, inherit",y;if(y=lt(t.Dynamo,arguments,A,this))return y;Le("69.2"),this.cjsEventDispatcher_constructor(),this.type="Dynamo",this.group=h;var v=T===!1?{}:t.getStyle(this.type,this.group,w);if(n(e)&&(e=v.sprite!=null?v.sprite:null),n(e))return;var P=this.frames=e.parseFrames(i,l,a,!0);if(P.length==0)return;this.totalFrames=P.length;var x=0;n(r)&&(r=v.speed!=null?v.speed:30),n(c)&&(c=v.reversible!=null?v.reversible:!0);var E=this.baseSpeed=this.speed=r;n(s)&&(s=v.update!=null?v.update:!1),n(d)&&(d=v.flip!=null?v.flip:null),n(d)&&c==!1&&(d=!0);var k=this,p,m,S=Date.now(),_,Y,B,b=!1;k.scaleX=e.scaleX,k.scaleY=e.scaleY;function X(){if(p=requestAnimationFrame(X),m=P[x].s,!(k.speed==0||m==0)&&(Y=1e3/Math.abs(k.speed)*m,_=Date.now(),_-S>Y)){S=_;var V=k.frame+(k.speed>0||!c?1:-1),O=!1;V>=P.length&&(O=!0,V=0),V<0&&(O=!0,V=P.length-1),k.frame=V,d&&(k.speed<0?e.scaleX=-k.scaleX:e.scaleX=k.scaleX),C&&(k.speed<0?e.scaleY=-k.scaleY:e.scaleY=k.scaleY),O&&k.dispatchEvent("loop"),k.dispatchEvent("change"),s&&e.stage&&e.stage.update(),!n(B)&&B==k.frame&&(b=!1,k.speed=0,k.paused=!0,k.dispatchEvent("pause"))}}X(),this.paused=!1,this.pause=function(V,O,Z){if(n(V)&&(V=!0),V!=k.paused)return n(O)&&(O=0),V?(E=k.speed,typeof Z>"u"?O>0?(b=!0,t.animate({target:k,obj:{pausingSpeed:0},ticker:!1,time:O,call:function(){b=!1,k.speed=0,k.paused=!0,k.dispatchEvent("pause")}})):(b=!1,k.speed=0,k.paused=!0,setTimeout(function(){k.dispatchEvent("pause")},10)):(b=!0,B=Z)):(B=null,O>0?(b=!0,t.animate({target:k,obj:{pausingSpeed:E},ticker:!1,time:O,call:function(){b=!1,k.speed=E,k.paused=!1}})):(b=!1,k.speed=E,k.paused=!1)),k},Object.defineProperty(k,"frame",{get:function(){return x},set:function(V){x=Math.round(V)%P.length;var O=P[x];n(O)||(e.frame=O.f)}}),Object.defineProperty(k,"percentSpeed",{get:function(){return k.baseSpeed==0?NaN:b||k.paused?E/k.baseSpeed*100:k.speed/k.baseSpeed*100},set:function(V){if(b||k.paused){E=k.baseSpeed*V/100;return}k.speed=k.baseSpeed*V/100}}),Object.defineProperty(k,"pausingSpeed",{get:function(){return k.baseSpeed==0?NaN:k.speed/k.baseSpeed*100},set:function(V){k.speed=k.baseSpeed*V/100}}),T!==!1&&t.styleTransforms(this,v),this.dispose=function(){cancelAnimationFrame(p)}},t.extend(t.Dynamo,Ne.EventDispatcher,null,"cjsEventDispatcher"),t.Accelerator=function(e){Le("69.3"),this.cjsEventDispatcher_constructor();var r=this;this.type="Accelerator",this.paused=!1,this.items=[],this.paused=!1,this._percentSpeed=100,this.add=function(i){var l;Array.isArray(i)?l=i:l=[i];for(var a,s=0;s<l.length;s++)a=r.items.indexOf(l[s]),a<0&&r.items.push(l[s]);return r},e&&this.add(e),this.remove=function(i){var l;Array.isArray(i)?l=i:l=[i];for(var a,s=0;s<l.length;s++)a=r.items.indexOf(l[s]),a>=0&&r.items.splice(a,1);return r},this.pause=function(i,l,a){if(n(i)&&(i=!0),i==r.paused)return;var s=[];if(i){n(a)||(l=null);for(var c=!1,d=0;d<r.items.length;d++)(!n(l)&&n(a)&&!r.items[d].totalFrames||r.items[d].totalFrames&&(!n(l)||!n(a)))&&(r.items[d].pause(!0,l,a),c=!0,s[d]=1,r.items[d].on("pause",function(){r.paused||(C(!0),r.paused=!0,r.dispatchEvent("pause"))},null,!0));c||(C(),r.paused=!0,setTimeout(function(){r.dispatchEvent("pause")},10))}else r.paused=!1,C();function C(){for(var T=0;T<r.items.length;T++)s[T]!=1&&r.items[T].pause(i)}},Object.defineProperty(r,"percentSpeed",{get:function(){return r._percentSpeed},set:function(i){r._percentSpeed=i;for(var l=0;l<r.items.length;l++)r.items[l].percentSpeed=i}}),this.dispose=function(){for(var i=0;i<r.items.length;i++)r.items[i].dispose();return r.items=null,!0}},t.extend(t.Accelerator,Ne.EventDispatcher,null,"cjsEventDispatcher"),t.Emitter=function(e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,x,E,k,p,m,S,_,Y,B,b,X,V,O,Z,W,K,ne,F){var D="obj, width, height, interval, num, life, fade, shrink, decayTime, decayStart, trace, traceFadeTime, traceShiftX, traceShiftY, angle, force, gravity, wind, layers, animation, random, horizontal, vertical, sink, sinkForce, cache, events, startPaused, pool, poolMin, particles, style, group, inherit",u;if(u=lt(t.Emitter,arguments,D,this))return u;Le("69.9"),this.type="Emitter",this.group=ne;var f=K===!1?{}:t.getStyle(this.type,this.group,F);n(e)&&(e=f.obj!=null?f.obj:[new t.Circle(20,t.pink),new t.Circle(20,t.green),new t.Circle(20,t.blue)]),n(r)&&(r=f.width!=null?f.width:300),n(i)&&(i=f.height!=null?f.height:300);var o=Tt(l);n(l)&&(l=f.interval!=null?f.interval:o=="s"?.02:20),typeof l=="number"&&(l=Math.max(o=="s"?.01:10,l)),n(a)&&(a=f.num!=null?f.num:1),n(h)&&(h=f.trace!=null?h.size:!1),n(w)&&(w=f.traceFadeTime!=null?f.traceFadeTime:C),n(A)&&(A=f.traceShiftX!=null?f.traceShiftX:0),n(y)&&(y=f.traceShiftY!=null?f.traceShiftY:0),kt(s,o),n(s)&&(s=f.life!=null?f.life:o=="s"?1:1e3),n(c)&&(c=f.fade!=null?f.fade:!0),n(d)&&(d=f.shrink!=null?f.shrink:!h),kt(C,o),n(C)&&(C=f.decayTime!=null?f.decayTime:o=="s"?1:1e3),n(v)&&(v=f.angle!=null?f.angle:{min:0,max:360}),n(P)&&(P=f.force!=null?f.force:5),n(x)&&(x=f.gravity!=null?f.gravity:9.8),n(E)&&(E=f.wind!=null?f.wind:0),n(k)&&(k=f.layers!=null?f.layers:"top"),n(r)&&(r=f.width!=null?f.width:100),n(i)&&(i=f.height!=null?f.height:100),n(S)&&(S=f.horizontal!=null?f.horizontal:!1),n(_)&&(_=f.vertical!=null?f.vertical:!1),n(Y)&&(Y=f.sink!=null?f.sink:null),!n(Y)&&n(B)&&(B=f.sinkForce!=null?f.sinkForce:10),n(X)&&(X=f.events!=null?f.events:!1),n(V)&&(V=f.startPaused!=null?f.startPaused:!1),n(O)&&(O=f.pool!=null?f.pool:!0),n(Z)&&(Z=f.poolMin!=null?f.poolMin:0),n(W)&&(W=f.particles!=null?f.particles:new t.Container),n(p)&&(p=f.animation!=null?f.animation:null),W.type="Particles",this.zimContainer_constructor(r,i,null,null,!1),this.type="Emitter";var g=this;this.regX=r/2,this.regY=i/2,g.obj=e,g.particles=W,g.interval=l,g.num=a,g.life=s,g.fade=c,g.shrink=d,g.decayTime=C,g.decayStart=T,g.trace=h,g.traceFadeTime=w,g.traceShiftX=A,g.traceShiftY=y,g.angle=v,g.emitterForce=P,g.gravity=x,g.wind=E,g.layers=k,g.animation=p,g.random=m,g.horizontal=S,g.vertical=_,g.sink=Y,g.sinkForce=B,g.events=X,g.startEmitterPaused=g.emitterPaused=V,g.pool=O,g.poolMin=Z,g.particlesEmitted=0;var q=[],I=0,R=0,le,N;t.added(g,L);function L(ie){if(g.emitterPaused=null,g.on("added",function(){t.loop(g.particles,function(Ee){Ee.visible=!1}),g.particles.addTo(g.parent)}),N=ie,n(b)&&(N.isWebGL?b=!1:b=t.mobile()),b&&(N.snapToPixelEnabled=!0),N){var ke=g.parent.getChildIndex(g);g.parent.addChildAt(W,ke),!S&&!_&&g.centerReg(null,null,!1),g.zimInterval=t.interval(g.interval,function(){var Ee=t.isPick(g.life)?t.Pick.getMinMax(g.life).max:g.life;if(n(Ee)&&(Ee=o=="s"?1:1e3),g.startEmitterPaused){g.pauseEmitter();return}if(e=Array.isArray(g.obj)?g.obj:[g.obj],e.length<=0)return;var Q,G;function ue(fe,ye){return fe-ye}Array.isArray(g.interval)?(g.interval.sort(ue),Q=g.interval[0]):g.interval.constructor=={}.constructor?Q=g.interval.min:Q=g.interval,Array.isArray(g.num)?(g.num.sort(ue),G=g.num[g.num.length-1]):g.num.constructor=={}.constructor?G=g.num.max:G=g.num,t.loop(t.Pick.choose(g.num),function(){if(g.decayTime>0){var fe={};g.shrink&&(fe.scale=0),g.fade&&(fe.alpha=0)}var ye,H,re;if(g.pool&&q.length>0&&R>=Math.max(g.poolMin,Ee/Q*G))ye=q[I++%q.length],ye.visible=!0,re=ye.trace?ye.getChildAt(0):ye,re.emitShape&&(H=re.template,re.graphics.c().s(H.s?t.Pick.choose(H.s):null).ss(H.ss?t.Pick.choose(H.ss):null).sd(H.sd?t.Pick.choose(H.sd):null,H.offset?t.Pick.choose(H.offset):null)),ye.trace&&ye.updateCache(),g.layers=="top"?re.emitShape?ye.addTo(W,null,!1):ye.centerReg(W,W.numChildren-1):re.emitShape?ye.addTo(W,g.layers=="bottom"?0:t.rand(W.numChildren),!1):ye.centerReg(W,g.layers=="bottom"?0:t.rand(W.numChildren)),ye.scaleX=1,ye.scaleY=1,re.scaleX=re.originalScaleX,re.scaleY=re.originalScaleY,re.rotation=re.originalRotation,re.color=re.originalColor,re.endSpurt=!1;else{R++,g.trace&&(ye=new t.Container(r,i,null,null,!1),ye.trace=!0);var pe=t.Pick.choose(t.shuffle(e)[0]);pe.type=="shape"?(H=pe,re=new t.Shape(1,1,null,null,null,!1),re.emitShape=!0,re.template=H,re.graphics.s(H.s?t.Pick.choose(H.s):null).ss(H.ss?t.Pick.choose(H.ss):null).sd(H.sd?t.Pick.choose(H.sd):null,H.offset?t.Pick.choose(H.offset):null),g.trace?re.addTo(ye,null,!1):g.layers=="top"?re.addTo(W,null,!1):re.addTo(W,g.layers=="bottom"?0:t.rand(W.numChildren),null,!1)):(re=pe.clone(),re.centerReg||Dn(re),g.trace?re.centerReg(ye).pos({x:-1e3,y:-1e3,reg:!0}):g.layers=="top"?re.centerReg(W):re.centerReg(W,g.layers=="bottom"?0:t.rand(W.numChildren))),g.trace&&(g.layers=="top"?ye.addTo(W,null,!1):ye.addTo(W,g.layers=="bottom"?0:t.rand(W.numChildren),!1),ye.cache(A,y,r,i)),g.trace||(ye=re),ye.particle=re,re.originalAlpha=re.alpha,re.originalScaleX=re.scaleX,re.originalScaleY=re.scaleY,re.originalRotation=re.rotation,re.originalColor=re.color}g.currentParticle=re,g.particlesEmitted++,ye.particleNormal=!0,ye.particleDecaying=!1,ye.particleFizzing=!1;var te=t.Pick.choose(g.angle),ge=t.Pick.choose(g.emitterForce),Ae=ge*Math.cos(te*Math.PI/180),ae=ge*Math.sin(te*Math.PI/180);re.info={position:{x:g.x,y:g.y},velocity:{x:Ae,y:ae}},g.horizontal&&(re.info.position={x:g.x-g.regX+t.rand(0,r),y:g.y-g.regY+(g.vertical?i/2:0)}),g.vertical&&(re.info.position={x:g.x-g.regX+(g.horizontal?r/2:0),y:g.y-g.regY+t.rand(0,i)}),re.emitShape?re.graphics.mt(re.info.position.x,re.info.position.y):(re.x=re.info.position.x,re.y=re.info.position.y),re.alpha=re.originalAlpha,g.random&&t.loop(g.random,function(ve,J){var Se=t.Pick.choose(J);ve=="scale"?re.sca(Se):(ve=="x"?re.info.position.x=g.horizontal||g.vertical?Se:Se+r/2:ve=="y"&&(re.info.position.y=g.horizontal||g.vertical?Se:Se+i/2),(ve=="x"||ve=="y")&&re.emitShape&&re.graphics.mt(re.info.position.x,re.info.position.y),re[ve]=Se,re.emitShape&&(re.x=0,re.y=0))}),b&&!re.emitShape&&re.cache(re.getBounds().x-10,re.getBounds().y-10,re.getBounds().width+20,re.getBounds().height+20);var de=re.emitShape?!1:g.shrink;if(g.decayTime>0&&(g.fade||de||g.trace&&g.traceFadeTime>0)){var se=et(g.life);if(g.trace&&g.traceFadeTime>0&&ye.animate({obj:{alpha:0},time:g.traceFadeTime,wait:se-g.traceFadeTime,waitedCall:function(ve){ve.particleNormal=!1,ve.particleFizzing=!0},call:ee,override:!1,id:"decay"}),g.fade||de){var Ie={};g.fade&&(Ie.alpha=0),de&&(Ie.scaleX=0,Ie.scaleY=0),re.animate({obj:Ie,time:g.decayTime,wait:n(g.decayStart)?se-g.decayTime:g.decayStart,waitedCall:function(ve){ve.parent!=g&&(ve=ve.parent),ve.particleNormal=!1,ve.particleDecaying=!0},call:function(ve){g.events&&z("decayed",ve),ve.endSpurt&&z("spurtdecayed",ve),g.trace&&g.traceFadeTime>0||(n(g.decayStart)||g.decayStart+g.decayTime>g.life?ve.parent&&ee(ve.parent.trace?ve.parent:ve):-function(){var J=ye;t.timeout(se-(g.decayStart+g.decayTime),function(){ee(J)})}())},override:!1,id:"decay"})}}else g.life>0&&-function(){var ve=ye;ve.timeOut=t.timeout(g.life,function(){ee(ve)})}();if(g.events&&z("emitted",ye),$(re),g.animation){var Te=t.Pick.choose(g.animation);Array.isArray(Te)?t.loop(Te,function(ve){n(ve.override)&&(ve.override=!1),re.animate(t.copy(ve))}):(n(Te.override)&&(Te.override=!1),re.animate(t.copy(Te)))}})},null,!0,!0);var U=0;le=g.emitterTicker=t.Ticker.add(function(){t.loop(W,function(Ee){if(Ee.trace){var Q=Ee;Ee=Ee.getChildAt(0)}var G=Ee.info,ue=0,fe=0;if(!n(g.sink)){var ye=g.particles.localToGlobal(G.position.x,G.position.y),H;g.sink.parent&&g.sink.parent.localToGlobal?H=g.sink.parent.localToGlobal(g.sink.x,g.sink.y):H=new Ne.Point(t.Pick.choose(g.sink.x),t.Pick.choose(g.sink.y));var re=t.angle(ye.x,ye.y,H.x,H.y);ue=g.sinkForce*Math.cos(re*Math.PI/180),fe=g.sinkForce*Math.sin(re*Math.PI/180)}var pe=g.wind+ue,te=g.gravity+fe;G.velocity.x+=pe*U,G.velocity.y+=te*U,G.position.x+=G.velocity.x*U*100,G.position.y+=G.velocity.y*U*100,Ee.emitShape?Ee.graphics.lt(G.position.x,G.position.y):(Ee.x=G.position.x,Ee.y=G.position.y),g.trace&&Q&&Q.updateCache(Ee.emitShape?null:"source-over")})},N),U=1/t.Ticker.framerate}}g.particles.noMouse();function ee(ie){if(g.events&&z("fizzed",ie),(ie.trace?ie.getChildAt(0).endSpurt:ie.endSpurt)&&(z("spurtfizzed",ie),g.spurting=!1),g.pool&&ie.pooled!="end")if(ie.pooled){ie.visible=!1;return}else{ie.pooled=!0,q&&q.push(ie),ie.visible=!1;return}g.removeChild(ie),g.trace&&ie.uncache(),ie=null}function z(ie,ke){if(!n(ke)){var U=new Ne.Event(ie);U.particle=ke.trace?ke.getChildAt(0):ke,g.dispatchEvent(U)}}function $(ie){n(g.spurtCount)&&n(g.spurtNum)||(g.spurtCount++,g.spurtCount>=g.spurtNum&&xe(ie))}function xe(ie){g.pauseEmitter(),g.spurtCount=g.spurtNum=null,!n(ie)&&(z("spurted",ie),ie.endSpurt=!0)}Object.defineProperty(g,"interval",{get:function(){return l},set:function(ie){l=ie,g.zimInterval&&(g.zimInterval.time=l)}}),this.removeFrom=function(){g.parent&&g.parent.removeChild(g),g.particles.removeFrom()},this.spurting=!1,this.spurt=function(ie,ke,U){var Ee="num, time, restart",Q;return(Q=lt(g.spurt,arguments,Ee))?Q:(n(ke)||(t.timeout(t.Pick.choose(ke),function(){xe(g.currentParticle)},!0),g.spurting=!0),n(ie)||(g.spurtNum=t.Pick.choose(ie),g.spurtCount=0,g.spurting=!0),g.pauseEmitter(!1,U,null,!0),g)},this.clearPool=function(){t.loop(g.particles,function(ie){ie.pooled="end",ie.visible||g.removeChild(ie)},!0),R=0,I=0,q=[]},g.startEmitterPaused||(this.emitterPaused=!1),this.pauseEmitter=function(ie,ke,U,Ee){if(g.startEmitterPaused=null,n(ie)&&(ie=!0),n(ke)&&(ke=!1),n(U)&&(U=!1),ie){if(g.emitterPaused)return g;U&&(le&&t.Ticker.remove(le),t.loop(g.particles,function(Q){Q.pauseAnimate(),Q.trace&&Q.getChildAt(0).pauseAnimate(),Q.timeOut&&Q.timeOut.pause()})),g.zimInterval.pause(),g.emitterPaused=!0}else{if(!g.emitterPaused)return g;ke&&(t.loop(g.particles,function(Q){Q.stopAnimate(),Q.timeOut&&Q.timeOut.clear(),Q.trace&&Q.getChildAt(0).pauseAnimate()}),g.removeAllChildren()),N&&le&&!t.Ticker.has(N,le)&&(t.Ticker.add(le,N),t.loop(g.particles,function(Q){Q.pauseAnimate(!1),Q.timeOut&&Q.timeOut.pause(!1),Q.trace&&Q.getChildAt(0).pauseAnimate(!1)})),g.zimInterval&&g.zimInterval.pause(!1,Ee),g.emitterPaused=!1}return g},this.resize=function(ie,ke){n(ie)||(r=ie),n(ke)||(i=ke),g.setBounds(0,0,r,i),!S&&!_&&g.centerReg(),g.clearPool()},K!==!1&&t.styleTransforms(this,f),this.clone=function(ie){var ke;return Array.isArray(g.obj)||g.obj.constructor=={}.constructor?ke=t.copy(g.obj):g.obj.clone?ke=g.obj.clone(ie):ke=g.obj,g.cloneProps(new t.Emitter(ke,r,i,g.interval,g.num,g.life,g.fade,g.shrink,g.decayTime,g.decayStart,g.trace,g.traceFadeTime,g.traceShiftX,g.traceShiftY,g.angle,g.emitterForce,g.gravity,g.wind,g.layers,g.animation,t.copy(g.random),g.horizontal,g.vertical,g.sink,g.sinkForce,b,g.events,V,g.pool,g.poolMin,K,g.group,F))},this.dispose=function(){return g.zimInterval&&g.zimInterval.clear(),le&&t.Ticker.remove(le),t.loop(q,function(ie){ie&&ie.dispose()}),W&&W.dispose&&W.dispose(),g.currentParticle&&g.currentParticle.dispose&&g.currentParticle.dispose(),e&&Array.isArray(e)?t.loop(e,function(ie){ie.dispose&&ie.dispose()}):e&&e.dispose&&e.dispose(),W=g.currentParticle=g.particles=e=g.obj=q=g.poolList=null,!0}},t.extend(t.Emitter,t.Container,"clone","zimContainer",!1),t.Generator=function(e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,x,E,k,p,m,S){var _="color, strokeColor, strokeWidth, draw, stamp, setup, maxCount, boundary, drawCount, drawPause, drawSpacebarPause, startX, startY, cache, recordLinePoints, frame, seed, output, outputType, style, group, inherit",Y;if(Y=lt(t.Generator,arguments,_,this))return Y;Le("69.92"),this.group=m;var B=p===!1?{}:t.getStyle("Generator",this.group,S);n(P)&&(P=B.frame!=null?B.frame:j.zdf);var b=P.stage;n(e)&&(e=B.color!=null?B.color:null),n(r)&&(r=B.strokeColor!=null?B.strokeColor:t.white),n(i)&&(i=B.strokeWidth!=null?B.strokeWidth:1),n(c)&&(c=B.maxCount!=null?B.maxCount:1e3),n(d)&&(d=B.boundary!=null?B.boundary:new t.Boundary(0,0,b.width,b.height)),n(C)&&(C=B.drawCount!=null?B.drawCount:1),n(T)&&(T=B.drawPause!=null?B.drawPause:!0),n(h)&&(h=B.drawSpacebarPause!=null?B.drawSpacebarPause:!0),n(w)&&(w=B.startX!=null?B.startX:b.width/2),n(A)&&(A=B.startY!=null?B.startY:b.height/2),n(y)&&(y=B.cache!=null?B.cache:!1);var X=this.drawing=new t.Container(d.x,d.y,d.width,d.height).addTo(b),V=this.shape=new t.Shape(d.width,d.height).addTo(X);this.drawCount=C,n(T)&&(T=!0),y&&V.cache(d.x,d.y,d.width,d.height),this.zimContainer_constructor(d.x,d.y,d.width,d.height),this.type="Generator";var O=this;if(O.draw=null,E){O.drawCount=10,!n(a)&&n(l)&&(l=a),a=null;var Z=new t.Loader;O.outputNum=0,O.outputName=E===!0?"gen_":E.match(/_$/)?E:E+"_"}this.color=e,this.strokeColor=r,this.strokeWidth=i;var W=w,K=A;this.fill=function(f){return O.color=f,O.currentColor=et(O.color),V.f(O.currentColor),this},this.stroke=function(f,o){return n(f)||(O.strokeColor=f,O.currentStrokeColor=et(O.strokeColor),V.s(O.currentStrokeColor)),n(o)||(O.strokeWidth=o,O.currentStrokeWidth=et(O.strokeWidth),V.ss(O.currentStrokeWidth)),this},this.noStroke=function(){return O.strokeColor=O.currentStrokeColor=null,O.strokeWidth=O.currentStrokeWidth=null,V.s(),V.ss(1),this},V.matrix=V.getMatrix(),this.translate=function(f,o){n(f)&&(f=0),n(o)&&(o=0),f=et(f),o=et(o);var g=V.matrix.transformPoint(f,o);return W=g.x,K=g.y,V.mt(W,K),V.matrix.translate(f,o),this},this.rotate=function(f){return n(f)&&(f=0),f=et(f),V.matrix.rotate(f),this},this.scale=function(f,o){return n(f)&&(f=1),n(o)&&(o=f),f=et(f),o=et(o),V.matrix.scale(f,o),this},this.skew=function(f,o){return n(f)&&(f=0),n(o)&&(o=0),f=et(f),o=et(o),V.matrix.skew(f,o),this},v&&(O.linePoints=[]),this.line=function(f,o,g,q){n(f)&&(f=0),n(o)&&(o=0),n(g)&&(g=0),n(q)&&(q=0),f=et(f),o=et(o),g=et(g),q=et(q),(v=="zero"||v=="nonzero"&&f&&o)&&O.linePoints.push([f,o]),O.translate(f,o);var I=V.matrix.transformPoint(g,q);return W=I.x,K=I.y,V.lt(W,K),v&&O.linePoints.push([W,K]),V.matrix.translate(g,q),this},this.arc=function(f,o,g,q,I,R){n(f)&&(f=0),n(o)&&(o=0),n(g)&&(g=50),f=et(f),o=et(o),g=et(g),g=Math.abs(g),n(q)&&(q=0),n(I)&&(I=180),q=et(q),I=et(I),n(R)&&(R=!1),R=et(R),O.translate(f,o);var le=V.matrix.transformPoint(0,0);V.decomp||(V.decomp={}),V.matrix.decompose(V.decomp);var N=(Math.abs(V.decomp.scaleX)+Math.abs(V.decomp.scaleY))/2,L=V.decomp.rotation||0,ee=g*N;return V.mt(le.x+ee*Math.cos((q+L)*Math.PI/180),le.y+ee*Math.sin((q+L)*Math.PI/180)),V.a(le.x,le.y,ee,(q+L)*Math.PI/180,(I+L)*Math.PI/180,R),this},this.curve=function(f,o,g,q,I,R){n(f)&&(f=0),n(o)&&(o=0),n(g)&&(g=50),n(q)&&(q=50),n(I)&&(I=100),n(R)&&(R=0),f=et(f),o=et(o),g=et(g),q=et(q),I=et(I),R=et(R),O.translate(f,o);var le=V.matrix.transformPoint(g,q),N=V.matrix.transformPoint(I,R),L=N.x,ee=N.y;return V.qt(le.x,le.y,L,ee),V.matrix.translate(I,R),this},this.bezier=function(f,o,g,q,I,R,le,N){n(f)&&(f=0),n(o)&&(o=0),n(g)&&(g=50),n(q)&&(q=50),n(I)&&(I=-50),n(R)&&(R=-50),n(le)&&(le=100),n(N)&&(N=0),f=et(f),o=et(o),g=et(g),q=et(q),I=et(I),R=et(R),le=et(le),N=et(N),O.translate(f,o);var L=V.matrix.transformPoint(g,q),ee=V.matrix.transformPoint(I,R),z=V.matrix.transformPoint(le,N),$=z.x,xe=z.y;return V.bt(L.x,L.y,ee.x,ee.y,$,xe),V.matrix.translate(le,N),this},this.rectangle=function(f,o,g,q,I,R,le,N){if(n(f)&&(f=0),n(o)&&(o=0),n(g)&&(g=100),n(q)&&(q=g),f=et(f),o=et(o),g=et(g),q=et(q),!I&&!R&&!le&&!N){O.translate(f,o);var L=V.matrix.transformPoint(0,0),ee=V.matrix.transformPoint(g,0),z=V.matrix.transformPoint(g,q),$=V.matrix.transformPoint(0,q);return V.mt(L.x,L.y).lt(ee.x,ee.y).lt(z.x,z.y).lt($.x,$.y).lt(L.x,L.y).lt(ee.x,ee.y),V.mt(L.x,L.y),this}n(I)&&(I=0),n(R)&&(R=I),n(le)&&(le=I),n(N)&&(N=I),I=et(I),R=et(R),le=et(le),N=et(N);var xe=(g<q?g:q)/2,ie=0,ke=0,U=0,Ee=0;xe=Math.abs(xe),I<0&&(I*=ie=-1),I>xe&&(I=xe),R<0&&(R*=ke=-1),R>xe&&(R=xe),le<0&&(le*=U=-1),le>xe&&(le=xe),N<0&&(N*=Ee=-1),N>xe&&(N=xe),O.translate(f,o),V.decomp||(V.decomp={}),V.matrix.decompose(V.decomp);var Q=(Math.abs(V.decomp.scaleX)+Math.abs(V.decomp.scaleY))/2,G=g<0?-1:1,ue=q<0?-1:1,fe=V.matrix.transformPoint(g-R*G,0),ye=V.matrix.transformPoint(g+R*ke*G,-R*ke*ue),H=V.matrix.transformPoint(g,R*ue),re=V.matrix.transformPoint(g,q-le*ue),pe=V.matrix.transformPoint(g+le*U*G,q+le*U*ue),te=V.matrix.transformPoint(g-le*G,q),ge=V.matrix.transformPoint(N*G,q),Ae=V.matrix.transformPoint(-N*Ee*G,q+N*Ee*ue),ae=V.matrix.transformPoint(0,q-N*ue),de=V.matrix.transformPoint(0,I*ue),se=V.matrix.transformPoint(-I*ie*G,-I*ie*ue),Ie=V.matrix.transformPoint(I*G,0);return V.mt(fe.x,fe.y).at(ye.x,ye.y,H.x,H.y,R*Q).lt(re.x,re.y).at(pe.x,pe.y,te.x,te.y,le*Q).lt(ge.x,ge.y).at(Ae.x,Ae.y,ae.x,ae.y,N*Q).lt(de.x,de.y).at(se.x,se.y,Ie.x,Ie.y,I*Q).cp(),this},this.circle=function(f,o,g,q,I){n(f)&&(f=0),n(o)&&(o=0),n(g)&&(g=50),n(q)&&(q=100),n(I)&&(I=!0),f=et(f),o=et(o),g=et(g),q=et(q),g=Math.abs(g),O.translate(f,o);var R=V.matrix.transformPoint(0,0);V.decomp||(V.decomp={}),V.matrix.decompose(V.decomp);var le=(Math.abs(V.decomp.scaleX)+Math.abs(V.decomp.scaleY))/2,N=V.decomp.rotation||0,L=g*le;if(O.circleHeight=L*2,typeof q=="number"&&q>=0&&q<100){var ee=360*q/100/2;V.mt(R.x+L*Math.cos((-ee-90+N)*Math.PI/180),R.y+L*Math.sin((-ee-90+N)*Math.PI/180)),V.a(R.x,R.y,L,(-ee-90+N)*Math.PI/180,(ee-90+N)*Math.PI/180,!1),I&&V.cp(),O.circleHeight=L-Math.cos(ee*Math.PI/180)*L}else V.mt(R.x+L,R.y),V.a(R.x,R.y,L,0,Math.PI*2);return this},this.elipse=function(f,o,g,q){n(f)&&(f=0),n(o)&&(o=0),n(g)&&(g=100),n(q)&&(q=50),f=et(f),o=et(o),g=et(g),q=et(q),O.translate(f,o);var I=V.matrix.transformPoint(-g/2,-q/2);V.decomp||(V.decomp={}),V.matrix.decompose(V.decomp);var R=V.decomp.scaleX,le=V.decomp.scaleY;return V.de(I.x,I.y,g*R,q*le),this},this.poly=function(f,o,g,q,I,R){n(f)&&(f=0),n(o)&&(o=0),n(g)&&(g=100),n(q)&&(q=5),n(I)&&(I=0),n(R)&&(R=0),f=et(f),o=et(o),g=et(g),q=et(q),I=et(I),R=et(R),g=Math.abs(g),O.translate(f,o);var le=V.matrix.transformPoint(0,0);V.decomp||(V.decomp={}),V.matrix.decompose(V.decomp);var N=(Math.abs(V.decomp.scaleX)+Math.abs(V.decomp.scaleY))/2,L=V.decomp.rotation||0,ee=g*N;return V.dp(le.x,le.y,ee,q,I,L),this},this.closePath=this.close=this.cp=function(){return V.cp(),this},this._noise=new t.Noise(x),this.noise=function(){if(arguments.length==1)return(this._noise.simplex1D.apply(null,arguments)+1)/2;if(arguments.length==2)return(this._noise.simplex2D.apply(null,arguments)+1)/2;if(arguments.length==3)return(this._noise.simplex3D.apply(null,arguments)+1)/2;if(arguments.length==4)return(this._noise.simplex4D.apply(null,arguments)+1)/2},this.stack=[],this.colorStrokeStack=[],this.push=function(){return O.stack.push(V.matrix.clone()),O.colorStrokeStack.push([O.color,O.strokeColor,O.strokeWidth,O.currentColor,O.currentStrokeColor,O.currentStrokeWidth]),this},this.pop=function(){V.matrix=O.stack.pop()||V.matrix;var f=O.colorStrokeStack.pop()||[O.color,O.strokeColor,O.strokeWidth,O.currentColor,O.currentStrokeColor,O.currentStrokeWidth];return O.color=f[0],O.strokeColor=f[1],O.strokeWidth=f[2],O.currentColor=f[3],O.currentStrokeColor=f[4],O.currentStrokeWidth=f[5],V.f(O.currentColor).s(O.currentStrokeColor).ss(O.currentStrokeWidth),V.mt(V.matrix.x,V.matrix.y),this},this.blit=function(){return V.updateCache("source-over"),V.c(),this},this.step=function(){return O.draw&&u(),this},n(O.color)||this.fill(O.color),!n(O.strokeColor)&&O.strokeWidth?this.stroke(O.strokeColor,O.strokeWidth):O.noStroke(),this.translate(W,K),typeof s=="function"&&(this.setup=s,t.timeout(.01,function(){s(0,O.count,O),y&&V.updateCache(),b.update()}));var ne=0;this.maxCount=c,this.resetup=function(f){return n(f)&&(f=!0),ne=0,f&&O.shape.c(),n(O.color)||this.fill(O.color),!n(O.strokeColor)&&O.strokeWidth?this.stroke(O.strokeColor,O.strokeWidth):O.noStroke(),this.reset(),this.setup&&(s(0,O.count,O),y&&V.updateCache(),b.update()),this},this.stampNum=0,typeof a=="function"&&(this.stamp=a,t.timeout(.015,function(){D(0)})),this.restamp=function(f,o){return n(f)&&(f=!0),n(o)&&(o=!0),ne=0,f&&O.shape.c(),o&&O.resetup(f),D(0),this},this.reset=function(){return this.fill(e),!n(r)&&i?this.stroke(r,i):this.noStroke(),V.matrix.identity(),this.translate(w,A),this},this.clear=function(){return this.shape.c(),this};function F(){Z.save({content:b,filename:O.outputName+t.decimals(O.outputNum,null,null,6),type:k}),O.outputNum++}E&&(b.update(),F());function D(f){O.stampNum++;var o=t.loop(O.maxCount,function(g,q){if(O.paused)return O.pausedCount=g,!1;if(O.changeCount)return O.changeCount=!1,!1;ne=g+1;var I=a(g+1,q,O,O.stampNum);if(O.currentColor=et(O.color),V.f(O.currentColor),O.currentStrokeColor=et(O.strokeColor),V.s(O.currentStrokeColor),O.currentStrokeWidth=et(O.strokeWidth),V.ss(O.currentStrokeWidth),E&&(b.update(),F()),I)return I},null,null,f);y&&V.updateCache(),o&&O.dispatchEvent("complete"),b.update()}O.iterator=0,typeof l=="function"&&(this.draw=l,s?setTimeout(function(){O.ticker=t.Ticker.add(u)},100):this.ticker=t.Ticker.add(u),O.generatorPaused=!1,T&&(O.pauseEvent=b.on("stagemousedown",function(){O.count>=O.maxCount||O.pauseTimeout||(t.Ticker.has(O.ticker)?(t.Ticker.remove(O.ticker),O.generatorPaused=!0,O.dispatchEvent("generatorpaused")):(O.ticker=t.Ticker.add(O.ticker),O.generatorPaused=!1,O.dispatchEvent("generatorunpaused")))})),h&&(O.pauseSpacebarEvent=P.on("keydown",function(f){O.count>=O.maxCount||O.pauseTimeout||f.keyCode==20&&(t.Ticker.has(O.ticker)?(t.Ticker.remove(O.ticker),O.generatorPaused=!0,O.dispatchEvent("generatorpaused")):(O.ticker=t.Ticker.add(O.ticker),O.generatorPaused=!1,O.dispatchEvent("generatorunpaused")))})));function u(){O.iterator++,O.iterator%Math.ceil(O.drawCount)==0&&(O.count++,O.draw(O.count,O.maxCount,O),y&&O.blit(),O.currentColor=et(O.color),V.f(O.currentColor),O.currentStrokeColor=et(O.strokeColor),V.s(O.currentStrokeColor),O.currentStrokeWidth=et(O.strokeWidth),V.ss(O.currentStrokeWidth),O.dispatchEvent("drawing"),b.update(),E&&F()),O.maxCount&&O.count>=O.maxCount&&(O.dispatchEvent("complete"),t.Ticker.remove(O.ticker))}this.redraw=function(f,o){return n(f)&&(f=!0),O.reset(),n(o)&&(o=!0),O.ticker&&t.Ticker.remove(O.ticker),O.iterator=0,O.count=0,f&&O.shape.c(),o?(O.resetup(f),setTimeout(function(){O.ticker&&(O.ticker=t.Ticker.add(O.ticker))},100)):O.ticker&&(O.ticker=t.Ticker.add(O.ticker)),this},this.paused=!1,this.pause=function(f,o){if(n(f)&&(f=!0),!(O.count>=O.maxCount)){if(f==this.paused)return this;this.paused=f,this.pauseTimeout&&this.pauseTimeout.clear(),this.paused?O.ticker&&t.Ticker.remove(O.ticker):O.ticker?O.ticker=t.Ticker.add(O.ticker):D(O.pausedCount,O.maxCount),setTimeout(function(){b.update()},20),o&&(this.pauseTimeout=t.timeout(o,function(){O.pause(!O.paused),O.pauseTimeout=null})),O.dispatchEvent(O.paused?"paused":"unpaused")}},this.outOfBounds=function(f,o){n(f)&&(f=0),n(o)&&(o=f);var g=O.shape.stage;if(g)return O.currentX>g.width-f||O.currentX<0+f||O.currentY>g.height-o||O.currentY<0+o},this.stop=function(){O.pause(),O.pauseEvent&&b.off("stagemousedown",O.pauseEvent),O.pauseSpaceEvent&&P.off("keydown",O.pauseSpaceEvent)},Object.defineProperty(this,"count",{get:function(){return ne},set:function(f){ne=f,O.stamp&&(O.changeCount=!0,setTimeout(function(){D(ne,O.maxCount)}))}}),Object.defineProperty(this,"currentX",{get:function(){return W},set:function(){dt&&$e("Generator() - currentX is read only")}}),Object.defineProperty(this,"currentY",{get:function(){return K},set:function(){dt&&$e("Generator() - currentY is read only")}}),this.clone=function(){return O.cloneProps(new t.Generator(e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,x,p,O.group,S))},O.dispose=function(f,o,g){return O.pause(),O.ticker&&t.Ticker.remove(O.ticker),O.pauseEvent&&b.off("stagemousedown",O.pauseEvent),O.pauseSpacebarEvent&&P.off("keydown",O.pauseSpacebarEvent),O._noise&&(O._noise=null),O.shape&&O.shape.dispose(),O.drawing&&O.drawing.dispose(),O.shape=O.drawing=null,g||O.zimContainer_dispose(),!0},p!==!1&&t.styleTransforms(this,B)},t.extend(t.Generator,t.Container,["clone","dispose"],"zimContainer",!1),t.Pen=function(e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,x,E,k,p,m,S,_,Y,B,b,X,V,O,Z){var W="size, color, penType, damp, spread, borderColor, borderWidth, end, paper, nib, cache, ctrlKey, cropScale, undo, undoKeys, move, onTop, deleteable, doubleClickDelete, holdDelete, immediateStop, lineAlpha, lineBlendMode, frame, dashed, pullColor, pullThickness, style, group, inherit",K;if(K=lt(t.Pen,arguments,W,this))return K;Le("69.93"),this.zimContainer_constructor(),this.type="Pen",this.group=O;var ne=V===!1?{}:t.getStyle(this.type,this.group,Z);n(i)&&(i=ne.penType!=null?ne.penType:"line");var F={size:2,color:t.dark,spread:{min:5,max:20},borderColor:t.darker,borderWidth:0},D={line:{size:2},kitetail:{size:{min:5,max:20},color:t.series(t.pink,t.blue,t.green),borderColor:"rgba(0,0,0,.5)",borderWidth:1},grass:{color:t.green,size:3,spread:{min:10,max:30}},hair:{color:[t.pink,t.blue],size:3,spread:{min:20,max:50}},city:{size:{min:30,max:70},spread:{min:50,max:200},color:[t.dark,t.darker,t.grey]},barbwire:{},splatter:{size:{min:5,max:20},color:"rgba(0,0,0,.5)"}};n(D[i])&&(i="line"),n(e)&&(e=ne.size!=null?ne.size:n(D[i].size)?F.size:D[i].size),n(r)&&(r=ne.color!=null?ne.color:n(D[i].color)?F.color:D[i].color),n(l)&&(l=ne.damp!=null?ne.damp:.5),l===!1&&(l=1),n(a)&&(a=ne.spread!=null?ne.spread:n(D[i].spread)?F.spread:D[i].spread),n(s)&&(s=ne.borderColor!=null?ne.borderColor:n(D[i].borderColor)?F.borderColor:D[i].borderColor),n(c)&&(c=ne.borderWidth!=null?ne.borderWidth:n(D[i].borderWidth)?F.borderWidth:D[i].borderWidth),n(d)&&(d=ne.end!=null?ne.end:t.isPick(e)||t.isPick(r)||i!="line"?"butt":"round"),n(A)&&(A=ne.cropScale!=null?ne.cropScale:1),n(h)&&(h=ne.cache!=null?ne.cache:!0),n(y)&&(y=ne.undo!=null?ne.undo:0),n(v)&&(v=ne.undoKeys!=null?ne.undoKeys:!0),n(P)&&(P=ne.move!=null?ne.move:!0),n(E)&&(E=ne.deleteable!=null?ne.deleteable:!0),n(k)&&(k=ne.doubleClickDelete!=null?ne.doubleClickDelete:!0),n(p)&&(p=ne.holdDelete!=null?ne.holdDelete:!0),n(x)&&(x=ne.onTop!=null?ne.onTop:!0),n(m)&&(m=ne.immediateStop!=null?ne.immediateStop:"both"),n(S)&&(S=ne.lineAlpha!=null?ne.lineAlpha:1),n(_)&&(_=ne.lineBlendMode!=null?ne.lineBlendMode:"normal"),n(C)&&(C=ne.paper!=null?ne.paper:new t.Container),n(T)&&(T=ne.nib!=null?ne.nib.clone():null),n(Y)&&(Y=ne.frame!=null?ne.frame:j.zdf),n(B)&&(B=ne.dashed!=null?ne.dashed:null),B===!0&&(B=[3,100]),n(b)&&(b=ne.pullColor!=null?ne.pullColor:null),n(X)&&(X=ne.pullThickness!=null?ne.pullThickness:1);var u=this;this.dampX=new t.Damp(null,l),this.dampY=new t.Damp(null,l);var f=!0;this.drawing=!1,this.immediateStop=m,this.undoLevels=y,this.undoKeys=v,this.move=P,this.draggable=!0,this.lineAlpha=S,this.lineBlendMode=_;var o=u.shape=new t.Shape,g=Y.stage.width,q=Y.stage.height,I,R,le,N;u.paperNum=0,u.sizeScale=1,u.spreadScale=1,u.sizeFactor=1,u.spreadFactor=1,u.pullThickness=X,u.stop=function(){};var L;this.added(function(Q){L=Q,u.paper=C,g=u.stage.width,q=u.stage.height,n(T)?u.stageDown=L.on("stagemousedown",function(H){u.dispatchEvent("start")}):u.zimDown?u.nib=T.addTo(u):(u.nib=T.addTo(u.parent,u.parent.getChildIndex(u)),u.nib.x=u.x,u.nib.y=u.y,u.nib.mouseEnabled=!1,u.stageDown=L.on("stagemousedown",function(H){L=H.target.stage,u.nibEvent=L.on("stagemousemove",G),u.dispatchEvent("start")}),u.stageUp=L.on("stagemouseup",function(){L.off("stagemousemove",u.nibEvent)}));function G(H){u.drawing&&(u.nib.x=H.stageX/t.scaX,u.nib.y=H.stageY/t.scaY)}u.zimDragCheck=!1,u.stop=function(){u.stopCheck(!0)},u.infinite=!1,u.stopCheck=function(H){if(H)u.drawing=!1,u.infinite=!1;else if(u.infinite||u.zimDragCheck||!u.immediateStop&&u.drawing)return;u.immediate(u.x,u.y),setTimeout(function(){var re;if(!u.drawing){if(h?(o.cache(-(g*A-g)/2,-(q*A-q)/2,g*A,q*A),re=C.bitmap=new t.Bitmap(o.cacheCanvas).reg((g*A-g)/2,(q*A-q)/2).addTo(C),o.graphics.clear(),o.uncache(),o.top()):re=o,u.undoLevels>0){var pe={paper:C,line:re};y.push(pe),y.length>u.undoLevels&&y.shift(),u.dispatchEvent("recordUndo")}h||(o=new t.Shape().clone().addTo(C)),u.lastSegment=re,u.lastSelected=re,re.alpha=u.lineAlpha,re.blendMode=u.lineBlendMode,re.paper=C,u.dispatchEvent("stop"),u.dispatchEvent("change")}},u.immediateStop||H?0:50)};var ue=0;u.dampX.immediate(u.x),u.dampY.immediate(u.y),u.lastX=u.lastMidX=u.drawX=u.x,u.lastY=u.lastMidY=u.drawY=u.y;var fe,ye;u.ticker=t.Ticker.add(function(){if(u.parent){var H=u.dampX.convert(f?u.x:u.finishX),re=u.dampY.convert(f?u.y:u.finishY),pe=u.parent.localToLocal(H,re,o);if(Math.abs(u.lastX-H)+Math.abs(u.lastY-re)<1){if(u.drawing&&(u.drawing=!1,u.zimDown?(u.x=u.lastX=u.lastMidX=f?u.x:u.finishX,u.y=u.lastY=u.lastMidY=f?u.y:u.finishY):(u.x=u.finishX=u.lastX=u.lastMidX=H,u.y=u.finishY=u.lastY=u.lastMidY=re),u.stopCheck(),fe=ye=null),u.lastX=u.lastMidX=H,u.lastY=u.lastMidY=re,C){var te=C.localToLocal(0,0,u.parent);u.lastMidX-=te.x,u.lastMidY-=te.y}return}else{var ge=t.Pick.choose(e)*u.sizeScale*u.sizeFactor,Ae=t.Pick.choose(a)*u.spreadScale*u.spreadFactor;u.drawing||($=[],C.getChildIndex(o)!=C.numChildren-1&&o.top()),u.drawing=!0,u.dispatchEvent("drawing")}var ae=u.parent.localToLocal(u.lastX,u.lastY,o),de;C?de=C.localToLocal(u.lastMidX,u.lastMidY,o):de=u.parent.localToLocal(u.lastMidX,u.lastMidY,o);var se,Ie,Te;if(i=="splatter")for(var ve=0;ve<=3;ve++){var J=t.rand(360)*Math.PI/180,Se=Ae,Be={x:H+Se*Math.cos(J),y:re+Se*Math.sin(J)},Ye=u.parent.localToLocal(Be.x,Be.y,o);o.graphics.mt(Ye.x,Ye.y).f(t.Pick.choose(r)).dc(Ye.x,Ye.y,ge/2)}else i=="grass"||i=="hair"||i=="city"?((i=="grass"||i=="hair")&&(se=u.lastX+(H-u.lastX)/2,Ie=u.lastY+(re-u.lastY)/2,Te=u.parent.localToLocal(se,Ie,o),o.graphics.s(t.Pick.choose(r)).ss(ge,d).mt(Te.x,Te.y).lt(Te.x+t.rand(-Ae/4,Ae/4),i=="hair"?Te.y+Ae:Te.y-Ae)),(i=="grass"||i=="hair"||i=="city"&&ue%3==0)&&o.graphics.s(t.Pick.choose(r)).ss(ge,d).mt(pe.x,pe.y).lt(pe.x+(i=="city"?0:t.rand(-Ae/4,Ae/4)),i=="hair"?Te.y+Ae:pe.y-Ae),ue++):(i=="kitetail"&&o.graphics.s(t.Pick.choose(r)).ss(ge,d),i=="barbwire"?(o.graphics.s(t.Pick.choose(r)).ss(ge,d),se=u.lastX+(H-u.lastX)/2+t.rand(-Ae,Ae),Ie=u.lastY+(re-u.lastY)/2+t.rand(-Ae,Ae)):(se=u.lastX+(H-u.lastX)/2,Ie=u.lastY+(re-u.lastY)/2),Te=u.parent.localToLocal(se,Ie,o),i!="line"&&o.graphics.qt(ae.x,ae.y,Te.x,Te.y));if(c>0&&i!="line"&&(se=u.lastX+(H-u.lastX)/2,Ie=u.lastY+(re-u.lastY)/2,Te=u.parent.localToLocal(se,Ie,o),o.graphics.s(t.Pick.choose(s)).ss(t.Pick.choose(c)).mt(de.x,de.y).qt(ae.x,ae.y,Te.x,Te.y),i=="splatter"&&o.graphics.es()),i=="splatter")o.graphics.f(t.Pick.choose(r));else if(i!="kitetail")if(i=="line"){if(t.isPick(r)||ge!=ye){var Ke=t.Pick.choose(r);(Ke!=fe||ge!=ye)&&o.graphics.s(Ke).ss(ge,d),fe=Ke,ye=ge}}else o.graphics.s(t.Pick.choose(r)).ss(ge,d);i!="grass"&&i!="hair"&&i!="city"&&i!="splatter"&&o.graphics.mt(de.x,de.y).qt(ae.x,ae.y,Te.x,Te.y),B&&o.graphics.sd(B),u.lastX=H,u.lastY=re,Te&&(u.lastMidX=Te.x,u.lastMidY=Te.y),u.drawX=u.lastMidX||0,u.drawY=u.lastMidY||0}}),n(b)||ee(L),u.mouseChildren=!1});function ee(Q){var G=Q.frame;u.ppdEvent&&u.off("drawing",u.ppdEvent),u.ppsEvent&&u.off("stop",u.ppsEvent),u.ppmEvent&&Q.off("stagemousedown",u.ppmEvent),u.pullShape||(u.pullShape=new t.Shape),u.ppdEvent=u.on("drawing",function(){setTimeout(function(){var ue=C.localToGlobal(u.drawX,u.drawY);u.pullShape.c().s(b).ss(u.pullThickness).mt(G.mouseX,G.mouseY).lt(ue.x,ue.y)},10)}),u.ppsEvent=u.on("stop",function(){u.pullShape.removeFrom(),u.pullShape.c()}),u.ppmEvent=Q.on("stagemousedown",function(){u.pullShape.addTo(Q),u.immediate(G.mouseX,G.mouseY),u.motionController&&u.motionController.immediate(G.mouseX,G.mouseY)})}function z(){u.ppdEvent&&u.off("drawing",u.ppdEvent),u.ppsEvent&&u.off("stop",u.ppsEvent),u.ppmEvent&&u.off("stagemousedown",u.ppmEvent),u.pullShape&&u.pullShape.dispose()}y=[];var $=[];this.saveState=function(Q,G,ue){var fe=Q.type=="Container"?"paper":"line",ye={paper:u.paper};ye[fe]=Q,ye[fe+"Transform"]={x:Q.x,y:Q.y,r:Q.rotation,a:Q.alpha,rX:Q.regX,rY:Q.regY,sX:Q.scaleX,sY:Q.scaleY,skX:Q.skewX,skY:Q.skewY,v:Q.visible},!n(G)&&!n(ue)&&G!=ue&&(ye.startLayer=G,ye.endLayer=ue),y.push(ye),u.dispatchEvent("recordUndo"),y.length>u.undoLevels&&y.shift()};var xe={x:0,y:0,r:0,a:1,rX:0,rY:0,sX:1,sY:1,skX:0,skY:0,v:!0};this.undo=function(){var Q=y.pop();if(Q){if($.push(Q),Q.clear){for(var G=0;G<Q.clear.length;G++)Q.paper.addChild(Q.clear[G]);Q.paper.addChild(o)}else Q.line&&Q.lineTransform?(n(Q.startLayer)||(o.top(),Q.paper.setChildIndex(Q.line,le)),ie("line",Q.line)):Q.line?Q.line.removeFrom():Q.paperTransform&&ie("paper",Q.paper);u.lastPaper=u.paper,Q.paper!=u.paper&&(u.paper=Q.paper,u.dispatchEvent("paperChange")),u.dispatchEvent("change"),u.dispatchEvent("undo"),!t.OPTIMIZE&&(mt||!j.OPTIMIZE)&&u.stage&&u.stage.update()}};function ie(Q,G){for(var ue,fe=y.length-1;fe>=0;fe--)if(y[fe][Q]==G&&y[fe][Q+"Transform"]){ue=y[fe][Q+"Transform"];break}ue||(ue=t.copy(xe)),G.x=ue.x,G.y=ue.y,G.alpha=ue.a,G.rotation=ue.r,G.regX=ue.rX,G.regY=ue.rY,G.scaleX=ue.sX,G.scaleY=ue.sY,G.skewX=ue.skX,G.skewY=ue.skY,G.visible=ue.v,Q=="line"&&h&&(G.regX=(g*A-g)/2,G.regY=(q*A-q)/2)}this.redo=function(){var Q=$.pop(),G,ue;Q&&(y.push(Q),Q.clear?(Q.paper.removeAllChildren(),Q.paper.addChild(o)):Q.line&&Q.lineTransform?(n(Q.endLayer)||(o.top(),Q.paper.setChildIndex(Q.line,N)),ue=Q.lineTransform,G=Q.line):Q.line?Q.line.addTo(Q.paper):Q.paperTransform&&(ue=Q.paperTransform,G=Q.paper),G&&(G.x=ue.x,G.y=ue.y,G.alpha=ue.a,G.rotation=ue.r,G.regX=ue.rX,G.regY=ue.rY,G.scaleX=ue.sX,G.scaleY=ue.sY,G.skewX=ue.skX,G.skewY=ue.skY,G.visible=ue.v),u.lastPaper=u.paper,Q.paper!=u.paper&&(u.paper=Q.paper,u.dispatchEvent("paperChange")),u.dispatchEvent("change"),u.dispatchEvent("redo"),!t.OPTIMIZE&&(mt||!j.OPTIMIZE)&&u.stage&&u.stage.update())},u.ctrlKey=!1,u.shiftKey=!1,u.ctrlKeyCheck=!1,u.zimkeydownEvent=function(Q){u.ctrlKey=Q.ctrlKey,u.shiftKey=Q.shiftKey,Q.keyCode==17&&P&&!u.ctrlKeyCheck&&(u.ctrlKeyCheck=!0,C.noDrag(),C.drag({onTop:x,all:!0})),!(u.undoLevels<=0)&&u.undoKeys&&(Q.ctrlKey&&(Q.shiftKey&&Q.keyCode==90||Q.keyCode==89)?u.redo():Q.ctrlKey&&Q.keyCode==90&&u.undo(),Y&&Y.ctrlKey&&u.write&&(u.lastWrite=u.write,u.write=!1))},j.addEventListener("keydown",u.zimkeydownEvent),u.zimkeyupEvent=function(Q){Q.keyCode==17&&P&&u.ctrlKeyCheck&&(u.ctrlKeyCheck=!1,C.noDrag(),C.drag({onTop:x})),Q.ctrlKey||(u.ctrlKey=!1),Q.shiftKey||(u.shiftKey=!1),Y&&!Y.ctrlKey&&u.write==!1&&(u.write=u.lastWrite)},j.addEventListener("keyup",u.zimkeyupEvent),Object.defineProperty(this,"paper",{get:function(){return C},set:function(Q){Q.type=="Container"&&(C=Q,o.addTo(C,0,!1),C.shape=o,u.dampX.immediate(u.x),u.dampY.immediate(u.y),u.lastX=u.lastMidX=u.finishX=u.x,u.lastY=u.lastMidY=u.finishY=u.y,i=="barbwire"&&o.graphics.s(t.Pick.choose(r)).ss(t.Pick.choose(e)*u.sizeScale*u.sizeFactor,d),o.graphics.mt(u.x,u.y),C.parent||C.addTo(u.parent,u.parent.getChildIndex(u)),n(C.paperNum)&&(C.paperNum=++u.paperNum,E&&C.on("mousedown",function(G){u.lastSelected=G.target,u.nibEvent&&u.stage.off("stagemousemove",u.nibEvent);var ue=G.target.paper;ue&&(ue!=u.paper&&(u.paper=ue,u.dispatchEvent("paperChange")),u.shiftKey&&(u.ctrlKey?u.clear():(G.target.visible=!1,u.undoLevels>0&&u.saveState(G.target),u.dispatchEvent("change"))))}),k&&C.on("dblclick",function(G){G.target.visible=!1,u.undoLevels>0&&u.saveState(G.target)}),k&&C.hold(function(G){G.target.visible=!1,u.undoLevels>0&&u.saveState(G.target)}),P&&(C.on("mousedown",function(G){L=G.target.stage,u.draggingCheck=!0,!(u.shiftKey&&E)&&(I=G.stageX/t.scaX,R=G.stageY/t.scaY,o.top(),le=C.getChildIndex(G.target))}),C.drag({onTop:x}),C.on("pressup",function(G){if(!(E&&u.shiftKey)&&G.target.visible!=!1&&!(u.undoLevels<=0)){if(Math.abs(G.stageX/t.scaX-I)<1&&Math.abs(G.stageY/t.scaY-R)<1){x&&(o.top(),N=C.getChildIndex(G.target),le!=N&&u.saveState(G.target,le,N));return}u.ctrlKey?(u.saveState(C),u.dispatchEvent("paperChange")):(o.top(),N=C.getChildIndex(G.target),u.saveState(G.target,le,N)),u.dispatchEvent("change"),o.top()}}))))}}),Object.defineProperty(this,"write",{get:function(){return f},set:function(Q){f&&Q===!1&&(u.finishX=u.x,u.finishY=u.y),!f&&Q&&(o.graphics.es(),o.graphics.ef(),u.dampX.immediate(u.x),u.dampY.immediate(u.y),u.lastX=u.lastMidX=u.x,u.lastY=u.lastMidY=u.y),f=Q}}),Object.defineProperty(this,"size",{get:function(){return e},set:function(Q){o.graphics.es(),o.graphics.ef(),e=Q,i!="splatter"&&o.graphics.ss(t.Pick.choose(e)*u.sizeScale*u.sizeFactor,d)}}),Object.defineProperty(this,"color",{get:function(){return r},set:function(Q){r=Q,o.graphics.es(),o.graphics.ef(),i!="splatter"&&o.graphics.s(t.Pick.choose(r))}}),Object.defineProperty(this,"penType",{get:function(){return i},set:function(Q){i=Q,o.graphics.ef().es(),i!="splatter"?o.graphics.s(t.Pick.choose(r)):o.graphics.s(t.Pick.choose(r)).ss(t.Pick.choose(e)*u.sizeScale*u.sizeFactor,d)}}),Object.defineProperty(this,"end",{get:function(){return d},set:function(Q){d=Q}}),Object.defineProperty(this,"damp",{get:function(){return l},set:function(Q){l=Q,u.dampX.damp=l,u.dampY.damp=l}}),Object.defineProperty(this,"spread",{get:function(){return a},set:function(Q){a=Q}});var ke,U;this.setColorRange=function(Q,G){return n(G)?(ke=u.color,U=Q):n(Q)?(ke=u.color,U=G):(ke=Q,U=G),u};var Ee=0;Object.defineProperty(u,"colorRange",{get:function(){return Ee},set:function(Q){Ee=Q,!n(ke)&&!n(U)&&(u.color=t.colorRange(ke,U,Q))}}),Object.defineProperty(this,"borderColor",{get:function(){return s},set:function(Q){s=Q}}),Object.defineProperty(this,"borderWidth",{get:function(){return c},set:function(Q){c=Q}}),Object.defineProperty(this,"pullColor",{get:function(){return b},set:function(Q){if(n(Q||Q==-1))z(),b=null;else if(n(b)){b=Q;var G=L||zdf.stage;ee(G)}else b=Q}}),u.setPen=function(Q){u.dampX.immediate(u.x),u.dampY.immediate(u.y),u.lastX=u.lastMidX=u.finishX=u.x,u.lastY=u.lastMidY=u.finishY=u.y,n(Q)&&(Q=i),n(D[Q])&&(Q="line"),u.penType=i=Q;var G=t.merge(F,D[Q]);for(var ue in G)u[ue]!=G[ue]&&(u[ue]=G[ue]);return u},u.immediate=function(Q,G){return n(Q)||(u.x=Q,u.dampX.immediate(u.x),u.lastX=u.lastMidX=u.finishX=u.x),n(G)||(u.y=G,u.dampY.immediate(u.y),u.lastY=u.lastMidY=u.finishY=u.y),u},u.clear=function(){for(var Q=[],G=0;G<C.numChildren-1;G++)Q.push(C.getChildAt(G));return y.push({paper:C,clear:Q}),y.length>u.undoLevels&&y.shift(),u.dispatchEvent("recordUndo"),C.removeAllChildren(),o.graphics.clear(),C.addChild(o),u.dispatchEvent("change"),u.stage&&u.stage.update(),u},this.deleteSegment=function(Q){Q.visible=!1,u.undoLevels>0&&u.saveState(Q)},this.clone=function(){return this.cloneChildren(this.cloneProps(new t.Pen(e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,x,E,k,p,m,S,_,Y,B,b,X,V,O,Z)))},u.dispose=function(Q,G,ue){return n(Q)&&(Q=!0),j.removeEventListener("keydown",u.zimkeydownEvent),j.removeEventListener("keyup",u.zimkeyupEvent),L&&u.nibEvent&&L.off("stagemousemove",u.nibEvent),L&&u.stageDown&&L.off("stagemousedown",u.stageDown),L&&u.stageUp&&L.off("stagemouseup",u.stageUp),L&&u.upEvent&&L.off("stagemouseup",u.upEvent),t.Ticker.remove(u.ticker),u.removeAllEventListeners(),T&&T.removeFrom(),Q&&(u.shape&&u.shape.dispose(),u.paper&&u.paper.dispose(),h&&(u.bitmap&&u.bitmap.dispose(),u.bitmap=null),u.zimContainer_dispose(ue),C=o=u.shape=null),!0},V!==!1&&t.styleTransforms(this,ne)},t.extend(t.Pen,t.Container,["dispose","clone"],"zimContainer",!1),t.SoundWave=function(e,r,i,l,a,s,c,d,C,T,h,w){var A="num, input, include, smoothing, min, max, operation, baseline, magnify, reduce, adjust, channel",y;if(y=lt(t.SoundWave,arguments,A,this))return y;Le("69.95"),this.type="SoundWave",n(e)&&(e=120),n(r)&&(r="mic"),n(i)&&(i=120/1024),n(l)&&(l=.85),n(a)&&(a=r=="mic"?-80:(r.oscillator,-100)),n(s)&&(s=r=="mic"?-40:(r.oscillator,-10)),n(c)&&(c=function(S,_){return S*(.5+_*1/Math.pow(t.SoundWave.bufferLength,.95))}),n(d)&&(d=r=="mic"?0:(r.oscillator,30)),n(C)&&(C=r=="mic"?1:r.oscillator?5:10),n(T)&&(T=0),n(h)&&(h=5),t.SoundWave.bufferLength=1024;var v=e,P=this;P.baseline=d,P.magnify=C,P.reduce=T,P.input=r,P.adjust=h;var x;r.type=="Tone"||r.type=="SynthSound"?x=r.audioContext:x=new(j.AudioContext||j.webkitAudioContext);var E=P.analyser=x.createAnalyser();E.minDecibels=a,E.maxDecibels=s,E.smoothingTimeConstant=l,Object.defineProperty(this,"smoothing",{get:function(){return E.smoothingTimeConstant},set:function(S){E.smoothingTimeConstant=S}}),Object.defineProperty(this,"num",{get:function(){return v},set:function(S){v=S,k=Math.floor(i*t.SoundWave.bufferLength/v),k<1&&$e("ZIM SoundWave: num is too big")}}),this.setInput=function(S){if(P.input=S,S=="mic"){navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({audio:!0}).then(function(B){var b=P.source=x.createMediaStreamSource(B);m(b)}).catch(function(B){$e("ZIM SoundWave: Error occured: "+B)}):navigator.getUserMedia?navigator.getUserMedia({audio:!0},function(B){var b=P.source=x.createMediaStreamSource(B);m(b)},function(B){$e("ZIM SoundWave: Error occured: "+B)}):$e("ZIM SoundWave: Sorry, mic not supported");return}else if(S.type=="Tone")m(S.compressor);else if(S.type=="SynthSound")m(S.gain);else{if(S.type&&S.type=="sound"){$e("ZIM SoundWave: pass in the result of a zim.asset('somesound').play() for the input");return}var _,Y;S.playbackResource?(_=S.playbackResource,Y=x.createMediaElementSource(_)):(_=S,Y=x.createMediaElementSource(_)),m(Y)}},this.setInput(r);var k,p;function m(S){if(p&&p.disconnect(E),p=S,n(w)||w!==0&&w!==1)S.connect(E),r!="mic"&&E.connect(x.destination);else{var _=new ChannelSplitterNode(x,{numberOfOutputs:2});S.connect(_),_.connect(E,w);var Y=new ChannelMergerNode(x,{numberOfInputs:2});E.connect(Y,0,w),r!="mic"&&Y.connect(x.destination)}if(E.fftSize=t.SoundWave.bufferLength*2,k=Math.floor(i*t.SoundWave.bufferLength/v),k<1){$e("ZIM SoundWave: include param is too small or num param is too big");return}var B=E.frequencyBinCount,b=new Uint8Array(B),X=300,V=0,O=0,Z=Math.round(60*P.adjust*.8),W=new t.Damp(X,.01);P.calculate=function(K){n(K)&&(K=!0),E.getByteFrequencyData(b);var ne=b.map(c);if(k==1&&!K)return ne;var F=[],D=0,u;for(u=0;u<=i*t.SoundWave.bufferLength;u++)D+=ne[u],u!=0&&u%k==0&&(F.push(Math.max(0,(D/k-P.baseline)*P.magnify-P.reduce)),D=0);var f=F.length;if(r!="mic"&&(F[0]*=.75,F[1]*=.85,F[2]*=.9,F[f-2]*=.8,F[f-1]*=.75),F[f-1]*=1.3,F[f-2]*=1.2,F[f-3]*=1.1,K){var o=[];Z++,Z>=60*P.adjust&&(X=V/Z,V=0,O=0,Z=0);var g=W.convert(X);for(u=0;u<f;u++)F[u]>O&&(O=F[u]),o[u]=Math.min(1,g!=0?F[u]/g:0);return V+=O,o}return F},setTimeout(function(){P.dispatchEvent("ready")},50)}this.dispose=function(S){return S&&x&&x.close(),E&&E.disconnect(),!0}},t.extend(t.SoundWave,Ne.EventDispatcher,null,"cjsEventDispatcher",!1),t.Synth=function(e,r){Le("69.955"),this.type="Synth",n(e)&&(e=.3),n(r)&&(r=220),this.volume=e,this.frequency=r;var i=this,l;this.play=function(a,s,c,d,C,T,h,w,A,y,v,P,x,E,k,p,m,S,_,Y,B,b,X,V,O,Z,W,K,ne,F,D,u,f,o,g,q,I,R,le,N,L,ee,z,$,xe,ie,ke,U){var Ee=Array.prototype.slice.call(arguments);if(!l&&(j.AudioContext||j.webkitAudioContext)&&(l=new(j.AudioContext||j.webkitAudioContext),l.z=l.createBufferSource,l.createBufferSource=function(ue){return ue==null&&(ue=l.z()),ue.start=ue.start||function(fe){l.noteOn(fe)},ue}),!!l){for(a=a!=null?et(a):.3,s=s!=null?et(s):.05,c=c!=null?et(c):220,d=d!=null?et(d):0,C=C!=null?et(C):0,T=T!=null?et(T):.1,h=h!=null?et(h):0,w=w!=null?et(w):1,A=A!=null?et(A):0,y=y!=null?et(y):0,v=v!=null?et(v):0,P=P!=null?et(P):0,x=x!=null?et(x):0,E=E!=null?et(E):0,k=k!=null?et(k):0,p=p!=null?et(p):0,m=m!=null?et(m):0,Y=Y!=null?et(Y):0,S=S!=null?et(S):1,_=_!=null?et(_):0,W=W!=null?et(W):44100,K==null&&(K=99+d*W),ne==null&&(ne=C*W),F==null&&(F=T*W),D==null&&(D=_*W),u==null&&(u=m*W),f==null&&(f=Math.PI*2),o==null&&(o=function(ue){return ue>0?1:-1}),g==null&&(g=K+D+ne+F+u),q==null&&(q=A*=500*f/Math.pow(W,2)),I==null&&(I=c*=(1+s*2*Math.random()-s)*f/W),R==null&&(R=o(k)*f/4),le==null&&(le=0),N==null&&(N=0),L==null&&(L=0),ee==null&&(ee=0),z==null&&(z=0),$==null&&($=0),xe==null&&(xe=1),ie==null&&(ie=[]),ke==null&&(ke=l.createBufferSource()),U==null&&(U=l.createBuffer(1,g,W)),ke.connect(l.destination);L<Math.floor(g);ie[L++]=$)++z>p*100&&(z=0,$=le*c*Math.sin(N*k*f/W-R),$=h?h>1?h>2?h>3?Math.sin(Math.pow($%f,3)):Math.max(Math.min(Math.tan($),1),-1):1-(2*$/f%2+2)%2:1-4*Math.abs(Math.round($/f)-$/f):Math.sin($),$=(x?1-Y+Y*Math.sin(f*L/x):1)*o($)*Math.pow(Math.abs($),w)*a*i.volume*(L<K?L/K:L<K+D?1-(L-K)/D*(1-S):L<K+D+ne?S:L<g-u?(g-L-u)/F*S:0),$=u?$/2+(u>L?0:(L<g-u?1:(L-g)/u)*ie[L-u|0]/2):$),le+=1-E+(Math.sin(L)+1)*1e9%2*E,N+=1-E+(Math.pow(Math.sin(L),2)+1)*1e9%2*E,c+=A+=y*500*f/Math.pow(W,3),xe&&++xe>P*W&&(c+=v*f/W,I+=v*f/W,xe=0),x&&++ee>x*W&&(c=I,A=q,ee=1,xe=xe||1);U.getChannelData(0).set(ie),ke.buffer=U;var Q=new Ne.EventDispatcher;Q.type="SynthSound",Q.audioContext=l,Q.gain=l.createGain(),ke.connect(Q.gain),Q.gain.connect(l.destination),ke.start(),Q.duration=ie.length/W,Q.playing=!0,Q.stop=function(){clearTimeout(Q.completeID),clearInterval(Q.repeatID),Q.gain.gain.setTargetAtTime(0,l.currentTime,.1),Q.playing=!1,setTimeout(function(){l.close()},.1*1e3)};var G;return Q.repeat=Q.loop=function(ue,fe){G=0,ue===!0&&(ue=null),n(fe)&&(fe=0),clearTimeout(Q.completeID);function ye(){return Q.duration+et(fe)}return Q.repeatID=t.interval(ye,function(){G++,ue&&G>=ue?(Q.dispatchEvent("complete"),Q.repeatID.clear(),Q.playing=!1):(Q.dispatchEvent("loop"),i.play.apply(i,Ee))}),Q},Q.play=function(){return i.play.apply(i,Ee),Q.playing=!0,Q},Q.completeID=setTimeout(function(){Q.dispatchEvent("complete")},(ie.length/W+.1)*1e3),Q}},this.Tone=function(a,s,c,d,C,T,h,w,A,y,v,P,x,E,k,p,m,S,_){var Y="volume, note, shape, duration, attack, release, wahAmount, wahRate, wahShape, wahThroat, wahNote, vibratoAmount, vibratoRate, vibratoShape, tremeloAmount, tremeloRate, tremeloShape, startTime, pauseOnBlur",B;if(B=lt(i.Tone,arguments,Y,this))return B;this.type="Tone";var b=this,X;n(a)&&(a=i.volume),n(s)&&(s=i.frequency),n(c)&&(c=t.SINE),n(C)&&(C=.02),n(T)&&(T=.05),n(S)&&(S=0),j.AudioContext||j.webkitAudioContext?X=this.audioContext=new(j.AudioContext||j.webkitAudioContext):dt&&$e("Synth tone() needs AudioContext"),a=et(a),s=et(s),c=et(c),d=et(d),C=et(C),T=et(T),h=et(h),w=et(w),A=et(A),y=et(y),v=et(v),P=et(P),x=et(x),E=et(E),k=et(k),p=et(p),m=et(m),S=et(S);var V=Tt(d);i.duration=d,d&&(d=d*(V=="s"?1:1/1e3)),S&&(Tt(S),S=S*(V=="s"?1:1/1e3)),i.attack=C,i.release=T,i.rampDuration=.02,i.hush=.1;var O=this.note=this.oscillator=X.createOscillator();O.frequency.value=t.Synth.note(s),t.Synth.setShape(O,c);var Z=this.filter=X.createBiquadFilter();Z.type="bandpass",Z.frequency.value=O.frequency.value,Z.Q.value=0;var W=this.gain=O.gain=X.createGain();W.type="gain",W.gain.setValueAtTime(0,X.currentTime);var K=this.compressor=X.createDynamicsCompressor();K.threshold.setValueAtTime(-50,X.currentTime),K.knee.setValueAtTime(40,X.currentTime),K.ratio.setValueAtTime(12,X.currentTime),K.attack.setValueAtTime(0,X.currentTime),K.release.setValueAtTime(.25,X.currentTime),O.connect(Z),Z.connect(W),W.connect(K),K.connect(X.destination);function ne(ee,z){n(ee)&&(ee=X.currentTime),n(z)&&(z=i.attack),O.start(ee);var $=j.zdf&&new Date().getTime()-j.zdf.startTime<200?.1:i.attack;W.gain.setValueAtTime(0,X.currentTime+.1),W.gain.linearRampToValueAtTime(a*i.hush,X.currentTime+.1+$)}ne(S),this.stop=function(ee){n(ee)&&(ee=i.release),W&&D(W.gain,0,!0,ee),le&&D(le.gain,0,!0,ee),q&&D(q.gain,0,!0,ee),setTimeout(function(){b.dispatchEvent("complete")},(.6+ee+i.rampDuration)*1e3),setTimeout(function(){X&&!X.iamClosed&&(X.iamClosed=!0,X.close())},(ee+1)*1e3),setTimeout(function(){u&&b.removeWah()},(ee+1)*1e3)},d&&this.stop(S+d-.1);var F=this.notes=[O];this.addNote=function(ee,z,$,xe,ie,ke){n(xe)&&(xe=!0),n(ie)&&(ie=!1),n(ee)&&(ee=.1),n(ke)&&(ke=0);var U={type:"Note"};U._volume=ee,U._note=t.Synth.note(z),F.push(U);var Ee=U.oscillator=X.createOscillator();Ee.frequency.value=U._note,Ee.type=t.Synth.setShape(Ee,$);var Q=U.gain=X.createGain();return D(Q.gain,U._volume,!0),Q.connect(xe?Z:W),Ee.connect(Q),q&&ie&&q.connect(Ee.frequency),Ee.start(X.currentTime+ke),Object.defineProperty(U,"volume",{get:function(){return U._volume},set:function(G){n(G)||(U._volume=et(G),D(U.gain.gain,U._volume,!0))}}),Object.defineProperty(U,"note",{get:function(){return U._note},set:function(G){n(G)||(U._note=et(G),D(U.oscillator.frequency,t.Synth.note(U._note)))}}),U},this.removeNote=function(ee){var z=F.indexOf(ee);return z>=0&&F.splice(z,1),ee.oscillator.disconnect(),ee=null,this};function D(ee,z,$,xe){n(z)&&(z=0),n(xe)&&(xe=i.rampDuration),$?(ee.cancelScheduledValues(X.currentTime),ee.linearRampToValueAtTime(ee.value,X.currentTime+.02),ee.linearRampToValueAtTime(z,X.currentTime+.05+xe)):(ee.cancelScheduledValues(X.currentTime),ee.setTargetAtTime(z,X.currentTime,xe))}this.ramp=function(ee,z){D(W.gain,ee*i.hush,!0,z)},this.animate=function(){return arguments[0].props?arguments[0].target=this:Array.prototype.unshift.call(arguments,this),t.animate.apply(null,arguments),this},this.wiggle=function(){return arguments[0].props?arguments[0].target=this:Array.prototype.unshift.call(arguments,this),t.wiggle.apply(null,arguments),this},t.addWires(this);var u,f;function o(){n(h)&&(h=1e3),n(w)&&(w=1),n(A)&&(A="sine"),n(y)&&(y=5),n(v)?v=b.oscillator.frequency.value:v=t.Synth.note(v),n(f)&&(f=200),b.filter.Q.value=y,u=b.wah=i.oscillator(w,h/2,A,v+h/2+f),u.ticker=t.Ticker.add(function(){b.filter.frequency.value=b.wah.amplitude})}(h||w||!n(A)||!n(y))&&o(),b.removeWah=function(){t.Ticker.remove(u.ticker),u.dispose(),u=b.wah=null,b.filter.Q.value=0};var g,q;function I(){n(x)&&(x=5),n(E)&&(E="sine"),n(P)&&(P=10),g=b.vibrato=X.createOscillator(),q=b.vibratoGain=X.createGain(),q.gain.value=0,g.frequency.value=x,t.Synth.setShape(g,E),g.connect(q),q.connect(O.frequency),g.start(0),q.gain.setValueAtTime(0,X.currentTime+.1),q.gain.linearRampToValueAtTime(P,X.currentTime+.1+i.attack)}(P||x||!n(E))&&I(),b.removeVibrato=function(){D(q.gain,0,!0),setTimeout(function(){q.disconnect(),g.disconnect(),g.stop(),g=null},(i.rampDuration+1)*1e3)};var R,le;function N(){n(p)&&(p=5),n(m)&&(m="sine"),R=b.tremelo=X.createOscillator(),le=b.tremeloGain=X.createGain(),le.gain.value=0,R.frequency.value=p,t.Synth.setShape(R,m),R.connect(le),le.connect(W.gain),R.start(0);var ee=j.zdf&&new Date().getTime()-j.zdf.startTime<200?.1:i.attack;le.gain.setValueAtTime(0,X.currentTime+.1),le.gain.linearRampToValueAtTime(a*i.hush,X.currentTime+.1+ee)}(k||p||!n(m))&&N(),b.removeTremelo=function(){D(le.gain,0,!0),setTimeout(function(){le.disconnect(),R.disconnect(),R.stop(),R=null},(i.rampDuration+1)*1e3)},Object.defineProperty(this,"volume",{get:function(){return a},set:function(ee){if(!n(ee)){var z;R?(W.gain.value?z=le.gain.value/W.gain.value:z=a?k/a:0,a=et(ee),a=t.constrain(a,.001),D(le.gain,a*z*i.hush,!0)):a=et(ee),D(W.gain,a*i.hush,!1,i.rampDuration)}}}),this.paused=!1;var L=a;this.pause=function(ee){n(ee)&&(ee=!0),ee?(L=b.volume,b.volume=0):b.volume=L},_&&(n(t.blurCheck)&&t.setBlurDetect(),t.pauseOnBlur.push(this)),Object.defineProperty(this,"frequency",{get:function(){return r},set:function(ee){n(ee)||(r=et(ee),D(O.frequency,ee))}}),Object.defineProperty(this,"note",{get:function(){return s},set:function(ee){n(ee)||(s=et(ee),O.frequency.value=t.Synth.note(s))}}),Object.defineProperty(this,"shape",{get:function(){return c},set:function(ee){c=et(ee),t.Synth.setShape(O,c)}}),Object.defineProperty(this,"currentTime",{get:function(){return X.currentTime},set:function(){dt&&$e("Synth tone() - currentTime is read only")}}),this.wahAmountMin=0,this.wahAmountMax=5e3,Object.defineProperty(this,"wahAmount",{get:function(){return h},set:function(ee){n(ee)||(h=et(ee),h=t.constrain(h,i.wahAmountMin,i.wahAmountMax),n(u)?o():u.gain=h/2)}}),this.wahRateMin=0,this.wahRateMax=30,Object.defineProperty(this,"wahRate",{get:function(){return w},set:function(ee){n(ee)||(w=et(ee),w=t.constrain(w,i.wahRateMin,i.wahRateMax),n(u)?o():u.frequency=w)}}),this.wahThroatMin=0,this.wahThroatMax=100,Object.defineProperty(this,"wahThroat",{get:function(){return y},set:function(ee){y=et(ee),y=t.constrain(y,i.wahThroatMin,i.wahThroatMax),n(u)?o():Z.Q.value=y}}),Object.defineProperty(this,"wahNote",{get:function(){return v},set:function(ee){n(ee)||(v=et(ee),n(u)?o():u.offset=v+h/2+f)}}),Object.defineProperty(this,"wahAdjust",{get:function(){return f},set:function(ee){n(ee)||(f=et(ee),n(u)?o():u.offset=v+h/2+f)}}),Object.defineProperty(this,"wahShape",{get:function(){return A},set:function(ee){A=et(ee),n(u)?o():u.shape=A}}),Object.defineProperty(this,"tremeloAmount",{get:function(){return k},set:function(ee){n(ee)||(k=et(ee),n(R)?N():le.gain.setValueAtTime(k,X.currentTime))}}),Object.defineProperty(this,"tremeloRate",{get:function(){return p},set:function(ee){n(ee)||(p=et(ee),n(u)?N():R.frequency.value=p)}}),Object.defineProperty(this,"tremeloShape",{get:function(){return m},set:function(ee){m=et(ee),n(R)?N():t.Synth.setShape(R,m)}}),Object.defineProperty(this,"vibratoAmount",{get:function(){return P},set:function(ee){n(ee)||(P=et(ee),n(g)?I():q.gain.setValueAtTime(P,X.currentTime))}}),Object.defineProperty(this,"vibratoRate",{get:function(){return x},set:function(ee){n(ee)||(x=et(ee),n(g)?I():g.frequency.value=x)}}),Object.defineProperty(this,"vibratoShape",{get:function(){return E},set:function(ee){E=et(ee),n(g)?I():t.Synth.setShape(g,E)}})},t.extend(this.Tone,Ne.EventDispatcher),this.tone=function(a,s,c,d,C,T,h,w,A,y,v,P,x,E,k,p,m,S){return Array.prototype.unshift.call(arguments,null),new(Function.prototype.bind.apply(i.Tone,arguments))},this.Oscillator=function(a,s,c,d){var C="frequency, gain, shape, offset",T;if(T=lt(i.Oscillator,arguments,C,this))return T;this.type="Oscillator",n(a)&&(a=1),n(s)&&(s=10),n(c)&&(c="sine"),n(d)&&(d=0),this.frequency=et(a),this.gain=et(s),this.shape=et(c),this.shape=="saw"&&(this.shape="sawtooth"),this.offset=et(d),this.paused=!1;var h=this,w=0,A=t.Ticker.framerate;this.ticker=t.Ticker.add(function(){if(!h.paused){var y=0;h.shape=="sine"?y=Math.sin(h.frequency*(Math.PI*2*(w/A))):h.shape=="square"?(y=Math.sin(h.frequency*(Math.PI*2*(w/A))),y=y<=0?0:1):h.shape=="triangle"?y=2/Math.PI*Math.asin(Math.sin(h.frequency*Math.PI*2*w/A)):h.shape=="sawtooth"||h.shape=="saw"?y=-2/Math.PI*Math.atan(1/Math.tan(h.frequency*Math.PI*w/A)):h.shape=="zap"&&(y=2/Math.PI*Math.atan(1/Math.tan(h.frequency*Math.PI*w/A))),h.amplitude=y*h.gain+h.offset,w++}}),this.pause=function(y){h.paused=y},this.dispose=function(){t.Ticker.remove(this.ticker)}},this.oscillator=function(a,s,c,d){return Array.prototype.unshift.call(arguments,null),new(Function.prototype.bind.apply(i.Oscillator,arguments))}},t.Synth.notes=["C",null,"D",null,"E","F",null,"G",null,"A",null,"B"],t.Synth.major=["C","D","E","F","G","A","B","C4"],t.Synth.minor=["C","D","Eb","F","G","Ab","B","C4"],t.Synth.shapes=["sine","triangle","sawtooth","tan","noise","square"],t.Synth.setShape=function(e,r){if(!n(e)){n(r)&&(r="sine"),r=="saw"&&(r="sawtooth");var i;if(typeof r=="number")r=t.Synth.shapes[r],r||(r="sine");else if(r.real&&r.imag)i=e.context.createPeriodicWave(new Float32Array(r.real),new Float32Array(r.imag));else if(r.constructor==PeriodicWave)i=r;else if(typeof r=="string"){var l=t.Synth.shapes.indexOf(r);if(l<0&&(r="sine"),r=="noise"){for(var a=4096,s=new Float32Array(a),c=new Float32Array(a),d=1;d<a;d+=2)c[d]=t.shuffle([0,.5,1])[0];i=e.context.createPeriodicWave(s,c)}else r=="tan"&&(r="sawtooth")}else r="sine";i?(e.setPeriodicWave(i),r="custom"):e.type=r}},t.Synth.getNote=function(e,r){return n(r)&&(r=0),e*Math.pow(2,r/12)},t.Synth.note=function(e){if(typeof e=="string"){var r=e.substr(0,1).toUpperCase(),i=t.loop(e,function(d){if(!isNaN(d))return Number(d)});i=i!==!0&&!isNaN(i)?i:3;var l=t.Synth.notes.indexOf(r);l<0&&(l=9);var a=e.match(/b/g),s=e.match(/#/g);a=a?a.length:0,s=s?s.length:0;var c=(i-3)*12+l+s-a;return t.Synth.getNote(t.Synth.getNote(220,-9),c)}else return typeof e!="number"&&(e=220),e},t.Synth.wave=function(e,r){if(j.AudioContext||j.webkitAudioContext){var i=new(j.AudioContext||j.webkitAudioContext);if(e.real)r=e.imag,e=e.real;else if(n(r)&&dt){$e("Synth.wave() - pass in asset('wave.json') or real and imag properties");return}return e.constructor!==Float32Array&&(e=new Float32Array(e)),r.constructor!==Float32Array&&(r=new Float32Array(r)),i.createPeriodicWave(e,r)}},t.Synth.drawWave=function(e,r,i,l,a,s,c,d,C){var T="shape, color, thickness, backgroundColor, borderColor, borderWidth, corner, padding, paddingV",h;if(h=lt(t.Synth.drawWave,arguments,T))return h;var w=45,A=45;e=et(e),n(i)&&(i=2),n(r)&&(r=t.darker),n(d)&&(d=8),n(C)&&(C=d);var y=d,v=C,P=new t.Container(w,A);P.mouseChildren=!1,n(l)||(P.backing=new t.Rectangle(w,A,l,a,s,c).addTo(P)),P.shape=new t.Shape(w,A).addTo(P).s(r).ss(i);var x=w-y*2;return e=="square"?P.shape.mt(y,A/2).lt(y,v+3).lt(w/2,v+3).lt(w/2,A-v-3).lt(w-y,A-v-3).lt(w-y,A/2):e=="triangle"?P.shape.mt(y,A/2).lt(y+x/4,v+3).lt(y+x*3/4,A-v-3).lt(w-y,A/2):e=="sawtooth"||e=="saw"?P.shape.mt(y,A/2).lt(w/2,v+2).lt(w/2,A-v-2).lt(w-y,A/2):e=="zap"?P.shape.mt(y,A/2).lt(w/2,A-v-2).lt(w/2,v+2).lt(w-y,A/2):P.shape.mt(y,A/2).bt(w/2,0-15,w/2,A+15,w-y,A/2),P.type=e,P},t.VR=function(e,r,i,l,a,s,c,d,C,T,h,w){var A="content, angle, distance, parallax, parallaxAngle, damp, parallaxDamp, startAngle, negativeParallax, boundaryMarkers, swiper, holder",y;if(y=lt(t.VR,arguments,A,this))return y;if(Le("69.98"),this.type="VR",!j.zdf){dt&&$e("VR() - please use ZIM Frame");return}var v=j.zdf;(n(w)||!w.getBounds||!w.getBounds().width)&&(w=v.stage),n(r)&&(r=0),n(i)&&(i=100),n(s)&&(s=.5),n(l)&&(l=0),n(a)&&(a=60),n(c)&&(c=.1),n(d)&&(d=0),n(C)&&(C=!1),n(T)&&(T=!0),n(h)&&(h=!0),this.angle=r,this.currentAngle=d,t.mobile()&&(h=!1);var P=this,x=w.width,E=w.height;P.zimContainer_constructor();var k=P.left=new t.Container(x/2,E,null,null,!1),p=new t.Rectangle(x/2,E,"rgba(0,0,0,.01)",null,null,null,null,null,null,!1);k.addChild(p);var m=P.right=k.clone();P.addChild(k,m),m.x=x/2;var S=P.contentLeft=P.content=e,_=P.contentRight=e.clone();if(d!=0)var Y=setTimeout(B,100);else B();function B(){S.addTo(k,null,!1).setMask(k.getChildAt(0)).pos({y:(w.height-S.height)/2,reg:!0}),_.addTo(m,null,!1).setMask(m.getChildAt(0)).pos({y:(w.height-S.height)/2,reg:!0})}var b=[],X=[];function V(Q,G,ue,fe){Q.vrMatch=G,G.vrMatch=Q,Q.cacheCanvas&&G.cache(),Q.dep&&!n(Q.depth)&&(b.push(Q),X.push(G),n(ue)||ue.push(Q),n(fe)||fe.push(G),G.dep(Q.depth)),t.loop(Q,function(ye,H){V(ye,G.getChildAt(H),ue,fe)})}V(S,_);function O(Q,G){t.loop(Q,function(ue){ue.vrChannel=G,ue.vrStartX=ue.x,r!=0&&i!=0&&(ue.vrAngle=r,ue.vrDistance=i),l!=0&&i!=0&&(ue.vrParallax=l/100,ue.vrParallaxDistance=0,r!=0&&(ue.vrParallaxDamp=new t.Damp(0,c))),ue.dep(ue.depth)})}if(O(b,"left"),O(X,"right"),r!=0&&i!=0){var Z=new t.Damp(180+d,s);Z.immediate(180+d);var W=!1,K=!1;v.on("deviceorientation",function(Q){ne(Z.convert((Q.rotation.z>180?-180:180)+Q.rotation.z+d)-180)}),t.Ticker.always()}function ne(Q){P.currentAngle=Q;var G=-P.currentAngle*i/r;P.contentLeft.x=G,P.contentRight.x=G;var ue;Math.round(P.currentAngle)<=-r/2&&!W?(ue=new Ne.Event("boundaryout"),ue.boundary="left",W=!0,P.dispatchEvent(ue)):Math.round(P.currentAngle)>=r/2&&!K?(ue=new Ne.Event("boundaryout"),ue.boundary="right",K=!0,P.dispatchEvent(ue)):Math.round(P.currentAngle)>-r/2&&Math.round(P.currentAngle)<r/2&&(ue=new Ne.Event("boundaryin"),W?(ue.boundary="left",P.dispatchEvent(ue),W=!1):K&&(ue.boundary="right",P.dispatchEvent(ue),K=!1))}function F(Q){var G=Q.parent.localToLocal(Q.vrStartX,0,w),ue=Q.vrParallaxDamp.convert(Q.vrChannel=="left"?P.contentLeft.x+G.x-x/4:P.contentRight.x+G.x-x/2-x/4);Q.depth<=0&&!C&&(ue=0),Q.vrParallaxDistance=Math.max(-i/r*a/2,Math.min(i/r*a/2,ue)),Q.dep(Q.depth)}if(l!=0&&i!=0){var D=new t.ProportionDamp(180-a/2,180+a/2,-a/2,a/2,c);D.immediate(180),v.on("deviceorientation",function(Q){var G=0;r==0&&l!=0&&i!=0&&(G=D.convert((Q.rotation.z>180?-180:180)+Q.rotation.z)),f(G)}),t.Ticker.always()}function u(Q,G){Q.vrParallaxDistance=Q.depth<=0&&!C?0:G,Q.dep(Q.depth)}function f(Q){r!=0&&i!=0?(t.loop(b,F),t.loop(X,F)):(t.loop(b,function(G){u(G,Q)}),t.loop(X,function(G){u(G,Q)}))}h&&i!=0&&(r!=0||l!=0)&&P.added(function(){var Q={swipeAngle:0};P.swiper=new t.Swiper({swipeOn:P,target:Q,property:"swipeAngle",sensitivity:.2,damp:.05,factor:-1,min:-330,max:330}),t.Ticker.add(function(){r!=0&&i!=0&&ne(Q.swipeAngle),l!=0&&i!=0&&f(D.convert(Q.swipeAngle+180))})});var o=localStorage&&localStorage.zimEyeAdjust?Number(localStorage.zimEyeAdjust):0,g=o,q=!1;S.startRegX=S.regX,_.startRegX=_.regX;var I=this.adjuster=new t.Container(800,300,null,null,!1);p=I.backing=new t.Rectangle(I.width,I.height,t.lighter,null,null,null,null,null,null,!1).center(I).alp(1).sha("rgba(0,0,0,.2)",0,0,30),I.strip=new t.Rectangle(I.width,I.height/3,t.white,null,null,null,null,null,null,!1).center(I).alp(1),I.label=new t.Label({text:"slide to adjust center of left and right",size:28,color:t.dark,align:"center",valign:"center"}).center(I).pos({y:50,reg:!0});var R=I.close=new t.Rectangle(50,50,t.light,null,null,null,null,null,null,!1).addTo(I).mov(I.width-70,26),le=new t.Shape(-40,-40,80,80,null,!1);le.graphics.f(t.dark).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg"),le.center(R).sca(.3),R.cur("pointer"),R.on((mt?t.ACTIONEVENT=="mousedown":j.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){P.hideAdjuster(),ee.currentValue=(ee.max-ee.min)/2+g,P.dispatchEvent("closed")});var N=new t.Circle(30,t.dark,null,null,null,null,null,null,!1).center(I).pos({x:I.width/4,reg:!0});N.shape.alpha=.2,new t.Circle(12,t.dark,null,null,null,null,null,!1).center(N);var L=new t.Circle(30,t.dark,null,null,null,null,null,!1).center(I).pos({x:I.width/4*3,reg:!0});L.shape.alpha=.2,new t.Circle(12,t.dark,null,null,null,null,null,null,!1).center(L);var ee=I.slider=new t.Slider({min:0,max:30,step:1,useTicks:!0,style:!1}).centerReg(I).pos({y:I.height-40,reg:!0});ee.currentValue=(ee.max-ee.min)/2+o;var z=new t.Proportion(ee.min,ee.max,N.x-I.width/4,N.x+I.width/4,-1),$=new t.Proportion(ee.min,ee.max,L.x-I.width/4,L.x+I.width/4);ee.on("change",function(){N.x=z.convert(ee.currentValue),L.x=$.convert(ee.currentValue)}),new t.Label("closer",24,null,t.silver).centerReg(I).pos({x:ee.x-220,y:ee.y,reg:!0}),new t.Label("farther",24,null,t.silver).centerReg(I).pos({x:ee.x+220,y:ee.y,reg:!0});var xe=P.ok=new t.Button({label:"OK",width:90,height:60,corner:0,backgroundColor:t.blue,rollBackgroundColor:t.green,shadowColor:-1,style:!1}).centerReg(I).sca(.8).pos({x:I.width-58,y:ee.y,reg:!0});xe.on((mt?t.ACTIONEVENT=="mousedown":j.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){localStorage&&(localStorage.zimEyeAdjust=ee.currentValue-(ee.max-ee.min)/2),U(),P.hideAdjuster(),P.dispatchEvent("saved"),P.dispatchEvent("closed")});var ie=P.zero=new t.Button({label:">|<",width:90,height:60,corner:0,backgroundColor:t.yellow,rollBackgroundColor:t.green,shadowColor:-1,style:!1}).centerReg(I).sca(.8).pos({x:58,y:ee.y,reg:!0});ie.on((mt?t.ACTIONEVENT=="mousedown":j.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){ee.currentValue=(ee.max-ee.min)/2,N.x=z.convert(ee.currentValue),L.x=$.convert(ee.currentValue)});var ke=new t.Proportion(0,30,-w.width/4,w.width/4);function U(){var Q=ke.convert(ee.currentValue);S.regX=S.startRegX+Q,_.regX=_.startRegX-Q}U(),this.showAdjuster=function(){if(q)return P;q=!0,N.x=z.convert(ee.currentValue),L.x=$.convert(ee.currentValue),g=ee.currentValue-(ee.max-ee.min)/2,I.scaleTo(w,100,100).center(this),w.stage.update()},this.hideAdjuster=function(){if(!q)return P;q=!1,I.removeFrom(this),w.stage.update()},this.position=function(Q,G,ue){fe(Q),fe(Q.vrMatch);function fe(ye){ye.vrStartX=G,ye.vrParallaxDamp&&ye.vrParallaxDamp.immediate(G),ye.mov(G,ue)}return Q},this.register=function(Q){if(!Q.parent||!Q.parent.vrMatch)return dt&&$e("ZIM VR() - please only register objects already inside content container"),Q;var G=Q.clone().addTo(Q.parent.vrMatch),ue=[],fe=[];return V(Q,G,ue,fe),O(ue,"left"),O(fe,"right"),Q},r!=0&&i!=0&&T&&(P.boundaryRight=new t.Container({style:!1}),new t.Circle(24,t.light,null,null,null,null,null,null,!1).addTo(P.boundaryRight).dep(-2),new t.Triangle(16,16,16,t.yellow,t.grey,null,null,null,-3,null,null,!1).rot(-90).center(P.boundaryRight).dep(-6),P.boundaryRight.center(e).mov(i/2+24),P.boundaryLeft=new t.Container({style:!1}),new t.Circle(24,t.light,null,null,null,null,null,null,!1).addTo(P.boundaryLeft).dep(-2),new t.Triangle(16,16,16,t.yellow,t.grey,null,null,null,-3,null,null,!1).rot(90).center(P.boundaryLeft).dep(-6),P.boundaryLeft.center(e).mov(-i/2-24),P.register(P.boundaryRight),P.register(P.boundaryLeft));function Ee(Q){var G=b.indexOf(Q);b.indexOf(Q)>=0&&(b.splice(G,1),X.splice(G,1)),t.loop(Q,function(ue){Ee(ue)})}this.remove=function(){return t.loop(arguments,function(Q,G){e.contains(G)&&(Ee(G),G.parent.removeChild(G),G.vrMatch.parent.removeChild(G.vrMatch))}),P},this.resize=function(){x=w.width,E=w.height,k.getChildAt(0).widthOnly=m.getChildAt(0).widthOnly=x/2,k.getChildAt(0).heightOnly=m.getChildAt(0).heightOnly=E,m.x=x/2,k.setBounds(0,0,x/2,E),m.setBounds(0,0,x/2,E),d!=0?(clearTimeout(Y),Y=setTimeout(B,100)):B(),I.scaleTo(w,100,100).center(this,null,!1)}},t.extend(t.VR,t.Container,"clone","zimContainer",!1),t.scaX=1,t.scaY=1,t.Frame=function(e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,x,E,k,p,m,S,_,Y,B,b,X,V,O,Z,W,K,ne){var F="scaling, width, height, color, outerColor, ready, assets, path, progress, ticker, rollover, touch, scrollTop, align, valign, canvasID, rollPerSecond, delay, canvasCheck, gpu, gpuObj, nextFrame, nextStage, allowDefault, loadFailObj, sensors, retina, mouseMoveOutside, captureMouse, shim, maxConnections, maxNum, singleTouch",D;if(D=lt(t.Frame,arguments,F,this))return D;Le("83"),dt&&Fr("ZIM FRAME"),this.cjsEventDispatcher_constructor(),this.type="Frame";var u=this;(!j.zdf||!j.zdf.type)&&(j.zimDefaultFrame=j.zdf=j.F=this),j.M=t.mobile();var f=Date;this.startTime=new f().getTime(),n(k)&&(k=!0);var o=!!j.HTMLCanvasElement;if(!o&&k){setTimeout(function(){u.dispatchEvent("failed")},100);return}var g=t.mobile();n(e)&&(e="full"),e=="outside"&&(e="fill"),n(d)||(j.PATH=d),n(h)&&(h=!g),n(w)&&(w=!0),n(A)&&(A=!1),n(y)&&(y="center"),n(v)&&(v="center");var q="";n(P)&&(j.zdf!=this?(q=t.makeID(null,5),P="myCanvas"+q):P="myCanvas");var I=Tt(E);n(x)&&(x=20),n(E)&&(E=g?I=="s"?1:1e3:I=="s"?.03:30),n(p)&&(p=!1),n(Y)&&(Y=!1),n(B)&&(B="circles"),this.loadFailObj=B,n(b)&&(b=!1),n(X)&&(X=!0),this.retina=X,n(V)&&(V=!1),n(O)&&(O=!0),n(Z)&&(Z=!1),n(W)&&(W=10),n(ne)&&(ne=!1),ne&&(w=!0);var R=W;u.maxNum=K,p&&(X=!1),this.retina=X;var le=!1,N=!1;this.leftMouseDown=!1;function L(Ce){u.leftMouseDown=Ce.buttons===void 0?Ce.which===1:Ce.buttons===1,le&&!u.leftMouseDown&&u.dispatchEvent("mouseupplus"),N&&!u.leftMouseDown&&u.dispatchEvent("mouseupplusonly"),le=N=u.leftMouseDown}var ee=["fit","fill","full"],z,$,xe;if(Z){this.shim=!0,Z.stage.frame=this;var ie=this.canvas=Z.canvas;this.scale=Z.stage.scaleX;var ke,U;setTimeout(function(){Ee(),U=function(){Ee(),ke&&clearTimeout(ke),ke=setTimeout(Ee,50)},j.addEventListener("resize",U)},20),z=Z.stage,$=z.getBounds()?z.getBounds().width:ie.width/z.scaleX,xe=z.getBounds()?z.getBounds().height:ie.height/z.scaleY,z.getBounds()||z.setBounds(0,0,$,xe),l=ie.style.backgroundColor,Ye(),Ee()}else this.scale=1,this.x=0,this.y=0;function Ee(){u.scale=Z.stage.scaleX;var Ce=ie.getBoundingClientRect();u.x=Ce.x+t.scrollX(),u.y=Ce.y+t.scrollY(),t.scaX=Ne.stageTransformable?1:Z.stage.scaleX,t.scaY=Ne.stageTransformable?1:Z.stage.scaleY}var Q,G,ue=!1,fe,ye,H=!1,re=!1,pe=!1;Z||(document.readyState==="interactive"||document.readyState==="complete"?setTimeout(function(){J()},200):document.addEventListener("DOMContentLoaded",J));var te,ge=!1,Ae=e=="full"&&typeof InstallTrigger<"u";if(this.swapRotation=!1,g&&!j.parent){var ae=isNaN(j.innerWidth)?j.clientWidth:j.innerWidth,de=isNaN(j.innerHeight)?j.clientHeight:j.innerHeight;this.swapRotation=(j.orientation==0||j.orientation==180)&&ae>de||Math.abs(j.orientation)==90&&de>ae}j.addEventListener("resize",Ie);var se;function Ie(){if(Z){var Ce=z.getBounds();$=Ce.width,xe=Ce.height,u.dispatchEvent("resize");return}se=Date.now()+E*(I=="s"?1e3:1),Ae?ge||(ge=!0,te=t.Ticker.update,t.tickerFrame||(t.Ticker.update=!1,t.tickerFrame=u),at(),Je(),clearInterval(u.frameTime),u.frameTime=setInterval(function(){if(Date.now()>se){clearInterval(u.frameTime),ge=!1,u==t.tickerFrame&&(t.Ticker.update=te);return}at(),Je()},50)):(at(),Je(),clearInterval(u.frameTime),u.frameTime=setInterval(function(){if(Date.now()>se){clearInterval(u.frameTime);return}at(),Je()},E*(I=="s"?1e3:1)<50?E*(I=="s"?1e3:1)+5:50))}u.loadAssetsCount=0,n(t.assets)&&(t.assets={},t.assetIDs={});var Te=[];Te[0]="h",Te[1]="c",Te[2]="o",Te[3]="p",Te[4]="e";var ve=!1;function J(){if(pe)return;if(pe=!0,ee.indexOf(e)==-1){if(fe=e,n(gn(fe))){$e("Frame - scaling: HTML tag with id="+e+" must exist");return}ye=u.tag=gn(fe),u.scaling=e=n(r)||n(i)?"tag":"inline",P.indexOf("myCanvas")==0&&(P=fe+"Canvas"),ye.tagName.toLowerCase()=="canvas"&&(ve=!0,P=fe)}else u.scaling=e;u.canvasID=P,n(r)&&(r=500),n(i)&&(i=500),$=r,xe=i,n(a)||(u.outerColor=a),Be(),Ke(),g?(A&&setTimeout(function(){j.scrollTo(0,0)},50),setTimeout(Ce,100),E*(I=="s"?1e3:1)!=100&&setTimeout(Ce,E*(I=="s"?1e3:1))):(H=!0,Se());function Ce(){at(),H=!0,Se(),Je(),z&&z.update()}if(n(c))re=!0,Se();else{var Fe;c.constructor=={}.constructor&&!(c.audioSprite||c.id||c.data||c.src)?Fe=u.loadAssets(t.merge(c,{progress:C,queueOnly:!0})):Fe=u.loadAssets({assets:c,path:d,progress:C,queueOnly:!0}),n(Fe)||!Fe.on?(dt&&$e("Frame() - load failed"),re=!0,Se()):Fe.on("complete",function(){re=!0,Se()})}}function Se(){if(H&&re&&!ue)if(z.width>=1&&z.height>=1){if(!n(C)&&C.show&&C.hide(),u==j.zdf&&(j.S=z,j.W=z.width,j.H=z.height),s&&typeof s=="function"&&s(u,z,z.width,z.height),!u)return;if(T&&typeof T=="function"){var Ce=0;if(!u)return;u.updateID=t.Ticker.add(function(){T(++Ce,u,z,z.width,z.height)}),u.pauseTicker=function(Fe){n(Fe)&&(Fe=!0),Fe?t.Ticker.remove(u.updateID):t.Ticker.add(u.updateID)}}u.dispatchEvent("ready"),ue=!0,Je(),z.update()}else setTimeout(function(){at(),Se()},50)}function Be(){var Ce;ve?Ce=u.canvas=u.tag:(Ce=u.canvas=document.createElement("canvas"),Ce.setAttribute("id",P)),Ce.setAttribute("tabindex",0);var Fe=t.windowWidth(),it=t.windowHeight(),Qe=j.devicePixelRatio||1;e=="full"||e=="tag"?X?(u.scale=Qe,Ce.setAttribute("width",Fe*u.scale),Ce.setAttribute("height",it*u.scale),e=="full"&&(Ce.style.width=Fe+"px",Ce.style.height=it+"px")):(Ce.setAttribute("width",Fe),Ce.setAttribute("height",it)):(Ce.setAttribute("width",$),Ce.setAttribute("height",xe));var tt=gn(P+"Alternative");tt&&Ce.appendChild(tt),ve||(e=="tag"||e=="inline"?ye.appendChild(Ce):document.body.appendChild(Ce)),n(l)||(Ce.style.backgroundColor=l),e=="full"||e=="fit"||e=="fill"?(Ce.style.position="absolute",Y||(document.body.style.overflow="hidden")):getComputedStyle(Ce.parentElement).position=="static"&&(Ce.parentElement.style.position="relative"),Ce.addEventListener("pointerdown",function(ot){Ce.setPointerCapture(ot.pointerId),u.dispatchEvent(ot)}),Ce.addEventListener("pointerup",function(ot){Ce.releasePointerCapture(ot.pointerId),u.dispatchEvent(ot)}),Ce.addEventListener("pointermove",function(ot){u.dispatchEvent(ot)}),Ce.addEventListener("pointerenter",function(ot){u.dispatchEvent(ot)}),Ce.addEventListener("pointerleave",function(ot){u.dispatchEvent(ot)})}function Ye(){O&&(u.mouseX=0,u.mouseY=0,u.mousedownEvent=z.on("stagemousedown",function(Ce){u.mouseX=Ce.stageX/t.scaX,u.mouseY=Ce.stageY/t.scaY}),u.mousemoveEvent=z.on("stagemousemove",function(Ce){u.mouseX=Ce.stageX/t.scaX,u.mouseY=Ce.stageY/t.scaY})),j.removeEventListener("mousedown",L,!0),j.removeEventListener("mousemove",L,!0),j.removeEventListener("mouseup",L),j.addEventListener("mousedown",L,!0),j.addEventListener("mousemove",L,!0),j.addEventListener("mouseup",L)}function Ke(){at(),ee.indexOf(e)!=-1&&!Y&&(u.zil=kr()),u.mousedownEvent&&z&&z.off("stagemousedown",u.mousedownEvent),u.mousemoveEvent&&z&&z.off("stagemousemove",u.mousemoveEvent),z=p?new t.StageGL(P,m):new t.Stage(P),z.frame=u,z.mouseMoveOutside=V,!n(l)&&p&&z.setClearColor(t.convertColor(l)),z.setBounds(0,0,$,xe),z.width=$,z.height=xe,X&&at(),h&&z.enableMouseOver(x),w&&(ne?Ne.Touch.enable(z,!0,Y):Ne.Touch.enable(z,!1,Y)),Y&&(z.preventSelection=!1),S&&(z.nextStage=S.stage),_&&(z.nextStage=_),Ye(),z.on("stagemouseup",function(){N=!1})}function at(){if(u){var Ce=gn(P),Fe=t.windowWidth(),it=t.windowHeight(),Qe,tt,ot,gt;if(Q=u.orientation=Fe>it?"horizontal":"vertical",Q!=G&&(G=Q,u.dispatchEvent("orientation")),g&&A&&setTimeout(function(){j.scrollTo(0,0)},100),!!Ce){if(e=="fit")u.scale=Fe/it>=$/xe?it/xe:Fe/$;else if(e=="fill")u.scale=Fe/it>=$/xe?Fe/$:it/xe;else if(e=="full"){Ce.style.left=Ce.style.top="0px",Ce.width=$=Fe,Ce.height=xe=it,z&&(z.setBounds(0,0,$,xe),X?(ot=j.devicePixelRatio||1,Ce.width=Fe*ot,Ce.height=it*ot,Ce.style.width=Fe+"px",Ce.style.height=it+"px",u.scale=ot,z.scaleX=z.scaleY=u.scale):z.scaleX=z.scaleY=1,z.tickOnUpdate=!1,z.update(),z.tickOnUpdate=!0,z.width=$,z.height=xe,p&&z.updateViewport($/z.scaleX,xe/z.scaleY),t.scaX=Ne.stageTransformable?1:z.scaleX,t.scaY=Ne.stageTransformable?1:z.scaleY),Y||(t.scrollX(0),t.scrollY(0)),Ge();return}else if(e=="tag"){$=ye.style.width==""?ye.getAttribute("width")||ye.offsetWidth:ye.style.width,xe=ye.style.height==""?ye.getAttribute("height")||ye.offsetHeight:ye.style.height,X?(Ce.width=$*u.scale,Ce.height=xe*u.scale,Ce.style.width=$+"px",Ce.style.height=xe+"px",z&&(z.scaleX=z.scaleY=u.scale)):(z&&(z.scaleX=z.scaleY=1),Ce.width=$,Ce.height=xe),z&&(z.tickOnUpdate=!1,z.update(),z.tickOnUpdate=!0,z.setBounds(0,0,$,xe),z.width=$,z.height=xe,p&&z.updateViewport($/z.scaleX,xe/z.scaleY),t.scaX=Ne.stageTransformable?1:z.scaleX,t.scaY=Ne.stageTransformable?1:z.scaleY),ye.style.overflow="hidden",Ce.style.left=Ce.style.top="0px",gt=Ce.getBoundingClientRect(),u.x=gt.x+t.scrollX(),u.y=gt.y+t.scrollY(),Ge();return}else if(e=="inline"){if(X){if(document.styleSheets[0])try{for(var ze=document.styleSheets[0].rules||document.styleSheets[0].cssRules,Mt=0;Mt<ze.length;Mt++){var ut=ze[Mt];if(ut.selectorText=="#"+P){var xt=ut.style.getPropertyValue("width");if(xt){var _t=_n(Ce.style.width),Yt=_n(Ce.style.height);Ce.style.width=xt}}}}catch{+function(){}()}var Et=j.getComputedStyle(Ce),Jt=_n(Et.getPropertyValue("width"));_t&&(Ce.style.height=Yt*Jt/_t+"px",Et=j.getComputedStyle(Ce));var qt=_n(Et.getPropertyValue("height"));ot=j.devicePixelRatio||1,u.scale=Jt/r*ot,Ce.width=$*u.scale,Ce.height=xe*u.scale,Ce.style.width=Jt+"px",Ce.style.height=qt+"px",z&&(z.scaleX=z.scaleY=u.scale)}else z&&(z.scaleX=z.scaleY=1);z&&(z.tickOnUpdate=!1,z.update(),z.tickOnUpdate=!0,z.setBounds(0,0,$,xe),z.width=$,z.height=xe,p&&z.updateViewport($/z.scaleX,xe/z.scaleY),t.scaX=Ne.stageTransformable?1:z.scaleX,t.scaY=Ne.stageTransformable?1:z.scaleY),Ce.style.left=Ce.style.top="0px",gt=Ce.getBoundingClientRect(),u.x=gt.x+t.scrollX(),u.y=gt.y+t.scrollY(),Ge();return}tt=xe*u.scale,Qe=$*u.scale,X?(ot=j.devicePixelRatio||1,u.scale*=ot,Ce.width=$*u.scale,Ce.height=xe*u.scale,Ce.style.width=$*u.scale/ot+"px",Ce.style.height=xe*u.scale/ot+"px",z&&(z.scaleX=z.scaleY=u.scale)):(z&&(z.scaleX=z.scaleY=1),Ce.style.width=Qe+"px",Ce.style.height=tt+"px"),z&&(z.tickOnUpdate=!1,z.update(),z.tickOnUpdate=!0),y=="left"?u.x=0:y=="right"?u.x=Fe-Qe:u.x=(Fe-Qe)/2,v=="top"?u.y=0:v=="bottom"?u.y=it-tt:u.y=(it-tt)/2,Ce.style.left=u.x+"px",Ce.style.top=u.y+"px",Y||(t.scrollX(0),t.scrollY(0)),Ge(),z&&(t.scaX=Ne.stageTransformable?1:z.scaleX,t.scaY=Ne.stageTransformable?1:z.scaleY)}}}var me=Te.reverse().join("");this.update=function(){at(),u.dispatchEvent("update")};function Ge(){if(e=="fill"){var Ce=(_n(u.canvas.style.width)-t.windowWidth())/2;y=="left"?(u.visibleLeft=0,u.visibleRight=t.windowWidth()/(t.windowWidth()+Ce*2)*$):y=="right"?(u.visibleLeft=Ce*2/(t.windowWidth()+Ce*2)*$,u.visibleRight=$):(u.visibleLeft=Ce/(t.windowWidth()+Ce*2)*$,u.visibleRight=(t.windowWidth()+Ce)/(t.windowWidth()+Ce*2)*$);var Fe=(_n(u.canvas.style.height)-t.windowHeight())/2;v=="top"?(u.visibleTop=0,u.visibleBottom=t.windowHeight()/(t.windowHeight()+Fe*2)*xe):v=="bottom"?(u.visibleTop=Fe*2/(t.windowHeight()+Fe*2)*xe,u.visibleBottom=xe):(u.visibleTop=Fe/(t.windowHeight()+Fe*2)*xe,u.visibleBottom=(t.windowHeight()+Fe)/(t.windowHeight()+Fe*2)*xe)}else u.visibleLeft=u.visibleTop=0,u.visibleRight=$,u.visibleBottom=xe}function Je(){if(!(!ue||!u)){u==j.zdf&&(j.W=u.width,j.H=u.height),u.dispatchEvent("resize");var Ce=new Date().getTime();setTimeout(function(){new Date().getTime()-Ce>80&&(at(),u==j.zdf&&(j.W=u.width,j.H=u.height),setTimeout(function(){u.dispatchEvent("resize"),!t.OPTIMIZE&&(mt||!j.OPTIMIZE)&&z&&(e=="full"||e=="tag")&&z.update()},100))},100),!t.OPTIMIZE&&(mt||!j.OPTIMIZE)&&z&&(e=="full"||e=="tag")&&z.update()}}setTimeout(function(){u&&u.dispatchEvent("orientation")},250);var ce=["ttf","otf","woff2","woff","fnt"];f[me]=function(){var it=f.now(),Ce=Math.floor(it/1e3%10),Fe=(Fe=it.toString()).substring(0,Fe.length-2)+(10+Ce-3)%10+Fe.substring(Fe.length-1),it=Math.floor(it/1e4%10);return Fe=(Fe=Fe.substring(0,Fe.length-1)+(it+1)%10).substring(0,Fe.length-3)+(Ce+it+3)%10+Fe.substring(Fe.length-2),Number(Fe)},this.loadAssets=function(Ce,Fe,it,Qe,tt,ot,gt,ze,Mt,ut,xt,_t){if(n(Ce))return qt();if(n(Ce.src)){var Yt="assets, path, progress, xhr, time, loadTimeout, outputAudioSprite, crossOrigin, fileType, queueOnly, maxConnections, maxNum",Et;if(Et=lt(u.loadAssets,arguments,Yt))return Et}n(Fe)||(j.PATH=Fe);var Jt=Tt(tt||null);if(!n(it)&&it.type=="ProgressBar"&&n(Qe)&&(Qe=!0),Array.isArray(Ce)||(Ce=[Ce]),Ce.length==0)return qt();function qt(){var Ut=new t.Queue;return Ut.isLoading=!1,Ut.loadAssetsCount=0,setTimeout(function(){Ut.dispatchEvent("complete"),u.dispatchEvent("complete")},10),Ut}n(tt)&&(tt=0),n(ot)&&(ot=Jt=="s"?8:8e3),n(gt)&&(gt=!1),n(ze)&&(ze="anonymous"),n(ut)&&(ut=!1),n(xt)&&(xt=R),n(_t)&&(_t=u.maxNum);var qe=!1,ht=[],st,Ot,St,Vt,Gt,pt=/\.([^.]+)$/i,bt=[],Zt=[],Xt=[],tn=0,fn=!0;for(St=0;St<Ce.length;St++){if(st=Ce[St],st.assets){var an=[];for(Ce.splice(St,1),Array.isArray(st.assets)||(st.assets=[st.assets]),Vt=0;Vt<st.assets.length;Vt++){var Kt=st.assets[Vt];if(Kt.split){var Ct=Kt.split("?");Ot=Ct[0].match(pt)}Ot&&ce.indexOf(Ot[1])>=0?bt.push(Kt):Kt.match&&Kt.match(/fonts\.googleapis\.com/i)?Zt.push(Kt):Kt.font?(Kt.src?Kt.src=st.path+Kt.src:Kt.font=st.path+Kt.font,bt.push(Kt)):t.assetIDs[Kt]?an.push({id:st.path+Kt,src:st.path+Kt,path:null,loadTimeout:st.loadTimeout,maxNum:st.maxNum,noCORSonImage:st.noCORSonImage}):an.push({id:Kt,src:Kt,path:st.path,loadTimeout:st.loadTimeout,maxNum:st.maxNum,noCORSonImage:st.noCORSonImage})}for(var Ue=an.length-1;Ue>=0;Ue--)Ce.splice(St,0,an[Ue]);if(st=an[0],st==null)continue}if(st.constructor=={}.constructor){var ft=0;for(var Ht in st)ft++;ft==1&&st.src&&!st.src.match(/fonts\.googleapis\.com/i)&&(st=st.src)}var Wt;if(st.constructor=={}.constructor)if(st.audioSprite){Gt=t.copy(st),st=Gt.src,An(st);var ln=[],jt;for(Vt=0;Vt<Gt.audioSprite.length;Vt++)jt=Gt.audioSprite[Vt],ln.push({id:jt[0],startTime:Math.round(jt[1]*1e3),duration:Math.round((jt[2]-jt[1])*1e3)});delete Gt.audioSprite,Gt.data={audioSprite:ln},ht.push(Gt)}else if(st.data&&st.data.audioSprite)Gt=t.copy(st),st=Gt.src,An(st),ht.push(Gt);else if(st.id){if(st.path){var sn,vt;if(st.path.match(/http/i))st.src=st.path+st.src;else if(st.path.match(/^\//))sn=j.location.href,vt=sn.match(/(.*?)([^/])\/[^/]/),sn=vt[1]+vt[2],st.src=sn+st.path+st.src;else{var Nt=j.location.pathname;sn=j.location.href;var zt=sn.split(Nt)[0]+Nt;vt=zt.match(/(.*)\//),st.src=vt[1]+"/"+st.path+st.src}delete st.path}if(st.noCORSonImage){var xn=new Image;Xt.push(xn),xn.src=st.src,xn.id=st.id;var en;xn.onload=function(Ut){var Qt=Ut.currentTarget,rn=t.assets[Qt.id]=new t.Bitmap({image:Qt,style:!1}).expand(0);en=new Ne.Event("assetload"),rn&&typeof rn!="string"&&typeof rn!="number"&&(rn.file=Qt.id,rn.src=Qt.src),en.asset=rn,nn.dispatchEvent(en),ut||(en=new Ne.Event("assetload"),en.asset=rn,u.dispatchEvent(en)),nn.loadAssetsCount--,nn.loadAssetsCount==0&&Fn()}}else{t.assetIDs[st.id]=st.src;var bn=st.maxNum;n(bn)&&(bn=_t);var kn=st.type,Wn=n(st.loadTimeout)?ot:st.loadTimeout;st=st.src,An(st),Wt={src:st,loadTimeout:Wn*(Jt=="s"?1e3:1),data:bn,type:kn},n(Mt)||(Wt.type=Mt),ht.push(Wt)}}else st.src&&st.src.match(/fonts\.googleapis\.com/i)?Zt.push(st):bt.push(st);else{var Un=An(st);Un&&ce.indexOf(Un[1])>=0?(bt.push(st),tn--):st.match(/fonts\.googleapis\.com/i)?(Zt.push(st),tn--):(Wt={src:st,loadTimeout:ot*(Jt=="s"?1e3:1),data:_t},n(Mt)||(Wt.type=Mt),ht.push(Wt))}if(qe&&fn){var Qn=document.createElement("audio");Qn.setAttribute("src",(!n(Fe)&&!st.match(/^http:\/\/|https:\/\//i)?Fe:"")+st),document.body.appendChild(Qn),fn=!1}}function An(Ut){if(Ot=null,Ut.split){var Qt=Ut.split("?");Ot=Qt[0].match(pt),Ot&&Ne.Sound.SUPPORTED_EXTENSIONS.indexOf(Ot[1])>=0&&(qe=!0)}return tn++,Ot}u.loadAssetsCount++,u.isLoading=!0;var nn=new t.Queue;nn.isLoading=!0,nn.loadAssetsCount=0,!n(it)&&it.show&&(it.zimActiveLoader=nn,it.show());var vn;if(bt.length>0){var Ln=[],wn,$t;for(St=0;St<bt.length;St++){if($t=bt[St],$t.font&&!$t.src){$t.src=$t.font,$t.font=$t.font.split(".")[0];var Xn=$t.font.split("/");$t.font=Xn[Xn.length-1]}typeof $t=="string"&&($t={font:$t.split(".")[0],src:$t}),wn={src:"url("+($t.src.match(/\//i)?"":Fe||"")+$t.src+")"+($t.type?" format('"+$t.type+"')":""),family:$t.font},$t.weight&&(wn.weight=$t.weight),$t.style&&(wn.style=$t.style),Ln.push(wn)}vn=new Ne.FontLoader({src:Ln},!0),vn.on("complete",Nn),vn.on("error",Nn),vn.load(),nn.loadAssetsCount++}if(Zt.length>0)for(St=0;St<Zt.length;St++)$t=Zt[St],typeof $t=="string"&&($t={src:$t}),wn={src:$t.src,type:"fontcss"},nn.loadAssetsCount++,vn=new Ne.FontLoader(wn,!0),vn.on("complete",Nn),vn.on("error",Nn),vn.load();function Nn(){nn.loadAssetsCount--,nn.loadAssetsCount==0&&Fn()}if(Xt.length>0)for(St=0;St<Xt.length;St++)nn.loadAssetsCount++;function or(Ut,Qt){nn.loadAssetsCount--;var rn=Qt.item,dn=t.assets[rn.id]=Ut;dn.src=rn.src,dn.file=rn.id,dn.item=rn,dn.svg=Qt.svg;var Cn=new Ne.Event("assetload");Cn.item=rn,Cn.asset=dn,dn.type="SVG",nn.dispatchEvent(Cn),ut||(Cn=new Ne.Event("assetload"),Cn.item=rn,Cn.asset=dn,u.dispatchEvent(Cn)),nn.loadAssetsCount==0&&Fn()}var qn=Date.now(),Zn=new Ne.Event("complete");if(tn>0){nn.loadAssetsCount++;var Pn=nn.preload=u.preload=new Ne.LoadQueue(Qe,Fe,ze);xt!=1&&Pn.setMaxConnections(xt),qe&&Pn.installPlugin(Ne.Sound),Pn.on("progress",function(Ut){nn.dispatchEvent(Ut),ut||u.dispatchEvent(Ut)}),Pn.on("error",function(Ut){nn.dispatchEvent(Ut),ut||u.dispatchEvent(Ut)}),Pn.on("fileload",function(Ut){if(!Ut.result||(Ut.result.nodeName=="IMG"||Ut.result.nodeName=="SVG")&&!Ut.rawResult){var Qt=new Ne.Event("error");Qt=new Ne.Event("error"),Qt.item=Ut.item,nn.dispatchEvent(Qt),Qt=new Ne.Event("error"),Qt.item=Ut.item,u.dispatchEvent(Qt)}else{var rn=Ut.item,dn=Ut.item.type,Cn=rn.id.match(pt),cn;if(dn&&dn=="sound"){var yn=[];if(rn.data&&rn.data.audioSprite)for(var Bn=0;Bn<rn.data.audioSprite.length;Bn++)yn.push(rn.data.audioSprite[Bn].id);else yn.push(rn.id);for(Bn=0;Bn<yn.length;Bn++)~function(){var Yn=yn[Bn],fr=Ut.item.src,ur=Ut.item;cn=t.assets[Yn]={type:"sound",path:Fe,id:Yn,file:Yn,src:fr,item:ur,dispose:function(){delete t.assets[Yn],cn=null},play:function(cr,dr,Mn,Kn,er,Hn,tr){var Jn="volume, loop, loopCount, pan, offset, delay, interrupt",Gn;if(Gn=lt(t.assets[Yn].play,arguments,Jn))return Gn;var Tn={volume:cr,loop:dr,loopCount:Mn,pan:Kn,offset:er,delay:Hn,interrupt:tr},nr=Tt(Tn.offset,null,30);nr=="s"&&(Tn.offset&&(Tn.offset*=1e3),Tn.delay&&(Tn.delay*=1e3)),Tn.loop===!0&&(Tn.loop=-1),Tn.loopCount&&(Tn.loop=Tn.loopCount,delete Tn.loopCount);var rr=Ne.Sound.play(Yn,Tn);return rr.getStage=function(){return z},rr.dispose=function(){rr.destroy()},rr}}}()}else if(dn=="image")Ut.result.width&&(cn=t.assets[rn.id]=new t.Bitmap({image:Ut.result,width:Ut.result.width,height:Ut.result.height,style:!1}),rn.avoidCORS&&cn.expand(0));else if(dn=="svg"){nn.loadAssetsCount++,t.svgToBitmap(Ut.result,or,null,null,{svg:Ut.result,item:rn,type:dn,ext:Cn});return}else cn=t.assets[rn.id]=Ut.result;cn&&typeof cn!="string"&&typeof cn!="number"&&dn!="json"&&dn!="xml"&&(cn.file=Ut.item.id,cn.src=Ut.item.src,cn.item=Ut.item),Qt=new Ne.Event("assetload"),Qt.item=rn,Qt.asset=cn,nn.dispatchEvent(Qt),ut||(Qt=new Ne.Event("assetload"),Qt.item=rn,Qt.asset=cn,u.dispatchEvent(Qt))}}),u.preloadEvent=Pn.on("complete",function(Ut){Zn=Ut,nn.loadAssetsCount--,nn.loadAssetsCount==0&&Fn()});try{Pn.loadManifest(ht)}catch{+function(){}()}}function Fn(){var Ut=Date.now();tt=Math.max(0,tt-(Ut-qn)),setTimeout(function(){u.loadAssetsCount--,u.loadAssetsCount<=0&&(u.isLoading=!1),nn.isLoading=!1,nn.dispatchEvent(Zn),!n(it)&&it.show&&it.hide(),ut||u.dispatchEvent(Zn)},tt*(Jt=="s"?1e3:1))}return nn},this.ac=function(Ce,Fe,it){it?(it.commands||(it.commands=[]),it.commands.push([Ce,Fe,it])):(Fe[0].commands||(Fe[0].commands=[]),Fe[0].commands.push([Ce,Fe]))},t.asset=this.asset=function(Ce,Fe,it,Qe,tt){if(!n(Ce)){Ce=et(Ce);var ot=t.assetIDs[Ce];if(ot&&(Ce=ot),t.assets[Ce]&&(!t.assets[Ce].type||t.assets[Ce].type&&t.assets[Ce].type.substr(0,2)!="AC"))return t.assets[Ce];if(j.PATH!=null&&(t.PATH=j.PATH),tt){var gt;return u.loadFailObj=="circles"?gt=u.makeCircles(14):gt=u.loadFailObj,gt&&(gt.type="EmptyAsset",gt.id=Ce,gt.play=function(){if(dt)return $e("Frame - asset("+Ce+") not found"),{}}),gt}else{var ze=new t.Container(Fe,it);t.assets[Ce]=ze,Fe&&it?ze.type="ACWD":ze.type="AC";var Mt=u.loadAssets({assets:Ce,path:Ce.split("/").length==1?t.PATH:null,queueOnly:!0,maxNum:Qe}),ut=Ce.split(".");return Ne.Sound.SUPPORTED_EXTENSIONS.indexOf(ut[ut.length-1])>=0&&(ze.play=function(){return ze.playParams=arguments,ze.proxy=new Ne.EventDispatcher,Object.defineProperty(ze.proxy,"volume",{get:function(){return ze.sound?ze.sound.volume:null},set:function(xt){ze.volume=xt,ze.sound&&(ze.sound.volume=xt)}}),Object.defineProperty(ze.proxy,"pan",{get:function(){return ze.sound?ze.sound.pan:null},set:function(xt){ze.pan=xt,ze.sound&&(ze.sound.pan=xt)}}),ze.proxy}),Mt.on("complete",function(){Ce.id?Ce=Ce.id:Ce.src&&(Ce=Ce.src);var xt=u.asset(Ce,null,null,null,!0),_t=Ce.split("."),Yt;if(Ne.Sound.SUPPORTED_EXTENSIONS.indexOf(_t[_t.length-1])>=0)ze.play=xt.play,ze.type="Sound",ze.src=xt.src,ze.item=xt.item,ze.playParams&&(ze.sound=ze.play.apply(null,ze.playParams),ze.volume!=null&&(ze.sound.volume=ze.volume),ze.pan!=null&&(ze.sound.pan=ze.pan),ze.sound.on("complete",function(){ze.proxy.dispatchEvent("complete")}));else if(xt.type=="Bitmap"||xt.type=="Image"||xt.type=="Pic"){if(xt.type=="Bitmap"?(xt.addTo(ze),ze.bitmap=xt,ze.image=xt.image,ze.id=xt.id,ze.item=xt.item):(ze.bitmap=xt.getChildAt(0).clone(),ze.bitmap.addTo(ze),ze.image=ze.bitmap.image,ze.id=ze.bitmap.id,ze.item=ze.bitmap.item),ze.mouseChildren=!1,ze.type="Image",ze.commands)for(Yt=0;Yt<ze.commands.length;Yt++)ze.commands[Yt][2]?ze[ze.commands[Yt][0]].apply(ze,ze.commands[Yt][1]):t[ze.commands[Yt][0]].apply(ze,ze.commands[Yt][1]);ze.commands=null,ze.stage&&ze.stage.update()}else if(xt.type=="EmptyAsset"){if(xt.addTo(ze),ze.mouseChildren=!1,ze.type="EmptyAsset",ze.commands)for(Yt=0;Yt<ze.commands.length;Yt++)ze.commands[Yt][2]?ze[ze.commands[Yt][0]].apply(ze,ze.commands[Yt][1]):t[ze.commands[Yt][0]].apply(ze,ze.commands[Yt][1]);ze.commands=null,ze.stage&&ze.stage.update()}else if(xt.type=="SVG"){if(xt.addTo(ze),ze.mouseChildren=!1,ze.type="SVG",ze.bitmap=xt,ze.svg=xt.svg,ze.commands)for(Yt=0;Yt<ze.commands.length;Yt++)ze.commands[Yt][2]?ze[ze.commands[Yt][0]].apply(ze,ze.commands[Yt][1]):t[ze.commands[Yt][0]].apply(ze,ze.commands[Yt][1]);ze.commands=null,ze.stage&&ze.stage.update()}t.assets[Ce]=ze,ze.dispatchEvent("assetLoad"),ze.dispatchEvent("complete")}),Mt.on("error",function(xt){var _t=new Ne.Event("error");_t.id=xt.id,_t.item=xt.item,ze.dispatchEvent(_t)}),ze}}},t.asset.getIDs=function(){var Ce=[];for(var Fe in t.assetIDs)Ce.push(Fe);return Ce},t.image=function(Ce,Fe,it,Qe,tt){return Ce.match(/^htt/i)&&(Ce="https://cors.zimjs.com/"+Ce),t.asset(Ce,Fe,it,Qe,tt)},t.zimObjectIDs={},t.object=this.object=function(Ce){return t.zimObjectIDs[Ce]},t.object.getNames=function(){var Ce=[];for(var Fe in t.zimObjectIDs)Ce.push(Fe);return Ce},j.zns||(j.asset=this.asset,j.image=t.image,j.object=this.object),this.setDefault=function(){return j.zimDefaultFrame=j.zdf=j.F=u,j.S=z,j.W=z.width,j.H=z.height,u},Object.defineProperty(u,"isDefault",{get:function(){return j.zdf==u},set:function(){$e("Frame(): isDefault is read only - see setDefault()")}}),Object.defineProperty(u,"stage",{get:function(){return z},set:function(){$e("Frame(): stage is read only - see remakeCanvas(), perhaps")}}),Object.defineProperty(u,"width",{get:function(){return $},set:function(){$e("Frame(): width is read only - see remakeCanvas(), perhaps")}}),Object.defineProperty(u,"height",{get:function(){return xe},set:function(){$e("Frame(): height is read only - see remakeCanvas(), perhaps")}}),Object.defineProperty(this,"color",{get:function(){return l},set:function(Ce){l=Ce,n(Ce)?u.canvas.style.backgroundColor="default":(u.canvas.style.backgroundColor=l,!n(l)&&p&&z.setClearColor(t.convertColor(l)))}});var oe;Object.defineProperty(this,"outerColor",{get:function(){return oe},set:function(Ce){oe=Ce,sr("body").css({backgroundColor:oe})}}),Object.defineProperty(u,"allowDefault",{get:function(){return Y},set:function(Ce){Ce?(z.preventSelection=!1,document.body.style.overflow="visible",u.zil&&(j.removeEventListener("keydown",u.zil[0]),j.removeEventListener("wheel",u.zil[1]),j.removeEventListener("DOMMouseScroll",u.zil[2]),u.zil=null)):(z.preventSelection=!0,z.enableDOMEvents(!0),(e=="full"||e=="fit"||e=="fill")&&(document.body.style.overflow="hidden"),n(u.zil)&&(u.zil=kr())),Y=Ce,z.__touch&&(z.__touch.preventDefault=!Y)}});var _e;Object.defineProperty(u,"cursors",{get:function(){return _e},set:function(Ce){_e=Ce&&Ce.constructor=={}.constructor?Ce:null,_e?je(_e):Ve()}}),u.cursorTypes=["none","auto","pointer","text","wait","crosshair","default","help","move","progress","e-resize","ne-resize","nw-resize","n-resize","se-resize","sw-resize","s-resize","w-resize","context-menu","cell","vertical-text","alias","copy","no-drop","not-allowed","ew-resize","ns-resize","nesw-resize","nwse-resize","col-resize","row-resize","all-scroll","grab","grabbing","zoom-in","zoom-out"],u.cursorList=new t.Dictionary(!0);function je(Ce){t.loop(Ce,function(tt,ot){ot.noMouse&&ot.noMouse()}),u.pme&&Ve(),t.loop(u.cursorList,function(tt){!tt._cursor&&tt.cursor&&Ce[tt.cursor]&&(tt._cursor=tt.cursor,u.cursorList.add(tt,tt._cursor),tt.cursor="none")}),Ce.default&&(document.body.style.cursor="none"),u.pme=u.on("pointermove",function(tt){u.cursorObj&&(u.cursorObj.x=u.mouseX,u.cursorObj.y=u.mouseY,u.cursorObj.top(),t.Ticker.isUpdating(u.stage)||u.stage.update())});var Fe=!1;if(u.mouseX!=0&&u.mouseY!=0){Fe=!0;var it=u.stage.getObjectUnderPoint(u.mouseX,u.mouseY,1);it&&(it._cursor||it.cursor)?Qe(it):Ce.default?(De("none"),Ce.default.x=u.mouseX,Ce.default.y=u.mouseY,u.cursorObj=Ce.default,Ce.default.addTo(u.stage)):De(),u.stage.update()}u.pee=u.on("pointerenter",function(tt){if(Fe){Fe=!1;return}setTimeout(function(){var ot=u.stage.getObjectUnderPoint(u.mouseX,u.mouseY,1);ot&&(ot._cursor||ot.cursor)||(Ce.default?(De("none"),Ce.default.x=u.mouseX,Ce.default.y=u.mouseY,u.cursorObj=Ce.default,Ce.default.addTo(u.stage)):De(),u.stage.update())},50)}),u.smo=u.stage.on("mouseover",function(tt){Qe(tt.target)});function Qe(tt){u.cursorObj&&u.cursorObj.removeFrom();var ot=u.cursorsExclude;if(ot&&(Array.isArray(ot)||(ot=[ot]),ot.includes(tt))){tt.cursor=u.cursorTypes.includes(tt._cursor)?tt._cursor:"default";return}tt._cursor&&Ce[tt._cursor]?(u.cursorObj=Ce[tt._cursor],De("none"),u.cursorObj.x=u.mouseX,u.cursorObj.y=u.mouseY,u.cursorObj.addTo(u.stage)):Ce.default&&(!tt.cursor||!u.cursorTypes.includes(tt.cursor))?(De("none"),Ce.default.x=u.mouseX,Ce.default.y=u.mouseY,u.cursorObj=Ce.default,Ce.default.addTo(u.stage)):u.cursorTypes.includes(tt.cursor)||(tt.cursor="default"),u.stage.update()}u.ple=u.on("pointerdown",function(tt){u.cursorObj&&t.interval(.001,function(){u.cursorObj&&u.cursorObj.top(),u.stage.update()},2,!0)}),u.pde=u.on("pointerleave",function(tt){Fe=!1,u.cursorObj&&u.cursorObj.removeFrom(),u.stage.update()}),u.smu=u.stage.on("mouseout",function(tt){u.cursorObj&&u.cursorObj.removeFrom(),Ce.default?(De("none"),Ce.default.x=u.mouseX,Ce.default.y=u.mouseY,u.cursorObj=Ce.default,Ce.default.addTo(u.stage)):De()})}function Ve(){u.pme&&u.off("pointermove",u.pme),u.pee&&u.off("pointerenter",u.pee),u.ple&&u.off("pointerdown",u.ple),u.pde&&u.off("pointerleave",u.pde),u.smo&&u.stage.off("mouseover",u.smo),u.smu&&u.stage.off("mouseout",u.smu),u.pme=u.pee=u.ple=u.pde=u.smo=u.smu=null,t.loop(u.cursorList,function(Ce,Fe){Fe!==!0&&(Ce.cursor=Fe),Ce._cursor=null}),t.loop(u.cursorList,function(Ce){u.cursorList.add(Ce,!0)}),u.cursorObj&&(u.cursorObj.dispose(),u.cursorObj=null,u.stage.update()),De()}function De(Ce){Ce!="none"&&(u.cursorObj=null),u.canvas.parentElement&&(u.canvas.parentElement.style.cursor=Ce||"default")}function Oe(Ce){u.dispatchEvent(Ce)}j.addEventListener("contextmenu",Oe,!1);var Re=new Ne.Event("keydown");this.eventRemove=Re.remove;function Ze(Ce){Ce.remove=u.eventRemove,u.altKey=Ce.altKey,u.ctrlKey=Ce.ctrlKey,u.metaKey=Ce.metaKey,u.shiftKey=Ce.shiftKey,u.dispatchEvent(Ce)}j.addEventListener("keydown",Ze);function be(Ce){u.altKey=Ce.altKey,u.ctrlKey=Ce.ctrlKey,u.metaKey=Ce.metaKey,u.shiftKey=Ce.shiftKey,Ce.remove=u.eventRemove,u.dispatchEvent(Ce)}j.addEventListener("keyup",be);function we(Ce){u.dispatchEvent(Ce)}j.addEventListener("wheel",we);function Me(Ce){Ce.remove=u.eventRemove,u.dispatchEvent(Ce)}b&&j.DeviceMotionEvent&&j.addEventListener("devicemotion",Me);function He(Ce){Ce.remove=u.eventRemove;var Fe=360-Ce.alpha;Math.abs(Fe-Xe)>180-45&&Math.abs(Fe-Xe)<180+45&&(nt=nt==0?180:0),Xe=Fe,Ce.rotation={x:Ce.beta,y:Ce.gamma,z:(Fe+nt)%360},u.dispatchEvent(Ce)}if(b&&j.DeviceOrientationEvent){var Xe=0,nt=0;j.addEventListener("deviceorientation",He)}this.isFullscreen=!!document.fullscreenElement,this.htmlobc=sr("html").css("backgroundColor"),this.fullscreen=function(Ce){if(n(Ce)&&(Ce=!0),Ce){if(document.fullscreenElement)return;var Fe=u.canvas.parent?u.canvas.parent:document.body;Fe.requestFullscreen?Fe.requestFullscreen():Fe.webkitRequestFullscreen?Fe.webkitRequestFullscreen():Fe.mozRequestFullscreen?Fe.mozRequestFullscreen():Fe.msRequestFullscreen&&Fe.msRequestFullscreen()}else{if(!document.fullscreenElement)return;document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozExitFullscreen?document.mozExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()}this.isFullscreen=Ce},document.addEventListener("fullscreenchange",function(){u.isFullscreen=!!document.fullscreenElement,document.fullscreenElement?(sr("html").css("backgroundColor",u.color),u.dispatchEvent("fullscreenenter")):(sr("html").css("backgroundColor",u.htmlobc?u.htmlobc:"transparent"),u.dispatchEvent("fullscreenexit"))}),this.remakeCanvas=function(Ce,Fe){if(e!="full"){n(Ce)&&(Ce=$),n(Fe)&&(Fe=xe),gn(P)&&gn(P).parentNode.removeChild(gn(P)),$=Ce,xe=Fe;for(var it=[],Qe=0;Qe<u.stage.numChildren;Qe++)it.push(u.stage.getChildAt(Qe));for(Be(),Ke(),Qe=0;Qe<it.length;Qe++)u.stage.addChild(it[Qe])}},this.follow=function(Ce,Fe,it,Qe,tt,ot,gt,ze,Mt,ut,xt,_t,Yt,Et){var Jt="obj, boundary, damp, dampY, leftOffset, rightOffset, upOffset, downOffset, offsetDamp, offsetDampY, horizontal, vertical, borderLock, lag",qt;if(qt=lt(u.follow,arguments,Jt))return qt;if(u.followObj=null,u.followTicker&&t.Ticker.remove(u.followTicker),n(Ce))return;Ce.dirX=Ce.dirY=0,u.followObj=Ce,Ce.followDampX=null,Ce.followDampY=null,n(Fe)&&(Fe=new t.Boundary(0,0,u.stage.width,u.stage.height)),u.followBoundary=Fe,n(it)&&(it=.05),n(Qe)&&(Qe=it),n(tt)&&(tt=0),n(ot)&&(ot=0),n(gt)&&(gt=0),n(ze)&&(ze=0),n(Mt)&&(Mt=.02),n(ut)&&(ut=Mt),n(xt)&&(xt=!0),n(_t)&&(_t=!0),n(Yt)&&(Yt=!1),n(Et)&&(Et=!1),Ce.parent?qe():Ce.on("added",qe);function qe(){var ht=Ce.parent;u.frameBorderLock=Yt,xt&&(u.followDampX=new t.Damp(ht.x,it),u.offsetDampX=new t.Damp(Fe.x+tt+(Fe.width-tt-ot)/2,Mt)),_t&&(u.followDampY=new t.Damp(ht.y,Qe),u.offsetDampY=new t.Damp(Fe.y+gt+(Fe.height-gt-ze)/2,ut)),u.followTicker=t.Ticker.add(function(){var st=u.followBoundary;if(xt){var Ot=st.x+tt+(st.width-tt-ot)/2;u.followOffsetX=[Et?st.x+st.width-tt:Ot,Ot,Et?st.x+tt:Ot],u.followObj&&(ht.x=u.followDampX.convert(u.offsetDampX.convert(u.followOffsetX[Ce.motionController?Ce.motionController.dirX+1:1])-Ce.x))}if(_t){var St=st.y+gt+(st.height-gt-ze)/2;u.followOffsetY=[Et?st.y+st.height-ze:St,St,Et?st.y+gt:St],u.followObj&&(ht.y=u.followDampY.convert(u.offsetDampY.convert(u.followOffsetY[Ce.motionController?Ce.motionController.dirY+1:1])-Ce.y))}u.frameBorderLock&&(ht.x>u.followBoundary.x&&(ht.x=u.followBoundary.x),ht.y>u.followBoundary.y&&(ht.y=u.followBoundary.y),ht.x<u.followBoundary.x+u.followBoundary.width-ht.width&&(ht.x=u.followBoundary.x+u.followBoundary.width-ht.width),ht.y<u.followBoundary.y+u.followBoundary.height-ht.height&&(ht.y=u.followBoundary.y+u.followBoundary.height-ht.height))})}return Ce},n(t.blurCheck)&&t.setBlurDetect(),this.keyboardMessage=function(Ce,Fe,ut,Qe,tt){var ot="color, backgroundColor, message, response, percent",gt;if(gt=lt(u.keyboardMessage,arguments,ot))return gt;n(Ce)&&(Ce=t.yellow),n(Fe)&&(Fe="black"),n(ut)&&(ut="PRESS SCREEN FOR KEYBOARD CONTROL"),n(Qe)&&(Qe="YOU HAVE KEYBOARD CONTROL"),n(tt)&&(tt=80);function ze(){try{return window.self!==window.top}catch{return!0}}var Mt=ze();Mt&&(u.canvas.style.pointerEvents="none");var ut=new t.Label({text:ut,size:40,color:Ce,backgroundColor:Fe,paddingV:15,paddingH:30,shiftV:1,align:CENTER}).scaleTo(u.stage,tt).ske(10).reg(CENTER).pos(0,50,CENTER,BOTTOM);document.addEventListener("mousedown",xt);function xt(){Mt&&(u.canvas.style.pointerEvents="auto"),document.removeEventListener("mousedown",xt),ut.text=Qe,ut.animate({props:{alpha:0},wait:1,call:()=>{ut.dispose(),ut=null}}),u.stage.update()}},this.dispose=function(){u.zil&&u.zil.length&&(j.removeEventListener("keydown",u.zil[0]),j.removeEventListener("wheel",u.zil[1]),j.removeEventListener("DOMMouseScroll",u.zil[2])),ie&&ie.removeAllEventListeners(),U&&j.removeEventListener("resize",U),j.removeEventListener("resize",Ie),j.removeEventListener("contextmenu",Oe),j.removeEventListener("keydown",Ze),j.removeEventListener("keyup",be),j.removeEventListener("wheel",we),j.removeEventListener("devicemotion",Me),j.removeEventListener("deviceorientation",He),j.removeEventListener("mousedown",L,!0),j.removeEventListener("mousemove",L,!0),j.removeEventListener("mouseup",L),Y||(document.body.style.overflow="auto"),Ce(z);function Ce(Fe){if(Fe.dispose)Fe.dispose();else{if(Fe.removeAllEventListeners(),Fe.numChildren)for(var it=Fe.numChildren-1;it>=0;it--)Ce(Fe.getChildAt(it));Fe.parent&&Fe.parent.removeChild(Fe)}Fe=null}return gn(P)&&gn(P).parentNode.removeChild(gn(P)),u==t.tickerFrame&&(t.tickerFrame=null),u===j.zdf&&(j.zdf=j.S=j.W=j.H=null),z=null,u=null,!0},this.makeCircles=function(Ce,Fe){n(Ce)&&(Ce=100);var it=[t.orange,t.green,t.pink,t.blue,t.brown,t.dark],Qe,tt;if(Fe)for(Qe=new t.Container({style:!1}),Qe.radius=Ce,tt=0;tt<it.length;tt++)Qe.addChild(new t.Circle(Qe.radius/it.length*(it.length-tt),it[tt],null,null,null,null,null,null,!1));else{Qe=new t.Shape({style:!1});var ot=Qe.graphics;for(Qe.radius=Ce,tt=0;tt<it.length;tt++)ot.f(it[tt]).dc(0,0,Qe.radius/it.length*(it.length-tt));Qe.setBounds(-Qe.radius,-Qe.radius,Qe.radius*2,Qe.radius*2)}return Qe},this.madeWith=function(Ce,Fe,it,Qe,tt,ot,gt){var ze="color, text, edges, box, slats, borderColor, borderWidth",Mt;if(Mt=lt(u.madeWith,arguments,ze))return Mt;n(Ce)&&(Ce=t.dark),n(Fe)&&(Fe="Made with ZIM");var ut=new t.Container,xt=ut.icon=u.makeIcon(it,Qe,tt,ot,gt).sca(.5).alp(.92).hov(1).addTo(ut).tap(function(){xt.alp(.92),xt.stage.update(),zn("https://zimjs.com","_blank")});return ut.label=new t.Label(Fe,16,null,Ce).sca(.7).pos(0,-19,t.CENTER,t.BOTTOM,ut),ut},this.makeIcon=function(Ce,Fe,it,Qe,tt){var ot="edges, box, slats, borderColor, borderWidth",gt;if(gt=lt(u.makeIcon,arguments,ot))return gt;var ze=new t.Container(-20,-13,102,120).reg(-20,-13);n(Ce)&&(Ce=t.light),n(Fe)&&(Fe=t.dark),it===!0&&(it=[t.silver,t.silver,t.silver,t.silver,t.silver]),new t.Rectangle(ze.width,ze.height,Fe,Qe,tt).loc(-20,-13,ze);var Mt=[[it?it[0]:"#E474C3","AieA0IAAgCIAmhlIEXAAIg5Bng",41.7,19.5],[it?it[1]:"#50C5B7","AiSAzIAnhlID+AAIg5Blg",35.3,33.2],[it?it[2]:"#F48E25","AiFA0IAmhnIDlAAIg5Bng",28.9,46.7],[it?it[3]:"#EBCD36","Ah4AzIAmhlIDLAAIg5Blg",22.4,60.5],[it?it[4]:"#ABD140","AhrA0IAAgFIAlhiICxAAIg5Bng",16.1,74.3],[Ce,"AlGHRIAnhnIH+AAIgbBngAlGlpIAnhnIJmAAIg5Bng",32.7,46.5]];return t.loop(Mt,function(ut){var xt=new t.Shape().addTo(ze);xt.graphics.f(ut[0]).p(ut[1]),xt.setTransform(ut[2],ut[3])}),ze.mouseChildren=!1,ze},this.makeAbstract=function(Ce){n(Ce)&&(Ce="black");var Fe=[[115.8,103.55,"#4ACBEB","Am6GkIAAtHIN0AAIAAClIrZAAIAAKig"],[127.55,73.3,"#A1E543","AAjLSIAAp6IEiAAIAAJ6gAlELOIAAp2IEiAAIAAJ2gAlEihIAAowIKEAAIAAIwg"],[32.55,73.05,"#B545E4","Ak6LQIAA2fIJ1AAIAAWfg"]],it=new t.Rectangle(200,200);t.loop(Fe,function(tt){var ot=new t.Shape().f(tt[2]).p(tt[3]);ot.setTransform(tt[0]+20,tt[1]+27),ot.addTo(it)},!0);var Qe=new t.Container;return it.sca(.4).addTo(Qe),Qe.mouseChildren=!1,Qe},this.makeCat=function(Ce){n(Ce)&&(Ce=246);var Fe=[[16.95,241.15,0,"black",[1.5,2,1],"AgKAhIAVhB"],[58.65,244.378,0,"#A7A7A7",[3,2,1],"AmYAAIMxAB"],[105.64,107.14,"#EF7988",0,0,"AAEArQgNAAgjghQgiggAFgIQAFgJBEgCQBEgDAGAGQAHAIgfAkQgfAlgPAAIAAAAg"],[104.84,111.34,0,"black",[1,1,1],"AABA2IAPAYQAJAPAJAGQAKAHAMAAQAbAAAXgWQAQgPAVghQAVghAAgcQAAgnglgYQgbgSgxgCIgrACAAJADIgIAzAhphVQgXAVgMAWQgKAQgIAiQgIAkAFAMQALAfAqAOQAmANAcgIQANgEANgQQALgNAGgT"],[105.05,111.4,"#757B74",0,0,"AheBrQgvgRgQgeQgPgdAQgkQAZg8AEgFQAXgfA8gGQBVgKA+ATQBRAZgYBEQgVA/gnAZQgUAOgZAKQgJAJgVgbQgUgegCAAQgDAAgWAgQgWAUgZAAQgMAAgNgEg"],[86.18,93,"black",0,0,"Aj7g0QiYg0i9AyQA0g3BcgRQBagQBfAaQBkAbBEBBQBNBHASBpQhgiYibg0gAFxiDQAzgdA6AMQA9AMA2A4QgHgBAAACQAAAAgBABQAAAAAAAAQgBAAgBAAQAAAAgBgBQh8gshOAzQhIAvhBCYQALjABzhCg"],[78.5,63.23,"#705F6C","black",[1,1,1],"AHAg5IgNmIIBfGpQgOgQgSgMQgjgXgPASgAKeDZQg2g4g9gMQg6gMgzAdQhzBCgLDBQBBiZBIgvQBNgzB9AsQAEACAAgCQAAgCAHABgAqdBuIAAnsIDmHEQgegMgsgBQhXgChFA3gAoEDzQA0g3BdgRQBagQBeAaQBkAbBFBBQBMBIASBpQhfiYibg1QiYg0i+Ayg"],[86.28,98.01,"black","black",[1,1,1],"AJSh/QgEADgHgDQgFgBgBAFQgNBXhNA9QhTBEhagZQgGgCgPAFQgUAHgEAAQCNAeBchOQBGg7AWhigApRhnQAFABAIAAQAGABAAAAQBFBsCVA7QCpBDCrgzQACAAAHAJQAEAFAFAJQjAAzitg/Qing9g/iHg"],[96.95,97.3,"#0C0436",0,0,"AlZBJQgVgVAAgeQAAgcAVgVQAVgVAeAAQAdAAAVAVQAVAVAAAcQAAAegVAVQgVAVgdAAQgeAAgVgVgAD1AcQgVgVAAgdQAAgdAVgVQAVgVAeAAQAdAAAVAVQAVAVAAAdQAAAdgVAVQgVAVgdAAQgeAAgVgVg"],[96.88,97.2,"#EA9424",0,0,"AlpBYQgbgbAAgnQAAglAbgbQAbgbAnAAQAmAAAbAbQAbAbAAAlQAAAngbAbQgbAbgmAAQgnAAgbgbgADnArQgbgbAAgmQAAgmAbgbQAbgbAmAAQAnAAAbAbQAbAbAAAmQAAAmgbAbQgbAbgnAAQgmAAgbgbg"],[96.88,97.2,"#AFCE3A",0,0,"AlzBiQgggfAAgtQAAgrAggfQAfggAtAAQAsAAAgAgQAfAfAAArQAAAtgfAfQggAggsAAQgtAAgfgggADcA1QgfgfAAgsQAAgsAfgfQAgggAsAAQAtAAAfAgQAgAfAAAsQAAAsggAfQgfAggtAAQgsAAggggg"],[78.5,64.1,0,"black",[1,1,1],"AHAhCIgNmIIBfGpQgOgQgSgMQgjgXgPASgAKeDQQg2g4g9gMQg6gMgzAdQhzBCgLDBQCqAvBlhgQBJhFAGhagAoADiQAlgiBTgOQBYgOBaARQDrAsA0DTQjAAziog/Qihg+hAiIgAqdBlIAAnsIDmHEQgegMgsgBQhXgChFA3g"],[86.375,93.9,"#EACE35",0,0,"AltB+Qiig9g/iIQAkghBTgOQBZgPBaARQDrAtA0DRQhWAXhSAAQhkAAhcgjgADxB2QALjABzhBQAzgeA6AMQA9ANA2A4QgGBYhJBGQhEBAhiAAQgxAAg4gQg"],[73.45,154.83,"black","black",[2,1,1],"AkjjDIByAMQB/ANBEAFQB/AICXgSIgKFzQj4hflLiNQgDgBAFiag"],[79.42,123.62,"#A7A7A7","black",[2,1,1],"AEBpxIgBgBQAYiNAeiQQA8kgAfgMQAggNBLEqQAlCVAfCXIAXARQAbAXAZAcQBQBZAZBnQAZBngUB+QgKA/gPArQgeASgrAWQhYAuhFAXQg8AUh0AWIhoASIAAQzItygCQAvhKA1hoQBqjRAjiXQAri/AOjLIAFimQgegHhTgeQhEgZhgg/IhTg7QgekPgQkUQggonBEgWQBFgWCbEtQAkBGA3B9QAbA9AYA3QASAqAQAmIgjhQIABAAIJmgYIBUACIBQAK"]],it=new t.Container(157.5,246);t.loop(Fe,function(tt){var ot=new t.Shape().f(tt[2]).s(tt[3]).ss(tt[4]?tt[4][0]:null,tt[4]?tt[4][1]:null,tt[4]?tt[4][2]:null).p(tt[5]);ot.setTransform(tt[0],tt[1]),ot.addTo(it)},!0);var Qe=new t.Container;return it.sca(Ce/246).addTo(Qe).mov(0,-.4),g&&Qe.cache(),Qe.mouseChildren=!1,Qe}},t.extend(t.Frame,Ne.EventDispatcher,null,"cjsEventDispatcher",!1),t.Queue=function(){this.cjsEventDispatcher_constructor(),this.type="Queue",this.isLoading=!0},t.extend(t.Queue,Ne.EventDispatcher,null,"cjsEventDispatcher"),t.Pic=function(e,r,i,l,a,s,c){var d="file, width, height, noCors, style, group, inherit",C;if(C=lt(t.Pic,arguments,d,this))return C;Le("83.03"),this.group=s;var T=a===!1?{}:t.getStyle("Pic",this.group,c);if(n(e)&&(e=T.file!=null?T.file:null),n(l)&&(l=T.noCors!=null?T.noCors:!1),n(e)){dt&&$e("ZIM Pic - needs a file");return}this.zimContainer_constructor(r,i);var h=this,w=e;e=h.file=t.Pick.choose(e),r&&i?this.type="ACWD":this.type="AC";var A=l?t.image(e):t.asset(e);h.mouseChildren=!1,A.type=="Bitmap"||A.type=="Image"?(A.type=="Bitmap"?h.bitmap=A.clone().addTo(h):h.bitmap=A.getChildAt(0).clone().addTo(h),h.id=A.id,h.image=h.bitmap.image,h.src=h.bitmap.src,h.item=h.bitmap.item,h.setBounds(null),h.type="Pic",setTimeout(function(){h.dispatchEvent("ready"),h.dispatchEvent("complete")},20)):A.on("complete",function(){if(h.bitmap=A.getChildAt(0).clone().addTo(h),h.id=A.id,h.setBounds(null),h.type="Pic",h.commands)for(var y=0;y<h.commands.length;y++)h.commands[y][2]?h[h.commands[y][0]].apply(h,h.commands[y][1]):t[h.commands[y][0]].apply(h,h.commands[y][1]);h.image=h.bitmap.image,h.src=h.bitmap.src,h.item=h.bitmap.item,h.commands=null,h.dispatchEvent("ready"),h.dispatchEvent("complete"),h.stage&&h.stage.update()}),h.keyOut=function(y,v,P){return h.type=="AC"&&j.zdf?(j.zdf.ac("keyOut",arguments,h),h):(h.bitmap&&h.bitmap.keyOut(y,v,P),h.stage&&h.stage.update(),h)},t.styleTransforms(this,T),h.clone=function(y){return this.cloneProps(new t.Pic(y?e:w,r,i,l,a,this.group,c))}},t.extend(t.Pic,t.Container,["clone"],"zimContainer",!1),t.Aud=function(e,r,i,l,a,s,c,d,C,T,h,w){var A="file, volume, loop, loopCount, pan, offset, delay, interrupt, maxNum, style, group, inherit",y;if(y=lt(t.Aud,arguments,A,this))return y;Le("83.05"),this.cjsEventDispatcher_constructor(),this.type="Aud",this.group=h;var v=T===!1?{}:t.getStyle(this.type,this.group,w);if(n(e)&&(e=v.file!=null?v.file:null),n(e)){dt&&$e("ZIM Sound - needs a file");return}n(r)&&(r=v.volume!=null?v.volume:1),n(i)&&(i=v.loop!=null?v.loop:!1),n(l)&&(l=v.loopCount!=null?v.loopCount:null),n(a)&&(a=v.pan!=null?v.pan:0),n(s)&&(s=v.offset!=null?v.offset:0),n(c)&&(c=v.delay!=null?v.delay:0),n(d)&&(d=v.interrupt!=null?v.interrupt:"none"),n(C)&&(C=v.maxNum!=null?v.maxNum:null);var P=this;e=P.file=t.Pick.choose(e);var x=P.sound=t.asset(e,null,null,C);x.type=="AC"?x.on("complete",function(){P.src=x.src,P.item=x.item,P.dispatchEvent("ready"),P.dispatchEvent("complete")}):setTimeout(function(){P.src=x.src,P.item=x.item,P.dispatchEvent("ready"),P.dispatchEvent("complete")},20),P.volume=r,P.loop=i,P.loopCount=l,P.pan=a,P.offset=s,P.delay=c,P.interrupt=d,P.maxNum=C,P.play=function(E,k,p,m,S,_,Y){var B="volume, loop, loopCount, pan, offset, delay, interrupt",b;return(b=lt(P.play,arguments,B))?b:(n(E)&&(E=P.volume),n(k)&&(k=P.loop),n(p)&&(p=P.loopCount),n(m)&&(m=P.pan),n(S)&&(S=P.offset),n(_)&&(_=P.delay),n(Y)&&(Y=P.interrupt),P.sound.play(E,k,p,m,S,_,Y))},P.dispose=function(){return P.sound&&P.sound.dispose(),P.sound=null,!0}},t.extend(t.Aud,Ne.EventDispatcher,null,"cjsEventDispatcher"),t.Vid=function(e,r,i,l,a,s,c,d,C,T,h,w){var A="file, width, height, scaling, volume, loop, align, valign, type, style, group, inherit",y;if(y=lt(t.Vid,arguments,A,this))return y;Le("83.07"),this.group=h;var v=T===!1?{}:t.getStyle("Vid",this.group,w);if(n(e)&&(e=v.file!=null?v.file:null),n(e)){dt&&$e("ZIM Vid - needs a file");return}n(r)&&(r=v.width!=null?v.width:null),n(i)&&(i=v.height!=null?v.height:null),n(l)&&(l="fit"),n(s)&&(s=v.loop!=null?v.loop:!0),n(a)&&(a=v.volume!=null?v.volume:1),n(c)&&(c=v.align!=null?v.align:"center"),n(d)&&(d=v.valign!=null?v.valign:"center"),n(C)&&(C=v.type!=null?v.type:"video/mp4"),this.zimContainer_constructor(r,i),r&&i?this.type="ACWD":this.type="AC";var P=this,x,E=e;e=t.Pick.choose(e),P.file=e,j.PATH!=null&&(t.PATH=j.PATH);var k="";e.split("/").length==1&&t.PATH&&(k=t.PATH),this.mouseChildren=!1;var p=P.source=document.createElement("video");document.body.appendChild(p),p.style.display="none",p.setAttribute("autoplay","autoplay"),p.setAttribute("playsinline","playsinline"),p.setAttribute("crossorigin","anonymous"),s&&p.setAttribute("loop","loop");var m=P.innerSource=document.createElement("source");e.split("?").length==1&&(e+="?playsinline=1"),m.setAttribute("src",k+e),m.setAttribute("type",C),p.appendChild(m),_();var S=0;function _(){S++>5&&P.dispatchEvent("error"),p.addEventListener("stalled",_),p.addEventListener("error",_),p.addEventListener("canplay",Y)}function Y(){P.type="Vid",p.removeEventListener("stalled",_),p.removeEventListener("error",_),p.removeEventListener("canplay",Y),p.pause();var B=p.videoWidth,b=p.videoHeight;if(P.setBounds(0,0,r||B,i||b),x=P.bitmap=new t.Bitmap(p,B,b).addTo(P),x.setBounds(0,0,B,b),x.scaleTo(P,100,100,l).pos(0,0,c,d,P),P.commands)for(var X=0;X<P.commands.length;X++)P.commands[X][2]?P[P.commands[X][0]].apply(P,P.commands[X][1]):t[P.commands[X][0]].apply(P,P.commands[X][1]);P.commands=null,P.dispatchEvent("ready")}P.videoPaused=!0,P.play=function(){if(!x){dt&&$e("ZIM Vid - no file found");return}if(p.play(),p.volume=a,P.videoPaused=!1,!P.ticker)if(P.keyObj){var B=P.keyObj.color,b=P.keyObj.tolerance,X=P.keyObj.replacement;P.ticker=t.Ticker.add(function(){x.keyOut(B,b,X)})}else P.ticker=t.Ticker.add(function(){});return P},P.keyOut=function(B,b,X){return P.ticker?(t.Ticker.remove(P.ticker),P.ticker=t.Ticker.add(function(){x.keyOut(B,b,X)})):P.keyObj={color:B,tolerance:b,replacement:X},P},P.pause=function(B){return n(B)&&(B=!0),P.videoPaused=B,B?p.pause():p.play(),P},Object.defineProperty(this,"duration",{get:function(){return p.duration},set:function(){}}),Object.defineProperty(this,"currentTime",{get:function(){return p.currentTime},set:function(B){p.currentTime=B}}),Object.defineProperty(this,"volume",{get:function(){return p.volume},set:function(B){a=B,p.volume=B}}),t.styleTransforms(this,v),P.clone=function(B){return this.cloneProps(new t.Vid(B?e:E,r,i,l,a,s,c,d,C,T,this.group,w))},P.dispose=function(B,b,X){this.ticker&&t.Ticker.remove(this.ticker);var V=P.stage;return P.bitmap.dispose(),x=P.bitmap=null,p.pause(),p.removeAttribute("src"),p.load(),p.remove(),p=null,X||this.zimContainer_dispose(!0),V&&V.update(),!0}},t.extend(t.Vid,t.Container,["clone","dispose"],"zimContainer",!1),t.SVG=function(e,r,i,l,a,s,c,d,C,T,h){var w="svg, width, height, bitmap, splitTypes, geometric, showControls, interactive, style, group, inherit",A;if(A=lt(t.SVG,arguments,w,this))return A;Le("83.09"),this.group=T;var y=C===!1?{}:t.getStyle("SVG",this.group,h);if(n(e)&&(e=y.svg!=null?y.svg:null),n(e)){dt&&$e("ZIM SVG - needs a svg value");return}n(l)&&(l=y.bitmap!=null?y.bitmap:!0),n(a)&&(a=y.splitTypes!=null?y.splitTypes:!1),n(s)&&(s=y.geometric!=null?y.geometric:!0),n(c)&&(c=y.showControls!=null?y.showControls:!0),n(d)&&(d=y.interactive!=null?y.interactive:!0),this.zimContainer_constructor(r,i);var v=this;l&&(this.mouseChildren=!1);var P=e;e=t.Pick.choose(e),r&&i?this.type="ACWD":this.type="AC";var x=t.assets[e];if(x&&(v.src=x.src,v.file=x.file,v.item=x.item,v.svg=x.svg),x&&x.type=="Bitmap")v.type="SVG",v.bitmap=x.clone(),k();else if(x&&x.type=="AC")x.on("complete",function(){v.type="SVG",v.bitmap=x.bitmap.clone(),k(n(r)&&n(i))});else if(x&&x.type=="ACWB")n(r)&&n(i)&&v.setBounds(0,0,x.width,x.height),x.on("complete",function(){v.type="SVG",v.bitmap=x.bitmap.clone(),k()});else if(x&&x.type=="SVG")v.type="SVG",x.bitmap?v.bitmap=x.bitmap.clone():v.bitmap=x.clone(),k();else if(e&&e.match(/<svg/i)&&(v.svg=e),v.svg&&v.svg.match(/<svg/i))v.type="SVG",k();else{var E=t.asset(e);E.on("complete",function(){v.type="SVG",E.bitmap&&(v.src=E.bitmap.src,v.file=E.bitmap.file,v.item=E.bitmap.item,v.svg=E.bitmap.svg,v.bitmap=E.bitmap.clone()),k(n(r)&&n(i))})}function k(m){if(l)v.bitmap?(v.svg=v.bitmap.svg,v.bitmap.addTo(v),m&&p(),setTimeout(function(){v.dispatchEvent("ready"),v.dispatchEvent("complete")},20)):t.svgToBitmap(v.svg,function(Y){v.bitmap=Y,v.bitmap.addTo(v),p(),v.dispatchEvent("ready"),v.dispatchEvent("complete"),v.stage&&v.stage.update()});else if(v.bitmap&&(v.svg=v.bitmap.svg),e.match(/<svg/i)||x&&x.type=="SVG"||m){var S=new t.SVGContainer(v.svg);S.loop(function(Y){Y&&Y.addTo(v)},!0),m&&p(),setTimeout(function(){v.dispatchEvent("ready"),v.dispatchEvent("complete")},20)}else{var _=t.asset(e);_.on("complete",function(){var Y=new t.SVGContainer(_);Y.loop(function(B){B&&B.addTo(v)},!0),p(),v.dispatchEvent("ready"),v.dispatchEvent("complete"),v.stage&&v.stage.update()})}}function p(){if(n(r)&&n(i)&&v.setBounds(null),v.type="SVG",v.commands)for(var m=0;m<v.commands.length;m++)v.commands[m][2]?v[v.commands[m][0]].apply(v,v.commands[m][1]):t[v.commands[m][0]].apply(v,v.commands[m][1]);v.commands=null}v.keyOut=function(m,S,_){return v.type=="AC"&&j.zdf?(j.zdf.ac("keyOut",arguments,v),v):(v.bitmap&&v.bitmap.keyOut(m,S,_),v.stage&&v.stage.update(),v)},t.styleTransforms(this,y),v.clone=function(m){return this.cloneProps(new t.SVG(m?e:P,r,i,l,a,s,c,d,C,this.group,h))}},t.extend(t.SVG,t.Container,["clone"],"zimContainer",!1),t.SensorAsk=function(e,r,i,l,a,s,c){var d="callback, sensorType, color, backgroundColor, style, group, inherit",C;if(C=lt(t.SensorAsk,arguments,d,this))return C;Le("83.01"),this.group=s;var T=a===!1?{}:t.getStyle("SensorAsk",this.group,c);if(n(r)&&(r=T.sensorType!=null?T.sensorType:"deviceorientation"),r!="devicemotion"&&(r="deviceorientation"),this.sensorType=r,!n(e)){n(i)&&(i=T.color!=null?T.color:t.dark),n(l)&&(l=T.backgroundColor!=null?T.backgroundColor:t.lighter),this.zimPane_constructor("",l,i,200,200,!1,null,!0,100,black.toAlpha(.3),null,null,null,!1,!1),this.type="SensorAsk";var h=this;if(Style.addGroup("sensorAsk",{width:100,color:i,rollColor:l,corner:10,backgroundColor:t.faint,rollBackgroundColor:i,borderColor:i,borderWidth:2}),h.yes=new t.Button({label:"YES",group:"sensorAsk"}).sca(.65).pos(0,30,CENTER,TOP,this).tap(function(){h.hide(!0);var A=DeviceMotionEvent;r!="devicemotion"&&(A=DeviceOrientationEvent),A.requestPermission().then(function(y){y!="denied"?e(!0):e(!1)})}),h.label=new t.Label("Use sensor?",null,null,i,null,null,null,"center").sca(.9).centerReg(this),h.no=new t.Button({label:"NO",group:"sensorAsk"}).sca(.65).pos(0,30,CENTER,BOTTOM,this).tap(function(){h.hide(!1),e(!1)}),new t.Circle(110,t.clear,i,1).center(this).alp(.8),new t.Circle(120,t.clear,i,1).center(this).alp(.5),new t.Circle(130,t.clear,i,1).center(this).alp(.2),t.styleTransforms(this,T),typeof DeviceOrientationEvent<"u"&&DeviceOrientationEvent&&typeof DeviceOrientationEvent.requestPermission=="function")h.show();else{let A=function(y){r=="deviceorientation"?y.alpha==null||y.alpha==0&&y.beta==0&&y.gamma==0?e(!1):e(!0):!y.acceleration||y.acceleration.x==null||y.acceleration.x==0&&y.acceleration.y==0&&y.acceleration.z==0?e(!1):e(!0),w=!0,j.removeEventListener(r,A)};var w=!1;j.addEventListener(r,A),setTimeout(function(){w||e(!1)},100)}}},t.extend(t.SensorAsk,t.Pane,null,"zimPane",!1),t.colorsHex=["#fb4758","#f58e25","#ebcb35","#acd241","#50c4b7","#993399","#e472c4","#d1a170","#000000","#111111","#222222","#333333","#444444","#555555","#555555","#666666","#777777","#888888","#999999","#aaaaaa","#bbbbbb","#cccccc","#dddddd","#eeeeee","#ffffff","rgba(0,0,0,.01)","rgba(0,0,0,0)"],t.colors=["red","orange","yellow","green","blue","purple","pink","brown","black","licorice","darker","dark","charcoal","grey","gray","granite","tin","pewter","silver","fog","mist","light","moon","lighter","white","faint","clear"],mn=0;mn<t.colors.length;mn++)t[t.colors[mn]]=t.colorsHex[mn];return String.prototype.darken=function(e){return t.darken(this,e)},String.prototype.lighten=function(e){return t.lighten(this,e)},String.prototype.toColor=function(e,r){return t.toColor(this,e,r)},String.prototype.toAlpha=function(e){return t.toAlpha(this,e)},t.FIT="fit",t.FILL="fill",t.FULL="full",t.LEFT="left",t.RIGHT="right",t.CENTER="center",t.MIDDLE="middle",t.START="start",t.END="end",t.TOP="top",t.BOTTOM="bottom",t.HORIZONTAL="horizontal",t.VERTICAL="vertical",t.BOTH="both",t.RADIAL="radial",t.UP="up",t.DOWN="down",t.NEXT="next",t.PREV="prev",t.AUTO="auto",t.AVE="ave",t.DEFAULT="default",t.ALL="all",t.NONE="none",t.GET="get",t.POST="post",t.LOCALSTORAGE="localStorage",t.SOCKET="socket",t.TO="to",t.FROM="from",t.SINE="sine",t.SQUARE="square",t.TRIANGLE="triangle",t.SAW="saw",t.SAWTOOTH="saw",t.ZAP="zap",t.DISTILL=!1,t.distillery=[],t.distill=function(){!j.zns&&t&&(t.DISTILL||j.DISTILL)&&t.distillery.push("83.3","83.35");function e(r,i,l){return l.indexOf(r)===i}t.distillery.length>0?(t.distillery=t.distillery.filter(e),$e("zim.distill() - go to https://zimjs.com/distill and enter the following:"),Rn(t.distillery.join(" "))):$e("must set zim.DISTILL = true;")},t.parseAudioSprite=function(e,r){if(Le("83.25"),!(n(e)||n(e.resources)||n(e.spritemap))){var i=e,l=i.resources[0],a=i.spritemap,s=[],c,d={src:l,data:{}};for(var C in a)c=a[C],s.push({id:C,startTime:Math.round(c.start*1e3),duration:Math.round((c.end-c.start)*1e3)});return d.data.audioSprite=s,r&&$e(JSON.stringify(d)),d}},t.previewAudioSprite=function(e,r,i){if(Le("83.26"),!n(e)){if(n(r)&&(r=3),typeof i>"u"){if(n(j.zdf))return;var i=j.zdf}var l=i.width,a=e,s=[],c=[];if(a.constructor=={}.constructor)a.resources&&(a=t.parseAudioSprite(a)),a.audioSprite?t.loop(a.audioSprite,function(C){s.push(C[0].substr(0,r)),c.push(C[0])}):a.data&&a.data.audioSprite&&t.loop(a.data.audioSprite,function(C){s.push(C.id.substr(0,r)),c.push(C.id)});else return;var d=new t.Tabs({tabs:s,width:l,currentEnabled:!0}).addTo();return d.on("change",function(){i.asset(c[d.selectedIndex]).play()}),d}},t.svgToBitmap=function(e,r,i,l,a){if(Le("83.27"),!n(e.draggable)){var s=new DOMParser;e=e.innerHTML?s.parseFromString(e.innerHTML,"text/xml"):e;var c=e.getElementsByTagName("svg"),d=c?e.getElementsByTagName("svg")[0]:null;e=d}if(!XMLSerializer&&dt){$e("ZIM svgToBitmap() - sorry, not supported in Browser");return}var C=typeof e=="string"?e:new XMLSerializer().serializeToString(e);if(C){var T=C.split(">")[0];if(T.length>1){var h=T.split(/width/i);if(h.length==1){var w=100,A=100,y=T.split(/viewBox/i);if(y.length>1){var v=y[1].split('"')[1];if(v){var P=v.split(" ");P.length>1&&(w=P[P.length-2],A=P[P.length-1])}}C=C.replace(/svg /i,'svg  width="'+w+'" height="'+A+'" ')}}C.match(/xmlns/i)||(C=C.replace(/svg /i,"svg  xmlns='http://www.w3.org/2000/svg' "))}var x=self.URL||self.webkitURL||self,E=new Image;E.onload=function(){var p=new t.Bitmap(E,i,l);r(p,a),x.revokeObjectURL(k)};var k=x.createObjectURL(new document.Blob([C],{type:"image/svg+xml"}));E.src=k},t.makeContent=function(e,r,i){Le("83.29");var l;if(n(i)&&(i=t.dark),typeof e=="string"||typeof e=="number")e=this.message=new t.Label(e,null,null,i);else if(e.constructor=={}.constructor){var a=e;a.buttonScale||(a.buttonScale=.5),n(a.spacingH)&&(a.spacingH=20*a.buttonScale),n(a.spacingV)&&(a.spacingV=20);var s=a.spacingH,c=a.spacingV;a.align||(a.align="center"),e=new t.Container;var d=new _r(10,c).addTo(e);if(a.header&&a.header.pos(0,c,"left","top",e),a.message)var C=new t.Label(a.message,null,null,n(a.color)?i:a.color).loc(0,e.height+(a.header?c:0),e);if(a.display&&a.display.pos(0,-a.display.height-(a.header||a.message?c:0),"left","bottom",e),a.buttons){Array.isArray(a.buttons)||(a.buttons=[a.buttons]);for(var T=a.length*100,h=new t.Container().loc(0,e.height+(a.header||a.message||a.display?c:0),e),w=0;w<a.buttons.length;w++){var A=a.buttons[w],y=A.call||function(){};A.button||(A.button=new t.Button({width:A.width,label:A.label,backgroundColor:A.backgroundColor||A.bgColor,color:A.color,rollBackgroundColor:A.rollBackgroundColor||A.rollBgColor,rollColor:A.rollColor})),A.button.call=y,A.button.sca(a.buttonScale).loc(w==0?0:h.width+s,0,h).tap(function(P){P.target.call(P.target)})}}for(l=0;l<e.numChildren;l++){var v=e.getChildAt(l);v.lastY=v.y,a.align=="center"?v.center(e).loc(null,v.lastY):a.align=="right"&&v.pos(0,null,"right")}if(r&&typeof r=="number"&&(e.width=Math.min(e.width,r-s*2-(a.scrollBar===!0?12:a.scrollBar>0?a.scrollBar:0))),new t.Container(10,c).pos(0,-d.height,"center","bottom",e).bot(),d.top(),e.config=a,e.header=a.header,e.message=C,e.text=a.message,e.display=a.display,a.buttons)for(e.buttons=[],l=0;l<h.numChildren;l++)e.buttons.push(h.getChildAt(l))}return e},t}(he||{});function Le(t){he&&(he.DISTILL||j.DISTILL)&&he.distillery.push(t)}function Dn(t,Tt,kt,Pt,It,At){if(Le("83.3"),t&&t.noDrag)return t;At!==!0&&(At=null);var Bt={drag:function(We,e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,x){return un(arguments)?(arguments[0].obj=this,he.drag(arguments[0])):he.drag(this,We,e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,x)},noDrag:function(We){return he.noDrag(this,We)},mouse:function(){return he.mouse(this)},noMouse:function(){return he.noMouse(this)},effect:function(We,e,r,i,l){return he.effect(this,We,e,r,i,l)},noEffect:function(We,e){return he.noEffect(this,We,e)},updateEffects:function(We){return he.updateEffects(this,We)},wire:function(We,e,r,i,l,a,s){return un(arguments)?(arguments[0].source=this,he.wire(arguments[0])):he.wire(this,We,e,r,i,l,a,s)},noWire:function(We,e,r){return un(arguments)?(arguments[0].source=this,he.noWire(arguments[0])):he.noWire(this,We,e,r)},wired:function(We,e,r,i,l,a,s){return un(arguments)?(arguments[0].target=this,he.wired(arguments[0])):he.wired(this,We,e,r,i,l,a,s)},noWired:function(We,e,r){return un(arguments)?(arguments[0].target=this,he.noWired(arguments[0])):he.noWired(this,We,e,r)},bind:function(We,e,r,i,l){return un(arguments)?(arguments[0].obj=this,he.bind(arguments[0])):he.bind(this,We,e,r,i,l)},noBind:function(We,e,r,i){return un(arguments)?(arguments[0].obj=this,he.noBind(arguments[0])):he.noBind(this,We,e,r,i)},dragBoundary:function(We){return he.dragBoundary(this,We)},dragRect:function(We){return he.dragBoundary(this,We)},transform:function(We,e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,x,E,k,p,m,S,_,Y,B,b,X){return un(arguments)?(arguments[0].obj=this,he.transform(arguments[0])):he.transform(this,We,e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,x,E,k,p,m,S,_,Y,B,b,X)},setSwipe:function(We){return he.setSwipe(this,We)},gesture:function(We,e,r,i,l,a,s,c,d,C,T,h,w,A,y){return un(arguments)?(arguments[0].obj=this,he.gesture(arguments[0])):he.gesture(this,We,e,r,i,l,a,s,c,d,C,T,h,w,A,y)},noGesture:function(We,e,r){return un(arguments)?(arguments[0].obj=this,he.noGesture(arguments[0])):he.noGesture(this,We,e,r)},gestureBoundary:function(We,e){return he.gestureBoundary(this,We,e)},gestureRect:function(We,e){return he.gestureBoundary(this,We,e)},addPhysics:function(We,e,r,i,l,a,s,c,d,C,T){return un(arguments)?(arguments[0].obj=this,he.addPhysics(arguments[0])):he.addPhysics(this,We,e,r,i,l,a,s,c,d,C,T)},removePhysics:function(){return he.removePhysics(this)},hitTestPoint:function(We,e,r){return he.hitTestPoint(this,We,e,r)},hitTestReg:function(We,e){return he.hitTestReg(this,We,e)},hitTestRect:function(We,e,r,i){return he.hitTestRect(this,We,e,r,i)},hitTestCircle:function(We,e,r,i){return he.hitTestCircle(this,We,e,r,i)},hitTestCircleRect:function(We,e){return he.hitTestCircleRect(this,We,e)},hitTestCircles:function(We,e){return he.hitTestCircles(this,We,e)},hitTestBounds:function(We,e,r){return he.hitTestBounds(this,We,e,r)},boundsToGlobal:function(We,e,r,i){return he.boundsToGlobal(this,We,e,r,i)},resetBounds:function(We,e,r,i,l){return un(arguments)?(arguments[0].obj=this,he.resetBounds(arguments[0])):he.resetBounds(this,We,e,r,i,l)},hitTestPath:function(We,e,r,i,l){return he.hitTestPath(this,We,e,r,i,l)},hitTestGrid:function(We,e,r,i,l,a,s,c,d,C,T,h){return he.hitTestGrid(this,We,e,r,i,l,a,s,c,d,C,T,h)},animate:function(We,e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,x,E,k,p,m,S,_,Y,B,b,X,V,O,Z,W,K,ne,F,D,u,f,o,g,q,I,R,le,N,L,ee,z,$,xe,ie,ke,U){return We&&(We.props||We.obj)&&un(arguments)?(arguments[0].target=this,he.animate(arguments[0])):he.animate(this,We,e,r,i,l,a,s,c,d,C,T,h,w,A,y,v,P,x,E,k,p,m,S,_,Y,B,b,X,V,O,Z,W,K,ne,F,D,u,f,o,g,q,I,R,le,N,L,ee,z,$,xe,ie,ke,U)},pauseAnimate:function(){return this},stopAnimate:function(){return this},wiggle:function(We,e,r,i,l,a,s,c,d,C,T,h,w,A,y){return un(arguments)?(arguments[0].target=this,he.wiggle(arguments[0])):he.wiggle(this,We,e,r,i,l,a,s,c,d,C,T,h,w,A,y)},loop:function(We,e,r,i,l,a,s,c){return he.loop(this,We,e,r,i,l,a,s,c)},copyMatrix:function(We){return he.copyMatrix(this,We)},duplicate:function(We){return he.duplicate(this,We)},cur:function(We){return he.cur(this,We)},sha:function(We,e,r,i){return he.sha(this,We,e,r,i)},pos:function(We,e,r,i,l,a,s,c,d,C){return un(arguments)?(arguments[0].obj=this,he.pos(arguments[0])):he.pos(this,We,e,r,i,l,a,s,c,d,C)},loc:function(We,e,r,i,l,a,s){return un(arguments)?(arguments[0].obj=this,he.loc(arguments[0])):he.loc(this,We,e,r,i,l,a,s)},mov:function(We,e){return un(arguments)?(arguments[0].obj=this,he.mov(arguments[0])):he.mov(this,We,e)},top:function(){return he.top(this)},bot:function(){return he.bot(this)},ord:function(We){return he.ord(this,We)},dep:function(We){return he.dep(this,We)},nam:function(We){return he.nam(this,We)},alp:function(We){return he.alp(this,We)},vis:function(We){return he.vis(this,We)},ble:function(We){return he.ble(this,We)},dye:function(We){return he.dye(this,We)},hov:function(We,e){return he.hov(this,We,e)},rot:function(We,e,r){return he.rot(this,We,e,r)},siz:function(We,e,r){return he.siz(this,We,e,r)},ske:function(We,e){return he.ske(this,We,e)},reg:function(We,e,r){return he.reg(this,We,e,r)},sca:function(We,e){return he.sca(this,We,e)},scaleTo:function(We,e,r,i,l){return un(arguments)?(arguments[0].obj=this,he.scaleTo(arguments[0])):he.scaleTo(this,We,e,r,i,l)},fit:function(We,e,r,i,l){return un(arguments)?(arguments[0].obj=this,he.fit(arguments[0])):he.fit(this,We,e,r,i,l)},outline:function(We,e,r){return un(arguments)?(arguments[0].obj=this,he.outline(arguments[0])):he.outline(this,We,e,r)},blendmodes:function(We){return he.blendmodes(this,We)},addTo:function(We,e,r){return un(arguments)?(arguments[0].obj=this,he.addTo(arguments[0])):he.addTo(this,We,e,r)},removeFrom:function(We){return he.removeFrom(this,We)},added:function(We,e,r){return he.added(this,We,e,r)},movement:function(We,e){return he.movement(this,We,e)},noMovement:function(){return he.noMovement(this)},tap:function(We,e,r,i,l,a,s,c,d){return un(arguments)?(arguments[0].obj=this,he.tap(arguments[0])):he.tap(this,We,e,r,i,l,a,s,c,d)},noTap:function(){return he.noTap(this)},hold:function(We,e,r,i){return he.hold(this,We,e,r,i)},noHold:function(){return he.noHold(this)},change:function(We,e){return he.change(this,We,e)},noChange:function(){return he.noChange(this)},centerReg:function(We,e,r){return un(arguments)?(arguments[0].obj=this,he.centerReg(arguments[0])):he.centerReg(this,We,e,r)},center:function(We,e,r){return un(arguments)?(arguments[0].obj=this,he.center(arguments[0])):he.center(this,We,e,r)},place:function(We){return he.place(this,We)},placeReg:function(We){return he.placeReg(this,We)},expand:function(We,e,r,i){return un(arguments)?(arguments[0].obj=this,he.expand(arguments[0])):he.expand(this,We,e,r,i)},setMask:function(We,e){return he.setMask(this,We,e)},cloneProps:function(We){return We.type=this.type,We.group=this.group,We.style=this.style,We.alpha=this.alpha,We.rotation=this.rotation,We.mouseEnabled=this.mouseEnabled,We.mouseChildren=this.mouseChildren,We.tickEnabled=this.tickEnabled,We.x=this.x,We.y=this.y,We.scaleX=this.scaleX,We.scaleY=this.scaleY,We.skewX=this.skewX,We.skewY=this.skewY,We.name&&(We.name=this.name),We.regX=this.regX*We.width/(this.width||1),We.regY=this.regY*We.height/(this.height||1),We.visible=this.visible,We.shadow=this.shadow,(!this.type||this.type=="Shape")&&he.copyMatrix(We,this),We.compositeOperation=this.compositeOperation,We.snapToPixel=this.snapToPixel,this.filters&&this.filters.length>0&&(We.filters=this.filters.slice(0),We.cache()),We.mask=this.mask,We.hitArea=this.hitArea,(!this.type||this.type=="Shape"||this.type=="Blob"||this.type=="Squiggle")&&this._bounds&&We.setBounds(this._bounds.x,this._bounds.y,this._bounds.width,this._bounds.height),We},cloneChildren:function(We,e){We.children.length&&We.removeAllChildren();for(var r=We.children,i=0,l=this.children.length;i<l;i++){var a=this.children[i].clone(e);a.parent=We,r.push(a)}return We}};if(!n(At)){At=[];for(var Ft in Bt)At.push(Ft);return At}for(var wt in Bt)Object.prototype.hasOwnProperty.call(Bt,wt)&&(t[wt]=Bt[wt]);if(he&&(t.cjsLocalToGlobal=t.localToGlobal,t.cjsGlobalToLocal=t.globalToLocal,t.cjsLocalToLocal=t.localToLocal,t.localToGlobal=function(We,e){return he.localToGlobal(We,e,t,t.cjsLocalToGlobal)},t.globalToLocal=function(We,e){return he.globalToLocal(We,e,t,t.cjsGlobalToLocal)},t.localToLocal=function(We,e,r){return he.localToLocal(We,e,r,t)},t.hueBatch||he.displayBase(t)),!n(Tt)&&!n(kt)&&!n(Pt)&&!n(It)?Tt=Tt:!n(Tt)&&!n(kt)&&(Pt=Tt,It=kt,Tt=0,kt=0),!n(Tt)&&!n(kt)&&!n(Pt)&&!n(It))t.setBounds(Tt,kt,Pt,It);else if(t.nominalBounds!=null&&t.getBounds&&t.getBounds()==null){var Dt=t.nominalBounds;t.setBounds(Dt.x,Dt.y,Dt.width,Dt.height)}return t.parent&&t.parent.actionFrames&&!t.parent.addPhysics&&Dn(t.parent,zdf?zdf.width:null,zdf?zdf.height:null),t}var ti;function Er(t){Le("83.35"),document.Window=Window,document.Blob=Blob,ti="ignore",n(t)&&(t=[]),Array.isArray(t)||(t=[t]);var Tt=Dn(null,null,null,null,null,!0),kt=["loop","stopAnimate","pauseAnimate","animate","wiggle","wire","wired"];for(var Pt in he)(Tt.indexOf(Pt)==-1||kt.indexOf(Pt)>=0)&&t.indexOf(Pt)==-1&&(window[Pt]=he[Pt])}he.fastFrame=function(t,Tt){if(Le("83.355"),Ne=t,n(j.zdf))return Tt.frame=new he.Frame({shim:{stage:Tt,canvas:Tt.canvas}}),j.zimDefaultFrame=j.zdf=Tt.frame,he.scaX=Ne.stageTransformable?1:Tt.scaleX,he.scaY=Ne.stageTransformable?1:Tt.scaleY,Tt.frame};he.addWires=function(t){return Le("83.365"),t.wire=function(){return Array.prototype.unshift.call(arguments,t),he.wire.apply(null,arguments),t},t.noWire=function(){return Array.prototype.unshift.call(arguments,t),he.noWire.apply(null,arguments),t},t.wired=function(){return Array.prototype.unshift.call(arguments,t),he.wired.apply(null,arguments),t},t.noWired=function(){return Array.prototype.unshift.call(arguments,t),he.noWired.apply(null,arguments),t},t};he.setBlurDetect=function(){Le("83.36"),he.blurCheck=!0,he.pauseAnimateOnBlur=!0,he.pauseOnBlur=[],he.blurDetect=function(){var t,Tt,kt={hidden:"visibilitychange",webkitHidden:"webkitvisibilitychange",mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychange"};for(t in kt)if(t in document){Tt=kt[t];break}return function(Pt){return Pt&&document.addEventListener(Tt,Pt),!document[t]}}(),he.blurDetect(function(){var t,Tt,kt;if(he.blurDetect())setTimeout(function(){if(he.pauseOnBlur)for(t=0;t<he.pauseOnBlur.length;t++)Tt=he.pauseOnBlur[t],Tt.pauseOnBlurPaused||Tt.pause(!1);if(he.pauseAnimateOnBlur&&he.animatedObjects)for(t=0;t<he.animatedObjects.objects.length;t++){Tt=he.animatedObjects.objects[t];var Pt=he.copy(Tt.tweenStates);if(!Tt.tweenStates)Tt.pauseAnimate(!1);else if(n(Pt.all)||Pt.all){if(Tt.pauseAnimate(!1),!Tt.dynamicAnimation)for(kt in Pt)kt!="all"&&Pt[kt]===!1&&Tt.pauseAnimate(!0,kt)}else{Tt.pauseAnimate(!0);for(kt in Pt)kt!="all"&&Pt[kt]&&Tt.pauseAnimate(!1,kt)}Tt.type=="Sprite"&&(Tt.paused=!0)}},300),j.zdf&&j.zdf.dispatchEvent("tabfocus");else{if(he.pauseOnBlur)for(t=0;t<he.pauseOnBlur.length;t++)Tt=he.pauseOnBlur[t],Tt.pauseOnBlurPaused=Tt.paused,Tt.pause(!0);he.pauseAnimateOnBlur&&he.animatedObjects&&he.pauseAnimate(!0,"pauseOnBlur"),j.zdf&&j.zdf.dispatchEvent("tabblur")}})};var Ur=!1;he=function(t){t.ZIMON={stringify:function(kt,Pt){if(Le("83.39"),n(kt))return;if(!Ur){dt&&$e("ZIMON - set ZIMONON=true before using ZIMON.stringify()");return}return kt=t.copy(kt),It(kt),JSON.stringify({obj:kt,key:Pt,zimon:1,info:"https://zimjs.com/zimon/"});function It(At,Bt,Ft){if(!n(At))if(Array.isArray(At))t.loop(At,function(Dt,We){It(Dt,At,We)});else if(At.constructor=={}.constructor)t.loop(At,function(Dt,We){It(We,At,Dt)});else if(At.type){var wt={zimon:At.type};At.arguments&&(wt.args=Array.prototype.slice.call(At.arguments),It(wt.args)),At.type=="series"&&(wt.args=Array.prototype.slice.call(At.array),It(wt.args)),Pt&&Pt[At.type]&&Pt[At.type].props&&(wt.props=[],t.loop(Pt[At.type].props,function(Dt){wt.props.push(At[Dt])})),Bt?Bt[Ft]=wt:kt=wt}else typeof At!="string"&&typeof At!="number"&&typeof At!="boolean"&&At!==null&&dt&&$e("ZIMON - potentially bad JSON value"+At)}},parse:function(kt,Pt){if(Le("83.39"),n(kt))return;var It=JSON.parse(kt),At=It.obj;return Pt=It.key,Ft(At),At;function Bt(wt){try{return Function("return("+wt+")")()}catch{return dt&&$e("ZIMON - bad function scope or name: "+wt),null}}function Ft(wt,Dt,We){if(!n(wt)){if(Array.isArray(wt))t.loop(wt,function(s,c){Ft(s,wt,c)});else if(n(wt.zimon)&&wt.constructor=={}.constructor)t.loop(wt,function(s,c){Ft(c,wt,s)});else if(wt.zimon){var e=wt.zimon,r="";Pt&&(Pt[e]&&Pt[e].scope?r=Pt[e].scope+".":Pt.scope&&(r=Pt.scope+"."));var i=Bt(r+e),l=wt.args;n(l)&&(l=[]),Ft(l);var a;wt.type=="series"?a=t.series(l):a=i?new(i.bind.apply(i,[null].concat(Array.prototype.slice.call(l)))):null,Dt?Dt[We]=a:At=a,Pt&&Pt[e]&&Pt[e].props&&a&&t.loop(Pt[e].props,function(s,c){n(wt.props[c])||(a[s]=wt.props[c])})}}}}},t.Wonder=function(kt,Pt,It,At,Bt){var Ft="wid, client, app, notes, server",wt;if(wt=lt(t.Wonder,arguments,Ft,this))return wt;if(Le("82"),n(kt)){$e("zim.Wonder() - please provide Wonder ID (see https://zimjs.com/wonder/)");return}n(Bt)&&(Bt="https://wonder.zimjs.org/wonder");var Dt=this;n(t.wonderSession)&&(t.wonderSession="W"+t.rand(1e5,999999));var We=[],e=setInterval(i,1e3),r=0;function i(){We.length>0&&(t.async(Bt+"?wonder="+JSON.stringify(We)),We=[],r++)}var l,a=setInterval(function(){r>28&&(We.push({id:kt,c:Pt,a:It,n:At,k:l,t:"e",v:"frequency max - terminated",s:t.wonderSession}),$e("zim.Wonder() - frequency max - terminated"),Dt.dispose()),r=0},30*1e3);this.countsOff={},this.timesOff={},this.ordersOff={};function s(C,T){return n(C)?($e("zim.Wonder "+T+" - please provide a keyword"),!1):!Dt[T+"sOff"][C]}this.count=function(C){s(C,"count")&&(l=C,We.push({id:kt,c:Pt,a:It,n:At,k:C,t:"c",v:1,s:t.wonderSession}))};var c={};this.timeStart=function(C){s(C,"time")&&(Dt.timeEnd(C),l=C,c[C]=new Date().getTime())};var d={};this.timePause=function(C){s(C,"time")&&(d[C]||(d[C]=new Date().getTime()))},this.timeUnpause=function(C){if(s(C,"time")&&d[C]){var T=new Date().getTime()-d[C];c[C]&&(c[C]+=T),delete d[C]}},this.timeEnd=function(C){if(s(C,"time")&&c[C]){var T=d[C]?d[C]:new Date().getTime(),h=Math.round((T-c[C])/1e3);delete d[C],delete c[C],We.push({id:kt,c:Pt,a:It,n:At,k:C,t:"t",v:h,s:t.wonderSession})}},this.order=function(C,T){if(s(C,"order")){if(l=C,n(T)){$e("zim.Wonder order() - please provide an item");return}We.push({id:kt,c:Pt,a:It,n:At,k:C,t:"o",v:T,s:t.wonderSession})}},this.countOff=function(C){Dt.countsOff[C]=1},this.countOn=function(C){delete Dt.countOff[C]},this.timeOff=function(C){Dt.timesOff[C]=1},this.timeOn=function(C){delete Dt.timesOff[C]},this.orderOff=function(C){Dt.ordersOff[C]=1},this.orderOn=function(C){delete Dt.ordersOff[C]},this.dispose=function(){return i(),clearInterval(e),clearInterval(a),!0}},t.VERSION="014/zim",t.getLatestVersions=function(kt){Le("82.2");var Pt="https://zimjs.com/live/getLatestVersions.php";function It(At){kt(JSON.parse(At))}t.async(Pt,It,"returnLatestVersions")},typeof Ne<"u"&&(t.PWA=function(kt,Pt,It,At,Bt,Ft,wt){var Dt="call, label, backgroundColor, color, backdropColor, pane, noScale",We;if(We=lt(t.PWA,arguments,Dt,this))return We;Le("82.4"),this.cjsEventDispatcher_constructor(),this.type="PWA";var e,r=this,i=j.M=="ios"?`In Safari, please add to
home screen as an app`:`Please add to
home screen as an app`;if(n(Pt)&&(Pt=new t.Label({text:i,align:t.LEFT,lineHeight:44,color:At})),n(It)&&(It=t.yellow),n(Ft)){Ft=new t.Pane({width:1200,height:230,content:Pt,backgroundColor:It,backdropColor:Bt});var l=new t.Container;new t.Shape().s(t.dark).ss(3,1,0,3).p("AAAj0IAAFJAA8hoIBuAAIAAFdIlTAAIAAldIBuAA").sca(1.7).addTo(l),new t.Shape().s(t.dark).ss(3,1,0,3).p("AhGAlIBGhGIBHBG").sca(1.7).addTo(l).mov(0,-38);var a=new t.Tile([l,Pt],2,1,40,0,!0);a.width>zdf.stage.width*.7&&(a.width=zdf.stage.width*.7),a.setBounds(-70,-10,480,100),l.mov(-30,35),a.center(Ft)}M&&!(j.matchMedia("(display-mode: standalone)").matches||j.navigator.standalone||document.referrer.includes("android-app://"))?s():(kt&&kt.constructor===Function&&kt(),setTimeout(function(){r.dispatchEvent("ready")},20));function s(){r.pane=e=Ft.show(),e.on("close",function(){kt&&kt.constructor===Function&&kt(),r.scaleEvent&&c.off("resize",r.scaleEvent),r.dispatchEvent("ready"),j.zdf.stage.update()});var c=c||j.zdf;c&&!wt&&(e.scaleTo(c.stage,105).center(),(c.scaling=="full"||c.scaling=="tag")&&(r.scaleEvent=c.on("resize",function(){e.scaleTo(c.stage,105).center()})),c.stage.update())}this.show=function(){return s(),this}},t.extend(t.PWA,Ne.EventDispatcher,null,"cjsEventDispatcher",!1)),t.QR=function(kt,Pt,It,At,Bt,Ft){var wt="url, color, backgroundColor, size, clickable, correctLevel",Dt;if(Dt=lt(t.QR,arguments,wt,this))return Dt;Le("82.5"),n(kt)&&(kt="https://zimjs.com"),n(At)&&(At=256),n(Pt)&&(Pt=t.black),n(It)&&(It=t.white),n(Bt)&&(Bt=!0),n(Ft)&&(Ft=2);var We=document.createElement("div");if(typeof QRCode>"u"){$e("ZIM QR - needs qrcode.js library - see docs");return}var e=new QRCode(We,{text:kt,width:At,height:At,colorDark:Pt,colorLight:It,correctLevel:Ft});this.zimBitmap_constructor(e._oDrawing._oContext.canvas),Bt&&this.cur().on("click",function(){zn(kt,"_blank")}),We=null},t.extend(t.QR,t.Bitmap,null,"zimBitmap",!1),t.GIF=function(kt,Pt,It,At){var Bt="file, width, height, startPaused",Ft;if(Ft=lt(t.GIF,arguments,Bt,this))return Ft;if(Le("82.7"),typeof gifler>"u"){$e("ZIM GIF - needs gifler.js library - see docs");return}n(Pt)&&(Pt=100),n(It)&&(It=100);var wt=this;wt.paused=!1,this.zimBitmap_constructor(null,Pt,It),this.cache();var Dt,We,e;if(j.PATH!=null&&(t.PATH=j.PATH),kt.match(/http/)||kt.match(/^\//)?e=kt:e=(t.PATH?t.PATH:"")+kt,wt.gifler=gifler(e).animate(this.cacheCanvas).then(function(a){wt.animator=a,At&&(Dt=setInterval(function(){wt.animator.running()&&(We=setTimeout(function(){wt.animator.stop(),wt.paused=!0},.1),clearInterval(Dt))},.05))}),!wt.ticker)if(wt.keyObj){var r=wt.keyObj.color,i=wt.keyObj.tolerance,l=wt.keyObj.replacement;wt.ticker=t.Ticker.add(function(){wt.keyOut(r,i,l)})}else wt.ticker=t.Ticker.add(function(){});wt.keyOut=function(a,s,c){return wt.ticker?(t.Ticker.remove(wt.ticker),wt.ticker=t.Ticker.add(function(){wt.keyOut(a,s,c)})):wt.keyObj={color:a,tolerance:s,replacement:c},wt},this.pause=function(a){return n(a)&&(a=!0),wt.animator&&(Dt&&clearInterval(Dt),We&&clearTimeout(We),a&&wt.animator.running()?(wt.animator.stop(),t.Ticker.remove(wt.ticker)):!a&&!wt.animator.running()&&(wt.animator.start(),t.Ticker.add(wt.ticker))),wt.paused=a,wt},this.stop=function(){wt.dispose()},this.reset=function(){return wt.animator.reset(),wt.paused&&(wt.animator.start(),t.Ticker.add(wt.ticker)),wt},this.clone=function(){return this.cloneProps(new t.GIF(kt,Pt,It,At))},this.dispose=function(){wt.animator.stop(),wt.parent&&wt.removeFrom(),t.Ticker.remove(wt.ticker),t.gD(this)}},t.extend(t.GIF,t.Bitmap,["clone","dispose","keyOut"],"zimBitmap",!1),t.Theme={set:function(kt,Pt,It,At,Bt){var Ft="name, lightenRatio, tint, tintRatio, exclude",wt;if(wt=lt(t.Theme.set,arguments,Ft))return wt;Le("82.8"),n(kt)&&(kt="zim");var Dt=kt.toLowerCase();n(Pt)&&(Pt=0),It==-1&&(It=null),n(At)&&(At=0),Bt==-1&&(Bt=null),!n(Bt)&&!Array.isArray(Bt)&&(Bt=[Bt]),t.THEME=window.THEME={name:Dt,lightenRatio:Pt,tint:It,tintRatio:At,exclude:Bt};var We={},e,r=t.colors.slice(0,8),i=t.colors.slice(8,25);Dt=="zim"?t.loop(t.colors,function(l,a){l=="clear"||l=="faint"||(We[l]=t.colorsHex[a])}):Dt=="html"?(t.loop(r,function(l){We[l]=l}),t.loop(i,function(l,a){We[l]=t.colorsHex[a+8]})):Dt=="future"?(e=["f25019","fd8918","ffc955","1dcfae","00a5ab","007175","00969b","d6b361"],t.loop(r,function(l,a){We[l]="#"+e[a]}),t.loop(i,function(l,a){We[l]=t.colorsHex[a+8].toColor("#1dcfae",.4-a*.025)})):Dt=="invert"?(We={},t.loop(t.colorsHex,function(l,a,s){if(a==s-2)return 1;We[t.colors[a]]=t.invertColor(l)})):Dt=="greyscale"?(e=["222222","aaaaaa","dddddd","888888","333333","111111","777777","bbbbbb"],t.loop(r,function(l,a){We[l]="#"+e[a]})):Dt=="neon"?(e=["FF3624","ff6f00","e2f705","a3f307","05f9e2","ED0AF5","ff33c9","e16d00"],t.loop(r,function(l,a){We[l]="#"+e[a]}),t.loop(i,function(l,a){We[l]=t.colorsHex[a+8].toColor("#000",.9)}),We.light=t.lighter,We.moon=t.lighter,We.lighter=t.white,We.white=t.white):Dt=="seventies"?(e=["e5771e","f4a127","ffecb4","6F8212","75c8ae","5a3d2b","956e4e","4c3607"],t.loop(r,function(l,a){We[l]="#"+e[a]}),t.loop(i,function(l,a){We[l]=t.colorsHex[a+8].toColor(a<8?"#344f00":"#f4a127",.8-a*.04)})):Dt=="warm"?(e=["965746","c07768","ffecb4","8da279","6da0b1","745c58","9a7e79","be8858"],t.loop(r,function(l,a){We[l]="#"+e[a]}),t.loop(i,function(l,a){We[l]=t.colorsHex[a+8].toColor(a<8?"#4e352e":"#745c58",.8-a*.05)})):Dt.constructor=={}.constructor&&(We=Dt,t.loop(We,function(l){t.colors.indexOf(l)==-1&&delete We[l]})),t.loop(Bt,function(l){l.toLowerCase()=="colors"?t.loop(t.colors,function(a,s){if(s>=8)return 1;Bt.push(a)}):(l.toLowerCase()=="greys"||l.toLowerCase()=="grays")&&t.loop(t.colors,function(a,s){s<8||Bt.push(a)})}),t.loop(We,function(l,a){Bt&&Bt.indexOf(l)!=-1||(It&&(a=a.toColor(It,At)),Pt!=0&&(a=a.lighten(Pt)),mt||(window[l]=a),t[l]=a)})},apply:function(kt,Pt,It,At,Bt){var Ft="name, lightenRatio, tint, tintRatio, exclude",wt;if(wt=lt(t.Theme.apply,arguments,Ft))return wt;if(localStorage){n(kt)&&(kt="zim");var Dt=kt.toLowerCase();n(Pt)&&(Pt=0),n(It)&&(It=-1),n(At)&&(At=0),n(Bt)?Bt=-1:Array.isArray(Bt)||(Bt=[Bt]),localStorage.setItem(Tt,JSON.stringify({name:Dt,lightenRatio:Pt,tint:It,tintRatio:At,exclude:Bt})),window.location.reload()}else $e("ZIM applyTheme() - needs localStorage")},clear:function(){localStorage&&localStorage.getItem(Tt)&&localStorage.removeItem(Tt),window.location.reload()}};var Tt=window.location.href.replace(/[.\/:]/g,"");return localStorage&&localStorage.getItem(Tt)?(t.THEME=window.THEME=JSON.parse(localStorage.getItem(Tt)),t.Theme.set(ar.name,ar.lightenRatio,ar.tint,ar.tintRatio,ar.exclude)):t.THEME=window.THEME=null,t}(he||{});mt||Er();var Ar=["zog","zid","zss","zgo","zum","zot","zop","zil","zet","zob","zik","zta","zor","zogg","zogp","zogb","zogr","zogy","zogo","zogl","zogd","zimplify","zimify"],ni=[Rn,gn,$r,zn,_n,n,jr,kr,sr,lt,et,zr,ei,Fr,Jr,Gr,Vr,$e,Wr,yr,xr,Er,Dn];for(jn=0;jn<Ar.length;jn++)j[Ar[jn]]=he[Ar[jn]]=ni[jn];var jn;he.makeGlobals=function(t){Er(t)};var si=he.makeGlobals,oi=he;j.zim=he;var fi=he.chop,ui=he.shuffle,ci=he.pluck,di=he.rand,hi=he.seedRandom,gi=he.odds,pi=he.rarity,vi=he.repeats,yi=he.series,xi=he.loop,wi=he.getTIME,Rr=he.timeout,ri=he.interval,Ci=he.async,mi=he.couple,Ti=he.decouple,Ai=he.convertColor,ki=he.colorRange,Ei=he.lighten,Pi=he.darken,Mi=he.toColor,Ii=he.toAlpha,Si=he.toBW,Oi=he.invertColor,bi=he.zimEase,Li=he.spline,Bi=he.pointAlongCurve,Di=he.distanceAlongCurve,Yi=he.closestPointAlongCurve,Ri=he.transformPoints,_i=he.trimEndPoints,Xi=he.reversePoints,Ni=he.appendPoints,Fi=he.prependPoints,Gi=he.splitPoints,Vi=he.makeID,Wi=he.makeSyllable,Ui=he.makePrimitive,Qi=he.makeMath,qi=he.swapProperties,Zi=he.mobile,Ki=he.vee,Hi=he.extend,Ji=he.copy,$i=he.merge,ji=he.sortObject,zi=he.arraysEqual,el=he.arrayMinMax,tl=he.isEmpty,nl=he.isJSON,rl=he.isPick,il=he.decimals,ll=he.countDecimals,al=he.sign,sl=he.constrain,ol=he.dist,fl=he.rectIntersect,ul=he.boundsAroundPoints,cl=he.angle,dl=he.smoothStep,hl=he.unicodeToUTF,gl=he.capitalizeFirst,pl=he.Ajax,vl=he.Noise,yl=he.Point,xl=he.Bezier,wl=he.Boundary,Cl=he.GradientColor,ml=he.RadialColor,Tl=he.BitmapColor,Al=he.Damp,kl=he.Proportion,El=he.ProportionDamp,Pl=he.Dictionary,Ml=he.Hierarchy,Il=he.Pick,Sl=he.scrollX,Ol=he.scrollY,bl=he.windowWidth,Ll=he.windowHeight,Bl=he.browserZoom,Dl=he.getQueryString,Yl=he.swapHTML,Rl=he.urlEncode,_l=he.urlDecode,Xl=he.setCookie,Nl=he.getCookie,Fl=he.deleteCookie,Gl=he.Stage,Vl=he.StageGL,_r=he.Container,Wl=he.Shape,Ul=he.Bitmap,Ql=he.Sprite,ql=he.MovieClip,Zl=he.SVGContainer,Kl=he.CustomShape,Hl=he.Circle,On=he.Rectangle,Jl=he.Triangle,$l=he.Poly,jl=he.Line,zl=he.Squiggle,ea=he.Flare,ta=he.MultiFlare,na=he.FlareBox,Xr=he.Label,ra=he.LabelOnPath,ia=he.LabelOnArc,la=he.LabelLetters,aa=he.Emoji,sa=he.Button,oa=he.CheckBox,fa=he.RadioButtons,ua=he.Toggle,ca=he.Tip,da=he.Pane,ha=he.Panel,ga=he.Page,pa=he.Layer,va=he.Waiter,ya=he.ProgressBar,xa=he.Indicator,wa=he.TextInput,Ca=he.List,ma=he.Stepper,Ta=he.Slider,Aa=he.Selector,ka=he.Dial,Ea=he.Tabs,Pa=he.Pad,Ma=he.NumPad,Ia=he.DPad,Sa=he.Radial,Oa=he.RadialMenu,ba=he.ColorPicker,La=he.EmojiPicker,Ba=he.TextEditor,Da=he.Keyboard,Ya=he.Organizer,Ra=he.Connectors,_a=he.Marquee,Xa=he.Carousel,Na=he.Loader,Fa=he.TextArea,Ga=he.Tag,Va=he.localToGlobal,Wa=he.globalToLocal,Ua=he.localToLocal,Qa=he.addTo,qa=he.removeFrom,Za=he.added,Ka=he.centerReg,Ha=he.center,Ja=he.place,$a=he.placeReg,ja=he.pos,za=he.loc,es=he.mov,ts=he.sca,ns=he.alp,rs=he.vis,is=he.ble,ls=he.dye,as=he.hov,ss=he.rot,os=he.siz,fs=he.ske,us=he.reg,cs=he.top,ds=he.bot,hs=he.ord,gs=he.cur,ps=he.sha,vs=he.dep,ys=he.nam,xs=he.movement,ws=he.noMovement,Cs=he.tap,ms=he.noTap,Ts=he.hold,As=he.noHold,ks=he.change,Es=he.noChange,Ps=he.drag,Ms=he.noDrag,Is=he.dragBoundary,Ss=he.mouse,Os=he.noMouse,bs=he.wire,Ls=he.noWire,Bs=he.wired,Ds=he.noWired,Ys=he.bind,Rs=he.noBind,_s=he.transform,Xs=he.gesture,Ns=he.noGesture,Fs=he.gestureBoundary,Gs=he.effect,Vs=he.updateEffects,Ws=he.noEffect,Us=he.addPhysics,Qs=he.removePhysics,qs=he.hitTestPoint,Zs=he.hitTestReg,Ks=he.hitTestRect,Hs=he.hitTestCircle,Js=he.hitTestCircleRect,$s=he.hitTestCircles,js=he.hitTestBounds,zs=he.hitTestPath,eo=he.hitTestGrid,to=he.animate,no=he.stopAnimate,ro=he.pauseAnimate,io=he.wiggle,lo=he.scaleTo,ao=he.fit,so=he.boundsToGlobal,oo=he.resetBounds,fo=he.copyMatrix,uo=he.duplicate,co=he.expand,ho=he.setSwipe,go=he.setMask,po=he.outline,vo=he.blendmodes,yo=he.Pages,xo=he.Arrow,wo=he.HotSpots,Co=he.HotSpot,mo=he.Guide,To=he.Grid,Ao=he.Wrapper,Nr=he.Tile,ko=he.Pack,Eo=he.Beads,Po=he.Layout,Mo=he.Accessibility,Io=he.TextureActive,So=he.TextureActives,Oo=he.TextureActivesManager,bo=he.Manager,Lo=he.ResizeManager,Bo=he.TransformManager,Do=he.GuideManager,Yo=he.GridManager,Ro=he.LayoutManager,_o=he.SelectionSet,Xo=he.SelectionManager,No=he.Bind,Fo=he.Swipe,Go=he.Swiper,Vo=he.MotionController,Wo=he.GamePad,Uo=he.Portal,Qo=he.Physics,qo=he.TimeLine,Zo=he.BlurEffect,Ko=he.GlowEffect,Ho=he.ShadowEffect,Jo=he.ColorEffect,$o=he.MultiEffect,jo=he.AlphaEffect,zo=he.Pixel,ef=he.Parallax,tf=he.Flipper,nf=he.Book,rf=he.Scrambler,lf=he.Scroller,af=he.Dynamo,sf=he.Accelerator,of=he.Emitter,ff=he.Generator,uf=he.Pen,cf=he.SoundWave,df=he.Synth,hf=he.VR,gf=he.Frame,pf=he.Pic,vf=he.Aud,yf=he.Vid,xf=he.SVG,wf=he.SensorAsk,Cf=he.distill,mf=he.parseAudioSprite,Tf=he.previewAudioSprite,Af=he.svgToBitmap,kf=he.makeContent,Ef=he.fastFrame,Pf=he.addWires,Mf=he.setBlurDetect,If=he.Wonder,Sf=he.getLatestVersions,Of=he.PWA,bf=he.QR,Lf=he.GIF,ar=he.THEME;export{sf as Accelerator,Mo as Accessibility,pl as Ajax,jo as AlphaEffect,xo as Arrow,vf as Aud,Eo as Beads,xl as Bezier,No as Bind,Ul as Bitmap,Tl as BitmapColor,Zo as BlurEffect,nf as Book,wl as Boundary,sa as Button,Xa as Carousel,oa as CheckBox,Hl as Circle,Jo as ColorEffect,ba as ColorPicker,Ra as Connectors,_r as Container,Kl as CustomShape,Ia as DPad,Al as Damp,ka as Dial,Pl as Dictionary,af as Dynamo,of as Emitter,aa as Emoji,La as EmojiPicker,ea as Flare,na as FlareBox,tf as Flipper,gf as Frame,Lf as GIF,Wo as GamePad,ff as Generator,Ko as GlowEffect,Cl as GradientColor,To as Grid,Yo as GridManager,mo as Guide,Do as GuideManager,Ml as Hierarchy,Co as HotSpot,wo as HotSpots,xa as Indicator,Da as Keyboard,Xr as Label,la as LabelLetters,ia as LabelOnArc,ra as LabelOnPath,pa as Layer,Po as Layout,Ro as LayoutManager,jl as Line,Ca as List,Na as Loader,bo as Manager,_a as Marquee,Vo as MotionController,ql as MovieClip,$o as MultiEffect,ta as MultiFlare,vl as Noise,Ma as NumPad,Ya as Organizer,Of as PWA,ko as Pack,Pa as Pad,ga as Page,yo as Pages,da as Pane,ha as Panel,ef as Parallax,uf as Pen,Qo as Physics,pf as Pic,Il as Pick,zo as Pixel,yl as Point,$l as Poly,Uo as Portal,ya as ProgressBar,kl as Proportion,El as ProportionDamp,bf as QR,Sa as Radial,ml as RadialColor,Oa as RadialMenu,fa as RadioButtons,On as Rectangle,Lo as ResizeManager,xf as SVG,Zl as SVGContainer,rf as Scrambler,lf as Scroller,Xo as SelectionManager,_o as SelectionSet,Aa as Selector,wf as SensorAsk,Ho as ShadowEffect,Wl as Shape,Ta as Slider,cf as SoundWave,Ql as Sprite,zl as Squiggle,Gl as Stage,Vl as StageGL,ma as Stepper,Fo as Swipe,Go as Swiper,df as Synth,ar as THEME,Ea as Tabs,Ga as Tag,Fa as TextArea,Ba as TextEditor,wa as TextInput,Io as TextureActive,So as TextureActives,Oo as TextureActivesManager,Nr as Tile,qo as TimeLine,ca as Tip,ua as Toggle,Bo as TransformManager,Jl as Triangle,hf as VR,yf as Vid,va as Waiter,If as Wonder,Ao as Wrapper,Us as addPhysics,Qa as addTo,Pf as addWires,Za as added,ns as alp,cl as angle,to as animate,Ni as appendPoints,el as arrayMinMax,zi as arraysEqual,Ci as async,Ys as bind,is as ble,vo as blendmodes,ds as bot,ul as boundsAroundPoints,so as boundsToGlobal,Bl as browserZoom,gl as capitalizeFirst,Ha as center,Ka as centerReg,ks as change,fi as chop,Yi as closestPointAlongCurve,ki as colorRange,sl as constrain,Ai as convertColor,Ji as copy,fo as copyMatrix,ll as countDecimals,mi as couple,gs as cur,Pi as darken,il as decimals,Ti as decouple,oi as default,Fl as deleteCookie,vs as dep,ol as dist,Di as distanceAlongCurve,Cf as distill,Ps as drag,Is as dragBoundary,uo as duplicate,ls as dye,Gs as effect,co as expand,Hi as extend,Ef as fastFrame,ao as fit,Xs as gesture,Fs as gestureBoundary,Nl as getCookie,Sf as getLatestVersions,Dl as getQueryString,wi as getTIME,Wa as globalToLocal,js as hitTestBounds,Hs as hitTestCircle,Js as hitTestCircleRect,$s as hitTestCircles,eo as hitTestGrid,zs as hitTestPath,qs as hitTestPoint,Ks as hitTestRect,Zs as hitTestReg,Ts as hold,as as hov,ri as interval,Oi as invertColor,tl as isEmpty,nl as isJSON,rl as isPick,Ei as lighten,za as loc,Va as localToGlobal,Ua as localToLocal,xi as loop,kf as makeContent,si as makeGlobals,Vi as makeID,Qi as makeMath,Ui as makePrimitive,Wi as makeSyllable,$i as merge,Zi as mobile,Ss as mouse,es as mov,xs as movement,ys as nam,Rs as noBind,Es as noChange,Ms as noDrag,Ws as noEffect,Ns as noGesture,As as noHold,Os as noMouse,ws as noMovement,ms as noTap,Ls as noWire,Ds as noWired,gi as odds,hs as ord,po as outline,mf as parseAudioSprite,ro as pauseAnimate,Ja as place,$a as placeReg,ci as pluck,Bi as pointAlongCurve,ja as pos,Fi as prependPoints,Tf as previewAudioSprite,di as rand,pi as rarity,fl as rectIntersect,us as reg,qa as removeFrom,Qs as removePhysics,vi as repeats,oo as resetBounds,Xi as reversePoints,ss as rot,ts as sca,lo as scaleTo,Sl as scrollX,Ol as scrollY,hi as seedRandom,yi as series,Mf as setBlurDetect,Xl as setCookie,go as setMask,ho as setSwipe,ps as sha,ui as shuffle,al as sign,os as siz,fs as ske,dl as smoothStep,ji as sortObject,Li as spline,Gi as splitPoints,no as stopAnimate,Af as svgToBitmap,Yl as swapHTML,qi as swapProperties,Cs as tap,Rr as timeout,Ii as toAlpha,Si as toBW,Mi as toColor,cs as top,_s as transform,Ri as transformPoints,_i as trimEndPoints,hl as unicodeToUTF,Vs as updateEffects,_l as urlDecode,Rl as urlEncode,Ki as vee,rs as vis,io as wiggle,Ll as windowHeight,bl as windowWidth,bs as wire,Bs as wired,sr as zet,zn as zgo,gn as zid,et as zik,kr as zil,bi as zimEase,Dn as zimify,Er as zimplify,lt as zob,Rn as zog,Gr as zogb,xr as zogd,Fr as zogg,yr as zogl,Wr as zogo,Jr as zogp,Vr as zogr,$e as zogy,jr as zop,ei as zor,n as zot,$r as zss,zr as zta,_n as zum};
