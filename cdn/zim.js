(()=>{var ti=Object.create;var Nr=Object.defineProperty;var ni=Object.getOwnPropertyDescriptor;var ri=Object.getOwnPropertyNames;var ii=Object.getPrototypeOf,si=Object.prototype.hasOwnProperty;var ai=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(y,a)=>(typeof require<"u"?require:y)[a]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var oi=(e,y)=>()=>(y||e((y={exports:{}}).exports,y),y.exports);var li=(e,y,a,u)=>{if(y&&typeof y=="object"||typeof y=="function")for(let f of ri(y))!si.call(e,f)&&f!==a&&Nr(e,f,{get:()=>y[f],enumerable:!(u=ni(y,f))||u.enumerable});return e};var ui=(e,y,a)=>(a=e!=null?ti(ii(e)):{},li(y||!e||!e.__esModule?Nr(a,"default",{value:e,enumerable:!0}):a,e));var Fr=oi((kn,ur)=>{var ee=ee||{};ee.stageTransformable=!0,ee.extend=function(e,y){"use strict";function a(){this.constructor=e}return a.prototype=y.prototype,e.prototype=new a},ee.promote=function(e,y){"use strict";var a=e.prototype,u=Object.getPrototypeOf&&Object.getPrototypeOf(a)||a.__proto__;if(u)for(var f in a[(y+="_")+"constructor"]=u.constructor,u)a.hasOwnProperty(f)&&typeof u[f]=="function"&&(a[y+f]=u[f]);return e},ee.indexOf=function(e,y){"use strict";for(var a=0,u=e.length;a<u;a++)if(y===e[a])return a;return-1},function(){"use strict";function e(){throw"UID cannot be instantiated"}e._nextID=0,e.get=function(){return e._nextID++},ee.UID=e}(),ee.deprecate=function(e,y){"use strict";return function(){var a="Deprecated property or method '"+y+"'. See docs for info.";return console&&(console.warn?console.warn(a):console.log(a)),e&&e.apply(this,arguments)}},function(){"use strict";function e(a,u,f){this.type=a,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=!!u,this.cancelable=!!f,this.timeStamp=new Date().getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}var y=e.prototype;y.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0},y.stopPropagation=function(){this.propagationStopped=!0},y.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},y.remove=function(){this.removed=!0},y.clone=function(){return new e(this.type,this.bubbles,this.cancelable)},y.set=function(a){for(var u in a)this[u]=a[u];return this},y.toString=function(){return"[Event (type="+this.type+")]"},ee.Event=e}(),function(){"use strict";function e(){this._listeners=null,this._captureListeners=null}var y=e.prototype;e.initialize=function(a){a.addEventListener=y.addEventListener,a.on=y.on,a.removeEventListener=a.off=y.removeEventListener,a.removeAllEventListeners=y.removeAllEventListeners,a.hasEventListener=y.hasEventListener,a.dispatchEvent=y.dispatchEvent,a._dispatchEvent=y._dispatchEvent,a.willTrigger=y.willTrigger},y.addEventListener=function(a,u,f){var m=f?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{},D=m[a];return D&&this.removeEventListener(a,u,f),(D=m[a])?D.push(u):m[a]=[u],u},y.on=function(a,u,f,m,D,J){return u.handleEvent&&(f=f||u,u=u.handleEvent),f=f||this,this.addEventListener(a,function(se){u.call(f,se,D),m&&se.remove()},J)},y.removeEventListener=function(a,u,f){var m=f?this._captureListeners:this._listeners;if(m){var D=m[a];if(D){for(var J=0,se=D.length;J<se;J++)if(D[J]==u){se==1?delete m[a]:D.splice(J,1);break}}}},y.off=y.removeEventListener,y.removeAllEventListeners=function(a){a?(this._listeners&&delete this._listeners[a],this._captureListeners&&delete this._captureListeners[a]):this._listeners=this._captureListeners=null},y.dispatchEvent=function(a,u,f){if(typeof a=="string"){var m=this._listeners;if(!(u||m&&m[a]))return!0;a=new ee.Event(a,u,f)}else a.target&&a.clone&&(a=a.clone());try{a.target=this}catch(Te){}if(a.bubbles&&this.parent){for(var D=this,J=[D];D.parent;)J.push(D=D.parent);for(var se=J.length,we=se-1;0<=we&&!a.propagationStopped;we--)J[we]._dispatchEvent(a,1+(we==0));for(we=1;we<se&&!a.propagationStopped;we++)J[we]._dispatchEvent(a,3)}else this._dispatchEvent(a,2);return!a.defaultPrevented},y.hasEventListener=function(a){var u=this._listeners,f=this._captureListeners;return!!(u&&u[a]||f&&f[a])},y.willTrigger=function(a){for(var u=this;u;){if(u.hasEventListener(a))return!0;u=u.parent}return!1},y.toString=function(){return"[EventDispatcher]"},y._dispatchEvent=function(a,u){var f,m,D=u<=2?this._captureListeners:this._listeners;if(a&&D&&(m=D[a.type])&&(f=m.length)){try{a.currentTarget=this}catch(we){}try{a.eventPhase=0|u}catch(we){}a.removed=!1,m=m.slice();for(var J=0;J<f&&!a.immediatePropagationStopped;J++){var se=m[J];se.handleEvent?se.handleEvent(a):se(a),a.removed&&(this.off(a.type,se,u==1),a.removed=!1)}}u===2&&this._dispatchEvent(a,2.1)},ee.EventDispatcher=e}(),function(){"use strict";function e(){throw"Ticker cannot be instantiated."}e.RAF_SYNCHED="synched",e.RAF="raf",e.TIMEOUT="timeout",e.timingMode=null,e.maxDelta=0,e.paused=!1,e.removeEventListener=null,e.removeAllEventListeners=null,e.dispatchEvent=null,e.hasEventListener=null,e._listeners=null,ee.EventDispatcher.initialize(e),e._addEventListener=e.addEventListener,e.addEventListener=function(){return e._inited||e.init(),e._addEventListener.apply(e,arguments)},e._inited=!1,e._startTime=0,e._pausedTime=0,e._ticks=0,e._pausedTicks=0,e._interval=50,e._lastTime=0,e._times=null,e._tickTimes=null,e._timerId=null,e._raf=!0,e._setInterval=function(u){e._interval=u,e._inited&&e._setupTick()},e.setInterval=ee.deprecate(e._setInterval,"Ticker.setInterval"),e._getInterval=function(){return e._interval},e.getInterval=ee.deprecate(e._getInterval,"Ticker.getInterval"),e._setFPS=function(u){e._setInterval(1e3/u)},e.setFPS=ee.deprecate(e._setFPS,"Ticker.setFPS"),e._getFPS=function(){return 1e3/e._interval},e.getFPS=ee.deprecate(e._getFPS,"Ticker.getFPS");try{Object.defineProperties(e,{interval:{get:e._getInterval,set:e._setInterval},framerate:{get:e._getFPS,set:e._setFPS}})}catch(u){console.log(u)}e.init=function(){e._inited||(e._inited=!0,e._times=[],e._tickTimes=[],e._startTime=e._getTime(),e._times.push(e._lastTime=0),e.interval=e._interval)},e.reset=function(){var u;e._raf?(u=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame)&&u(e._timerId):clearTimeout(e._timerId),e.removeAllEventListeners("tick"),e._timerId=e._times=e._tickTimes=null,e._startTime=e._lastTime=e._ticks=e._pausedTime=0,e._inited=!1},e.getMeasuredTickTime=function(u){var f=0,m=e._tickTimes;if(!m||m.length<1)return-1;u=Math.min(m.length,u||0|e._getFPS());for(var D=0;D<u;D++)f+=m[D];return f/u},e.getMeasuredFPS=function(u){var f=e._times;return!f||f.length<2?-1:(u=Math.min(f.length-1,u||0|e._getFPS()),1e3/((f[0]-f[u])/u))},e.getTime=function(u){return e._startTime?e._getTime()-(u?e._pausedTime:0):-1},e.getEventTime=function(u){return e._startTime?(e._lastTime||e._startTime)-(u?e._pausedTime:0):-1},e.getTicks=function(u){return e._ticks-(u?e._pausedTicks:0)},e._handleSynch=function(){e._timerId=null,e._setupTick(),e._getTime()-e._lastTime>=.97*(e._interval-1)&&e._tick()},e._handleRAF=function(){e._timerId=null,e._setupTick(),e._tick()},e._handleTimeout=function(){e._timerId=null,e._setupTick(),e._tick()},e._setupTick=function(){if(e._timerId==null){var u=e.timingMode;if(u==e.RAF_SYNCHED||u==e.RAF){var f=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(f)return e._timerId=f(u==e.RAF?e._handleRAF:e._handleSynch),void(e._raf=!0)}e._raf=!1,e._timerId=setTimeout(e._handleTimeout,e._interval)}},e._tick=function(){var u,f,m=e.paused,D=e._getTime(),J=D-e._lastTime;for(e._lastTime=D,e._ticks++,m&&(e._pausedTicks++,e._pausedTime+=J),e.hasEventListener("tick")&&(u=new ee.Event("tick"),f=e.maxDelta,u.delta=f&&f<J?f:J,u.paused=m,u.time=D,u.runTime=D-e._pausedTime,e.dispatchEvent(u)),e._tickTimes.unshift(e._getTime()-D);100<e._tickTimes.length;)e._tickTimes.pop();for(e._times.unshift(D);100<e._times.length;)e._times.pop()};var y=window,a=y.performance.now||y.performance.mozNow||y.performance.msNow||y.performance.oNow||y.performance.webkitNow;e._getTime=function(){return(a&&a.call(y.performance)||new Date().getTime())-e._startTime},ee.Ticker=e}(),function(){"use strict";function e(a){this.readyState=a.readyState,this._video=a,this._canvas=null,this._lastTime=-1,this.readyState<2&&a.addEventListener("canplaythrough",this._videoReady.bind(this))}var y=e.prototype;y.getImage=function(){if(!(this.readyState<2)){var a,u=this._canvas,f=this._video;return u||((u=this._canvas=ee.createCanvas?ee.createCanvas():document.createElement("canvas")).width=f.videoWidth,u.height=f.videoHeight),2<=f.readyState&&f.currentTime!==this._lastTime&&((a=u.getContext("2d")).clearRect(0,0,u.width,u.height),a.drawImage(f,0,0,u.width,u.height),this._lastTime=f.currentTime),u}},y._videoReady=function(){this.readyState=2},ee.VideoBuffer=e}(),function(){"use strict";function e(a,u,f,m,D,J,se,we,Te,t,r){this.Event_constructor(a,u,f),this.stageX=m,this.stageY=D,this.rawX=Te==null?m:Te,this.rawY=t==null?D:t,this.nativeEvent=J,this.pointerID=se,this.primary=!!we,this.relatedTarget=r}var y=ee.extend(e,ee.Event);y._get_localX=function(){return this.currentTarget.globalToLocal(this.rawX,this.rawY).x},y._get_localY=function(){return this.currentTarget.globalToLocal(this.rawX,this.rawY).y},y._get_isTouch=function(){return this.pointerID!==-1};try{Object.defineProperties(y,{localX:{get:y._get_localX},localY:{get:y._get_localY},isTouch:{get:y._get_isTouch}})}catch(a){}y.clone=function(){return new e(this.type,this.bubbles,this.cancelable,this.stageX,this.stageY,this.nativeEvent,this.pointerID,this.primary,this.rawX,this.rawY)},y.toString=function(){return"[MouseEvent (type="+this.type+" stageX="+this.stageX+" stageY="+this.stageY+")]"},ee.MouseEvent=ee.promote(e,"Event")}(),function(){"use strict";function e(a,u,f,m,D,J){this.setValues(a,u,f,m,D,J)}var y=e.prototype;e.DEG_TO_RAD=Math.PI/180,e.identity=null,y.setValues=function(a,u,f,m,D,J){return this.a=a==null?1:a,this.b=u||0,this.c=f||0,this.d=m==null?1:m,this.tx=D||0,this.ty=J||0,this},y.append=function(a,u,f,m,D,J){var se=this.a,we=this.b,Te=this.c,t=this.d;return a==1&&u==0&&f==0&&m==1||(this.a=se*a+Te*u,this.b=we*a+t*u,this.c=se*f+Te*m,this.d=we*f+t*m),this.tx=se*D+Te*J+this.tx,this.ty=we*D+t*J+this.ty,this},y.prepend=function(a,u,f,m,D,J){var se=this.a,we=this.c,Te=this.tx;return this.a=a*se+f*this.b,this.b=u*se+m*this.b,this.c=a*we+f*this.d,this.d=u*we+m*this.d,this.tx=a*Te+f*this.ty+D,this.ty=u*Te+m*this.ty+J,this},y.appendMatrix=function(a){return this.append(a.a,a.b,a.c,a.d,a.tx,a.ty)},y.prependMatrix=function(a){return this.prepend(a.a,a.b,a.c,a.d,a.tx,a.ty)},y.appendTransform=function(a,u,f,m,D,J,se,we,Te){var t,r=D%360?(r=D*e.DEG_TO_RAD,t=Math.cos(r),Math.sin(r)):(t=1,0);return J||se?(J*=e.DEG_TO_RAD,se*=e.DEG_TO_RAD,this.append(Math.cos(se),Math.sin(se),-Math.sin(J),Math.cos(J),a,u),this.append(t*f,r*f,-r*m,t*m,0,0)):this.append(t*f,r*f,-r*m,t*m,a,u),(we||Te)&&(this.tx-=we*this.a+Te*this.c,this.ty-=we*this.b+Te*this.d),this},y.prependTransform=function(a,u,f,m,D,J,se,we,Te){var t,r=D%360?(r=D*e.DEG_TO_RAD,t=Math.cos(r),Math.sin(r)):(t=1,0);return(we||Te)&&(this.tx-=we,this.ty-=Te),J||se?(J*=e.DEG_TO_RAD,se*=e.DEG_TO_RAD,this.prepend(t*f,r*f,-r*m,t*m,0,0),this.prepend(Math.cos(se),Math.sin(se),-Math.sin(J),Math.cos(J),a,u)):this.prepend(t*f,r*f,-r*m,t*m,a,u),this},y.rotate=function(D){D*=e.DEG_TO_RAD;var u=Math.cos(D),f=Math.sin(D),m=this.a,D=this.b;return this.a=m*u+this.c*f,this.b=D*u+this.d*f,this.c=-m*f+this.c*u,this.d=-D*f+this.d*u,this},y.skew=function(a,u){return a*=e.DEG_TO_RAD,u*=e.DEG_TO_RAD,this.append(Math.cos(u),Math.sin(u),-Math.sin(a),Math.cos(a),0,0),this},y.scale=function(a,u){return this.a*=a,this.b*=a,this.c*=u,this.d*=u,this},y.translate=function(a,u){return this.tx+=this.a*a+this.c*u,this.ty+=this.b*a+this.d*u,this},y.identity=function(){return this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this},y.invert=function(){var a=this.a,u=this.b,f=this.c,m=this.d,D=this.tx,J=a*m-u*f;return this.a=m/J,this.b=-u/J,this.c=-f/J,this.d=a/J,this.tx=(f*this.ty-m*D)/J,this.ty=-(a*this.ty-u*D)/J,this},y.isIdentity=function(){return this.tx===0&&this.ty===0&&this.a===1&&this.b===0&&this.c===0&&this.d===1},y.equals=function(a){return this.tx===a.tx&&this.ty===a.ty&&this.a===a.a&&this.b===a.b&&this.c===a.c&&this.d===a.d},y.transformPoint=function(a,u,f){return(f=f||{}).x=a*this.a+u*this.c+this.tx,f.y=a*this.b+u*this.d+this.ty,f},y.decompose=function(a){a==null&&(a={}),a.x=this.tx,a.y=this.ty,a.scaleX=Math.sqrt(this.a*this.a+this.b*this.b),a.scaleY=Math.sqrt(this.c*this.c+this.d*this.d);var u=Math.atan2(-this.c,this.d),f=Math.atan2(this.b,this.a);return Math.abs(1-u/f)<1e-5?(a.rotation=f/e.DEG_TO_RAD,this.a<0&&0<=this.d&&(a.rotation+=a.rotation<=0?180:-180),a.skewX=a.skewY=0):(a.skewX=u/e.DEG_TO_RAD,a.skewY=f/e.DEG_TO_RAD),a},y.copy=function(a){return this.setValues(a.a,a.b,a.c,a.d,a.tx,a.ty)},y.clone=function(){return new e(this.a,this.b,this.c,this.d,this.tx,this.ty)},y.toString=function(){return"[Matrix2D (a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+")]"},e.identity=new e,ee.Matrix2D=e}(),function(){"use strict";function e(a,u,f,m,D){this.setValues(a,u,f,m,D)}var y=e.prototype;y.setValues=function(a,u,f,m,D){return this.visible=a==null||!!a,this.alpha=u==null?1:u,this.shadow=f,this.compositeOperation=m,this.matrix=D||this.matrix&&this.matrix.identity()||new ee.Matrix2D,this},y.append=function(a,u,f,m,D){return this.alpha*=u,this.shadow=f||this.shadow,this.compositeOperation=m||this.compositeOperation,this.visible=this.visible&&a,D&&this.matrix.appendMatrix(D),this},y.prepend=function(a,u,f,m,D){return this.alpha*=u,this.shadow=this.shadow||f,this.compositeOperation=this.compositeOperation||m,this.visible=this.visible&&a,D&&this.matrix.prependMatrix(D),this},y.identity=function(){return this.visible=!0,this.alpha=1,this.shadow=this.compositeOperation=null,this.matrix.identity(),this},y.clone=function(){return new e(this.alpha,this.shadow,this.compositeOperation,this.visible,this.matrix.clone())},ee.DisplayProps=e}(),function(){"use strict";function e(a,u){this.setValues(a,u)}var y=e.prototype;y.setValues=function(a,u){return this.x=a||0,this.y=u||0,this},y.copy=function(a){return this.x=a.x,this.y=a.y,this},y.clone=function(){return new e(this.x,this.y)},y.toString=function(){return"[Point (x="+this.x+" y="+this.y+")]"},ee.Point=e}(),function(){"use strict";function e(a,u,f,m){this.setValues(a,u,f,m)}var y=e.prototype;y.setValues=function(a,u,f,m){return this.x=a||0,this.y=u||0,this.width=f||0,this.height=m||0,this},y.extend=function(a,u,f,m){return m=m||0,a+(f=f||0)>this.x+this.width&&(this.width=a+f-this.x),u+m>this.y+this.height&&(this.height=u+m-this.y),a<this.x&&(this.width+=this.x-a,this.x=a),u<this.y&&(this.height+=this.y-u,this.y=u),this},y.pad=function(a,u,f,m){return this.x-=u,this.y-=a,this.width+=u+m,this.height+=a+f,this},y.copy=function(a){return this.setValues(a.x,a.y,a.width,a.height)},y.contains=function(a,u,f,m){return f=f||0,m=m||0,a>=this.x&&a+f<=this.x+this.width&&u>=this.y&&u+m<=this.y+this.height},y.union=function(a){return this.clone().extend(a.x,a.y,a.width,a.height)},y.intersection=function(D){var u=D.x,f=D.y,m=u+D.width,D=f+D.height;return this.x>u&&(u=this.x),this.y>f&&(f=this.y),this.x+this.width<m&&(m=this.x+this.width),this.y+this.height<D&&(D=this.y+this.height),m<=u||D<=f?null:new e(u,f,m-u,D-f)},y.intersects=function(a){return a.x<=this.x+this.width&&this.x<=a.x+a.width&&a.y<=this.y+this.height&&this.y<=a.y+a.height},y.isEmpty=function(){return this.width<=0||this.height<=0},y.clone=function(){return new e(this.x,this.y,this.width,this.height)},y.toString=function(){return"[Rectangle (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+")]"},ee.Rectangle=e}(),function(){"use strict";function e(a,u,f,m,D,J,se){a.addEventListener&&(this.target=a,this.overLabel=f==null?"over":f,this.outLabel=u==null?"out":u,this.downLabel=m==null?"down":m,this.play=D,this._isPressed=!1,this._isOver=!1,this._enabled=!1,a.mouseChildren=!1,this.enabled=!0,this.handleEvent({}),J&&(se&&(J.actionsEnabled=!1,J.gotoAndStop&&J.gotoAndStop(se)),a.hitArea=J))}var y=e.prototype;y._setEnabled=function(a){var u;a!=this._enabled&&(u=this.target,(this._enabled=a)?(u.cursor="pointer",u.addEventListener("rollover",this),u.addEventListener("rollout",this),u.addEventListener("mousedown",this),u.addEventListener("pressup",this),u._reset&&(u.__reset=u._reset,u._reset=this._reset)):(u.cursor=null,u.removeEventListener("rollover",this),u.removeEventListener("rollout",this),u.removeEventListener("mousedown",this),u.removeEventListener("pressup",this),u.__reset&&(u._reset=u.__reset,delete u.__reset)))},y.setEnabled=ee.deprecate(y._setEnabled,"ButtonHelper.setEnabled"),y._getEnabled=function(){return this._enabled},y.getEnabled=ee.deprecate(y._getEnabled,"ButtonHelper.getEnabled");try{Object.defineProperties(y,{enabled:{get:y._getEnabled,set:y._setEnabled}})}catch(a){}y.toString=function(){return"[ButtonHelper]"},y.handleEvent=function(f){var u=this.target,f=f.type,f=f=="mousedown"?(this._isPressed=!0,this.downLabel):f=="pressup"?(this._isPressed=!1,this._isOver?this.overLabel:this.outLabel):f=="rollover"?(this._isOver=!0,this._isPressed?this.downLabel:this.overLabel):(this._isOver=!1,this._isPressed?this.overLabel:this.outLabel);this.play?u.gotoAndPlay&&u.gotoAndPlay(f):u.gotoAndStop&&u.gotoAndStop(f)},y._reset=function(){var a=this.paused;this.__reset(),this.paused=a},ee.ButtonHelper=e}(),function(){"use strict";function e(a,u,f,m){this.color=a||"black",this.offsetX=u||0,this.offsetY=f||0,this.blur=m||0}var y=e.prototype;e.identity=new e("transparent",0,0,0),y.toString=function(){return"[Shadow]"},y.clone=function(){return new e(this.color,this.offsetX,this.offsetY,this.blur)},ee.Shadow=e}(),function(){"use strict";function e(a){this.EventDispatcher_constructor(),this.complete=!0,this.framerate=0,this._animations=null,this._frames=null,this._images=null,this._data=null,this._loadCount=0,this._frameHeight=0,this._frameWidth=0,this._numFrames=0,this._regX=0,this._regY=0,this._spacing=0,this._margin=0,this._parseData(a)}var y=ee.extend(e,ee.EventDispatcher);y._getAnimations=function(){return this._animations.slice()},y.getAnimations=ee.deprecate(y._getAnimations,"SpriteSheet.getAnimations");try{Object.defineProperties(y,{animations:{get:y._getAnimations}})}catch(a){}y.getNumFrames=function(a){return a==null?this._frames?this._frames.length:this._numFrames||0:(a=this._data[a],a==null?0:a.frames.length)},y.getAnimation=function(a){return this._data[a]},y.getFrame=function(a){var u;return this._frames&&(u=this._frames[a])?u:null},y.getFrameBounds=function(a,u){return a=this.getFrame(a),a?(u||new ee.Rectangle).setValues(-a.regX,-a.regY,a.rect.width,a.rect.height):null},y.toString=function(){return"[SpriteSheet]"},y.clone=function(){throw"SpriteSheet cannot be cloned."},y._parseData=function(a){var u,f,m,D;if(a!=null){if(this.framerate=a.framerate||0,a.images&&0<(f=a.images.length))for(i=this._images=[],u=0;u<f;u++){var J,se=a.images[u];typeof se=="string"&&(J=se,(se=document.createElement("img")).src=J),i.push(se),se.getContext||se.naturalWidth||(this._loadCount++,this.complete=!1,function(o,l){se.onload=function(){o._handleImageLoad(l)}}(this,J),function(o,l){se.onerror=function(){o._handleImageError(l)}}(this,J))}if(a.frames!=null)if(Array.isArray(a.frames))for(this._frames=[],u=0,f=(i=a.frames).length;u<f;u++){var we=i[u];this._frames.push({image:this._images[we[4]||0],rect:new ee.Rectangle(we[0],we[1],we[2],we[3]),regX:we[5]||0,regY:we[6]||0})}else m=a.frames,this._frameWidth=m.width,this._frameHeight=m.height,this._regX=m.regX||0,this._regY=m.regY||0,this._spacing=m.spacing||0,this._margin=m.margin||0,this._numFrames=m.count,this._loadCount==0&&this._calculateFrames();if(this._animations=[],(m=a.animations)!=null)for(D in this._data={},m){var Te={name:D},t=m[D];if(typeof t=="number")i=Te.frames=[t];else if(Array.isArray(t))if(t.length==1)Te.frames=[t[0]];else for(Te.speed=t[3],Te.next=t[2],i=Te.frames=[],u=t[0];u<=t[1];u++)i.push(u);else{Te.speed=t.speed,Te.next=t.next;var r=t.frames,i=Te.frames=typeof r=="number"?[r]:r.slice(0)}Te.next!==!0&&Te.next!==void 0||(Te.next=D),(Te.next===!1||i.length<2&&Te.next==D)&&(Te.next=null),Te.speed||(Te.speed=1),this._animations.push(D),this._data[D]=Te}}},y._handleImageLoad=function(a){--this._loadCount==0&&(this._calculateFrames(),this.complete=!0,this.dispatchEvent("complete"))},y._handleImageError=function(a){var u=new ee.Event("error");u.src=a,this.dispatchEvent(u),--this._loadCount==0&&this.dispatchEvent("complete")},y._calculateFrames=function(){if(!this._frames&&this._frameWidth!=0){this._frames=[];var a=this._numFrames||1e5,u=0,f=this._frameWidth,m=this._frameHeight,D=this._spacing,J=this._margin;e:for(var se=0,we=this._images;se<we.length;se++)for(var Te=we[se],t=Te.width||Te.naturalWidth,r=Te.height||Te.naturalHeight,i=J;i<=r-J-m;){for(var o=J;o<=t-J-f;){if(a<=u)break e;u++,this._frames.push({image:Te,rect:new ee.Rectangle(o,i,f,m),regX:this._regX,regY:this._regY}),o+=f+D}i+=m+D}this._numFrames=u}},ee.SpriteSheet=ee.promote(e,"EventDispatcher")}(),function(){"use strict";function e(){this.command=null,this._stroke=null,this._strokeStyle=null,this._oldStrokeStyle=null,this._strokeDash=null,this._oldStrokeDash=null,this._strokeIgnoreScale=!1,this._fill=null,this._instructions=[],this._commitIndex=0,this._activeInstructions=[],this._dirty=!1,this._storeIndex=0,this.clear()}var y=e.prototype,a=e;e.getRGB=function(f,m,D,J){return f!=null&&D==null&&(J=m,D=255&f,m=f>>8&255,f=f>>16&255),J==null?"rgb("+f+","+m+","+D+")":"rgba("+f+","+m+","+D+","+J+")"},e.getHSL=function(f,m,D,J){return J==null?"hsl("+f%360+","+m+"%,"+D+"%)":"hsla("+f%360+","+m+"%,"+D+"%,"+J+")"},e.BASE_64={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,0:52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,"+":62,"/":63},e.STROKE_CAPS_MAP=["butt","round","square"],e.STROKE_JOINTS_MAP=["miter","round","bevel"];var u=ee.createCanvas?ee.createCanvas():document.createElement("canvas");u.getContext&&(e._ctx=u.getContext("2d"),u.width=u.height=1),y._getInstructions=function(){return this._updateInstructions(),this._instructions},y.getInstructions=ee.deprecate(y._getInstructions,"Graphics.getInstructions");try{Object.defineProperties(y,{instructions:{get:y._getInstructions}})}catch(f){}y.isEmpty=function(){return!(this._instructions.length||this._activeInstructions.length)},y.draw=function(f,m){this._updateInstructions();for(var D=this._instructions,J=this._storeIndex,se=D.length;J<se;J++)D[J].exec(f,m)},y.drawAsPath=function(f){this._updateInstructions();for(var m,D=this._instructions,J=this._storeIndex,se=D.length;J<se;J++)(m=D[J]).path!==!1&&m.exec(f)},y.moveTo=function(f,m){return this.append(new a.MoveTo(f,m),!0)},y.lineTo=function(f,m){return this.append(new a.LineTo(f,m))},y.arcTo=function(f,m,D,J,se){return this.append(new a.ArcTo(f,m,D,J,se))},y.arc=function(f,m,D,J,se,we){return this.append(new a.Arc(f,m,D,J,se,we))},y.quadraticCurveTo=function(f,m,D,J){return this.append(new a.QuadraticCurveTo(f,m,D,J))},y.bezierCurveTo=function(f,m,D,J,se,we){return this.append(new a.BezierCurveTo(f,m,D,J,se,we))},y.rect=function(f,m,D,J){return this.append(new a.Rect(f,m,D,J))},y.closePath=function(){return this._activeInstructions.length?this.append(new a.ClosePath):this},y.clear=function(){return this._instructions.length=this._activeInstructions.length=this._commitIndex=0,this._strokeStyle=this._oldStrokeStyle=this._stroke=this._fill=this._strokeDash=this._oldStrokeDash=null,this._dirty=this._strokeIgnoreScale=!1,this},y.beginFill=function(f){return this._setFill(f?new a.Fill(f):null)},y.beginLinearGradientFill=function(f,m,D,J,se,we){return this._setFill(new a.Fill().linearGradient(f,m,D,J,se,we))},y.beginRadialGradientFill=function(f,m,D,J,se,we,Te,t){return this._setFill(new a.Fill().radialGradient(f,m,D,J,se,we,Te,t))},y.beginBitmapFill=function(f,m,D){return this._setFill(new a.Fill(null,D).bitmap(f,m))},y.endFill=function(){return this.beginFill()},y.setStrokeStyle=function(f,m,D,J,se){return this._updateInstructions(!0),this._strokeStyle=this.command=new a.StrokeStyle(f,m,D,J,se),this._stroke&&(this._stroke.ignoreScale=se),this._strokeIgnoreScale=se,this},y.setStrokeDash=function(f,m){return this._updateInstructions(!0),this._strokeDash=this.command=new a.StrokeDash(f,m),this},y.beginStroke=function(f){return this._setStroke(f?new a.Stroke(f):null)},y.beginLinearGradientStroke=function(f,m,D,J,se,we){return this._setStroke(new a.Stroke().linearGradient(f,m,D,J,se,we))},y.beginRadialGradientStroke=function(f,m,D,J,se,we,Te,t){return this._setStroke(new a.Stroke().radialGradient(f,m,D,J,se,we,Te,t))},y.beginBitmapStroke=function(f,m){return this._setStroke(new a.Stroke().bitmap(f,m))},y.endStroke=function(){return this.beginStroke()},y.curveTo=y.quadraticCurveTo,y.drawRect=y.rect,y.drawRoundRect=function(f,m,D,J,se){return this.drawRoundRectComplex(f,m,D,J,se,se,se,se)},y.drawRoundRectComplex=function(f,m,D,J,se,we,Te,t){return this.append(new a.RoundRect(f,m,D,J,se,we,Te,t))},y.drawCircle=function(f,m,D){return this.append(new a.Circle(f,m,D))},y.drawEllipse=function(f,m,D,J){return this.append(new a.Ellipse(f,m,D,J))},y.drawPolyStar=function(f,m,D,J,se,we){return this.append(new a.PolyStar(f,m,D,J,se,we))},y.drawPolygon=function(f,m){return this.append(new a.Polygon(f,m))},y.append=function(f,m){return this._activeInstructions.push(f),this.command=f,m||(this._dirty=!0),this},y.decodePath=function(f){for(var m=[this.moveTo,this.lineTo,this.quadraticCurveTo,this.bezierCurveTo,this.closePath],D=[2,2,4,6,0],J=0,se=f.length,we=[],Te=0,t=0,r=e.BASE_64;J<se;){var i=f.charAt(J),o=r[i],l=o>>3,c=m[l];if(!c||3&o)throw"bad path data (@"+J+"): "+i;var p=D[l];l||(Te=t=0),J++;for(var v=2+(o>>2&1),w=we.length=0;w<p;w++){var b=(_=r[f.charAt(J)])>>5?-1:1,_=(31&_)<<6|r[f.charAt(J+1)];v==3&&(_=_<<6|r[f.charAt(J+2)]),_=b*_/10,w%2?Te=_+=Te:t=_+=t,we[w]=_,J+=v}c.apply(this,we)}return this},y.store=function(){return this._updateInstructions(!0),this._storeIndex=this._instructions.length,this},y.unstore=function(){return this._storeIndex=0,this},y.clone=function(){var f=new e;return f.command=this.command,f._stroke=this._stroke,f._strokeStyle=this._strokeStyle,f._strokeDash=this._strokeDash,f._strokeIgnoreScale=this._strokeIgnoreScale,f._fill=this._fill,f._instructions=this._instructions.slice(),f._commitIndex=this._commitIndex,f._activeInstructions=this._activeInstructions.slice(),f._dirty=this._dirty,f._storeIndex=this._storeIndex,f},y.toString=function(){return"[Graphics]"},y.mt=y.moveTo,y.lt=y.lineTo,y.at=y.arcTo,y.bt=y.bezierCurveTo,y.qt=y.quadraticCurveTo,y.a=y.arc,y.r=y.rect,y.cp=y.closePath,y.c=y.clear,y.f=y.beginFill,y.lf=y.beginLinearGradientFill,y.rf=y.beginRadialGradientFill,y.bf=y.beginBitmapFill,y.ef=y.endFill,y.ss=y.setStrokeStyle,y.sd=y.setStrokeDash,y.s=y.beginStroke,y.ls=y.beginLinearGradientStroke,y.rs=y.beginRadialGradientStroke,y.bs=y.beginBitmapStroke,y.es=y.endStroke,y.dr=y.drawRect,y.rr=y.drawRoundRect,y.rc=y.drawRoundRectComplex,y.dc=y.drawCircle,y.de=y.drawEllipse,y.dp=y.drawPolyStar,y.pg=y.drawPolygon,y.p=y.decodePath,y._updateInstructions=function(f){var m=this._instructions,D=this._activeInstructions,J=this._commitIndex;if(this._dirty&&D.length){m.length=J,m.push(e.beginCmd);var se=D.length,we=m.length;m.length=we+se;for(var Te=0;Te<se;Te++)m[Te+we]=D[Te];this._fill&&m.push(this._fill),this._stroke&&(this._strokeDash!==this._oldStrokeDash&&m.push(this._strokeDash),this._strokeStyle!==this._oldStrokeStyle&&m.push(this._strokeStyle),f&&(this._oldStrokeStyle=this._strokeStyle,this._oldStrokeDash=this._strokeDash),m.push(this._stroke)),this._dirty=!1}f&&(D.length=0,this._commitIndex=m.length)},y._setFill=function(f){return this._updateInstructions(!0),this.command=this._fill=f,this},y._setStroke=function(f){return this._updateInstructions(!0),(this.command=this._stroke=f)&&(f.ignoreScale=this._strokeIgnoreScale),this},(a.LineTo=function(f,m){this.x=f,this.y=m}).prototype.exec=function(f){f.lineTo(this.x,this.y)},(a.MoveTo=function(f,m){this.x=f,this.y=m}).prototype.exec=function(f){f.moveTo(this.x,this.y)},(a.ArcTo=function(f,m,D,J,se){this.x1=f,this.y1=m,this.x2=D,this.y2=J,this.radius=se}).prototype.exec=function(f){f.arcTo(this.x1,this.y1,this.x2,this.y2,this.radius)},(a.Arc=function(f,m,D,J,se,we){this.x=f,this.y=m,this.radius=D,this.startAngle=J,this.endAngle=se,this.anticlockwise=!!we}).prototype.exec=function(f){f.arc(this.x,this.y,this.radius,this.startAngle,this.endAngle,this.anticlockwise)},(a.QuadraticCurveTo=function(f,m,D,J){this.cpx=f,this.cpy=m,this.x=D,this.y=J}).prototype.exec=function(f){f.quadraticCurveTo(this.cpx,this.cpy,this.x,this.y)},(a.BezierCurveTo=function(f,m,D,J,se,we){this.cp1x=f,this.cp1y=m,this.cp2x=D,this.cp2y=J,this.x=se,this.y=we}).prototype.exec=function(f){f.bezierCurveTo(this.cp1x,this.cp1y,this.cp2x,this.cp2y,this.x,this.y)},(a.Rect=function(f,m,D,J){this.x=f,this.y=m,this.w=D,this.h=J}).prototype.exec=function(f){f.rect(this.x,this.y,this.w,this.h)},(a.ClosePath=function(){}).prototype.exec=function(f){f.closePath()},(a.BeginPath=function(){}).prototype.exec=function(f){f.beginPath()},(y=(a.Fill=function(f,m){this.style=f,this.matrix=m}).prototype).exec=function(f){var m;this.style&&(f.fillStyle=this.style,(m=this.matrix)&&(f.save(),f.transform(m.a,m.b,m.c,m.d,m.tx,m.ty)),f.fill(),m&&f.restore())},y.linearGradient=function(f,m,D,J,se,we){for(var Te=this.style=e._ctx.createLinearGradient(D,J,se,we),t=0,r=f.length;t<r;t++)Te.addColorStop(m[t],f[t]);return Te.props={colors:f,ratios:m,x0:D,y0:J,x1:se,y1:we,type:"linear"},this},y.radialGradient=function(f,m,D,J,se,we,Te,t){for(var r=this.style=e._ctx.createRadialGradient(D,J,se,we,Te,t),i=0,o=f.length;i<o;i++)r.addColorStop(m[i],f[i]);return r.props={colors:f,ratios:m,x0:D,y0:J,r0:se,x1:we,y1:Te,r1:t,type:"radial"},this},y.bitmap=function(f,m,D){return D&&(this.matrix=D),(f.naturalWidth||f.getContext||2<=f.readyState)&&((this.style=e._ctx.createPattern(f,m||"")).props={image:f,repetition:m,type:"bitmap"}),this},y.path=!1,(y=(a.Stroke=function(f,m){this.style=f,this.ignoreScale=m}).prototype).exec=function(f){this.style&&(f.strokeStyle=this.style,this.ignoreScale&&(f.save(),f.setTransform(1,0,0,1,0,0)),f.stroke(),this.ignoreScale&&f.restore())},y.linearGradient=a.Fill.prototype.linearGradient,y.radialGradient=a.Fill.prototype.radialGradient,y.bitmap=a.Fill.prototype.bitmap,y.path=!1,(y=(a.StrokeStyle=function(f,m,D,J,se){this.width=f,this.caps=m,this.joints=D,this.miterLimit=J,this.ignoreScale=se}).prototype).exec=function(f){f.lineWidth=this.width==null?"1":this.width,f.lineCap=this.caps==null?"butt":isNaN(this.caps)?this.caps:e.STROKE_CAPS_MAP[this.caps],f.lineJoin=this.joints==null?"miter":isNaN(this.joints)?this.joints:e.STROKE_JOINTS_MAP[this.joints],f.miterLimit=this.miterLimit==null?"10":this.miterLimit,f.ignoreScale=this.ignoreScale!=null&&this.ignoreScale},y.path=!1,(a.StrokeDash=function(f,m){this.segments=f,this.offset=m||0}).prototype.exec=function(f){f.setLineDash&&(f.setLineDash(this.segments||a.StrokeDash.EMPTY_SEGMENTS),f.lineDashOffset=this.offset||0)},a.StrokeDash.EMPTY_SEGMENTS=[],(a.RoundRect=function(f,m,D,J,se,we,Te,t){this.x=f,this.y=m,this.w=D,this.h=J,this.radiusTL=se,this.radiusTR=we,this.radiusBR=Te,this.radiusBL=t}).prototype.exec=function(f){var m=(r<i?r:i)/2,D=0,J=0,se=0,we=0,Te=this.x,t=this.y,r=this.w,i=this.h,o=this.radiusTL,l=this.radiusTR,c=this.radiusBR,p=this.radiusBL;o<0&&(o*=D=-1),m<o&&(o=m),l<0&&(l*=J=-1),m<l&&(l=m),c<0&&(c*=se=-1),m<c&&(c=m),p<0&&(p*=we=-1),m<p&&(p=m),f.moveTo(Te+r-l,t),f.arcTo(Te+r+l*J,t-l*J,Te+r,t+l,l),f.lineTo(Te+r,t+i-c),f.arcTo(Te+r+c*se,t+i+c*se,Te+r-c,t+i,c),f.lineTo(Te+p,t+i),f.arcTo(Te-p*we,t+i+p*we,Te,t+i-p,p),f.lineTo(Te,t+o),f.arcTo(Te-o*D,t-o*D,Te+o,t,o),f.closePath()},(a.Circle=function(f,m,D){this.x=f,this.y=m,this.radius=D}).prototype.exec=function(f){f.arc(this.x,this.y,this.radius,0,2*Math.PI)},(a.Ellipse=function(f,m,D,J){this.x=f,this.y=m,this.w=D,this.h=J}).prototype.exec=function(f){var m=this.x,D=this.y,t=this.w,r=this.h,J=t/2*.5522848,se=r/2*.5522848,we=m+t,Te=D+r,t=m+t/2,r=D+r/2;f.moveTo(m,r),f.bezierCurveTo(m,r-se,t-J,D,t,D),f.bezierCurveTo(t+J,D,we,r-se,we,r),f.bezierCurveTo(we,r+se,t+J,Te,t,Te),f.bezierCurveTo(t-J,Te,m,r+se,m,r)},(a.PolyStar=function(f,m,D,J,se,we){this.x=f,this.y=m,this.radius=D,this.sides=J,this.pointSize=se,this.angle=we}).prototype.exec=function(f){var m=this.x,D=this.y,J=this.radius,se=(this.angle||0)/180*Math.PI,we=this.sides,Te=1-(this.pointSize||0),t=Math.PI/we;f.moveTo(m+Math.cos(se)*J,D+Math.sin(se)*J);for(var r=0;r<we+1&&(se+=t,Te==1||(f.lineTo(m+Math.cos(se)*J*Te,D+Math.sin(se)*J*Te),r!=we));r++)se+=t,f.lineTo(m+Math.cos(se)*J,D+Math.sin(se)*J);f.closePath()},(a.Polygon=function(f,m){this.points=f,m==null&&(m=!0),this.close=m}).prototype.exec=function(f){var m,D,J=this.points,se=this.close,we=J[0];f.moveTo(we[0],we[1]);for(var Te=1;Te<J.length;Te++)m=J[Te],Te==1&&(D=[m[0],m[1]]),f.lineTo(m[0],m[1]);se&&(f.lineTo(we[0],we[1]),f.lineTo(D[0],D[1])),f.closePath()},e.beginCmd=new a.BeginPath,ee.Graphics=e}(),function(){"use strict";function e(){this.EventDispatcher_constructor(),this.alpha=1,this.cacheCanvas=null,this.bitmapCache=null,this.id=ee.UID.get(),this.mouseEnabled=!0,this.tickEnabled=!0,this.name=null,this.parent=null,this.regX=0,this.regY=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.skewX=0,this.skewY=0,this.shadow=null,this.visible=!0,this.x=0,this.y=0,this.transformMatrix=null,this.compositeOperation=null,this.snapToPixel=!0,this.filters=null,this.mask=null,this.hitArea=null,this.cursor=null,this._props=new ee.DisplayProps,this._rectangle=new ee.Rectangle,this._bounds=null,this._webGLRenderStyle=e._StageGL_NONE}var y=ee.extend(e,ee.EventDispatcher);e._MOUSE_EVENTS=["click","dblclick","mousedown","mouseout","mouseover","pressmove","pressup","rollout","rollover"],e.suppressCrossDomainErrors=!1,e._snapToPixelEnabled=!1,e._StageGL_NONE=0,e._StageGL_SPRITE=1,e._StageGL_BITMAP=2;var a=ee.createCanvas?ee.createCanvas():document.createElement("canvas");a.getContext&&(e._hitTestCanvas=a,e._hitTestContext=a.getContext("2d"),a.width=a.height=1),y._getStage=function(){for(var u=this,f=ee.Stage;u.parent;)u=u.parent;return u instanceof f?u:null},y.getStage=ee.deprecate(y._getStage,"DisplayObject.getStage");try{Object.defineProperties(y,{stage:{get:y._getStage},cacheID:{get:function(){return this.bitmapCache&&this.bitmapCache.cacheID},set:function(u){this.bitmapCache&&(this.bitmapCache.cacheID=u)}},scale:{get:function(){return this.scaleX},set:function(u){this.scaleX=this.scaleY=u}}})}catch(u){}y.isVisible=function(){return!!(this.visible&&0<this.alpha&&this.scaleX!=0&&this.scaleY!=0)},y.draw=function(u,f){var m=this.bitmapCache;return!(!m||f)&&m.draw(u)},y.updateContext=function(u){var f=this,J=f.mask,m=f._props.matrix;J&&J.graphics&&!J.graphics.isEmpty()&&(J.getMatrix(m),u.transform(m.a,m.b,m.c,m.d,m.tx,m.ty),J.graphics.drawAsPath(u),u.clip(),m.invert(),u.transform(m.a,m.b,m.c,m.d,m.tx,m.ty)),this.getMatrix(m);var D=m.tx,J=m.ty;e._snapToPixelEnabled&&f.snapToPixel&&(D=D+(D<0?-.5:.5)|0,J=J+(J<0?-.5:.5)|0),u.transform(m.a,m.b,m.c,m.d,D,J),u.globalAlpha*=f.alpha,f.compositeOperation&&(u.globalCompositeOperation=f.compositeOperation),f.shadow&&this._applyShadow(u,f.shadow)},y.cache=function(u,f,m,D,J,se){this.bitmapCache||(this.bitmapCache=new ee.BitmapCache),this.bitmapCache.define(this,u,f,m,D,J,se)},y.updateCache=function(u){if(!this.bitmapCache)throw"cache() must be called before updateCache()";this.bitmapCache.update(u)},y.uncache=function(){this.bitmapCache&&(this.bitmapCache.release(),this.bitmapCache=void 0)},y.getCacheDataURL=function(){return this.bitmapCache?this.bitmapCache.getCacheDataURL():null},y.localToGlobal=function(u,f,m){return m=this.getConcatenatedMatrix(this._props.matrix).transformPoint(u,f,m||new ee.Point),this.stage&&ee.stageTransformable&&(m=this.stage.getConcatenatedMatrix(this._mtx).invert().transformPoint(m.x,m.y)),m},y.globalToLocal=function(u,f,m){var D;return this.stage&&ee.stageTransformable&&(u=(D=this.stage.getConcatenatedMatrix(this._mtx).transformPoint(u,f)).x,f=D.y),this.getConcatenatedMatrix(this._props.matrix).invert().transformPoint(u,f,m||new ee.Point)},y.localToLocal=function(u,f,m,D){return D=this.localToGlobal(u,f,D),m.globalToLocal(D.x,D.y,D)},y.setTransform=function(u,f,m,D,J,se,we,Te,t){return this.x=u||0,this.y=f||0,this.scaleX=m==null?1:m,this.scaleY=D==null?1:D,this.rotation=J||0,this.skewX=se||0,this.skewY=we||0,this.regX=Te||0,this.regY=t||0,this},y.getMatrix=function(m){var f=this,m=m&&m.identity()||new ee.Matrix2D;return f.transformMatrix?m.copy(f.transformMatrix):m.appendTransform(f.x,f.y,f.scaleX,f.scaleY,f.rotation,f.skewX,f.skewY,f.regX,f.regY)},y.getConcatenatedMatrix=function(u){for(var f=this,m=this.getMatrix(u);f=f.parent;)m.prependMatrix(f.getMatrix(f._props.matrix));return m},y.getConcatenatedDisplayProps=function(u){u=u?u.identity():new ee.DisplayProps;for(var f=this,m=f.getMatrix(u.matrix);u.prepend(f.visible,f.alpha,f.shadow,f.compositeOperation),f!=this&&m.prependMatrix(f.getMatrix(f._props.matrix)),f=f.parent;);return u},y.hitTest=function(u,f){var m=e._hitTestContext;return m.setTransform(1,0,0,1,-u,-f),this.draw(m),f=this._testHit(m),m.setTransform(1,0,0,1,0,0),m.clearRect(0,0,2,2),f},y.set=function(u){for(var f in u)this[f]=u[f];return this},y.getBounds=function(){if(this._bounds)return this._rectangle.copy(this._bounds);var u=this.cacheCanvas;if(u){var f=this._cacheScale;return this._rectangle.setValues(this._cacheOffsetX,this._cacheOffsetY,u.width/f,u.height/f)}return null},y.getTransformedBounds=function(){return this._getBounds()},y.setBounds=function(u,f,m,D){this._bounds=u!=null?(this._bounds||new ee.Rectangle).setValues(u,f,m,D):u},y.clone=function(){return this._cloneProps(new e)},y.toString=function(){return"[DisplayObject (name="+this.name+")]"},y._updateState=null,y._cloneProps=function(u){return u.alpha=this.alpha,u.mouseEnabled=this.mouseEnabled,u.tickEnabled=this.tickEnabled,u.name=this.name,u.regX=this.regX,u.regY=this.regY,u.rotation=this.rotation,u.scaleX=this.scaleX,u.scaleY=this.scaleY,u.shadow=this.shadow,u.skewX=this.skewX,u.skewY=this.skewY,u.visible=this.visible,u.x=this.x,u.y=this.y,u.compositeOperation=this.compositeOperation,u.snapToPixel=this.snapToPixel,u.filters=this.filters==null?null:this.filters.slice(0),u.mask=this.mask,u.hitArea=this.hitArea,u.cursor=this.cursor,u._bounds=this._bounds,u},y._applyShadow=function(u,f){f=f||Shadow.identity,u.shadowColor=f.color,u.shadowOffsetX=f.offsetX,u.shadowOffsetY=f.offsetY,u.shadowBlur=f.blur},y._tick=function(u){var f=this._listeners;f&&f.tick&&(u.target=null,u.propagationStopped=u.immediatePropagationStopped=!1,this.dispatchEvent(u))},y._testHit=function(u){try{var f=1<u.getImageData(0,0,1,1).data[3]}catch(m){if(!e.suppressCrossDomainErrors)throw"An error has occurred. This is most likely due to security restrictions on reading canvas pixel data with local or cross-domain images."}return f},y._getBounds=function(u,f){return this._transformBounds(this.getBounds(),u,f)},y._transformBounds=function(u,o,i){if(!u)return u;var D=u.x,J=u.y,l=u.width,c=u.height,p=this._props.matrix,p=i?p.identity():this.getMatrix(p);(D||J)&&p.appendTransform(0,0,1,1,0,0,0,-D,-J),o&&p.prependMatrix(o);var se=l*p.a,we=l*p.b,Te=c*p.c,t=c*p.d,r=p.tx,i=p.ty,o=r,l=r,c=i,p=i;return(D=se+r)<o?o=D:l<D&&(l=D),(D=se+Te+r)<o?o=D:l<D&&(l=D),(D=Te+r)<o?o=D:l<D&&(l=D),(J=we+i)<c?c=J:p<J&&(p=J),(J=we+t+i)<c?c=J:p<J&&(p=J),(J=t+i)<c?c=J:p<J&&(p=J),u.setValues(o,c,l-o,p-c)},y._hasMouseEventListener=function(){for(var u=e._MOUSE_EVENTS,f=0,m=u.length;f<m;f++)if(this.hasEventListener(u[f]))return!0;return!!this.cursor},ee.DisplayObject=ee.promote(e,"EventDispatcher")}(),function(){"use strict";function e(){this.DisplayObject_constructor(),this.children=[],this.mouseChildren=!0,this.tickChildren=!0}var y=ee.extend(e,ee.DisplayObject);y._getNumChildren=function(){return this.children.length},y.getNumChildren=ee.deprecate(y._getNumChildren,"Container.getNumChildren");try{Object.defineProperties(y,{numChildren:{get:y._getNumChildren}})}catch(a){}y.initialize=e,y.isVisible=function(){var a=this.cacheCanvas||this.children.length;return!!(this.visible&&0<this.alpha&&this.scaleX!=0&&this.scaleY!=0&&a)},y.draw=function(a,u){if(this.DisplayObject_draw(a,u))return!0;for(var f=this.children.slice(),m=0,D=f.length;m<D;m++){var J=f[m];J.isVisible()&&(a.save(),J.updateContext(a),J.draw(a),a.restore())}return!0},y.addChild=function(a){if(a==null)return a;var u=arguments.length;if(1<u){for(var f=0;f<u;f++)this.addChild(arguments[f]);return arguments[u-1]}var m=a.parent,D=m===this;return m&&m._removeChildAt(ee.indexOf(m.children,a),D),(a.parent=this).children.push(a),D||a.dispatchEvent("added"),a},y.addChildAt=function(a,u){var f=arguments.length,m=arguments[f-1];if(m<0||m>this.children.length)return arguments[f-2];if(2<f){for(var D=0;D<f-1;D++)this.addChildAt(arguments[D],m+D);return arguments[f-2]}var J=a.parent,se=J===this;return J&&J._removeChildAt(ee.indexOf(J.children,a),se),(a.parent=this).children.splice(u,0,a),se||a.dispatchEvent("added"),a},y.removeChild=function(a){var u=arguments.length;if(1<u){for(var f=!0,m=0;m<u;m++)f=f&&this.removeChild(arguments[m]);return f}return this._removeChildAt(ee.indexOf(this.children,a))},y.removeChildAt=function(a){var u=arguments.length;if(1<u){for(var f=[],m=0;m<u;m++)f[m]=arguments[m];f.sort(function(J,se){return se-J});for(var D=!0,m=0;m<u;m++)D=D&&this._removeChildAt(f[m]);return D}return this._removeChildAt(a)},y.removeAllChildren=function(){for(var a=this.children;a.length;)this._removeChildAt(0)},y.getChildAt=function(a){return this.children[a]},y.getChildByName=function(a){for(var u=this.children,f=0,m=u.length;f<m;f++)if(u[f].name==a)return u[f];return null},y.sortChildren=function(a){this.children.sort(a)},y.getChildIndex=function(a){return ee.indexOf(this.children,a)},y.swapChildrenAt=function(a,u){var f=this.children,m=f[a],D=f[u];m&&D&&(f[a]=D,f[u]=m)},y.swapChildren=function(a,u){for(var f,m,D=this.children,J=0,se=D.length;J<se&&(D[J]==a&&(f=J),D[J]==u&&(m=J),f==null||m==null);J++);J!=se&&(D[f]=u,D[m]=a)},y.setChildIndex=function(a,u){var f=this.children,m=f.length;if(!(a.parent!=this||u<0||m<=u)){for(var D=0;D<m&&f[D]!=a;D++);D!=m&&D!=u&&(f.splice(D,1),f.splice(u,0,a))}},y.contains=function(a){for(;a;){if(a==this)return!0;a=a.parent}return!1},y.hitTest=function(a,u){return this.getObjectUnderPoint(a,u)!=null},y.getObjectsUnderPoint=function(a,D,f){var m=[],D=this.localToGlobal(a,D);return this._getObjectsUnderPoint(D.x,D.y,m,0<f,f==1),m},y.getObjectUnderPoint=function(a,u,f){return u=this.localToGlobal(a,u),this._getObjectsUnderPoint(u.x,u.y,null,0<f,f==1)},y.getBounds=function(){return this._getBounds(null,!0)},y.getTransformedBounds=function(){return this._getBounds()},y.clone=function(a){var u=this._cloneProps(new e);return a&&this._cloneChildren(u),u},y.toString=function(){return"[Container (name="+this.name+")]"},y._tick=function(a){if(this.tickChildren)for(var u=this.children.length-1;0<=u;u--){var f=this.children[u];f.tickEnabled&&f._tick&&f._tick(a)}this.DisplayObject__tick(a)},y._cloneChildren=function(a){a.children.length&&a.removeAllChildren();for(var u=a.children,f=0,m=this.children.length;f<m;f++){var D=this.children[f].clone(!0);D.parent=a,u.push(D)}},y._removeChildAt=function(a,u){if(a<0||a>this.children.length-1)return!1;var f=this.children[a];return f&&(f.parent=null),this.children.splice(a,1),u||f.dispatchEvent("removed"),!0},y._getObjectsUnderPoint=function(a,u,f,m,D,J){var se,we,Te;if(this.stage&&ee.stageTransformable&&(se=a,we=u,a=(Te=this.stage.getConcatenatedMatrix(this._mtx).transformPoint(a,u)).x,u=Te.y),!(J=J||0)&&!this._testMask(this,a,u))return null;var t=ee.DisplayObject._hitTestContext;D=D||m&&this._hasMouseEventListener();for(var r=this.children,i=r.length-1;0<=i;i--){var o=r[i],l=o.hitArea;if(o.visible&&(l||o.isVisible())&&(!m||o.mouseEnabled)&&(l||this._testMask(o,a,u))){if(!l&&o instanceof e){var c=o._getObjectsUnderPoint(se!=null?se:a,we!=null?we:u,f,m,D,J+1);if(!f&&c)return m&&!this.mouseChildren?this:c}else if(!m||D||o._hasMouseEventListener()){var p=o.getConcatenatedDisplayProps(o._props),c=p.matrix;if(l&&(c.appendMatrix(l.getMatrix(l._props.matrix)),p.alpha=l.alpha),t.globalAlpha=p.alpha,t.setTransform(c.a,c.b,c.c,c.d,c.tx-a,c.ty-u),(l||o).draw(t),this._testHit(t)){if(t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,2,2),!f)return m&&!this.mouseChildren?this:o;f.push(o)}}}}return null},y._testMask=function(D,u,f){var m=D.mask;if(!m||!m.graphics||m.graphics.isEmpty())return!0;var J=this._props.matrix,D=D.parent,J=D?D.getConcatenatedMatrix(J):J.identity();return J=m.getMatrix(m._props.matrix).prependMatrix(J),D=ee.DisplayObject._hitTestContext,D.setTransform(J.a,J.b,J.c,J.d,J.tx-u,J.ty-f),m.graphics.drawAsPath(D),D.fillStyle="#000",D.fill(),!!this._testHit(D)&&(D.setTransform(1,0,0,1,0,0),D.clearRect(0,0,2,2),!0)},y._getBounds=function(a,u){var f=this.DisplayObject_getBounds();if(f)return this._transformBounds(f,a,u);var m=this._props.matrix,m=u?m.identity():this.getMatrix(m);a&&m.prependMatrix(a);for(var D=this.children.length,J=null,se=0;se<D;se++){var we=this.children[se];we.visible&&(f=we._getBounds(m))&&(J?J.extend(f.x,f.y,f.width,f.height):J=f.clone())}return J},ee.Container=ee.promote(e,"DisplayObject")}(),function(){"use strict";function e(a){this.Container_constructor(),this.autoClear=!0,this.canvas=typeof a=="string"?document.getElementById(a):a,this.mouseX=0,this.mouseY=0,this.drawRect=null,this.snapToPixelEnabled=!1,this.mouseInBounds=!1,this.tickOnUpdate=!0,this.mouseMoveOutside=!1,this.preventSelection=!0,this._pointerData={},this._pointerCount=0,this._primaryPointerID=null,this._mouseOverIntervalID=null,this._nextStage=null,this._prevStage=null,this.enableDOMEvents(!0)}var y=ee.extend(e,ee.Container);y._get_nextStage=function(){return this._nextStage},y._set_nextStage=function(a){this._nextStage&&(this._nextStage._prevStage=null),a&&(a._prevStage=this),this._nextStage=a};try{Object.defineProperties(y,{nextStage:{get:y._get_nextStage,set:y._set_nextStage}})}catch(a){}y.update=function(a){var u;this.canvas&&(this.tickOnUpdate&&this.tick(a),this.dispatchEvent("drawstart",!1,!0)!==!1&&(ee.DisplayObject._snapToPixelEnabled=this.snapToPixelEnabled,u=this.drawRect,(a=this.canvas.getContext("2d")).setTransform(1,0,0,1,0,0),this.autoClear&&(u?a.clearRect(u.x,u.y,u.width,u.height):a.clearRect(0,0,this.canvas.width+1,this.canvas.height+1)),a.save(),this.drawRect&&(a.beginPath(),a.rect(u.x,u.y,u.width,u.height),a.clip()),this.updateContext(a),this.draw(a,!1),a.restore(),this.dispatchEvent("drawend")))},y.tick=function(a){if(this.tickEnabled&&this.dispatchEvent("tickstart",!1,!0)!==!1){var u=new ee.Event("tick");if(a)for(var f in a)a.hasOwnProperty(f)&&(u[f]=a[f]);this._tick(u),this.dispatchEvent("tickend")}},y.handleEvent=function(a){a.type=="tick"&&this.update(a)},y.clear=function(){var a;this.canvas&&((a=this.canvas.getContext("2d")).setTransform(1,0,0,1,0,0),a.clearRect(0,0,this.canvas.width+1,this.canvas.height+1))},y.toDataURL=function(a,u){var f,m,D=this.canvas.getContext("2d"),J=this.canvas.width,se=this.canvas.height;return a&&(f=D.getImageData(0,0,J,se),m=D.globalCompositeOperation,D.globalCompositeOperation="destination-over",D.fillStyle=a,D.fillRect(0,0,J,se)),u=this.canvas.toDataURL(u||"image/png"),a&&(D.putImageData(f,0,0),D.globalCompositeOperation=m),u},y.enableMouseOver=function(a){if(this._mouseOverIntervalID&&(clearInterval(this._mouseOverIntervalID),this._mouseOverIntervalID=null,a==0&&this._testMouseOver(!0)),a==null)a=20;else if(a<=0)return;var u=this;this._mouseOverIntervalID=setInterval(function(){u._testMouseOver()},1e3/Math.min(50,a))},y.enableDOMEvents=function(a){a==null&&(a=!0);var u,f,m=this._eventListeners;if(!a&&m){for(u in m)(f=m[u]).t.removeEventListener(u,f.f,!1);this._eventListeners=null}else if(a&&!m&&this.canvas){var a=window.addEventListener?window:document,D=this;for(u in(m=this._eventListeners={}).mouseup={t:a,f:function(se){D._handleMouseUp(se)}},m.mousemove={t:a,f:function(se){D._handleMouseMove(se)}},m.dblclick={t:this.canvas,f:function(se){D._handleDoubleClick(se)}},m.mousedown={t:this.canvas,f:function(se){D._handleMouseDown(se)}},m)(f=m[u]).t.addEventListener(u,f.f,!1)}},y.clone=function(){throw"Stage cannot be cloned."},y.toString=function(){return"[Stage (name="+this.name+")]"},y._getElementRect=function(a){var u;try{u=a.getBoundingClientRect()}catch(Te){u={top:a.offsetTop,left:a.offsetLeft,width:a.offsetWidth,height:a.offsetHeight}}var f=(window.pageXOffset||document.scrollLeft||0)-(document.clientLeft||document.body.clientLeft||0),m=(window.pageYOffset||document.scrollTop||0)-(document.clientTop||document.body.clientTop||0),we=window.getComputedStyle?getComputedStyle(a,null):a.currentStyle,D=parseInt(we.paddingLeft)+parseInt(we.borderLeftWidth),J=parseInt(we.paddingTop)+parseInt(we.borderTopWidth),se=parseInt(we.paddingRight)+parseInt(we.borderRightWidth),we=parseInt(we.paddingBottom)+parseInt(we.borderBottomWidth);return{left:u.left+f+D,right:u.right+f-se,top:u.top+m+J,bottom:u.bottom+m-we}},y._getPointerData=function(a){return this._pointerData[a]||(this._pointerData[a]={x:0,y:0})},y._handleMouseMove=function(a){a=a||window.event,this._handlePointerMove(-1,a,a.pageX,a.pageY)},y._handlePointerMove=function(a,u,f,m,D){var J,se;this._prevStage&&D===void 0||this.canvas&&(J=this._nextStage,D=(se=this._getPointerData(a)).inBounds,this._updatePointerPosition(a,u,f,m),(D||se.inBounds||this.mouseMoveOutside)&&(a===-1&&se.inBounds==!D&&this._dispatchMouseEvent(this,D?"mouseleave":"mouseenter",!1,a,se,u),this._dispatchMouseEvent(this,"stagemousemove",!1,a,se,u),this._dispatchMouseEvent(se.target,"pressmove",!0,a,se,u)),J&&J._handlePointerMove(a,u,f,m,null))},y._updatePointerPosition=function(a,u,f,m){var we=this._getElementRect(this.canvas);f-=we.left,m-=we.top;var D=this.canvas.width,J=this.canvas.height;f/=(we.right-we.left)/D,m/=(we.bottom-we.top)/J;var se,we=this._getPointerData(a);ee.stageTransformable?(this._mtx=this.getConcatenatedMatrix(this._mtx).invert(),(we.inBounds=0<=f&&0<=m&&f<=D-1&&m<=J-1)?(we.x=f,we.y=m,se=this._mtx.transformPoint(we.x,we.y),we.x=se.x,we.y=se.y):this.mouseMoveOutside&&(we.x=f<0?0:D-1<f?D-1:f,we.y=m<0?0:J-1<m?J-1:m,se=this._mtx.transformPoint(we.x,we.y),we.x=se.x,we.y=se.y),we.rawX=f,we.rawY=m,se=this._mtx.transformPoint(we.rawX,we.rawY),we.rawX=se.x,we.rawY=se.y):((we.inBounds=0<=f&&0<=m&&f<=D-1&&m<=J-1)?(we.x=f,we.y=m):this.mouseMoveOutside&&(we.x=f<0?0:D-1<f?D-1:f,we.y=m<0?0:J-1<m?J-1:m),we.rawX=f,we.rawY=m),we.posEvtObj=u,a!==this._primaryPointerID&&a!==-1||(this.mouseX=we.x,this.mouseY=we.y,this.mouseInBounds=we.inBounds)},y._handleMouseUp=function(a){this._handlePointerUp(-1,a,!1)},y._handlePointerUp=function(a,u,f,m){var D,J,se=this._nextStage,we=this._getPointerData(a);this._prevStage&&m===void 0||(D=null,J=we.target,m||!J&&!se||(D=this._getObjectsUnderPoint(we.x,we.y,null,!0)),we.down&&(this._dispatchMouseEvent(this,"stagemouseup",!1,a,we,u,D),we.down=!1),D==J&&this._dispatchMouseEvent(J,"click",!0,a,we,u),this._dispatchMouseEvent(J,"pressup",!0,a,we,u),f?(a==this._primaryPointerID&&(this._primaryPointerID=null),delete this._pointerData[a]):we.target=null,se&&se._handlePointerUp(a,u,f,m||D&&this))},y._handleMouseDown=function(a){this._handlePointerDown(-1,a,a.pageX,a.pageY)},y._handlePointerDown=function(a,u,f,m,D){this.preventSelection&&u.preventDefault(),this._primaryPointerID!=null&&a!==-1||(this._primaryPointerID=a),m!=null&&this._updatePointerPosition(a,u,f,m);var J=null,se=this._nextStage,we=this._getPointerData(a);D||(J=we.target=this._getObjectsUnderPoint(we.x,we.y,null,!0)),we.inBounds&&(this._dispatchMouseEvent(this,"stagemousedown",!1,a,we,u,J),we.down=!0),this._dispatchMouseEvent(J,"mousedown",!0,a,we,u),se&&se._handlePointerDown(a,u,f,m,D||J&&this)},y._testMouseOver=function(a,u,f){if(!this._prevStage||u!==void 0){var m=this._nextStage;if(this._mouseOverIntervalID){var D=this._getPointerData(-1);if(D&&(a||this.mouseX!=this._mouseOverX||this.mouseY!=this._mouseOverY||!this.mouseInBounds)){var J,se,we=D.posEvtObj,Te=f||we&&we.target==this.canvas,t=null,r=-1,i="";!u&&(a||this.mouseInBounds&&Te)&&(t=this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,!0),this._mouseOverX=this.mouseX,this._mouseOverY=this.mouseY);for(var o=this._mouseOverTarget||[],l=o[o.length-1],c=this._mouseOverTarget=[],p=t;p;)c.unshift(p),i=i||p.cursor,p=p.parent;for(this.canvas.style.cursor=i,!u&&f&&(f.canvas.style.cursor=i),J=0,se=c.length;J<se&&c[J]==o[J];J++)r=J;for(l!=t&&this._dispatchMouseEvent(l,"mouseout",!0,-1,D,we,t),J=o.length-1;r<J;J--)this._dispatchMouseEvent(o[J],"rollout",!1,-1,D,we,t);for(J=c.length-1;r<J;J--)this._dispatchMouseEvent(c[J],"rollover",!1,-1,D,we,l);l!=t&&this._dispatchMouseEvent(t,"mouseover",!0,-1,D,we,l),m&&m._testMouseOver(a,u||t&&this,f||Te&&this)}}else m&&m._testMouseOver(a,u,f)}},y._handleDoubleClick=function(a,u){var f=null,m=this._nextStage,D=this._getPointerData(-1);u||(f=this._getObjectsUnderPoint(D.x,D.y,null,!0),this._dispatchMouseEvent(f,"dblclick",!0,-1,D,a)),m&&m._handleDoubleClick(a,u||f&&this)},y._dispatchMouseEvent=function(a,u,f,m,D,J,se){a&&(f||a.hasEventListener(u))&&(se=new ee.MouseEvent(u,f,!1,D.x,D.y,J,m,m===this._primaryPointerID||m===-1,D.rawX,D.rawY,se),a.dispatchEvent(se))},ee.Stage=ee.promote(e,"Container")}(),function(){"use strict";function e(a,u){if(this.Stage_constructor(a),u!==void 0){if(typeof u!="object")throw"Invalid options object";var f=u.premultiply,m=u.transparent,D=u.antialias,J=u.preserveBuffer,se=u.autoPurge}this.vocalDebug=!1,this._preserveBuffer=J||!1,this._antialias=D||!1,this._transparent=m||!1,this._premultiply=f||!1,this._autoPurge=void 0,this.autoPurge=se,this._viewportWidth=0,this._viewportHeight=0,this._projectionMatrix=null,this._webGLContext=null,this._clearColor={r:.5,g:.5,b:.5,a:0},this._maxCardsPerBatch=e.DEFAULT_MAX_BATCH_SIZE,this._activeShader=null,this._vertices=null,this._vertexPositionBuffer=null,this._uvs=null,this._uvPositionBuffer=null,this._indices=null,this._textureIndexBuffer=null,this._alphas=null,this._alphaBuffer=null,this._textureDictionary=[],this._textureIDs={},this._batchTextures=[],this._baseTextures=[],this._batchTextureCount=8,this._lastTextureInsert=-1,this._batchID=0,this._drawID=0,this._slotBlacklist=[],this._isDrawing=0,this._lastTrackedCanvas=0,this.isCacheControlled=!1,this._cacheContainer=new ee.Container,this._initializeWebGL()}var y=ee.extend(e,ee.Stage);e.buildUVRects=function(a,u,f){if(!a||!a._frames)return null;u===void 0&&(u=-1),f===void 0&&(f=!1);for(var m=u!=-1&&f?u:0,D=u!=-1&&f?u+1:a._frames.length,J=m;J<D;J++){var se,we=a._frames[J];we.uvRect||we.image.width<=0||we.image.height<=0||(se=we.rect,we.uvRect={t:se.y/we.image.height,l:se.x/we.image.width,b:(se.y+se.height)/we.image.height,r:(se.x+se.width)/we.image.width})}return a._frames[u!=-1?u:0].uvRect||{t:0,l:0,b:1,r:1}},e.isWebGLActive=function(a){return a&&a instanceof WebGLRenderingContext&&typeof WebGLRenderingContext<"u"},e.VERTEX_PROPERTY_COUNT=6,e.INDICIES_PER_CARD=6,e.DEFAULT_MAX_BATCH_SIZE=1e4,e.WEBGL_MAX_INDEX_NUM=Math.pow(2,16),e.UV_RECT={t:0,l:0,b:1,r:1};try{e.COVER_VERT=new Float32Array([-1,1,1,1,-1,-1,1,1,1,-1,-1,-1]),e.COVER_UV=new Float32Array([0,0,1,0,0,1,1,0,1,1,0,1]),e.COVER_UV_FLIP=new Float32Array([0,1,1,1,0,0,1,1,1,0,0,0])}catch(a){}e.REGULAR_VERTEX_HEADER=(e.REGULAR_VARYING_HEADER="precision mediump float;varying vec2 vTextureCoord;varying lowp float indexPicker;varying lowp float alphaValue;")+"attribute vec2 vertexPosition;attribute vec2 uvPosition;attribute lowp float textureIndex;attribute lowp float objectAlpha;uniform mat4 pMatrix;",e.REGULAR_FRAGMENT_HEADER=e.REGULAR_VARYING_HEADER+"uniform sampler2D uSampler[{{count}}];",e.REGULAR_VERTEX_BODY="void main(void) {gl_Position = vec4((vertexPosition.x * pMatrix[0][0]) + pMatrix[3][0],(vertexPosition.y * pMatrix[1][1]) + pMatrix[3][1],pMatrix[3][2],1.0);alphaValue = objectAlpha;indexPicker = textureIndex;vTextureCoord = uvPosition;}",e.REGULAR_FRAGMENT_BODY="void main(void) {vec4 color = vec4(1.0, 0.0, 0.0, 1.0);if (indexPicker <= 0.5) {color = texture2D(uSampler[0], vTextureCoord);{{alternates}}}{{fragColor}}}",e.REGULAR_FRAG_COLOR_NORMAL="gl_FragColor = vec4(color.rgb, color.a * alphaValue);",e.REGULAR_FRAG_COLOR_PREMULTIPLY="if(color.a > 0.0035) {gl_FragColor = vec4(color.rgb/color.a, color.a * alphaValue);} else {gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);}",e.PARTICLE_VERTEX_BODY=e.REGULAR_VERTEX_BODY,e.PARTICLE_FRAGMENT_BODY=e.REGULAR_FRAGMENT_BODY,e.COVER_VERTEX_HEADER=(e.COVER_VARYING_HEADER="precision mediump float;varying highp vec2 vRenderCoord;varying highp vec2 vTextureCoord;")+"attribute vec2 vertexPosition;attribute vec2 uvPosition;uniform float uUpright;",e.COVER_FRAGMENT_HEADER=e.COVER_VARYING_HEADER+"uniform sampler2D uSampler;",e.COVER_VERTEX_BODY="void main(void) {gl_Position = vec4(vertexPosition.x, vertexPosition.y, 0.0, 1.0);vRenderCoord = uvPosition;vTextureCoord = vec2(uvPosition.x, abs(uUpright - uvPosition.y));}",e.COVER_FRAGMENT_BODY="void main(void) {vec4 color = texture2D(uSampler, vRenderCoord);gl_FragColor = color;}",y._get_isWebGL=function(){return!!this._webGLContext},y._set_autoPurge=function(a){(a=isNaN(a)?1200:a)!=-1&&(a=a<10?10:a),this._autoPurge=a},y._get_autoPurge=function(){return Number(this._autoPurge)};try{Object.defineProperties(y,{isWebGL:{get:y._get_isWebGL},autoPurge:{get:y._get_autoPurge,set:y._set_autoPurge}})}catch(a){}y._initializeWebGL=function(){if(this.canvas){if(!this._webGLContext||this._webGLContext.canvas!==this.canvas){var a={depth:!1,alpha:this._transparent,stencil:!0,antialias:this._antialias,premultipliedAlpha:this._premultiply,preserveDrawingBuffer:this._preserveBuffer},a=this._webGLContext=this._fetchWebGLContext(this.canvas,a);if(!a)return null;this.updateSimultaneousTextureCount(a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS)),this._maxTextureSlots=a.getParameter(a.MAX_COMBINED_TEXTURE_IMAGE_UNITS),this._createBuffers(a),this._initTextures(a),a.disable(a.DEPTH_TEST),a.enable(a.BLEND),a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA),a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this._premultiply),this._webGLContext.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearColor.a),this.updateViewport(this._viewportWidth||this.canvas.width,this._viewportHeight||this.canvas.height)}}else this._webGLContext=null;return this._webGLContext},y.update=function(a){this.canvas&&(this.tickOnUpdate&&this.tick(a),this.dispatchEvent("drawstart"),this.autoClear&&this.clear(),this._webGLContext?(this._batchDraw(this,this._webGLContext),this._autoPurge==-1||this._drawID%(this._autoPurge/2|0)||this.purgeTextures(this._autoPurge)):((a=this.canvas.getContext("2d")).save(),this.updateContext(a),this.draw(a,!1),a.restore()),this.dispatchEvent("drawend"))},y.clear=function(){var a,u,f;this.canvas&&(e.isWebGLActive(this._webGLContext)?(a=this._webGLContext,u=this._clearColor,f=this._transparent?u.a:1,this._webGLContext.clearColor(u.r*f,u.g*f,u.b*f,f),a.clear(a.COLOR_BUFFER_BIT),this._webGLContext.clearColor(u.r,u.g,u.b,u.a)):this.Stage_clear())},y.draw=function(a,u){if(a===this._webGLContext&&e.isWebGLActive(this._webGLContext)){var f=this._webGLContext;return this._batchDraw(this,f,u),!0}return this.Stage_draw(a,u)},y.cacheDraw=function(a,u,f){if(e.isWebGLActive(this._webGLContext)){var m=this._webGLContext;return this._cacheDraw(m,a,u,f),!0}return!1},y.protectTextureSlot=function(a,u){if(a>this._maxTextureSlots||a<0)throw"Slot outside of acceptable range";this._slotBlacklist[a]=!!u},y.getTargetRenderTexture=function(a,u,f){var m=!1,D=this._webGLContext;if(a.__lastRT!==void 0&&a.__lastRT===a.__rtA&&(m=!0),!(D=m?(a.__rtB===void 0?a.__rtB=this.getRenderBufferTexture(u,f):(u==a.__rtB._width&&f==a.__rtB._height||this.resizeTexture(a.__rtB,u,f),this.setTextureParams(D)),a.__rtB):(a.__rtA===void 0?a.__rtA=this.getRenderBufferTexture(u,f):(u==a.__rtA._width&&f==a.__rtA._height||this.resizeTexture(a.__rtA,u,f),this.setTextureParams(D)),a.__rtA)))throw"Problems creating render textures, known causes include using too much VRAM by not releasing WebGL texture instances";return a.__lastRT=D},y.releaseTexture=function(a){var u,f;if(a){if(a.children)for(u=0,f=a.children.length;u<f;u++)this.releaseTexture(a.children[u]);a.cacheCanvas&&a.uncache();var m=void 0;if(a._storeID!==void 0){if(a===this._textureDictionary[a._storeID])return this._killTextureObject(a),void(a._storeID=void 0);m=a}else if(a._webGLRenderStyle===2)m=a.image;else if(a._webGLRenderStyle===1){for(u=0,f=a.spriteSheet._images.length;u<f;u++)this.releaseTexture(a.spriteSheet._images[u]);return}m!==void 0?(this._killTextureObject(this._textureDictionary[m._storeID]),m._storeID=void 0):this.vocalDebug&&console.log("No associated texture found on release")}},y.purgeTextures=function(a){a==null&&(a=100);for(var u=this._textureDictionary,f=u.length,m=0;m<f;m++){var D=u[m];D&&D._drawID+a<=this._drawID&&this._killTextureObject(D)}},y.updateSimultaneousTextureCount=function(a){var u=this._webGLContext,f=!1;for((a<1||isNaN(a))&&(a=1),this._batchTextureCount=a;!f;)try{this._activeShader=this._fetchShaderProgram(u),f=!0}catch(m){if(this._batchTextureCount==1)throw"Cannot compile shader "+m;this._batchTextureCount-=4,this._batchTextureCount<1&&(this._batchTextureCount=1),this.vocalDebug&&console.log("Reducing desired texture count due to errors: "+this._batchTextureCount)}},y.updateViewport=function(a,u){this._viewportWidth=0|a,this._viewportHeight=0|u,u=this._webGLContext,u&&(u.viewport(0,0,this._viewportWidth,this._viewportHeight),this._projectionMatrix=new Float32Array([2/this._viewportWidth,0,0,0,0,-2/this._viewportHeight,1,0,0,0,1,0,-1,1,.1,0]),this._projectionMatrixFlip=new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),this._projectionMatrixFlip.set(this._projectionMatrix),this._projectionMatrixFlip[5]*=-1,this._projectionMatrixFlip[13]*=-1)},y.getFilterShader=function(a){a=a||this;var u=this._webGLContext,f=this._activeShader;if(a._builtShader)f=a._builtShader,a.shaderParamSetup&&(u.useProgram(f),a.shaderParamSetup(u,this,f));else try{f=this._fetchShaderProgram(u,"filter",a.VTX_SHADER_BODY,a.FRAG_SHADER_BODY,a.shaderParamSetup&&a.shaderParamSetup.bind(a)),(a._builtShader=f)._name=a.toString()}catch(m){console&&console.log("SHADER SWITCH FAILURE",m)}return f},y.getBaseTexture=function(D,J){var f=Math.ceil(0<D?D:1)||1,m=Math.ceil(0<J?J:1)||1,D=this._webGLContext,J=D.createTexture();return this.resizeTexture(J,f,m),this.setTextureParams(D,!1),J},y.resizeTexture=function(a,u,f){var m=this._webGLContext;m.bindTexture(m.TEXTURE_2D,a),m.texImage2D(m.TEXTURE_2D,0,m.RGBA,u,f,0,m.RGBA,m.UNSIGNED_BYTE,null),a.width=u,a.height=f},y.getRenderBufferTexture=function(a,u){var f=this._webGLContext,m=this.getBaseTexture(a,u);if(!m)return null;var D=f.createFramebuffer();return D?(m.width=a,m.height=u,f.bindFramebuffer(f.FRAMEBUFFER,D),f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,m,0),(D._renderTexture=m)._frameBuffer=D,m._storeID=this._textureDictionary.length,this._textureDictionary[m._storeID]=m,f.bindFramebuffer(f.FRAMEBUFFER,null),m):null},y.setTextureParams=function(a,u){u&&this._antialias?(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR)):(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST)),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE)},y.setClearColor=function(a){var u,f,m,D,J;typeof a=="string"?a.indexOf("#")==0?(a.length==4&&(a="#"+a.charAt(1)+a.charAt(1)+a.charAt(2)+a.charAt(2)+a.charAt(3)+a.charAt(3)),u=+("0x"+a.slice(1,3))/255,f=+("0x"+a.slice(3,5))/255,m=+("0x"+a.slice(5,7))/255,D=+("0x"+a.slice(7,9))/255):a.indexOf("rgba(")==0&&(J=a.slice(5,-1).split(","),u=Number(J[0])/255,f=Number(J[1])/255,m=Number(J[2])/255,D=Number(J[3])):(u=((4278190080&a)>>>24)/255,f=((16711680&a)>>>16)/255,m=((65280&a)>>>8)/255,D=(255&a)/255),this._clearColor.r=u||0,this._clearColor.g=f||0,this._clearColor.b=m||0,this._clearColor.a=D||0,this._webGLContext&&this._webGLContext.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearColor.a)},y.toString=function(){return"[StageGL (name="+this.name+")]"},y._fetchWebGLContext=function(a,u){var f,m;try{f=a.getContext("webgl",u)||a.getContext("experimental-webgl",u)}catch(D){}return f?(f.viewportWidth=a.width,f.viewportHeight=a.height):(m="Could not initialize WebGL",console.error?console.error(m):console.log(m)),f},y._fetchShaderProgram=function(a,u,f,m,D){var J,se;switch(a.useProgram(null),u){case"filter":se=e.COVER_VERTEX_HEADER+(f||e.COVER_VERTEX_BODY),J=e.COVER_FRAGMENT_HEADER+(m||e.COVER_FRAGMENT_BODY);break;case"particle":se=e.REGULAR_VERTEX_HEADER+e.PARTICLE_VERTEX_BODY,J=e.REGULAR_FRAGMENT_HEADER+e.PARTICLE_FRAGMENT_BODY;break;case"override":se=e.REGULAR_VERTEX_HEADER+(f||e.REGULAR_VERTEX_BODY),J=e.REGULAR_FRAGMENT_HEADER+(m||e.REGULAR_FRAGMENT_BODY);break;case"regular":default:se=e.REGULAR_VERTEX_HEADER+e.REGULAR_VERTEX_BODY,J=e.REGULAR_FRAGMENT_HEADER+e.REGULAR_FRAGMENT_BODY}var we=this._createShader(a,a.VERTEX_SHADER,se),Te=this._createShader(a,a.FRAGMENT_SHADER,J),t=a.createProgram();if(a.attachShader(t,we),a.attachShader(t,Te),a.linkProgram(t),t._type=u,!a.getProgramParameter(t,a.LINK_STATUS))throw a.useProgram(this._activeShader),a.getProgramInfoLog(t);switch(a.useProgram(t),u){case"filter":t.vertexPositionAttribute=a.getAttribLocation(t,"vertexPosition"),a.enableVertexAttribArray(t.vertexPositionAttribute),t.uvPositionAttribute=a.getAttribLocation(t,"uvPosition"),a.enableVertexAttribArray(t.uvPositionAttribute),t.samplerUniform=a.getUniformLocation(t,"uSampler"),a.uniform1i(t.samplerUniform,0),t.uprightUniform=a.getUniformLocation(t,"uUpright"),a.uniform1f(t.uprightUniform,0),D&&D(a,this,t);break;case"override":case"particle":case"regular":default:t.vertexPositionAttribute=a.getAttribLocation(t,"vertexPosition"),a.enableVertexAttribArray(t.vertexPositionAttribute),t.uvPositionAttribute=a.getAttribLocation(t,"uvPosition"),a.enableVertexAttribArray(t.uvPositionAttribute),t.textureIndexAttribute=a.getAttribLocation(t,"textureIndex"),a.enableVertexAttribArray(t.textureIndexAttribute),t.alphaAttribute=a.getAttribLocation(t,"objectAlpha"),a.enableVertexAttribArray(t.alphaAttribute);for(var r=[],i=0;i<this._batchTextureCount;i++)r[i]=i;t.samplerData=r,t.samplerUniform=a.getUniformLocation(t,"uSampler"),a.uniform1iv(t.samplerUniform,r),t.pMatrixUniform=a.getUniformLocation(t,"pMatrix")}return a.useProgram(this._activeShader),t},y._createShader=function(a,u,f){f=f.replace(/{{count}}/g,this._batchTextureCount);for(var m="",D=1;D<this._batchTextureCount;D++)m+="} else if (indexPicker <= "+D+".5) { color = texture2D(uSampler["+D+"], vTextureCoord);";if(f=(f=f.replace(/{{alternates}}/g,m)).replace(/{{fragColor}}/g,this._premultiply?e.REGULAR_FRAG_COLOR_PREMULTIPLY:e.REGULAR_FRAG_COLOR_NORMAL),u=a.createShader(u),a.shaderSource(u,f),a.compileShader(u),!a.getShaderParameter(u,a.COMPILE_STATUS))throw a.getShaderInfoLog(u);return u},y._createBuffers=function(a){var u,f=this._maxCardsPerBatch*e.INDICIES_PER_CARD,m=this._vertexPositionBuffer=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,m),u=2;for(var D=this._vertices=new Float32Array(f*u),J=0,se=D.length;J<se;J+=u)D[J]=D[J+1]=0;a.bufferData(a.ARRAY_BUFFER,D,a.DYNAMIC_DRAW),m.itemSize=u,m.numItems=f,m=this._uvPositionBuffer=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,m),u=2;var we=this._uvs=new Float32Array(f*u);for(J=0,se=we.length;J<se;J+=u)we[J]=we[J+1]=0;a.bufferData(a.ARRAY_BUFFER,we,a.DYNAMIC_DRAW),m.itemSize=u,m.numItems=f,m=this._textureIndexBuffer=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,m),u=1;var Te=this._indices=new Float32Array(f*u);for(J=0,se=Te.length;J<se;J++)Te[J]=0;a.bufferData(a.ARRAY_BUFFER,Te,a.DYNAMIC_DRAW),m.itemSize=u,m.numItems=f,m=this._alphaBuffer=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,m),u=1;var t=this._alphas=new Float32Array(f*u);for(J=0,se=t.length;J<se;J++)t[J]=1;a.bufferData(a.ARRAY_BUFFER,t,a.DYNAMIC_DRAW),m.itemSize=u,m.numItems=f},y._initTextures=function(){this._lastTextureInsert=-1,this._textureDictionary=[],this._textureIDs={},this._baseTextures=[],this._batchTextures=[];for(var a=0;a<this._batchTextureCount;a++){var u=this.getBaseTexture();if(!(this._baseTextures[a]=this._batchTextures[a]=u))throw"Problems creating basic textures, known causes include using too much VRAM by not releasing WebGL texture instances"}},y._loadTextureImage=function(a,u){var f=u.src;f||(u._isCanvas=!0,f=u.src="canvas_"+this._lastTrackedCanvas++);var m=this._textureIDs[f];return m===void 0&&(m=this._textureIDs[f]=this._textureDictionary.length),this._textureDictionary[m]===void 0&&(this._textureDictionary[m]=this.getBaseTexture()),f=this._textureDictionary[m],f?(f._batchID=this._batchID,f._storeID=m,f._imageData=u,this._insertTextureInBatch(a,f),u._storeID=m,u.complete||u.naturalWidth||u._isCanvas?this._updateTextureImageData(a,u):u.addEventListener("load",this._updateTextureImageData.bind(this,a,u))):(u="Problem creating desired texture, known causes include using too much VRAM by not releasing WebGL texture instances",console.error&&console.error(u)||console.log(u),(f=this._baseTextures[0])._batchID=this._batchID,f._storeID=-1,f._imageData=f,this._insertTextureInBatch(a,f)),f},y._updateTextureImageData=function(a,u){var f=u.width&u.width-1||u.height&u.height-1,m=this._textureDictionary[u._storeID];a.activeTexture(a.TEXTURE0+m._activeIndex),a.bindTexture(a.TEXTURE_2D,m),m.isPOT=!f,this.setTextureParams(a,m.isPOT);try{a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,u)}catch(J){var D="\nAn error has occurred. This is most likely due to security restrictions on WebGL images with local or cross-domain origins";console.error?(console.error(D),console.error(J)):console&&(console.log(D),console.log(J))}u._invalid=!1,m._w=u.width,m._h=u.height,this.vocalDebug&&(f&&console.warn("NPOT(Non Power of Two) Texture: "+u.src),(u.width>a.MAX_TEXTURE_SIZE||u.height>a.MAX_TEXTURE_SIZE)&&console&&console.error("Oversized Texture: "+u.width+"x"+u.height+" vs "+a.MAX_TEXTURE_SIZE+"max"))},y._insertTextureInBatch=function(a,u){if(this._batchTextures[u._activeIndex]!==u){var f=-1,m=(this._lastTextureInsert+1)%this._batchTextureCount,D=m;do if(this._batchTextures[D]._batchID!=this._batchID&&!this._slotBlacklist[D]){f=D;break}while((D=(D+1)%this._batchTextureCount)!==m);f===-1&&(this.batchReason="textureOverflow",this._drawBuffers(a),this.batchCardCount=0,f=m),(this._batchTextures[f]=u)._activeIndex=f,(J=u._imageData)&&J._invalid&&u._drawID!==void 0?this._updateTextureImageData(a,J):(a.activeTexture(a.TEXTURE0+f),a.bindTexture(a.TEXTURE_2D,u),this.setTextureParams(a)),this._lastTextureInsert=f}else{var J=u._imageData;u._storeID!=null&&J&&J._invalid&&this._updateTextureImageData(a,J)}u._drawID=this._drawID,u._batchID=this._batchID},y._killTextureObject=function(a){if(a){var u=this._webGLContext;if(a._storeID!==void 0&&0<=a._storeID){for(var f in this._textureDictionary[a._storeID]=void 0,this._textureIDs)this._textureIDs[f]==a._storeID&&delete this._textureIDs[f];a._imageData&&(a._imageData._storeID=void 0),a._imageData=a._storeID=void 0}a._activeIndex!==void 0&&this._batchTextures[a._activeIndex]===a&&(this._batchTextures[a._activeIndex]=this._baseTextures[a._activeIndex]);try{a._frameBuffer&&u.deleteFramebuffer(a._frameBuffer),a._frameBuffer=void 0}catch(m){this.vocalDebug&&console.log(m)}try{u.deleteTexture(a)}catch(m){this.vocalDebug&&console.log(m)}}},y._backupBatchTextures=function(a,u){var f=this._webGLContext;this._backupTextures||(this._backupTextures=[]),u===void 0&&(u=this._backupTextures);for(var m=0;m<this._batchTextureCount;m++)f.activeTexture(f.TEXTURE0+m),a?this._batchTextures[m]=u[m]:(u[m]=this._batchTextures[m],this._batchTextures[m]=this._baseTextures[m]),f.bindTexture(f.TEXTURE_2D,this._batchTextures[m]),this.setTextureParams(f,this._batchTextures[m].isPOT);a&&u===this._backupTextures&&(this._backupTextures=[])},y._batchDraw=function(a,u,f){0<this._isDrawing&&this._drawBuffers(u),this._isDrawing++,this._drawID++,this.batchCardCount=0,this.depth=0,this._appendToBatchGroup(a,u,new ee.Matrix2D,this.alpha,f),this.batchReason="drawFinish",this._drawBuffers(u),this._isDrawing--},y._cacheDraw=function(a,u,f,m){var D=this._activeShader,J=this._slotBlacklist,se=this._maxTextureSlots-1,we=this._viewportWidth,Te=this._viewportHeight;this.protectTextureSlot(se,!0);var t=u.getMatrix();(t=t.clone()).scale(1/m.scale,1/m.scale),(t=t.invert()).translate(-m.offX/m.scale*u.scaleX,-m.offY/m.scale*u.scaleY);var r=this._cacheContainer;r.children=[u],r.transformMatrix=t,this._backupBatchTextures(!1),f&&f.length?this._drawFilters(u,f,m):this.isCacheControlled?(a.clear(a.COLOR_BUFFER_BIT),this._batchDraw(r,a,!0)):(a.activeTexture(a.TEXTURE0+se),u.cacheCanvas=this.getTargetRenderTexture(u,m._drawWidth,m._drawHeight),u=u.cacheCanvas,a.bindFramebuffer(a.FRAMEBUFFER,u._frameBuffer),this.updateViewport(m._drawWidth,m._drawHeight),this._projectionMatrix=this._projectionMatrixFlip,a.clear(a.COLOR_BUFFER_BIT),this._batchDraw(r,a,!0),a.bindFramebuffer(a.FRAMEBUFFER,null),this.updateViewport(we,Te)),this._backupBatchTextures(!0),this.protectTextureSlot(se,!1),this._activeShader=D,this._slotBlacklist=J},y._drawFilters=function(a,u,f){var m,D=this._webGLContext,J=this._maxTextureSlots-1,se=this._viewportWidth,we=this._viewportHeight,Te=this._cacheContainer,t=u.length;D.activeTexture(D.TEXTURE0+J),m=this.getTargetRenderTexture(a,f._drawWidth,f._drawHeight),D.bindFramebuffer(D.FRAMEBUFFER,m._frameBuffer),this.updateViewport(f._drawWidth,f._drawHeight),D.clear(D.COLOR_BUFFER_BIT),this._batchDraw(Te,D,!0),D.activeTexture(D.TEXTURE0),D.bindTexture(D.TEXTURE_2D,m),this.setTextureParams(D);for(var r=!1,i=0,o=u[i];this._activeShader=this.getFilterShader(o),this._activeShader&&(D.activeTexture(D.TEXTURE0+J),m=this.getTargetRenderTexture(a,f._drawWidth,f._drawHeight),D.bindFramebuffer(D.FRAMEBUFFER,m._frameBuffer),D.viewport(0,0,f._drawWidth,f._drawHeight),D.clear(D.COLOR_BUFFER_BIT),this._drawCover(D,r),D.activeTexture(D.TEXTURE0),D.bindTexture(D.TEXTURE_2D,m),this.setTextureParams(D),(1<t||u[0]._multiPass)&&(r=!r),o=o._multiPass!==null?o._multiPass:u[++i]),o;);this.isCacheControlled?(D.bindFramebuffer(D.FRAMEBUFFER,null),this.updateViewport(se,we),this._activeShader=this.getFilterShader(this),D.clear(D.COLOR_BUFFER_BIT),this._drawCover(D,r)):(r&&(D.activeTexture(D.TEXTURE0+J),m=this.getTargetRenderTexture(a,f._drawWidth,f._drawHeight),D.bindFramebuffer(D.FRAMEBUFFER,m._frameBuffer),this._activeShader=this.getFilterShader(this),D.viewport(0,0,f._drawWidth,f._drawHeight),D.clear(D.COLOR_BUFFER_BIT),this._drawCover(D,!r)),D.bindFramebuffer(D.FRAMEBUFFER,null),this.updateViewport(se,we),a.cacheCanvas=m)},y._appendToBatchGroup=function(a,u,f,m,D){a._glMtx||(a._glMtx=new ee.Matrix2D);var J,se,we,Te,t=a._glMtx;t.copy(f),a.transformMatrix?t.appendMatrix(a.transformMatrix):t.appendTransform(a.x,a.y,a.scaleX,a.scaleY,a.rotation,a.skewX,a.skewY,a.regX,a.regY);for(var r=a.children.length,i=0;i<r;i++){var o=a.children[i];if(o.visible&&m)if(o.cacheCanvas&&!D||(o._updateState&&o._updateState(),!o.children)){this.batchCardCount+1>this._maxCardsPerBatch&&(this.batchReason="vertexOverflow",this._drawBuffers(u),this.batchCardCount=0),o._glMtx||(o._glMtx=new ee.Matrix2D);var l,c,p,v,w=o._glMtx;w.copy(t),o.transformMatrix?w.appendMatrix(o.transformMatrix):w.appendTransform(o.x,o.y,o.scaleX,o.scaleY,o.rotation,o.skewX,o.skewY,o.regX,o.regY);var b=o.cacheCanvas&&!D;if(o._webGLRenderStyle===2||b)l=!D&&o.cacheCanvas||o.image;else{if(o._webGLRenderStyle!==1||(c=o.spriteSheet.getFrame(o.currentFrame))===null)continue;l=c.image}var _=this._uvs,E=this._vertices,S=this._indices,P=this._alphas;if(l){if(l._storeID===void 0)p=this._loadTextureImage(u,l),this._insertTextureInBatch(u,p);else{if(!(p=this._textureDictionary[l._storeID])){this.vocalDebug&&console.log("Texture should not be looked up while not being stored.");continue}p._batchID!==this._batchID&&this._insertTextureInBatch(u,p)}var A,R=p._activeIndex;o._webGLRenderStyle===2||b?Te=!b&&o.sourceRect?(o._uvRect||(o._uvRect={}),v=o.sourceRect,(A=o._uvRect).t=v.y/l.height,A.l=v.x/l.width,A.b=(v.y+v.height)/l.height,A.r=(v.x+v.width)/l.width,se=J=0,we=v.width+J,v.height+se):(A=e.UV_RECT,b?(J=(v=o.bitmapCache).x+v._filterOffX/v.scale,se=v.y+v._filterOffY/v.scale,we=v._drawWidth/v.scale+J,v._drawHeight/v.scale+se):(se=J=0,we=l.width+J,l.height+se)):o._webGLRenderStyle===1&&(T=c.rect,A=(A=c.uvRect)||e.buildUVRects(o.spriteSheet,o.currentFrame,!1),J=-c.regX,se=-c.regY,we=T.width-c.regX,Te=T.height-c.regY);var b=this.batchCardCount*e.INDICIES_PER_CARD,T=2*b;E[T]=J*w.a+se*w.c+w.tx,E[1+T]=J*w.b+se*w.d+w.ty,E[2+T]=J*w.a+Te*w.c+w.tx,E[3+T]=J*w.b+Te*w.d+w.ty,E[4+T]=we*w.a+se*w.c+w.tx,E[5+T]=we*w.b+se*w.d+w.ty,E[6+T]=E[2+T],E[7+T]=E[3+T],E[8+T]=E[4+T],E[9+T]=E[5+T],E[10+T]=we*w.a+Te*w.c+w.tx,E[11+T]=we*w.b+Te*w.d+w.ty,_[T]=A.l,_[1+T]=A.t,_[2+T]=A.l,_[3+T]=A.b,_[4+T]=A.r,_[5+T]=A.t,_[6+T]=A.l,_[7+T]=A.b,_[8+T]=A.r,_[9+T]=A.t,_[10+T]=A.r,_[11+T]=A.b,S[b]=S[1+b]=S[2+b]=S[3+b]=S[4+b]=S[5+b]=R,P[b]=P[1+b]=P[2+b]=P[3+b]=P[4+b]=P[5+b]=o.alpha*m,this.batchCardCount++}}else this._appendToBatchGroup(o,u,t,o.alpha*m)}},y._drawBuffers=function(a){if(!(this.batchCardCount<=0)){this.vocalDebug&&console.log("Draw["+this._drawID+":"+this._batchID+"] : "+this.batchReason);var u=this._activeShader,f=this._vertexPositionBuffer,m=this._textureIndexBuffer,D=this._uvPositionBuffer,J=this._alphaBuffer;a.useProgram(u),a.bindBuffer(a.ARRAY_BUFFER,f),a.vertexAttribPointer(u.vertexPositionAttribute,f.itemSize,a.FLOAT,!1,0,0),a.bufferSubData(a.ARRAY_BUFFER,0,this._vertices),a.bindBuffer(a.ARRAY_BUFFER,m),a.vertexAttribPointer(u.textureIndexAttribute,m.itemSize,a.FLOAT,!1,0,0),a.bufferSubData(a.ARRAY_BUFFER,0,this._indices),a.bindBuffer(a.ARRAY_BUFFER,D),a.vertexAttribPointer(u.uvPositionAttribute,D.itemSize,a.FLOAT,!1,0,0),a.bufferSubData(a.ARRAY_BUFFER,0,this._uvs),a.bindBuffer(a.ARRAY_BUFFER,J),a.vertexAttribPointer(u.alphaAttribute,J.itemSize,a.FLOAT,!1,0,0),a.bufferSubData(a.ARRAY_BUFFER,0,this._alphas),a.uniformMatrix4fv(u.pMatrixUniform,a.FALSE,this._projectionMatrix);for(var se=0;se<this._batchTextureCount;se++){var we=this._batchTextures[se];a.activeTexture(a.TEXTURE0+se),a.bindTexture(a.TEXTURE_2D,we),this.setTextureParams(a,we.isPOT)}a.drawArrays(a.TRIANGLES,0,this.batchCardCount*e.INDICIES_PER_CARD),this._batchID++}},y._drawCover=function(a,u){0<this._isDrawing&&this._drawBuffers(a),this.vocalDebug&&console.log("Draw["+this._drawID+":"+this._batchID+"] : Cover");var f=this._activeShader,m=this._vertexPositionBuffer,D=this._uvPositionBuffer;a.clear(a.COLOR_BUFFER_BIT),a.useProgram(f),a.bindBuffer(a.ARRAY_BUFFER,m),a.vertexAttribPointer(f.vertexPositionAttribute,m.itemSize,a.FLOAT,!1,0,0),a.bufferSubData(a.ARRAY_BUFFER,0,e.COVER_VERT),a.bindBuffer(a.ARRAY_BUFFER,D),a.vertexAttribPointer(f.uvPositionAttribute,D.itemSize,a.FLOAT,!1,0,0),a.bufferSubData(a.ARRAY_BUFFER,0,u?e.COVER_UV_FLIP:e.COVER_UV),a.uniform1i(f.samplerUniform,0),a.uniform1f(f.uprightUniform,u?0:1),a.drawArrays(a.TRIANGLES,0,e.INDICIES_PER_CARD)},ee.StageGL=ee.promote(e,"Stage")}(),function(){function e(a){this.DisplayObject_constructor(),typeof a=="string"?(this.image=document.createElement("img"),this.image.src=a):this.image=a,this.sourceRect=null,this._webGLRenderStyle=ee.DisplayObject._StageGL_BITMAP}var y=ee.extend(e,ee.DisplayObject);y.initialize=e,y.isVisible=function(){var a=this.image,a=this.cacheCanvas||a&&(a.naturalWidth||a.getContext||2<=a.readyState);return!!(this.visible&&0<this.alpha&&this.scaleX!=0&&this.scaleY!=0&&a)},y.draw=function(a,u){if(this.DisplayObject_draw(a,u))return!0;var f,m,D,J,se,we=this.image,Te=this.sourceRect;return we.getImage&&(we=we.getImage()),we&&(Te?(f=Te.x,m=Te.y,D=f+Te.width,J=m+Te.height,f<(u=se=0)&&(se-=f,f=0),(Te=we.width)<D&&(D=Te),m<0&&(u-=m,m=0),(Te=we.height)<J&&(J=Te),a.drawImage(we,f,m,D-f,J-m,se,u,D-f,J-m)):a.drawImage(we,0,0)),!0},y.cache=function(a,u,f,m,D,J){this.bitmapCache||(this.bitmapCache=new ee.BitmapCache),this.bitmapCache.define(this,a,u,f,m,D,J)},y.updateCache=function(a){if(!this.bitmapCache)throw"cache() must be called before updateCache()";this.bitmapCache.update(a)},y.uncache=function(){this.bitmapCache&&(this.bitmapCache.release(),this.bitmapCache=void 0)},y.getCacheDataURL=function(){return this.bitmapCache?this.bitmapCache.getDataURL():null},y.getBounds=function(){var u=this.DisplayObject_getBounds();if(u)return u;var a=this.image,u=this.sourceRect||a;return a&&(a.naturalWidth||a.getContext||2<=a.readyState)?this._rectangle.setValues(0,0,u.width,u.height):null},y.clone=function(a){var u=this.image;return u&&a&&(u=u.cloneNode()),u=new e(u),this.sourceRect&&(u.sourceRect=this.sourceRect.clone()),this._cloneProps(u),u},y.toString=function(){return"[Bitmap (name="+this.name+")]"},ee.Bitmap=ee.promote(e,"DisplayObject")}(),function(){"use strict";function e(a,u){this.DisplayObject_constructor(),this.currentFrame=0,this.currentAnimation=null,this.paused=!0,this.spriteSheet=a,this.currentAnimationFrame=0,this.framerate=0,this._animation=null,this._currentFrame=null,this._skipAdvance=!1,this._webGLRenderStyle=ee.DisplayObject._StageGL_SPRITE,u!=null&&this.gotoAndPlay(u)}var y=ee.extend(e,ee.DisplayObject);y.initialize=e,y.isVisible=function(){var a=this.cacheCanvas||this.spriteSheet.complete;return!!(this.visible&&0<this.alpha&&this.scaleX!=0&&this.scaleY!=0&&a)},y.draw=function(a,u){if(this.DisplayObject_draw(a,u))return!0;this._normalizeFrame();var f=this.spriteSheet.getFrame(0|this._currentFrame);return f?(u=f.rect,u.width&&u.height&&a.drawImage(f.image,u.x,u.y,u.width,u.height,-f.regX,-f.regY,u.width,u.height),!0):!1},y.play=function(){this.paused=!1},y.stop=function(){this.paused=!0},y.gotoAndPlay=function(a){this.paused=!1,this._skipAdvance=!0,this._goto(a)},y.gotoAndStop=function(a){this.paused=!0,this._goto(a)},y.advance=function(a){var u=this.framerate||this.spriteSheet.framerate,u=u&&a!=null?a/(1e3/u):1;this._normalizeFrame(u)},y.getBounds=function(){return this.DisplayObject_getBounds()||this.spriteSheet.getFrameBounds(this.currentFrame,this._rectangle)},y.clone=function(){return this._cloneProps(new e(this.spriteSheet))},y.toString=function(){return"[Sprite (name="+this.name+")]"},y._cloneProps=function(a){return this.DisplayObject__cloneProps(a),a.currentFrame=this.currentFrame,a.currentAnimation=this.currentAnimation,a.paused=this.paused,a.currentAnimationFrame=this.currentAnimationFrame,a.framerate=this.framerate,a._animation=this._animation,a._currentFrame=this._currentFrame,a._skipAdvance=this._skipAdvance,a},y._tick=function(a){this.paused||(this._skipAdvance||this.advance(a&&a.delta),this._skipAdvance=!1),this.DisplayObject__tick(a)},y._normalizeFrame=function(a){a=a||0;var u=this._animation,f=this.paused,m=this._currentFrame;if(u){var D,J=u.speed||1,se=this.currentAnimationFrame;if((D=u.frames.length)<=se+a*J){var we=u.next;if(this._dispatchAnimationEnd(u,m,f,we,D-1))return;if(we)return this._goto(we,a-(D-se)/J);this.paused=!0,se=u.frames.length-1}else se+=a*J;this.currentAnimationFrame=se,this._currentFrame=u.frames[0|se]}else if(m=this._currentFrame+=a,D=this.spriteSheet.getNumFrames(),D<=m&&0<D&&!this._dispatchAnimationEnd(u,m,f,D-1)&&(this._currentFrame-=D)>=D)return this._normalizeFrame();m=0|this._currentFrame,this.currentFrame!=m&&(this.currentFrame=m,this.dispatchEvent("change"))},y._dispatchAnimationEnd=function(a,u,f,m,D){var J,se=a?a.name:null;return this.hasEventListener("animationend")&&((J=new ee.Event("animationend")).name=se,J.next=m,this.dispatchEvent(J)),u=this._animation!=a||this._currentFrame!=u,u||f||!this.paused||(this.currentAnimationFrame=D,u=!0),u},y._goto=function(a,u){var f;this.currentAnimationFrame=0,isNaN(a)?(f=this.spriteSheet.getAnimation(a))&&(this._animation=f,this.currentAnimation=a,this._normalizeFrame(u)):(this.currentAnimation=this._animation=null,this._currentFrame=a,this._normalizeFrame())},ee.Sprite=ee.promote(e,"DisplayObject")}(),function(){"use strict";function e(a){this.DisplayObject_constructor(),this.graphics=a||new ee.Graphics}var y=ee.extend(e,ee.DisplayObject);y.isVisible=function(){var a=this.cacheCanvas||this.graphics&&!this.graphics.isEmpty();return!!(this.visible&&0<this.alpha&&this.scaleX!=0&&this.scaleY!=0&&a)},y.draw=function(a,u){return this.DisplayObject_draw(a,u)||this.graphics.draw(a,this),!0},y.clone=function(a){return a=a&&this.graphics?this.graphics.clone():this.graphics,this._cloneProps(new e(a))},y.toString=function(){return"[Shape (name="+this.name+")]"},ee.Shape=ee.promote(e,"DisplayObject")}(),function(){"use strict";function e(u,f,m){this.DisplayObject_constructor(),this.text=u,this.font=f,this.color=m,this.textAlign="left",this.textBaseline="top",this.maxWidth=null,this.outline=0,this.lineHeight=0,this.lineWidth=null}var y=ee.extend(e,ee.DisplayObject),a=ee.createCanvas?ee.createCanvas():document.createElement("canvas");a.getContext&&(e._workingContext=a.getContext("2d"),a.width=a.height=1),e.H_OFFSETS={start:0,left:0,center:-.5,end:-1,right:-1},e.V_OFFSETS={top:0,hanging:-.01,middle:-.4,alphabetic:-.8,ideographic:-.85,bottom:-1},y.isVisible=function(){var u=this.cacheCanvas||this.text!=null&&this.text!=="";return!!(this.visible&&0<this.alpha&&this.scaleX!=0&&this.scaleY!=0&&u)},y.draw=function(u,f){return this.DisplayObject_draw(u,f)?!0:(f=this.color||"#000",this.outline?(u.strokeStyle=f,u.lineWidth=+this.outline):u.fillStyle=f,this._drawText(this._prepContext(u)),!0)},y.getMeasuredWidth=function(){return this._getMeasuredWidth(this.text)},y.getMeasuredLineHeight=function(){return 1.2*this._getMeasuredWidth("M")},y.getMeasuredHeight=function(){return this._drawText(null,{}).height},y.getBounds=function(){var D=this.DisplayObject_getBounds();if(D)return D;if(this.text==null||this.text==="")return null;var u=this._drawText(null,{}),f=this.maxWidth&&this.maxWidth<u.width?this.maxWidth:u.width,m=f*e.H_OFFSETS[this.textAlign||"left"],D=(this.lineHeight||this.getMeasuredLineHeight())*e.V_OFFSETS[this.textBaseline||"top"];return this._rectangle.setValues(m,D,f,u.height)},y.getMetrics=function(){var u={lines:[]};return u.lineHeight=this.lineHeight||this.getMeasuredLineHeight(),u.vOffset=u.lineHeight*e.V_OFFSETS[this.textBaseline||"top"],this._drawText(null,u,u.lines)},y.clone=function(){return this._cloneProps(new e(this.text,this.font,this.color))},y.toString=function(){return"[Text (text="+(20<this.text.length?this.text.substr(0,17)+"...":this.text)+")]"},y._cloneProps=function(u){return this.DisplayObject__cloneProps(u),u.textAlign=this.textAlign,u.textBaseline=this.textBaseline,u.maxWidth=this.maxWidth,u.outline=this.outline,u.lineHeight=this.lineHeight,u.lineWidth=this.lineWidth,u},y._prepContext=function(u){return u.font=this.font||"10px sans-serif",u.textAlign=this.textAlign||"left",u.textBaseline=this.textBaseline||"top",u.lineJoin="miter",u.miterLimit=2.5,u},y._drawText=function(u,f,m){var D=!!u;D||((u=e._workingContext).save(),this._prepContext(u));for(var J=this.lineHeight||this.getMeasuredLineHeight(),se=0,we=0,Te=String(this.text).split(/(?:\r\n|\r|\n)/),t=0,r=Te.length;t<r;t++){var i=Te[t],o=null;if(this.lineWidth!=null&&(o=u.measureText(i).width)>this.lineWidth)for(var l=i.split(/(\s)/),i=l[0],o=u.measureText(i).width,c=1,p=l.length;c<p;c+=2){var v=u.measureText(l[c]+l[c+1]).width;o+v>this.lineWidth?(D&&this._drawTextLine(u,i,we*J),m&&m.push(i),se<o&&(se=o),i=l[c+1],o=u.measureText(i).width,we++):(i+=l[c]+l[c+1],o+=v)}D&&this._drawTextLine(u,i,we*J),m&&m.push(i),f&&o==null&&(o=u.measureText(i).width),se<o&&(se=o),we++}return f&&(f.width=se,f.height=we*J),D||u.restore(),f},y._drawTextLine=function(u,f,m){this.outline?u.strokeText(f,0,m,this.maxWidth||65535):u.fillText(f,0,m,this.maxWidth||65535)},y._getMeasuredWidth=function(u){var f=e._workingContext;return f.save(),u=this._prepContext(f).measureText(u).width,f.restore(),u},ee.Text=ee.promote(e,"DisplayObject")}(),function(){"use strict";function e(a,u){this.Container_constructor(),this.text=a||"",this.spriteSheet=u,this.lineHeight=0,this.letterSpacing=0,this.spaceWidth=0,this._oldProps={text:0,spriteSheet:0,lineHeight:0,letterSpacing:0,spaceWidth:0},this._oldStage=null,this._drawAction=null}var y=ee.extend(e,ee.Container);e.maxPoolSize=100,e._spritePool=[],y.draw=function(a,u){this.DisplayObject_draw(a,u)||(this._updateState(),this.Container_draw(a,u))},y.getBounds=function(){return this._updateText(),this.Container_getBounds()},y.isVisible=function(){var a=this.cacheCanvas||this.spriteSheet&&this.spriteSheet.complete&&this.text;return!!(this.visible&&0<this.alpha&&this.scaleX!==0&&this.scaleY!==0&&a)},y.clone=function(){return this._cloneProps(new e(this.text,this.spriteSheet))},y.addChild=y.addChildAt=y.removeChild=y.removeChildAt=y.removeAllChildren=function(){},y._updateState=function(){this._updateText()},y._cloneProps=function(a){return this.Container__cloneProps(a),a.lineHeight=this.lineHeight,a.letterSpacing=this.letterSpacing,a.spaceWidth=this.spaceWidth,a},y._getFrameIndex=function(a,u){var f,m=u.getAnimation(a);return m||(a!=(f=a.toUpperCase())||a!=(f=a.toLowerCase())||(f=null),f&&(m=u.getAnimation(f))),m&&m.frames[0]},y._getFrame=function(a,u){return a=this._getFrameIndex(a,u),a==null?a:u.getFrame(a)},y._getLineHeight=function(a){return a=this._getFrame("1",a)||this._getFrame("T",a)||this._getFrame("L",a)||a.getFrame(0),a?a.rect.height:1},y._getSpaceWidth=function(a){return a=this._getFrame("1",a)||this._getFrame("l",a)||this._getFrame("e",a)||this._getFrame("a",a)||a.getFrame(0),a?a.rect.width:1},y._updateText=function(){var a,u,f=0,m=0,D=this._oldProps,J=!1,se=this.spaceWidth,we=this.lineHeight,Te=this.spriteSheet,t=e._spritePool,r=this.children,i=0,o=r.length;for(u in D)D[u]!=this[u]&&(D[u]=this[u],J=!0);if(J){var l=!!this._getFrame(" ",Te);l||se||(se=this._getSpaceWidth(Te)),we=we||this._getLineHeight(Te);for(var c=0,p=this.text.length;c<p;c++){var v,w=this.text.charAt(c);w!=" "||l?w!="\n"&&w!="\r"?(v=this._getFrameIndex(w,Te))!=null&&(i<o?a=r[i]:(r.push(a=t.length?t.pop():new ee.Sprite),a.parent=this,o++),a.spriteSheet=Te,a.gotoAndStop(v),a.x=f,a.y=m,i++,f+=a.getBounds().width+this.letterSpacing):(w=="\r"&&this.text.charAt(c+1)=="\n"&&c++,f=0,m+=we):f+=se}for(;i<o;)t.push(a=r.pop()),a.parent=null,o--;t.length>e.maxPoolSize&&(t.length=e.maxPoolSize)}},ee.BitmapText=ee.promote(e,"Container")}(),function(){"use strict";function e(u){var f,m,D,J;this.Container_constructor(),e.inited||e.init(),u instanceof String||1<arguments.length?(f=u,m=arguments[1],D=arguments[2],J=arguments[3],D==null&&(D=-1),u=null):u&&(f=u.mode,m=u.startPosition,D=u.loop,J=u.labels),u=u||{labels:J},this.mode=f||e.INDEPENDENT,this.startPosition=m||0,this.loop=D===!0?-1:D||0,this.currentFrame=0,this.paused=u.paused||!1,this.actionsEnabled=!0,this.autoReset=!0,this.frameBounds=this.frameBounds||u.frameBounds,this.framerate=null,u.useTicks=u.paused=!0,this.timeline=new ee.Timeline(u),this._synchOffset=0,this._rawPosition=-1,this._bound_resolveState=this._resolveState.bind(this),this._t=0,this._managed={}}var y=ee.extend(e,ee.Container);e.INDEPENDENT="independent",e.SINGLE_FRAME="single",e.SYNCHED="synched",e.inited=!1,e.init=function(){e.inited||(a.install(),e.inited=!0)},y._getLabels=function(){return this.timeline.getLabels()},y.getLabels=ee.deprecate(y._getLabels,"MovieClip.getLabels"),y._getCurrentLabel=function(){return this.timeline.currentLabel},y.getCurrentLabel=ee.deprecate(y._getCurrentLabel,"MovieClip.getCurrentLabel"),y._getDuration=function(){return this.timeline.duration},y.getDuration=ee.deprecate(y._getDuration,"MovieClip.getDuration");try{Object.defineProperties(y,{labels:{get:y._getLabels},currentLabel:{get:y._getCurrentLabel},totalFrames:{get:y._getDuration},duration:{get:y._getDuration}})}catch(u){}function a(){throw"MovieClipPlugin cannot be instantiated."}y.initialize=e,y.isVisible=function(){return!!(this.visible&&0<this.alpha&&this.scaleX!=0&&this.scaleY!=0)},y.draw=function(u,f){return this.DisplayObject_draw(u,f)||(this._updateState(),this.Container_draw(u,f)),!0},y.play=function(){this.paused=!1},y.stop=function(){this.paused=!0},y.gotoAndPlay=function(u){this.paused=!1,this._goto(u)},y.gotoAndStop=function(u){this.paused=!0,this._goto(u)},y.advance=function(u){var f=e.INDEPENDENT;if(this.mode===f){for(var m=this,D=m.framerate;(m=m.parent)&&D===null;)m.mode===f&&(D=m._framerate);if(this._framerate=D,!(this.totalFrames<=1)){var u=D!==null&&D!==-1&&u!==null?u/(1e3/D)+this._t:1,J=0|u;for(this._t=u-J;!this.paused&&J--;)this._updateTimeline(this._rawPosition+1,!1)}}},y.clone=function(){throw"MovieClip cannot be cloned."},y.toString=function(){return"[MovieClip (name="+this.name+")]"},y._updateState=function(){this._rawPosition!==-1&&this.mode===e.INDEPENDENT||this._updateTimeline(-1)},y._tick=function(u){this.advance(u&&u.delta),this.Container__tick(u)},y._goto=function(u){u=this.timeline.resolve(u),u!=null&&(this._t=0,this._updateTimeline(u,!0))},y._reset=function(){this._rawPosition=-1,this._t=this.currentFrame=0,this.paused=!1},y._updateTimeline=function(u,f){var m=this.mode!==e.INDEPENDENT,D=this.timeline;m&&(u=this.startPosition+(this.mode===e.SINGLE_FRAME?0:this._synchOffset)),u<0&&(u=0),this._rawPosition===u&&!m||(this._rawPosition=u,D.loop=this.loop,D.setPosition(u,m||!this.actionsEnabled,f,this._bound_resolveState))},y._renderFirstFrame=function(){var u=this.timeline,f=u.rawPosition;u.setPosition(0,!0,!0,this._bound_resolveState),u.rawPosition=f},y._resolveState=function(){var u,f=this.timeline;for(u in this.currentFrame=f.position,this._managed)this._managed[u]=1;for(var m=f.tweens,D=0,J=m.length;D<J;D++){var se=m[D],we=se.target;we===this||se.passive||(se=se._stepPosition,we instanceof ee.DisplayObject?this._addManagedChild(we,se):this._setState(we.state,se))}for(var Te=this.children,D=Te.length-1;0<=D;D--){var t=Te[D].id;this._managed[t]===1&&(this.removeChildAt(D),delete this._managed[t])}},y._setState=function(u,f){if(u)for(var m=u.length-1;0<=m;m--){var D,J=u[m],se=J.t,we=J.p;for(D in we)se[D]=we[D];this._addManagedChild(se,f)}},y._addManagedChild=function(u,f){u._off||(this.addChildAt(u,0),u instanceof e&&(u._synchOffset=f,u.mode===e.INDEPENDENT&&u.autoReset&&!this._managed[u.id]&&u._reset()),this._managed[u.id]=2)},y._getBounds=function(u,f){var m=this.DisplayObject_getBounds();return m||this.frameBounds&&(m=this._rectangle.copy(this.frameBounds[this.currentFrame])),m?this._transformBounds(m,u,f):this.Container__getBounds(u,f)},ee.MovieClip=ee.promote(e,"Container"),a.priority=100,a.ID="MovieClip",a.install=function(){ee.Tween._installPlugin(a)},a.init=function(u,f,m){f==="startPosition"&&u.target instanceof e&&u._addPlugin(a)},a.step=function(u,f,m){},a.change=function(u,f,m,D,J,se){if(m==="startPosition")return(J===1?f:f.prev).props[m]}}(),function(){"use strict";function e(){throw"SpriteSheetUtils cannot be instantiated"}var y=ee.createCanvas?ee.createCanvas():document.createElement("canvas");y.getContext&&(e._workingCanvas=y,e._workingContext=y.getContext("2d"),y.width=y.height=1),e.extractFrame=function(a,u){isNaN(u)&&(u=a.getAnimation(u).frames[0]);var f=a.getFrame(u);return f?(a=f.rect,u=e._workingCanvas,u.width=a.width,u.height=a.height,e._workingContext.drawImage(f.image,a.x,a.y,a.width,a.height,0,0,a.width,a.height),a=document.createElement("img"),a.src=u.toDataURL("image/png"),a):null},e.addFlippedFrames=ee.deprecate(null,"SpriteSheetUtils.addFlippedFrames"),e.mergeAlpha=ee.deprecate(null,"SpriteSheetUtils.mergeAlpha"),e._flip=function(a,u,f,m){for(var D=a._images,J=e._workingCanvas,se=e._workingContext,we=D.length/u,Te=0;Te<we;Te++){var t=D[Te];t.__tmp=Te,se.setTransform(1,0,0,1,0,0),se.clearRect(0,0,J.width+1,J.height+1),J.width=t.width,J.height=t.height,se.setTransform(f?-1:1,0,0,m?-1:1,f?t.width:0,m?t.height:0),se.drawImage(t,0,0);var r=document.createElement("img");r.src=J.toDataURL("image/png"),r.width=t.width||t.naturalWidth,r.height=t.height||t.naturalHeight,D.push(r)}for(var i=a._frames,o=i.length/u,Te=0;Te<o;Te++){var l=(t=i[Te]).rect.clone(),c={image:r=D[t.image.__tmp+we*u],rect:l,regX:t.regX,regY:t.regY};f&&(l.x=(r.width||r.naturalWidth)-l.x-l.width,c.regX=l.width-t.regX),m&&(l.y=(r.height||r.naturalHeight)-l.y-l.height,c.regY=l.height-t.regY),i.push(c)}var p="_"+(f?"h":"")+(m?"v":""),v=a._animations,w=a._data,b=v.length/u;for(Te=0;Te<b;Te++){var _=v[Te],E={name:_+p,speed:(t=w[_]).speed,next:t.next,frames:[]};t.next&&(E.next+=p);for(var S=0,P=(i=t.frames).length;S<P;S++)E.frames.push(i[S]+o*u);w[E.name]=E,v.push(E.name)}},ee.SpriteSheetUtils=e}(),function(){"use strict";function e(a){this.EventDispatcher_constructor(),this.maxWidth=2048,this.maxHeight=2048,this.spriteSheet=null,this.scale=1,this.padding=1,this.timeSlice=.3,this.progress=-1,this.framerate=a||0,this._frames=[],this._animations={},this._data=null,this._nextFrameIndex=0,this._index=0,this._timerID=null,this._scale=1}var y=ee.extend(e,ee.EventDispatcher);e.ERR_DIMENSIONS="frame dimensions exceed max spritesheet dimensions",e.ERR_RUNNING="a build is already running",y.addFrame=function(a,u,f,m,D){if(this._data)throw e.ERR_RUNNING;return u=u||a.bounds||a.nominalBounds,!u&&a.getBounds&&(u=a.getBounds()),u?(f=f||1,this._frames.push({source:a,sourceRect:u,scale:f,funct:m,data:D,index:this._frames.length,height:u.height*f})-1):null},y.addAnimation=function(a,u,f,m){if(this._data)throw e.ERR_RUNNING;this._animations[a]={frames:u,next:f,speed:m}},y.addMovieClip=function(a,u,f,m,D,J){if(this._data)throw e.ERR_RUNNING;var se=a.frameBounds,we=u||a.bounds||a.nominalBounds;if(!we&&a.getBounds&&(we=a.getBounds()),we||se){for(var Te,t=this._frames.length,r=a.timeline.duration,i=0;i<r;i++){var o=se&&se[i]?se[i]:we;this.addFrame(a,o,f,this._setupMovieClipFrame,{i,f:m,d:D})}var l,c=a.timeline._labels,p=[];for(l in c)p.push({index:c[l],label:l});if(p.length)for(p.sort(function(S,P){return S.index-P.index}),i=0,Te=p.length;i<Te;i++){for(var v=p[i].label,w=t+p[i].index,b=t+(i==Te-1?r:p[i+1].index),_=[],E=w;E<b;E++)_.push(E);J&&!(v=J(v,a,w,b))||this.addAnimation(v,_,!0)}}},y.build=function(){if(this._data)throw e.ERR_RUNNING;for(this._startBuild();this._drawNext(););return this._endBuild(),this.spriteSheet},y.buildAsync=function(a){if(this._data)throw e.ERR_RUNNING;this.timeSlice=a,this._startBuild();var u=this;this._timerID=setTimeout(function(){u._run()},50-50*Math.max(.01,Math.min(.99,this.timeSlice||.3)))},y.stopAsync=function(){clearTimeout(this._timerID),this._data=null},y.clone=function(){throw"SpriteSheetBuilder cannot be cloned."},y.toString=function(){return"[SpriteSheetBuilder]"},y._startBuild=function(){var a=this.padding||0;this.progress=0,this.spriteSheet=null,this._index=0,this._scale=this.scale;var u=[];this._data={images:[],frames:u,framerate:this.framerate,animations:this._animations};var f=this._frames.slice();if(f.sort(function(Te,t){return Te.height<=t.height?-1:1}),f[f.length-1].height+2*a>this.maxHeight)throw e.ERR_DIMENSIONS;for(var m=0,D=0,J=0;f.length;){var se,we=this._fillRow(f,m,J,u,a);we.w>D&&(D=we.w),m+=we.h,we.h&&f.length||((se=ee.createCanvas?ee.createCanvas():document.createElement("canvas")).width=this._getSize(D,this.maxWidth),se.height=this._getSize(m,this.maxHeight),this._data.images[J]=se,we.h||(D=m=0,J++))}},y._setupMovieClipFrame=function(a,u){var f=a.actionsEnabled;a.actionsEnabled=!1,a.gotoAndStop(u.i),a.actionsEnabled=f,u.f&&u.f(a,u.d,u.i)},y._getSize=function(a,u){for(var f=4;Math.pow(2,++f)<a;);return Math.min(u,Math.pow(2,f))},y._fillRow=function(a,u,f,m,D){for(var J=this.maxWidth,se=this.maxHeight-(u+=D),we=D,Te=0,t=a.length-1;0<=t;t--){var r=a[t],i=this._scale*r.scale,v=r.sourceRect,o=r.source,l=Math.floor(i*v.x-D),c=Math.floor(i*v.y-D),p=Math.ceil(i*v.height+2*D),v=Math.ceil(i*v.width+2*D);if(J<v)throw e.ERR_DIMENSIONS;se<p||J<we+v||(r.img=f,r.rect=new ee.Rectangle(we,u,v,p),Te=Te||p,a.splice(t,1),m[r.index]=[we,u,v,p,f,Math.round(-l+i*o.regX-D),Math.round(-c+i*o.regY-D)],we+=v)}return{w:we,h:Te}},y._endBuild=function(){this.spriteSheet=new ee.SpriteSheet(this._data),this._data=null,this.progress=1,this.dispatchEvent("complete")},y._run=function(){for(var a,u=50*Math.max(.01,Math.min(.99,this.timeSlice||.3)),f=new Date().getTime()+u,m=!1;f>new Date().getTime();)if(!this._drawNext()){m=!0;break}m?this._endBuild():(a=this)._timerID=setTimeout(function(){a._run()},50-u);var D=this.progress=this._index/this._frames.length;this.hasEventListener("progress")&&((u=new ee.Event("progress")).progress=D,this.dispatchEvent(u))},y._drawNext=function(){var a=this._frames[this._index],u=a.scale*this._scale,f=a.rect,m=a.sourceRect,D=this._data.images[a.img].getContext("2d");return a.funct&&a.funct(a.source,a.data),D.save(),D.beginPath(),D.rect(f.x,f.y,f.width,f.height),D.clip(),D.translate(Math.ceil(f.x-m.x*u),Math.ceil(f.y-m.y*u)),D.scale(u,u),a.source.draw(D),D.restore(),++this._index<this._frames.length},ee.SpriteSheetBuilder=ee.promote(e,"EventDispatcher")}(),function(){"use strict";function e(a){this.DisplayObject_constructor(),typeof a=="string"&&(a=document.getElementById(a)),this.mouseEnabled=!1;var u=a.style;u.position="absolute",u.transformOrigin=u.WebkitTransformOrigin=u.msTransformOrigin=u.MozTransformOrigin=u.OTransformOrigin="0% 0%",this.htmlElement=a,this._oldProps=null,this._oldStage=null,this._drawAction=null}var y=ee.extend(e,ee.DisplayObject);y.isVisible=function(){return this.htmlElement!=null},y.draw=function(a,u){return!0},y.cache=function(){},y.uncache=function(){},y.updateCache=function(){},y.hitTest=function(){},y.localToGlobal=function(){},y.globalToLocal=function(){},y.localToLocal=function(){},y.clone=function(){throw"DOMElement cannot be cloned."},y.toString=function(){return"[DOMElement (name="+this.name+")]"},y._tick=function(a){var u=this.stage;u&&u!==this._oldStage&&(this._drawAction&&u.off("drawend",this._drawAction),this._drawAction=u.on("drawend",this._handleDrawEnd,this),this._oldStage=u),this.DisplayObject__tick(a)},y._handleDrawEnd=function(a){var u,f,m,D,J,se=this.htmlElement;se&&(u=se.style,m=(f=this.getConcatenatedDisplayProps(this._props)).matrix,(J=f.visible?"visible":"hidden")!=u.visibility&&(u.visibility=J),f.visible&&(D=1e4,(J=(se=this._oldProps)&&se.matrix)&&J.equals(m)||(J="matrix("+(m.a*D|0)/D+","+(m.b*D|0)/D+","+(m.c*D|0)/D+","+(m.d*D|0)/D+","+(m.tx+.5|0),u.transform=u.WebkitTransform=u.OTransform=u.msTransform=J+","+(m.ty+.5|0)+")",u.MozTransform=J+"px,"+(m.ty+.5|0)+"px)",(se=se||(this._oldProps=new ee.DisplayProps(!0,null))).matrix.copy(m)),se.alpha!=f.alpha&&(u.opacity=""+(f.alpha*D|0)/D,se.alpha=f.alpha)))},ee.DOMElement=ee.promote(e,"DisplayObject")}(),function(){"use strict";function e(){this.usesContext=!1,this._multiPass=null,this.VTX_SHADER_BODY=null,this.FRAG_SHADER_BODY=null}var y=e.prototype;y.getBounds=function(a){return a},y.shaderParamSetup=function(a,u,f){},y.applyFilter=function(a,u,f,m,D,J,se,we){J=J||a,se==null&&(se=u),we==null&&(we=f);try{var Te=a.getImageData(u,f,m,D)}catch(t){return!1}return!!this._applyFilter(Te)&&(J.putImageData(Te,se,we),!0)},y.toString=function(){return"[Filter]"},y.clone=function(){return new e},y._applyFilter=function(a){return!0},ee.Filter=e}(),function(){"use strict";function e(){this.width=void 0,this.height=void 0,this.x=void 0,this.y=void 0,this.scale=1,this.offX=0,this.offY=0,this.cacheID=0,this._filterOffX=0,this._filterOffY=0,this._cacheDataURLID=0,this._cacheDataURL=null,this._drawWidth=0,this._drawHeight=0}var y=e.prototype;e.getFilterBounds=function(a,u){u=u||new ee.Rectangle;var f=a.filters,m=f&&f.length;if(!!m<=0)return u;for(var D=0;D<m;D++){var J=f[D];J&&J.getBounds&&(J=J.getBounds())&&(D==0?u.setValues(J.x,J.y,J.width,J.height):u.extend(J.x,J.y,J.width,J.height))}return u},y.toString=function(){return"[BitmapCache]"},y.define=function(a,u,f,m,D,J,se){if(!a)throw"No symbol to cache";this._options=se,this.target=a,this.width=1<=m?m:1,this.height=1<=D?D:1,this.x=u||0,this.y=f||0,this.scale=J||1,this.update()},y.update=function(a){if(!this.target)throw"define() must be called before update()";var u=e.getFilterBounds(this.target),f=this.target.cacheCanvas;this._drawWidth=Math.ceil(this.width*this.scale)+u.width,this._drawHeight=Math.ceil(this.height*this.scale)+u.height,f&&this._drawWidth==f.width&&this._drawHeight==f.height||this._updateSurface(),this._filterOffX=u.x,this._filterOffY=u.y,this.offX=this.x*this.scale+this._filterOffX,this.offY=this.y*this.scale+this._filterOffY,this._drawToCache(a),this.cacheID=this.cacheID?this.cacheID+1:1},y.release=function(){var a;this._webGLCache?(this._webGLCache.isCacheControlled||(this.__lastRT&&(this.__lastRT=void 0),this.__rtA&&this._webGLCache._killTextureObject(this.__rtA),this.__rtB&&this._webGLCache._killTextureObject(this.__rtB),this.target&&this.target.cacheCanvas&&this._webGLCache._killTextureObject(this.target.cacheCanvas)),this._webGLCache=!1):(a=this.target.stage)instanceof ee.StageGL&&a.releaseTexture(this.target.cacheCanvas),this.target=this.target.cacheCanvas=null,this.cacheID=this._cacheDataURLID=this._cacheDataURL=void 0,this.width=this.height=this.x=this.y=this.offX=this.offY=0,this.scale=1},y.getCacheDataURL=function(){var a=this.target&&this.target.cacheCanvas;return a?(this.cacheID!=this._cacheDataURLID&&(this._cacheDataURLID=this.cacheID,this._cacheDataURL=a.toDataURL?a.getCacheDataURL():null),this._cacheDataURL):null},y.draw=function(a){return!!this.target&&(a.drawImage(this.target.cacheCanvas,this.x+this._filterOffX/this.scale,this.y+this._filterOffY/this.scale,this._drawWidth/this.scale,this._drawHeight/this.scale),!0)},y._updateSurface=function(){if(!this._options||!this._options.useGL)return(a=(a=this.target.cacheCanvas)||(this.target.cacheCanvas=ee.createCanvas?ee.createCanvas():document.createElement("canvas"))).width=this._drawWidth,void(a.height=this._drawHeight);if(!this._webGLCache)if(this._options.useGL==="stage"){if(!this.target.stage||!this.target.stage.isWebGL){var u="Cannot use 'stage' for cache because the object's parent stage is ";throw u+=this.target.stage?"non WebGL.":"not set, please addChild to the correct stage."}this.target.cacheCanvas=!0,this._webGLCache=this.target.stage}else if(this._options.useGL==="new")this.target.cacheCanvas=document.createElement("canvas"),this._webGLCache=new ee.StageGL(this.target.cacheCanvas,{antialias:!0,transparent:!0,autoPurge:-1}),this._webGLCache.isCacheControlled=!0;else{if(!(this._options.useGL instanceof ee.StageGL))throw"Invalid option provided to useGL, expected ['stage', 'new', StageGL, undefined], got "+this._options.useGL;this.target.cacheCanvas=!0,this._webGLCache=this._options.useGL,this._webGLCache.isCacheControlled=!0}var a=this.target.cacheCanvas,u=this._webGLCache;u.isCacheControlled&&(a.width=this._drawWidth,a.height=this._drawHeight,u.updateViewport(this._drawWidth,this._drawHeight)),this.target.filters?(u.getTargetRenderTexture(this.target,this._drawWidth,this._drawHeight),u.getTargetRenderTexture(this.target,this._drawWidth,this._drawHeight)):u.isCacheControlled||u.getTargetRenderTexture(this.target,this._drawWidth,this._drawHeight)},y._drawToCache=function(a){var u=this.target.cacheCanvas,f=this.target,m=this._webGLCache;m?(m.cacheDraw(f,f.filters,this),(u=this.target.cacheCanvas).width=this._drawWidth,u.height=this._drawHeight):(m=u.getContext("2d"),a||m.clearRect(0,0,this._drawWidth+1,this._drawHeight+1),m.save(),m.globalCompositeOperation=a,m.setTransform(this.scale,0,0,this.scale,-this._filterOffX,-this._filterOffY),m.translate(-this.x,-this.y),f.draw(m,!0),m.restore(),f.filters&&f.filters.length&&this._applyFilters(m)),u._invalid=!0},y._applyFilters=function(a){for(var u,f=this.target.filters,m=this._drawWidth,D=this._drawHeight,J=0,se=f[J];se.usesContext?(u&&(a.putImageData(u,0,0),u=null),se.applyFilter(a,0,0,m,D)):(u=u||a.getImageData(0,0,m,D),se._applyFilter(u)),se=se._multiPass!==null?se._multiPass:f[++J],se;);u&&a.putImageData(u,0,0)},ee.BitmapCache=e}(),function(){"use strict";function e(a,u,f){this.Filter_constructor(),this._blurX=a,this._blurXTable=[],this._lastBlurX=null,this._blurY=u,this._blurYTable=[],this._lastBlurY=null,this._quality,this._lastQuality=null,this.FRAG_SHADER_TEMPLATE="uniform float xWeight[{{blurX}}];uniform float yWeight[{{blurY}}];uniform vec2 textureOffset;void main(void) {vec4 color = vec4(0.0);float xAdj = ({{blurX}}.0-1.0)/2.0;float yAdj = ({{blurY}}.0-1.0)/2.0;vec2 sampleOffset;for(int i=0; i<{{blurX}}; i++) {for(int j=0; j<{{blurY}}; j++) {sampleOffset = vRenderCoord + (textureOffset * vec2(float(i)-xAdj, float(j)-yAdj));color += texture2D(uSampler, sampleOffset) * (xWeight[i] * yWeight[j]);}}gl_FragColor = color.rgba;}",(isNaN(f)||f<1)&&(f=1),this.setQuality(0|f)}var y=ee.extend(e,ee.Filter);y.getBlurX=function(){return this._blurX},y.getBlurY=function(){return this._blurY},y.setBlurX=function(a){(isNaN(a)||a<0)&&(a=0),this._blurX=a},y.setBlurY=function(a){(isNaN(a)||a<0)&&(a=0),this._blurY=a},y.getQuality=function(){return this._quality},y.setQuality=function(a){(isNaN(a)||a<0)&&(a=0),this._quality=0|a},y._getShader=function(){var a=this._lastBlurX!==this._blurX,u=this._lastBlurY!==this._blurY,f=this._lastQuality!==this._quality;return a||u||f?((a||f)&&(this._blurXTable=this._getTable(this._blurX*this._quality)),(u||f)&&(this._blurYTable=this._getTable(this._blurY*this._quality)),this._updateShader(),this._lastBlurX=this._blurX,this._lastBlurY=this._blurY,void(this._lastQuality=this._quality)):this._compiledShader},y._setShader=function(){this._compiledShader};try{Object.defineProperties(y,{blurX:{get:y.getBlurX,set:y.setBlurX},blurY:{get:y.getBlurY,set:y.setBlurY},quality:{get:y.getQuality,set:y.setQuality},_builtShader:{get:y._getShader,set:y._setShader}})}catch(a){console.log(a)}y._getTable=function(a){if(a<=1)return[1];for(var u=[],a=Math.ceil(2*a),f=(a+=a%2?0:1)/2|0,m=-f;m<=f;m++){var D=m/f*4.2;u.push(1/Math.sqrt(2*Math.PI)*Math.pow(Math.E,-Math.pow(D,2)/4))}var J=u.reduce(function(se,we){return se+we});return u.map(function(se,we,Te){return se/J})},y._updateShader=function(){var a;this._blurX!==void 0&&this._blurY!==void 0&&(a=(a=(a=this.FRAG_SHADER_TEMPLATE).replace(/\{\{blurX\}\}/g,this._blurXTable.length.toFixed(0))).replace(/\{\{blurY\}\}/g,this._blurYTable.length.toFixed(0)),this.FRAG_SHADER_BODY=a)},y.shaderParamSetup=function(a,u,f){a.uniform1fv(a.getUniformLocation(f,"xWeight"),this._blurXTable),a.uniform1fv(a.getUniformLocation(f,"yWeight"),this._blurYTable),a.uniform2f(a.getUniformLocation(f,"textureOffset"),2/(u._viewportWidth*this._quality),2/(u._viewportHeight*this._quality))},e.MUL_TABLE=[1,171,205,293,57,373,79,137,241,27,391,357,41,19,283,265,497,469,443,421,25,191,365,349,335,161,155,149,9,278,269,261,505,245,475,231,449,437,213,415,405,395,193,377,369,361,353,345,169,331,325,319,313,307,301,37,145,285,281,69,271,267,263,259,509,501,493,243,479,118,465,459,113,446,55,435,429,423,209,413,51,403,199,393,97,3,379,375,371,367,363,359,355,351,347,43,85,337,333,165,327,323,5,317,157,311,77,305,303,75,297,294,73,289,287,71,141,279,277,275,68,135,67,133,33,262,260,129,511,507,503,499,495,491,61,121,481,477,237,235,467,232,115,457,227,451,7,445,221,439,218,433,215,427,425,211,419,417,207,411,409,203,202,401,399,396,197,49,389,387,385,383,95,189,47,187,93,185,23,183,91,181,45,179,89,177,11,175,87,173,345,343,341,339,337,21,167,83,331,329,327,163,81,323,321,319,159,79,315,313,39,155,309,307,153,305,303,151,75,299,149,37,295,147,73,291,145,289,287,143,285,71,141,281,35,279,139,69,275,137,273,17,271,135,269,267,133,265,33,263,131,261,130,259,129,257,1],e.SHG_TABLE=[0,9,10,11,9,12,10,11,12,9,13,13,10,9,13,13,14,14,14,14,10,13,14,14,14,13,13,13,9,14,14,14,15,14,15,14,15,15,14,15,15,15,14,15,15,15,15,15,14,15,15,15,15,15,15,12,14,15,15,13,15,15,15,15,16,16,16,15,16,14,16,16,14,16,13,16,16,16,15,16,13,16,15,16,14,9,16,16,16,16,16,16,16,16,16,13,14,16,16,15,16,16,10,16,15,16,14,16,16,14,16,16,14,16,16,14,15,16,16,16,14,15,14,15,13,16,16,15,17,17,17,17,17,17,14,15,17,17,16,16,17,16,15,17,16,17,11,17,16,17,16,17,16,17,17,16,17,17,16,17,17,16,16,17,17,17,16,14,17,17,17,17,15,16,14,16,15,16,13,16,15,16,14,16,15,16,12,16,15,16,17,17,17,17,17,13,16,15,17,17,17,16,15,17,17,17,16,15,17,17,14,16,17,17,16,17,17,16,15,17,16,14,17,16,15,17,16,17,17,16,17,15,16,17,14,17,16,15,17,16,17,13,17,16,17,17,16,17,14,17,16,17,16,17,16,17,9],y.getBounds=function(a){var u=0|this.blurX,f=0|this.blurY;if(u<=0&&f<=0)return a;var m=Math.pow(this.quality,.2);return(a||new ee.Rectangle).pad(f*m+1,u*m+1,f*m+1,u*m+1)},y.clone=function(){return new e(this.blurX,this.blurY,this.quality)},y.toString=function(){return"[BlurFilter]"},y._applyFilter=function(a){var u=this._blurX>>1;if(isNaN(u)||u<0)return!1;var f=this._blurY>>1;if(isNaN(f)||f<0||u==0&&f==0)return!1;var m=this.quality;(isNaN(m)||m<1)&&(m=1),3<(m|=0)&&(m=3),m<1&&(m=1);for(var D=a.data,J=0,se=0,k=0,we=0,Te=0,t=0,r=0,i=0,o=0,l=0,c=0,p=0,v=0,w=0,b=0,_=u+u+1|0,E=f+f+1|0,S=0|a.width,P=0|a.height,A=S-1|0,R=P-1|0,T=1+u|0,L=1+f|0,I={r:0,b:0,g:0,a:0},C=I,k=1;k<_;k++)C=C.n={r:0,b:0,g:0,a:0};C.n=I;var Y={r:0,b:0,g:0,a:0},W=Y;for(k=1;k<E;k++)W=W.n={r:0,b:0,g:0,a:0};W.n=Y;for(var G=null,F=0|e.MUL_TABLE[u],B=0|e.SHG_TABLE[u],q=0|e.MUL_TABLE[f],Z=0|e.SHG_TABLE[f];0<m--;){r=t=0;for(var X=F,ne=B,se=P;-1<--se;){for(i=T*(p=D[0|t]),o=T*(v=D[t+1|0]),l=T*(w=D[t+2|0]),c=T*(b=D[t+3|0]),C=I,k=T;-1<--k;)C.r=p,C.g=v,C.b=w,C.a=b,C=C.n;for(k=1;k<T;k++)we=t+((A<k?A:k)<<2)|0,i+=C.r=D[we],o+=C.g=D[we+1],l+=C.b=D[we+2],c+=C.a=D[we+3],C=C.n;for(G=I,J=0;J<S;J++)D[t++]=i*X>>>ne,D[t++]=o*X>>>ne,D[t++]=l*X>>>ne,D[t++]=c*X>>>ne,we=r+((we=J+u+1)<A?we:A)<<2,i-=G.r-(G.r=D[we]),o-=G.g-(G.g=D[we+1]),l-=G.b-(G.b=D[we+2]),c-=G.a-(G.a=D[we+3]),G=G.n;r+=S}for(X=q,ne=Z,J=0;J<S;J++){for(i=L*(p=D[t=J<<2|0])|0,o=L*(v=D[t+1|0])|0,l=L*(w=D[t+2|0])|0,c=L*(b=D[t+3|0])|0,W=Y,k=0;k<L;k++)W.r=p,W.g=v,W.b=w,W.a=b,W=W.n;for(Te=S,k=1;k<=f;k++)t=Te+J<<2,i+=W.r=D[t],o+=W.g=D[t+1],l+=W.b=D[t+2],c+=W.a=D[t+3],W=W.n,k<R&&(Te+=S);if(t=J,G=Y,0<m)for(se=0;se<P;se++)D[(we=t<<2)+3]=b=c*X>>>ne,0<b?(D[we]=i*X>>>ne,D[we+1]=o*X>>>ne,D[we+2]=l*X>>>ne):D[we]=D[we+1]=D[we+2]=0,we=J+((we=se+L)<R?we:R)*S<<2,i-=G.r-(G.r=D[we]),o-=G.g-(G.g=D[we+1]),l-=G.b-(G.b=D[we+2]),c-=G.a-(G.a=D[we+3]),G=G.n,t+=S;else for(se=0;se<P;se++)D[(we=t<<2)+3]=b=c*X>>>ne,0<b?(b=255/b,D[we]=(i*X>>>ne)*b,D[we+1]=(o*X>>>ne)*b,D[we+2]=(l*X>>>ne)*b):D[we]=D[we+1]=D[we+2]=0,we=J+((we=se+L)<R?we:R)*S<<2,i-=G.r-(G.r=D[we]),o-=G.g-(G.g=D[we+1]),l-=G.b-(G.b=D[we+2]),c-=G.a-(G.a=D[we+3]),G=G.n,t+=S}}return!0},ee.BlurFilter=ee.promote(e,"Filter")}(),function(){"use strict";function e(a){this.Filter_constructor(),this.alphaMap=a,this._alphaMap=null,this._mapData=null,this._mapTexture=null,this.FRAG_SHADER_BODY="uniform sampler2D uAlphaSampler;void main(void) {vec4 color = texture2D(uSampler, vRenderCoord);vec4 alphaMap = texture2D(uAlphaSampler, vTextureCoord);gl_FragColor = vec4(color.rgb, color.a * (alphaMap.r * ceil(alphaMap.a)));}"}var y=ee.extend(e,ee.Filter);y.shaderParamSetup=function(a,u,f){this._mapTexture||(this._mapTexture=a.createTexture()),a.activeTexture(a.TEXTURE1),a.bindTexture(a.TEXTURE_2D,this._mapTexture),u.setTextureParams(a),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,this.alphaMap),a.uniform1i(a.getUniformLocation(f,"uAlphaSampler"),1)},y.clone=function(){var a=new e(this.alphaMap);return a._alphaMap=this._alphaMap,a._mapData=this._mapData,a},y.toString=function(){return"[AlphaMapFilter]"},y._applyFilter=function(a){if(!this.alphaMap)return!0;if(!this._prepAlphaMap())return!1;for(var u=a.data,f=this._mapData,m=0,D=u.length;m<D;m+=4)u[m+3]=f[m]||0;return!0},y._prepAlphaMap=function(){if(!this.alphaMap)return!1;if(this.alphaMap==this._alphaMap&&this._mapData)return!0;this._mapData=null;var a,u=this._alphaMap=this.alphaMap,f=u;u instanceof HTMLCanvasElement?a=f.getContext("2d"):((f=ee.createCanvas?ee.createCanvas():document.createElement("canvas")).width=u.width,f.height=u.height,(a=f.getContext("2d")).drawImage(u,0,0));try{var m=a.getImageData(0,0,u.width,u.height)}catch(D){return!1}return this._mapData=m.data,!0},ee.AlphaMapFilter=ee.promote(e,"Filter")}(),function(){"use strict";function e(a){this.Filter_constructor(),this.mask=a,this.usesContext=!0,this.FRAG_SHADER_BODY="uniform sampler2D uAlphaSampler;void main(void) {vec4 color = texture2D(uSampler, vRenderCoord);vec4 alphaMap = texture2D(uAlphaSampler, vTextureCoord);gl_FragColor = vec4(color.rgb, color.a * alphaMap.a);}"}var y=ee.extend(e,ee.Filter);y.shaderParamSetup=function(a,u,f){this._mapTexture||(this._mapTexture=a.createTexture()),a.activeTexture(a.TEXTURE1),a.bindTexture(a.TEXTURE_2D,this._mapTexture),u.setTextureParams(a),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,this.mask),a.uniform1i(a.getUniformLocation(f,"uAlphaSampler"),1)},y.applyFilter=function(a,u,f,m,D,J,se,we){return!this.mask||(se==null&&(se=u),we==null&&(we=f),(J=J||a).save(),a==J&&(J.globalCompositeOperation="destination-in",J.drawImage(this.mask,se,we),J.restore(),!0))},y.clone=function(){return new e(this.mask)},y.toString=function(){return"[AlphaMaskFilter]"},ee.AlphaMaskFilter=ee.promote(e,"Filter")}(),function(){"use strict";function e(a,u,f,m,D,J,se,we){this.Filter_constructor(),this.redMultiplier=a!=null?a:1,this.greenMultiplier=u!=null?u:1,this.blueMultiplier=f!=null?f:1,this.alphaMultiplier=m!=null?m:1,this.redOffset=D||0,this.greenOffset=J||0,this.blueOffset=se||0,this.alphaOffset=we||0,this.FRAG_SHADER_BODY="uniform vec4 uColorMultiplier;uniform vec4 uColorOffset;void main(void) {vec4 color = texture2D(uSampler, vRenderCoord);gl_FragColor = (color * uColorMultiplier) + uColorOffset;}"}var y=ee.extend(e,ee.Filter);y.shaderParamSetup=function(a,u,f){a.uniform4f(a.getUniformLocation(f,"uColorMultiplier"),this.redMultiplier,this.greenMultiplier,this.blueMultiplier,this.alphaMultiplier),a.uniform4f(a.getUniformLocation(f,"uColorOffset"),this.redOffset/255,this.greenOffset/255,this.blueOffset/255,this.alphaOffset/255)},y.toString=function(){return"[ColorFilter]"},y.clone=function(){return new e(this.redMultiplier,this.greenMultiplier,this.blueMultiplier,this.alphaMultiplier,this.redOffset,this.greenOffset,this.blueOffset,this.alphaOffset)},y._applyFilter=function(a){for(var u=a.data,f=u.length,m=0;m<f;m+=4)u[m]=u[m]*this.redMultiplier+this.redOffset,u[m+1]=u[m+1]*this.greenMultiplier+this.greenOffset,u[m+2]=u[m+2]*this.blueMultiplier+this.blueOffset,u[m+3]=u[m+3]*this.alphaMultiplier+this.alphaOffset;return!0},ee.ColorFilter=ee.promote(e,"Filter")}(),function(){"use strict";function e(a,u,f,m){this.setColor(a,u,f,m)}var y=e.prototype;e.DELTA_INDEX=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10],e.LENGTH=(e.IDENTITY_MATRIX=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1]).length,y.setColor=function(a,u,f,m){return this.reset().adjustColor(a,u,f,m)},y.reset=function(){return this.copy(e.IDENTITY_MATRIX)},y.adjustColor=function(a,u,f,m){return this.adjustHue(m),this.adjustContrast(u),this.adjustBrightness(a),this.adjustSaturation(f)},y.adjustBrightness=function(a){return a==0||isNaN(a)||(a=this._cleanValue(a,255),this._multiplyMatrix([1,0,0,0,a,0,1,0,0,a,0,0,1,0,a,0,0,0,1,0,0,0,0,0,1])),this},y.adjustContrast=function(a){return a==0||isNaN(a)||(u=(a=this._cleanValue(a,100))<0?127+a/100*127:127*(u=(u=a%1)==0?e.DELTA_INDEX[a]:e.DELTA_INDEX[a<<0]*(1-u)+e.DELTA_INDEX[1+(a<<0)]*u)+127,this._multiplyMatrix([u/127,0,0,0,.5*(127-u),0,u/127,0,0,.5*(127-u),0,0,u/127,0,.5*(127-u),0,0,0,1,0,0,0,0,0,1])),this;var u},y.adjustSaturation=function(a){return a==0||isNaN(a)?this:(a=1+(0<(a=this._cleanValue(a,100))?3*a/100:a/100),this._multiplyMatrix([.3086*(1-a)+a,.6094*(1-a),.082*(1-a),0,0,.3086*(1-a),.6094*(1-a)+a,.082*(1-a),0,0,.3086*(1-a),.6094*(1-a),.082*(1-a)+a,0,0,0,0,0,1,0,0,0,0,0,1]),this)},y.adjustHue=function(J){if(J==0||isNaN(J))return this;J=this._cleanValue(J,180)/180*Math.PI;var u=Math.cos(J),f=Math.sin(J),m=.213,D=.715,J=.072;return this._multiplyMatrix([m+.787*u+f*-m,D+u*-D+f*-D,J+u*-J+.928*f,0,0,m+u*-m+.143*f,D+u*(1-D)+.14*f,J+u*-J+-.283*f,0,0,m+u*-m+-.787*f,D+u*-D+f*D,J+.928*u+f*J,0,0,0,0,0,1,0,0,0,0,0,1]),this},y.concat=function(a){return(a=this._fixMatrix(a)).length!=e.LENGTH||this._multiplyMatrix(a),this},y.clone=function(){return new e().copy(this)},y.toArray=function(){for(var a=[],u=0,f=e.LENGTH;u<f;u++)a[u]=this[u];return a},y.copy=function(a){for(var u=e.LENGTH,f=0;f<u;f++)this[f]=a[f];return this},y.toString=function(){return"[ColorMatrix]"},y._multiplyMatrix=function(a){for(var u,f=[],m=0;m<5;m++){for(u=0;u<5;u++)f[u]=this[u+5*m];for(u=0;u<5;u++){for(var D=0,J=0;J<5;J++)D+=a[u+5*J]*f[J];this[u+5*m]=D}}},y._cleanValue=function(a,u){return Math.min(u,Math.max(-u,a))},y._fixMatrix=function(a){return a instanceof e&&(a=a.toArray()),a.length<e.LENGTH?a=a.slice(0,a.length).concat(e.IDENTITY_MATRIX.slice(a.length,e.LENGTH)):a.length>e.LENGTH&&(a=a.slice(0,e.LENGTH)),a},ee.ColorMatrix=e}(),function(){"use strict";function e(a){this.Filter_constructor(),this.matrix=a,this.FRAG_SHADER_BODY="uniform mat4 uColorMatrix;uniform vec4 uColorMatrixOffset;void main(void) {vec4 color = texture2D(uSampler, vRenderCoord);mat4 m = uColorMatrix;vec4 newColor = vec4(0,0,0,0);newColor.r = color.r*m[0][0] + color.g*m[0][1] + color.b*m[0][2] + color.a*m[0][3];newColor.g = color.r*m[1][0] + color.g*m[1][1] + color.b*m[1][2] + color.a*m[1][3];newColor.b = color.r*m[2][0] + color.g*m[2][1] + color.b*m[2][2] + color.a*m[2][3];newColor.a = color.r*m[3][0] + color.g*m[3][1] + color.b*m[3][2] + color.a*m[3][3];gl_FragColor = newColor + uColorMatrixOffset;}"}var y=ee.extend(e,ee.Filter);y.shaderParamSetup=function(a,u,f){var m=this.matrix,D=new Float32Array([m[0],m[1],m[2],m[3],m[5],m[6],m[7],m[8],m[10],m[11],m[12],m[13],m[15],m[16],m[17],m[18]]);a.uniformMatrix4fv(a.getUniformLocation(f,"uColorMatrix"),!1,D),a.uniform4f(a.getUniformLocation(f,"uColorMatrixOffset"),m[4]/255,m[9]/255,m[14]/255,m[19]/255)},y.toString=function(){return"[ColorMatrixFilter]"},y.clone=function(){return new e(this.matrix)},y._applyFilter=function(a){for(var u,f,m,D,J=a.data,se=J.length,a=this.matrix,we=a[0],Te=a[1],t=a[2],r=a[3],i=a[4],o=a[5],l=a[6],c=a[7],p=a[8],v=a[9],w=a[10],b=a[11],_=a[12],E=a[13],S=a[14],P=a[15],A=a[16],R=a[17],T=a[18],L=a[19],I=0;I<se;I+=4)u=J[I],f=J[I+1],m=J[I+2],D=J[I+3],J[I]=u*we+f*Te+m*t+D*r+i,J[I+1]=u*o+f*l+m*c+D*p+v,J[I+2]=u*w+f*b+m*_+D*E+S,J[I+3]=u*P+f*A+m*R+D*T+L;return!0},ee.ColorMatrixFilter=ee.promote(e,"Filter")}(),function(){"use strict";function e(){throw"Touch cannot be instantiated"}e.isSupported=function(){return!!("ontouchstart"in window||window.MSPointerEvent&&0<window.navigator.msMaxTouchPoints||window.PointerEvent&&0<window.navigator.maxTouchPoints)},e.enable=function(y,a,u,f){return!!(y&&y.canvas&&e.isSupported())&&(y.__touch||(y.__touch={pointers:{},multitouch:!a,preventDefault:!u,count:0},f?"ontouchstart"in window?e._enable(y):(window.PointerEvent||window.MSPointerEvent)&&e._IE_enable(y):"ontouchstart"in window||ee.BrowserDetect.isChrome||ee.BrowserDetect.isEdge||ee.BrowserDetect.isFirefox?e._enable(y):(window.PointerEvent||window.MSPointerEvent)&&e._IE_enable(y)),!0)},e.disable=function(y){y&&("ontouchstart"in window||ee.BrowserDetect.isChrome||ee.BrowserDetect.isFirefox?e._disable(y):(window.PointerEvent||window.MSPointerEvent)&&e._IE_disable(y),delete y.__touch)},e._enable=function(y){var a=y.canvas,u=y.__touch.f=function(f){e._handleEvent(y,f)};a.addEventListener("pointerdown",function(f){f.pointerType=="touch"?y.enableDOMEvents(!1):f.pointerType=="mouse"&&y.enableDOMEvents(!0)},!1),a.addEventListener("touchstart",u,!1),a.addEventListener("touchmove",u,!1),a.addEventListener("touchend",u,!1),a.addEventListener("touchcancel",u,!1)},e._disable=function(y){var a=y.canvas;a&&(y=y.__touch.f,a.removeEventListener("touchstart",y,!1),a.removeEventListener("touchmove",y,!1),a.removeEventListener("touchend",y,!1),a.removeEventListener("touchcancel",y,!1))},e._handleEvent=function(y,a){if(y){y.__touch.preventDefault&&a.preventDefault&&a.preventDefault();for(var u=a.changedTouches,f=a.type,m=0,D=u.length;m<D;m++){var J=u[m],se=J.identifier;J.target==y.canvas&&(f==="touchstart"?this._handleStart(y,se,a,J.pageX,J.pageY):f==="touchmove"?this._handleMove(y,se,a,J.pageX,J.pageY):f!=="touchend"&&f!=="touchcancel"||this._handleEnd(y,se,a))}}},e._IE_enable=function(y){var a=y.canvas,u=y.__touch.f=function(f){e._IE_handleEvent(y,f)};a.style["-webkit-tap-highlight-color"]="transparent",window.PointerEvent===void 0?(a.addEventListener("MSPointerDown",u,!1),window.addEventListener("MSPointerMove",u,!1),window.addEventListener("MSPointerUp",u,!1),window.addEventListener("MSPointerCancel",u,!1),y.__touch.preventDefault&&(a.style.msTouchAction="none")):(a.addEventListener("pointerdown",u,!1),window.addEventListener("pointermove",u,!1),window.addEventListener("pointerup",u,!1),window.addEventListener("pointercancel",u,!1),y.__touch.preventDefault&&(a.style.touchAction="none")),y.__touch.activeIDs={}},e._IE_disable=function(y){var a=y.__touch.f;window.PointerEvent===void 0?(window.removeEventListener("MSPointerMove",a,!1),window.removeEventListener("MSPointerUp",a,!1),window.removeEventListener("MSPointerCancel",a,!1),y.canvas&&y.canvas.removeEventListener("MSPointerDown",a,!1)):(window.removeEventListener("pointermove",a,!1),window.removeEventListener("pointerup",a,!1),window.removeEventListener("pointercancel",a,!1),y.canvas&&y.canvas.removeEventListener("pointerdown",a,!1))},e._IE_handleEvent=function(y,a){if(y){y.__touch.preventDefault&&a.preventDefault&&a.preventDefault();var u=a.type,f=a.pointerId,m=y.__touch.activeIDs;if(u==="MSPointerDown"||u==="pointerdown"){if(a.srcElement==y.canvas)switch(m[f]=!0,this._handleStart(y,f,a,a.pageX,a.pageY),a.pointerType){case"mouse":y.enableDOMEvents(!0);break;case"touch":y.enableDOMEvents(!1)}}else m[f]&&(u==="MSPointerMove"||u==="pointermove"?this._handleMove(y,f,a,a.pageX,a.pageY):u!=="MSPointerUp"&&u!=="MSPointerCancel"&&u!=="pointerup"&&u!=="pointercancel"||(delete m[f],this._handleEnd(y,f,a)))}},e._handleStart=function(y,a,u,f,m){var D,J=y.__touch;!J.multitouch&&J.count||(D=J.pointers)[a]||(D[a]=!0,J.count++,y._handlePointerDown(a,u,f,m))},e._handleMove=function(y,a,u,f,m){y.__touch.pointers[a]&&y._handlePointerMove(a,u,f,m)},e._handleEnd=function(y,a,u){var f=y.__touch,m=f.pointers;m[a]&&(f.count--,y._handlePointerUp(a,u,!0),delete m[a])},ee.Touch=e}(),function(){"use strict";var e=ee.EaselJS=ee.EaselJS||{};e.version="1.0.0",e.buildDate="Thu, 12 Oct 2017 16:34:05 GMT"}(),function(){"use strict";var e=ee.PreloadJS=ee.PreloadJS||{};e.version="NEXT",e.buildDate="Thu, 14 Sep 2017 22:19:45 GMT"}(),function(){"use strict";ee.proxy=function(e,y){var a=Array.prototype.slice.call(arguments,2);return function(){return e.apply(y,Array.prototype.slice.call(arguments,0).concat(a))}}}(),function(){"use strict";function e(y,a,u){this.Event_constructor("error"),this.title=y,this.message=a,this.data=u}ee.extend(e,ee.Event).clone=function(){return new ee.ErrorEvent(this.title,this.message,this.data)},ee.ErrorEvent=ee.promote(e,"Event")}(),function(){"use strict";function e(y,a){this.Event_constructor("progress"),this.loaded=y,this.total=a==null?1:a,this.progress=a==0?0:this.loaded/this.total}ee.extend(e,ee.Event).clone=function(){return new ee.ProgressEvent(this.loaded,this.total)},ee.ProgressEvent=ee.promote(e,"Event")}(window),(function(){var e,y,a,u,f=typeof define=="function"&&define.amd,m={function:!0,object:!0},D=m[typeof kn]&&kn&&!kn.nodeType&&kn,J=m[typeof window]&&window||this,se=D&&m[typeof ur]&&ur&&!ur.nodeType&&typeof global=="object"&&global;function we(v,t){v=v||J.Object(),t=t||J.Object();var r=v.Number||J.Number,i=v.String||J.String,de=v.Object||J.Object,o=v.Date||J.Date,l=v.SyntaxError||J.SyntaxError,c=v.TypeError||J.TypeError,p=v.Math||J.Math,v=v.JSON||J.JSON;typeof v=="object"&&v&&(t.stringify=v.stringify,t.parse=v.parse);var w,b,_,E,S,P,A,R,T,L,I,C,k,Y,W,G,F,B,q,Z,X,ne,$,re,de=de.prototype,Q=de.toString,U=new o(-0xc782b5b800cec);try{U=U.getUTCFullYear()==-109252&&U.getUTCMonth()===0&&U.getUTCDate()===1&&U.getUTCHours()==10&&U.getUTCMinutes()==37&&U.getUTCSeconds()==6&&U.getUTCMilliseconds()==708}catch(d){}function g(d){if(g[d]!==_)return g[d];var h;if(d=="bug-string-char-index")h="a"[0]!="a";else if(d=="json")h=g("json-stringify")&&g("json-parse");else{var x,j='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if(d=="json-stringify"){var O=t.stringify,V=typeof O=="function"&&U;if(V){(x=function(){return 1}).toJSON=x;try{V=O(0)==="0"&&O(new r)==="0"&&O(new i)=='""'&&O(Q)===_&&O(_)===_&&O()===_&&O(x)==="1"&&O([x])=="[1]"&&O([_])=="[null]"&&O(null)=="null"&&O([_,Q,null])=="[null,null,null]"&&O({a:[x,!0,!1,null,"\0\b\n\f\r	"]})==j&&O(null,x)==="1"&&O([1,2],null,1)=="[\n 1,\n 2\n]"&&O(new o(-864e13))=='"-271821-04-20T00:00:00.000Z"'&&O(new o(864e13))=='"+275760-09-13T00:00:00.000Z"'&&O(new o(-621987552e5))=='"-000001-01-01T00:00:00.000Z"'&&O(new o(-1))=='"1969-12-31T23:59:59.999Z"'}catch(N){V=!1}}h=V}if(d=="json-parse"){var ce=t.parse;if(typeof ce=="function")try{if(ce("0")===0&&!ce(!1)){var H=(x=ce(j)).a.length==5&&x.a[0]===1;if(H){try{H=!ce('"	"')}catch(N){}if(H)try{H=ce("01")!==1}catch(N){}if(H)try{H=ce("1.")!==1}catch(N){}}}}catch(N){H=!1}h=H}}return g[d]=!!h}return g("json")||(E="[object Function]",S="[object Number]",P="[object String]",A="[object Array]",R=g("bug-string-char-index"),U||(T=p.floor,L=[0,31,59,90,120,151,181,212,243,273,304,334],I=function(d,h){return L[h]+365*(d-1970)+T((d-1969+(h=+(1<h)))/4)-T((d-1901+h)/100)+T((d-1601+h)/400)}),(w=de.hasOwnProperty)||(w=function(d){var h,x={__proto__:null};return x.__proto__={toString:1},w=x.toString!=Q?function(V){var O=this.__proto__,V=V in(this.__proto__=null,this);return this.__proto__=O,V}:(h=x.constructor,function(j){var O=(this.constructor||h).prototype;return j in this&&!(j in O&&this[j]===O[j])}),x=null,w.call(this,d)}),b=function(d,h){var x,j,O,V=0;for(O in(x=function(){this.valueOf=0}).prototype.valueOf=0,j=new x)w.call(j,O)&&V++;return x=j=null,(b=V?V==2?function(ce,H){var N,ue={},fe=Q.call(ce)==E;for(N in ce)fe&&N=="prototype"||w.call(ue,N)||!(ue[N]=1)||!w.call(ce,N)||H(N)}:function(ce,H){var N,ue,fe=Q.call(ce)==E;for(N in ce)fe&&N=="prototype"||!w.call(ce,N)||(ue=N==="constructor")||H(N);(ue||w.call(ce,N="constructor"))&&H(N)}:(j=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],function(ce,H){var N,ue,fe=Q.call(ce)==E,ae=!fe&&typeof ce.constructor!="function"&&m[typeof ce.hasOwnProperty]&&ce.hasOwnProperty||w;for(N in ce)fe&&N=="prototype"||!ae.call(ce,N)||H(N);for(ue=j.length;N=j[--ue];ae.call(ce,N)&&H(N));}))(d,h)},g("json-stringify")||(C={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},k=function(d,h){return("000000"+(h||0)).slice(-d)},Y=function(d){for(var h='"',x=0,j=d.length,O=!R||10<j,V=O&&(R?d.split(""):d);x<j;x++){var ce=d.charCodeAt(x);switch(ce){case 8:case 9:case 10:case 12:case 13:case 34:case 92:h+=C[ce];break;default:if(ce<32){h+="\\u00"+k(2,ce.toString(16));break}h+=O?V[x]:d.charAt(x)}}return h+'"'},W=function(d,h,x,j,O,V,ce){var H,N,ue,fe,ae,Ie,ge,Be,z,Ye,te,K,xe,_e;try{H=h[d]}catch(Se){}if(typeof H=="object"&&H)if((N=Q.call(H))!="[object Date]"||w.call(H,"toJSON"))typeof H.toJSON=="function"&&(N!=S&&N!=P&&N!=A||w.call(H,"toJSON"))&&(H=H.toJSON(d));else if(-1/0<H&&H<1/0){if(I){for(ae=T(H/864e5),ue=T(ae/365.2425)+1970-1;I(ue+1,0)<=ae;ue++);for(fe=T((ae-I(ue,0))/30.42);I(ue,fe+1)<=ae;fe++);ae=1+ae-I(ue,fe),Ie=T((xe=(H%864e5+864e5)%864e5)/36e5)%24,ge=T(xe/6e4)%60,Be=T(xe/1e3)%60,xe=xe%1e3}else ue=H.getUTCFullYear(),fe=H.getUTCMonth(),ae=H.getUTCDate(),Ie=H.getUTCHours(),ge=H.getUTCMinutes(),Be=H.getUTCSeconds(),xe=H.getUTCMilliseconds();H=(ue<=0||1e4<=ue?(ue<0?"-":"+")+k(6,ue<0?-ue:ue):k(4,ue))+"-"+k(2,fe+1)+"-"+k(2,ae)+"T"+k(2,Ie)+":"+k(2,ge)+":"+k(2,Be)+"."+k(3,xe)+"Z"}else H=null;if(x&&(H=x.call(h,d,H)),H===null)return"null";if((N=Q.call(H))=="[object Boolean]")return""+H;if(N==S)return-1/0<H&&H<1/0?""+H:"null";if(N==P)return Y(""+H);if(typeof H=="object"){for(K=ce.length;K--;)if(ce[K]===H)throw c();if(ce.push(H),z=[],xe=V,V+=O,N==A){for(te=0,K=H.length;te<K;te++)Ye=W(te,H,x,j,O,V,ce),z.push(Ye===_?"null":Ye);_e=z.length?O?"[\n"+V+z.join(",\n"+V)+"\n"+xe+"]":"["+z.join(",")+"]":"[]"}else b(j||H,function(Se){var ie=W(Se,H,x,j,O,V,ce);ie!==_&&z.push(Y(Se)+":"+(O?" ":"")+ie)}),_e=z.length?O?"{\n"+V+z.join(",\n"+V)+"\n"+xe+"}":"{"+z.join(",")+"}":"{}";return ce.pop(),_e}},t.stringify=function(d,h,x){var j,O,V,ce;if(m[typeof h]&&h){if((ce=Q.call(h))==E)O=h;else if(ce==A){V={};for(var H,N=0,ue=h.length;N<ue;H=h[N++],(ce=Q.call(H))!=P&&ce!=S||(V[H]=1));}}if(x)if((ce=Q.call(x))==S){if(0<(x-=x%1))for(j="",10<x&&(x=10);j.length<x;j+=" ");}else ce==P&&(j=x.length<=10?x:x.slice(0,10));return W("",((H={})[""]=d,H),O,V,j,"",[])}),g("json-parse")||(G=i.fromCharCode,F={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:"\n",102:"\f",114:"\r"},Z=function(){throw B=q=null,l()},X=function(){for(var d,h,x,j,O,V=q,ce=V.length;B<ce;)switch(O=V.charCodeAt(B)){case 9:case 10:case 13:case 32:B++;break;case 123:case 125:case 91:case 93:case 58:case 44:return d=R?V.charAt(B):V[B],B++,d;case 34:for(d="@",B++;B<ce;)if((O=V.charCodeAt(B))<32)Z();else if(O==92)switch(O=V.charCodeAt(++B)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:d+=F[O],B++;break;case 117:for(h=++B,x=B+4;B<x;B++)48<=(O=V.charCodeAt(B))&&O<=57||97<=O&&O<=102||65<=O&&O<=70||Z();d+=G("0x"+V.slice(h,B));break;default:Z()}else{if(O==34)break;for(O=V.charCodeAt(B),h=B;32<=O&&O!=92&&O!=34;)O=V.charCodeAt(++B);d+=V.slice(h,B)}if(V.charCodeAt(B)==34)return B++,d;Z();default:if(h=B,O==45&&(j=!0,O=V.charCodeAt(++B)),48<=O&&O<=57){for(O==48&&48<=(O=V.charCodeAt(B+1))&&O<=57&&Z(),j=!1;B<ce&&48<=(O=V.charCodeAt(B))&&O<=57;B++);if(V.charCodeAt(B)==46){for(x=++B;x<ce&&48<=(O=V.charCodeAt(x))&&O<=57;x++);x==B&&Z(),B=x}if((O=V.charCodeAt(B))==101||O==69){for((O=V.charCodeAt(++B))!=43&&O!=45||B++,x=B;x<ce&&48<=(O=V.charCodeAt(x))&&O<=57;x++);x==B&&Z(),B=x}return+V.slice(h,B)}if(j&&Z(),V.slice(B,B+4)=="true")return B+=4,!0;if(V.slice(B,B+5)=="false")return B+=5,!1;if(V.slice(B,B+4)=="null")return B+=4,null;Z()}return"$"},ne=function(d){var h,x;if(d=="$"&&Z(),typeof d=="string"){if((R?d.charAt(0):d[0])=="@")return d.slice(1);if(d=="["){for(h=[];(d=X())!="]";x=x||!0)!x||d==","&&(d=X())!="]"||Z(),d==","&&Z(),h.push(ne(d));return h}if(d=="{"){for(h={};(d=X())!="}";x=x||!0)!x||d==","&&(d=X())!="}"||Z(),d!=","&&typeof d=="string"&&(R?d.charAt(0):d[0])=="@"&&X()==":"||Z(),h[d.slice(1)]=ne(X());return h}Z()}return d},$=function(d,h,x){x=re(d,h,x),x===_?delete d[h]:d[h]=x},re=function(d,h,x){var j,O=d[h];if(typeof O=="object"&&O)if(Q.call(O)==A)for(j=O.length;j--;)$(O,j,x);else b(O,function(V){$(O,V,x)});return x.call(d,h,O)},t.parse=function(d,h){var x;return B=0,q=""+d,x=ne(X()),X()!="$"&&Z(),B=q=null,h&&Q.call(h)==E?re(((d={})[""]=x,d),"",h):x})),t.runInContext=we,t}!se||se.global!==se&&se.window!==se&&se.self!==se||(J=se),D&&!f?we(J,D):(e=J.JSON,y=J.JSON3,a=!1,u=we(J,J.JSON3={noConflict:function(){return a||(a=!0,J.JSON=e,J.JSON3=y,e=y=null),u}}),J.JSON={parse:u.parse,stringify:u.stringify}),f&&define(function(){return u})}).call(kn),function(){var e={a:function(){return e.el("a")},svg:function(){return e.el("svg")},object:function(){return e.el("object")},image:function(){return e.el("image")},img:function(){return e.el("img")},style:function(){return e.el("style")},link:function(){return e.el("link")},script:function(){return e.el("script")},audio:function(){return e.el("audio")},video:function(){return e.el("video")},text:function(y){return document.createTextNode(y)},el:function(y){return document.createElement(y)}};ee.Elements=e}(),function(){var e={ABSOLUTE_PATT:/^(?:\w+:)?\/{2}/i,RELATIVE_PATT:/^[./]*?\//i,EXTENSION_PATT:/\/?[^/]+\.(\w{1,5})$/i,parseURI:function(y){var a={absolute:!1,relative:!1,protocol:null,hostname:null,port:null,pathname:null,search:null,hash:null,host:null};if(y==null)return a;var u,f=ee.Elements.a();for(u in f.href=y,a)u in f&&(a[u]=f[u]);var m=y.indexOf("?");return-1<m&&(y=y.substr(0,m)),e.ABSOLUTE_PATT.test(y)?a.absolute=!0:e.RELATIVE_PATT.test(y)&&(a.relative=!0),(y=y.match(e.EXTENSION_PATT))&&(a.extension=y[1].toLowerCase()),a},formatQueryString:function(y,a){if(y==null)throw new Error("You must specify data.");var u,f=[];for(u in y)f.push(u+"="+escape(y[u]));return a&&(f=f.concat(a)),f.join("&")},buildURI:function(y,a){if(a==null)return y;var u,f=[],m=y.indexOf("?");return m!=-1&&(u=y.slice(m+1),f=f.concat(u.split("&"))),m!=-1?y.slice(0,m)+"?"+this.formatQueryString(a,f):y+"?"+this.formatQueryString(a,f)},isCrossDomain:function(y){var a=ee.Elements.a();return a.href=y.src,y=ee.Elements.a(),y.href=location.href,a.hostname!=""&&(a.port!=y.port||a.protocol!=y.protocol||a.hostname!=y.hostname)},isLocal:function(y){var a=ee.Elements.a();return a.href=y.src,a.hostname==""&&a.protocol=="file:"}};ee.URLUtils=e}(),function(){var e={container:null,appendToHead:function(y){e.getHead().appendChild(y)},appendToBody:function(y){var a;e.container==null&&(e.container=document.createElement("div"),e.container.id="preloadjs-container",(a=e.container.style).visibility="hidden",a.position="absolute",a.width=e.container.style.height="10px",a.overflow="hidden",a.transform=a.msTransform=a.webkitTransform=a.oTransform="translate(-10px, -10px)",e.getBody().appendChild(e.container)),e.container.appendChild(y)},getHead:function(){return document.head||document.getElementsByTagName("head")[0]},getBody:function(){return document.body||document.getElementsByTagName("body")[0]},removeChild:function(y){y.parent&&y.parent.removeChild(y)},isImageTag:function(y){return y instanceof HTMLImageElement},isAudioTag:function(y){return!!window.HTMLAudioElement&&y instanceof HTMLAudioElement},isVideoTag:function(y){return!!window.HTMLVideoElement&&y instanceof HTMLVideoElement}};ee.DomUtils=e}(),function(){var e={parseXML:function(y){var a=null;try{window.DOMParser&&(a=new DOMParser().parseFromString(y,"text/xml"))}catch(u){}if(!a)try{(a=new ActiveXObject("Microsoft.XMLDOM")).async=!1,a.loadXML(y)}catch(u){a=null}return a},parseJSON:function(y){if(y==null)return null;try{return JSON.parse(y)}catch(a){throw a}}};ee.DataUtils=e}(),function(){var e={BINARY:"binary",CSS:"css",FONT:"font",FONTCSS:"fontcss",IMAGE:"image",JAVASCRIPT:"javascript",JSON:"json",JSONP:"jsonp",MANIFEST:"manifest",SOUND:"sound",VIDEO:"video",SPRITESHEET:"spritesheet",SVG:"svg",TEXT:"text",XML:"xml"};ee.Types=e}(),function(){var e={POST:"POST",GET:"GET"};ee.Methods=e}(),function(){"use strict";function e(){this.src=null,this.type=null,this.id=null,this.maintainOrder=!1,this.callback=null,this.data=null,this.method=ee.Methods.GET,this.values=null,this.headers=null,this.withCredentials=!1,this.mimeType=null,this.crossOrigin=null,this.loadTimeout=a.LOAD_TIMEOUT_DEFAULT}var y=e.prototype={},a=e;a.LOAD_TIMEOUT_DEFAULT=8e3,a.create=function(u){if(typeof u=="string"){var f=new e;return f.src=u,f}if(u instanceof a)return u;if(u instanceof Object&&u.src)return u.loadTimeout==null&&(u.loadTimeout=a.LOAD_TIMEOUT_DEFAULT),u;throw new Error("Type not recognized.")},y.set=function(u){for(var f in u)this[f]=u[f];return this},ee.LoadItem=a}(),function(){var e={isBinary:function(y){switch(y){case ee.Types.IMAGE:case ee.Types.BINARY:return!0;default:return!1}},isText:function(y){switch(y){case ee.Types.TEXT:case ee.Types.JSON:case ee.Types.MANIFEST:case ee.Types.XML:case ee.Types.CSS:case ee.Types.SVG:case ee.Types.JAVASCRIPT:case ee.Types.SPRITESHEET:return!0;default:return!1}},getTypeByExtension:function(y){if(y==null)return ee.Types.TEXT;switch(y.toLowerCase()){case"jpeg":case"jpg":case"gif":case"png":case"webp":case"bmp":return ee.Types.IMAGE;case"ogg":case"mp3":case"webm":return ee.Types.SOUND;case"mp4":case"webm":case"ts":return ee.Types.VIDEO;case"json":return ee.Types.JSON;case"xml":return ee.Types.XML;case"css":return ee.Types.CSS;case"js":return ee.Types.JAVASCRIPT;case"svg":return ee.Types.SVG;default:return ee.Types.TEXT}}};ee.RequestUtils=e}(),function(){"use strict";function e(u,f,m){this.EventDispatcher_constructor(),this.loaded=!1,this.canceled=!1,this.progress=0,this.type=m,this.resultFormatter=null,this._item=u?ee.LoadItem.create(u):null,this._preferXHR=f,this._result=null,this._rawResult=null,this._loadedItems=null,this._tagSrcAttribute=null,this._tag=null}var y=ee.extend(e,ee.EventDispatcher),a=e;try{Object.defineProperties(a,{POST:{get:ee.deprecate(function(){return ee.Methods.POST},"AbstractLoader.POST")},GET:{get:ee.deprecate(function(){return ee.Methods.GET},"AbstractLoader.GET")},BINARY:{get:ee.deprecate(function(){return ee.Types.BINARY},"AbstractLoader.BINARY")},CSS:{get:ee.deprecate(function(){return ee.Types.CSS},"AbstractLoader.CSS")},FONT:{get:ee.deprecate(function(){return ee.Types.FONT},"AbstractLoader.FONT")},FONTCSS:{get:ee.deprecate(function(){return ee.Types.FONTCSS},"AbstractLoader.FONTCSS")},IMAGE:{get:ee.deprecate(function(){return ee.Types.IMAGE},"AbstractLoader.IMAGE")},JAVASCRIPT:{get:ee.deprecate(function(){return ee.Types.JAVASCRIPT},"AbstractLoader.JAVASCRIPT")},JSON:{get:ee.deprecate(function(){return ee.Types.JSON},"AbstractLoader.JSON")},JSONP:{get:ee.deprecate(function(){return ee.Types.JSONP},"AbstractLoader.JSONP")},MANIFEST:{get:ee.deprecate(function(){return ee.Types.MANIFEST},"AbstractLoader.MANIFEST")},SOUND:{get:ee.deprecate(function(){return ee.Types.SOUND},"AbstractLoader.SOUND")},VIDEO:{get:ee.deprecate(function(){return ee.Types.VIDEO},"AbstractLoader.VIDEO")},SPRITESHEET:{get:ee.deprecate(function(){return ee.Types.SPRITESHEET},"AbstractLoader.SPRITESHEET")},SVG:{get:ee.deprecate(function(){return ee.Types.SVG},"AbstractLoader.SVG")},TEXT:{get:ee.deprecate(function(){return ee.Types.TEXT},"AbstractLoader.TEXT")},XML:{get:ee.deprecate(function(){return ee.Types.XML},"AbstractLoader.XML")}})}catch(u){}y.getItem=function(){return this._item},y.getResult=function(u){return u?this._rawResult:this._result},y.getTag=function(){return this._tag},y.setTag=function(u){this._tag=u},y.load=function(){this._createRequest(),this._request.on("complete",this,this),this._request.on("progress",this,this),this._request.on("loadStart",this,this),this._request.on("abort",this,this),this._request.on("timeout",this,this),this._request.on("error",this,this);var u=new ee.Event("initialize");u.loader=this._request,this.dispatchEvent(u),this._request.load()},y.cancel=function(){this.canceled=!0,this.destroy()},y.destroy=function(){this._request&&(this._request.removeAllEventListeners(),this._request.destroy()),this._request=null,this._item=null,this._rawResult=null,this._result=null,this._loadItems=null,this.removeAllEventListeners()},y.getLoadedItems=function(){return this._loadedItems},y._createRequest=function(){this._preferXHR?this._request=new ee.XHRRequest(this._item):this._request=new ee.TagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},y._createTag=function(u){return null},y._sendLoadStart=function(){this._isCanceled()||this.dispatchEvent("loadstart")},y._sendProgress=function(u){var f;this._isCanceled()||(f=null,typeof u=="number"?(this.progress=u,f=new ee.ProgressEvent(this.progress)):(f=u,this.progress=u.loaded/u.total,f.progress=this.progress,!isNaN(this.progress)&&this.progress!=1/0||(this.progress=0)),this.hasEventListener("progress")&&this.dispatchEvent(f))},y._sendComplete=function(){var u;this._isCanceled()||(this.loaded=!0,(u=new ee.Event("complete")).rawResult=this._rawResult,this._result!=null&&(u.result=this._result),this.dispatchEvent(u))},y._sendError=function(u){!this._isCanceled()&&this.hasEventListener("error")&&(u==null&&(u=new ee.ErrorEvent("PRELOAD_ERROR_EMPTY")),this.dispatchEvent(u))},y._isCanceled=function(){return!(window.createjs!=null&&!this.canceled)},y.resultFormatter=null,y.handleEvent=function(u){switch(u.type){case"complete":this._rawResult=u.target._response;var f=this.resultFormatter&&this.resultFormatter(this);f instanceof Function?f.call(this,ee.proxy(this._resultFormatSuccess,this),ee.proxy(this._resultFormatFailed,this)):(this._result=f||this._rawResult,this._sendComplete());break;case"progress":this._sendProgress(u);break;case"error":this._sendError(u);break;case"loadstart":this._sendLoadStart();break;case"abort":case"timeout":this._isCanceled()||this.dispatchEvent(new ee.ErrorEvent("PRELOAD_"+u.type.toUpperCase()+"_ERROR"))}},y._resultFormatSuccess=function(u){this._result=u,this._sendComplete()},y._resultFormatFailed=function(u){this._sendError(u)},y.toString=function(){return"[PreloadJS AbstractLoader]"},ee.AbstractLoader=ee.promote(e,"EventDispatcher")}(),function(){"use strict";function e(a,u,f){this.AbstractLoader_constructor(a,u,f),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src",this.on("initialize",this._updateXHR,this)}var y=ee.extend(e,ee.AbstractLoader);y.load=function(){this._tag||(this._tag=this._createTag(this._item.src)),this._tag.preload="auto",this._tag.load(),this.AbstractLoader_load()},y._createTag=function(){},y._createRequest=function(){this._preferXHR?this._request=new ee.XHRRequest(this._item):this._request=new ee.MediaTagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},y._updateXHR=function(a){a.loader.setResponseType&&a.loader.setResponseType("blob")},y._formatResult=function(a){var u,f;return this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.onstalled=null,this._preferXHR&&(u=window.URL||window.webkitURL,f=a.getResult(!0),a.getTag().src=u.createObjectURL(f)),a.getTag()},ee.AbstractMediaLoader=ee.promote(e,"AbstractLoader")}(),function(){"use strict";function e(a){this._item=a}var y=ee.extend(e,ee.EventDispatcher);y.load=function(){},y.destroy=function(){},y.cancel=function(){},ee.AbstractRequest=ee.promote(e,"EventDispatcher")}(),function(){"use strict";function e(a,u,f){this.AbstractRequest_constructor(a),this._tag=u,this._tagSrcAttribute=f,this._loadedHandler=ee.proxy(this._handleTagComplete,this),this._addedToDOM=!1}var y=ee.extend(e,ee.AbstractRequest);y.load=function(){this._tag.onload=ee.proxy(this._handleTagComplete,this),this._tag.onreadystatechange=ee.proxy(this._handleReadyStateChange,this),this._tag.onerror=ee.proxy(this._handleError,this);var a=new ee.Event("initialize");a.loader=this._tag,this.dispatchEvent(a),this._loadTimeout=setTimeout(ee.proxy(this._handleTimeout,this),this._item.loadTimeout),this._tag[this._tagSrcAttribute]=this._item.src,this._tag.parentNode==null&&(ee.DomUtils.appendToBody(this._tag),this._addedToDOM=!0)},y.destroy=function(){this._clean(),this._tag=null,this.AbstractRequest_destroy()},y._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var a=this._tag;a.readyState!="loaded"&&a.readyState!="complete"||this._handleTagComplete()},y._handleError=function(){this._clean(),this.dispatchEvent("error")},y._handleTagComplete=function(){this._rawResult=this._tag,this._result=this.resultFormatter&&this.resultFormatter(this)||this._rawResult,this._clean(),this.dispatchEvent("complete")},y._handleTimeout=function(){this._clean(),this.dispatchEvent(new ee.Event("timeout"))},y._clean=function(){this._tag.onload=null,this._tag.onreadystatechange=null,this._tag.onerror=null,this._addedToDOM&&this._tag.parentNode!=null&&this._tag.parentNode.removeChild(this._tag),clearTimeout(this._loadTimeout)},y._handleStalled=function(){},ee.TagRequest=ee.promote(e,"AbstractRequest")}(),function(){"use strict";function e(a,u,f){this.AbstractRequest_constructor(a),this._tag=u,this._tagSrcAttribute=f,this._loadedHandler=ee.proxy(this._handleTagComplete,this)}var y=ee.extend(e,ee.TagRequest);y.load=function(){var a=ee.proxy(this._handleStalled,this);this._stalledCallback=a;var u=ee.proxy(this._handleProgress,this);this._handleProgress=u,this._tag.addEventListener("stalled",a),this._tag.addEventListener("progress",u),this._tag.addEventListener&&this._tag.addEventListener("canplaythrough",this._loadedHandler,!1),this.TagRequest_load()},y._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var a=this._tag;a.readyState!="loaded"&&a.readyState!="complete"||this._handleTagComplete()},y._handleStalled=function(){},y._handleProgress=function(a){!a||0<a.loaded&&a.total==0||(a=new ee.ProgressEvent(a.loaded,a.total),this.dispatchEvent(a))},y._clean=function(){this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.removeEventListener("stalled",this._stalledCallback),this._tag.removeEventListener("progress",this._progressCallback),this.TagRequest__clean()},ee.MediaTagRequest=ee.promote(e,"TagRequest")}(),function(){"use strict";function e(a){this.AbstractRequest_constructor(a),this._request=null,this._loadTimeout=null,this._xhrLevel=1,this._response=null,this._rawResponse=null,this._canceled=!1,this._handleLoadStartProxy=ee.proxy(this._handleLoadStart,this),this._handleProgressProxy=ee.proxy(this._handleProgress,this),this._handleAbortProxy=ee.proxy(this._handleAbort,this),this._handleErrorProxy=ee.proxy(this._handleError,this),this._handleTimeoutProxy=ee.proxy(this._handleTimeout,this),this._handleLoadProxy=ee.proxy(this._handleLoad,this),this._handleReadyStateChangeProxy=ee.proxy(this._handleReadyStateChange,this),this._createXHR(a)}var y=ee.extend(e,ee.AbstractRequest);e.ACTIVEX_VERSIONS=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.5.0","Msxml2.XMLHTTP.4.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],y.getResult=function(a){return a&&this._rawResponse?this._rawResponse:this._response},y.cancel=function(){this.canceled=!0,this._clean(),this._request.abort()},y.load=function(){if(this._request!=null){this._request.addEventListener!=null?(this._request.addEventListener("loadstart",this._handleLoadStartProxy,!1),this._request.addEventListener("progress",this._handleProgressProxy,!1),this._request.addEventListener("abort",this._handleAbortProxy,!1),this._request.addEventListener("error",this._handleErrorProxy,!1),this._request.addEventListener("timeout",this._handleTimeoutProxy,!1),this._request.addEventListener("load",this._handleLoadProxy,!1),this._request.addEventListener("readystatechange",this._handleReadyStateChangeProxy,!1)):(this._request.onloadstart=this._handleLoadStartProxy,this._request.onprogress=this._handleProgressProxy,this._request.onabort=this._handleAbortProxy,this._request.onerror=this._handleErrorProxy,this._request.ontimeout=this._handleTimeoutProxy,this._request.onload=this._handleLoadProxy,this._request.onreadystatechange=this._handleReadyStateChangeProxy),this._xhrLevel==1&&(this._loadTimeout=setTimeout(ee.proxy(this._handleTimeout,this),this._item.loadTimeout));try{this._item.values?this._request.send(ee.URLUtils.formatQueryString(this._item.values)):this._request.send()}catch(a){this.dispatchEvent(new ee.ErrorEvent("XHR_SEND",null,a))}}else this._handleError()},y.setResponseType=function(a){a==="blob"&&(a=window.URL?"blob":"arraybuffer",this._responseType=a),this._request.responseType=a},y.getAllResponseHeaders=function(){return this._request.getAllResponseHeaders instanceof Function?this._request.getAllResponseHeaders():null},y.getResponseHeader=function(a){return this._request.getResponseHeader instanceof Function?this._request.getResponseHeader(a):null},y._handleProgress=function(a){!a||0<a.loaded&&a.total==0||(a=new ee.ProgressEvent(a.loaded,a.total),this.dispatchEvent(a))},y._handleLoadStart=function(a){clearTimeout(this._loadTimeout),this.dispatchEvent("loadstart")},y._handleAbort=function(a){this._clean(),this.dispatchEvent(new ee.ErrorEvent("XHR_ABORTED",null,a))},y._handleError=function(a){this._clean(),this.dispatchEvent(new ee.ErrorEvent(a.message))},y._handleReadyStateChange=function(a){this._request.readyState==4&&this._handleLoad()},y._handleLoad=function(a){if(!this.loaded){this.loaded=!0;var u=this._checkError();if(u)this._handleError(u);else{if(this._response=this._getResponse(),this._responseType==="arraybuffer")try{this._response=new Blob([this._response])}catch(f){window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,f.name==="TypeError"&&window.BlobBuilder&&((u=new BlobBuilder).append(this._response),this._response=u.getBlob())}this._clean(),this.dispatchEvent(new ee.Event("complete"))}}},y._handleTimeout=function(a){this._clean(),this.dispatchEvent(new ee.ErrorEvent("PRELOAD_TIMEOUT",null,a))},y._checkError=function(){var a=parseInt(this._request.status);return 400<=a&&a<=599?new Error(a):a==0&&/^https?:/.test(location.protocol)?new Error(0):null},y._getResponse=function(){if(this._response!=null)return this._response;if(this._request.response!=null)return this._request.response;try{if(this._request.responseText!=null)return this._request.responseText}catch(a){}try{if(this._request.responseXML!=null)return this._request.responseXML}catch(a){}return null},y._createXHR=function(a){var u=ee.URLUtils.isCrossDomain(a),f={},m=null;if(window.XMLHttpRequest)m=new XMLHttpRequest,u&&m.withCredentials===void 0&&window.XDomainRequest&&(m=new XDomainRequest);else{for(var D=0,J=s.ACTIVEX_VERSIONS.length;D<J;D++){var se=s.ACTIVEX_VERSIONS[D];try{m=new ActiveXObject(se);break}catch(t){}}if(m==null)return!1}a.mimeType==null&&ee.RequestUtils.isText(a.type)&&(a.mimeType="text/plain; charset=utf-8"),a.mimeType&&m.overrideMimeType&&m.overrideMimeType(a.mimeType),this._xhrLevel=typeof m.responseType=="string"?2:1;var we=null,we=a.method==ee.Methods.GET?ee.URLUtils.buildURI(a.src,a.values):a.src;if(m.open(a.method||ee.Methods.GET,we,!0),u&&m instanceof XMLHttpRequest&&this._xhrLevel==1&&(f.Origin=location.origin),a.values&&a.method==ee.Methods.POST&&(f["Content-Type"]="application/x-www-form-urlencoded"),u||f["X-Requested-With"]||(f["X-Requested-With"]="XMLHttpRequest"),a.headers)for(var Te in a.headers)f[Te]=a.headers[Te];for(Te in f)m.setRequestHeader(Te,f[Te]);return m instanceof XMLHttpRequest&&a.withCredentials!==void 0&&(m.withCredentials=a.withCredentials),this._request=m,!0},y._clean=function(){clearTimeout(this._loadTimeout),this._request.removeEventListener!=null?(this._request.removeEventListener("loadstart",this._handleLoadStartProxy),this._request.removeEventListener("progress",this._handleProgressProxy),this._request.removeEventListener("abort",this._handleAbortProxy),this._request.removeEventListener("error",this._handleErrorProxy),this._request.removeEventListener("timeout",this._handleTimeoutProxy),this._request.removeEventListener("load",this._handleLoadProxy),this._request.removeEventListener("readystatechange",this._handleReadyStateChangeProxy)):(this._request.onloadstart=null,this._request.onprogress=null,this._request.onabort=null,this._request.onerror=null,this._request.ontimeout=null,this._request.onload=null,this._request.onreadystatechange=null)},y.toString=function(){return"[PreloadJS XHRRequest]"},ee.XHRRequest=ee.promote(e,"AbstractRequest")}(),function(){"use strict";function e(u,f,m){this.AbstractLoader_constructor(),this._plugins=[],this._typeCallbacks={},this._extensionCallbacks={},this.next=null,this.maintainScriptOrder=!0,this.stopOnError=!1,this._maxConnections=1,this._availableLoaders=[ee.FontLoader,ee.ImageLoader,ee.JavaScriptLoader,ee.CSSLoader,ee.JSONLoader,ee.JSONPLoader,ee.SoundLoader,ee.ManifestLoader,ee.SpriteSheetLoader,ee.XMLLoader,ee.SVGLoader,ee.BinaryLoader,ee.VideoLoader,ee.TextLoader],this._defaultLoaderLength=this._availableLoaders.length,this.init(u,f,m)}var y=ee.extend(e,ee.AbstractLoader),a=e;try{Object.defineProperties(a,{POST:{get:ee.deprecate(function(){return ee.Methods.POST},"AbstractLoader.POST")},GET:{get:ee.deprecate(function(){return ee.Methods.GET},"AbstractLoader.GET")},BINARY:{get:ee.deprecate(function(){return ee.Types.BINARY},"AbstractLoader.BINARY")},CSS:{get:ee.deprecate(function(){return ee.Types.CSS},"AbstractLoader.CSS")},FONT:{get:ee.deprecate(function(){return ee.Types.FONT},"AbstractLoader.FONT")},FONTCSS:{get:ee.deprecate(function(){return ee.Types.FONTCSS},"AbstractLoader.FONTCSS")},IMAGE:{get:ee.deprecate(function(){return ee.Types.IMAGE},"AbstractLoader.IMAGE")},JAVASCRIPT:{get:ee.deprecate(function(){return ee.Types.JAVASCRIPT},"AbstractLoader.JAVASCRIPT")},JSON:{get:ee.deprecate(function(){return ee.Types.JSON},"AbstractLoader.JSON")},JSONP:{get:ee.deprecate(function(){return ee.Types.JSONP},"AbstractLoader.JSONP")},MANIFEST:{get:ee.deprecate(function(){return ee.Types.MANIFEST},"AbstractLoader.MANIFEST")},SOUND:{get:ee.deprecate(function(){return ee.Types.SOUND},"AbstractLoader.SOUND")},VIDEO:{get:ee.deprecate(function(){return ee.Types.VIDEO},"AbstractLoader.VIDEO")},SPRITESHEET:{get:ee.deprecate(function(){return ee.Types.SPRITESHEET},"AbstractLoader.SPRITESHEET")},SVG:{get:ee.deprecate(function(){return ee.Types.SVG},"AbstractLoader.SVG")},TEXT:{get:ee.deprecate(function(){return ee.Types.TEXT},"AbstractLoader.TEXT")},XML:{get:ee.deprecate(function(){return ee.Types.XML},"AbstractLoader.XML")}})}catch(u){}y.init=function(u,f,m){this.preferXHR=!0,this._preferXHR=!0,this.setPreferXHR(u),this._paused=!1,this._basePath=f,this._crossOrigin=m,this._loadStartWasDispatched=!1,this._currentlyLoadingScript=null,this._currentLoads=[],this._loadQueue=[],this._loadQueueBackup=[],this._loadItemsById={},this._loadItemsBySrc={},this._loadedResults={},this._loadedRawResults={},this._numItems=0,this._numItemsLoaded=0,this._scriptOrder=[],this._loadedScripts=[],this._lastProgress=NaN},y.registerLoader=function(u){if(!u||!u.canLoadItem)throw new Error("loader is of an incorrect type.");if(this._availableLoaders.indexOf(u)!=-1)throw new Error("loader already exists.");this._availableLoaders.unshift(u)},y.unregisterLoader=function(u){u=this._availableLoaders.indexOf(u),u!=-1&&u<this._defaultLoaderLength-1&&this._availableLoaders.splice(u,1)},y.setPreferXHR=function(u){return this.preferXHR=u!=0&&window.XMLHttpRequest!=null,this.preferXHR},y.removeAll=function(){this.remove()},y.remove=function(u){var f=null;if(u&&!Array.isArray(u))f=[u];else if(u)f=u;else if(0<arguments.length)return;var m=!1;if(f){for(;f.length;){for(var D=f.pop(),J=this.getResult(D),se=this._loadQueue.length-1;0<=se;se--)if((we=this._loadQueue[se].getItem()).id==D||we.src==D){this._loadQueue.splice(se,1)[0].cancel();break}for(se=this._loadQueueBackup.length-1;0<=se;se--)if((we=this._loadQueueBackup[se].getItem()).id==D||we.src==D){this._loadQueueBackup.splice(se,1)[0].cancel();break}if(J)this._disposeItem(this.getItem(D));else for(var se=this._currentLoads.length-1;0<=se;se--){var we=this._currentLoads[se].getItem();if(we.id==D||we.src==D){this._currentLoads.splice(se,1)[0].cancel(),m=!0;break}}}m&&this._loadNext()}else{for(var Te in this.close(),this._loadItemsById)this._disposeItem(this._loadItemsById[Te]);this.init(this.preferXHR,this._basePath)}},y.reset=function(){for(var u in this.close(),this._loadItemsById)this._disposeItem(this._loadItemsById[u]);for(var f=[],m=0,D=this._loadQueueBackup.length;m<D;m++)f.push(this._loadQueueBackup[m].getItem());this.loadManifest(f,!1)},y.installPlugin=function(u){if(u!=null&&u.getPreloadHandlers!=null){this._plugins.push(u);var f=u.getPreloadHandlers();if(f.scope=u,f.types!=null)for(var m=0,D=f.types.length;m<D;m++)this._typeCallbacks[f.types[m]]=f;if(f.extensions!=null)for(m=0,D=f.extensions.length;m<D;m++)this._extensionCallbacks[f.extensions[m]]=f}},y.setMaxConnections=function(u){this._maxConnections=u,!this._paused&&0<this._loadQueue.length&&this._loadNext()},y.loadFile=function(u,f,m){u!=null?(this._addItem(u,null,m),f!==!1?this.setPaused(!1):this.setPaused(!0)):(f=new ee.ErrorEvent("PRELOAD_NO_FILE"),this._sendError(f))},y.loadManifest=function(u,f,m){var D=null,J=null;if(Array.isArray(u)){if(u.length==0){var se=new ee.ErrorEvent("PRELOAD_MANIFEST_EMPTY");return void this._sendError(se)}D=u}else if(typeof u=="string")D=[{src:u,type:a.MANIFEST}];else{if(typeof u!="object")return se=new ee.ErrorEvent("PRELOAD_MANIFEST_NULL"),void this._sendError(se);u.src!==void 0?(u.type==null?u.type=a.MANIFEST:u.type!=a.MANIFEST&&(se=new ee.ErrorEvent("PRELOAD_MANIFEST_TYPE"),this._sendError(se)),D=[u]):u.manifest!==void 0&&(D=u.manifest,J=u.path)}for(var we=0,Te=D.length;we<Te;we++)this._addItem(D[we],J,m);f!==!1?this.setPaused(!1):this.setPaused(!0)},y.load=function(){this.setPaused(!1)},y.getItem=function(u){return this._loadItemsById[u]||this._loadItemsBySrc[u]},y.getResult=function(u,f){return u=this._loadItemsById[u]||this._loadItemsBySrc[u],u==null?null:(u=u.id,(f&&this._loadedRawResults[u]?this._loadedRawResults:this._loadedResults)[u])},y.getItems=function(u){var f,m=[];for(f in this._loadItemsById){var D=this._loadItemsById[f],J=this.getResult(f);u===!0&&J==null||m.push({item:D,result:J,rawResult:this.getResult(f,!0)})}return m},y.setPaused=function(u){this._paused=u,this._paused||this._loadNext()},y.close=function(){for(;this._currentLoads.length;)this._currentLoads.pop().cancel();this._scriptOrder.length=0,this._loadedScripts.length=0,this.loadStartWasDispatched=!1,this._itemCount=0,this._lastProgress=NaN},y._addItem=function(u,f,m){f=this._createLoadItem(u,f,m),f==null||(m=this._createLoader(f))!=null&&("plugins"in m&&(m.plugins=this._plugins),f._loader=m,this._loadQueue.push(m),this._loadQueueBackup.push(m),this._numItems++,this._updateProgress(),(this.maintainScriptOrder&&f.type==ee.Types.JAVASCRIPT||f.maintainOrder===!0)&&(this._scriptOrder.push(f),this._loadedScripts.push(null)))},y._createLoadItem=function(u,f,m){var D=ee.LoadItem.create(u);if(D==null)return null;if(u="",m=m||this._basePath,D.src instanceof Object){if(!D.type)return null;f?(u=f,se=ee.URLUtils.parseURI(f),m==null||se.absolute||se.relative||(u=m+u)):m!=null&&(u=m)}else{var J=ee.URLUtils.parseURI(D.src);J.extension&&(D.ext=J.extension),D.type==null&&(D.type=ee.RequestUtils.getTypeByExtension(D.ext));var se,we=D.src;J.absolute||J.relative||(f?(u=f,se=ee.URLUtils.parseURI(f),we=f+we,m==null||se.absolute||se.relative||(u=m+u)):m!=null&&(u=m)),D.src=u+D.src}if(D.path=u,D.id!==void 0&&D.id!==null&&D.id!==""||(D.id=we),we=this._typeCallbacks[D.type]||this._extensionCallbacks[D.ext],we){if(we=we.callback.call(we.scope,D,this),we===!1)return null;we===!0||we!=null&&(D._loader=we),(J=ee.URLUtils.parseURI(D.src)).extension!=null&&(D.ext=J.extension)}return this._loadItemsById[D.id]=D,(this._loadItemsBySrc[D.src]=D).crossOrigin==null&&(D.crossOrigin=this._crossOrigin),D},y._createLoader=function(u){if(u._loader!=null)return u._loader;for(var f=this.preferXHR,m=0;m<this._availableLoaders.length;m++){var D=this._availableLoaders[m];if(D&&D.canLoadItem(u))return new D(u,f)}return null},y._loadNext=function(){if(!this._paused){this._loadStartWasDispatched||(this._sendLoadStart(),this._loadStartWasDispatched=!0),this._numItems==this._numItemsLoaded?(this.loaded=!0,this._sendComplete(),this.next&&this.next.load&&this.next.load()):this.loaded=!1;for(var u=0;u<this._loadQueue.length&&!(this._currentLoads.length>=this._maxConnections);u++){var f=this._loadQueue[u];this._canStartLoad(f)&&(this._loadQueue.splice(u,1),u--,this._loadItem(f))}}},y._loadItem=function(u){u.on("fileload",this._handleFileLoad,this),u.on("progress",this._handleProgress,this),u.on("complete",this._handleFileComplete,this),u.on("error",this._handleError,this),u.on("fileerror",this._handleFileError,this),this._currentLoads.push(u),this._sendFileStart(u.getItem()),u.load()},y._handleFileLoad=function(u){u.target=null,this.dispatchEvent(u)},y._handleFileError=function(u){u=new ee.ErrorEvent("FILE_LOAD_ERROR",null,u.item),this._sendError(u)},y._handleError=function(u){var f=u.target;this._numItemsLoaded++,this._finishOrderedItem(f,!0),this._updateProgress(),u=new ee.ErrorEvent("FILE_LOAD_ERROR",null,f.getItem()),this._sendError(u),this.stopOnError?this.setPaused(!0):(this._removeLoadItem(f),this._cleanLoadItem(f),this._loadNext())},y._handleFileComplete=function(u){var f=u.target,m=f.getItem(),D=f.getResult();this._loadedResults[m.id]=D,u=f.getResult(!0),u!=null&&u!==D&&(this._loadedRawResults[m.id]=u),this._saveLoadedItems(f),this._removeLoadItem(f),this._finishOrderedItem(f)||this._processFinishedLoad(m,f),this._cleanLoadItem(f)},y._saveLoadedItems=function(u){var f=u.getLoadedItems();if(f!==null)for(var m=0;m<f.length;m++){var D=f[m].item;this._loadItemsBySrc[D.src]=D,this._loadItemsById[D.id]=D,this._loadedResults[D.id]=f[m].result,this._loadedRawResults[D.id]=f[m].rawResult}},y._finishOrderedItem=function(u,f){var m=u.getItem();return this.maintainScriptOrder&&m.type==ee.Types.JAVASCRIPT||m.maintainOrder?(u instanceof ee.JavaScriptLoader&&(this._currentlyLoadingScript=!1),u=ee.indexOf(this._scriptOrder,m),u==-1?!1:(this._loadedScripts[u]=f===!0||m,this._checkScriptLoadOrder(),!0)):!1},y._checkScriptLoadOrder=function(){for(var u=this._loadedScripts.length,f=0;f<u;f++){var m,D=this._loadedScripts[f];if(D===null)break;D!==!0&&(m=this._loadedResults[D.id],D.type==ee.Types.JAVASCRIPT&&ee.DomUtils.appendToHead(m),m=D._loader,this._processFinishedLoad(D,m),this._loadedScripts[f]=!0)}},y._processFinishedLoad=function(u,f){var m;this._numItemsLoaded++,this.maintainScriptOrder||u.type!=ee.Types.JAVASCRIPT||(m=f.getTag(),ee.DomUtils.appendToHead(m)),this._updateProgress(),this._sendFileComplete(u,f),this._loadNext()},y._canStartLoad=function(u){if(!this.maintainScriptOrder||u.preferXHR||(u=u.getItem(),u.type!=ee.Types.JAVASCRIPT))return!0;if(this._currentlyLoadingScript)return!1;for(var f=this._scriptOrder.indexOf(u),m=0;m<f;){if(this._loadedScripts[m]==null)return!1;m++}return this._currentlyLoadingScript=!0},y._removeLoadItem=function(u){for(var f=this._currentLoads.length,m=0;m<f;m++)if(this._currentLoads[m]==u){this._currentLoads.splice(m,1);break}},y._cleanLoadItem=function(u){u=u.getItem(),u&&delete u._loader},y._handleProgress=function(u){u=u.target,this._sendFileProgress(u.getItem(),u.progress),this._updateProgress()},y._updateProgress=function(){var u=this._numItemsLoaded/this._numItems,f=this._numItems-this._numItemsLoaded;if(0<f){for(var m=0,D=0,J=this._currentLoads.length;D<J;D++)m+=this._currentLoads[D].progress;u+=m/f*(f/this._numItems)}this._lastProgress!=u&&(this._sendProgress(u),this._lastProgress=u)},y._disposeItem=function(u){delete this._loadedResults[u.id],delete this._loadedRawResults[u.id],delete this._loadItemsById[u.id],delete this._loadItemsBySrc[u.src]},y._sendFileProgress=function(u,f){var m;this._isCanceled()||this._paused||this.hasEventListener("fileprogress")&&((m=new ee.Event("fileprogress")).progress=f,m.loaded=f,m.total=1,m.item=u,this.dispatchEvent(m))},y._sendFileComplete=function(u,f){var m;this._isCanceled()||this._paused||((m=new ee.Event("fileload")).loader=f,m.item=u,m.result=this._loadedResults[u.id],m.rawResult=this._loadedRawResults[u.id],u.completeHandler&&u.completeHandler(m),this.hasEventListener("fileload")&&this.dispatchEvent(m))},y._sendFileStart=function(u){var f=new ee.Event("filestart");f.item=u,this.hasEventListener("filestart")&&this.dispatchEvent(f)},y.toString=function(){return"[PreloadJS LoadQueue]"},ee.LoadQueue=ee.promote(e,"AbstractLoader")}(),function(){"use strict";function e(y){this.AbstractLoader_constructor(y,!0,ee.Types.TEXT)}ee.extend(e,ee.AbstractLoader),e.canLoadItem=function(y){return y.type==ee.Types.TEXT},ee.TextLoader=ee.promote(e,"AbstractLoader")}(),function(){"use strict";function e(a){this.AbstractLoader_constructor(a,!0,ee.Types.BINARY),this.on("initialize",this._updateXHR,this)}var y=ee.extend(e,ee.AbstractLoader);e.canLoadItem=function(a){return a.type==ee.Types.BINARY},y._updateXHR=function(a){a.loader.setResponseType("arraybuffer")},ee.BinaryLoader=ee.promote(e,"AbstractLoader")}(),function(){"use strict";function e(a,u){this.AbstractLoader_constructor(a,u,ee.Types.CSS),this.resultFormatter=this._formatResult,this._tagSrcAttribute="href",this._tag=u?ee.Elements.style():ee.Elements.link(),this._tag.rel="stylesheet",this._tag.type="text/css"}var y=ee.extend(e,ee.AbstractLoader);e.canLoadItem=function(a){return a.type==ee.Types.CSS},y._formatResult=function(a){var u;return this._preferXHR?(u=a.getTag()).styleSheet?u.styleSheet.cssText=a.getResult(!0):(a=ee.Elements.text(a.getResult(!0)),u.appendChild(a)):u=this._tag,ee.DomUtils.appendToHead(u),u},ee.CSSLoader=ee.promote(e,"AbstractLoader")}(),function(){"use strict";function e(a,u){this.AbstractLoader_constructor(a,u,a.type),this._faces={},this._watched=[],this._count=0,this._watchInterval=null,this._loadTimeout=null,this._injectCSS=a.injectCSS===void 0||a.injectCSS,this.dispatchEvent("initialize")}var y=ee.extend(e,ee.AbstractLoader);e.canLoadItem=function(a){return a.type==ee.Types.FONT||a.type==ee.Types.FONTCSS},e.sampleText="abcdefghijklmnopqrstuvwxyz ABCDEFGHIJKLMNOPQRSTUVWXYZ",e._ctx=document.createElement("canvas").getContext("2d"),e._referenceFonts=["serif","monospace"],e.WEIGHT_REGEX=/[- ._]*(thin|normal|book|regular|medium|black|heavy|[1-9]00|(?:extra|ultra|semi|demi)?[- ._]*(?:light|bold))[- ._]*/gi,e.STYLE_REGEX=/[- ._]*(italic|oblique)[- ._]*/gi,e.FONT_FORMAT={woff2:"woff2",woff:"woff",ttf:"truetype",otf:"truetype"},e.FONT_WEIGHT={thin:100,extralight:200,ultralight:200,light:300,semilight:300,demilight:300,book:"normal",regular:"normal",semibold:600,demibold:600,extrabold:800,ultrabold:800,black:900,heavy:900},e.WATCH_DURATION=10,y.load=function(){var a;if(this.type==ee.Types.FONTCSS){if(!this._watchCSS())return void this.AbstractLoader_load()}else this._item.src instanceof Array?this._watchFontArray():(a=this._defFromSrc(this._item.src),this._watchFont(a),this._injectStyleTag(this._cssFromDef(a)));this._loadTimeout=setTimeout(ee.proxy(this._handleTimeout,this),this._item.loadTimeout),this.dispatchEvent("loadstart")},y._handleTimeout=function(){this._stopWatching(),this.dispatchEvent(new ee.ErrorEvent("PRELOAD_TIMEOUT"))},y._createRequest=function(){return this._request},y.handleEvent=function(a){switch(a.type){case"complete":this._rawResult=a.target._response,this._result=!0,this._parseCSS(this._rawResult);break;case"error":this._stopWatching(),this.AbstractLoader_handleEvent(a)}},y._watchCSS=function(){var a=this._item.src;return a instanceof HTMLStyleElement&&(this._injectCSS&&!a.parentNode&&(document.head||document.getElementsByTagName("head")[0]).appendChild(a),this._injectCSS=!1,a="\n"+a.textContent),a.search(/\n|\r|@font-face/i)!==-1?(this._parseCSS(a),!0):(this._request=new ee.XHRRequest(this._item),!1)},y._parseCSS=function(a){for(var u=/@font-face\s*\{([^}]+)}/g;;){var f=u.exec(a);if(!f)break;this._watchFont(this._parseFontFace(f[1]))}this._injectStyleTag(a)},y._watchFontArray=function(){for(var a=this._item.src,u="",f=a.length-1;0<=f;f--){var m=a[f],m=typeof m=="string"?this._defFromSrc(m):this._defFromObj(m);this._watchFont(m),u+=this._cssFromDef(m)+"\n"}this._injectStyleTag(u)},y._injectStyleTag=function(a){var u,f;this._injectCSS&&(u=document.head||document.getElementsByTagName("head")[0],(f=document.createElement("style")).type="text/css",f.styleSheet?f.styleSheet.cssText=a:f.appendChild(document.createTextNode(a)),u.appendChild(f))},y._parseFontFace=function(a){var u=this._getCSSValue(a,"font-family"),f=this._getCSSValue(a,"src");return u&&f?this._defFromObj({family:u,src:f,style:this._getCSSValue(a,"font-style"),weight:this._getCSSValue(a,"font-weight")}):null},y._watchFont=function(a){a&&!this._faces[a.id]&&(this._faces[a.id]=a,this._watched.push(a),this._count++,this._calculateReferenceSizes(a),this._startWatching())},y._startWatching=function(){this._watchInterval==null&&(this._watchInterval=setInterval(ee.proxy(this._watch,this),e.WATCH_DURATION))},y._stopWatching=function(){clearInterval(this._watchInterval),clearTimeout(this._loadTimeout),this._watchInterval=null},y._watch=function(){for(var a=this._watched,u=e._referenceFonts,f=a.length,m=f-1;0<=m;m--)for(var D=a[m],J=D.refs,se=J.length-1;0<=se;se--)if(this._getTextWidth(D.family+","+u[se],D.weight,D.style)!=J[se]){var we=new ee.Event("fileload");D.type="font-family",we.item=D,this.dispatchEvent(we),a.splice(m,1);break}f!==a.length&&(we=new ee.ProgressEvent(this._count-a.length,this._count),this.dispatchEvent(we)),f===0&&(this._stopWatching(),this._sendComplete())},y._calculateReferenceSizes=function(a){for(var u=e._referenceFonts,f=a.refs=[],m=0;m<u.length;m++)f[m]=this._getTextWidth(u[m],a.weight,a.style)},y._defFromSrc=function(a){var u=/[- ._]+/g,f=a,m=null,D=f.search(/[?#]/);D!==-1&&(f=f.substr(0,D)),(D=f.lastIndexOf("."))!==-1&&(m=f.substr(D+1),f=f.substr(0,D)),(D=f.lastIndexOf("/"))!==-1&&(f=f.substr(D+1));var J=f,se=J.match(e.WEIGHT_REGEX);return se&&(se=se[0],J=J.replace(se,""),se=se.replace(u,"").toLowerCase()),D=f.match(e.STYLE_REGEX),D&&(J=J.replace(D[0],""),D="italic"),J=J.replace(u,""),a="local('"+f.replace(u," ")+"'), url('"+a+"')",m=e.FONT_FORMAT[m],m&&(a+=" format('"+m+"')"),this._defFromObj({family:J,weight:e.FONT_WEIGHT[se]||se,style:D,src:a})},y._defFromObj=function(a){return a={family:a.family,src:a.src,style:a.style||"normal",weight:a.weight||"normal"},a.id=a.family+";"+a.style+";"+a.weight,a},y._cssFromDef=function(a){return"@font-face {\n	font-family: '"+a.family+"';\n	font-style: "+a.style+";\n	font-weight: "+a.weight+";\n	src: "+a.src+";\n}"},y._getTextWidth=function(a,u,f){var m=e._ctx;return m.font=f+" "+u+" 72px "+a,m.measureText(e.sampleText).width},y._getCSSValue=function(a,u){return a=new RegExp(u+":s*([^;}]+?)s*[;}]").exec(a),a&&a[1]?a[1]:null},ee.FontLoader=ee.promote(e,"AbstractLoader")}(),function(){"use strict";function e(a,u){this.AbstractLoader_constructor(a,u,ee.Types.IMAGE),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src",ee.DomUtils.isImageTag(a)?this._tag=a:ee.DomUtils.isImageTag(a.src)?this._tag=a.src:ee.DomUtils.isImageTag(a.tag)&&(this._tag=a.tag),this._tag!=null?this._preferXHR=!1:this._tag=ee.Elements.img(),this.on("initialize",this._updateXHR,this)}var y=ee.extend(e,ee.AbstractLoader);e.canLoadItem=function(a){return a.type==ee.Types.IMAGE},y.load=function(){var a;this._tag.src!=""&&this._tag.complete?this._sendComplete():((a=this._item.crossOrigin)==1&&(a="Anonymous"),a==null||ee.URLUtils.isLocal(this._item)||(this._tag.crossOrigin=a),this.AbstractLoader_load())},y._updateXHR=function(a){a.loader.mimeType="text/plain; charset=x-user-defined-binary",a.loader.setResponseType&&a.loader.setResponseType("blob")},y._formatResult=function(a){return this._formatImage},y._formatImage=function(a,u){var f=this._tag,m=window.URL||window.webkitURL;this._preferXHR&&(m?(this.getResult(!0)&&(m=m.createObjectURL(this.getResult(!0)),f.src=m),f.addEventListener("load",this._cleanUpURL,!1),f.addEventListener("error",this._cleanUpURL,!1)):f.src=this._item.src),f.complete?a(f):(f.onload=ee.proxy(function(){a(this._tag),f.onload=f.onerror=null},this),f.onerror=ee.proxy(function(D){u(new ee.ErrorEvent("IMAGE_FORMAT",null,D)),f.onload=f.onerror=null},this))},y._cleanUpURL=function(a){(window.URL||window.webkitURL).revokeObjectURL(a.target.src)},ee.ImageLoader=ee.promote(e,"AbstractLoader")}(),function(){"use strict";function e(a,u){this.AbstractLoader_constructor(a,u,ee.Types.JAVASCRIPT),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src",this.setTag(ee.Elements.script())}var y=ee.extend(e,ee.AbstractLoader);e.canLoadItem=function(a){return a.type==ee.Types.JAVASCRIPT},y._formatResult=function(a){var u=a.getTag();return this._preferXHR&&(u.text=a.getResult(!0)),u},ee.JavaScriptLoader=ee.promote(e,"AbstractLoader")}(),function(){"use strict";function e(a){this.AbstractLoader_constructor(a,!0,ee.Types.JSON),this.resultFormatter=this._formatResult}var y=ee.extend(e,ee.AbstractLoader);e.canLoadItem=function(a){return a.type==ee.Types.JSON},y._formatResult=function(a){var u=null;try{u=ee.DataUtils.parseJSON(a.getResult(!0))}catch(m){var f=new ee.ErrorEvent("JSON_FORMAT",null,m);return this._sendError(f),m}return u},ee.JSONLoader=ee.promote(e,"AbstractLoader")}(),function(){"use strict";function e(a){this.AbstractLoader_constructor(a,!1,ee.Types.JSONP),this.setTag(ee.Elements.script()),this.getTag().type="text/javascript"}var y=ee.extend(e,ee.AbstractLoader);e.canLoadItem=function(a){return a.type==ee.Types.JSONP},y.cancel=function(){this.AbstractLoader_cancel(),this._dispose()},y.load=function(){if(this._item.callback==null)throw new Error("callback is required for loading JSONP requests.");if(window[this._item.callback]!=null)throw new Error("JSONP callback '"+this._item.callback+"' already exists on window. You need to specify a different callback or re-name the current one.");window[this._item.callback]=ee.proxy(this._handleLoad,this),ee.DomUtils.appendToBody(this._tag),this._loadTimeout=setTimeout(ee.proxy(this._handleTimeout,this),this._item.loadTimeout),this._tag.src=this._item.src},y._handleLoad=function(a){this._result=this._rawResult=a,this._sendComplete(),this._dispose()},y._handleTimeout=function(){this._dispose(),this.dispatchEvent(new ee.ErrorEvent("timeout"))},y._dispose=function(){ee.DomUtils.removeChild(this._tag),delete window[this._item.callback],clearTimeout(this._loadTimeout)},ee.JSONPLoader=ee.promote(e,"AbstractLoader")}(),function(){"use strict";function e(u,f){this.AbstractLoader_constructor(u,f,ee.Types.MANIFEST),this.plugins=null,this._manifestQueue=null}var y=ee.extend(e,ee.AbstractLoader),a=e;a.MANIFEST_PROGRESS=.25,a.canLoadItem=function(u){return u.type==ee.Types.MANIFEST},y.load=function(){this.AbstractLoader_load()},y._createRequest=function(){var u=this._item.callback;this._request=new(u!=null?ee.JSONPLoader:ee.JSONLoader)(this._item)},y.handleEvent=function(u){switch(u.type){case"complete":return this._rawResult=u.target.getResult(!0),this._result=u.target.getResult(),this._sendProgress(a.MANIFEST_PROGRESS),void this._loadManifest(this._result);case"progress":return u.loaded*=a.MANIFEST_PROGRESS,this.progress=u.loaded/u.total,!isNaN(this.progress)&&this.progress!=1/0||(this.progress=0),void this._sendProgress(u)}this.AbstractLoader_handleEvent(u)},y.destroy=function(){this.AbstractLoader_destroy(),this._manifestQueue.close()},y._loadManifest=function(u){if(u&&u.manifest){var f=this._manifestQueue=new ee.LoadQueue(this._preferXHR);f.on("fileload",this._handleManifestFileLoad,this),f.on("progress",this._handleManifestProgress,this),f.on("complete",this._handleManifestComplete,this,!0),f.on("error",this._handleManifestError,this,!0);for(var m=0,D=this.plugins.length;m<D;m++)f.installPlugin(this.plugins[m]);f.loadManifest(u)}else this._sendComplete()},y._handleManifestFileLoad=function(u){u.target=null,this.dispatchEvent(u)},y._handleManifestComplete=function(u){this._loadedItems=this._manifestQueue.getItems(!0),this._sendComplete()},y._handleManifestProgress=function(u){this.progress=u.progress*(1-a.MANIFEST_PROGRESS)+a.MANIFEST_PROGRESS,this._sendProgress(this.progress)},y._handleManifestError=function(u){var f=new ee.Event("fileerror");f.item=u.data,this.dispatchEvent(f)},ee.ManifestLoader=ee.promote(e,"AbstractLoader")}(),function(){"use strict";function e(a,u){this.AbstractMediaLoader_constructor(a,u,ee.Types.SOUND),ee.DomUtils.isAudioTag(a)||ee.DomUtils.isAudioTag(a.src)?this._tag=a:ee.DomUtils.isAudioTag(a.tag)&&(this._tag=ee.DomUtils.isAudioTag(a)?a:a.src),this._tag!=null&&(this._preferXHR=!1)}var y=ee.extend(e,ee.AbstractMediaLoader);e.canLoadItem=function(a){return a.type==ee.Types.SOUND},y._createTag=function(a){var u=ee.Elements.audio();return u.autoplay=!1,u.preload="none",u.src=a,u},ee.SoundLoader=ee.promote(e,"AbstractMediaLoader")}(),function(){"use strict";function e(a,u){this.AbstractMediaLoader_constructor(a,u,ee.Types.VIDEO),ee.DomUtils.isVideoTag(a)||ee.DomUtils.isVideoTag(a.src)?(this.setTag(ee.DomUtils.isVideoTag(a)?a:a.src),this._preferXHR=!1):this.setTag(this._createTag())}var y=e;ee.extend(e,ee.AbstractMediaLoader)._createTag=function(){return ee.Elements.video()},y.canLoadItem=function(a){return a.type==ee.Types.VIDEO},ee.VideoLoader=ee.promote(e,"AbstractMediaLoader")}(),function(){"use strict";function e(u,f){this.AbstractLoader_constructor(u,f,ee.Types.SPRITESHEET),this._manifestQueue=null}var y=ee.extend(e,ee.AbstractLoader),a=e;a.SPRITESHEET_PROGRESS=.25,a.canLoadItem=function(u){return u.type==ee.Types.SPRITESHEET},y.destroy=function(){this.AbstractLoader_destroy(),this._manifestQueue.close()},y._createRequest=function(){var u=this._item.callback;this._request=new(u!=null?ee.JSONPLoader:ee.JSONLoader)(this._item)},y.handleEvent=function(u){switch(u.type){case"complete":return this._rawResult=u.target.getResult(!0),this._result=u.target.getResult(),this._sendProgress(a.SPRITESHEET_PROGRESS),void this._loadManifest(this._result);case"progress":return u.loaded*=a.SPRITESHEET_PROGRESS,this.progress=u.loaded/u.total,!isNaN(this.progress)&&this.progress!=1/0||(this.progress=0),void this._sendProgress(u)}this.AbstractLoader_handleEvent(u)},y._loadManifest=function(u){var f;u&&u.images&&((f=this._manifestQueue=new ee.LoadQueue(this._preferXHR,this._item.path,this._item.crossOrigin)).on("complete",this._handleManifestComplete,this,!0),f.on("fileload",this._handleManifestFileLoad,this),f.on("progress",this._handleManifestProgress,this),f.on("error",this._handleManifestError,this,!0),f.loadManifest(u.images))},y._handleManifestFileLoad=function(u){var f,m=u.result;m!=null&&(u=(f=this.getResult().images).indexOf(u.item.src),f[u]=m)},y._handleManifestComplete=function(u){this._result=new ee.SpriteSheet(this._result),this._loadedItems=this._manifestQueue.getItems(!0),this._sendComplete()},y._handleManifestProgress=function(u){this.progress=u.progress*(1-a.SPRITESHEET_PROGRESS)+a.SPRITESHEET_PROGRESS,this._sendProgress(this.progress)},y._handleManifestError=function(u){var f=new ee.Event("fileerror");f.item=u.data,this.dispatchEvent(f)},ee.SpriteSheetLoader=ee.promote(e,"AbstractLoader")}(),function(){"use strict";function e(a,u){this.AbstractLoader_constructor(a,u,ee.Types.SVG),this.resultFormatter=this._formatResult,this._tagSrcAttribute="data",u?this.setTag(ee.Elements.svg()):(this.setTag(ee.Elements.object()),this.getTag().type="image/svg+xml")}var y=ee.extend(e,ee.AbstractLoader);e.canLoadItem=function(a){return a.type==ee.Types.SVG},y._formatResult=function(f){var u=ee.DataUtils.parseXML(f.getResult(!0)),f=f.getTag();return!this._preferXHR&&document.body.contains(f)&&document.body.removeChild(f),u.documentElement==null?u:(u=u.documentElement,document.importNode&&(u=document.importNode(u,!0)),f.appendChild(u),f)},ee.SVGLoader=ee.promote(e,"AbstractLoader")}(),function(){"use strict";function e(a){this.AbstractLoader_constructor(a,!0,ee.Types.XML),this.resultFormatter=this._formatResult}var y=ee.extend(e,ee.AbstractLoader);e.canLoadItem=function(a){return a.type==ee.Types.XML},y._formatResult=function(a){return ee.DataUtils.parseXML(a.getResult(!0))},ee.XMLLoader=ee.promote(e,"AbstractLoader")}(),function(){var e=ee.SoundJS=ee.SoundJS||{};e.version="NEXT",e.buildDate="Thu, 14 Sep 2017 22:19:45 GMT"}(),function(){"use strict";function e(){throw"BrowserDetect cannot be instantiated"}var y=e.agent=window.navigator.userAgent;e.isWindowPhone=-1<y.indexOf("IEMobile")||-1<y.indexOf("Windows Phone"),e.isFirefox=-1<y.indexOf("Firefox"),e.isOpera=window.opera!=null,e.isChrome=-1<y.indexOf("Chrome"),e.isIOS=(-1<y.indexOf("iPod")||-1<y.indexOf("iPhone")||-1<y.indexOf("iPad"))&&!e.isWindowPhone,e.isAndroid=-1<y.indexOf("Android")&&!e.isWindowPhone,e.isBlackberry=-1<y.indexOf("Blackberry"),e.isEdge=-1<y.indexOf("Edg"),ee.BrowserDetect=e}(),function(){"use strict";function e(){this.interrupt=null,this.delay=null,this.offset=null,this.loop=null,this.volume=null,this.pan=null,this.startTime=null,this.duration=null}var y=e.prototype={},a=e;a.create=function(u){if(typeof u=="string")return console&&(console.warn||console.log)("Deprecated behaviour. Sound.play takes a configuration object instead of individual arguments. See docs for info."),new ee.PlayPropsConfig().set({interrupt:u});if(u==null||u instanceof a||u instanceof Object)return new ee.PlayPropsConfig().set(u);if(u==null)throw new Error("PlayProps configuration not recognized.")},y.set=function(u){if(u!=null)for(var f in u)this[f]=u[f];return this},y.toString=function(){return"[PlayPropsConfig]"},ee.PlayPropsConfig=a}(),function(){"use strict";function e(){throw"Sound cannot be instantiated"}var y=e;function a(f,m){this.init(f,m)}y.INTERRUPT_ANY="any",y.INTERRUPT_EARLY="early",y.INTERRUPT_LATE="late",y.INTERRUPT_NONE="none",y.PLAY_INITED="playInited",y.PLAY_SUCCEEDED="playSucceeded",y.PLAY_INTERRUPTED="playInterrupted",y.PLAY_FINISHED="playFinished",y.PLAY_FAILED="playFailed",y.SUPPORTED_EXTENSIONS=["mp3","ogg","opus","mpeg","wav","m4a","mp4","aiff","wma","mid"],y.EXTENSION_MAP={m4a:"mp4"},y.FILE_PATTERN=/^(?:(\w+:)\/{2}(\w+(?:\.\w+)*\/?))?([/.]*?(?:[^?]+)?\/)?((?:[^/?]+)\.(\w+))(?:\?(\S+)?)?$/,y.defaultInterruptBehavior=y.INTERRUPT_NONE,y.alternateExtensions=[],y.activePlugin=null,y._masterVolume=1,y._getMasterVolume=function(){return this._masterVolume},y.getVolume=ee.deprecate(y._getMasterVolume,"Sound.getVolume"),y._setMasterVolume=function(f){if(Number(f)!=null&&(f=Math.max(0,Math.min(1,f)),y._masterVolume=f,!this.activePlugin||!this.activePlugin.setVolume||!this.activePlugin.setVolume(f)))for(var m=this._instances,D=0,J=m.length;D<J;D++)m[D].setMasterVolume(f)},y.setVolume=ee.deprecate(y._setMasterVolume,"Sound.setVolume"),y._masterMute=!1,y._getMute=function(){return this._masterMute},y.getMute=ee.deprecate(y._getMute,"Sound.getMute"),y._setMute=function(f){if(f!=null&&(this._masterMute=f,!this.activePlugin||!this.activePlugin.setMute||!this.activePlugin.setMute(f)))for(var m=this._instances,D=0,J=m.length;D<J;D++)m[D].setMasterMute(f)},y.setMute=ee.deprecate(y._setMute,"Sound.setMute"),y._getCapabilities=function(){return y.activePlugin==null?null:y.activePlugin._capabilities},y.getCapabilities=ee.deprecate(y._getCapabilities,"Sound.getCapabilities"),Object.defineProperties(y,{volume:{get:y._getMasterVolume,set:y._setMasterVolume},muted:{get:y._getMute,set:y._setMute},capabilities:{get:y._getCapabilities}}),y._pluginsRegistered=!1,y._lastID=0,y._instances=[],y._idHash={},y._preloadHash={},y._defaultPlayPropsHash={},y.addEventListener=null,y.removeEventListener=null,y.removeAllEventListeners=null,y.dispatchEvent=null,y.hasEventListener=null,y._listeners=null,ee.EventDispatcher.initialize(y),y.getPreloadHandlers=function(){return{callback:ee.proxy(y.initLoad,y),types:["sound"],extensions:y.SUPPORTED_EXTENSIONS}},y._handleLoadComplete=function(f){var m=f.target.getItem().src;if(y._preloadHash[m])for(var D=0,J=y._preloadHash[m].length;D<J;D++){var se=y._preloadHash[m][D];y._preloadHash[m][D]=!0,y.hasEventListener("fileload")&&((f=new ee.Event("fileload")).src=se.src,f.id=se.id,f.data=se.data,f.sprite=se.sprite,y.dispatchEvent(f))}},y._handleLoadError=function(f){var m=f.target.getItem().src;if(y._preloadHash[m])for(var D=0,J=y._preloadHash[m].length;D<J;D++){var se=y._preloadHash[m][D];y._preloadHash[m][D]=!1,y.hasEventListener("fileerror")&&((f=new ee.Event("fileerror")).src=se.src,f.id=se.id,f.data=se.data,f.sprite=se.sprite,y.dispatchEvent(f))}},y._registerPlugin=function(f){return!!f.isSupported()&&(y.activePlugin=new f,!0)},y.registerPlugins=function(f){y._pluginsRegistered=!0;for(var m=0,D=f.length;m<D;m++)if(y._registerPlugin(f[m]))return!0;return!1},y.initializeDefaultPlugins=function(){return y.activePlugin!=null||!y._pluginsRegistered&&!!y.registerPlugins([ee.WebAudioPlugin,ee.HTMLAudioPlugin])},y.isReady=function(){return y.activePlugin!=null},y.initLoad=function(f){return f.type=="video"||y._registerSound(f)},y._registerSound=function(f){if(!y.initializeDefaultPlugins()||(f.src instanceof Object?(we=y._parseSrc(f.src)).src=f.path+we.src:we=y._parsePath(f.src),we==null))return!1;f.src=we.src,f.type="sound";var m=f.data,D=null;if(m!=null&&(isNaN(m.channels)?isNaN(m)||(D=parseInt(m)):D=parseInt(m.channels),m.audioSprite))for(var J,se=m.audioSprite.length;se--;)J=m.audioSprite[se],y._idHash[J.id]={src:f.src,startTime:parseInt(J.startTime),duration:parseInt(J.duration)},J.defaultPlayProps&&(y._defaultPlayPropsHash[J.id]=ee.PlayPropsConfig.create(J.defaultPlayProps));f.id!=null&&(y._idHash[f.id]={src:f.src});var we=y.activePlugin.register(f);return a.create(f.src,D),m!=null&&isNaN(m)?f.data.channels=D||a.maxPerChannel():f.data=D||a.maxPerChannel(),we.type&&(f.type=we.type),f.defaultPlayProps&&(y._defaultPlayPropsHash[f.src]=ee.PlayPropsConfig.create(f.defaultPlayProps)),we},y.registerSound=function(f,m,D,J,se){if(se={src:f,id:m,data:D,defaultPlayProps:se},f instanceof Object&&f.src&&(J=m,se=f),((se=ee.LoadItem.create(se)).path=J)==null||se.src instanceof Object||(se.src=J+se.src),J=y._registerSound(se),!J)return!1;if(y._preloadHash[se.src]||(y._preloadHash[se.src]=[]),y._preloadHash[se.src].push(se),y._preloadHash[se.src].length==1)J.on("complete",this._handleLoadComplete,this),J.on("error",this._handleLoadError,this),y.activePlugin.preload(J);else if(y._preloadHash[se.src][0]==1)return!0;return se},y.registerSounds=function(f,m){var D=[];f.path&&(m?m+=f.path:m=f.path,f=f.manifest);for(var J=0,se=f.length;J<se;J++)D[J]=ee.Sound.registerSound(f[J].src,f[J].id,f[J].data,m,f[J].defaultPlayProps);return D},y.removeSound=function(f,m){if(y.activePlugin==null)return!1;var D,J;if(f instanceof Object&&f.src&&(f=f.src),(D=f instanceof Object?y._parseSrc(f):(f=y._getSrcById(f).src,y._parsePath(f)))==null)return!1;for(J in f=D.src,m!=null&&(f=m+f),y._idHash)y._idHash[J].src==f&&delete y._idHash[J];return a.removeSrc(f),delete y._preloadHash[f],y.activePlugin.removeSound(f),!0},y.removeSounds=function(f,m){var D=[];f.path&&(m?m+=f.path:m=f.path,f=f.manifest);for(var J=0,se=f.length;J<se;J++)D[J]=ee.Sound.removeSound(f[J].src,m);return D},y.removeAllSounds=function(){y._idHash={},y._preloadHash={},a.removeAll(),y.activePlugin&&y.activePlugin.removeAllSounds()},y.loadComplete=function(f){if(!y.isReady())return!1;var m=y._parsePath(f);return f=(m?y._getSrcById(m.src):y._getSrcById(f)).src,y._preloadHash[f]!=null&&y._preloadHash[f][0]==1},y._parsePath=function(f){typeof f!="string"&&(f=f.toString());var m=f.match(y.FILE_PATTERN);if(m==null)return!1;for(var D=m[4],J=m[5],se=y.capabilities,we=0;!se[J];)if(J=y.alternateExtensions[we++],we>y.alternateExtensions.length)return null;return{name:D,src:f=f.replace("."+m[5],"."+J),extension:J}},y._parseSrc=function(f){var m,D={name:void 0,src:void 0,extension:void 0},J=y.capabilities;for(m in f)if(f.hasOwnProperty(m)&&J[m]){D.src=f[m],D.extension=m;break}if(!D.src)return!1;var se=D.src.lastIndexOf("/");return D.name=se!=-1?D.src.slice(se+1):D.src,D},y.play=function(f,m){var D;return ee.WebAudioPlugin&&ee.WebAudioPlugin.context&&(console.log("audio context available"),(D=ee.WebAudioPlugin.context).state!=="interrupted"&&D.state!=="suspended"||D.resume()),m=ee.PlayPropsConfig.create(m),f=y.createInstance(f,m.startTime,m.duration),D&&(f.audioCtx=D),y._playInstance(f,m)||f._playFailed(),f},y.createInstance=function(f,m,D){if(!y.initializeDefaultPlugins())return new ee.DefaultSoundInstance(f,m,D);var J=y._defaultPlayPropsHash[f];f=y._getSrcById(f);var se=y._parsePath(f.src),we=null;return se!=null&&se.src!=null?(a.create(se.src),m==null&&(m=f.startTime),we=y.activePlugin.create(se.src,m,D||f.duration),(J=J||y._defaultPlayPropsHash[se.src])&&we.applyPlayProps(J)):we=new ee.DefaultSoundInstance(f,m,D),we.uniqueId=y._lastID++,we},y.stop=function(){for(var f=this._instances,m=f.length;m--;)f[m].stop()},y.setDefaultPlayProps=function(f,m){f=y._getSrcById(f),y._defaultPlayPropsHash[y._parsePath(f.src).src]=ee.PlayPropsConfig.create(m)},y.getDefaultPlayProps=function(f){return f=y._getSrcById(f),y._defaultPlayPropsHash[y._parsePath(f.src).src]},y._playInstance=function(f,m){var D=y._defaultPlayPropsHash[f.src]||{};if(m.interrupt==null&&(m.interrupt=D.interrupt||y.defaultInterruptBehavior),m.delay==null&&(m.delay=D.delay||0),m.offset==null&&(m.offset=f.position),m.loop==null&&(m.loop=f.loop),m.volume==null&&(m.volume=f.volume),m.pan==null&&(m.pan=f.pan),m.delay==0){if(!y._beginPlaying(f,m))return!1}else D=setTimeout(function(){y._beginPlaying(f,m)},m.delay),f.delayTimeoutId=D;return this._instances.push(f),!0},y._beginPlaying=function(f,m){return a.add(f,m.interrupt)?f._beginPlaying(m)?!0:(f=ee.indexOf(this._instances,f),-1<f&&this._instances.splice(f,1),!1):!1},y._getSrcById=function(f){return y._idHash[f]||{src:f}},y._playFinished=function(f){a.remove(f),f=ee.indexOf(this._instances,f),-1<f&&this._instances.splice(f,1)},ee.Sound=e,a.channels={},a.create=function(f,m){return a.get(f)==null&&(a.channels[f]=new a(f,m),!0)},a.removeSrc=function(f){var m=a.get(f);return m!=null&&(m._removeAll(),delete a.channels[f],!0)},a.removeAll=function(){for(var f in a.channels)a.channels[f]._removeAll();a.channels={}},a.add=function(f,m){var D=a.get(f.src);return D!=null&&D._add(f,m)},a.remove=function(f){var m=a.get(f.src);return m!=null&&(m._remove(f),!0)},a.maxPerChannel=function(){return u.maxDefault},a.get=function(f){return a.channels[f]};var u=a.prototype;u.constructor=a,u.src=null,u.max=null,u.maxDefault=100,u.length=0,u.init=function(f,m){this.src=f,this.max=m||this.maxDefault,this.max==-1&&(this.max=this.maxDefault),this._instances=[]},u._get=function(f){return this._instances[f]},u._add=function(f,m){return!!this._getSlot(m,f)&&(this._instances.push(f),this.length++,!0)},u._remove=function(f){return f=ee.indexOf(this._instances,f),f!=-1&&(this._instances.splice(f,1),this.length--,!0)},u._removeAll=function(){for(var f=this.length-1;0<=f;f--)this._instances[f].stop()},u._getSlot=function(f,m){var D,J;if(f!=e.INTERRUPT_NONE&&(J=this._get(0))==null)return!0;for(var se=0,we=this.max;se<we;se++){if((D=this._get(se))==null)return!0;if(D.playState==e.PLAY_FINISHED||D.playState==e.PLAY_INTERRUPTED||D.playState==e.PLAY_FAILED){J=D;break}f!=e.INTERRUPT_NONE&&(f==e.INTERRUPT_EARLY&&D.position<J.position||f==e.INTERRUPT_LATE&&D.position>J.position)&&(J=D)}return J!=null&&(J._interrupt(),this._remove(J),!0)},u.toString=function(){return"[Sound SoundChannel]"}}(),function(){"use strict";function e(a,u,f,m){this.EventDispatcher_constructor(),this.src=a,this.uniqueId=-1,this.playState=null,this.delayTimeoutId=null,this._volume=1,Object.defineProperty(this,"volume",{get:this._getVolume,set:this._setVolume}),this._pan=0,Object.defineProperty(this,"pan",{get:this._getPan,set:this._setPan}),this._startTime=Math.max(0,u||0),Object.defineProperty(this,"startTime",{get:this._getStartTime,set:this._setStartTime}),this._duration=Math.max(0,f||0),Object.defineProperty(this,"duration",{get:this._getDuration,set:this._setDuration}),this._playbackResource=null,Object.defineProperty(this,"playbackResource",{get:this._getPlaybackResource,set:this._setPlaybackResource}),m!==!1&&m!==!0&&this._setPlaybackResource(m),this._position=0,Object.defineProperty(this,"position",{get:this._getPosition,set:this._setPosition}),this._loop=0,Object.defineProperty(this,"loop",{get:this._getLoop,set:this._setLoop}),this._muted=!1,Object.defineProperty(this,"muted",{get:this._getMuted,set:this._setMuted}),this._paused=!1,Object.defineProperty(this,"paused",{get:this._getPaused,set:this._setPaused})}var y=ee.extend(e,ee.EventDispatcher);y.play=function(a){return a=ee.PlayPropsConfig.create(a),this.playState==ee.Sound.PLAY_SUCCEEDED?(this.applyPlayProps(a),void(this._paused&&this._setPaused(!1))):(this._cleanUp(),ee.Sound._playInstance(this,a),this)},y.stop=function(){return this._position=0,this._paused=!1,this._handleStop(),this._cleanUp(),this.playState=ee.Sound.PLAY_FINISHED,this},y.destroy=function(){this._cleanUp(),this.src=null,this.playbackResource=null,this.removeAllEventListeners()},y.applyPlayProps=function(a){return a.offset!=null&&this._setPosition(a.offset),a.loop!=null&&this._setLoop(a.loop),a.volume!=null&&this._setVolume(a.volume),a.pan!=null&&this._setPan(a.pan),a.startTime!=null&&(this._setStartTime(a.startTime),this._setDuration(a.duration)),this},y.toString=function(){return"[AbstractSoundInstance]"},y._getPaused=function(){return this._paused},y._setPaused=function(a){if(!(a!==!0&&a!==!1||this._paused==a||a==1&&this.playState!=ee.Sound.PLAY_SUCCEEDED))return(this._paused=a)?this._pause():this._resume(),clearTimeout(this.delayTimeoutId),this},y._setVolume=function(a){return a==this._volume||(this._volume=Math.max(0,Math.min(1,a)),this._muted||this._updateVolume()),this},y._getVolume=function(){return this._volume},y._setMuted=function(a){if(a===!0||a===!1)return this._muted=a,this._updateVolume(),this},y._getMuted=function(){return this._muted},y._setPan=function(a){return a==this._pan||(this._pan=Math.max(-1,Math.min(1,a)),this._updatePan()),this},y._getPan=function(){return this._pan},y._getPosition=function(){return this._paused||this.playState!=ee.Sound.PLAY_SUCCEEDED||(this._position=this._calculateCurrentPosition()),this._position},y._setPosition=function(a){return this._position=Math.max(0,a),this.playState==ee.Sound.PLAY_SUCCEEDED&&this._updatePosition(),this},y._getStartTime=function(){return this._startTime},y._setStartTime=function(a){return a==this._startTime||(this._startTime=Math.max(0,a||0),this._updateStartTime()),this},y._getDuration=function(){return this._duration},y._setDuration=function(a){return a==this._duration||(this._duration=Math.max(0,a||0),this._updateDuration()),this},y._setPlaybackResource=function(a){return this._playbackResource=a,this._duration==0&&this._playbackResource&&this._setDurationFromSource(),this},y._getPlaybackResource=function(){return this._playbackResource},y._getLoop=function(){return this._loop},y._setLoop=function(a){this._playbackResource!=null&&(this._loop!=0&&a==0?this._removeLooping(a):this._loop==0&&a!=0&&this._addLooping(a)),this._loop=a},y._sendEvent=function(a){a=new ee.Event(a),this.dispatchEvent(a)},y._cleanUp=function(){clearTimeout(this.delayTimeoutId),this._handleCleanUp(),this._paused=!1,ee.Sound._playFinished(this)},y._interrupt=function(){this._cleanUp(),this.playState=ee.Sound.PLAY_INTERRUPTED,this._sendEvent("interrupted")},y._beginPlaying=function(a){return this._setPosition(a.offset),this._setLoop(a.loop),this._setVolume(a.volume),this._setPan(a.pan),a.startTime!=null&&(this._setStartTime(a.startTime),this._setDuration(a.duration)),this._playbackResource!=null&&this._position<this._duration?(this._paused=!1,this._handleSoundReady(),this.playState=ee.Sound.PLAY_SUCCEEDED,this._sendEvent("succeeded"),!0):(this._playFailed(),!1)},y._playFailed=function(){this._cleanUp(),this.playState=ee.Sound.PLAY_FAILED,this._sendEvent("failed")},y._handleSoundComplete=function(a){if((this._position=0)!=this._loop)return this._loop--,this._handleLoop(),void this._sendEvent("loop");this._cleanUp(),this.playState=ee.Sound.PLAY_FINISHED,this._sendEvent("complete")},y._handleSoundReady=function(){},y._updateVolume=function(){},y._updatePan=function(){},y._updateStartTime=function(){},y._updateDuration=function(){},y._setDurationFromSource=function(){},y._calculateCurrentPosition=function(){},y._updatePosition=function(){},y._removeLooping=function(a){},y._addLooping=function(a){},y._pause=function(){},y._resume=function(){},y._handleStop=function(){},y._handleCleanUp=function(){},y._handleLoop=function(){},ee.AbstractSoundInstance=ee.promote(e,"EventDispatcher"),ee.DefaultSoundInstance=ee.AbstractSoundInstance}(),function(){"use strict";function e(){this._capabilities=null,this._loaders={},this._audioSources={},this._soundInstances={},this._volume=1,this._loaderClass,this._soundInstanceClass}var y=e.prototype;e._capabilities=null,e.isSupported=function(){return!0},y.register=function(a){var u=this._loaders[a.src];return u&&!u.canceled?this._loaders[a.src]:(this._audioSources[a.src]=!0,this._soundInstances[a.src]=[],(u=new this._loaderClass(a)).on("complete",this._handlePreloadComplete,this),this._loaders[a.src]=u)},y.preload=function(a){a.on("error",this._handlePreloadError,this),a.load()},y.isPreloadStarted=function(a){return this._audioSources[a]!=null},y.isPreloadComplete=function(a){return!(this._audioSources[a]==null||this._audioSources[a]==1)},y.removeSound=function(a){if(this._soundInstances[a]){for(var u=this._soundInstances[a].length;u--;)this._soundInstances[a][u].destroy();delete this._soundInstances[a],delete this._audioSources[a],this._loaders[a]&&this._loaders[a].destroy(),delete this._loaders[a]}},y.removeAllSounds=function(){for(var a in this._audioSources)this.removeSound(a)},y.create=function(a,u,f){return this.isPreloadStarted(a)||this.preload(this.register(a)),f=new this._soundInstanceClass(a,u,f,this._audioSources[a]),this._soundInstances[a]&&this._soundInstances[a].push(f),f.setMasterVolume&&f.setMasterVolume(ee.Sound.volume),f.setMasterMute&&f.setMasterMute(ee.Sound.muted),f},y.setVolume=function(a){return this._volume=a,this._updateVolume(),!0},y.getVolume=function(){return this._volume},y.setMute=function(a){return this._updateVolume(),!0},y.toString=function(){return"[AbstractPlugin]"},y._handlePreloadComplete=function(a){var u=a.target.getItem().src;this._audioSources[u]=a.result;for(var f=0,m=this._soundInstances[u].length;f<m;f++)this._soundInstances[u][f].setPlaybackResource(this._audioSources[u]),this._soundInstances[u]=null},y._handlePreloadError=function(a){},y._updateVolume=function(){},ee.AbstractPlugin=e}(),function(){"use strict";function e(a){this.AbstractLoader_constructor(a,!0,ee.Types.SOUND)}var y=ee.extend(e,ee.AbstractLoader);e.context=null,y.toString=function(){return"[WebAudioLoader]"},y._createRequest=function(){this._request=new ee.XHRRequest(this._item,!1),this._request.setResponseType("arraybuffer")},y._sendComplete=function(a){e.context.decodeAudioData(this._rawResult,ee.proxy(this._handleAudioDecoded,this),ee.proxy(this._sendError,this))},y._handleAudioDecoded=function(a){this._result=a,this.AbstractLoader__sendComplete()},ee.WebAudioLoader=ee.promote(e,"AbstractLoader")}(),function(){"use strict";function e(u,f,m,D){this.AbstractSoundInstance_constructor(u,f,m,D),this.gainNode=a.context.createGain(),this.panNode=a.context.createPanner(),this.panNode.panningModel=a._panningModel,this.panNode.connect(this.gainNode),this._updatePan(),this.sourceNode=null,this._soundCompleteTimeout=null,this._sourceNodeNext=null,this._playbackStartTime=0,this._endedHandler=ee.proxy(this._handleSoundComplete,this)}var y=ee.extend(e,ee.AbstractSoundInstance),a=e;a.context=null,a._scratchBuffer=null,a.destinationNode=null,a._panningModel="equalpower",y.destroy=function(){this.AbstractSoundInstance_destroy(),this.panNode.disconnect(0),this.panNode=null,this.gainNode.disconnect(0),this.gainNode=null},y.toString=function(){return"[WebAudioSoundInstance]"},y._updatePan=function(){this.panNode.setPosition(this._pan,0,-.5)},y._removeLooping=function(u){this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext)},y._addLooping=function(u){this.playState==ee.Sound.PLAY_SUCCEEDED&&(this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0))},y._setDurationFromSource=function(){this._duration=1e3*this.playbackResource.duration},y._handleCleanUp=function(){this.sourceNode&&this.playState==ee.Sound.PLAY_SUCCEEDED&&(this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext)),this.gainNode.numberOfOutputs!=0&&this.gainNode.disconnect(0),clearTimeout(this._soundCompleteTimeout),this._playbackStartTime=0},y._cleanUpAudioNode=function(u){if(u){if(u.stop(0),u.disconnect(0),ee.BrowserDetect.isIOS)try{u.buffer=a._scratchBuffer}catch(f){}u=null}return u},y._handleSoundReady=function(u){this.gainNode.connect(a.destinationNode);var f=.001*this._duration,m=Math.min(.001*Math.max(0,this._position),f);this.sourceNode=this._createAndPlayAudioNode(a.context.currentTime-f,m),this._playbackStartTime=this.sourceNode.startTime-m,this._soundCompleteTimeout=setTimeout(this._endedHandler,1e3*(f-m)),this._loop!=0&&(this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0))},y._createAndPlayAudioNode=function(u,f){var m=a.context.createBufferSource();m.buffer=this.playbackResource,m.connect(this.panNode);var D=.001*this._duration;return m.startTime=u+D,m.start(m.startTime,f+.001*this._startTime,D-f),m},y._pause=function(){this._position=1e3*(a.context.currentTime-this._playbackStartTime),this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext),this.gainNode.numberOfOutputs!=0&&this.gainNode.disconnect(0),clearTimeout(this._soundCompleteTimeout)},y._resume=function(){this._handleSoundReady()},y._updateVolume=function(){var u=this._muted?0:this._volume;u!=this.gainNode.gain.value&&(this.gainNode.gain.value=u)},y._calculateCurrentPosition=function(){return 1e3*(a.context.currentTime-this._playbackStartTime)},y._updatePosition=function(){this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext),clearTimeout(this._soundCompleteTimeout),this._paused||this._handleSoundReady()},y._handleLoop=function(){this._cleanUpAudioNode(this.sourceNode),this.sourceNode=this._sourceNodeNext,this._playbackStartTime=this.sourceNode.startTime,this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0),this._soundCompleteTimeout=setTimeout(this._endedHandler,this._duration)},y._updateDuration=function(){this.playState==ee.Sound.PLAY_SUCCEEDED&&(this._pause(),this._resume())},ee.WebAudioSoundInstance=ee.promote(e,"AbstractSoundInstance")}(),function(){"use strict";function e(){this.AbstractPlugin_constructor(),this._panningModel=a._panningModel,this.context=a.context,this.dynamicsCompressorNode=this.context.createDynamicsCompressor(),this.dynamicsCompressorNode.connect(this.context.destination),this.gainNode=this.context.createGain(),this.gainNode.connect(this.dynamicsCompressorNode),ee.WebAudioSoundInstance.destinationNode=this.gainNode,this._capabilities=a._capabilities,this._loaderClass=ee.WebAudioLoader,this._soundInstanceClass=ee.WebAudioSoundInstance,this._addPropsToClasses()}var y=ee.extend(e,ee.AbstractPlugin),a=e;a._capabilities=null,a._panningModel="equalpower",a.context=null,a._scratchBuffer=null,a._unlocked=!1,a.DEFAULT_SAMPLE_RATE=44100,a.isSupported=function(){var u=ee.BrowserDetect.isIOS||ee.BrowserDetect.isAndroid||ee.BrowserDetect.isBlackberry;return!(location.protocol=="file:"&&!u&&!this._isFileXHRSupported())&&(a._generateCapabilities(),a.context!=null)},a.playEmptySound=function(){var u;a.context!=null&&((u=a.context.createBufferSource()).buffer=a._scratchBuffer,u.connect(a.context.destination),u.start(0,0,0))},a._isFileXHRSupported=function(){return document.location.host},a._generateCapabilities=function(){if(a._capabilities==null){var u=document.createElement("audio");if(u.canPlayType==null||a.context==null&&(a.context=a._createAudioContext(),a.context==null))return null;a._scratchBuffer==null&&(a._scratchBuffer=a.context.createBuffer(1,1,22050)),a._compatibilitySetUp(),"ontouchstart"in window&&a.context.state!="running"&&(a._unlock(),document.addEventListener("mousedown",a._unlock,!0),document.addEventListener("touchstart",a._unlock,!0),document.addEventListener("touchend",a._unlock,!0)),a._capabilities={panning:!0,volume:!0,tracks:-1};for(var f=ee.Sound.SUPPORTED_EXTENSIONS,m=ee.Sound.EXTENSION_MAP,D=0,J=f.length;D<J;D++){var se=f[D],we=m[se]||se;a._capabilities[se]=u.canPlayType("audio/"+se)!="no"&&u.canPlayType("audio/"+se)!=""||u.canPlayType("audio/"+we)!="no"&&u.canPlayType("audio/"+we)!=""}a.context.destination.numberOfChannels<2&&(a._capabilities.panning=!1)}},a._createAudioContext=function(){var u=window.AudioContext||window.webkitAudioContext;if(u==null)return null;var f,m,D=new u;return console.warn("The AudioContext is ready"),/(iPhone|iPad)/i.test(navigator.userAgent)&&D.sampleRate!==a.DEFAULT_SAMPLE_RATE&&(f=D.createBuffer(1,1,a.DEFAULT_SAMPLE_RATE),(m=D.createBufferSource()).buffer=f,m.connect(D.destination),m.start(0),m.disconnect(),D.close(),D=new u),D},a._compatibilitySetUp=function(){var u;a._panningModel="equalpower",a.context.createGain||(a.context.createGain=a.context.createGainNode,(u=a.context.createBufferSource()).__proto__.start=u.__proto__.noteGrainOn,u.__proto__.stop=u.__proto__.noteOff,a._panningModel=0)},a._unlock=function(){a._unlocked||(a.playEmptySound(),a.context.state=="running"&&(document.removeEventListener("mousedown",a._unlock,!0),document.removeEventListener("touchend",a._unlock,!0),document.removeEventListener("touchstart",a._unlock,!0),a._unlocked=!0))},y.toString=function(){return"[WebAudioPlugin]"},y._addPropsToClasses=function(){var u=this._soundInstanceClass;u.context=this.context,u._scratchBuffer=a._scratchBuffer,u.destinationNode=this.gainNode,u._panningModel=this._panningModel,this._loaderClass.context=this.context},y._updateVolume=function(){var u=ee.Sound._masterMute?0:this._volume;u!=this.gainNode.gain.value&&(this.gainNode.gain.value=u)},ee.WebAudioPlugin=ee.promote(e,"AbstractPlugin")}(),function(){"use strict";function e(){throw"HTMLAudioTagPool cannot be instantiated"}var y=e;function a(f){this._tags=[]}y._tags={},y._tagPool=new a,y._tagUsed={},y.get=function(f){var m=y._tags[f];return m==null?(m=y._tags[f]=y._tagPool.get()).src=f:y._tagUsed[f]?(m=y._tagPool.get()).src=f:y._tagUsed[f]=!0,m},y.set=function(f,m){m==y._tags[f]?y._tagUsed[f]=!1:y._tagPool.set(m)},y.remove=function(f){var m=y._tags[f];return m!=null&&(y._tagPool.set(m),delete y._tags[f],delete y._tagUsed[f],!0)},y.getDuration=function(f){return f=y._tags[f],f!=null&&f.duration?1e3*f.duration:0},ee.HTMLAudioTagPool=e;var u=a.prototype;u.constructor=a,u.get=function(){var f=this._tags.length==0?this._createTag():this._tags.pop();return f.parentNode==null&&document.body.appendChild(f),f},u.set=function(f){ee.indexOf(this._tags,f)==-1&&(this._tags.src=null,this._tags.push(f))},u.toString=function(){return"[TagPool]"},u._createTag=function(){var f=document.createElement("audio");return f.autoplay=!1,f.preload="none",f}}(),function(){"use strict";function e(a,u,f,m){this.AbstractSoundInstance_constructor(a,u,f,m),this._audioSpriteStopTime=null,this._delayTimeoutId=null,this._endedHandler=ee.proxy(this._handleSoundComplete,this),this._readyHandler=ee.proxy(this._handleTagReady,this),this._stalledHandler=ee.proxy(this._playFailed,this),this._audioSpriteEndHandler=ee.proxy(this._handleAudioSpriteLoop,this),this._loopHandler=ee.proxy(this._handleSoundComplete,this),f?this._audioSpriteStopTime=.001*(u+f):this._duration=ee.HTMLAudioTagPool.getDuration(this.src)}var y=ee.extend(e,ee.AbstractSoundInstance);y.setMasterVolume=function(a){this._updateVolume()},y.setMasterMute=function(a){this._updateVolume()},y.toString=function(){return"[HTMLAudioSoundInstance]"},y._removeLooping=function(){this._playbackResource!=null&&(this._playbackResource.loop=!1,this._playbackResource.removeEventListener(ee.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},y._addLooping=function(){this._playbackResource==null||this._audioSpriteStopTime||(this._playbackResource.addEventListener(ee.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.loop=!0)},y._handleCleanUp=function(){var a=this._playbackResource;if(a!=null){a.pause(),a.loop=!1,a.removeEventListener(ee.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),a.removeEventListener(ee.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),a.removeEventListener(ee.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),a.removeEventListener(ee.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),a.removeEventListener(ee.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1);try{a.currentTime=this._startTime}catch(u){}ee.HTMLAudioTagPool.set(this.src,a),this._playbackResource=null}},y._beginPlaying=function(a){return this._playbackResource=ee.HTMLAudioTagPool.get(this.src),this.AbstractSoundInstance__beginPlaying(a)},y._handleSoundReady=function(a){if(this._playbackResource.readyState!==4){var u=this._playbackResource;return u.addEventListener(ee.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),u.addEventListener(ee.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),u.preload="auto",void u.load()}this._updateVolume(),this._playbackResource.currentTime=.001*(this._startTime+this._position),this._audioSpriteStopTime?this._playbackResource.addEventListener(ee.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1):(this._playbackResource.addEventListener(ee.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),this._loop!=0&&(this._playbackResource.addEventListener(ee.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.loop=!0)),this._playbackResource.play()},y._handleTagReady=function(a){this._playbackResource.removeEventListener(ee.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),this._playbackResource.removeEventListener(ee.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),this._handleSoundReady()},y._pause=function(){this._playbackResource.pause()},y._resume=function(){this._playbackResource.play()},y._updateVolume=function(){var a;this._playbackResource==null||(a=this._muted||ee.Sound._masterMute?0:this._volume*ee.Sound._masterVolume)!=this._playbackResource.volume&&(this._playbackResource.volume=a)},y._calculateCurrentPosition=function(){return 1e3*this._playbackResource.currentTime-this._startTime},y._updatePosition=function(){this._playbackResource.removeEventListener(ee.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.addEventListener(ee.HTMLAudioPlugin._AUDIO_SEEKED,this._handleSetPositionSeek,!1);try{this._playbackResource.currentTime=.001*(this._position+this._startTime)}catch(a){this._handleSetPositionSeek(null)}},y._handleSetPositionSeek=function(a){this._playbackResource!=null&&(this._playbackResource.removeEventListener(ee.HTMLAudioPlugin._AUDIO_SEEKED,this._handleSetPositionSeek,!1),this._playbackResource.addEventListener(ee.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},y._handleAudioSpriteLoop=function(a){this._playbackResource.currentTime<=this._audioSpriteStopTime||(this._playbackResource.pause(),this._loop==0?this._handleSoundComplete(null):(this._position=0,this._loop--,this._playbackResource.currentTime=.001*this._startTime,this._paused||this._playbackResource.play(),this._sendEvent("loop")))},y._handleLoop=function(a){this._loop==0&&(this._playbackResource.loop=!1,this._playbackResource.removeEventListener(ee.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},y._updateStartTime=function(){this._audioSpriteStopTime=.001*(this._startTime+this._duration),this.playState==ee.Sound.PLAY_SUCCEEDED&&(this._playbackResource.removeEventListener(ee.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),this._playbackResource.addEventListener(ee.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1))},y._updateDuration=function(){this._audioSpriteStopTime=.001*(this._startTime+this._duration),this.playState==ee.Sound.PLAY_SUCCEEDED&&(this._playbackResource.removeEventListener(ee.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),this._playbackResource.addEventListener(ee.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1))},y._setDurationFromSource=function(){this._duration=ee.HTMLAudioTagPool.getDuration(this.src),this._playbackResource=null},ee.HTMLAudioSoundInstance=ee.promote(e,"AbstractSoundInstance")}(),function(){"use strict";function e(){this.AbstractPlugin_constructor(),this._capabilities=a._capabilities,this._loaderClass=ee.SoundLoader,this._soundInstanceClass=ee.HTMLAudioSoundInstance}var y=ee.extend(e,ee.AbstractPlugin),a=e;a.MAX_INSTANCES=30,a._AUDIO_READY="canplaythrough",a._AUDIO_ENDED="ended",a._AUDIO_SEEKED="seeked",a._AUDIO_STALLED="stalled",a._TIME_UPDATE="timeupdate",a._capabilities=null,a.isSupported=function(){return a._generateCapabilities(),a._capabilities!=null},a._generateCapabilities=function(){if(a._capabilities==null){var u=document.createElement("audio");if(u.canPlayType==null)return null;a._capabilities={panning:!1,volume:!0,tracks:-1};for(var f=ee.Sound.SUPPORTED_EXTENSIONS,m=ee.Sound.EXTENSION_MAP,D=0,J=f.length;D<J;D++){var se=f[D],we=m[se]||se;a._capabilities[se]=u.canPlayType("audio/"+se)!="no"&&u.canPlayType("audio/"+se)!=""||u.canPlayType("audio/"+we)!="no"&&u.canPlayType("audio/"+we)!=""}}},y.register=function(m){var f=ee.HTMLAudioTagPool.get(m.src),m=this.AbstractPlugin_register(m);return m.setTag(f),m},y.removeSound=function(u){this.AbstractPlugin_removeSound(u),ee.HTMLAudioTagPool.remove(u)},y.create=function(u,f,m){return m=this.AbstractPlugin_create(u,f,m),m.playbackResource=null,m},y.toString=function(){return"[HTMLAudioPlugin]"},y.setVolume=y.getVolume=y.setMute=null,ee.HTMLAudioPlugin=ee.promote(e,"AbstractPlugin")}(),function(){"use strict";function e(a){this.EventDispatcher_constructor(),this.ignoreGlobalPause=!1,this.loop=0,this.useTicks=!1,this.reversed=!1,this.bounce=!1,this.timeScale=1,this.duration=0,this.position=0,this.rawPosition=-1,this._paused=!0,this._next=null,this._prev=null,this._parent=null,this._labels=null,this._labelList=null,this._status=-1,this._lastTick=0,a&&(this.useTicks=!!a.useTicks,this.ignoreGlobalPause=!!a.ignoreGlobalPause,this.loop=a.loop===!0?-1:a.loop||0,this.reversed=!!a.reversed,this.bounce=!!a.bounce,this.timeScale=a.timeScale||1,a.onChange&&this.addEventListener("change",a.onChange),a.onComplete&&this.addEventListener("complete",a.onComplete))}var y=ee.extend(e,ee.EventDispatcher);y._setPaused=function(a){return ee.Tween._register(this,a),this},y.setPaused=ee.deprecate(y._setPaused,"AbstractTween.setPaused"),y._getPaused=function(){return this._paused},y.getPaused=ee.deprecate(y._getPaused,"AbstactTween.getPaused"),y._getCurrentLabel=function(a){var u=this.getLabels();a==null&&(a=this.position);for(var f=0,m=u.length;f<m&&!(a<u[f].position);f++);return f===0?null:u[f-1].label},y.getCurrentLabel=ee.deprecate(y._getCurrentLabel,"AbstractTween.getCurrentLabel");try{Object.defineProperties(y,{paused:{set:y._setPaused,get:y._getPaused},currentLabel:{get:y._getCurrentLabel}})}catch(a){}y.advance=function(a,u){this.setPosition(this.rawPosition+a*this.timeScale,u)},y.setPosition=function(a,u,f,m){var D=this.duration,J=this.loop,se=this.rawPosition,we=0,Te=0,t=!1;if(a<0&&(a=0),D===0){if(t=!0,se!==-1)return t}else{if(Te=a-(we=a/D|0)*D,(t=J!==-1&&J*D+D<=a)&&(a=(Te=D)*(we=J)+D),a===se)return t;!this.reversed!=!(this.bounce&&we%2)&&(Te=D-Te)}this.position=Te,this.rawPosition=a,this._updatePosition(f,t),t&&(this.paused=!0),m&&m(this),u||this._runActions(se,a,f,!f&&se===-1),this.dispatchEvent("change"),t&&this.dispatchEvent("complete")},y.calculatePosition=function(a){var u=this.duration,f=this.loop,m=0,D=0;return u===0?0:(f!==-1&&f*u+u<=a?(D=u,m=f):D=a<0?0:a-(m=a/u|0)*u,!this.reversed!=!(this.bounce&&m%2)?u-D:D)},y.getLabels=function(){var a=this._labelList;if(!a){a=this._labelList=[];var u,f=this._labels;for(u in f)a.push({label:u,position:f[u]});a.sort(function(m,D){return m.position-D.position})}return a},y.setLabels=function(a){this._labels=a,this._labelList=null},y.addLabel=function(a,u){this._labels||(this._labels={}),this._labels[a]=u;var f=this._labelList;if(f){for(var m=0,D=f.length;m<D&&!(u<f[m].position);m++);f.splice(m,0,{label:a,position:u})}},y.gotoAndPlay=function(a){this.paused=!1,this._goto(a)},y.gotoAndStop=function(a){this.paused=!0,this._goto(a)},y.resolve=function(a){var u=Number(a);return isNaN(u)&&(u=this._labels&&this._labels[a]),u},y.toString=function(){return"[AbstractTween]"},y.clone=function(){throw"AbstractTween can not be cloned."},y._init=function(a){a&&a.paused||(this.paused=!1),a&&a.position!=null&&this.setPosition(a.position)},y._updatePosition=function(a,u){},y._goto=function(a){a=this.resolve(a),a!=null&&this.setPosition(a,!1,!0)},y._runActions=function(a,u,f,m){if(this._actionHead||this.tweens){var D,J,se,we,Te=this.duration,t=this.reversed,r=this.bounce,i=this.loop;if(Te===0?(D=J=se=we=0,t=r=!1):(se=a-(D=a/Te|0)*Te,we=u-(J=u/Te|0)*Te),i!==-1&&(i<J&&(we=Te,J=i),i<D&&(se=Te,D=i)),f)return this._runActionsRange(we,we,f,m);if(D!==J||se!==we||f||m){D===-1&&(D=se=0);var o=a<=u,l=D;do{var c=!t!=!(r&&l%2),p=l===D?se:o?0:Te,v=l===J?we:o?Te:0;if(c&&(p=Te-p,v=Te-v),(!r||l===D||p!==v)&&this._runActionsRange(p,v,f,m||l!==D&&!r))return!0}while(m=!1,o&&++l<=J||!o&&--l>=J)}}},y._runActionsRange=function(a,u,f,m){},ee.AbstractTween=ee.promote(e,"EventDispatcher")}(),function(){"use strict";function e(f,m){this.AbstractTween_constructor(m),this.pluginData=null,this.target=f,this.passive=!1,this._stepHead=new a(null,0,0,{},null,!0),this._stepTail=this._stepHead,this._stepPosition=0,this._actionHead=null,this._actionTail=null,this._plugins=null,this._pluginIds=null,this._injected=null,m&&(this.pluginData=m.pluginData,m.override&&e.removeTweens(f)),this.pluginData||(this.pluginData={}),this._init(m)}var y=ee.extend(e,ee.AbstractTween);function a(f,m,D,J,se,we){this.next=null,this.prev=f,this.t=m,this.d=D,this.props=J,this.ease=se,this.passive=we,this.index=f?f.index+1:0}function u(f,m,D,J,se){this.next=null,this.prev=f,this.t=m,this.d=0,this.scope=D,this.funct=J,this.params=se}e.IGNORE={},e._tweens=[],e._plugins=null,e._tweenHead=null,e._tweenTail=null,e._inTick=0,e.get=function(f,m){return new e(f,m)},e.tick=function(f,m){for(var D=e._tweenHead,J=e._inTick=Date.now();D;){var se=D._next,we=D._status;D._lastTick=J,we===1?D._status=0:we===-1?e._delist(D):m&&!D.ignoreGlobalPause||D._paused||D.advance(D.useTicks?1:f),D=se}e._inTick=0},e.handleEvent=function(f){f.type==="tick"&&this.tick(f.delta,f.paused)},e.removeTweens=function(f){if(f.tweenjs_count){for(var m=e._tweenHead;m;){var D=m._next;m.target===f&&e._register(m,!0),m=D}f.tweenjs_count=0}},e.removeAllTweens=function(){for(var f=e._tweenHead;f;){var m=f._next;f._paused=!0,f.target&&(f.target.tweenjs_count=0),f._next=f._prev=null,f=m}e._tweenHead=e._tweenTail=null},e.hasActiveTweens=function(f){return f?!!f.tweenjs_count:!!e._tweenHead},e._installPlugin=function(f){for(var m=f.priority=f.priority||0,D=e._plugins=e._plugins||[],J=0,se=D.length;J<se&&!(m<D[J].priority);J++);D.splice(J,0,f)},e._register=function(f,m){var D,J=f.target;!m&&f._paused?(J&&(J.tweenjs_count=J.tweenjs_count?J.tweenjs_count+1:1),(D=e._tweenTail)?(e._tweenTail=D._next=f)._prev=D:e._tweenHead=e._tweenTail=f,f._status=e._inTick?1:0,!e._inited&&ee.Ticker&&(ee.Ticker.addEventListener("tick",e),e._inited=!0)):m&&!f._paused&&(J&&J.tweenjs_count--,e._inTick&&f._lastTick!==e._inTick||e._delist(f),f._status=-1),f._paused=m},e._delist=function(f){var m=f._next,D=f._prev;m?m._prev=D:e._tweenTail=D,D?D._next=m:e._tweenHead=m,f._next=f._prev=null},y.wait=function(f,m){return 0<f&&this._addStep(+f,this._stepTail.props,null,m),this},y.to=function(f,m,D){return(m==null||m<0)&&(m=0),D=this._addStep(+m,null,D),this._appendProps(f,D),this},y.label=function(f){return this.addLabel(f,this.duration),this},y.call=function(f,m,D){return this._addAction(D||this.target,f,m||[this])},y.set=function(f,m){return this._addAction(m||this.target,this._set,[f])},y.play=function(f){return this._addAction(f||this,this._set,[{paused:!1}])},y.pause=function(f){return this._addAction(f||this,this._set,[{paused:!0}])},y.w=y.wait,y.t=y.to,y.c=y.call,y.s=y.set,y.toString=function(){return"[Tween]"},y.clone=function(){throw"Tween can not be cloned."},y._addPlugin=function(f){var m=this._pluginIds||(this._pluginIds={}),D=f.ID;if(D&&!m[D]){m[D]=!0;for(var J=this._plugins||(this._plugins=[]),se=f.priority||0,we=0,Te=J.length;we<Te;we++)if(se<J[we].priority)return void J.splice(we,0,f);J.push(f)}},y._updatePosition=function(f,m){var D=this._stepHead.next,J=this.position,se=this.duration;if(this.target&&D){for(var we=D.next;we&&we.t<=J;)we=(D=D.next).next;se=m?se===0?1:J/se:(J-D.t)/D.d,this._updateTargetProps(D,se,m)}this._stepPosition=D?J-D.t:0},y._updateTargetProps=function(f,m,D){if(!(this.passive=!!f.passive)){var J,se,we,Te,t=f.prev.props,r=f.props;(Te=f.ease)&&(m=Te(m,0,1,1));var i=this._plugins;e:for(var o in t){if(J=(se=t[o])!==(we=r[o])&&typeof se=="number"?se+(we-se)*m:1<=m?we:se,i)for(var l=0,c=i.length;l<c;l++){var p=i[l].change(this,f,o,J,m,D);if(p===e.IGNORE)continue e;p!==void 0&&(J=p)}this.target[o]=J}}},y._runActionsRange=function(f,m,D,J){var se=m<f,we=se?this._actionTail:this._actionHead,Te=m,t=f;se&&(Te=f,t=m);for(var r=this.position;we;){var i=we.t;if((i===m||t<i&&i<Te||J&&i===f)&&(we.funct.apply(we.scope,we.params),r!==this.position))return!0;we=se?we.prev:we.next}},y._appendProps=function(f,m,D){var J,se,we,Te,t=this._stepHead.props,r=this.target,i=e._plugins,o=m.prev,l=o.props,c=m.props||(m.props=this._cloneProps(l)),p={};for(J in f)if(f.hasOwnProperty(J)&&(p[J]=c[J]=f[J],t[J]===void 0)){if(Te=void 0,i){for(se=i.length-1;0<=se;se--)if((we=i[se].init(this,J,Te))!==void 0&&(Te=we),Te===e.IGNORE){delete c[J],delete p[J];break}}Te!==e.IGNORE&&(Te===void 0&&(Te=r[J]),l[J]=Te===void 0?null:Te)}for(J in p){we=f[J];for(var v,w=o;(v=w)&&(w=v.prev);)if(w.props!==v.props){if(w.props[J]!==void 0)break;w.props[J]=l[J]}}if(D!==!1&&(i=this._plugins))for(se=i.length-1;0<=se;se--)i[se].step(this,m,p);(D=this._injected)&&(this._injected=null,this._appendProps(D,m,!1)),this.step=m},y._injectProp=function(f,m){(this._injected||(this._injected={}))[f]=m},y._addStep=function(f,m,D,J){return J=new a(this._stepTail,this.duration,f,m,D,J||!1),this.duration+=f,this._stepTail=this._stepTail.next=J},y._addAction=function(f,m,D){return D=new u(this._actionTail,this.duration,f,m,D),this._actionTail?this._actionTail.next=D:this._actionHead=D,this._actionTail=D,this},y._set=function(f){for(var m in f)this[m]=f[m]},y._cloneProps=function(f){var m,D={};for(m in f)D[m]=f[m];return D},ee.Tween=ee.promote(e,"AbstractTween")}(),function(){"use strict";function e(a){var u,f;a instanceof Array||a==null&&1<arguments.length?(u=a,f=arguments[1],a=arguments[2]):a&&(u=a.tweens,f=a.labels),this.AbstractTween_constructor(a),this.tweens=[],u&&this.addTween.apply(this,u),this.setLabels(f),this._init(a)}var y=ee.extend(e,ee.AbstractTween);y.addTween=function(a){a._parent&&a._parent.removeTween(a);var u=arguments.length;if(1<u){for(var f=0;f<u;f++)this.addTween(arguments[f]);return arguments[u-1]}if(u===0)return null;this.tweens.push(a),a._parent=this,a.paused=!0;var m=a.duration;return 0<a.loop&&(m*=a.loop+1),m>this.duration&&(this.duration=m),0<=this.rawPosition&&a.setPosition(this.rawPosition),a},y.removeTween=function(a){var u=arguments.length;if(1<u){for(var f=!0,m=0;m<u;m++)f=f&&this.removeTween(arguments[m]);return f}if(u===0)return!0;for(var D=this.tweens,m=D.length;m--;)if(D[m]===a)return D.splice(m,1),a._parent=null,a.duration>=this.duration&&this.updateDuration(),!0;return!1},y.updateDuration=function(){for(var a=this.duration=0,u=this.tweens.length;a<u;a++){var f=this.tweens[a],m=f.duration;0<f.loop&&(m*=f.loop+1),m>this.duration&&(this.duration=m)}},y.toString=function(){return"[Timeline]"},y.clone=function(){throw"Timeline can not be cloned."},y._updatePosition=function(a,u){for(var f=this.position,m=0,D=this.tweens.length;m<D;m++)this.tweens[m].setPosition(f,!0,a)},y._runActionsRange=function(a,u,f,m){for(var D=this.position,J=0,se=this.tweens.length;J<se;J++)if(this.tweens[J]._runActions(a,u,f,m),D!==this.position)return!0},ee.Timeline=ee.promote(e,"AbstractTween")}(),function(){"use strict";function e(){throw"Ease cannot be instantiated."}e.none=e.linear=function(y){return y},e.get=function(y){return y<-1?y=-1:1<y&&(y=1),function(a){return y==0?a:y<0?a*(a*-y+1+y):a*((2-a)*y+(1-y))}},e.getPowIn=function(y){return function(a){return Math.pow(a,y)}},e.getPowOut=function(y){return function(a){return 1-Math.pow(1-a,y)}},e.getPowInOut=function(y){return function(a){return(a*=2)<1?.5*Math.pow(a,y):1-.5*Math.abs(Math.pow(2-a,y))}},e.quadIn=e.getPowIn(2),e.quadOut=e.getPowOut(2),e.quadInOut=e.getPowInOut(2),e.cubicIn=e.getPowIn(3),e.cubicOut=e.getPowOut(3),e.cubicInOut=e.getPowInOut(3),e.quartIn=e.getPowIn(4),e.quartOut=e.getPowOut(4),e.quartInOut=e.getPowInOut(4),e.quintIn=e.getPowIn(5),e.quintOut=e.getPowOut(5),e.quintInOut=e.getPowInOut(5),e.sineIn=function(y){return 1-Math.cos(y*Math.PI/2)},e.sineOut=function(y){return Math.sin(y*Math.PI/2)},e.sineInOut=function(y){return-.5*(Math.cos(Math.PI*y)-1)},e.backIn=(e.getBackIn=function(y){return function(a){return a*a*((y+1)*a-y)}})(1.7),e.backOut=(e.getBackOut=function(y){return function(a){return--a*a*((y+1)*a+y)+1}})(1.7),e.backInOut=(e.getBackInOut=function(y){return y*=1.525,function(a){return(a*=2)<1?a*a*((y+1)*a-y)*.5:.5*((a-=2)*a*((y+1)*a+y)+2)}})(1.7),e.circIn=function(y){return-(Math.sqrt(1-y*y)-1)},e.circOut=function(y){return Math.sqrt(1- --y*y)},e.circInOut=function(y){return(y*=2)<1?-.5*(Math.sqrt(1-y*y)-1):.5*(Math.sqrt(1-(y-=2)*y)+1)},e.bounceIn=function(y){return 1-e.bounceOut(1-y)},e.bounceOut=function(y){return y<1/2.75?7.5625*y*y:y<2/2.75?7.5625*(y-=1.5/2.75)*y+.75:y<2.5/2.75?7.5625*(y-=2.25/2.75)*y+.9375:7.5625*(y-=2.625/2.75)*y+.984375},e.bounceInOut=function(y){return y<.5?.5*e.bounceIn(2*y):.5*e.bounceOut(2*y-1)+.5},e.elasticIn=(e.getElasticIn=function(y,a){var u=2*Math.PI;return function(f){if(f==0||f==1)return f;var m=a/u*Math.asin(1/y);return-(y*Math.pow(2,10*--f)*Math.sin((f-m)*u/a))}})(1,.3),e.elasticOut=(e.getElasticOut=function(y,a){var u=2*Math.PI;return function(f){if(f==0||f==1)return f;var m=a/u*Math.asin(1/y);return y*Math.pow(2,-10*f)*Math.sin((f-m)*u/a)+1}})(1,.3),e.elasticInOut=(e.getElasticInOut=function(y,a){var u=2*Math.PI;return function(f){var m=a/u*Math.asin(1/y);return(f*=2)<1?y*Math.pow(2,10*--f)*Math.sin((f-m)*u/a)*-.5:y*Math.pow(2,-10*--f)*Math.sin((f-m)*u/a)*.5+1}})(1,.3*1.5),ee.Ease=e}(),function(){"use strict";function e(){throw"MotionGuidePlugin cannot be instantiated."}var y=e;y.priority=0,y.ID="MotionGuide",y.install=function(){return ee.Tween._installPlugin(e),ee.Tween.IGNORE},y.init=function(a,u,f){u=="guide"&&a._addPlugin(y)},y.step=function(a,u,f){for(var m in f)if(m==="guide"){var D=u.props.guide,J=y._solveGuideData(f.guide,D);D.valid=!J;var se=D.endData;if(a._injectProp("x",se.x),a._injectProp("y",se.y),J||!D.orient)break;if(J=u.prev.props.rotation===void 0?a.target.rotation||0:u.prev.props.rotation,D.startOffsetRot=J-D.startData.rotation,D.orient=="fixed")D.endAbsRot=se.rotation+D.startOffsetRot,D.deltaRotation=0;else{var se=f.rotation===void 0?a.target.rotation||0:f.rotation,we=se-D.endData.rotation-D.startOffsetRot,Te=we%360;switch(D.endAbsRot=se,D.orient){case"auto":D.deltaRotation=we;break;case"cw":D.deltaRotation=(360+Te)%360+360*Math.abs(we/360|0);break;case"ccw":D.deltaRotation=(Te-360)%360+-360*Math.abs(we/360|0)}}a._injectProp("rotation",D.endAbsRot)}},y.change=function(a,u,f,m,D,J){var se=u.props.guide;if(se&&u.props!==u.prev.props&&se!==u.prev.props.guide)return f==="guide"&&!se.valid||f=="x"||f=="y"||f==="rotation"&&se.orient?ee.Tween.IGNORE:void y._ratioToPositionData(D,se,a.target)},y.debug=function(a,u,f){a=a.guide||a;var m=y._findPathProblems(a);if(m&&console.error("MotionGuidePlugin Error found: \n"+m),!u)return m;var D=a.path,J=D.length;for(u.save(),u.lineCap="round",u.lineJoin="miter",u.beginPath(),u.moveTo(D[0],D[1]),t=2;t<J;t+=4)u.quadraticCurveTo(D[t],D[t+1],D[t+2],D[t+3]);u.strokeStyle="black",u.lineWidth=4.5,u.stroke(),u.strokeStyle="white",u.lineWidth=3,u.stroke(),u.closePath();var se=f.length;if(f&&se){var we={},Te={};y._solveGuideData(a,we);for(var t=0;t<se;t++)we.orient="fixed",y._ratioToPositionData(f[t],we,Te),u.beginPath(),u.moveTo(Te.x,Te.y),u.lineTo(Te.x+9*Math.cos(.0174533*Te.rotation),Te.y+9*Math.sin(.0174533*Te.rotation)),u.strokeStyle="black",u.lineWidth=4.5,u.stroke(),u.strokeStyle="red",u.lineWidth=3,u.stroke(),u.closePath()}return u.restore(),m},y._solveGuideData=function(S,u){if(E=y.debug(S))return E;var f=u.path=S.path;u.orient=S.orient,u.subLines=[],u.totalLength=0,u.startOffsetRot=0,u.deltaRotation=0,u.startData={ratio:0},u.endData={ratio:1},u.animSpan=1;for(var m,D,J,se,we=f.length,Te={},t=f[0],r=f[1],i=2;i<we;i+=4){m=f[i],D=f[i+1],J=f[i+2],se=f[i+3];for(var o={weightings:[],estLength:0,portion:0},l=t,c=r,p=1;p<=10;p++){y._getParamsForCurve(t,r,m,D,J,se,p/10,!1,Te);var v=Te.x-l,w=Te.y-c,b=Math.sqrt(v*v+w*w);o.weightings.push(b),o.estLength+=b,l=Te.x,c=Te.y}for(u.totalLength+=o.estLength,p=0;p<10;p++)b=o.estLength,o.weightings[p]=o.weightings[p]/b;u.subLines.push(o),t=J,r=se}b=u.totalLength;var _=u.subLines.length;for(i=0;i<_;i++)u.subLines[i].portion=u.subLines[i].estLength/b;var E=isNaN(S.start)?0:S.start,S=isNaN(S.end)?1:S.end;y._ratioToPositionData(E,u,u.startData),y._ratioToPositionData(S,u,u.endData),u.startData.ratio=E,u.endData.ratio=S,u.animSpan=u.endData.ratio-u.startData.ratio},y._ratioToPositionData=function(a,u,f){for(var m,D,J,se=u.subLines,we=0,Te=a*u.animSpan+u.startData.ratio,t=se.length,r=0;r<t;r++){if(Te<=we+(D=se[r].portion)){J=r;break}we+=D}J===void 0&&(J=t-1,we-=D);var i=se[J].weightings,o=D;for(t=i.length,r=0;r<t&&!(Te<=we+(D=i[r]*o));r++)we+=D;J=4*J+2,m=r/10+(Te-we)/D*.1;var l=u.path;return y._getParamsForCurve(l[J-2],l[J-1],l[J],l[J+1],l[J+2],l[J+3],m,u.orient,f),u.orient&&(.99999<=a&&a<=1.00001&&u.endAbsRot!==void 0?f.rotation=u.endAbsRot:f.rotation+=u.startOffsetRot+a*u.deltaRotation),f},y._getParamsForCurve=function(a,u,f,m,D,J,se,we,Te){var t=1-se;Te.x=t*t*a+2*t*se*f+se*se*D,Te.y=t*t*u+2*t*se*m+se*se*J,we&&(Te.rotation=57.2957795*Math.atan2((m-u)*t+(J-m)*se,(f-a)*t+(D-f)*se))},y._findPathProblems=function(a){var u=a.path,f=u&&u.length||0;if(f<6||(f-2)%4){var m="	Cannot parse 'path' array due to invalid number of entries in path. ";return m+="There should be an odd number of points, at least 3 points, and 2 entries per point (x & y). ",m+="See 'CanvasRenderingContext2D.quadraticCurveTo' for details as 'path' models a quadratic bezier.\n\n",m+="Only [ "+f+" ] values found. Expected: "+Math.max(4*Math.ceil((f-2)/4)+2,6)}for(var D=0;D<f;D++)if(isNaN(u[D]))return"All data in path array must be numeric";return m=a.start,isNaN(m)&&m!==void 0?"'start' out of bounds. Expected 0 to 1, got: "+m:(m=a.end,isNaN(m)&&m!==void 0?"'end' out of bounds. Expected 0 to 1, got: "+m:(a=a.orient,a&&a!="fixed"&&a!="auto"&&a!="cw"&&a!="ccw"?'Invalid orientation value. Expected ["fixed", "auto", "cw", "ccw", undefined], got: '+a:void 0))},ee.MotionGuidePlugin=e}(),function(){"use strict";var e=ee.TweenJS=ee.TweenJS||{};e.version="NEXT",e.buildDate="Thu, 14 Sep 2017 22:19:45 GMT"}(),kn.createjs=kn.createjs||{},function(){"use strict";function e(){throw"CSSPlugin cannot be instantiated."}var y=e;function a(u,f){for(var m,D,J,se=[!1,u];m=y.TRANSFORM_RE.exec(u);)m[3]!=="*"?(D=[m[1]],J=f&&f[se.length],!f||J&&D[0]===J[0]||(console.log("transforms don't match: ",D[0],J&&J[0]),f=null),function(we,Te,t){for(;;){var r=y.TRANSFORM_VALUE_RE.exec(we);if(!r)return;(t=t||[]).push(+r[1],r[2]),Te&&Te[t.length-1]!==r[2]&&(console.log("transform units don't match: ",t[0],Te[t.length-1],r[2]),Te=null)}}(m[2],J,D),se.push(D)):se.push(f[se.length]);return se[0]=!!f,se}y.priority=100,y.ID="CSS",y.VALUE_RE=/^(-?[\d.]+)([a-z%]*)$/,y.TRANSFORM_VALUE_RE=/(?:^| |,)(-?[\d.]+)([a-z%]*)/g,y.TRANSFORM_RE=/(\w+?)\(([^)]+)\)|(?:^| )(\*)(?:$| )/g,y.compute=!1,y.install=function(){ee.Tween._installPlugin(e)},y.init=function(u,f,m){var D=u.pluginData;if(!D.CSS_disabled&&u.target instanceof HTMLElement){var J,se=m||(J=u.target,se=f,((m=D.CSS_compute)||m==null&&y.compute?window.getComputedStyle(J):J.style)[se]);if(se!==void 0)return u._addPlugin(e),u=D.CSS||(D.CSS={}),f==="transform"?(u[f]="_t",a(se)):(D=y.VALUE_RE.exec(se),D===null?(u[f]="",se):(u[f]=D[2],parseFloat(D[1])))}},y.step=function(u,f,m){m.transform&&(f.props.transform=a(f.props.transform,f.prev.props.transform))},y.change=function(u,f,m,D,J,se){var we=u.pluginData.CSS[m];if(we!==void 0)return m==="transform"?D=function(Te,t,r){if(r===1)return t[1];if(r===0||!t[0])return Te[1];for(var i,o,l="",c=Te.length,p=2;p<c;p++){var v=Te[p],w=t[p];for(l+=v[0]+"(",i=1,o=v.length;i<o;i+=2)l+=v[i]+(w[i]-v[i])*r,l+=w[i+1]||v[i+1],i<o-2&&(l+=", ");l+=")",p<c-1&&(l+=" ")}return l}(f.prev.props[m],f.props[m],J):D+=we,u.target.style[m]=D,ee.Tween.IGNORE},ee.CSSPlugin=y}(),ee.CSSPlugin.install(),kn.createjs=kn.createjs||{},function(){"use strict";function e(){throw"DotPlugin cannot be instantiated."}var y=e;y.priority=100,y.ID="Dot",y.install=function(){ee.Tween._installPlugin(e)},y.init=function(a,u,f){var m=a.pluginData;if(!m.Dot_disabled&&u[0]==="."){a._addPlugin(e);for(var D=a.target,J=u.split("."),se=1,we=J.length;se<we-1;se++)if(!(D=D[J[se]]))return ee.Tween.IGNORE;var Te=J[se],a=D[Te],f=f===void 0?a:f;return m.Dot=m.Dot||{},m.Dot[u]={t:D,n:Te},f}},y.step=function(a,u,f){},y.change=function(we,u,f,m,D,J){var se,we=we.pluginData.Dot;if(we&&(se=we[f]))return se.t[se.n]=m,ee.Tween.IGNORE},ee.DotPlugin=y}(),kn.createjs=kn.createjs||{},function(){"use strict";function e(){throw"RelativePlugin plugin cannot be instantiated."}var y=e;y.ID="Relative",y.install=function(){ee.Tween._installPlugin(e)},y.init=function(a,u,f){a.pluginData.Relative_disabled||a._addPlugin(y)},y.step=function(a,u,f){for(var m in f){var D,J,se=f[m];typeof se=="string"&&(D=u.prev.props[m],(J=se[0])!=="+"&&J!=="-"||isNaN(se=+se+D)||(u.props[m]=se))}},y.change=function(a,u,f,m,D,J){},ee.RelativePlugin=y}(),ee.DotPlugin.install(),ee.RelativePlugin.install(),window.addEventListener("DOMContentLoaded",function(){var e=document.createElement("style");e.innerHTML="canvas {-webkit-tap-highlight-color: transparent;}",document.body.appendChild(e)});window.createjs=ee;ur.exports=function(){return ee}});var _i=ui(Fr(),1),le=window||{},$e=le.createjs,Mt=le.zns,Ct=le.zon==null?!0:le.zon,Cn,Nn=Ct?console.log.bind(console):function(){},Wn=" border:thin solid black; color: black",Wr=Ct?console.log.bind(console,"%c Z ","background: #acd241;"+Wn):function(){},fi=Ct?console.log.bind(console,"%c Z ","background: #e472c4;"+Wn):function(){},qr=Ct?console.log.bind(console,"%c Z ","background: #50c4b7;"+Wn):function(){},Qr=Ct?console.log.bind(console,"%c Z ","background: #fb4758;"+Wn):function(){},lt=Ct?console.log.bind(console,"%c Z ","background: #ebcb35;"+Wn):function(){},Zr=Ct?console.log.bind(console,"%c Z ","background: #f58e25;"+Wn):function(){},wr=Ct?console.log.bind(console,"%c Z ","background: #eeeeee;"+Wn):function(){},Tr=Ct?console.log.bind(console,"%c Z ","background: #444444; border:thin solid black; color: white"):function(){};function vn(e){return He("1"),document.getElementById(e)}function ci(e){if(He("2"),document.getElementById(e))return document.getElementById(e).style;Ct&&lt("zss(): id not found")}function nr(e,y,a,u,f,m){if(He("3"),n(y)&&y!=""||y=="_self")le.location.href=e;else{var D="";return a&&(D+="width="+a+","),u&&(D+="height="+u+","),f&&(D+="fullscreen=yes,"),m&&(D+="modal=yes,alwaysRaised=yes"),le.open(e,y,D)}}function Fn(e){if(He("4"),!n(e))return Number(String(e).replace(/[^\d.-]/g,""))}function n(e){return e==null}function hi(e){He("5"),!n(e)&&(e.stopImmediatePropagation&&e.stopImmediatePropagation(),le.event&&(le.event.cancelBubble=!0))}function kr(){return He("6"),le.zilK&&(le.removeEventListener("keydown",le.zilK),le.removeEventListener("wheel",le.zilW),le.removeEventListener("DOMMouseScroll",le.zilS)),le.zilK=function(e){e||(e=event),e.keyCode&&e.keyCode>=32&&e.keyCode<=40&&e.preventDefault()},le.zilW=function(e){e||(e=event),e.preventDefault()},le.zilS=le.zilW,le.addEventListener("keydown",le.zilK,{passive:!1}),le.addEventListener("wheel",le.zilW,{passive:!1}),le.addEventListener("DOMMouseScroll",le.zilS,{passive:!1}),[le.zilK,le.zilW,le.zilS]}function cr(e,y){He("6.1");function a(){var u=this;this.on=function(f,m){if(!(n(e)||n(f)||n(m)))for(var D=u.tags,J=0;J<D.length;J++)D[J].addEventListener(f,m)},this.off=function(f,m){if(!(n(e)||n(f)||n(m)))for(var D=u.tags,J=0;J<D.length;J++)D[J].removeEventListener(f,m)},Object.defineProperty(u,"tags",{get:function(){return n(e)?[]:typeof e=="string"||e instanceof String?(y&&Zr(e,document.querySelector(e)),y?[document.querySelector(e)]:document.querySelectorAll(e)):typeof e.innerHTML=="string"?[e]:[]},set:function(){}}),this.css=function(f,m){for(var D=u.tags,J=0;J<D.length;J++)if(arguments.length==1&&arguments[0].constructor==={}.constructor)for(var se in f)D[J].style[se]=f[se];else{if(arguments.length==1)return u.tags[0].style[f];D[J].style[f]=m}},this.prop=function(f,m){if(!n(f)){for(var D=u.tags,J=[],se=0;se<D.length;se++)if(n(m))if(f.constructor==={}.constructor)for(var we in f)D[se][we]=f[we];else J.push(D[se][f]);else D[se][f]=m;if(n(m))return J}}}return new a}function hn(e){return e.length==1&&e[0]!=null&&e[0].constructor==={}.constructor}function vt(e,y,a,u){var f=Ee&&(Ee.ZIMONON||Jr);if(hn(y)){He("7");var m=y[0],D;for(var J in m)(D=J.match(/^(.+)gColor$/))&&(m[D[1]+"ackgroundColor"]=m[J],delete m[J]);var se=n(a)?e.toString().split(/\n/,1)[0].match(/\((.*)\)/)[1].replace(/\s+/g,"").split(","):a.replace(/\s+/g,"").split(","),we=[],Te,t;for(Te=0;Te<se.length;Te++)t=se[Te].split("=")[0],se[Te]=t,we.push(m[t]);for(Te in m)se.indexOf(Te)<0&&Ct&&lt(e,"bad argument "+Te);var r;return(r=Object.prototype.isPrototypeOf.call(e.prototype,u)?new(e.bind.apply(e,[null].concat(we))):e.apply(null,we))?(f&&!r.arguments&&(r.arguments=[m]),r):!0}else f&&u&&y&&n(u.arguments)&&(u.arguments=Array.prototype.slice.call(y))}function ct(e){if(He("7.5"),He("17.6"),!n(e))return Ee.Pick.choose(e)}var di=console.table&&Ct?console.table.bind(console):function(){},pi=function(){for(var e=0;e<arguments.length;e++)if(!n(arguments[e]))return arguments[e]},Ee=function(e){e.chop=function(t,r,i,o,l,c){if(He("7.8"),!n(t)){n(r)&&(r=3),n(i)&&(i=3),n(o)&&(o=!0),n(l)&&(l=0),n(c)&&(c=1),t.getBounds||(t=new e.Bitmap(t));var p=t.getBounds();n(p)&&lt("ZIM chop() - obj must have bounds");var v=p.width/r,w=p.height/i,b=l,_=[];return e.loop(i,function(E){e.loop(r,function(S){var P=new e.Bitmap(t,v+b*2,w+b*2,S*v-b,E*w-b,c);l!=0?(P.setBounds(b,b,v,w),P.regX=b,P.regY=b):P.setBounds(b,b,v,w),_.push(P)})}),o?new e.Tile(_,r,i,0,0,!0).sca(t.scaleX,t.scaleY):_}},e.shuffle=function(t,r){if(He("8"),!n(t)){Array.isArray(t)||(t=Object.values(arguments));var i=t.length,o,l;if(i==0)return t;if(r){for(var c=e.copy(t);e.arraysEqual(c,t);)e.shuffle(t);return t}else{for(;--i;)o=Math.floor(Math.random()*(i+1)),l=t[i],t[i]=t[o],t[o]=l;return t}}},e.pluck=function(t,r){if(He("9.26"),n(t)||t.length==0)return null;Array.isArray(t)||(t=Object.values(arguments));var i=Math.floor(Math.random()*t.length),o=t[i];return r&&t.splice(i,1),o},e.rand=function(t,r,i,o){if(He("9"),n(t)&&n(r))return Math.random();(n(t)||isNaN(t))&&(t=0),(n(r)||isNaN(r))&&(r=0),(t%1!=0||r%1!=0)&&(i=!1),n(i)&&(i=!0),o&&Math.random()>.5&&(t*=-1,r*=-1),i&&(t>r?t++:r>t&&r++);var l;return t==0&&r==0?0:(r==0?l=Math.random()*t:l=Math.min(t,r)+Math.random()*(Math.max(t,r)-Math.min(t,r)),i?Math.floor(l):l)},e.seedRandom=function(t){return He("9.01"),function(r,i,o,l,c,p,v,w,b){function _(Y){var W,G=Y.length,F=this,B=0,q=F.i=F.j=0,Z=F.S=[];for(G||(Y=[G++]);l>B;)Z[B]=B++;for(B=0;l>B;B++)Z[B]=Z[q=C&q+Y[B%G]+(W=Z[B])],Z[q]=W;(F.g=function(X){for(var ne,$=0,re=F.i,de=F.j,Q=F.S;X--;)ne=Q[re=C&re+1],$=$*l+Q[C&(Q[re]=Q[de=C&de+ne])+(Q[de]=ne)];return F.i=re,F.j=de,$})(l)}function E(Y,W){var G,F=[],B=typeof Y;if(W&&B=="object")for(G in Y)try{F.push(E(Y[G],W-1))}catch(q){+function(){}()}return F.length?F:B=="string"?Y:Y+"\0"}function S(Y,W){for(var G,F=Y+"",B=0;B<F.length;)W[C&B]=C&(G^=19*W[C&B])+F.charCodeAt(B++);return A(W)}function P(Y){try{return R?A(R.randomBytes(l)):(r.crypto.getRandomValues(Y=new Uint8Array(l)),A(Y))}catch(W){return[+new Date,r,(Y=r.navigator)&&Y.plugins,r.screen,A(i)]}}function A(Y){return String.fromCharCode.apply(0,Y)}var R,T=o.pow(l,c),L=o.pow(2,p),I=2*L,C=l-1,k=o["seed"+b]=function(Y,W,G){var F=[];W=W==1?{entropy:!0}:W||{};var B=S(E(W.entropy?[Y,A(i)]:Y==null?P():Y,3),F),q=new _(F);return S(A(q.S),i),(W.pass||G||function(Z,X,ne){return ne?(o[b]=Z,X):Z})(function(){for(var Z=q.g(c),X=T,ne=0;L>Z;)Z=(Z+ne)*l,X*=l,ne=q.g(1);for(;Z>=I;)Z/=2,X/=2,ne>>>=1;return(Z+ne)/X},B,"global"in W?W.global:this==o)};if(S(o[b](),i),v&&v.exports){v.exports=k;try{R=ai("crypto")}catch(Y){}}else w&&w.amd&&w(function(){return k})}(this,[],Math,256,6,52,typeof module=="object"&&module,typeof define=="function"&&define,"random"),e.randomO||(e.randomO=Math.random),n(t)?Math.random=e.randomO:Math.seedrandom(t),t},e.odds=function(t){return He("9.1"),(n(t)||isNaN(t))&&(t=50),Math.random()<=t/100},e.rarity=function(t,r,i,o){if(He("9.2"),n(t)||t.constructor!={}.constructor)return[];n(r)&&(r=!0),n(i)&&(i=!0),n(o)&&(o=!1);var l=[];return e.loop(t,function(c,p){var v=e.colors.indexOf(c);v!=-1&&(c=e.colorsHex[v]);var w;Array.isArray(p)?(+c==+c?c=new Number(c):c=new String(c),c._payload=p[1],c.dynamicPayload=o,Object.defineProperty(c,"payload",{get:function(){return!this.dynamicPayload&&this._lastPayload!=null?this._lastPayload:(this._lastPayload=e.Pick.choose(this._payload),this._lastPayload)},set:function(b){this._lastPayload=null,this._payload=b}}),w=p[0],e.loop(w,function(){l.push(c)})):(w=p,e.loop(w,function(){+c==+c&&(c=+c),l.push(c)}))}),r&&e.shuffle(l),l},e.repeats=function(t,r){if(He("9.25"),n(t)||!Array.isArray(t))return 0;var i={},o=0,l=0;return e.loop(t,function(c){i[c]!=null?(i[c]++,l++):i[c]=0,i[c]>o&&(o=i[c])}),r?l:o},e.series=function(){He("13.61");var t,r;if(arguments.length==0)return function(){};arguments.length==1&&Array.isArray(arguments[0])?t=arguments[0]:arguments.length==1&&arguments[0].constructor=={}.constructor?(r=arguments[0],n(r.min)&&(r.min=0),n(r.max)&&(r.max=1),n(r.step)&&(r.step=1),t=[],e.loop(Math.floor(Math.abs(r.max-r.min)+r.step),function(T){t.push(T+r.min)},null,null,r.step),r=null):t=Array.prototype.slice.call(arguments);var i=0,o=1,l=1,c=0,p=0,v=!1,w=!1,b=!1,_=!1,E=!1,S,P,A=function(T,L){if(c&&p%c!=0)return p++,P;p++;var I=t.length,C;if((_||E)&&i%I==0&&e.shuffle(t),C=t[(I*10+i)%I],i==0&&(S=C),E&&i%I==0&&I>1)for(;C==P;)e.shuffle(t),C=t[(I*10+i)%I];return v?o>0&&i+o*l>=I?(o=-1,i=I-1-(i+l-(I-1))):o<0&&i+o*l<0?(o=1,i=l-i):i+=o*l:w?o>0&&i+o*l>=I?(o=-1,i=I-1-(i+l-(I-1))+l):o<0&&i+o*l<0?(o=1,i=l-i-l):i+=o*l:b?o>0&&i+o*l>=I?i=I-1:o<0&&i+o*l<0?i=0:i+=o*l:i+=o*l,P=C,e.isPick(C)?C.noPick&&L?C:e.Pick.choose(C):C},R=A.original=e.copy(t);return A.array=t,A.type="series",Object.defineProperty(A,"index",{get:function(){var T=t.length;return(T*10+i)%T},set:function(T){i=T,p=0}}),Object.defineProperty(A,"length",{get:function(){return t.length},set:function(){}}),A.jump=function(T){return i=T,A},A.reverse=function(T){return n(T)&&(T=!0),T?o=-1:o=1,i=t.length-1,A},A.bounce=function(T){n(T)&&(T=!0);var L=t.length;return i=(L*10+i)%L,v=T,A},A.flip=function(T){n(T)&&(T=!0);var L=t.length;return i=(L*10+i)%L,w=T,A},A.step=function(T){return n(T)&&(T=1),l=Math.floor(T),A},A.every=function(T){return n(T)&&(T=1),c=Math.abs(T),p=0,A},A.constrain=function(T){return n(T)&&(T=!0),b=T,A},A.random=function(T){return n(T)&&(T=!0),T||(t=R),_=T==!0,A},A.mix=function(T){return n(T)&&(T=!0),T||(t=R),E=T==!0,A},A.shuffle=function(T){return n(T)&&(T=!0),T?e.shuffle(t):t=R,A},A},e.makeSeries=function(t){if(He("13.6"),n(t))return function(){};var r=0,i=function(){return t[r++%t.length]};return i.array=t,i},e.loop=function(t,r,i,o,l,c,p,v){var w="obj, call, reverse, interval, step, start, end, immediate",b;if(b=vt(e.loop,arguments,w))return b;if(He("9.5"),n(t)||n(r))return;n(i)&&(i=!1),n(o)&&(o=0),(n(l)||l<=0)&&(l=1),n(v)&&(v=!0),t.constructor===Number&&(t=Number(t)),t.constructor===String&&(t=String(t));var _=typeof t=="number"?"number":t.constructor===Array?"array":t.constructor==={}.constructor?"object":typeof t=="string"?"string":t instanceof NodeList?"nodelist":t instanceof HTMLCollection?"htmlcollection":t.type&&t.type=="Dictionary"?"Dictionary":"invalid";if(_=="invalid")return;var E,S,P,A;if(_=="number"||_=="string"||_=="array"||_=="nodelist"||_=="htmlcollection"||_=="Dictionary"){if(_=="Dictionary"){var R=e.copy(t.values);t=e.copy(t.objects)}if(E=_=="number"?t:t.length,S=L(E-1),S==0)return;if(i)if(o===0){for(P=c;P>=p;P-=l)if(_=="number"?A=r(P,S,c,p,t):_=="array"||_=="string"?A=r(t[P],P,S,c,p,t):_=="Dictionary"?A=r(t[P],R[P],P,S,c,p,t):A=r(t.item(P),P,S,c,p,t),typeof A<"u"&&A!="next")return A}else e.interval(o,function(I){if(P=I.count,v||P--,l&&(P*=l),P=c-P,_=="number"?A=r(P,S,c,p,t):_=="array"||_=="string"?A=r(t[P],P,S,c,p,t):_=="Dictionary"?A=r(t[P],R[P],P,S,c,p,t):A=r(t.item(P),P,S,c,p,t),A=="next")I.next();else if(typeof A<"u")return I.clear(),A},S,v);else if(o===0){for(P=c;P<=p;P+=l)if(_=="number"?A=r(P,S,c,p,t):_=="array"||_=="string"?A=r(t[P],P,S,c,p,t):_=="Dictionary"?A=r(t[P],R[P],P,S,c,p,t):A=r(t.item(P),P,S,c,p,t),typeof A<"u"&&A!="next")return A}else e.interval(o,function(I){if(P=I.count,v||P--,l&&(P*=l),_=="number"?A=r(P,S,c,p,t,I):_=="array"||_=="string"?A=r(t[P],P,S,c,p,t,I):_=="Dictionary"?A=r(t[P],R[P],P,S,c,p,t):A=r(t.item(P),P,S,c,p,t,I),A=="next")I.next();else if(typeof A<"u")return I.clear(),A},S,v);return!0}else if(_=="object"){E=0;var T=[];for(P in t)E++,T.push(P);if(S=L(E-1),S==0)return;if(i)if(o===0){for(P=c;P>=p;P-=l)if(A=r(T[P],t[T[P]],P,S,c,p,t),typeof A<"u")return A}else e.interval(o,function(I){if(P=I.count,v||P--,l&&(P*=l),P=c-P,A=r(T[P],t[T[P]],P,S,c,p,t),A=="next")I.next();else if(typeof A<"u")return I.clear(),A},S,v);else if(o===0){for(P=c;P<=p;P+=l)if(A=r(T[P],t[T[P]],P,S,c,p,t),typeof A<"u")return A}else e.interval(o,function(I){if(P=I.count,v||P--,l&&(P*=l),A=r(T[P],t[T[P]],P,S,c,p,t),A=="next")I.next();else if(typeof A<"u")return I.clear(),A},S,v);return!0}function L(I){return n(c)&&(c=i?I:0),n(p)&&(p=i?0:I),i&&p>c||!i&&c>p||(c<0&&p)<0||c>I&&p>I?0:(c=Math.max(0,Math.min(c,I)),p=Math.max(0,Math.min(p,I)),Math.floor((i?c-p:p-c)/l)+1)}};function y(t,r,i,o,l){e.timeCheck||(He("9.99"),e.timeCheck=!0);var c=n(le.TIME)?n(e.TIME)?"seconds":e.TIME:le.TIME;return c&&c.toLowerCase&&(c=c.toLowerCase()),c!="milliseconds"&&c!="ms"&&(c="seconds"),r&&r.toLowerCase&&(r=r.toLowerCase()),(r=="ms"||r=="milliseconds"||r=="seconds"||r=="s")&&(c=r),n(t)?c.charAt(0):(c=="ms"&&(c="milliseconds"),c=="s"&&(c="seconds"),c=c.charAt(0),l||a(t,c,i,o),c)}function a(t,r,i,o){n(i)&&(i=10),n(o)&&(o=9),!(!e.TIMECHECK&&!le.TIMECHECK)&&(r!="m"&&t>i||r=="m"&&t<o)&&Ct&&lt("TIME - warning: time is in "+(r=="m"?"milliseconds":"seconds")+" ("+t+")")}if(e.timeout=function(t,r,i,o){var l="time, call, pauseOnBlur, timeUnit",c;if(c=vt(e.timeout,arguments,l,this))return c;if(He("9.7"),!n(r)&&typeof r=="function"){var p=e.interval(t,r,1,!1,i,o);return p.type="timeoutObj",p}},e.interval=function(t,r,i,o,l,c){var p="time, call, total, immediate, pauseOnBlur, timeUnit",v;if(v=vt(e.interval,arguments,p,this))return v;if(He("9.8"),n(r)||typeof r!="function")return;var w=y(t,c);if(n(t)&&(t=w=="s"?1:1e3),n(o)&&(o=!1),!n(i)&&(isNaN(i)||i<=0))return;n(i)&&(i=-1);var b={count:0,total:i,paused:!1,time:t,active:!0,timeUnit:c};l&&(n(e.blurCheck)&&e.setBlurDetect(),e.pauseOnBlur.push(b));function _(){b.startTime=Date.now(),b.interval=e.Pick.choose(b.time),b.id=setTimeout(function(){b.paused||b.active&&(b.count++,r(b),_(),E())},b.interval*(w=="s"?1e3:1))}o&&setTimeout(function(){r(b),E()},10);function E(){i!=-1&&b.count>=(o?b.total-1:b.total)&&b.clear()}var S;return b.type="intervalOjbect",b.pause=function(P,A,R){n(P)&&(P=!0),P?(clearTimeout(S),clearTimeout(b.id),cancelAnimationFrame(b.rid),b.pauseTimeLeft=b.interval-(Date.now()-b.startTime)/(w=="s"?1e3:1)):(b.paused||b.pause(!0),S=setTimeout(function(){b.count++,r(b),_(),E()},A?0:(R?b.interval:b.pauseTimeLeft)*(w=="s"?1e3:1)),b.pauseTimeLeft=null),b.paused=P},b.next=function(){b.count++,r(b),E()},b.clear=function(){b.active=!1,clearTimeout(S),cancelAnimationFrame(b.rid),clearTimeout(b.id);var P=b.count;for(var A in b)delete b[A];b.active=!1,b.count=P,b.pause=function(){},b.clear=function(){}},_(),b},e.async=function(t,r,i,o,l){if(He("29"),!n(t)){var c=document.createElement("script"),p=y(o);n(o)&&(o=p=="s"?2:2e3);var v;r?(i?v=i:v=r.toString().split(/\n/,1)[0].match(/^function\s?([^\s(]*)/)[1],e.asyncList||(e.asyncList={}),e.asyncList[v]||(e.asyncList[v]=[]),e.asyncList[v].push(r),e.async[v]=function(){var w=c,b=!1,_=setTimeout(function(){b=l,typeof r=="function"&&r("asyncError",l?"cancelled":"timeout")},o*(p=="s"?1e3:1));return function(E){clearTimeout(_),e.asyncList[v]&&(r=e.asyncList[v].shift()),typeof r=="function"&&!b&&r(E),w&&w.parentNode.removeChild(w),w=null}}()):(e.async.z_s&&e.async.z_s.parentNode&&e.async.z_s.parentNode.removeChild(e.async.z_s),e.async.z_s=c),t.match(/\?/)||(t+="?"),c.setAttribute("src",t+"&r="+Math.random()),document.getElementsByTagName("head")[0].appendChild(c)}},e.couple=function(t){if(He("29.2"),!e.isJSON(t))return t;var r=JSON.parse(t),i={};for(var o in r){var l=r[o];for(var c in l)i[o+"_"+c]=l[c]}return JSON.stringify(i)},e.decouple=function(t){if(He("29.3"),!e.isJSON(t))return t;var r=JSON.parse(t),i={};for(var o in r){var l=o.split("_",2);if(l.length!=2)return t;i[l[0]]||(i[l[0]]={}),i[l[0]][l[1]]=r[o]}return JSON.stringify(i)},e.convertColor=function(t,r,i){if(e.convertColorCheck||(He("27.5"),e.convertColorCheck=!0),n(r)&&(r="hex"),n(t)||!t.toLowerCase)return;t=ct(t),t=t.toLowerCase(),r=r.toLowerCase();var o=["black","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgrey","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgrey","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],l=["000000","f0f8ff","faebd7","00ffff","7fffd4","f0ffff","f5f5dc","ffe4c4","ffebcd","0000ff","8a2be2","a52a2a","deb887","5f9ea0","7fff00","d2691e","ff7f50","6495ed","fff8dc","dc143c","00ffff","00008b","008b8b","b8860b","a9a9a9","a9a9a9","006400","bdb76b","8b008b","556b2f","ff8c00","9932cc","8b0000","e9967a","8fbc8f","483d8b","2f4f4f","2f4f4f","00ced1","9400d3","ff1493","00bfff","696969","696969","1e90ff","b22222","fffaf0","228b22","ff00ff","dcdcdc","f8f8ff","ffd700","daa520","808080","808080","008000","adff2f","f0fff0","ff69b4","cd5c5c","4b0082","fffff0","f0e68c","e6e6fa","fff0f5","7cfc00","fffacd","add8e6","f08080","e0ffff","fafad2","d3d3d3","d3d3d3","90ee90","ffb6c1","ffa07a","20b2aa","87cefa","778899","778899","b0c4de","ffffe0","00ff00","32cd32","faf0e6","ff00ff","800000","66cdaa","0000cd","ba55d3","9370db","3cb371","7b68ee","00fa9a","48d1cc","c71585","191970","f5fffa","ffe4e1","ffe4b5","ffdead","000080","fdf5e6","808000","6b8e23","ffa500","ff4500","da70d6","eee8aa","98fb98","afeeee","db7093","ffefd5","ffdab9","cd853f","ffc0cb","dda0dd","b0e0e6","800080","663399","ff0000","bc8f8f","4169e1","8b4513","fa8072","f4a460","2e8b57","fff5ee","a0522d","c0c0c0","87ceeb","6a5acd","708090","708090","fffafa","00ff7f","4682b4","d2b48c","008080","d8bfd8","ff6347","40e0d0","ee82ee","f5deb3","ffffff","f5f5f5","ffff00","9acd32"];if(r=="zim"){var c=e.colorsHex.indexOf(t);return c<0?t:e.colors[e.colorsHex.indexOf(t)]}r=="hsv"&&r=="hsl";var p,v;if(p=t.match(/rgba\((.*)\)/)){v=p[1].split(",");var w=v.pop();if(n(i)&&(i=w),r=="array")return v.push(w),v;if(t="rgb("+v.join(",")+")",r=="rgb")return t;if(r=="hsl")return E(v[0],v[1],v[2])}function b(I){var C=Number(I).toString(16);return C.length<2&&(C="0"+C),C}function _(I,C,k,Y,W){return(W-Y)*(I-C)/(k-C)+Y}function E(I,C,k){I/=255,C/=255,k/=255;let Y=Math.max(I,C,k),W=Y-Math.min(I,C,k),G=W?Y===I?(C-k)/W:Y===C?2+(k-I)/W:4+(I-C)/W:0;return[60*G<0?60*G+360:60*G,100*(W?Y<=.5?W/(2*Y-W):W/(2-(2*Y-W)):0),100*(2*Y-W)/2]}function S(I){var C=I.split(","),k=b(C[0]),Y=b(C[1]),W=b(C[2]),G=n(G)?"":b(Math.round(Number(C[3])*255));return[k,Y,W,G]}n(i)&&(i=1);var P,A,R;if(p=t.match(/rgb\((.*)\)/))return r=="rgba"?"rgba("+p[1]+","+i+")":r=="hex"?(P=i!=1?","+i:"",A=S(p[1]+P),"#"+A[0]+A[1]+A[2]+A[3]):r=="hexnumber"?(P=i!=1?","+i:0,A=S(p[1]+P),parseInt(A[0]+""+A[1]+A[2],16)):r=="string"?(t=S(p[1]).join("").toLowerCase(),R=l.indexOf(t),R==-1?"#"+t:o[R]):r=="array"?(P=i!=1?","+i:0,S(p[1]+P)):r=="hsl"?(v=p[1].split(","),E(v[0],v[1],v[2])):t;function T(I){var C;return/^#([A-Fa-f0-9]{3}){1,2}$/.test(I)?(C=I.substring(1).split(""),C.length==3&&(C=[C[0],C[0],C[1],C[1],C[2],C[2]]),C="0x"+C.join(""),r=="rgb"?"rgb("+[C>>16&255,C>>8&255,C&255]+")":r=="array"?[C>>16&255,C>>8&255,C&255,i]:"rgba("+[C>>16&255,C>>8&255,C&255].join(",")+","+i+")"):/^#([A-Fa-f0-9]{4}){1,2}$/.test(I)?(C=I.substring(1).split(""),C.length==8&&(i=C.slice(-2).join(""),C=C.slice(0,6)),C.length==4&&(i=C[3]+""+C[3],C=[C[0],C[0],C[1],C[1],C[2],C[2]]),i=parseInt(i,16)/255,C="0x"+C.join(""),r=="rgb"?"rgb("+[C>>16&255,C>>8&255,C&255]+")":"rgba("+[C>>16&255,C>>8&255,C&255].join(",")+","+i+")"):r=="rgb"?"rgb(0,0,0)":"rgba(0,0,0,1)"}if(r=="hsl")return e.convertColor(e.convertColor(t,"rgb"),"hsl");if(r=="array"||r=="rgb"||r=="rgba")return t.charAt(0)=="#"?T(t):T(e.convertColor(t));if(r=="hex"){if(t.charAt(0)=="#")if(i!=1)if(P=b(Math.round(i*255)),t.length==4||t.length==5){var L=t.split("");return L[1]=L[1]+""+L[1],L[2]=L[2]+""+L[2],L[3]=L[3]+""+L[3],L[4]=P,L.join("")}else return t.length==9?t.substring(0,o.length-2)+P:t+P;else return t}else if(r=="hexnumber"){if(t.charAt(0)=="#")return parseInt(t.replace(/^#/,""),16)}else t.charAt(0)=="#"&&(t=t.replace("#",""),t.length==3&&(t=t.charAt(0)+t.charAt(0)+t.charAt(1)+t.charAt(1)+t.charAt(2)+t.charAt(2)));return r=="string"?(R=l.indexOf(t),R==-1?"#"+t:o[R]):r=="hexnumber"?parseInt(l[o.indexOf(t.toLowerCase())!=-1?o.indexOf(t):0],16):(P=i!=1?b(Math.round(i*255)):"","#"+l[o.indexOf(t.toLowerCase())!=-1?o.indexOf(t):0]+P)},e.colorRange=function(t,r,i){e.colorRangeCheck||(He("27.6"),e.colorRangeCheck=!0),n(i)&&(i=.5),i=Math.max(0,Math.min(1,i)),n(t)&&(t="white"),n(r)&&(r="black");var o=t,l=r,c=e.convertColor(t,"rgb"),p=e.convertColor(r,"rgb");t=c.substring(4,c.length-1).split(","),r=p.substring(4,p.length-1).split(",");var v,w="#",b;if(i==0)w=o;else if(i==1)w=l;else for(var _=0;_<t.length;_++)v=r[_]-t[_],b=Math.floor(parseInt(t[_],10)+v*i).toString(16),b.length<2&&(b="0"+b),w+=b;return w},e.lighten=function(t,r){return e.lightenCheck||(He("27.65"),e.lightenCheck=!0),n(r)&&(r=.5),r>=0?e.colorRange(String(t),"#FFFFFF",r):e.colorRange(String(t),"#000000",-r)},e.darken=function(t,r){return n(r)&&(r=.5),e.darkenCheck||(He("27.66"),e.darkenCheck=!0),r>=0?e.colorRange(String(t),"#000000",r):e.colorRange(String(t),"#ffffff",-r)},e.toColor=function(t,r,i){return e.toColorCheck||(He("27.67"),e.toColorCheck=!0),n(i)&&(i=.5),e.colorRange(String(t),r,i)},e.toAlpha=function(t,r){return e.toAlphaCheck||(He("27.68"),e.toAlphaCheck=!0),n(r)&&(r=.5),e.convertColor(String(t),"rgba",r)},e.toBW=function(t){if(t.indexOf("#")===0&&(t=t.slice(1)),t.length===3&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),t.length!==6)return lt("ZIM toBW() - needs hex input"),t;var r=parseInt(t.slice(0,2),16),i=parseInt(t.slice(2,4),16),o=parseInt(t.slice(4,6),16);return r*.299+i*.587+o*.114>186?"#000000":"#FFFFFF"},e.invertColor=function(t){if(e.invertColorCheck||(He("27.86"),e.invertColorCheck=!0),t.indexOf("#")===0&&(t=t.slice(1)),t.length===3&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),t.length!==6)return lt("ZIM invertColor() - needs hex input"),t;var r=parseInt(t.slice(0,2),16),i=parseInt(t.slice(2,4),16),o=parseInt(t.slice(4,6),16);r=(255-r).toString(16),i=(255-i).toString(16),o=(255-o).toString(16);function l(c,p){p=p||2;var v=new Array(p).join("0");return(v+c).slice(-p)}return"#"+l(r)+l(i)+l(o)},e.zimEase=function(t,r,i,o,l){He("27.69");var c=!1;n(l)&&(l=!0);var p,v,w,b,_,E,S,P,A,R,T,L,I,C,k,Y,W,G;if(t){if(Array.isArray(t[1])){c=!0,G=t[1],t=t[0];var F=0,B=G[0],q=G[1],Z=G[2],X=G[3],ne=1,$=5*(B-F),re=10*(q-F)-4*$,de=10*(Z-F)+30*(B-q),Q=5*(X+F)-20*(Z+B)+30*q,U=ne-F-Q-de-re-$}p=0,v=t[0],w=t[1],b=t[2],_=t[3],E=1,S=5*(v-p),P=10*(w-p)-4*S,A=10*(b-p)+30*(v-w),R=5*(_+p)-20*(b+v)+30*w,T=E-p-R-A-P-S}else r?(T=r[0],R=r[1],A=r[2],P=r[3],S=r[4],v=S/5,w=(P+4*S)/10,b=(A+6*S+3*P)/10,_=(R+4*S+3*P+2*A)/5):(T=0,R=0,A=0,P=0,S=1);return i?(Y=function(){return e.zimEase(null,[T,R,A,P,S],!0)},W={reverse:Y,points:[v,w,b,_],polynomials:[T,R,A,P,S]},W.noPick=function(g){if(l){if(g<.025)return 0;if(g>.975)return 1}return g<.5?(g*=2,L=g*100,I=100,C=(L/=I)*L,k=C*L,(T*k*C+R*C*C+A*k+P*C+S*L)/2):(g=1-(g-.5)*2,L=g*100,I=100,C=(L/=I)*L,k=C*L,1-(T*k*C+R*C*C+A*k+P*C+S*L)/2)}):c?(Y=function(){return Ct&&lt("zimEase - multi array points cannot be reversed"),e.zimEase(null,[T,R,A,P,S])},W={reverse:Y,points:[[v,w,b,_],[B,q,Z,X]],polynomials:[[T,R,A,P,S],[U,Q,de,re,$]]},W.noPick=function(g){if(l){if(g<.025)return 0;if(g>.975)return 1}return g<.5?(g*=2,L=g*100,I=100,C=(L/=I)*L,k=C*L,(T*k*C+R*C*C+A*k+P*C+S*L)/2):(g=(g-.5)*2,L=g*100,I=100,C=(L/=I)*L,k=C*L,.5+(U*k*C+Q*C*C+de*k+re*C+$*L)/2)}):(Y=function(){return e.zimEase(null,[T,R,A,P,S],null,!0)},W={reverse:Y,points:[v,w,b,_],polynomials:[T,R,A,P,S]},o?W.noPick=function(g){if(l){if(g<.025)return 0;if(g>.975)return 1}return L=100-g*100,I=100,C=(L/=I)*L,k=C*L,1-(T*k*C+R*C*C+A*k+P*C+S*L)}:W.noPick=function(g){if(l){if(g<.025)return 0;if(g>.975)return 1}return L=g*100,I=100,C=(L/=I)*L,k=C*L,T*k*C+R*C*C+A*k+P*C+S*L}),W.noPick.reverse=Y,W},e.spline=function(t,r,i,o,l){He("27.695"),n(t)&&(t=[]),n(r)&&(r=1),n(i)&&(i=!1),n(l)&&(l=i);var c;function p(X,ne){if(!Array.isArray(X[0]))for(c=0;c<X.length;c++)X[c]=[X[c].x,X[c].y];if(ne){var $=X[X.length-1],re=X[X.length-2],de=X[0],Q=X[1];X.unshift($),X.unshift(re),X.push(de),X.push(Q)}var U=[];for(c=0;c<X.length;c++)U.push(X[c][0],X[c][1]);return U}t=p(t,i);var v=t.length,w=v-4,b=i?t[2]:t[0],_=i?t[3]:t[1],E="M"+[b,_];o&&o.mt(b,_);var S=i?2:0,P=i?v-4:v-2,A=2;for(c=S;c<P;c+=A){var R=c?t[c-2]:t[0],T=c?t[c-1]:t[1],L=t[c+0],I=t[c+1],C=t[c+2],k=t[c+3],Y=c!==w?t[c+4]:C,W=c!==w?t[c+5]:k,G=L+(C-R)/6*r,F=I+(k-T)/6*r,B=C-(Y-L)/6*r,q=k-(W-I)/6*r;E+="C"+[G,F,B,q,C,k],o&&o.bt(G,F,B,q,C,k)}if(l){var Z=E.split("C");Z.pop(),E=Z.join("C")}return E},e.pointAlongCurve=function(t,r,i,o){if(He("27.7"),!(!t||!t[0]||!t[1]||!t[2]||!t[3])){n(o)&&(o=!1);var l=new e.Bezier(t[0],t[1],t[2],t[3]),c,p,v,w,b,_;if(o?(c=l.mx(r),p=l.my(r)):(c=l.x(r),p=l.y(r)),i){var E=r-.05,S=r+.05;E<0&&(E=0),S>1&&(S=1),o?(v=l.mx(E),w=l.my(E),b=l.mx(S),_=l.my(S)):(v=l.x(E),w=l.y(E),b=l.x(S),_=l.y(S));var P=e.angle(v,w,b,_);return{x:c,y:p,angle:P}}return{x:c,y:p}}},e.distanceAlongCurve=function(t){He("27.8");var r=e.dist(t[0],t[3]),i=e.dist(t[0],t[1])+e.dist(t[1],t[2])+e.dist(t[2],t[3]);return(r+i)/2},e.closestPointAlongCurve=function(t,r,i,o,l){He("27.9");var c=1e7,p,v=0,w=0;return n(i)&&(i=10),e.loop(r,function(b,_){var E=new e.Bezier(b[0],b[1],b[2],b[3]);e.loop(i,function(S,P){var A={x:E.x(S/P),y:E.y(S/P)},R=e.dist(t,A);R<c&&(c=R,p=A,v=_,w=S)})}),l?(v*i+w)/(r.length*i)*100:o?p:v},e.transformPoints=function(t,r,i,o,l){if(He("27.95"),!(n(t)||!Array.isArray(t))){n(o)&&(o=0),n(l)&&(l=0),t=e.copy(t);var c=o,p=l;r=="rotation"&&(o!=0&&(t=e.transformPoints(t,"x",-c)),l!=0&&(t=e.transformPoints(t,"y",-p)));for(var v,w=0;w<t.length;w++)if(v=t[w],!!Array.isArray(v)){if(r=="x")v[0]+=i;else if(r=="y")v[1]+=i;else if(r=="scaleX")v[0]=(v[0]-o)*i+o,v[4]=v[4]*i,v[6]=v[6]*i;else if(r=="scaleY")v[1]=(v[1]-l)*i+l,v[5]=v[5]*i,v[7]=v[7]*i;else if(r=="scale")v[0]=(v[0]-o)*i+o,v[4]=v[4]*i,v[6]=v[6]*i,v[1]=(v[1]-l)*i+l,v[5]=v[5]*i,v[7]=v[7]*i;else if(r=="rotation"){var b=i*Math.PI/180,_=v[0],E=v[1];v[0]=_*Math.cos(b)-E*Math.sin(b),v[1]=E*Math.cos(b)+_*Math.sin(b),_=v[4],E=v[5],v[4]=_*Math.cos(b)-E*Math.sin(b),v[5]=E*Math.cos(b)+_*Math.sin(b),_=v[6],E=v[7],v[6]=_*Math.cos(b)-E*Math.sin(b),v[7]=E*Math.cos(b)+_*Math.sin(b)}}return r=="rotation"&&(o!=0&&(t=e.transformPoints(t,"x",c)),l!=0&&(t=e.transformPoints(t,"y",p))),t}},e.trimPointEnds=function(t){He("27.97"),t[0][4]=0,t[0][5]=0,t[0][8]="free",t[t.length-1][6]=0,t[t.length-1][7]=0,t[t.length-1][8]="free"},e.reversePoints=function(t){return He("27.975"),t.reverse(),e.loop(t,function(r){var i=r[6];r[6]=r[4],r[4]=i;var o=r[7];r[7]=r[5],r[5]=o}),t},e.appendPoints=function(t,r,i){return He("27.98"),n(t)&&n(r)?[]:n(t)?r:(n(r)||(t[t.length-1][6]=r[0][6],t[t.length-1][7]=r[0][7],i&&(t[t.length-1][8]=i),r.shift(),t=t.concat(r)),t)},e.prependPoints=function(t,r,i){return He("27.985"),n(t)&&n(r)?[]:n(t)?r:(n(r)||(r[r.length-1][6]=t[0][6],r[r.length-1][7]=t[0][7],i&&(t[t.length-1][8]=i),t.shift(),t=r.concat(t)),t)},e.splitPoints=function(t,r,i){if(He("27.99"),!n(t)&&(n(r)&&(r=Math.floor(t.length/2)),!(r<0||r>t.length-1))){n(i)&&(i=!0);var o=e.copy(t.slice(0,r+1)),l=e.copy(t.slice(r));return i&&(e.trimPointEnds(o),e.trimPointEnds(l)),[o,l]}},e.makeID=function(t,r,i){He("13.5"),n(t)&&(t="mixed"),n(r)&&(r=5),n(i)&&(i="uppercase");var o,l=[2,3,4,5,6,7,8,9],c="abcdefghjkmnpqrstuvwxyz".split("");t.constructor===Array?o=t:t=="numbers"?o=l:t=="letters"?o=c:o=l.concat(c);for(var p="",v,w,b=0;b<r;b++)v=o[Math.floor(Math.random()*o.length)],w=Math.random(),i=="uppercase"||i=="mixed"&&w>.5?v.toUpperCase&&(v=v.toUpperCase()):v.toLowerCase&&(v=v.toLowerCase()),p+=String(v);return p},e.makeSyllable=function(t,r){He("13.55");var i="bcdfghjklmnprstvwxz",o="aeiouaeiouaeiouy";n(t)&&(t=3),n(r)&&(r=e.rand()<.3);function l(v){var w=e.rand(v.length-1),b=v.substring(w,w+1);return b}var c="",p=r?o:i;return e.loop(t,function(){c+=l(p),p=p==o?i:o}),c},e.makePrimitive=function(t){He("13.56");function r(i){return Array.isArray(i)?(e.loop(i,function(o){o=r(o)}),i):i.constructor==={}.constructor?(e.loop(i,function(o,l){i[o]=r(l)}),i):i instanceof String?String(i):i instanceof Number?Number(i):i instanceof Boolean?!!i:i}return r(t)},e.makeMath=function(){He("13.565");for(var t=Object.getOwnPropertyNames(Math),r=0;r<t.length;r++)le[t[r]]=Math[t[r]]},e.swapProperties=function(t,r,i){if(He("17.1"),n(r)||n(i)||n(r[t])||n(i[t]))return!1;var o=i[t];return i[t]=r[t],r[t]=o,!0},e.mobile=function(t){return He("28"),!n(le.MOBILE)&&le.MOBILE!="default"?le.MOBILE:!n(e.MOBILE)&&e.MOBILE!="default"?e.MOBILE:(n(t)&&(t=!0),/ip(hone|od|ad)/i.test(navigator.userAgent)?"ios":/android|nexus/i.test(navigator.userAgent)?"android":/blackberry/i.test(navigator.userAgent)?"blackberry":/nokia|phone|mobile/i.test(navigator.userAgent)?"windows":/opera mini|webos/i.test(navigator.userAgent)?"other":t&&le.orientation!==void 0?/safari/i.test(navigator.userAgent)?"ios":!0:!1)},e.vee=function(t){return He("28.5"),!n(t)&&(t.type=="Pick"||Array.isArray(t)||t.constructor=={}.constructor&&(!n(t.max)||!n(t.noPick))||typeof t=="function")},e.extend=function(t,r,i,o,l){var c="subclass, superclass, override, prefix, prototype",p;if(p=vt(e.extend,arguments,c))return p;if(n(t)||n(r)){Ct&&t!=e.StageGL&&lt("zim.extend() - please supply a class and its superclass");return}n(o)&&(o="super"),n(i)&&(i=[]),Array.isArray(i)||(i=[i]),n(l)&&(l=!0);var v={};for(var w in t.prototype)Object.defineProperty(v,w,Object.getOwnPropertyDescriptor(t.prototype,w));function b(){this.constructor=t}b.prototype=r.prototype,t.prototype=new b;for(w in v)Object.defineProperty(t.prototype,w,Object.getOwnPropertyDescriptor(v,w));var _=t.prototype,E=Object.getPrototypeOf&&Object.getPrototypeOf(_)||_.__proto__;if(E){_[(o+="_")+"constructor"]=E.constructor;for(var S,P=0;P<i.length;P++)S=i[P],typeof E[S]=="function"&&(_[o+S]=E[S]);if(l)for(S in E)Object.prototype.hasOwnProperty.call(_,S)&&typeof E[S]=="function"&&(_[o+S]=E[S])}return t},e.copy=function(t,r,i){if(e.copyCheck||(He("10"),e.copyCheck=!0),n(r)&&(r=!1),n(i)&&(i=!0),t==null||!(t instanceof Array||t.constructor=={}.constructor))return r&&t!=null&&t.clone&&t.type&&(t.type!="Container"&&t.type!="Stage"&&t.type!="StageGL"||i)?t.clone():t;if(t instanceof Array){for(var o=[],l=0;l<t.length;l++)o[l]=e.copy(t[l],r,i);return o}if(t.constructor=={}.constructor){var c={};for(var p in t){var v=e.copy(t[p],r,i);Object.prototype.hasOwnProperty.call(t,p)&&(c[p]=v)}return c}},e.merge=function(){e.mergeCheck||(He("12"),e.mergeCheck=!0);var t={},r,i;for(r=0;r<arguments.length;r++)for(i in arguments[r])Object.prototype.hasOwnProperty.call(arguments[r],i)&&(t[i]=arguments[r][i]);return t},e.arraysEqual=function(t,r,i){if(He("11"),n(t)||n(r)||(n(i)&&(i=!0),t.length!=r.length))return!1;for(var o=0;o<t.length;o++)if(t[o]instanceof Array&&r[o]instanceof Array){if(!e.arraysEqual(t[o],r[o],i))return!1}else{if(i&&t[o]!=r[o])return!1;if(!i)return e.arraysEqual(t.sort(),r.sort(),!0)}return!0},e.arrayMinMax=function(t){if(He("11.2"),!Array.isArray(t))return{min:null,max:null};for(var r=t[0],i=t[0],o=t.length;o--;)r=t[o]<r?t[o]:r,i=t[o]>i?t[o]:i;return r=isNaN(r)?null:r,i=isNaN(i)?null:i,{min:r,max:i}},e.isEmpty=function(t){if(e.zimEmptyCheck||(He("11.5"),e.zimEmptyCheck=!0),!n(t)){var r=0;for(var i in t){r++;break}return r==0}},e.isJSON=function(t){if(He("11.6"),typeof t!="string")return!1;try{return JSON.parse(t),!0}catch(r){return!1}},e.isPick=function(t){if(e.zimPickCheck||(He("11.7"),e.zimPickCheck=!0),!n(t))return Array.isArray(t)||t.constructor=={}.constructor&&(t.min!=null&&t.max!=null||t.noPick)||t.constructor===Function&&(t.array!=null||t()!=null)},e.zut=function(t){if(n(t)||typeof t=="object")return!0},e.decimals=function(t,r,i,o,l,c,p){if(e.zimDecimalCheck||(He("13"),e.zimDecimalCheck=!0),n(t))return 0;n(r)&&(r=1),n(i)&&(i=0),n(o)&&(o=1),n(l)&&(l=!0),n(c)&&(c=!1);var v=Math.round(t*Math.pow(10,r))/Math.pow(10,r);if(c){var w=v-Math.floor(v);v=e.decimals(Math.floor(v)+w*60/100,2)}var b=e.sign(v),_,E,S;if(i>0)for(_=String(v).indexOf("."),E=String(v).length,_<0&&(_=E++,v+="."),S=0;S<i-(E-_-1);S++)v+="0";if(o>1){b==-1&&(v=v.substr(1,v.length-1)),_=String(v).indexOf("."),E=String(v).length;var P=_<0?E:_;for(S=0;S<o-P;S++)v="0"+v;b==-1&&(v="-"+v)}return o==0&&(v=v.toString().replace(/^0\./,".")),i+o>0&&!l&&Number(v)==0&&(v=0),c&&(v=String(v).replace(".",":")),e.zut(p)?v:null},e.countDecimals=function(t){return e.zimCountDecimalsCheck||(He("13.05"),e.zimCountDecimalsCheck=!0),t%1?t.toString().split(".")[1].length:0},e.sign=function(t){return e.zimSignCheck||(He("13.1"),e.zimSignCheck=!0),t?t<0?-1:1:0},e.constrain=function(t,r,i,o){if(He("13.2"),!n(t)){if(n(r)&&(r=0),n(i)&&(i=Number.MAX_VALUE),i<r){var l=r;i=r,r=l}return n(o)&&(o=!1),o&&t<0?Math.max(-i,Math.min(t,-r)):Math.max(r,Math.min(t,i))}},e.dist=function(t,r,i,o){if(e.zimDistCheck||(He("13.3"),e.zimDistCheck=!0),!(n(t)||n(r)))return!n(t.x)&&!n(r.x)?(o=r.y,i=r.x,r=t.y,t=t.x):(n(i)&&(i=0),n(o)&&(o=0)),Math.sqrt(Math.pow(i-t,2)+Math.pow(o-r,2))},e.rectIntersect=function(t,r,i){return e.zimRectIntersectCheck||(He("13.32"),e.zimRectIntersectCheck=!0),n(i)&&(i=0),!(t.x>=r.x+r.width+i||t.x+t.width+i<=r.x||t.y>=r.y+r.height+i||t.y+t.height+i<=r.y)},e.boundsAroundPoints=function(t){e.zimBoundsAroundPointsCheck||(He("13.34"),e.zimBoundsAroundPointsCheck=!0);for(var r=1e4,i=1e4,o=-1e4,l=-1e4,c=0;c<t.length;c++){var p=t[c];p.x<r&&(r=p.x),p.x>o&&(o=p.x),p.y<i&&(i=p.y),p.y>l&&(l=p.y)}return{x:r,y:i,width:o-r,height:l-i}},e.angle=function(t,r,i,o){if(e.angleCheck||(He("13.4"),e.angleCheck=!0),!(n(t)||n(r)))return n(i)&&(i=t,t=0),n(o)&&(o=r,r=0),(Math.atan2(o-r,i-t)*180/Math.PI+360)%360},e.TAU=Math.PI*2,e.DEG=180/Math.PI,e.RAD=Math.PI/180,e.PHI=Math.pow(5,.5)*.5+.5,e.smoothStep=function(t,r,i){He("13.7");var o=e.constrain((t-r)/(i-r),0,1);return o*o*o*(o*(o*6-15)+10)},e.unicodeToUTF=function(t){if(He("13.75"),!!t){t!=" "&&(t=t.replace(/^\s+/g,""));var r,i="",o="";return r=t.charCodeAt(0),i=r,o=t.charCodeAt(1),o>=56320&&o<=57343&&(r=(i-55296)*1024+(o-56320)+65536),i=i.toString(16),o=o.toString(16),r=r.toString(16),"\\u"+i+"\\u"+o}},e.capitalizeFirst=function(t){return He("13.78"),t.charAt(0).toUpperCase()+t.slice(1)},e.Ajax=function(t,r,i,o){He("13.8");var l=new XMLHttpRequest;this.master=t,this.couple=r,this.lock=i,this.unique=o;var c=this;this.get=function(p,v){var w=n(c.master)?"":"&master="+encodeURI(t),b=n(c.lock)?"":"&lock="+encodeURI(i),_=c.unique?"&unique=true":"";l.open("GET",p+w+b+_,!0),l.onload=function(){l.status==200?v(e.isJSON(l.responseText)?JSON.parse(l.responseText):l.responseText):v(null,"Error: "+l.status)},l.send()},this.post=function(p,v,w,b,_){var E="url, data, command, extra, callback",S;if(S=vt(c.post,arguments,E))return S;if(!n(p)){l.open("POST",p,!0),l.setRequestHeader("Content-type","application/x-www-form-urlencoded"),l.onload=function(){var L=l.responseText;e.isJSON(L)&&(c.couple&&(L=e.decouple(L)),L=JSON.parse(L)),_(L)},e.isJSON(v)||(v=JSON.stringify(v)),c.couple&&(v=e.couple(v));var P=n(c.master)?"":"&master="+encodeURIComponent(c.master),A=n(c.lock)?"":"&lock="+encodeURIComponent(c.lock),R=n(w)?"":"&command="+encodeURIComponent(w),T=n(b)?"":"&extra="+encodeURIComponent(b);l.send("data="+encodeURIComponent(v)+P+A+R+T)}},this.put=function(p,v,w){l.open("PUT",p,!0),l.setRequestHeader("Content-type","application/json"),l.onload=function(){w(e.isJSON(l.responseText)?JSON.parse(l.responseText):c.http.responseText)},l.send(JSON.stringify(v))}},e.Noise=function(t){"use strict";He("13.9"),n(t)&&(t=Math.random()*1e6);var r=t;this.seed=t;var i=this,o={};o.NORM_2D=1/47,o.NORM_3D=1/103,o.NORM_4D=1/30,o.SQUISH_2D=(Math.sqrt(2+1)-1)/2,o.SQUISH_3D=(Math.sqrt(3+1)-1)/3,o.SQUISH_4D=(Math.sqrt(4+1)-1)/4,o.STRETCH_2D=(1/Math.sqrt(2+1)-1)/2,o.STRETCH_3D=(1/Math.sqrt(3+1)-1)/3,o.STRETCH_4D=(1/Math.sqrt(4+1)-1)/4,o.base2D=[[1,1,0,1,0,1,0,0,0],[1,1,0,1,0,1,2,1,1]],o.base3D=[[0,0,0,0,1,1,0,0,1,0,1,0,1,0,0,1],[2,1,1,0,2,1,0,1,2,0,1,1,3,1,1,1],[1,1,0,0,1,0,1,0,1,0,0,1,2,1,1,0,2,1,0,1,2,0,1,1]],o.base4D=[[0,0,0,0,0,1,1,0,0,0,1,0,1,0,0,1,0,0,1,0,1,0,0,0,1],[3,1,1,1,0,3,1,1,0,1,3,1,0,1,1,3,0,1,1,1,4,1,1,1,1],[1,1,0,0,0,1,0,1,0,0,1,0,0,1,0,1,0,0,0,1,2,1,1,0,0,2,1,0,1,0,2,1,0,0,1,2,0,1,1,0,2,0,1,0,1,2,0,0,1,1],[3,1,1,1,0,3,1,1,0,1,3,1,0,1,1,3,0,1,1,1,2,1,1,0,0,2,1,0,1,0,2,1,0,0,1,2,0,1,1,0,2,0,1,0,1,2,0,0,1,1]],o.gradients2D=[5,2,2,5,-5,2,-2,5,5,-2,2,-5,-5,-2,-2,-5],o.gradients3D=[-11,4,4,-4,11,4,-4,4,11,11,4,4,4,11,4,4,4,11,-11,-4,4,-4,-11,4,-4,-4,11,11,-4,4,4,-11,4,4,-4,11,-11,4,-4,-4,11,-4,-4,4,-11,11,4,-4,4,11,-4,4,4,-11,-11,-4,-4,-4,-11,-4,-4,-4,-11,11,-4,-4,4,-11,-4,4,-4,-11],o.gradients4D=[3,1,1,1,1,3,1,1,1,1,3,1,1,1,1,3,-3,1,1,1,-1,3,1,1,-1,1,3,1,-1,1,1,3,3,-1,1,1,1,-3,1,1,1,-1,3,1,1,-1,1,3,-3,-1,1,1,-1,-3,1,1,-1,-1,3,1,-1,-1,1,3,3,1,-1,1,1,3,-1,1,1,1,-3,1,1,1,-1,3,-3,1,-1,1,-1,3,-1,1,-1,1,-3,1,-1,1,-1,3,3,-1,-1,1,1,-3,-1,1,1,-1,-3,1,1,-1,-1,3,-3,-1,-1,1,-1,-3,-1,1,-1,-1,-3,1,-1,-1,-1,3,3,1,1,-1,1,3,1,-1,1,1,3,-1,1,1,1,-3,-3,1,1,-1,-1,3,1,-1,-1,1,3,-1,-1,1,1,-3,3,-1,1,-1,1,-3,1,-1,1,-1,3,-1,1,-1,1,-3,-3,-1,1,-1,-1,-3,1,-1,-1,-1,3,-1,-1,-1,1,-3,3,1,-1,-1,1,3,-1,-1,1,1,-3,-1,1,1,-1,-3,-3,1,-1,-1,-1,3,-1,-1,-1,1,-3,-1,-1,1,-1,-3,3,-1,-1,-1,1,-3,-1,-1,1,-1,-3,-1,1,-1,-1,-3,-3,-1,-1,-1,-1,-3,-1,-1,-1,-1,-3,-1,-1,-1,-1,-3],o.lookupPairs2D=[0,1,1,0,4,1,17,0,20,2,21,2,22,5,23,5,26,4,39,3,42,4,43,3],o.lookupPairs3D=[0,2,1,1,2,2,5,1,6,0,7,0,32,2,34,2,129,1,133,1,160,5,161,5,518,0,519,0,546,4,550,4,645,3,647,3,672,5,673,5,674,4,677,3,678,4,679,3,680,13,681,13,682,12,685,14,686,12,687,14,712,20,714,18,809,21,813,23,840,20,841,21,1198,19,1199,22,1226,18,1230,19,1325,23,1327,22,1352,15,1353,17,1354,15,1357,17,1358,16,1359,16,1360,11,1361,10,1362,11,1365,10,1366,9,1367,9,1392,11,1394,11,1489,10,1493,10,1520,8,1521,8,1878,9,1879,9,1906,7,1910,7,2005,6,2007,6,2032,8,2033,8,2034,7,2037,6,2038,7,2039,6],o.lookupPairs4D=[0,3,1,2,2,3,5,2,6,1,7,1,8,3,9,2,10,3,13,2,16,3,18,3,22,1,23,1,24,3,26,3,33,2,37,2,38,1,39,1,41,2,45,2,54,1,55,1,56,0,57,0,58,0,59,0,60,0,61,0,62,0,63,0,256,3,258,3,264,3,266,3,272,3,274,3,280,3,282,3,2049,2,2053,2,2057,2,2061,2,2081,2,2085,2,2089,2,2093,2,2304,9,2305,9,2312,9,2313,9,16390,1,16391,1,16406,1,16407,1,16422,1,16423,1,16438,1,16439,1,16642,8,16646,8,16658,8,16662,8,18437,6,18439,6,18469,6,18471,6,18688,9,18689,9,18690,8,18693,6,18694,8,18695,6,18696,9,18697,9,18706,8,18710,8,18725,6,18727,6,131128,0,131129,0,131130,0,131131,0,131132,0,131133,0,131134,0,131135,0,131352,7,131354,7,131384,7,131386,7,133161,5,133165,5,133177,5,133181,5,133376,9,133377,9,133384,9,133385,9,133400,7,133402,7,133417,5,133421,5,133432,7,133433,5,133434,7,133437,5,147510,4,147511,4,147518,4,147519,4,147714,8,147718,8,147730,8,147734,8,147736,7,147738,7,147766,4,147767,4,147768,7,147770,7,147774,4,147775,4,149509,6,149511,6,149541,6,149543,6,149545,5,149549,5,149558,4,149559,4,149561,5,149565,5,149566,4,149567,4,149760,9,149761,9,149762,8,149765,6,149766,8,149767,6,149768,9,149769,9,149778,8,149782,8,149784,7,149786,7,149797,6,149799,6,149801,5,149805,5,149814,4,149815,4,149816,7,149817,5,149818,7,149821,5,149822,4,149823,4,149824,37,149825,37,149826,36,149829,34,149830,36,149831,34,149832,37,149833,37,149842,36,149846,36,149848,35,149850,35,149861,34,149863,34,149865,33,149869,33,149878,32,149879,32,149880,35,149881,33,149882,35,149885,33,149886,32,149887,32,150080,49,150082,48,150088,49,150098,48,150104,47,150106,47,151873,46,151877,45,151881,46,151909,45,151913,44,151917,44,152128,49,152129,46,152136,49,152137,46,166214,43,166215,42,166230,43,166247,42,166262,41,166263,41,166466,48,166470,43,166482,48,166486,43,168261,45,168263,42,168293,45,168295,42,168512,31,168513,28,168514,31,168517,28,168518,25,168519,25,280952,40,280953,39,280954,40,280957,39,280958,38,280959,38,281176,47,281178,47,281208,40,281210,40,282985,44,282989,44,283001,39,283005,39,283208,30,283209,27,283224,30,283241,27,283256,22,283257,22,297334,41,297335,41,297342,38,297343,38,297554,29,297558,24,297562,29,297590,24,297594,21,297598,21,299365,26,299367,23,299373,26,299383,23,299389,20,299391,20,299584,31,299585,28,299586,31,299589,28,299590,25,299591,25,299592,30,299593,27,299602,29,299606,24,299608,30,299610,29,299621,26,299623,23,299625,27,299629,26,299638,24,299639,23,299640,22,299641,22,299642,21,299645,20,299646,21,299647,20,299648,61,299649,60,299650,61,299653,60,299654,59,299655,59,299656,58,299657,57,299666,55,299670,54,299672,58,299674,55,299685,52,299687,51,299689,57,299693,52,299702,54,299703,51,299704,56,299705,56,299706,53,299709,50,299710,53,299711,50,299904,61,299906,61,299912,58,299922,55,299928,58,299930,55,301697,60,301701,60,301705,57,301733,52,301737,57,301741,52,301952,79,301953,79,301960,76,301961,76,316038,59,316039,59,316054,54,316071,51,316086,54,316087,51,316290,78,316294,78,316306,73,316310,73,318085,77,318087,77,318117,70,318119,70,318336,79,318337,79,318338,78,318341,77,318342,78,318343,77,430776,56,430777,56,430778,53,430781,50,430782,53,430783,50,431e3,75,431002,72,431032,75,431034,72,432809,74,432813,69,432825,74,432829,69,433032,76,433033,76,433048,75,433065,74,433080,75,433081,74,447158,71,447159,68,447166,71,447167,68,447378,73,447382,73,447386,72,447414,71,447418,72,447422,71,449189,70,449191,70,449197,69,449207,68,449213,69,449215,68,449408,67,449409,67,449410,66,449413,64,449414,66,449415,64,449416,67,449417,67,449426,66,449430,66,449432,65,449434,65,449445,64,449447,64,449449,63,449453,63,449462,62,449463,62,449464,65,449465,63,449466,65,449469,63,449470,62,449471,62,449472,19,449473,19,449474,18,449477,16,449478,18,449479,16,449480,19,449481,19,449490,18,449494,18,449496,17,449498,17,449509,16,449511,16,449513,15,449517,15,449526,14,449527,14,449528,17,449529,15,449530,17,449533,15,449534,14,449535,14,449728,19,449729,19,449730,18,449734,18,449736,19,449737,19,449746,18,449750,18,449752,17,449754,17,449784,17,449786,17,451520,19,451521,19,451525,16,451527,16,451528,19,451529,19,451557,16,451559,16,451561,15,451565,15,451577,15,451581,15,451776,19,451777,19,451784,19,451785,19,465858,18,465861,16,465862,18,465863,16,465874,18,465878,18,465893,16,465895,16,465910,14,465911,14,465918,14,465919,14,466114,18,466118,18,466130,18,466134,18,467909,16,467911,16,467941,16,467943,16,468160,13,468161,13,468162,13,468163,13,468164,13,468165,13,468166,13,468167,13,580568,17,580570,17,580585,15,580589,15,580598,14,580599,14,580600,17,580601,15,580602,17,580605,15,580606,14,580607,14,580824,17,580826,17,580856,17,580858,17,582633,15,582637,15,582649,15,582653,15,582856,12,582857,12,582872,12,582873,12,582888,12,582889,12,582904,12,582905,12,596982,14,596983,14,596990,14,596991,14,597202,11,597206,11,597210,11,597214,11,597234,11,597238,11,597242,11,597246,11,599013,10,599015,10,599021,10,599023,10,599029,10,599031,10,599037,10,599039,10,599232,13,599233,13,599234,13,599235,13,599236,13,599237,13,599238,13,599239,13,599240,12,599241,12,599250,11,599254,11,599256,12,599257,12,599258,11,599262,11,599269,10,599271,10,599272,12,599273,12,599277,10,599279,10,599282,11,599285,10,599286,11,599287,10,599288,12,599289,12,599290,11,599293,10,599294,11,599295,10],o.p2D=[0,0,1,-1,0,0,-1,1,0,2,1,1,1,2,2,0,1,2,0,2,1,0,0,0],o.p3D=[0,0,1,-1,0,0,1,0,-1,0,0,-1,1,0,0,0,1,-1,0,0,-1,0,1,0,0,-1,1,0,2,1,1,0,1,1,1,-1,0,2,1,0,1,1,1,-1,1,0,2,0,1,1,1,-1,1,1,1,3,2,1,0,3,1,2,0,1,3,2,0,1,3,1,0,2,1,3,0,2,1,3,0,1,2,1,1,1,0,0,2,2,0,0,1,1,0,1,0,2,0,2,0,1,1,0,0,1,2,0,0,2,2,0,0,0,0,1,1,-1,1,2,0,0,0,0,1,-1,1,1,2,0,0,0,0,1,1,1,-1,2,3,1,1,1,2,0,0,2,2,3,1,1,1,2,2,0,0,2,3,1,1,1,2,0,2,0,2,1,1,-1,1,2,0,0,2,2,1,1,-1,1,2,2,0,0,2,1,-1,1,1,2,0,0,2,2,1,-1,1,1,2,0,2,0,2,1,1,1,-1,2,2,0,0,2,1,1,1,-1,2,0,2,0],o.p4D=[0,0,1,-1,0,0,0,1,0,-1,0,0,1,0,0,-1,0,0,-1,1,0,0,0,0,1,-1,0,0,0,1,0,-1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,-1,0,0,-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,2,1,1,0,0,1,1,1,-1,0,1,1,1,0,-1,0,2,1,0,1,0,1,1,-1,1,0,1,1,0,1,-1,0,2,0,1,1,0,1,-1,1,1,0,1,0,1,1,-1,0,2,1,0,0,1,1,1,-1,0,1,1,1,0,-1,1,0,2,0,1,0,1,1,-1,1,0,1,1,0,1,-1,1,0,2,0,0,1,1,1,-1,0,1,1,1,0,-1,1,1,1,4,2,1,1,0,4,1,2,1,0,4,1,1,2,0,1,4,2,1,0,1,4,1,2,0,1,4,1,1,0,2,1,4,2,0,1,1,4,1,0,2,1,4,1,0,1,2,1,4,0,2,1,1,4,0,1,2,1,4,0,1,1,2,1,2,1,1,0,0,3,2,1,0,0,3,1,2,0,0,1,2,1,0,1,0,3,2,0,1,0,3,1,0,2,0,1,2,0,1,1,0,3,0,2,1,0,3,0,1,2,0,1,2,1,0,0,1,3,2,0,0,1,3,1,0,0,2,1,2,0,1,0,1,3,0,2,0,1,3,0,1,0,2,1,2,0,0,1,1,3,0,0,2,1,3,0,0,1,2,2,3,1,1,1,0,2,1,1,1,-1,2,2,0,0,0,2,3,1,1,0,1,2,1,1,-1,1,2,2,0,0,0,2,3,1,0,1,1,2,1,-1,1,1,2,2,0,0,0,2,3,1,1,1,0,2,1,1,1,-1,2,0,2,0,0,2,3,1,1,0,1,2,1,1,-1,1,2,0,2,0,0,2,3,0,1,1,1,2,-1,1,1,1,2,0,2,0,0,2,3,1,1,1,0,2,1,1,1,-1,2,0,0,2,0,2,3,1,0,1,1,2,1,-1,1,1,2,0,0,2,0,2,3,0,1,1,1,2,-1,1,1,1,2,0,0,2,0,2,3,1,1,0,1,2,1,1,-1,1,2,0,0,0,2,2,3,1,0,1,1,2,1,-1,1,1,2,0,0,0,2,2,3,0,1,1,1,2,-1,1,1,1,2,0,0,0,2,2,1,1,1,-1,0,1,1,1,0,-1,0,0,0,0,0,2,1,1,-1,1,0,1,1,0,1,-1,0,0,0,0,0,2,1,-1,1,1,0,1,0,1,1,-1,0,0,0,0,0,2,1,1,-1,0,1,1,1,0,-1,1,0,0,0,0,0,2,1,-1,1,0,1,1,0,1,-1,1,0,0,0,0,0,2,1,-1,0,1,1,1,0,-1,1,1,0,0,0,0,0,2,1,1,1,-1,0,1,1,1,0,-1,2,2,0,0,0,2,1,1,-1,1,0,1,1,0,1,-1,2,2,0,0,0,2,1,1,-1,0,1,1,1,0,-1,1,2,2,0,0,0,2,1,1,1,-1,0,1,1,1,0,-1,2,0,2,0,0,2,1,-1,1,1,0,1,0,1,1,-1,2,0,2,0,0,2,1,-1,1,0,1,1,0,1,-1,1,2,0,2,0,0,2,1,1,-1,1,0,1,1,0,1,-1,2,0,0,2,0,2,1,-1,1,1,0,1,0,1,1,-1,2,0,0,2,0,2,1,-1,0,1,1,1,0,-1,1,1,2,0,0,2,0,2,1,1,-1,0,1,1,1,0,-1,1,2,0,0,0,2,2,1,-1,1,0,1,1,0,1,-1,1,2,0,0,0,2,2,1,-1,0,1,1,1,0,-1,1,1,2,0,0,0,2,3,1,1,0,0,0,2,2,0,0,0,2,1,1,1,-1,3,1,0,1,0,0,2,0,2,0,0,2,1,1,1,-1,3,1,0,0,1,0,2,0,0,2,0,2,1,1,1,-1,3,1,1,0,0,0,2,2,0,0,0,2,1,1,-1,1,3,1,0,1,0,0,2,0,2,0,0,2,1,1,-1,1,3,1,0,0,0,1,2,0,0,0,2,2,1,1,-1,1,3,1,1,0,0,0,2,2,0,0,0,2,1,-1,1,1,3,1,0,0,1,0,2,0,0,2,0,2,1,-1,1,1,3,1,0,0,0,1,2,0,0,0,2,2,1,-1,1,1,3,1,0,1,0,0,2,0,2,0,0,2,-1,1,1,1,3,1,0,0,1,0,2,0,0,2,0,2,-1,1,1,1,3,1,0,0,0,1,2,0,0,0,2,2,-1,1,1,1,3,3,2,1,0,0,3,1,2,0,0,4,1,1,1,1,3,3,2,0,1,0,3,1,0,2,0,4,1,1,1,1,3,3,0,2,1,0,3,0,1,2,0,4,1,1,1,1,3,3,2,0,0,1,3,1,0,0,2,4,1,1,1,1,3,3,0,2,0,1,3,0,1,0,2,4,1,1,1,1,3,3,0,0,2,1,3,0,0,1,2,4,1,1,1,1,3,3,2,1,0,0,3,1,2,0,0,2,1,1,1,-1,3,3,2,0,1,0,3,1,0,2,0,2,1,1,1,-1,3,3,0,2,1,0,3,0,1,2,0,2,1,1,1,-1,3,3,2,1,0,0,3,1,2,0,0,2,1,1,-1,1,3,3,2,0,0,1,3,1,0,0,2,2,1,1,-1,1,3,3,0,2,0,1,3,0,1,0,2,2,1,1,-1,1,3,3,2,0,1,0,3,1,0,2,0,2,1,-1,1,1,3,3,2,0,0,1,3,1,0,0,2,2,1,-1,1,1,3,3,0,0,2,1,3,0,0,1,2,2,1,-1,1,1,3,3,0,2,1,0,3,0,1,2,0,2,-1,1,1,1,3,3,0,2,0,1,3,0,1,0,2,2,-1,1,1,1,3,3,0,0,2,1,3,0,0,1,2,2,-1,1,1,1];function l(I){var C=new Uint32Array(1);return C[0]=I[0]*1664525+1013904223,C}function c(I,C,k){this.dx=-C-I*o.SQUISH_2D,this.dy=-k-I*o.SQUISH_2D,this.xsb=C,this.ysb=k}function p(I,C,k,Y){this.dx=-C-I*o.SQUISH_3D,this.dy=-k-I*o.SQUISH_3D,this.dz=-Y-I*o.SQUISH_3D,this.xsb=C,this.ysb=k,this.zsb=Y}function v(I,C,k,Y,W){this.dx=-C-I*o.SQUISH_4D,this.dy=-k-I*o.SQUISH_4D,this.dz=-Y-I*o.SQUISH_4D,this.dw=-W-I*o.SQUISH_4D,this.xsb=C,this.ysb=k,this.zsb=Y,this.wsb=W}var w=[],b,_,E,S,P,A;for(b=0;b<o.p2D.length;b+=4){for(S=o.base2D[o.p2D[b]],P=null,A=null,_=0;_<S.length;_+=3)A=new c(S[_],S[_+1],S[_+2]),P===null?w[b/4]=A:P.next=A,P=A;A.next=new c(o.p2D[b+1],o.p2D[b+2],o.p2D[b+3])}for(this.lookup2D=[],b=0;b<o.lookupPairs2D.length;b+=2)this.lookup2D[o.lookupPairs2D[b]]=w[o.lookupPairs2D[b+1]];var R=[];for(b=0;b<o.p3D.length;b+=9){for(S=o.base3D[o.p3D[b]],P=null,A=null,_=0;_<S.length;_+=4)A=new p(S[_],S[_+1],S[_+2],S[_+3]),P===null?R[b/9]=A:P.next=A,P=A;A.next=new p(o.p3D[b+1],o.p3D[b+2],o.p3D[b+3],o.p3D[b+4]),A.next.next=new p(o.p3D[b+5],o.p3D[b+6],o.p3D[b+7],o.p3D[b+8])}for(this.lookup3D=[],b=0;b<o.lookupPairs3D.length;b+=2)this.lookup3D[o.lookupPairs3D[b]]=R[o.lookupPairs3D[b+1]];var T=[];for(b=0;b<o.p4D.length;b+=16){for(S=o.base4D[o.p4D[b]],P=null,A=null,_=0;_<S.length;_+=5)A=new v(S[_],S[_+1],S[_+2],S[_+3],S[_+4]),P===null?T[b/16]=A:P.next=A,P=A;A.next=new v(o.p4D[b+1],o.p4D[b+2],o.p4D[b+3],o.p4D[b+4],o.p4D[b+5]),A.next.next=new v(o.p4D[b+6],o.p4D[b+7],o.p4D[b+8],o.p4D[b+9],o.p4D[b+10]),A.next.next.next=new v(o.p4D[b+11],o.p4D[b+12],o.p4D[b+13],o.p4D[b+14],o.p4D[b+15])}for(this.lookup4D=[],b=0;b<o.lookupPairs4D.length;b+=2)this.lookup4D[o.lookupPairs4D[b]]=T[o.lookupPairs4D[b+1]];this.perm=new Uint8Array(256),this.perm2D=new Uint8Array(256),this.perm3D=new Uint8Array(256),this.perm4D=new Uint8Array(256);var L=new Uint8Array(256);for(b=0;b<256;b++)L[b]=b;for(t=new Uint32Array(1),t[0]=r,t=l(l(l(t))),b=255;b>=0;b--)t=l(t),E=new Uint32Array(1),E[0]=(t[0]+31)%(b+1),E[0]<0&&(E[0]+=b+1),this.perm[b]=L[E[0]],this.perm2D[b]=this.perm[b]&14,this.perm3D[b]=this.perm[b]%24*3,this.perm4D[b]=this.perm[b]&252,L[E[0]]=L[b];this.simplex1D=function(I){return i.simplex2D(I,1)},this.simplex2D=function(I,C){var k=(I+C)*o.STRETCH_2D,Y=[I+k,C+k],W=Y[0],G=Y[1],F=[Math.floor(W),Math.floor(G)],B=F[0],q=F[1],Z=(B+q)*o.SQUISH_2D,X=[I-(B+Z),C-(q+Z)],ne=X[0],$=X[1],re=[W-B,G-q],de=re[0],Q=re[1],U=de+Q,g=new Uint32Array(4);g[0]=de-Q+1,g[1]=U,g[2]=U+Q,g[3]=U+de;for(var d=g[0]|g[1]<<1|g[2]<<2|g[3]<<4,h=i.lookup2D[d],x=0;typeof h<"u";){var j=[ne+h.dx,$+h.dy],O=j[0],V=j[1],ce=2-O*O-V*V;if(ce>0){var H=[B+h.xsb,q+h.ysb],N=H[0],ue=H[1],fe=i.perm2D[i.perm[N&255]+ue&255],ae=o.gradients2D[fe]*O+o.gradients2D[fe+1]*V;ce*=ce,x+=ce*ce*ae}h=h.next}return x*o.NORM_2D},this.simplex3D=function(I,C,k){var Y=(I+C+k)*o.STRETCH_3D,W=[I+Y,C+Y,k+Y],G=W[0],F=W[1],B=W[2],q=[Math.floor(G),Math.floor(F),Math.floor(B)],Z=q[0],X=q[1],ne=q[2],$=(Z+X+ne)*o.SQUISH_3D,re=[I-(Z+$),C-(X+$),k-(ne+$)],de=re[0],Q=re[1],U=re[2],g=[G-Z,F-X,B-ne],d=g[0],h=g[1],x=g[2],j=d+h+x,O=new Uint32Array(7);O[0]=h-x+1,O[1]=d-h+1,O[2]=d-x+1,O[3]=j,O[4]=j+x,O[5]=j+h,O[6]=j+d;for(var V=O[0]|O[1]<<1|O[2]<<2|O[3]<<3|O[4]<<5|O[5]<<7|O[6]<<9,ce=i.lookup3D[V],H=0;typeof ce<"u";){var N=[de+ce.dx,Q+ce.dy,U+ce.dz],ue=N[0],fe=N[1],ae=N[2],Ie=2-ue*ue-fe*fe-ae*ae;if(Ie>0){var ge=[Z+ce.xsb,X+ce.ysb,ne+ce.zsb],Be=ge[0],z=ge[1],Ye=ge[2],te=i.perm3D[i.perm[i.perm[Be&255]+z&255]+Ye&255],K=o.gradients3D[te]*ue+o.gradients3D[te+1]*fe+o.gradients3D[te+2]*ae;Ie*=Ie,H+=Ie*Ie*K}ce=ce.next}return H*o.NORM_3D},this.simplex4D=function(I,C,k,Y){var W=(I+C+k+Y)*o.STRETCH_4D,G=[I+W,C+W,k+W,Y+W],F=G[0],B=G[1],q=G[2],Z=G[3],X=[Math.floor(F),Math.floor(B),Math.floor(q),Math.floor(Z)],ne=X[0],$=X[1],re=X[2],de=X[3],Q=(ne+$+re+de)*o.SQUISH_4D,U=I-(ne+Q),g=C-($+Q),d=k-(re+Q),h=Y-(de+Q),x=[F-ne,B-$,q-re,Z-de],j=x[0],O=x[1],V=x[2],ce=x[3],H=j+O+V+ce,N=new Uint32Array(11);N[0]=V-ce+1,N[1]=O-V+1,N[2]=O-ce+1,N[3]=j-O+1,N[4]=j-V+1,N[5]=j-ce+1,N[6]=H<<6,N[7]=H+ce,N[8]=H+V,N[9]=H+O,N[10]=H+j;for(var ue=N[0]|N[1]<<1|N[2]<<2|N[3]<<3|N[4]<<4|N[5]<<5|N[6]<<6|N[7]<<8|N[8]<<11|N[9]<<14|N[10]<<17,fe=i.lookup4D[ue],ae=0;typeof fe<"u";){var Ie=[U+fe.dx,g+fe.dy,d+fe.dz,h+fe.dw],ge=Ie[0],Be=Ie[1],z=Ie[2],Ye=Ie[3],te=2-ge*ge-Be*Be-z*z-Ye*Ye;if(te>0){var K=[ne+fe.xsb,$+fe.ysb,re+fe.zsb,de+fe.wsb],xe=K[0],_e=K[1],Se=K[2],ie=K[3],pe=i.perm4D[i.perm[i.perm[i.perm[xe&255]+_e&255]+Se&255]+ie&255],be=o.gradients4D[pe]*ge+o.gradients4D[pe+1]*Be+o.gradients4D[pe+2]*z+o.gradients4D[pe+3]*Ye;te*=te,ae+=te*te*be}fe=fe.next}return ae*o.NORM_4D}},typeof $e<"u"&&(e.Point=function(t,r,i,o,l,c,p,v,w,b){He("13.45"),n(t)&&(t=0),n(r)&&(r=0),n(i)&&(i=0),n(o)&&(o=0),n(l)&&(l=0),n(c)&&(c=0),n(p)&&(p=0),n(v)&&(v=0),n(w)&&(w=0),n(b)&&(b=0),this.createjsPoint_constructor(t,r),this.type="Point",this.x=t,this.y=r,this.z=i,this.q=o,this.r=l,this.s=c,this.t=p,this.u=v,this.v=w,this.w=b,this.angle=function(_){return this.createjsPoint_angle(_)*180/Math.PI},this.project=function(_,E){return this.createjsPoint_project(_*Math.PI/180,E)}},e.extend(e.Point,$e.Point,["angle","project"],"createjsPoint")),e.Bezier=function(r,i,o,l){He("13.47"),this.a=r,this.b=i,this.c=o,this.d=l,this.len=100,this.arcLengths=new Array(this.len+1),this.arcLengths[0]=0;for(var c=this.x(0),p=this.y(0),v=0,w=1;w<=this.len;w+=1){var b=this.x(w*.01),_=this.y(w*.01),E=c-b,S=p-_;v+=Math.sqrt(E*E+S*S),this.arcLengths[w]=v,c=b,p=_}this.length=v},e.Bezier.prototype={map:function(t){for(var r=t*this.arcLengths[this.len],i=0,o=this.len,l=0;i<o;)l=i+((o-i)/2|0),this.arcLengths[l]<r?i=l+1:o=l;this.arcLengths[l]>r&&l--;var c=this.arcLengths[l];return c===r?l/this.len:(l+(r-c)/(this.arcLengths[l+1]-c))/this.len},mx:function(t){return this.x(this.map(t))},my:function(t){return this.y(this.map(t))},x:function(t){return(1-t)*(1-t)*(1-t)*this.a.x+3*((1-t)*(1-t))*t*this.b.x+3*(1-t)*(t*t)*this.c.x+t*t*t*this.d.x},y:function(t){return(1-t)*(1-t)*(1-t)*this.a.y+3*((1-t)*(1-t))*t*this.b.y+3*(1-t)*(t*t)*this.c.y+t*t*t*this.d.y}},e.Boundary=function(t,r,i,o){He("13.46"),t.x&&(o=t.height,i=t.width,r=t.y,t=t.x),!(n(t)||n(r)||n(i)||n(o))&&(this.x=t,this.y=r,this.width=i,this.height=o,this.contract=function(l,c,p,v){return n(l)?this:(n(c)&&(c=l),n(p)?p=l*2:p=p+l,n(v)?v=c*2:v=v+c,this.x+=l,this.y+=c,this.width-=p,this.height-=v,this)})},e.GradientColor=function(t,r,i,o,l,c){if(He("13.465"),this.type="GradientColor",this.colors=n(t)?["black","white"]:t,Array.isArray(this.colors)||(this.colors=[this.colors,this.colors]),this.colors.length==1&&this.colors.push(this.colors[0]),this.ratios=n(r)?0:r,!Array.isArray(this.ratios)){this.angle=this.ratios,this.ratios=[];for(var p=0;p<this.colors.length;p++)this.ratios.push(p/(this.colors.length-1))}!n(i)&&(n(o)||n(l)||n(c))?(this.angle=i,i=null):n(this.angle)&&n(i)&&n(o)&&n(l)&&n(c)?this.angle=0:(this.x0=n(i)?0:i,this.y0=n(o)?0:o,this.x1=n(l)?0:l,this.y1=n(c)?100:c)},e.RadialColor=function(t,r,i,o,l,c,p,v){if(He("13.466"),this.type="RadialColor",this.colors=n(t)?["black","white"]:t,Array.isArray(this.colors)||(this.colors=[this.colors,this.colors]),this.colors.length==1&&this.colors.push(this.colors[0]),this.ratios=r,!Array.isArray(this.ratios)){this.ratios=[];for(var w=0;w<this.colors.length;w++)this.ratios.push(w/(this.colors.length-1))}this.x0=i,this.y0=o,this.r0=l,this.x1=c,this.y1=p,this.r1=v},e.BitmapColor=function(t,r,i){He("13.467"),this.type="BitmapColor",typeof t=="string"&&le.asset&&(t=le.asset(t)),t.type!="Bitmap"&&t.bitmap&&(t=t.bitmap),this.image=t.type=="Bitmap"?t.image:t,this.repetition=r,this.matrix=i},e.Damp=function(t,r){He("14");var i="startValue, damp",o;if(o=vt(e.Damp,arguments,i,this))return o;this.lastValue=n(t)?0:t,this.damp=n(r)?.1:r},e.Damp.prototype.convert=function(t){return this.lastValue=this.lastValue+(t-this.lastValue)*this.damp},e.Damp.prototype.immediate=function(t){return this.lastValue=t,this},e.Proportion=function(t,r,i,o,l,c,p){var v="baseMin, baseMax, targetMin, targetMax, factor, targetRound, clamp",w;if(w=vt(e.Proportion,arguments,v,this))return w;He("15"),n(i)&&(i=0),n(o)&&(o=1),n(l)&&(l=1),n(c)&&(c=!1),n(p)&&(p=!0);var b,_;this.convert=function(E){if(n(E)&&(E=t),!(isNaN(E)||r-t==0))return p&&(E=Math.max(E,t),E=Math.min(E,r)),b=(E-t)/(r-t),l>0?_=i+(o-i)*b:_=o-(o-i)*b,c&&(_=Math.round(_)),_}},e.ProportionDamp=function(t,r,i,o,l,c,p,v){var w="baseMin, baseMax, targetMin, targetMax, damp, factor, targetRound, clamp",b;if(b=vt(e.ProportionDamp,arguments,w,this))return b;He("16"),n(i)&&(i=0),n(o)&&(o=1),n(l)&&(l=.1),n(c)&&(c=1),n(p)&&(p=!1),n(v)&&(v=!0),this.damp=l;var _=this,E,S,P,A,R,T=0,L=0;E=t,L=i;var I=setInterval(C,20);function C(){isNaN(E)||r-t==0||(v&&(E=Math.max(E,t),E=Math.min(E,r)),S=(E-t)/(r-t),P=o-i,c>0?A=i+P*S:A=o-P*S,T=A,R=T-L,L+=R*_.damp)}this.immediate=function(k){return _.convert(k),C(),L=A,p&&(L=Math.round(L)),_},this.immediateValue=function(k){return T=L=k,_},this.convert=function(k){return E=k,p?Math.round(L):L},this.dispose=function(){return clearInterval(I),!0}},e.Dictionary=function(t){He("17"),this.length=0,this.unique=t;var r=this.objects=[],i=this.values=[];this.type="Dictionary",this.add=function(o,l){n(o)||(n(l)&&(l=!0),this.unique&&this.remove(o),r.push(o),i.push(l),this.length++)},this.at=function(o){if(!n(o)){var l=r.indexOf(o);return l>-1?i[l]:null}},this.remove=function(o){if(n(o))return!1;var l=r.indexOf(o);return l>-1?(r.splice(l,1),i.splice(l,1),this.length--,!0):!1},this.clear=function(){return r=this.objects=[],i=this.values=[],this.length=null,this},this.dispose=function(){return r=null,i=null,this.length=null,!0}},e.Hierarchy=function(t,r){He("17.5");var i=this;if(n(t))return;n(r)&&(r=!1);var o;i.processSimple=function(v){var w=0,b={};function _(E,S,P,A){if(n(E)||(v=E),v.constructor=={}.constructor){var R;v.list&&(R=v,v=v.list),A&&R&&e.loop(R,function(T,L){T!="list"&&(A[T]=L)}),e.loop(v,function(T,L){var I={},C=S["id"+w]={obj:T,level:P,open:r,opened:!1,list:I};w++,_(L,I,P+1,C)})}else Array.isArray(v)&&e.loop(v,function(T){S["id"+w]={obj:T},w++})}return _(t,b,0),o=w,b},i.processComplex=function(v){var w=0;function b(_,E){e.loop(_,function(S,P){P.level=E,n(P.open)&&(P.open=r),n(P.opened)&&(P.opened=!1),P.list&&b(P.list,E+1),w++})}return b(v,0),o=w,v},n(t.id0)?i.data=i.processSimple(t):i.data=i.processComplex(t),i.getLinearList=function(v){return n(v)&&(v=i.data),l(v)[0]},i.getLinearIDs=function(v){return n(v)&&(v=i.data),l(v)[1]};function l(v){var w=[],b=[];function _(E,S){e.loop(E,function(P,A){w.push(A.obj),b.push(P),A.open&&_(A.list,S+1)})}return _(v,0),[w,b]}i.getData=function(v){var w;function b(_){e.loop(_,function(E,S){if(E==v)return w=S,w;b(S.list)})}return b(i.data),w},i.getNextSibling=function(v){var w,b;function _(E){e.loop(E,function(S,P){if(!b&&w)return b=S,b;S==v?w=P:_(P.list)})}return _(i.data),b},i.getPrevSibling=function(v){var w=[],b;function _(E,S){e.loop(E,function(P,A){if(P==v)return b=w[S]||w[S-1],b;w[S]=P,_(A.list,S+1)})}return _(i.data,0),b},i.insertBefore=function(v,w,b){return c("insertBefore",v,w,b)},i.insertAfter=function(v,w,b){return c("insertAfter",v,w,b)},i.removeItem=function(v){return c("removeItem",null,v)},i.replaceItem=function(v,w){var b=i.getData(w);return b.obj=v,c("replaceItem")};function c(v,w,b,_){var E=0,S={},P=i.data;function A(R,T,L,I){e.loop(R,function(C,k){if(!(v=="removeItem"&&C==b)){var Y,W,G;v=="insertBefore"&&C==b&&(E=p(T,E,L,w,_)),Y={},W=k.list,k.list=Y,k.opened=!1,k.open=!1,G=T["id"+E]=k,G.obj.type&&G.obj.type=="TabsButton"&&(G.obj=G.obj.text),E++,A(W,Y,L+1),v=="insertAfter"&&C==b&&(E=p(T,E,L,w,_))}})}return A(P,S,0),o=E,S}function p(v,w,b,_,E){if(E){var S={};Array.isArray(_)&&(_=_[0]),v["id"+w]={obj:_,level:b,open:!1,opened:!1,list:S},w++,Array.isArray(E)||(E=[E]),e.loop(E,function(P){S["id"+w]={obj:P,level:b+1,open:!1,opened:!1,list:{}},w++})}else Array.isArray(_)||(_=[_]),e.loop(_,function(P){v["id"+w]={obj:P,level:b,open:!1,opened:!1,list:{}},w++});return w}i.getParent=function(v){var w=i.data;function b(_,E){var S=e.loop(_,function(P,A){if(P==v)return o-=1,E;if(A.list&&!e.isEmpty(A.list))return b(A.list,P)});if(S!==!0)return S}return b(w)},Object.defineProperty(i,"length",{get:function(){return o},set:function(){Ct&&lt("Hierarchy() - length is read only")}})},e.Pick=function(t){e.pickCheck||(He("17.6"),e.pickCheck=!0),this.choices=t,this.num=function(i){for(var o=[],l=0;l<i;l++)o.push(e.Pick.choose(this));return this.choices=e.Pick.series(o),this};var r=this;this.loop=function(i,o){for(var l,c=0;c<i;c++)if(l=o(e.Pick.choose(r),c,i),typeof l<"u")return l}},e.Pick.prototype.type="Pick",e.Pick.series=function(){return e.pickCheck||(He("17.6"),e.pickCheck=!0),e.series.apply(null,arguments)},e.Pick.rand=function(t,r,i,o){return e.pickCheck||(He("17.6"),e.pickCheck=!0),e.rand(t,r,i,o)},e.Pick.choose=function(t,r,i){if(e.pickCheck||(He("17.6"),e.pickCheck=!0),r==null&&(r=!0),t==null)return t;if(t.type=="Pick"||r){var o=t.choices||t,l;return Array.isArray(o)?(l=o[Math.floor(Math.random()*o.length)],e.Pick.choose(l)):o.constructor==={}.constructor?n(o.noPick)?n(o.max)?o:(n(o.integer)&&(o.integer=!1),l=e.Pick.rand(o.min,o.max,o.integer,o.negative),l):o.noPick:o instanceof Function?(o.count==null?o.count=0:o.count++,e.Pick.choose(o(i,!0))):t}else return t},e.Pick.getMinMax=function(t){return!n(t.min)&&!n(t.max)?t:Array.isArray(t)?e.arrayMinMax(t):t.type=="series"?e.arrayMinMax(t.array):{min:null,max:null}},e.scrollX=function(t,r){return He("18"),e.abstractScroll("X","Left",t,r)},e.scrollY=function(t,r){return He("19"),e.abstractScroll("Y","Top",t,r)},e.abstractScroll=function(t,r,i,o){He("20");var l=y(o),c=t=="X"?"Y":"X";if(n(i))return document.documentElement&&document.documentElement["scroll"+r]||document.body["scroll"+r];if(n(o))le.scrollTo(e["scroll"+c](),i);else{var p=50,v=o*(l=="s"?1e3:1);v<p&&(v=p);var w=v/p,b=e["scroll"+t](),_=i-b,E=_/w,S=0,P=setInterval(function(){S++,b+=E,le.scrollTo(e["scroll"+c](),b),S>=w&&(le.scrollTo(e["scroll"+c](),i),clearInterval(P))},p)}return i},e.windowWidth=function(){He("21");var t=isNaN(le.innerWidth)?le.clientWidth:le.innerWidth,r=isNaN(le.innerHeight)?le.clientHeight:le.innerHeight;if(e.mobile()&&!n(le.orientation)&&!le.parent&&(t>r&&Math.abs(le.orientation)!=90||r>t&&Math.abs(le.orientation)==90)){var i=t;t=r,r=i}return le.zdf&&le.zdf.swapRotation?r:t},e.windowHeight=function(){He("22");var t=isNaN(le.innerWidth)?le.clientWidth:le.innerWidth,r=isNaN(le.innerHeight)?le.clientHeight:le.innerHeight;if(e.mobile()&&!n(le.orientation)&&!le.parent&&(t>r&&Math.abs(le.orientation)!=90||r>t&&Math.abs(le.orientation)==90)){var i=t;t=r,r=i}return le.zdf&&le.zdf.swapRotation?t:r},e.browserZoom=function(){if(e.zimBZ)return n(e.zimBZA)?e.decimals((le.devicePixelRatio||1)/e.zimBZ1,2):e.zimBZA;if(He("22.2"),e.zimBZ=!0,typeof t>"u")if(le.zdf)var t=le.zdf;else return e.zimBZA=1,1;if(t.retina)e.zimBZ1=le.devicePixelRatio||1;else return e.zimBZA=1,1},e.getQueryString=function(t){if(He("22.5"),n(t)&&(t=location.search.replace("?","")),t=="")return{};for(var r=t.split("&"),i={},o=0;o<r.length;o++){var l=r[o].split("=");typeof i[l[0]]>"u"?i[l[0]]=decodeURIComponent((l[1]+"").replace(/\+/g,"%20")):typeof i[l[0]]=="string"?i[l[0]]=[i[l[0]],decodeURIComponent((l[1]+"").replace(/\+/g,"%20"))]:i[l[0]].push(decodeURIComponent((l[1]+"").replace(/\+/g,"%20")))}return i},e.swapHTML=function(t,r){return He("17.2"),e.swapProperties("innerHTML",vn(t),vn(r))},e.urlEncode=function(t){return He("23"),t=(t+"").toString(),encodeURIComponent(t).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+")},e.urlDecode=function(t){return He("24"),decodeURIComponent((t+"").replace(/\+/g,"%20"))},e.setCookie=function(t,r,i){if(He("25"),!(n(t)||n(r))){var o;if(i){var l=new Date;l.setTime(l.getTime()+i*24*60*60*1e3),o="; expires="+l.toGMTString()}else o="";return document.cookie=t+"="+escape(r)+o+"; path=/",!0}},e.getCookie=function(t){He("26");for(var r=document.cookie.split(/;\s*/),i=new Array,o,l=0;l<r.length;l++)o=r[l].split("="),i[o[0]]=o[1];if(!(typeof i[t]>"u"))return unescape(i[t])},e.deleteCookie=function(t){return He("27"),n(e.getCookie(t))?!1:(e.setCookie(t,"",-1),!0)},$e==null)return Ct&&Qr("ZIM >= 4.3.0 requires createjs namespace to be loaded (import createjs before zim)"),e;e.localToGlobal=function(r,i,o,l){if(e.coordinatesCheck||(He("50.43"),e.coordinatesCheck=!0),!(r==null||i==null)){var c=l.call(o,r,i),p=o.stage;if(!le.zdf){if(!p)return c;le.zdf={stage:p,canvas:p.canvas}}return c.x/=e.scaX,c.y/=e.scaY,c}},e.globalToLocal=function(r,i,o,l){if(e.coordinatesCheck||(He("50.43"),e.coordinatesCheck=!0),!(r==null||i==null)){var c=o.stage;if(!le.zdf){if(!c)return l.call(o,r,i);le.zdf={stage:c,canvas:c.canvas}}r*=e.scaX,i*=e.scaY;var p=l.call(o,r,i);return p}},e.localToLocal=function(r,i,o,l){if(e.coordinatesCheck||(He("50.43"),e.coordinatesCheck=!0),!(r==null||i==null||o==null)){var c=l.localToGlobal(r,i),p=l.stage;if(!le.zdf){if(!p)return o.globalToLocal(c.x,c.y);le.zdf={stage:p,canvas:p.canvas}}if(p||(p=le.zdf.stage),o==p)return c;if(c)return o.globalToLocal(c.x,c.y)}},e.displayBase=function(t){e.zimDBCheck||(He("50.432"),e.zimDBCheck=!0);var r=t;if(Object.defineProperty(t,"width",{enumerable:!0,get:function(){var v=this.getBounds();return n(v)?null:Math.abs(v.width*this.scaleX)},set:function(v){if(t.scaleDimensions!==!1){var w=this.getBounds();if(n(w)||w.width==0){Ct&&lt("DisplayObject() - width needs bounds set with setBounds()");return}var b=v/w.width;this.scaleX=this.scaleY=b}else{var _=t.width!=0?t.height/t.width:0;t.setWidth(v),t.setHeight(v*_),t.drawShape()}}}),Object.defineProperty(t,"height",{enumerable:!0,get:function(){var v=this.getBounds();return n(v)?null:Math.abs(v.height*this.scaleY)},set:function(v){if(t.scaleDimensions!==!1){var w=this.getBounds();if(n(w)||w.height==0){Ct&&lt("DisplayObject() - height needs bounds set with setBounds()");return}var b=v/w.height;this.scaleX=this.scaleY=b}else{var _=t.height!=0?t.width/t.height:0;t.setHeight(v),t.setWidth(v*_),t.drawShape()}}}),Object.defineProperty(t,"widthOnly",{enumerable:!0,get:function(){var v=this.getBounds();return n(v)?null:Math.abs(v.width*this.scaleX)},set:function(v){if(t.scaleDimensions!==!1){var w=this.getBounds();if((n(w)||w.width==0)&&Ct){lt("DisplayObject() - widthOnly needs bounds set with setBounds()");return}var b=v/w.width;this.scaleX=b}else t.setWidth(v),t.drawShape()}}),Object.defineProperty(t,"heightOnly",{enumerable:!0,get:function(){var v=this.getBounds();return n(v)?null:Math.abs(v.height*this.scaleY)},set:function(v){if(t.scaleDimensions!==!1){var w=this.getBounds();if((n(w)||w.height==0)&&Ct){lt("DisplayObject() - heightOnly needs bounds set with setBounds()");return}var b=v/w.height;this.scaleY=b}else t.setHeight(v),t.drawShape()}}),Object.defineProperty(t,"level",{enumerable:!0,get:function(){return this.parent?this.parent.getChildIndex(this):null},set:function(v){this.parent&&this.parent.setChildIndex(this,Math.max(0,Math.min(v,this.parent.numChildren-1)))}}),Object.defineProperty(t,"depth",{enumerable:!0,get:function(){return this._depth},set:function(v){if(this._depth=v,!n(this.vrChannel)){var w=this.vrParallaxDistance?v*this.vrParallax*this.vrParallaxDistance:0;this.vrChannel=="left"?this.x=this.vrStartX+v+w:this.vrChannel=="right"&&(this.x=this.vrStartX-v+w)}}}),Object.defineProperty(t,"blendMode",{enumerable:!0,get:function(){return this.compositeOperation},set:function(v){this.compositeOperation=v}}),!r.name){var i;Object.defineProperty(r,"name",{get:function(){return i},set:function(v){i=v,e.zimObjectIDs[v]=r}})}r._draggable,Object.defineProperty(r,"draggable",{get:function(){return this._draggable},set:function(v){v!=this._draggable&&(this._draggable=v,this._draggable?this.drag():this.noDrag())}});var o,l;r.on("mousedown",function(v){v.target.stage&&(o=v.target.stage.frame,o.allowDefault&&(l=!0,o.allowDefault=!1))}),r.on("pressup",function(){o&&l&&(o.allowDefault=!0)});for(var c=["hue","saturation","brightness","contrast"],p=0;p<c.length;p++)-function(){for(var v=c[p],w=0;w<2;w++)-function(){var b=w==0?"":"Batch";Object.defineProperty(r,v+b,{get:function(){return r.effects&&r.effects.multi?r.effects.multi[v]:0},set:function(_){!r.effects||!r.effects.multi?r.effect(new e.MultiEffect(v=="hue"?_:0,v=="saturation"?_:0,v=="brightness"?_:0,v=="contrast"?_:0)):r.effects.multi[v]=_,b==""&&r.updateEffects()}})}()}()},e.gD=function(t){if(e.zimGDCheck||(He("50.435"),e.zimGDCheck=!0),!!t){if(t.z_bc){var r=t.z_bc;r.width=r.height=1,r.getContext&&r.getContext("2d").clearRect(0,0,1,1),delete t.z_bc}e.KEYFOCUS==t&&(e.KEYFOCUS=null),le.KEYFOCUS==t&&(le.KEYFOCUS=null),t.veeObj&&(t.veeObj=null),t.draggable&&t.noDrag(),t.zimTweens&&t.stopAnimate(),t.zimWire&&t.noWire(),t.zimWired&&t.noWired(),t.zimClickHoldDownEvent&&t.noHold(),t.transformControls&&t.transformControls.dispose(),t.zimClickDownEvent&&(t.zimClickDownEvent=null),t.zimClickUpEvent&&(t.zimClickUpEvent=null),t.physics&&t.removePhysics(),t.name&&e.zimObjectIDs[t.name]==t&&delete e.zimObjectIDs[t.name]}},e.Stage=function(t,r,i){if(He("50.44"),!n(t)){var o=t.tagName=="CANVAS"?t:vn(t);n(o)||(this.cjsStage_constructor(t),this.setBounds(0,0,o.width,o.height),this.type="Stage",le.zdf||(le.zimDefaultFrame=le.zdf={stage:this}),i?$e.Touch.enable(this,!0):r&&$e.Touch.enable(this,!1),this.cache=function(l,c,p,v,w,b){if(n(p))if(n(l)){var _=this.getBounds();if(!n(_)){var E=this.borderWidth>0?this.borderWidth/2:0;l=_.x-E,c=_.y-E,p=_.width+E*2,v=_.height+E*2}}else p=l,v=c,l=0,c=0;return this.cjsStage_cache(l,c,p,v,w,b),this.z_bc=this.cacheCanvas,this},this.on("mousedown",function(l){var c=l.clone();c.type="pressdown",l.target.dispatchEvent(c)},void 0,!1,void 0,!0),this.loop=function(l,c,p,v,w,b){return e.loop(this,l,c,p,v,w,b)},this.hitTestGrid=function(l,c,p,v,w,b,_,E,S,P,A,R){return e.hitTestGrid(this,l,c,p,v,w,b,_,E,S,P,A,R)},this.disposeAllChildren=function(){for(var l=this.numChildren-1;l>=0;l--){var c=this.getChildAt(l);c.dispose&&c.dispose()}return this},this.frame=le.zdf,$e&&!$e.stageTransformable&&(le.zdf.retina||typeof exportRoot<"u")&&(Object.defineProperty(this,"scale",{get:function(){return this.cjsStage_scale},set:function(l){this.cjsStage_scaleX=l,this.cjsStage_scaleY=l,e.scaX=$e.stageTransformable?1:l,e.scaY=$e.stageTransformable?1:l}}),Object.defineProperty(this,"scaleX",{get:function(){return this.cjsStage_scaleX},set:function(l){this.cjsStage_scaleX=l,e.scaX=$e.stageTransformable?1:l}}),Object.defineProperty(this,"scaleY",{get:function(){return this.cjsStage_scaleY},set:function(l){this.cjsStage_scaleY=l,e.scaY=$e.stageTransformable?1:l}}),this.localToGlobal=function(l,c){return e.localToGlobal(l,c,this,this.cjsStage_localToGlobal)},this.globalToLocal=function(l,c){return e.globalToLocal(l,c,this,this.cjsStage_globalToLocal)},this.localToLocal=function(l,c,p){return e.localToLocal(l,c,p,this)}))}},e.extend(e.Stage,$e.Stage,["cache","localToLocal","localToGlobal","globalToLocal"],"cjsStage",!1),e.StageGL=function(t,r,i,o){if(He("50.45"),!n(t)){var l=t.tagName=="CANVAS"?t:vn(t);n(l)||(this.cjsStageGL_constructor(t,r),this.setBounds(0,0,l.width,l.height),this.type="StageGL",le.zdf||(le.zdf={stage:this}),o?$e.Touch.enable(this,!0):i&&$e.Touch.enable(this,!1),this.cache=function(c,p,v,w,b,_){if(n(v))if(n(c)){var E=this.getBounds();if(!n(E)){var S=this.borderWidth>0?this.borderWidth/2:0;c=E.x-S,p=E.y-S,v=E.width+S*2,w=E.height+S*2}}else v=c,w=p,c=0,p=0;return this.cjsStageGL_cache(c,p,v,w,b,_),this.z_bc=this.cacheCanvas,this},this.on("mousedown",function(c){var p=c.clone();p.type="pressdown",c.target.dispatchEvent(p)},void 0,!1,void 0,!0),this.loop=function(c,p,v,w,b,_){return e.loop(this,c,p,v,w,b,_)},this.hitTestGrid=function(c,p,v,w,b,_,E,S,P,A,R,T){return e.hitTestGrid(this,c,p,v,w,b,_,E,S,P,A,R,T)},this.disposeAllChildren=function(){for(var c=this.numChildren-1;c>=0;c--){var p=this.getChildAt(c);p.dispose&&p.dispose()}return this},this.frame=le.zdf,$e&&!$e.stageTransformable&&(le.zdf.retina||typeof exportRoot<"u")&&(Object.defineProperty(this,"scale",{get:function(){return this.cjsStage_scale},set:function(c){this.cjsStage_scaleX=c,this.cjsStage_scaleY=c,e.scaX=$e.stageTransformable?1:c,e.scaY=$e.stageTransformable?1:c}}),Object.defineProperty(this,"scaleX",{get:function(){return this.cjsStage_scaleX},set:function(c){this.cjsStage_scaleX=c,e.scaX=$e.stageTransformable?1:c}}),Object.defineProperty(this,"scaleY",{get:function(){return this.cjsStage_scaleY},set:function(c){this.cjsStage_scaleY=c,e.scaY=$e.stageTransformable?1:c}}),this.localToGlobal=function(c,p){return e.localToGlobal(c,p,this,this.cjsStageGL_localToGlobal)},this.globalToLocal=function(c,p){return e.globalToLocal(c,p,this,this.cjsStageGL_globalToLocal)},this.localToLocal=function(c,p,v){return e.localToLocal(c,p,v,this)}))}},e.extend(e.StageGL,$e.StageGL,["cache","localToLocal","localToGlobal","globalToLocal"],"cjsStageGL",!1),e.Container=function(t,r,i,o,l,c,p){var v="a, b, c, d, style, group, inherit",w;if(w=vt(e.Container,arguments,v,this))return w;e.containerCheck||(He("50.5"),He("50.435"),e.containerCheck=!0),this.cjsContainer_constructor(),this.type="Container",this.group=c;var b=this,_=l===!1?{}:e.getStyle(this.type,this.group,p);n(t)&&(t=_.a!=null?_.a:null),n(r)&&(r=_.b!=null?_.b:null),n(i)&&(i=_.c!=null?_.c:null),n(o)&&(o=_.d!=null?_.d:null);var E=S(t,r,i,o);function S(A,R,T,L){var I=[];return n(A)?I=[A,R,T,L]:n(R)?A.x?I=[A.x,A.y,A.width,A.height]:(I[0]=0,I[1]=0,I[2]=A,I[3]=A):n(T)?(I[0]=0,I[1]=0,I[2]=A,I[3]=R):(I[0]=A,I[1]=R,I[2]=T,I[3]=L),n(I[3])&&(I[3]=I[2]),I}n(t)||this.setBounds(E[0],E[1],E[2],E[3]),this.cache=function(A,R,T,L,I,C,k,Y,W){if(b.type=="AC"&&le.zdf)return le.zdf.ac("cache",arguments,b),b;var G="a,b,c,d,scale,options,margin,rtl,willReadFrequently",F;if(F=vt(b.cache,arguments,G))return F;var B=b.getBounds();if(n(T))if(n(A)){if(!n(B)){var q=b.borderWidth>0?b.borderWidth/2:0;A=B.x-q,R=B.y-q,T=B.width+q*2,L=B.height+q*2}}else T=A,L=R,A=0,R=0;return b.type=="Triangle"&&(A-=b.borderWidth?b.borderWidth:0,T+=b.borderWidth?b.borderWidth*2:0,R-=b.borderWidth?b.borderWidth:0,L+=b.borderWidth?b.borderWidth*2:0),n(k)&&(k=0),b.cjsContainer_cache(A-k,R-k,T+k*2,L+k*2,I,C,Y,W),B&&b.setBounds(B.x,B.y,B.width,B.height),b.z_bc=b.cacheCanvas,b},this.uncache=function(){return b.cjsContainer_uncache(),b},this.childrenToBitmap=function(){var A=this.cacheCanvas,R=new e.Bitmap(this.cache().cacheCanvas);return A||this.uncache(),this.removeAllChildren(),R.addTo(this),this};var P=le.zdf||1;$e&&!$e.stageTransformable&&P.retina&&(this.localToGlobal=function(A,R){return e.localToGlobal(A,R,this,this.cjsContainer_localToGlobal)},this.globalToLocal=function(A,R){return e.globalToLocal(A,R,this,this.cjsContainer_globalToLocal)},this.localToLocal=function(A,R,T){return e.localToLocal(A,R,T,this)}),this.setBounds=function(A,R,T,L){var I=S(A,R,T,L);return b.cjsContainer_setBounds(I[0],I[1],I[2],I[3]),b},this.getBounds=function(A){return A?b.boundsToGlobal(null,null,null,A):b.cjsContainer_getBounds()},this.disposeAllChildren=function(){for(var A=this.numChildren-1;A>=0;A--){var R=this.getChildAt(A);R.dispose&&R.dispose()}return this},e.displayBase(b),l!==!1&&e.styleTransforms(this,_),this.clone=function(A){if(this.type=="AC"&&le.zdf)return Ct&&lt("ZIM asset() - cannot clone lazy-loaded asset - use Frame() assets parameter or loadAssets() method"),le.zdf.ac("clone",arguments,this),this;var R=this.getBounds();return n(R)&&(R={x:null,y:null,width:null,height:null}),this.cloneChildren(this.cloneProps(new e.Container(R.x,R.y,R.width,R.height,l,this.group,p)),A)},this.hasProp=function(A){return!n(this[A])||Object.prototype.hasOwnProperty.call(this,A)}},e.Container.prototype.dispose=function(t){return u(this,t),!0},e.Container.prototype.specialColor=function(t,r,i){if(r.type=="GradientColor"){if(!n(r.angle))if(i.width){var o=i.getBounds();if(r.angle+=360*1e5,r.angle%=360,i.type=="Circle"){var l=o.width/2*Math.cos(r.angle*RAD),c=o.width/2*Math.sin(r.angle*RAD);r.x0=-l,r.y0=-c,r.x1=l,r.y1=c}else{var p=r.angle%90,v=o.width*Math.sin(p*RAD),w=v*Math.sin(p*RAD),b=-v*Math.cos(p*RAD),_=o.height*Math.sin(p*RAD),E=o.width+_*Math.cos(p*RAD),S=_*Math.sin(p*RAD),P=o.height*Math.sin(p*RAD),A=-P*Math.cos(p*RAD),R=o.height-P*Math.sin(p*RAD);r.angle>=0&&r.angle<90?(r.x0=o.x+w,r.y0=o.y+b,r.x1=o.x+E,r.y1=o.y+S):r.angle>=90&&r.angle<180?(r.x0=o.x+w,r.y0=o.y+b,r.x1=o.x+A,r.y1=o.y+R):r.angle>=180&&r.angle<270?(r.x0=o.x+E,r.y0=o.y+S,r.x1=o.x+w,r.y1=o.y+b):(r.x0=o.x+A,r.y0=o.y+R,r.x1=o.x+w,r.y1=o.y+b)}}else{t.style=r.colors[0];return}t.linearGradient(r.colors,r.ratios,r.x0,r.y0,r.x1,r.y1)}else if(r.type=="RadialColor"){if(n(r.x0))if(i.width){var o=i.getBounds();r.r0=0,i.type=="Circle"?(r.x0=0,r.y0=0,r.r1=o.width/2):(r.x0=o.x+o.width/2,r.y0=o.y+o.height/2,r.r1=Math.sqrt(Math.pow(o.width/2,2)+Math.pow(o.height/2,2))),r.x1=r.x0,r.y1=r.y0}else{t.style=r.colors[0];return}t.radialGradient(r.colors,r.ratios,r.x0,r.y0,r.r0,r.x1,r.y1,r.r1)}else r.type=="BitmapColor"&&t.bitmap(r.image,r.repetition,r.matrix)};function u(t,r){if(t&&e.gD(t),!r&&t&&t.dispose&&t.dispose!==e.Container.prototype.dispose&&t.dispose(null,null,!0),t&&t.addChild&&(t.dispatchEvent("removed"),t.removeAllEventListeners(),t.numChildren))for(var i=t.numChildren-1;i>=0;i--)u(t.getChildAt(i));t&&t.parent&&t.parent.removeChild(t)}e.extend(e.Container,$e.Container,["cache","uncache","setBounds","getBounds","clone","localToLocal","localToGlobal","globalToLocal"],"cjsContainer",!1),Yn(e.Container.prototype),e.Shape=function(t,r,i,o,l,c,p,v,w){var b="a, b, c, d, graphics, optimize, style, group, inherit",_;if(_=vt(e.Shape,arguments,b,this))return _;He("50.6"),this.cjsShape_constructor(l),this.type="Shape",this.group=v;var E=p===!1?{}:e.getStyle(this.type,this.group,w),S=this;n(t)&&(t=E.a!=null?E.a:null),n(r)&&(r=E.b!=null?E.b:null),n(i)&&(i=E.c!=null?E.c:null),n(o)&&(o=E.d!=null?E.d:null),n(l)&&(l=E.graphics!=null?E.graphics:null),n(c)&&(c=E.optimize!=null?E.optimize:!1);var P=A(t,r,i,o);function A(I,C,k,Y){var W=[];return n(I)?W=[I,C,k,Y]:n(C)?I.x?W=[I.x,I.y,I.width,I.height]:(W[0]=0,W[1]=0,W[2]=I,W[3]=I):n(k)?(W[0]=0,W[1]=0,W[2]=I,W[3]=C):(W[0]=I,W[1]=C,W[2]=k,W[3]=Y),n(W[3])&&(W[3]=W[2]),W}if(n(t)||this.setBounds(P[0],P[1],P[2],P[3]),!c)for(var R=["mt","lt","a","at","bt","ct","qt","cp","c","f","lf","rf","bf","ef","ss","sd","s","ls","rs","bs","es","dr","rr","rc","dc","de","dp","pg","p"],T=0;T<R.length;T++)~function(){var I=T;S[R[I]]=function(){return R[I]=="ct"?S.graphics.curveTo.apply(S.graphics,arguments):S.graphics[R[I]].apply(S.graphics,arguments),S}}();Object.defineProperty(S,"command",{get:function(){return S.graphics.command},set:function(){}}),this.cache=function(I,C,k,Y,W,G,F,B,q){var Z="a,b,c,d,scale,options,margin,rtl,willReadFrequently",X;if(X=vt(S.cache,arguments,Z))return X;var ne=S.getBounds();if(n(k))if(n(I)){if(!n(ne)){var $=S.borderWidth>0?S.borderWidth/2:0;I=ne.x-$,C=ne.y-$,k=ne.width+$*2,Y=ne.height+$*2}}else k=I,Y=C,I=0,C=0;return n(F)&&(F=0),S.cjsShape_cache(I-F,C-F,k+F*2,Y+F*2,W,G,B,q),S.z_bc=S.cacheCanvas,S},this.setBounds=function(I,C,k,Y){var W=A(I,C,k,Y);return this.cjsShape_setBounds(W[0],W[1],W[2],W[3]),this},this.getBounds=function(I){return I?S.boundsToGlobal(null,null,null,I):S.cjsShape_getBounds()},p!==!1&&e.styleTransforms(this,E),this.clone=function(I){n(I)&&(I=!0);var C=this.getBounds();n(C)&&(C={x:null,y:null,width:null,height:null});var k=S.cloneProps(new e.Shape(C.x,C.y,C.width,C.height,l,p,v,w));return I?k.graphics=S.graphics.clone():k.graphics=S.graphics,k};var L=le.zdf||1;$e&&!$e.stageTransformable&&L.retina&&(this.localToGlobal=function(I,C){return e.localToGlobal(I,C,this,this.cjsShape_localToGlobal)},this.globalToLocal=function(I,C){return e.globalToLocal(I,C,this,this.cjsShape_globalToLocal)},this.localToLocal=function(I,C,k){return e.localToLocal(I,C,k,this)}),this.hasProp=function(I){return!n(this[I])||Object.prototype.hasOwnProperty.call(this,I)},e.displayBase(S),this.dispose=function(){e.gD(this),this.graphics.c(),this.dispatchEvent("removed"),this.removeAllEventListeners(),this.parent&&this.parent.removeChild(this)}},e.extend(e.Shape,$e.Shape,["cache","clone","setBounds","getBounds","localToLocal","localToGlobal","globalToLocal"],"cjsShape",!1),Yn(e.Shape.prototype),e.Bitmap=function(t,r,i,o,l,c,p,v,w){var b="image, width, height, left, top, scale, style, group, inherit",_;if(_=vt(e.Bitmap,arguments,b,this))return _;He("50.7"),this.group=v;var E=p===!1?{}:e.getStyle("Bitmap",this.group,w);n(c)&&(c=E.scale!=null?E.scale:1),n(r)&&(r=E.width!=null?E.width:t?t.width:100),n(i)&&(i=E.height!=null?E.height:t?t.height:100),n(o)&&(o=E.left!=null?E.left:0),n(l)&&(l=E.top!=null?E.top:0);var S=!1,P=t;if(!n(t)&&t.uncache){S=!0;var A=t.cacheCanvas,R=t;t.cache(o,l,r,i,c),this.z_bc=t=t.cacheCanvas}this.cjsBitmap_constructor(t),R&&!A&&R.uncache();var T=this;this.type="Bitmap",!n(r)&&!n(i)&&this.setBounds(0,0,r,i),this.drawImageData=function(k,Y,W,G,F,B){if(n(k)&&(k=0),n(Y)&&(Y=0),n(W)&&(W=0),n(G)&&(G=0),n(F)&&(F=r),n(B)&&(B=i),!T.proxyCanvas){var q=T.proxyCanvas=document.createElement("canvas");q.setAttribute("width",r),q.setAttribute("height",i),T.proxyContext=q.getContext("2d"),t=P=T.image=q}T.proxyContext&&T.proxyContext.putImageData(T.imageData,k,Y,W,G,F,B)},le.zdf&&(le.zdf.canvas.getContext("2d")?this.imageData=le.zdf.canvas.getContext("2d").createImageData(r,i):this.imageData=document.createElement("canvas").getContext("2d").createImageData(r,i),n(t)&&T.drawImageData(),t&&t.match&&t.match(/data:image/i)&&setTimeout(function(){T.stage&&T.stage.update(),setTimeout(function(){T.stage&&T.stage.update()},50)},50)),t&&t.nodeName&&t.nodeName.toLowerCase()!="video"&&(S?T.sourceRect={x:0,y:0,width:r*c,height:i*c}:T.sourceRect={x:o,y:l,width:r,height:i});function L(k,Y,W,G){var F=[];return n(k)?F=[k,Y,W,G]:n(Y)?k.x?F=[k.x,k.y,k.width,k.height]:(F[0]=0,F[1]=0,F[2]=k,F[3]=k):n(W)?(F[0]=0,F[1]=0,F[2]=k,F[3]=Y):(F[0]=k,F[1]=Y,F[2]=W,F[3]=G),n(F[3])&&(F[3]=F[2]),F}this.setBounds=function(k,Y,W,G){var F=L(k,Y,W,G);return T.cjsBitmap_setBounds(F[0],F[1],F[2],F[3]),T},this.getBounds=function(k){return k?T.boundsToGlobal(null,null,null,k):T.cjsBitmap_getBounds()},this.cache=function(k,Y,W,G,F,B,q,Z){var X="a,b,c,d,scale,options,rtl,willReadFrequently",ne;if(ne=vt(T.cache,arguments,X))return ne;var $;if(n(W))if(n(k)){if($=this.getBounds(),!n($)){var re=this.borderWidth>0?this.borderWidth/2:0;k=$.x-re,Y=$.y-re,W=$.width+re*2,G=$.height+re*2}}else W=k,G=Y,k=0,Y=0;return $=T.getBounds(),T.cjsBitmap_cache(k,Y,W,G,F,B,q,Z),T.setBounds($.x,$.y,$.width,$.height),T.z_bc=T.cacheCanvas,T},this.clone=function(){var k=this.cloneProps(new e.Bitmap(P,r,i,o,l,c,p,this.group,w));return k.cloned=!0,k.src=T.src,k.file=T.file,k.image=T.image,k.svg=T.svg,k.item=T.item,k};var I=le.zdf||1;$e&&!$e.stageTransformable&&I.retina&&(this.localToGlobal=function(k,Y){return e.localToGlobal(k,Y,this,this.cjsBitmap_localToGlobal)},this.globalToLocal=function(k,Y){return e.globalToLocal(k,Y,this,this.cjsBitmap_globalToLocal)},this.localToLocal=function(k,Y,W){return e.localToLocal(k,Y,W,this)}),this.hasProp=function(k){return!n(this[k])||Object.prototype.hasOwnProperty.call(this,k)};var C;this.getColorAt=function(k,Y,W){C||(T.cache(null,null,null,null,null,null,null,!0),C=T.cacheCanvas.getContext("2d"),T.uncache());var G=C.getImageData(k,Y,1,1).data;return G[3]/=255,W?G:"rgba("+G[0]+","+G[1]+","+G[2]+","+G[3]+")"},this.keyOut=function(k,Y,W){n(k)&&(k="#389b26"),n(Y)&&(Y=.1),Array.isArray(k)||(k=[k]),Array.isArray(Y)||(Y=[Y]),!n(W)&&!Array.isArray(W)&&(W=[W]);var G,F,B=[],q=[],Z=[];for(G=0;G<k.length;G++)B[G]=e.convertColor(k[G],"array"),Y[G]!=null?q[G]=Y[G]*255:q[G]=Y[0]*255,W&&(W[G]!=null?(Z[G]=e.convertColor(W[G],"array"),Z[G][3]*=255):(Z[G]=e.convertColor(W[0],"array"),Z[G][3]*=255));T.cacheCanvas&&T.updateCache(),C||(T.cache(null,null,null,null,null,null,null,!0),C=T.cacheCanvas.getContext("2d"));var X=C.getImageData(o,l,r,i),ne=X.data,$=ne.length/4;if(W)for(G=0;G<$;G++){var re=ne[G*4+0],de=ne[G*4+1],Q=ne[G*4+2];for(F=0;F<k.length;F++)re>B[F][0]-q[F]&&re<B[F][0]+q[F]&&de>B[F][1]-q[F]&&de<B[F][1]+q[F]&&Q>B[F][2]-q[F]&&Q<B[F][2]+q[F]&&(ne[G*4+0]=Z[F][0],ne[G*4+1]=Z[F][1],ne[G*4+2]=Z[F][2],ne[G*4+3]=Z[F][3])}else for(G=0;G<$;G++){var re=ne[G*4+0],de=ne[G*4+1],Q=ne[G*4+2];for(F=0;F<k.length;F++)re>B[F][0]-q[F]&&re<B[F][0]+q[F]&&de>B[F][1]-q[F]&&de<B[F][1]+q[F]&&Q>B[F][2]-q[F]&&Q<B[F][2]+q[F]&&(ne[G*4+3]=0)}return C.putImageData(X,l,o),this},e.displayBase(T),p!==!1&&e.styleTransforms(this,E),this.doDispose=function(){e.gD(this),this.dispatchEvent("removed"),this.removeAllEventListeners(),this.cloned||this.id&&(this.stage&&this.stage.frame?I=this.stage.frame:I=le.zdf,I&&I.assets&&I.assets[this.id]&&delete I.assets[this.id],e.assets[this.id]&&delete e.assets[this.id]),this.parent&&this.parent.removeChild(this)}},e.Bitmap.fromData=function(t,r){var i=100,o=100,l=new Image;l.onload=function(){i=l.naturalWidth,o=l.naturalHeight,n(i)&&(i=l.width),n(o)&&(o=l.height);var c=new e.Bitmap(t,i,o);setTimeout(function(){r(c)},50)},l.src=t},e.extend(e.Bitmap,$e.Bitmap,["cache","clone","dispose","setBounds","getBounds","localToLocal","localToGlobal","globalToLocal"],"cjsBitmap",!1),e.Bitmap.prototype.dispose=function(){return this.doDispose()},Yn(e.Bitmap.prototype),e.Sprite=function(t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,T,L,I,C){var k="image, cols, rows, count, offsetX, offsetY, spacingX, spacingY, width, height, animations, json, id, globalControl, spriteSheet, label, frame, style, group, inherit",Y;if(Y=vt(e.Sprite,arguments,k,this))return Y;He("50.8"),this.type="Sprite",this.group=I;var W=L===!1?{}:e.getStyle(this.type,this.group,C),G=this,F;if(n(T)&&(T=W.frame!=null?W.frame:le.zdf),t&&typeof t=="string"&&(t=T.asset(t)),n(E)&&!n(t)){n(r)&&(r=W.cols!=null?W.cols:1),n(i)&&(i=W.rows!=null?W.rows:1),n(o)&&(o=W.count!=null?W.count:r*i),n(l)&&(l=W.offsetX!=null?W.offsetX:0),n(c)&&(c=W.offsetY!=null?W.offsetY:0),n(p)&&(p=W.spacingX!=null?W.spacingX:0),n(v)&&(v=W.spacingY!=null?W.spacingY:0),n(w)&&(w=W.width!=null?W.width:t.width),n(b)&&(b=W.height!=null?W.height:t.height),t.bitmap&&(t=t.bitmap);var B=(w-l+p)/r-p,q=(b-c+v)/i-v,Z=[],X=0;e:for(var ne=0;ne<i;ne++)for(var $=0;$<r;$++){if(++X>o)break e;Z.push([l+$*(B+p),c+ne*(q+v),B,q])}d(t,Z,_)}else if(A)F=A,_=F.animations;else if(E){var T=G.stage?G.stage.frame:le.zdf;typeof E=="string"&&(E=T.asset(E));var re,de,Q;if(E.frames&&!Array.isArray(E.frames)){re=[];for(de in E.frames)Q=E.frames[de].frame,re.push([Q.x,Q.y,Q.w,Q.h]);E.frames=re}if(E.frames&&!Array.isArray(E.frames[0])){for(re=[],de=0;de<E.frames.length;de++){var Q=E.frames[de].frame;re.push([Q.x,Q.y,Q.w,Q.h])}E.frames=re}if(!E.images&&E.meta&&E.meta.image&&(E.images=[E.meta.image]),Z=E.frames,_=E.animations,!n(t))d(t,Z,_);else{var U=E.images?E.images[0]:null;if(!U||!U.split)F=new $e.SpriteSheet(E);else{var g=[];e.loop(E.images,function(V){var ce=V.split("/").pop();T.asset(ce)&&T.asset(ce).type!="EmptyAsset"?g.push(T.asset(ce)):T.asset(V)&&T.asset(V).type!="EmptyAsset"||T.asset(V).type!="EmptyAsset"?g.push(T.asset(V)):Ct&&lt("Sprite() - please preload Sprite in Frame or with loadAssets")}),d(g,Z,_)}}}else return;function d(O,V,ce){Array.isArray(O)||(O=[O]),e.loop(O,function(N,ue){O[ue]=N.image});var H={images:O,frames:V,animations:ce||[]};F=new $e.SpriteSheet(H)}this.animations=_,this.cjsSprite_constructor(F,R),n(R)||this.stop(),n(S)&&(S=e.makeID()),this.id=S,n(P)&&(P=!0),G.globalControl=P;var h=0,x;this.parseFrames=function(O,V,ce,H){var N=[],ue=Number.MAX_VALUE,fe=0;if(n(O))n(V)&&(V=0),n(ce)&&(ce=G.totalFrames-1),z(V,ce);else{if(n(G.animations)||n(G.animations[O]))return[];var ae=G.animations[O];Ie(ae)}function Ie(Se){Array.isArray(Se)?ge(Se):Se.constructor=={}.constructor?Be(Se):isNaN(Se)||N.push({f:Math.floor(Se),s:1})}function ge(Se){z(Se[0],Se[1],Se[3]),Se[2]&&!n(G.animations[Se[2]])&&Ie(G.animations[Se[2]])}function Be(Se){if(!n(Se.frames)){n(Se.speed)&&(Se.speed=1);for(var ie=0;ie<Se.frames.length;ie++)Se.speed<ue&&(ue=Se.speed),Se.speed>fe&&(fe=Se.speed),N.push({f:Se.frames[ie],s:Se.speed});Se.next&&!n(G.animations[Se.next])&&Ie(G.animations[Se.next])}}function z(Se,ie,pe){n(pe)&&(pe=1);var be;if(ie>Se)for(be=Se;be<=ie;be++)he(be);else for(be=ie;be<=Se;be++)he(Se-(be-ie));function he(Pe){pe<ue&&(ue=pe),pe>fe&&(fe=pe),N.push({f:Pe,s:pe})}}if(H)return N;ue=e.constrain(e.decimals(ue),.1),fe=e.constrain(e.decimals(fe),.1);for(var Ye=[],te=ue!=fe,K,xe=0;xe<N.length;xe++)if(K=N[xe],te)for(var _e=0;_e<e.constrain(Math.round(ue<1?K.s/ue:K.s),.1);_e++)Ye.push(K.f);else Ye.push(K.f);return Ye},this.run=function(O,V,ce,H,N,ue,fe,ae,Ie,ge,Be,z,Ye,te,K,xe,_e,Se,ie,pe,be,he,Pe,Re,ve,Ae,ye,Fe,De){var ke="time, label, call, params, wait, waitedCall, waitedParams, loop, loopCount, loopWait, loopCall, loopParams, loopWaitCall, loopWaitParams, loopPick, rewind, rewindWait, rewindCall, rewindParams, rewindWaitCall, rewindWaitParams, rewindTime, rewindEase, startFrame, endFrame, tweek, id, globalControl, pauseOnBlur",oe;if(oe=vt(G.run,arguments,ke))return oe;var Ge=y(),We;n(Ae)&&(Ae=1),n(ye)||(G.id=ye),n(Fe)||(G.globalControl=Fe);var Qe;if(Array.isArray(V)){var st,yt;We=[],Qe=0;for(var Le,ze=0;ze<V.length;ze++){st=V[ze],st.lookup=G.parseFrames(st.label,st.startFrame,st.endFrame),ze==0&&(Le=st.lookup[0]),delete st.startFrame,delete st.endFrame,st.obj=e.merge(st.obj,{normalizedFrame:st.lookup.length-1}),st.set=e.merge(st.set,{normalizedFrames:{noPick:st.lookup},normalizedFrame:0}),n(st.wait)&&(st.wait=Qe*Ae),yt=st.label,delete st.label,We.push(st),Qe=0;var ot=n(st.time)?O:st.time;ve-Re>0&&(Qe=ot/(ve-Re)/2)}if(We.length==0)return this;We.length==1?(O=We[0].time,V=yt,Ce()):G.gotoAndStop(Le)}else Ce();function Ce(){x=G.parseFrames(V,Re,ve),h=0,G.gotoAndStop(x[h]),Re=ve=null,We={normalizedFrame:x.length-1}}n(O)&&(O=Ge=="s"?1:1e3),G.running&&G.stopAnimate(G.id),G.running=!0,Array.isArray(We)||(Qe=0,ve-Re>0&&(Qe=O/Math.abs(ve-Re)/2),x&&x.length>0&&(Qe=O/x.length/2),!n(ae)&&n(ge)&&(ge=Qe*Ae),!n(xe)&&n(_e)&&(_e=Qe*Ae));var me=function(){G.running=!1,G.stop(),ce&&typeof ce=="function"&&ce(H||G)};return e.animate({target:G,obj:We,time:O,ease:"linear",call:me,params:H,wait:N,waitedCall:ue,waitedParams:fe,loop:ae,loopCount:Ie,loopWait:ge,loopCall:Be,loopParams:z,loopWaitCall:Ye,loopWaitParams:te,rewind:xe,rewindWait:_e,rewindCall:Se,rewindParams:ie,rewindWaitCall:pe,rewindWaitParams:be,rewindTime:he,rewindEase:Pe,override:!1,pauseOnBlur:De,id:G.id}),G.runPaused=!1,G},this.runPaused=!0,this.pauseRun=function(O){return n(O)&&(O=!0),G.runPaused=O,G.globalControl?e.pauseAnimate(O,G.id):G.pauseAnimate(O,G.id),G},this.stopRun=function(){return G.runPaused=!0,G.running=!1,G.globalControl?e.stopAnimate(G.id):G.stopAnimate(G.id),G},Object.defineProperty(this,"frame",{get:function(){return this.currentFrame},set:function(O){O=Math.round(O),this.paused?this.gotoAndStop(O):this.gotoAndPlay(O)}}),Object.defineProperty(this,"normalizedFrame",{get:function(){return h},set:function(O){h=Math.round(O),this.gotoAndStop(x[h])}}),Object.defineProperty(this,"normalizedFrames",{get:function(){return x},set:function(O){x=O}}),Object.defineProperty(this,"totalFrames",{get:function(){return F.getNumFrames()},set:function(){lt("zim.Sprite - totalFrames is read only")}}),L!==!1&&e.styleTransforms(this,W),this.clone=function(){var O=this.cloneProps(new e.Sprite(t,r,i,o,l,c,p,v,w,b,_,E,null,P,A,R,T,L,this.group,C));return G.frame>=0&&O.run({startFrame:G.frame,endFrame:G.frame}),O},$e&&!$e.stageTransformable&&T.retina&&(this.localToGlobal=function(O,V){return e.localToGlobal(O,V,this,this.cjsSprite_localToGlobal)},this.globalToLocal=function(O,V){return e.globalToLocal(O,V,this,this.cjsSprite_globalToLocal)},this.localToLocal=function(O,V,ce){return e.localToLocal(O,V,ce,this)}),this.hasProp=function(O){return!n(this[O])||Object.prototype.hasOwnProperty.call(this,O)},e.displayBase(G);function j(O,V,ce,H){var N=[];return n(O)?N=[O,V,ce,H]:n(V)?O.x?N=[O.x,O.y,O.width,O.height]:(N[0]=0,N[1]=0,N[2]=O,N[3]=O):n(ce)?(N[0]=0,N[1]=0,N[2]=O,N[3]=V):(N[0]=O,N[1]=V,N[2]=ce,N[3]=H),n(N[3])&&(N[3]=N[2]),N}this.setBounds=function(O,V,ce,H){var N=j(O,V,ce,H);return G.cjsSprite_setBounds(N[0],N[1],N[2],N[3]),G},this.getBounds=function(O){return O?G.boundsToGlobal(null,null,null,O):G.cjsSprite_getBounds()},this.dispose=function(){e.gD(this),this.dispatchEvent("removed"),this.removeAllEventListeners(),this.parent&&this.parent.removeChild(this)}},e.extend(e.Sprite,$e.Sprite,["clone","setBounds","getBounds","localToLocal","localToGlobal","globalToLocal"],"cjsSprite",!1),Yn(e.Sprite.prototype),e.MovieClip=function(t,r,i,o,l,c,p){var v="mode, startPosition, loop, labels, style, group, inherit",w;if(w=vt(e.MovieClip,arguments,v,this))return w;He("50.9"),this.type="MovieClip",this.group=c;var b=l===!1?{}:e.getStyle(this.type,this.group,p);n(t)&&(t=b.mode!=null?b.mode:null),n(r)&&(r=b.startPosition!=null?b.startPosition:null),n(i)&&(i=b.loop!=null?b.loop:null),n(o)&&(o=b.labels!=null?b.labels:null),this.cjsMovieClip_constructor(t,r,i,o),l!==!1&&e.styleTransforms(this,b),this.clone=function(){return this.cloneProps(new e.MovieClip(t,r,i,o,l,this.group,p))},this.hasProp=function(S){return!n(this[S])||Object.prototype.hasOwnProperty.call(this,S)};var _=le.zdf||1;$e&&!$e.stageTransformable&&_.retina&&(this.localToGlobal=function(S,P){return e.localToGlobal(S,P,this,this.cjsMovieClip_localToGlobal)},this.globalToLocal=function(S,P){return e.globalToLocal(S,P,this,this.cjsMovieClip_globalToLocal)},this.localToLocal=function(S,P,A){return e.localToLocal(S,P,A,this)}),e.displayBase(this);function E(S,P,A,R){var T=[];return n(S)?T=[S,P,A,R]:n(P)?S.x?T=[S.x,S.y,S.width,S.height]:(T[0]=0,T[1]=0,T[2]=S,T[3]=S):n(A)?(T[0]=0,T[1]=0,T[2]=S,T[3]=P):(T[0]=S,T[1]=P,T[2]=A,T[3]=R),n(T[3])&&(T[3]=T[2]),T}this.setBounds=function(S,P,A,R){var T=E(S,P,A,R);return that.cjsMovieClip_setBounds(T[0],T[1],T[2],T[3]),that},this.getBounds=function(S){return S?that.boundsToGlobal(null,null,null,S):that.cjsMovieClip_getBounds()},this.dispose=function(){e.gD(this),this.dispatchEvent("removed"),this.removeAllEventListeners(),this.parent&&this.parent.removeChild(this)}},e.extend(e.MovieClip,$e.MovieClip,["clone","setBounds","getBounds","localToLocal","localToGlobal","globalToLocal"],"cjsMovieClip",!1),Yn(e.MovieClip.prototype),e.SVGContainer=function(t,r,i,o,l,c,p,v){var w="svg, splitTypes, geometric, showControls, interactive, style, group, inherit",b;if(b=vt(e.SVGContainer,arguments,w,this))return b;He("50.95"),this.group=p;var _=c===!1?{}:e.getStyle("SVGContainer",this.group,v);t&&t.type=="Bitmap"&&(t=t.svg);var E=this,S=new e.Point(0,0),P;function A(){function j(Be,z){return N(Be)||H(Be,z)||V(Be,z)||O()}function O(){throw new TypeError("Invalid")}function V(Be,z){if(Be){if(typeof Be=="string")return ce(Be,z);var Ye=Object.prototype.toString.call(Be).slice(8,-1);if(Ye==="Object"&&Be.constructor&&(Ye=Be.constructor.name),Ye==="Map"||Ye==="Set")return Array.from(Be);if(Ye==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ye))return ce(Be,z)}}function ce(Be,z){(z==null||z>Be.length)&&(z=Be.length);for(var Ye=0,te=new Array(z);Ye<z;Ye++)te[Ye]=Be[Ye];return te}function H(Be,z){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(Be)))){var Ye=[],te=!0,K=!1,xe=void 0;try{for(var _e=Be[Symbol.iterator](),Se;!(te=(Se=_e.next()).done)&&(Ye.push(Se.value),!(z&&Ye.length===z));te=!0);}catch(ie){K=!0,xe=ie}finally{try{!te&&_e.return!=null&&_e.return()}finally{if(K)throw xe}}return Ye}}function N(Be){if(Array.isArray(Be))return Be}var ue=Math.PI*2,fe=function(z,Ye,te,K,xe,_e,Se){var ie=z.x,pe=z.y;ie*=Ye,pe*=te;var be=K*ie-xe*pe,he=xe*ie+K*pe;return{x:be+_e,y:he+Se}},ae=function(z,Ye){var te=Ye===1.5707963267948966?.551915024494:Ye===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(Ye/4),K=Math.cos(z),xe=Math.sin(z),_e=Math.cos(z+Ye),Se=Math.sin(z+Ye);return[{x:K-xe*te,y:xe+K*te},{x:_e+Se*te,y:Se-_e*te},{x:_e,y:Se}]},Ie=function(z,Ye,te,K){var xe=z*K-Ye*te<0?-1:1,_e=z*te+Ye*K;return _e>1&&(_e=1),_e<-1&&(_e=-1),xe*Math.acos(_e)},ge=function(z,Ye,te,K,xe,_e,Se,ie,pe,be,he,Pe){var Re=Math.pow(xe,2),ve=Math.pow(_e,2),Ae=Math.pow(he,2),ye=Math.pow(Pe,2),Fe=Re*ve-Re*ye-ve*Ae;Fe<0&&(Fe=0),Fe/=Re*ye+ve*Ae,Fe=Math.sqrt(Fe)*(Se===ie?-1:1);var De=Fe*xe/_e*Pe,ke=Fe*-_e/xe*he,oe=be*De-pe*ke+(z+te)/2,Ge=pe*De+be*ke+(Ye+K)/2,We=(he-De)/xe,Qe=(Pe-ke)/_e,st=(-he-De)/xe,yt=(-Pe-ke)/_e,Le=Ie(1,0,We,Qe),ze=Ie(We,Qe,st,yt);return ie===0&&ze>0&&(ze-=ue),ie===1&&ze<0&&(ze+=ue),[oe,Ge,Le,ze]};return function(z){var Ye=z.px,te=z.py,K=z.cx,xe=z.cy,_e=z.rx,Se=z.ry,ie=z.xAxisRotation,pe=ie===void 0?0:ie,be=z.largeArcFlag,he=be===void 0?0:be,Pe=z.sweepFlag,Re=Pe===void 0?0:Pe,ve=[];if(_e===0||Se===0)return[];var Ae=Math.sin(pe*ue/360),ye=Math.cos(pe*ue/360),Fe=ye*(Ye-K)/2+Ae*(te-xe)/2,De=-Ae*(Ye-K)/2+ye*(te-xe)/2;if(Fe===0&&De===0)return[];_e=Math.abs(_e),Se=Math.abs(Se);var ke=Math.pow(Fe,2)/Math.pow(_e,2)+Math.pow(De,2)/Math.pow(Se,2);ke>1&&(_e*=Math.sqrt(ke),Se*=Math.sqrt(ke));var oe=ge(Ye,te,K,xe,_e,Se,he,Re,Ae,ye,Fe,De),Ge=j(oe,4),We=Ge[0],Qe=Ge[1],st=Ge[2],yt=Ge[3],Le=Math.abs(yt)/(ue/4);Math.abs(1-Le)<1e-7&&(Le=1);var ze=Math.max(Math.ceil(Le),1);yt/=ze;for(var ot=0;ot<ze;ot++)ve.push(ae(st,yt)),st+=yt;return ve.map(function(Ce){var me=fe(Ce[0],_e,Se,ye,Ae,We,Qe),Ke=me.x,ut=me.y,et=fe(Ce[1],_e,Se,ye,Ae,We,Qe),qe=et.x,Ue=et.y,Ze=fe(Ce[2],_e,Se,ye,Ae,We,Qe),it=Ze.x,Ve=Ze.y;return{x1:Ke,y1:ut,x2:qe,y2:Ue,x:it,y:Ve}})}}n(r)&&(r=!1),n(i)&&(i=!0);var R,T;function L(j){e.loop(j,function(O){var V=O.tagName.toLowerCase();if(V=="path"&&x(O),V=="circle"&&C("circle",O),V=="rect"&&C("rect",O),V=="ellipse"&&C("ellipse",O),V=="line"&&C("line",O),V=="polygon"&&C("polygon",O),V=="polyline"&&C("polyline",O),V=="g"){var ce=O.getAttribute("style"),H,N,ue,fe,ae;if(ce){var Ie=I(ce);H=Ie[0],N=Ie[1],ue=Ie[2],fe=Ie[3],ae=Ie[4]}g=O.getAttribute("transform"),q=O.getAttribute("fill")?O.getAttribute("fill"):n(H)?B:H,X=O.getAttribute("stroke")?O.getAttribute("stroke"):n(N)?Z:N,$=O.getAttribute("stroke-width")?O.getAttribute("stroke-width"):n(ue)?ne:ue,de=O.getAttribute("fill-opacity")?O.getAttribute("fill-opacity"):n(fe)?re:fe,U=O.getAttribute("stroke-opacity")?O.getAttribute("stroke-opacity"):n(ae)?Q:ae}L(O.children),O.tagName.toLowerCase()=="g"&&(q=B,X=Z,$=ne,de=re,U=Q,g=null)})}function I(j){var O=j.split(";"),V,ce,H,N,ue;return e.loop(O,function(fe){fe=fe.replace(/,/g,"");var ae=fe.split(":"),Ie=ae[0].trim().toLowerCase(),ge=ae[1].trim().toLowerCase().replace("px","");Ie=="fill"&&(V=ge),Ie=="stroke"&&(ce=ge),Ie=="stroke-width"&&(H=ge),Ie=="opacity"&&(N=ge,ue=ge),Ie=="fill-opacity"&&(N=ge),Ie=="stroke-opacity"&&(ue=ge)}),[V,ce,H,N,ue]}function C(j,O){var V,ce=h(O),H=ce[0],N=ce[1],ue=ce[2],fe=ce[5],ae=ce[6];if(j=="circle"){var Ie=Number(O.getAttribute("r").trim()),ge=Ie*.5523;i?V=new e.Circle(Number(O.getAttribute("r")),H,N,ue):V=new e.Blob(H,N,ue,4,Ie,ge,"mirror",null,o,null,null,null,null,null,null,null,null,null,null,null,null,null,l)}else if(j=="rect")if(i)V=new e.Rectangle(Number(O.getAttribute("width")),Number(O.getAttribute("height")),H,N,ue,Number(O.getAttribute("rx")));else{var Be=Number(O.getAttribute("width")),z=Number(O.getAttribute("height")),Ye=Number(O.getAttribute("rx")),te=Number(O.getAttribute("ry"));if(Ye&&te){var K=Ye*.5523,xe=te*.5523;V=new e.Blob(H,N,ue,[[Ye,0,0,0,-K,0,0,0,"free"],[Be-Ye,0,0,0,0,0,K,0,"free"],[Be,te,0,0,0,-xe,0,0,"free"],[Be,z-te,0,0,0,0,0,xe,"free"],[Be-Ye,z,0,0,K,0,0,0,"free"],[Ye,z,0,0,0,0,-K,0,"free"],[0,z-te,0,0,0,xe,0,0,"free"],[0,te,0,0,0,0,0,-xe,"free"]],null,null,null,null,o,null,null,null,null,null,null,null,null,null,null,null,null,null,l)}else V=new e.Blob(H,N,ue,[[0,0],[Be,0],[Be,z],[0,z]],null,null,null,null,o,null,null,null,null,null,null,null,null,null,null,null,null,null,l)}else if(j=="line")V=new e.Squiggle(N,ue,[[Number(O.getAttribute("x1")),Number(O.getAttribute("y1"))],[Number(O.getAttribute("x2")),Number(O.getAttribute("y2"))]],null,null,null,null,o,null,null,null,null,null,null,null,null,null,null,null,null,null,l);else if(j=="polygon"||j=="polyline"){var _e=O.getAttribute("points");_e=_e.replace(/-/g," -"),_e=_e.replace(/\s+/g," ");var Se=[];if(_e.indexOf(",")!=-1)e.loop(_e.split(" "),function(be){var he=be.split(",");Se.push([Number(he[0].trim()),Number(he[1].trim())])});else{var ie;e.loop(_e.split(" "),function(be,he){(he+1)%2==0&&Se.push([ie,be.trim()]),ie=be.trim()})}j=="polygon"?V=new Blob(H,N,ue,Se):V=new e.Squiggle(N,ue,Se,null,null,null,null,o,null,null,null,null,null,null,null,null,null,null,null,null,null,l)}else j=="ellipse"&&(V=new e.Blob(H,N,ue,Y(0,0,Number(O.getAttribute("rx")),Number(O.getAttribute("ry"))),null,null,null,null,o,null,null,null,null,null,null,null,null,null,null,null,null,null,l));V.loc(fe,ae,E);var pe=O.getAttribute("transform");(pe||g)&&k(V,pe||g),l&&(V.type=="Rectangle"||V.type=="Circle")&&V.transform({showReg:!1,visible:o})}function k(j,O){var V=O.split(")");e.loop(V,function(ce){if(ce!=""){var H=ce.trim().split("("),N=H[0].trim().toLowerCase(),ue=H[1].trim().toLowerCase().replace("px","").replace("deg","");if(N=="translate"){var fe=ue.split(",");j.mov(Number(fe[0].trim()),fe[1]?Number(fe[1].trim()):0)}if(N=="scale"){var ae=ue.split(",");j.type=="Blob"||j.type=="Squiggle"?ae.length==1?j.transformPoints("scale",Number(ae[0].trim())):ae.length==2&&(j.transformPoints("scaleX",Number(ae[0].trim())),j.transformPoints("scaleY",Number(ae[1].trim()))):ae.length==1?j.sca(Number(ae[0].trim())):ae.length==2&&j.sca(Number(ae[0].trim()),Number(ae[1].trim()))}if(N=="rotate"){var Ie=ue.split(",");Ie.length==1?Ie.push(0,0):Ie.length==2&&Ie.push(0),j.rot(Number(Ie[0].trim()),Number(Ie[1].trim()),Number(Ie[2].trim()))}N=="skewX"&&(j.skewX=ue),N=="skewY"&&(j.skewY=ue)}})}function Y(j,O,V,ce){var H=.5522848,N=V*H,ue=ce*H,fe=j+V,ae=O+ce,Ie=[[j-V,O,0,0,j,ae+ue-ce,j,O-ue,"mirror"],[j,O-ce,0,0,j-N,O,fe+N-V,O,"mirror"],[fe,O,0,0,j,O-ue,j+N-N,ae+ue-ce,"mirror"],[j,ae,0,0,fe-V+N,O,j-N,O,"mirror"]];return Ie}if(!n(t)){if(t.replace&&(t=t.replace(/style\s?=[^"]*"[^"]*"/gi,"")),n(t.draggable))t.getAttribute||(R=new DOMParser,t=R.parseFromString(t,"image/svg+xml").documentElement),T=this.svg=t;else{R=new DOMParser,t=t.innerHTML?R.parseFromString(t.innerHTML,"text/xml"):t;var W=t.getElementsByTagName("svg");T=this.svg=W?t.getElementsByTagName("svg")[0]:null}var G,F;if(n(T)||(G=T.getAttribute("width"),F=T.getAttribute("height")),G&&(G=Number(G.trim())),F&&(F=Number(F.trim())),this.zimContainer_constructor(G,F),this.type="SVGContainer",n(T))return;var B=e.black,q=e.black,Z=e.black,X=e.black,ne=2,$=2,re=1,de=1,Q=1,U=1,g,d=t.getElementsByTagName("svg");d.length==0&&(d=[t]),L(d)}function h(j){var O,V,ce,H,N,ue=j.getAttribute("style");if(ue){var fe=I(ue);O=fe[0],V=fe[1],ce=fe[2],H=fe[3],N=fe[4]}O=j.getAttribute("fill")?j.getAttribute("fill"):n(O)?q:O,V=j.getAttribute("stroke")?j.getAttribute("stroke"):n(V)?X:V,ce=j.getAttribute("stroke-width")?j.getAttribute("stroke-width"):n(ce)?$:ce,H=j.getAttribute("fill-opacity")?j.getAttribute("fill-opacity"):n(H)?de:H,N=j.getAttribute("stroke-opacity")?j.getAttribute("stroke-opacity"):n(N)?U:N;var ae=j.getAttribute("x")?j.getAttribute("x"):0;ae=j.getAttribute("cx")?j.getAttribute("cx"):ae;var Ie=j.getAttribute("y")?j.getAttribute("y"):0;return Ie=j.getAttribute("cy")?j.getAttribute("cy"):Ie,!n(H)&&!n(O)&&(O=e.convertColor(O,"rgba",Number(H))),!n(N)&&!n(V)&&(V=e.convertColor(V,"rgba",Number(N))),[O,V,Number(ce),Number(H),Number(N),Number(ae),Number(Ie)]}function x(j,O){n(O)&&(O=!0);var V=["M","m","L","l","H","h","V","v","C","c","S","s","Q","q","T","t","A","a","z","Z"],ce=["m","l","h","v","c","s","q","t","a","z"],H=new e.Point(0,0),N;if(n(j.getAttribute)?N=j:N=j.getAttribute("d"),N=N.replace(/,/g," "),N=N.replace(/([a-zA-Z])/g," $1 "),N=N.replace(/-/g," -"),N=N.replace(/\s+/g," "),N=N.replace(/\.(\d*)\./g,".$1 ."),O)var ue=h(j),fe=ue[0],ae=ue[1],Ie=ue[2];var ge,Be,z=[],Ye=[0,0],te=new e.Point(0,0),K=new e.Point(0,0,0,0),xe=new e.Point(0,0,0,0,0,0),_e=new e.Point(0,0,0,0,0,0,0),Se=N.split(" "),ie=Se.slice(1,Se.length),pe=[],be=!1,he,Pe,Re=!1,ve,Ae="squiggle",ye=null;e.loop(ie,function(De,ke){if(ke==0&&(S.x=0,S.y=0,Ye=[0,0],he="",Pe=""),V.indexOf(De)==-1){ve=="lxo"&&(ve="lx",pe.push("l"),be=!0),ve=="lyo"&&(ve="ly",be=!0),ve=="Lxo"&&(ve="Lx",pe.push("L"),be=!0),ve=="Lyo"&&(ve="Ly",be=!0),Be=Number(De),Be=Math.round(Be*100)/100,ve=="X"?(S.x=Be,ve="Y"):ve=="Y"?(S.y=Be,ve="Lxo",z.push([S.x,S.y])):ve=="x"?(S.x=S.x+Be,ve="y"):ve=="y"&&(S.y=S.y+Be,ve="lxo",z.push([S.x,S.y])),ve=="H"||ve=="h"?(H.x=z[z.length-1][0],H.y=z[z.length-1][1],H.x=H.x+(ve=="h"?Be:Be-S.x),z.push([H.x,H.y]),ve="Lx"):(ve=="V"||ve=="v")&&(H.x=z[z.length-1][0],H.y=z[z.length-1][1],H.y=H.y+(ve=="v"?Be:Be-S.y),z.push([H.x,H.y]),ve="lx"),ve=="Lx"?(te.x=Be,ve="Ly"):ve=="Ly"?(te.y=Be,H.x=te.x,H.y=te.y,z.push([H.x,H.y]),ve="Lx"):ve=="lx"?(pe.length>0&&(H.x!=0&&H.y!=0?(S.x=H.x,S.y=H.y):(S.x=H.x+S.x,S.y=H.y+S.y)),te.x=S.x+Be,be?ve="lyo":ve="ly"):ve=="ly"&&(te.y=S.y+Be,H.x=te.x,H.y=te.y,z.push([H.x,H.y]),ve="lx");var oe;if(ve=="qx"||ve=="Qx"?(z.length>0?(S.x=z[z.length-1][0],S.y=z[z.length-1][1]):(S.x=0,S.y=0),K.x=ve=="qx"?S.x+Be:Be,ve=ve=="qx"?"qy":"Qy"):ve=="qy"||ve=="Qy"?(K.y=ve=="qy"?S.y+Be:Be,ve=ve=="qy"?"qz":"Qz",Re&&(Re=!1,oe=z[z.length-1],oe[6]=-oe[4],oe[7]=-oe[5],oe[8]="mirror",H.x=K.x,H.y=K.y,z[z.length]=[H.x,H.y,0,0,-oe[6],oe[7],0,0,"free"],ve=ve=="qy"?"qx":"Qx")):ve=="qz"||ve=="Qz"?(K.z=ve=="qz"?S.x+Be:Be,ve=ve=="qz"?"qq":"Qq"):(ve=="qq"||ve=="Qq")&&(K.w=ve=="qq"?S.y+Be:Be,oe=z[z.length-1],H.x=oe[0],H.y=oe[1],z.length==1?(oe[2]=0,oe[3]=0,oe[4]=0,oe[5]=0,oe[6]=2/3*(K.x-H.x),oe[7]=2/3*(K.y-H.y),oe[8]="free"):z[z.length]=[H.x,H.y,0,0,0,0,2/3*(K.x-H.x),2/3*(K.y-H.y),"free"],H.x=K.z,H.y=K.w,z[z.length]=[H.x,H.y,0,0,2/3*(K.x-H.x),2/3*(K.y-H.y),0,0,"free"],ve=ve=="qq"?"qx":"Qx"),ve=="cx"||ve=="Cx")z.length>0?(S.x=z[z.length-1][0],S.y=z[z.length-1][1]):(S.x=0,S.y=0),xe.x=ve=="cx"?S.x+Be:Be,ve=ve=="cx"?"cy":"Cy";else if(ve=="cy"||ve=="Cy")xe.y=ve=="cy"?S.y+Be:Be,ve=ve=="cy"?"cz":"Cz";else if(ve=="cz"||ve=="Cz")xe.z=ve=="cz"?S.x+Be:Be,ve=ve=="cz"?"cq":"Cq";else if(ve=="cq"||ve=="Cq")xe.q=ve=="cq"?S.y+Be:Be,ve=ve=="cq"?"cr":"Cr",Re&&(he=="s"?Pe="s":Pe="S",oe=z[z.length-1],oe[2]=0,oe[3]=0,n(oe[4])&&(oe[4]=0),n(oe[5])&&(oe[5]=0),oe[6]=-oe[4],oe[7]=-oe[5],oe[8]="mirror",H.x=xe.z,H.y=xe.q,z[z.length]=[H.x,H.y,0,0,xe.x-H.x,xe.y-H.y,0,0,"free"],ve=ve=="cr"?"cx":"Cx");else if(ve=="cr"||ve=="Cr")xe.r=ve=="cr"?S.x+Be:Be,ve=ve=="cr"?"cs":"Cs";else if(ve=="cs"||ve=="Cs")xe.s=ve=="cs"?S.y+Be:Be,oe=z[z.length-1],z.length==1&&(oe[2]=0,oe[3]=0,oe[4]=0,oe[5]=0),oe[6]=xe.x-oe[0],oe[7]=xe.y-oe[1],oe[8]="free",H.x=xe.r,H.y=xe.s,z[z.length]=[H.x,H.y,0,0,xe.z-H.x,xe.q-H.y,0,0,"free"],ve=ve=="cs"?"cx":"Cx";else if(ve=="ax"||ve=="Ax")z.length>0?(S.x=z[z.length-1][0],S.y=z[z.length-1][1]):(S.x=0,S.y=0),_e.x=Be,ve=ve=="ax"?"ay":"Ay";else if(ve=="ay"||ve=="Ay")_e.y=Be,ve=ve=="ay"?"az":"Az";else if(ve=="az"||ve=="Az")_e.z=Be,ve=ve=="az"?"aq":"Aq";else if(ve=="aq"||ve=="Aq")_e.q=Be,ve=ve=="aq"?"ar":"Ar";else if(ve=="ar"||ve=="Ar")_e.r=Be,ve=ve=="ar"?"as":"As";else if(ve=="as"||ve=="As")_e.s=ve=="as"?S.x+Be:Be,ve=ve=="as"?"at":"At";else if(ve=="at"||ve=="At"){_e.t=ve=="at"?S.y+Be:Be,P||(P=A());var Ge=P({px:S.x,py:S.y,cx:_e.s,cy:_e.t,rx:_e.x,ry:_e.y,xAxisRotation:_e.z,largeArcFlag:_e.q,sweepFlag:_e.r});e.loop(Ge,function(We,Qe){oe=z[z.length-1],z.length==1&&(oe[2]=0,oe[3]=0,oe[4]=0,oe[5]=0),Qe==0&&z.length==1?(oe[6]=We.x1-H.x-S.x,oe[7]=We.y1-H.y-S.y):(oe[6]=We.x1-H.x,oe[7]=We.y1-H.y),oe[8]="free",H.x=We.x,H.y=We.y,z[z.length]=[H.x,H.y,0,0,We.x2-H.x,We.y2-H.y,0,0,"free"]}),ve=ve=="at"?"ax":"Ax"}}else pe.push(De),De!="s"&&(Re=!1),pe.length>1&&(De=="M"||De=="m")&&(Fe(pe),De=="M"?(S.x=0,S.y=0):(S.x=z[z.length-1][0],S.y=z[z.length-1][1]),z=[],pe=[],pe.push(De)),De=="M"?ve="X":De=="m"?ve="x":De=="L"?(ve="Lx",r&&ye&&ye!="l"&&Fe(pe),ye="l"):De=="l"?(ve="lx",r&&ye&&ye!="l"&&Fe(pe),ye="l"):De=="H"?(ve="H",r&&ye&&ye!="l"&&Fe(pe),ye="l"):De=="h"?(ve="h",r&&ye&&ye!="l"&&Fe(pe),ye="l"):De=="V"?(ve="V",r&&ye&&ye!="l"&&Fe(pe),ye="l"):De=="v"?(ve="v",r&&ye&&ye!="l"&&Fe(pe),ye="l"):De=="C"?(ve="Cx",r&&ye&&ye!="c"&&Fe(pe),ye="c"):De=="c"?(ve="cx",r&&ye&&ye!="c"&&Fe(pe),ye="c"):De=="S"?(Re=!0,ve="Cx",r&&ye&&ye!="c"&&Fe(pe),ye="c"):De=="s"?(Re=!0,ve="cx",r&&ye&&ye!="c"&&Fe(pe),ye="c"):De=="Q"?(ve="Qx",r&&ye&&ye!="q"&&Fe(pe),ye="q"):De=="q"?(ve="qx",r&&ye&&ye!="q"&&Fe(pe),ye="q"):De=="T"?(Re=!0,ve="Qx",r&&ye&&ye!="q"&&Fe(pe),ye="q"):De=="t"?(Re=!0,ve="qx",r&&ye&&ye!="q"&&Fe(pe),ye="q"):De=="A"?(ve="Ax",r&&ye&&ye!="a"&&Fe(),ye="a"):De=="a"?(ve="ax",r&&ye&&ye!="a"&&Fe(),ye="a"):(De=="z"||De=="Z")&&(Ae="blob")});function Fe(){he=pe[pe.length-1],z.length>=2&&(he=="z"||he=="Z")&&(Ae="blob"),Ae=="squiggle"?ge=new e.Squiggle(ae,Ie,z,null,null,null,null,o,null,null,null,null,null,null,null,null,null,null,null,null,null,l):ge=new e.Blob(fe,ae,Ie,z,null,null,null,null,o,null,null,null,null,null,null,null,null,null,null,null,null,null,l),ge.loc(0,0,E),he=pe[pe.length-1],Pe=pe[pe.length-2],ce.indexOf(he)>=0?(Ye[0]=z[z.length-1][0],Ye[1]=z[z.length-1][1],S.x=z[z.length-1][0],S.y=z[z.length-1][1],z=[],z.push([Ye[0],Ye[1]])):(Ye=[0,0],z=[[0,0]]),pe=[],he!="z"&&he!="Z"&&pe.push(he),H.x=0,H.y=0;var De=j.getAttribute("transform");(De||g)&&k(ge,De||g)}return O&&Fe(),z}E.processPath=function(j){return x(j,!1)},c!==!1&&e.styleTransforms(this,_),this.clone=function(){return E.cloneProps(new e.SVGContainer(t,r,i,o,l,c,this.group,v))}},e.extend(e.SVGContainer,e.Container,"clone","zimContainer",!1),e.CustomShape=function(t,r,i,o){e.zimCustomShapeCheck||(He("50.97"),e.zimCustomShapeCheck=!0),this.zimContainer_constructor(t,r,i,o,!1);var l=this;this.mouseChildren=!1,l._dashedOffset=5,Object.defineProperty(l,"color",{get:function(){return l._color},set:function(c){n(c)&&(c="black"),l._color=c,c&&c.type?l.specialColor(l.colorCommand,c,l):l.colorCommand.style=c}}),this.setColorRange=function(c,p){return n(p)?(l.startColor=l.color,l.endColor=c):n(c)?(l.startColor=l.color,l.endColor=p):(l.startColor=c,l.endColor=p),l},l._colorRange=0,Object.defineProperty(l,"colorRange",{get:function(){return l._colorRange},set:function(c){l._colorRange=c,!n(l.startColor)&&!n(l.endColor)&&(l.color=e.colorRange(l.startColor,l.endColor,c))}}),Object.defineProperty(l,"borderColor",{get:function(){return l._borderColor},set:function(c){l._borderColor=c,c&&!l.borderWidth&&(l.borderWidth=1),l.borderColorCommand?c&&c.type?l.specialColor(l.borderColorCommand,c,l):l.borderColorCommand.style=c:l.drawShape()}}),Object.defineProperty(l,"borderWidth",{get:function(){return l._borderWidth},set:function(c){c>0||(c=0),l._borderWidth=c,!l.borderWidthCommand||l._borderWidth==0?(l.borderWidthCommand=null,l.drawShape()):(l.borderWidthCommand.width=l._borderWidth,l._dashed&&(l.borderDashedCommand.segments=l._dashed,l.borderDashedCommand.offset=l._dashedOffset))}}),Object.defineProperty(l,"thickness",{get:function(){return l._thickness},set:function(c){c>0||(c=0),l._thickness=c,!l.thicknessCommand||l._thickness==0?l.drawShape():(l.thicknessCommand.width=l._thickness,l._dashed&&(l.dashedCommand.segments=l._dashed,l.dashedCommand.offset=l._dashedOffset))}}),Object.defineProperty(l,"dashed",{get:function(){return l._dashed},set:function(c){l._dashed=c,c&&!Array.isArray(l._dashed)&&(l.dashed=[10,10]);var p;if(l.type=="Squiggle"||l.type=="Line"){if(!l.thicknessCommand||l._thickness==0)return;p=l.dashedCommand}else{if(!l.borderWidthCommand||l._borderWidth==0)return;p=l.borderDashedCommand}p?l._dashed?(p.segments=l._dashed,p.offset=l._dashedOffset):(p.segments=null,p.offset=null):l.drawShape()}}),Object.defineProperty(l,"dashedOffset",{get:function(){return l._dashedOffset},set:function(c){isNaN(c)&&(c=5),l._dashedOffset=c;var p;if(l.type=="Squiggle"||l.type=="Line"){if(!l.thicknessCommand||l._thickness==0)return;p=l.dashedCommand}else{if(!l.borderWidthCommand||l._borderWidth==0)return;p=l.borderDashedCommand}p?l._dashed?(p.segments=l._dashed,p.offset=l._dashedOffset):(p.segments=null,p.offset=null):l.drawShape()}}),Object.defineProperty(l,"corner",{get:function(){return l._corner},set:function(c){l._corner=c,l.drawShape()}}),this.linearGradient=function(c,p,v,w,b,_){return this.linearGradientParams=Array.prototype.slice.call(arguments),this.colorCommand.linearGradient(c,p,v,w,b,_),this},this.radialGradient=function(c,p,v,w,b,_,E,S){return this.radialGradientParams=Array.prototype.slice.call(arguments),this.colorCommand.radialGradient(c,p,v,w,b,_,E,S),this},this.cloneAll=function(c,p,v,w){var b=this.getBounds();n(b)&&(b={x:null,y:null,width:null,height:null});var _=this.cloneChildren(this.cloneProps(new e.Container(b.x,b.y,b.width,b.height,p,v,w)),c);return _.mouseChildren=!1,_.type=this.type,_}},e.extend(e.CustomShape,e.Container,null,"zimContainer",!1),e.Circle=function(t,r,i,o,l,c,p,v,w,b,_){var E="radius, color, borderColor, borderWidth, dashed, percent, percentClose, strokeObj, style, group, inherit",S;if(S=vt(e.Circle,arguments,E,this))return S;He("51"),this.zimCustomShape_constructor(null,null,null,null,!1),this.type="Circle",this.group=b;var P=w===!1?{}:e.getStyle(this.type,this.group,_);n(t)&&(t=P.radius!=null?P.radius:50),n(l)&&(l=P.dashed!=null?P.dashed:!1),n(i)&&(i=P.borderColor!=null?P.borderColor:null),n(o)&&(o=P.borderWidth!=null?P.borderWidth:null),i<0||o<0?i=o=null:i!=null&&o==null&&(o=1),n(r)&&(r=P.color!=null?P.color:o>0?"rgba(0,0,0,0)":e.black),n(c)&&(c=P.percent!=null?P.percent:100),n(p)&&(p=P.percentClose!=null?P.percentClose:!0),n(v)&&(v=P.strokeObj!=null?P.strokeObj:{});var A=R(t,r,i,o,c);this.veeObj={radius:A[0],color:A[1],borderColor:A[2],borderWidth:A[3],percent:A[4]};function R(){return arguments}t=e.Pick.choose(t),r=e.Pick.choose(r),i=e.Pick.choose(i),o=e.Pick.choose(o),c=e.Pick.choose(c);var T=this;T._radius=t,T._color=r,T._borderColor=i,T._borderWidth=o,T._dashed=l,T._dashed&&!Array.isArray(T._dashed)&&(T._dashed=[10,10]);var L=this.shape=new $e.Shape;this.addChild(L);var I=L.graphics;T.drawShape=function(){I.c(),T.colorCommand=I.f(T._color).command,T._color&&T._color.type&&T.specialColor(T.colorCommand,T._color,T),(n(T._borderWidth)||T._borderWidth>0)&&(!n(T._borderColor)||!n(T._borderWidth))&&(n(T._borderColor)&&(T._borderColor=e.black),T.borderColorCommand=I.s(T._borderColor).command,T._borderColor&&T._borderColor.type&&T.specialColor(T.borderColorCommand,T._borderColor,T),T.borderWidthCommand=I.ss(T._borderWidth,v.caps,v.joints,v.miterLimit,v.ignoreScale).command,T._dashed&&(T.borderDashedCommand=I.sd(Array.isArray(T._dashed)?T._dashed:[10,10],T._dashedOffset).command));var C=T._radius*2;if(typeof c=="number"&&c>=0&&c<100){var k=360*c/100/2;I.arc(0,0,T._radius,(-k-90)*Math.PI/180,(k-90)*Math.PI/180,!1),p&&I.cp(),C=T._radius-Math.cos(k*Math.PI/180)*T._radius}else I.dc(0,0,T._radius);T.setBounds(-T._radius,-T._radius,T._radius*2,C)},T.drawShape(),r.type&&(T.color=r),Object.defineProperty(T,"radius",{get:function(){return T._radius},set:function(C){T._radius=C,T.drawShape()}}),Object.defineProperty(T,"percentage",{get:function(){return c},set:function(C){c=C,T.drawShape()}}),Object.defineProperty(T,"percentClose",{get:function(){return p},set:function(C){p=C,T.drawShape()}}),w!==!1&&e.styleTransforms(this,P),this.clone=function(C){var k=T.cloneProps(new e.Circle(C||!e.isPick(A[0])?T.radius:A[0],C||!e.isPick(A[1])?T.color:A[1],C||!e.isPick(A[2])?T.borderColor:A[2],C||!e.isPick(A[3])?T.borderWidth:A[3],T.dashed,C||!e.isPick(A[4])?c:A[4],p,v,w,this.group,_));return T.linearGradientParams&&k.linearGradient.apply(k,T.linearGradientParams),T.radialGradientParams&&k.radialGradient.apply(k,T.radialGradientParams),k}},e.extend(e.Circle,e.CustomShape,"clone","zimCustomShape",!1),e.Rectangle=function(t,r,i,o,l,c,p,v,w,b,_,E){var S="width, height, color, borderColor, borderWidth, corner, dashed, strokeObj, scaleDimensions, style, group, inherit",P;if(P=vt(e.Rectangle,arguments,S,this))return P;He("52"),this.zimCustomShape_constructor(null,null,null,null,!1),this.type="Rectangle",this.group=_;var A=b===!1?{}:e.getStyle(this.type,this.group,E);n(t)&&(t=A.width!=null?A.width:null),n(r)&&(r=A.height!=null?A.height:n(t)?100:t),n(t)&&(t=r),n(c)&&(c=A.corner!=null?A.corner:0),n(p)&&(p=A.dashed!=null?A.dashed:!1),n(o)&&(o=A.borderColor!=null?A.borderColor:null),n(l)&&(l=A.borderWidth!=null?A.borderWidth:null),o<0||l<0?o=l=null:o!=null&&l==null&&(l=1),n(i)&&(i=A.color!=null?A.color:l>0?"rgba(0,0,0,0)":e.black),n(v)&&(v=A.strokeObj!=null?A.strokeObj:{}),n(w)&&(w=A.scaleDimensions!=null?A.scaleDimensions:!0);var R=T(t,r,i,o,l);this.veeObj={width:R[0],height:R[1],color:R[2],borderColor:R[3],borderWidth:R[4]};function T(){return arguments}t=e.Pick.choose(t),r=e.Pick.choose(r),i=e.Pick.choose(i),o=e.Pick.choose(o),l=e.Pick.choose(l);var L=this;L._color=i,L._borderColor=o,L._borderWidth=l,L._dashed=p,L._dashed&&!Array.isArray(L._dashed)&&(L._dashed=[10,10]),L._corner=c,L.scaleDimensions=w,L.setWidth=function(k){t=k},L.setHeight=function(k){r=k};var I=this.shape=new $e.Shape;this.addChild(I);var C=I.graphics;L.drawShape=function(){if(C.c(),L.colorCommand=C.f(L._color).command,i&&i.type&&L.specialColor(L.colorCommand,i,L),(n(L._borderWidth)||L._borderWidth>0)&&(!n(L._borderColor)||!n(L._borderWidth))&&(n(L._borderColor)&&(L._borderColor=e.black),L.borderColorCommand=C.s(L._borderColor).command,L._borderColor&&L._borderColor.type&&L.specialColor(L.borderColorCommand,L._borderColor,L),L.borderWidthCommand=C.ss(L._borderWidth,v.caps,v.joints,v.miterLimit,v.ignoreScale).command,L._dashed&&(L.borderDashedCommand=C.sd(Array.isArray(L._dashed)?L._dashed:[10,10],L._dashedOffset).command)),Array.isArray(L._corner)){var k=L._corner;Array.isArray(k)&&k.length==2&&(k=[k,k,k,k]);for(var Y=[],W=!1,G=0;G<k.length;G++)Array.isArray(k[G])?(W=!0,Y.push(k[G])):Y.push([k[G],k[G]]);k=Y,W?C.mt(0,k[0][1]).curveTo(0,0,k[0][0],0).lt(t-k[1][0],0).curveTo(t,0,t,k[1][1]).lt(t,r-k[2][1]).curveTo(t,r,t-k[2][0],r).lt(k[3][0],r).curveTo(0,r,0,r-k[3][1]).cp():C.rc(0,0,t,r,L._corner[0],L._corner[1],L._corner[2],L._corner[3])}else L._corner>0?C.rr(0,0,t,r,L._corner):C.r(0,0,t,r);L.setBounds(0,0,t,r),i.type&&(L.color=i)},L.drawShape(),b!==!1&&e.styleTransforms(this,A),this.clone=function(k){var Y=L.cloneProps(new e.Rectangle(k||!e.isPick(R[0])?t:R[0],k||!e.isPick(R[1])?r:R[1],k||!e.isPick(R[2])?L.color:R[2],k||!e.isPick(R[3])?L.borderColor:R[3],k||!e.isPick(R[4])?L.borderWidth:R[4],c,L._dashed,v,L.scaleDimensions,b,this.group,E));return Y}},e.extend(e.Rectangle,e.CustomShape,"clone","zimCustomShape",!1),e.Triangle=function(t,r,i,o,l,c,p,v,w,b,_,E,S,P){var A="a, b, c, color, borderColor, borderWidth, corner, center, adjust, dashed, strokeObj, style, group, inherit",R;if(R=vt(e.Triangle,arguments,A,this))return R;He("53"),this.zimCustomShape_constructor(null,null,null,null,!1),this.type="Triangle",this.group=S;var T=E===!1?{}:e.getStyle(this.type,this.group,P);n(t)&&(t=T.a!=null?T.a:100),n(r)&&(r=T.b!=null?T.b:t),n(i)&&(i=T.c!=null?T.c:t),r==-1&&(r=Math.sqrt(Math.pow(t,2)+Math.pow(i,2))),i==-1&&(i=Math.sqrt(Math.pow(t,2)+Math.pow(r,2))),n(p)&&(p=T.corner!=null?T.corner:0),n(v)&&(v=T.center!=null?T.center:!0),n(w)&&(w=T.adjust!=null?T.adjust:0),n(l)&&(l=T.borderColor!=null?T.borderColor:null),n(c)&&(c=T.borderWidth!=null?T.borderWidth:null),l<0||c<0?l=c=null:l!=null&&c==null&&(c=1),n(o)&&(o=T.color!=null?T.color:c>0?"rgba(0,0,0,0)":e.black),n(w)&&(w=T.adjust!=null?T.adjust:0),n(_)&&(_=T.strokeObj!=null?T.strokeObj:{});var L=I(t,r,i,o,l,c);this.veeObj={a:L[0],b:L[1],c:L[2],color:L[3],borderColor:L[4],borderWidth:L[5]};function I(){return arguments}t=e.Pick.choose(t),r=e.Pick.choose(r),i=e.Pick.choose(i),this.a=t,this.b=r,this.c=i,o=e.Pick.choose(o),l=e.Pick.choose(l),c=e.Pick.choose(c);var C=this;C._color=o,C._borderColor=l,C._borderWidth=c,C._dashed=b,C._dashed&&!Array.isArray(C._dashed)&&(C._dashed=[10,10]),C._corner=p;var k=[t,r,i];k.sort(function(Z,X){return X-Z});var Y=k[0],W=k[1],G=k[2],F=[k.indexOf(t),k.indexOf(r),k.indexOf(i)];if(Y>W+G){lt("zim display - Triangle(): invalid triangle lengths");return}var B=this.shape=new $e.Shape;this.adjusted=w,this.addChild(B);var q=B.graphics;C.drawShape=function(){var Z=[];Array.isArray(C._corner)?Z=C._corner:Z.push(C._corner,C._corner,C._corner);for(var X=0;X<3;X++)(Z[X]<0||typeof Z[X]!="number")&&(Z[X]=0);q.c(),C.colorCommand=q.f(C._color).command,C._color&&C._color.type&&C.specialColor(C.colorCommand,C._color,C),(n(C._borderWidth)||C._borderWidth>0)&&(!n(C._borderColor)||!n(C._borderWidth))&&(n(C._borderColor)&&(C._borderColor=e.black),C.borderColorCommand=q.s(C._borderColor).command,C._borderColor&&C._borderColor.type&&C.specialColor(C.borderColorCommand,C._borderColor,C),C.borderWidthCommand=q.ss(C._borderWidth,_.caps,_.joints,_.miterLimit,_.ignoreScale).command,C._dashed&&(C.borderDashedCommand=q.sd(Array.isArray(C._dashed)?C._dashed:[10,10],C._dashedOffset).command)),C.one={x:0,y:0},C.two={x:t,y:0};var ne=Math.acos((Math.pow(W,2)+Math.pow(G,2)-Math.pow(Y,2))/(2*W*G))*180/Math.PI,$=Math.asin(W*Math.sin(ne*Math.PI/180)/Y)*180/Math.PI,re=180-ne-$,de=[ne,$,re];C.angles=[de[F[1]],de[F[2]],de[F[0]]];var Q=C.angles[1],U=Math.cos(Q*Math.PI/180)*r,g=Math.sin(Q*Math.PI/180)*r,d=Math.max(t,t-U),h=g;C.setBounds(0,w,d,h),B.y=h,C.three={x:t-U,y:0-g};var x=t*Z[0]/(Z[0]+Z[1]||1);q.mt(x,0).at(t,0,t-U,0-g,Z[1]).at(t-U,0-g,0,0,Z[2]).at(0,0,t,0,Z[0]).lt(x,0),q.cp(),v&&(C.regX=d/2,C.regY=h/2),w&&(C.shape.y+=w)},C.drawShape(),o.type&&(C.color=o),E!==!1&&e.styleTransforms(this,T),this.clone=function(Z){var X=C.cloneProps(new e.Triangle(Z||!e.isPick(L[0])?t:L[0],Z||!e.isPick(L[1])?r:L[1],Z||!e.isPick(L[2])?i:L[2],Z||!e.isPick(L[3])?C.color:L[3],Z||!e.isPick(L[4])?C.borderColor:L[4],Z||!e.isPick(L[5])?C.borderWidth:L[5],p,v,w,b,_,E,this.group,P));return C.linearGradientParams&&X.linearGradient.apply(X,C.linearGradientParams),C.radialGradientParams&&X.radialGradient.apply(X,C.radialGradientParams),X}},e.extend(e.Triangle,e.CustomShape,"clone","zimCustomShape"),e.Poly=function(t,r,i,o,l,c,p,v,w,b,_){var E="radius, sides, pointSize, color, borderColor, borderWidth, dashed, strokeObj, style, group, inherit",S;if(S=vt(e.Poly,arguments,E,this))return S;He("53.1"),this.zimCustomShape_constructor(null,null,null,null,!1),this.type="Poly",this.group=b;var P=w===!1?{}:e.getStyle(this.type,this.group,_);n(t)&&(t=P.radius!=null?P.radius:50),n(r)&&(r=P.sides!=null?P.sides:5),n(i)&&(i=P.pointSize!=null?P.pointSize:0),n(p)&&(p=P.dashed!=null?P.dashed:!1),n(l)&&(l=P.borderColor!=null?P.borderColor:null),n(c)&&(c=P.borderWidth!=null?P.borderWidth:null),l<0||c<0?l=c=null:l!=null&&c==null&&(c=1),n(o)&&(o=P.color!=null?P.color:c>0?"rgba(0,0,0,0)":e.black),n(v)&&(v=P.strokeObj!=null?P.strokeObj:{});var A=R(t,r,i,o,l,c);this.veeObj={radius:A[0],sides:A[1],pointSize:A[2],color:A[3],borderColor:A[4],borderWidth:A[5]};function R(){return arguments}t=e.Pick.choose(t),r=e.Pick.choose(r),i=e.Pick.choose(i),o=e.Pick.choose(o),l=e.Pick.choose(l),c=e.Pick.choose(c);var T=this;T._radius=t,T._color=o,T._sides=r,T._pointSize=i,T._borderColor=l,T._borderWidth=c,T._dashed=p,T._dashed&&!Array.isArray(T._dashed)&&(T._dashed=[10,10]);var L=this.shape=new $e.Shape;this.addChild(L),L.rotation=-90;var I=L.graphics;T.drawShape=function(){I.c(),T.colorCommand=I.f(T._color).command,T._color&&T._color.type&&T.specialColor(T.colorCommand,T._color,T),(n(T._borderWidth)||T._borderWidth>0)&&(!n(T._borderColor)||!n(T._borderWidth))&&(n(T._borderColor)&&(T._borderColor=e.black),T.borderColorCommand=I.s(T._borderColor).command,T._borderColor&&T._borderColor.type&&T.specialColor(T.borderColorCommand,T._borderColor,T),T.borderWidthCommand=I.ss(T._borderWidth,v.caps,v.joints,v.miterLimit,v.ignoreScale).command,T._dashed&&(T.borderDashedCommand=I.sd(Array.isArray(T._dashed)?T._dashed:[10,10],T._dashedOffset).command)),I.dp(0,0,T._radius,T._sides,T._pointSize),T.setBounds(-T._radius,-T._radius,T._radius*2,T._radius*2)},T.drawShape(),o.type&&(T.color=o),Object.defineProperty(T,"radius",{get:function(){return T._radius},set:function(C){T._radius=C,T.drawShape()}}),Object.defineProperty(T,"sides",{get:function(){return T._sides},set:function(C){T._sides=C,T.drawShape()}}),Object.defineProperty(T,"pointSize",{get:function(){return T._pointSize},set:function(C){T._pointSize=C,T.drawShape()}}),w!==!1&&e.styleTransforms(this,P),this.clone=function(C){var k=T.cloneProps(new e.Poly(C||!e.isPick(A[0])?T.radius:A[0],C||!e.isPick(A[1])?T.sides:A[1],C||!e.isPick(A[2])?T.pointSize:A[2],C||!e.isPick(A[3])?T.color:A[3],C||!e.isPick(A[4])?T.borderColor:A[4],C||!e.isPick(A[5])?T.borderWidth:A[5],T.dashed,v,w,this.group,_));return T.linearGradientParams&&k.linearGradient.apply(k,T.linearGradientParams),T.radialGradientParams&&k.radialGradient.apply(k,T.radialGradientParams),k}},e.extend(e.Poly,e.CustomShape,"clone","zimCustomShape",!1),e.Line=function(t,r,i,o,l,c,p,v,w,b,_,E,S,P,A){var R="length, thickness, color, startHead, endHead, dashed, strokeObj, lineType, lineOrientation, curveH, curveV, points, style, group, inherit",T;if(T=vt(e.Line,arguments,R,this))return T;He("53.15"),this.zimCustomShape_constructor(null,null,null,null,!1),this.type="Line",this.group=P;var L=S===!1?{}:e.getStyle(this.type,this.group,A);n(t)&&(t=L.length!=null?L.length:100),n(c)&&(c=L.dashed!=null?L.dashed:!1),n(r)&&(r=L.thickness!=null?L.thickness:3),n(i)&&(i=L.color!=null?L.color:e.black),n(o)&&(o=L.startHead!=null?L.startHead:null),n(l)&&(l=L.endHead!=null?L.endHead:null),n(p)&&(p=L.strokeObj!=null?L.strokeObj:{}),n(v)&&(v=L.lineType!=null?L.lineType:"straight"),v!=="corner"&&v!="curve"&&(v="straight"),n(w)&&(w=L.lineOrientation!=null?L.lineOrientation:"auto"),w!=="vertical"&&w!="horizontal"&&(w="auto"),n(b)&&(b=L.curveH!=null?L.curveH:20),n(_)&&(_=L.curveV!=null?L.curveV:20),n(p)&&(p=L.strokeObj!=null?L.strokeObj:{});var I=C(t,i,r,o,l);this.veeObj={length:I[0],color:I[1],thickness:I[2],startHead:I[3],endHead:I[4]};function C(){return arguments}t=e.Pick.choose(t),i=e.Pick.choose(i),r=e.Pick.choose(r),o=e.Pick.choose(o),l=e.Pick.choose(l),o&&o.clone&&(o=o.clone()),l&&l.clone&&(l=l.clone());var k=this;k._length=t,k._color=i,k._thickness=r,k._dashed=c,k._dashed&&!Array.isArray(k._dashed)&&(k._dashed=[10,10]),k._startX=0,k._startY=0,k._endX=t,k._endY=0,k._startHead=o,k._endHead=l,k._points=E,k._lineOrientation=w,k.angle=0,k.lineType=v,k._startHead&&Y("start",k._startHead),k._endHead&&Y("end",k._endHead);function Y(F,B){if(B=="triangle"||B=="arrow"){var q=k["_"+F+"Head"]=new e.Triangle(r*4,r*4,r*4,i);q.rotation=90}else B=="circle"&&(k["_"+F+"Head"]=new e.Circle(r*2.2,i));n(k["_"+F+"Head"].startAngle)&&(k["_"+F+"Head"].startAngle=k["_"+F+"Head"].rotation)}o=k._startHead,l=k._endHead,o&&o.type=="Triangle"&&(o.startRegY=o.regY),l&&l.type=="Triangle"&&(l.startRegY=l.regY);var W=this.shape=new $e.Shape;this.addChild(W);var G=W.graphics;k.drawShape=function(F,B){G.c(),k.colorCommand=G.s(k._color).command,i&&i.type&&k.specialColor(k.colorCommand,i,k),k.thicknessCommand=G.ss(k._thickness,p.caps,p.joints,p.miterLimit,p.ignoreScale).command,k._dashed&&(k.dashedCommand=G.sd(Array.isArray(k._dashed)?k._dashed:[10,10],k._dashedOffset).command);var q,Z;if(k._points){var X=k._points[0];k._startX=X[0],k._startY=X[1];var ne=k._points[k._points.length-1],$=[ne[ne.length-2],ne[ne.length-1]];k._endX=$[0],k._endY=$[1],G.mt(X[0],X[1]);for(var re=1;re<k._points.length;re++){var de=k._points[re];re==1&&(q=[k._startX,k._startY,de[0],de[1]]),de.length==2?G.lt(de[0],de[1]):de.length==4?G.qt(de[0],de[1],de[2],de[3]):de.length==6&&G.bt(de[0],de[1],de[2],de[3],de[4],de[5])}if(de.length>=4)Z=[de[de.length-4],de[de.length-3],k._endX,k._endY];else{var Q=k._points[k._points.length-2];Z=[Q[Q.lenth-2],Q[Q.lenth-1],k._endX,k._endY]}}else{var U=k._startX,g=k._startY,d=k._endX,h=k._endY,x;if(k.lineType=="straight"?(o&&o.type=="Triangle"&&(o.regY=0,x=e.dist(U,g,d,h),x!=0&&(U=U+k._startHead.height/2*(d-U)/x),x!=0&&(g=g+k._startHead.height/2*(h-g)/x)),l&&l.type=="Triangle"&&(l.regY=0,x=e.dist(U,g,d,h),x!=0&&(d=d-k._endHead.height/2*(d-U)/x),x!=0&&(h=h-k._endHead.height/2*(h-g)/x))):(F?k._lineOrientation=="horizontal"||k.autoOrientation=="horizontal"?o&&o.type=="Triangle"&&(o.regY=0,d>U?U=Math.min(d,U+k._startHead.height/2):U=Math.max(d,U-k._startHead.height/2)):o&&o.type=="Triangle"&&(o.regY=0,h>g?g=Math.min(h,g+k._startHead.height/2):g=Math.max(h,g-k._startHead.height/2)):o&&o.type=="Triangle"&&(o.regY=o.startRegY),B?k._lineOrientation=="horizontal"||k.autoOrientation=="horizontal"?l&&l.type=="Triangle"&&(l.regY=0,d>U?d-=k._endHead.height/2:d+=k._endHead.height/2):l&&l.type=="Triangle"&&(l.regY=0,h>g?h-=k._endHead.height/2:h+=k._endHead.height/2):l&&l.type=="Triangle"&&(l.regY=l.startRegY)),k.lineType=="straight")G.mt(U,g).lt(d,h),q=Z=[U,g,d,h];else if(k.lineType=="corner"){var j=U+(d-U)*.4,O=g+(h-g)*.4;k._lineOrientation=="auto"&&(k.autoOrientation=Math.abs(U-d)>Math.abs(g-h)?"horizontal":"vertical"),k._lineOrientation=="horizontal"||k.autoOrientation=="horizontal"?(q=Z=[U,g,j,g],G.mt(U,g).lt(j,g).lt(j,h).lt(d,h)):(q=Z=[U,g,U,O],G.mt(U,g).lt(U,O).lt(d,O).lt(d,h))}else{var V=U>d?-1:1,ce=g>h?-1:1,H=U,N=g,ue=Math.abs(U-d),fe=Math.abs(g-h),ae=Math.min(b,ue*.5),Ie=Math.min(_,fe*.5);k._lineOrientation=="auto"&&(k.autoOrientation=Math.abs(U-d)>Math.abs(g-h)?"horizontal":"vertical");var ge,Be,z,Ye;k._lineOrientation=="horizontal"||k.autoOrientation=="horizontal"?(ge=fe-Ie*2,Be=(ue-ae*2)/2,G.mt(H,N),Be>0&&(H=H+Be*V,G.lt(H,N)),Ye=N,N=N+Ie*ce,H=H+ae*V,G.qt(H,Ye,H,N),q=Z=[U,g,H,g],ge>0&&(N=N+ge*ce,G.lt(H,N)),N=N+Ie*ce,z=H,H=H+ae*V,G.qt(z,N,H,N),Be>0&&(H=H+Be*V,G.lt(H,N))):(ge=ue-ae*2,Be=(fe-Ie*2)/2,G.mt(H,N),Be>0&&(N=N+Be*ce,G.lt(H,N)),z=H,H=H+ae*V,N=N+Ie*ce,G.qt(z,N,H,N),q=Z=[U,g,U,N],ge>0&&(H=H+ge*V,G.lt(H,N)),H=H+ae*V,Ye=N,N=N+Ie*ce,G.qt(H,Ye,H,N),Be>0&&(N=N+Be*ce,G.lt(H,N)))}}if(k.setBounds(Math.min(k._startX,k._endX),Math.min(k._startY,k._endY),Math.abs(k._startX-k._endX),Math.abs(k._startY-k._endY)),k._length=Math.sqrt(Math.pow(k._startX-k._endX,2)+Math.pow(k._startY-k._endY,2)),k.angle=Math.atan2(k._endY-k._startY,k._endX-k._startX)*180/Math.PI,k._startHead&&k._startHead.loc){k._startHead.loc(k._startX,k._startY,k);var te=Math.atan2(q[3]-q[1],q[2]-q[0])*180/Math.PI;k._startHead.rotation=te-180+k._startHead.startAngle}if(k._endHead&&k._endHead.loc){k._endHead.loc(k._endX,k._endY,k);var K=Math.atan2(Z[3]-Z[1],Z[2]-Z[0])*180/Math.PI;k._endHead.rotation=K+k._endHead.startAngle}},k.drawShape(),i.type&&(k.color=i),this.setPoints=function(F,B,q,Z,X,ne){return Array.isArray(F)&&n(B)?(k.points=F,k):(F&&!n(F.x)?(k._startX=n(F.x)?k._startX:F.x,k._startY=n(F.y)?k._startY:F.y,B&&(k._endX=n(B.x)?k._endX:B.x,k._endY=n(B.y)?k._endY:B.y)):(k._startX=n(F)?k._startX:F,k._startY=n(B)?k._startY:B,k._endX=n(q)?k._endX:q,k._endY=n(Z)?k._endY:Z),k.drawShape(X,ne),k)},this.from=function(F,B,q){n(q)&&(q=!0);var Z,X;if(F&&F.parent&&k.parent&&q){var ne=F.parent.localToLocal(F.x,F.y,k.parent);Z=ne.x,X=ne.y}return F&&!n(F.x)?(k._startX=n(Z)?n(F.x)?k._startX:F.x:Z,k._startY=n(X)?n(F.y)?k._startY:F.y:X):(k._startX=n(F)?k._startX:F,k._startY=n(B)?k._startY:B),k.drawShape(),k},this.to=function(F,B,q){n(q)&&(q=!0);var Z,X;if(F&&F.parent&&k.parent&&q){var ne=F.parent.localToLocal(F.x,F.y,k.parent);Z=ne.x,X=ne.y}return F&&!n(F.x)?(k._endX=n(Z)?n(F.x)?k._endX:F.x:Z,k._endY=n(X)?n(F.y)?k._endY:F.y:X):(k._endX=n(F)?k._endX:F,k._endY=n(B)?k._endY:B),k.drawShape(),k},Object.defineProperty(k,"length",{get:function(){return k._length},set:function(F){var B=k.length!=0?F/k.length:0;if(!isNaN(B)){var q=k.scaleX,Z=k.scaleY;k.scaleX*=B,k.scaleY*=B;var X=k.localToGlobal(k._startX,k._startY),ne=k.localToGlobal(k._endX,k._endY);k.scaleX=q,k.scaleY=Z;var $=k.globalToLocal(X.x,X.y),re=k.globalToLocal(ne.x,ne.y);k.setPoints($,re)}}}),Object.defineProperty(k,"startPoint",{get:function(){return new e.Point(k._startX,k._startY)},set:function(F){k._startX=n(F.x)?k._startX:F.x,k._startY=n(F.y)?k._startY:F.y,k.drawShape()}}),Object.defineProperty(k,"endPoint",{get:function(){return new e.Point(k._endX,k._endY)},set:function(F){k._endX=n(F.x)?k._endX:F.x,k._endY=n(F.y)?k._endY:F.y,k.drawShape()}}),Object.defineProperty(k,"startHead",{get:function(){return k._startHead},set:function(F){k._startHead=F,k.drawShape()}}),Object.defineProperty(k,"endHead",{get:function(){return k._endHead},set:function(F){k._endHead=F,k.drawShape()}}),Object.defineProperty(k,"startX",{get:function(){return k._startX},set:function(F){k._startX=F||0,k.drawShape()}}),Object.defineProperty(k,"startY",{get:function(){return k._startY},set:function(F){k._startY=F||0,k.drawShape()}}),Object.defineProperty(k,"endX",{get:function(){return k._endX},set:function(F){k._endX=F||0,k.drawShape()}}),Object.defineProperty(k,"endY",{get:function(){return k._endY},set:function(F){k._endY=F||0,k.drawShape()}}),Object.defineProperty(k,"points",{get:function(){return k._points},set:function(F){F&&(k._points=F,k.drawShape())}}),Object.defineProperty(k,"lineOrientation",{get:function(){return k._lineOrientation},set:function(F){F&&(k._lineOrientation=F,k.drawShape())}}),S!==!1&&e.styleTransforms(this,L),this.clone=function(F){var B=F||!e.isPick(I[3])?k._startHead:I[3];B&&B.clone&&(B=B.clone(),B.rotation=k._startHead.startAngle);var q=F||!e.isPick(I[4])?k._endHead:I[4];q&&q.clone&&(q=q.clone(),q.rotation=k._endHead.startAngle);var Z=k.cloneProps(new e.Line(F||!e.isPick(I[0])?k.length:I[0],F||!e.isPick(I[2])?k.thickness:I[2],F||!e.isPick(I[1])?k.color:I[1],B,q,k.dashed,p,v,k._lineOrientation,b,_,e.copy(E),S,this.group,A));return k.points?Z.setPoints(k.points):Z.setPoints(k._startX,k._startY,k._endX,k._endY),k.linearGradientParams&&Z.linearGradient.apply(Z,k.linearGradientParams),k.radialGradientParams&&Z.radialGradient.apply(Z,k.radialGradientParams),Z}},e.extend(e.Line,e.CustomShape,"clone","zimCustomShape",!1),e.Squiggle=function(t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,T,L,I,C,k,Y,W,G,F,B){var q="color, thickness, points, length, controlLength, controlType, lockControlType, showControls, lockControls, handleSize, allowToggle, move, dashed, onTop, circleColor, circleBorderColor, stickColor, stickThickness, selectColor, selectPoints, editPoints, interactive, strokeObj, style, group, inherit",Z;if(Z=vt(e.Squiggle,arguments,q,this))return Z;He("53.2"),this.group=F;var X=G===!1?{}:e.getStyle("Squiggle",this.group,B);if(n(r)&&(r=X.thickness!=null?X.thickness:6),n(o)&&(o=X.length!=null?X.length:300),n(i)&&(i=X.points!=null?X.points:5),typeof i=="string"){var ne=new e.SVGContainer;i=ne.processPath(i)}var $=typeof i!="number",re=typeof i=="number"?i:i.length;if(re==0)return;n(l)&&(l=X.controlLength!=null?X.controlLength:o/re),this.zimCustomShape_constructor(o,l,null,null,!1),this.type="Squiggle",this.mouseChildren=!0,n(S)&&(S=X.dashed!=null?X.dashed:!1),n(t)&&(t=X.color!=null?X.color:e.blue),t.style&&(this.colorCommand=t,t=e.black),n(c)&&(c=X.controlType!=null?X.controlType:null);var de=c;n(c)&&(c="mirror"),n(p)&&(p=X.lockControlType!=null?X.lockControlType:!1),n(Y)&&(Y=X.interactive!=null?X.interactive:!0),n(v)&&(v=X.showControls!=null?X.showControls:Y);var Q=v;n(w)&&(w=X.lockControls!=null?X.lockControls:!Y),n(b)&&(b=X.handleSize!=null?X.handleSize:e.mobile()?20:10),n(_)&&(_=X.allowToggle!=null?X.allowToggle:Y),n(E)&&(E=X.move!=null?X.move:Y),n(A)&&(A=X.circleColor!=null?X.circleColor:e.light),n(R)&&(R=X.circleBorderColor!=null?X.circleBorderColor:e.dark),n(T)&&(T=X.stickColor!=null?X.stickColor:e.darker),n(L)&&(L=X.stickThickness!=null?X.stickThickness:1),n(I)&&(I=X.selectColor!=null?X.selectColor:e.white),n(C)&&(C=X.selectPoints!=null?X.selectPoints:Y),this.circleColor=A,this.circleBorderColor=R,this.stickColor=T,this.stickThickness=L,n(P)&&(P=X.onTop!=null?X.onTop:!0),n(k)&&(k=X.editPoints!=null?X.editPoints:Y),n(W)&&(W=X.strokeObj!=null?X.strokeObj:{});var U=g(t);this.veeObj={color:U[0]};function g(){return arguments}t=e.Pick.choose(t);var d=this,h;this.types=["mirror","straight","free","none"],this.interactive=Y,this.num=re,this.onTop=P,this.move=E,this.editPoints=k,this.allowToggle=_,this.lockControlType=p,this.selectPoints=C,this.lockControls=w;var x,j,O;d._color=t,d._thickness=r,d._dashed=S,d._dashed&&!Array.isArray(d._dashed)&&(d._dashed=[10,10]);var V,ce,H,N,ue=d.move,fe=2,ae,Ie;de&&typeof i!="number"&&e.loop(i,function(ie){ie[8]=de,de=="none"&&(ie[4]=ie[5]=ie[6]=ie[7]=0)}),ge();function ge(){Ie&&Ie.removeAllEventListeners(),d.num=re=typeof i=="number"?i:i.length,re=Math.max(2,re),l=o/re,V=d.shape=new e.Shape({style:!1}).addTo(d);var ie=d.sticks=new e.Shape({style:!1}).addTo(d);b<=0&&ie.removeFrom();var pe=V.graphics;pe.c();var be=ie.graphics;be.c();var he=b/10*8,Pe=b;d.selectPoints?(d.selectedBalls=new e.SelectionSet,d.selectedRect1s=new e.SelectionSet,d.selectedRect2s=new e.SelectionSet,d.selectionManager=new e.SelectionManager([d.selectedBalls,d.selectedRect1s,d.selectedRect2s],"ctrl",!1)):d.selectionManager=new e.SelectionManager(null,"ctrl");var Re=e.mobile();Ie=d.controls=new e.Container({style:!1}).addTo(d),d.interactive&&Ie.drag({onTop:!Re}),x=[],O=[],j=[];var ve,Ae,ye,Fe,De,ke,oe,Ge,We;for(ve=0;ve<re;ve++){if(Fe=new e.Container({style:!1}).addTo(Ie),Fe.num=ve,typeof i=="number"){var Qe=e.Pick.choose(l);ye=new e.Container(Qe,r,null,null,!1).addTo(d).loc({x:ve*o/(re-1)-Qe/2,y:ve%2*Qe}),oe=new e.Circle(he,d.selectPoints&&d.selectedBalls.isSelected(ve)?I:d.circleColor,d.circleBorderColor,2,null,null,null,null,!1).centerReg(ye).loc({x:Qe/2,y:0}),De=new e.Rectangle(Pe,Pe,d.selectPoints&&d.selectedRect1s.isSelected(ve)?I:me(c),b==0?null:e.dark,b==0?null:2,null,null,null,null,!1).centerReg(ye).loc({x:0,y:0}),ke=new e.Rectangle(Pe,Pe,d.selectPoints&&d.selectedRect2s.isSelected(ve)?I:me(c),b==0?null:e.dark,b==0?null:2,null,null,null,null,!1).centerReg(ye).loc({x:Qe,y:0});var st=ye.localToLocal(oe.x,oe.y,Ie);oe.x=st.x,oe.y=st.y,oe.addTo(Fe,null,!1);var yt=ye.localToLocal(De.x,De.y,Ie);De.x=c=="none"?0:yt.x-oe.x,De.y=c=="none"?0:yt.y-oe.y,De.addTo(Fe,null,!1);var Le=ye.localToLocal(ke.x,ke.y,Ie);ke.x=c=="none"?0:Le.x-oe.x,ke.y=c=="none"?0:Le.y-oe.y,ke.addTo(Fe,null,!1),Fe.x=oe.x,Fe.y=oe.y,oe.x=0,oe.y=0,c=="none"&&oe.addTo(Fe,null,!1)}else We=i[ve],Ge=We[8]?We[8]:c,Fe.loc({x:We[0],y:We[1]}),oe=new e.Circle(he,d.circleColor,d.circleBorderColor,2,null,null,null,null,!1).centerReg({add:!1}).addTo(Fe).loc({x:We[2],y:We[3]}),De=new e.Rectangle(Pe,Pe,me(Ge),b==0?null:e.dark,b==0?null:2,null,null,null,null,!1).centerReg({add:!1}).addTo(Fe,0).loc({x:We[4],y:We[5]}),ke=new e.Rectangle(Pe,Pe,me(Ge),b==0?null:e.dark,b==0?null:2,null,null,null,null,!1).centerReg({add:!1}).addTo(Fe,0).loc({x:We[6],y:We[7]});oe.mySet=Fe,oe.rect1=De,oe.rect2=ke,oe.index=ve,Re?oe.on("mousedown",ot):oe.on("dblclick",Ce),De.ball=oe,De.other=ke,ke.ball=oe,ke.other=De,b==0&&(oe.expand(10),De.expand(10),ke.expand(10)),Re&&(oe.expand(),De.expand(),ke.expand()),Ae=[Fe,oe,De,ke,We?We[8]:c],x.push(Ae),j.push(oe),O.push(Fe)}var ze=!1;function ot(Ze){ze?(Ze.preventDefault(),Ce(Ze)):(ze=!0,setTimeout(function(){ze=!1},300))}function Ce(Ze){if(!d.lockControlType){var it=Ze.target,Ve=x[it.index][4]?x[it.index][4]:c;Math.abs(it.rect1.x)<=2&&Math.abs(it.rect1.y)<=2&&Math.abs(it.rect2.x)<=2&&Math.abs(it.rect2.y)<=2&&(Ve="none"),Ve=="none"&&it.parent.addChildAt(it,0),Ve=d.types[(d.types.indexOf(Ve)+(d.shiftKey?-1:1)+d.types.length)%d.types.length],Ve=="none"&&(it.rect1.x=it.rect1.y=it.rect2.x=it.rect2.y=0,it.parent.addChild(it),Ze.stopImmediatePropagation()),x[it.index][4]=Ve,it.rect1.color=me(Ve),it.rect2.color=me(Ve),d.drawShape(),t.type&&(d.color=t);var Me=new $e.Event("change");Me.controlType="bezierSwitch",d.dispatchEvent(Me),it.stage.update()}}function me(Ze){var it={straight:"#e472c4",free:"#ebcb35",none:"#50c4b7"};return it[Ze]?it[Ze]:"#993399"}var Ke=e.mobile();d.drawShape=function(){pe.c();var Ze=Ke?10:6,it,Ve,Me,Ne,at,Je,dt,Oe,je,gt,nt,ht,xt,Et,ft;if(r<Ze)for(pe.s("rgba(0,0,0,.01)").ss(Ze),Ne=x[0][0],je=Ne.localToLocal(x[0][1].x,x[0][1].y,V),pe.mt(je.x,je.y),it=0;it<x.length;it++)Ve=it,Me=(it+1)%x.length,Ne=x[Ve][0],at=x[Ve][1],Je=x[Ve][2],dt=x[Ve][3],Oe=x[Me][0],gt=x[Me][1],nt=x[Me][2],xt=Ne.localToLocal(dt.x,dt.y,V),Et=Oe.localToLocal(nt.x,nt.y,V),ft=Oe.localToLocal(gt.x,gt.y,V),it!=x.length-1&&pe.bt(xt.x,xt.y,Et.x,Et.y,ft.x,ft.y);for(d.colorCommand||(d.colorCommand=pe.s(d._color).command,t&&t.type&&d.specialColor(d.colorCommand,t,d)),d.thicknessCommand||(d.thicknessCommand=pe.ss(d._thickness,W.caps,W.joints,W.miterLimit,W.ignoreScale).command),d._dashed&&(d.dashedCommand||(d.dashedCommand=pe.sd(Array.isArray(d._dashed)?d._dashed:[10,10],d._dashedOffset).command)),Ne=x[0][0],je=Ne.localToLocal(x[0][1].x,x[0][1].y,V),pe.mt(je.x,je.y),be.c().s(d.stickColor).ss(d.stickThickness),it=0;it<x.length;it++)Ve=it,Me=(it+1)%x.length,Ne=x[Ve][0],at=x[Ve][1],Je=x[Ve][2],dt=x[Ve][3],Oe=x[Me][0],gt=x[Me][1],nt=x[Me][2],xt=Ne.localToLocal(dt.x,dt.y,V),Et=Oe.localToLocal(nt.x,nt.y,V),ft=Oe.localToLocal(gt.x,gt.y,V),it!=x.length-1&&pe.bt(xt.x,xt.y,Et.x,Et.y,ft.x,ft.y),je=Ne.localToLocal(at.x,at.y,V),ht=Ne.localToLocal(Je.x,Je.y,V),it==0&&(Je.visible=0),it!=0&&be.mt(je.x,je.y).lt(ht.x,ht.y),it!=x.length-1&&be.mt(je.x,je.y).lt(xt.x,xt.y),it==x.length-1&&(dt.visible=0);d._dashed&&pe.append(d.dashedCommand),pe.append(d.thicknessCommand),pe.append(d.colorCommand)},d.drawShape(),t.type&&(d.color=t);var ut;Ie.on("mousedown",function(Ze){if(h=Ze.target.stage,!d.lockControls){if(d.selectPoints&&(d.keyFocus=!0),ut={x:Ze.target.x,y:Ze.target.y},Ze.target.rect1)oe=Ze.target,oe.startX=oe.x,oe.startY=oe.y,oe.rect1.startX=oe.rect1.x,oe.rect1.startY=oe.rect1.y,oe.rect2.startX=oe.rect2.x,oe.rect2.startY=oe.rect2.y;else{var it=Ze.target;it.startX=it.x,it.startY=it.y,oe=it.ball;var Ve=oe.index,Me=c;if(n(x[Ve][4])||(Me=x[Ve][4]),Me=="straight"){var Ne=it.other,at=Ne.x-oe.x,Je=Ne.y-oe.y;Ne.stickLength=Math.sqrt(Math.pow(at,2)+Math.pow(Je,2))}}if(d.selectPoints){var dt=d.selectionManager.currentSet;if(dt&&dt.selections&&dt.selections.length>0)for(ve=0;ve<dt.selections.length;ve++){var Oe=d.pointObjects[dt.selections[ve]];Oe[1].startX=Oe[1].x,Oe[1].startY=Oe[1].y,Oe[2].startX=Oe[2].x,Oe[2].startY=Oe[2].y,Oe[3].startX=Oe[3].x,Oe[3].startY=Oe[3].y}}}}),d.selectPoints&&Ie.tap(function(Ze){if(Ze.target.rect1){var it=Ze.target;d.selectedBalls.toggle(it.parent.num)}else{var Ve=Ze.target;Ve.color="white",it=Ve.ball,it.rect1==Ve?d.selectedRect1s.toggle(it.parent.num):d.selectedRect2s.toggle(it.parent.num)}for(ve=0;ve<d.pointObjects.length;ve++){var Me=d.pointObjects[ve];Me[1].color=d.selectedBalls.isSelected(ve)?I:d.circleColor,Me[2].color=d.selectedRect1s.isSelected(ve)?I:me(Me[4]),Me[3].color=d.selectedRect2s.isSelected(ve)?I:me(Me[4])}h.update()}),Ie.on("pressmove",function(Ze){if(!d.lockControls)if(d.selectPoints){var it=Be();if(it.indexOf(Ze.target)==-1)ae(Ze.target),d.drawShape();else if(it.length>0){for(var Ve=Ze.target.x-Ze.target.startX,Me=Ze.target.y-Ze.target.startY,Ne=0;Ne<it.length;Ne++){var at=it[Ne];at.x=at.startX+Ve,at.y=at.startY+Me,ae(at)}d.drawShape()}}else ae(Ze.target),d.drawShape()}),Ie.on("pressup",function(Ze){if(!d.lockControls){var it=Ze.target.x!=ut.x||Ze.target.y!=ut.y,Ve=new $e.Event("change");Ze.target.rect1?(Ve.controlType="bezierPoint",et(Ze.target)):Ve.controlType="bezierHandle",it&&d.dispatchEvent(Ve)}});function et(Ze){if(d.selectPoints){var it=Be();if(it&&it.indexOf(Ze)==-1)z(Ze);else if(it&&it.length>0)for(var Ve=0;Ve<it.length;Ve++)z(it[Ve]);else z(Ze)}else z(Ze)}d.changeControl=function(Ze,it,Ve,Me,Ne,at,Je,dt,Oe){var je="index, type, rect1X, rect1Y, rect2X, rect2Y, circleX, circleY, update",gt;if(gt=vt(d.changeControl,arguments,je))return gt;if(n(Ze)){for(ve=0;ve<x.length;ve++)d.changeControl(ve,it,Ve,Me,Ne,at,Je,dt);return}var nt=x[Ze];nt[4]=it,it=="none"?(n(Je)||(nt[2].x=Je),n(dt)||(nt[2].y=dt),nt[2].x=nt[1].x,nt[2].y=nt[1].y,nt[3].x=nt[1].x,nt[3].y=nt[1].y,nt[1].parent.addChild(nt[1])):(n(Ve)||(nt[2].x=Ve),n(Me)||(nt[2].y=Me),n(Ne)||(nt[3].x=Ne),n(at)||(nt[3].y=at),n(Je)||(nt[1].x=Je),n(dt)||(nt[1].y=dt),nt[1].parent.addChildAt(nt[1],0)),Oe&&(d.update(),h&&h.update())},d.transformPoints=function(Ze,it,Ve,Me,Ne){return n(Ne)&&(Ne=!0),d.points=e.transformPoints(d.points,Ze,it,Ve,Me),Ne&&d.approximateBounds(),d},d.traverse=function(Ze,it,Ve,Me){var Ne=e.copy(d.segmentRatios);Ne.unshift(0),n(Ve)&&(Ve=it+1);var at=it<Ve,Je,dt;return at?(Je=Ne[it]*100,dt=Ne[Ve]*100):(Je=50+(100-Ne[it]*100)/2,dt=50+(100-Ne[Ve]*100)/2),Ze.percentComplete=Ze.zimStartPercent=Je+.1,Ze.animate({ease:"linear",props:{path:d},rewind:!at,time:Me,events:!0}),Ze.on("animation",function(Oe){if(Ze.percentComplete>dt||Ze.percentComplete==0){Ze.stopAnimate(),Oe.remove();var je=new $e.Event("traversed");je.obj=Ze,d.dispatchEvent(je)}}),d},d.reversePoints=function(){return i=e.copy(d.points),d.points=e.reversePoints(e.copy(d.points)),d.update(),d},d.appendPoints=function(Ze,it){var Ve=e.copy(d.points);return d.points=e.appendPoints(Ve,Ze,it),d.update(),d},d.prependPoints=function(Ze,it){var Ve=e.copy(d.points);return d.points=e.rependPoints(Ve,i,it),d.update(),d},d.splitPoints=function(Ze){var it=e.copy(d.points);if(!(Ze<1||Ze>it.length-1)){var Ve=e.splitPoints(it,Ze),Me=Ve[0],Ne=Ve[1],at=d.clone();return d.points=Me,d.update(),at.points=Ne,d.parent&&at.addTo(d.parent),at}},d.makeBlob=function(Ze,it){n(Ze)&&(Ze="mirror"),n(it)&&(it=5);var Ve=e.copy(d.points);e.loop(Ve,function(Ne,at,Je){Ne[8]||(Ne[8]="mirror"),at==0&&(Ze=="free"&&(Ne[4]=Ne[5]=0),Ne[8]=Ze),at==Je-1&&(Ze=="free"&&(Ne[6]=Ne[7]=0),Ne[8]=Ze)}),Math.abs(Ve[0][0]-Ve[Ve.length-1][0])<it&&Math.abs(Ve[0][1]-Ve[Ve.length-1][1])<it&&(Ve[0][4]=Ve[Ve.length-1][4],Ve[0][5]=Ve[Ve.length-1][5],Ve.pop());var Me=new e.Blob({points:Ve,borderColor:d.color,borderWidth:d.thickness,showControls:d.controlsVisible,interactive:d.interactive,onTop:d.onTop,dashed:d.dashed,stickColor:d.stickColor,stickThickness:d.stickThickness});return Me},d.update=function(Ze){return Ze?d.points=d.pointsAdjusted:d.drawShape(),d.zimAnimateChanged=!0,d},d.interactive&&(E&&V.drag({onTop:!1}),ce=V.on("mousedown",function(Ze){h=Ze.target.stage,ut={x:V.x,y:V.y},d.selectPoints&&(d.keyFocus=!0),qe()}),H=V.on("pressmove",function(){Ie.x=V.x,Ie.y=V.y,ie.x=V.x,ie.y=V.y}),N=V.on("pressup",function(){var Ze=V.x!=ut.x||V.y!=ut.y,it=V.localToLocal(d.regX,d.regY,d.parent);if(d.x=it.x,d.y=it.y,Ie.x=Ie.y=ie.x=ie.y=V.x=V.y=0,Ze){var Ve=new $e.Event("change");Ve.controlType="move",d.dispatchEvent(Ve)}h&&h.update()}),d.move||te(!0));function qe(){if(d.onTop){var Ze=d.parent.numChildren-1;d.parent.getChildAt(Ze).type=="Keyboard"&&Ze--,d.parent.setChildIndex(d,Ze)}}d.toggleEvent=d.on("mousedown",function(){d.allowToggle&&(Q||(d.showControls(),d.dispatchEvent("controlsshow")))}),d.added(function(){h=d.stage,d.toggleStageEvent&&h.off("stagemousedown",d.toggleStageEvent),d.toggleStageEvent=h.on("stagemousedown",function(Ze){!d.allowToggle||!d.stage||Q&&!d.hitTestPoint(Ze.stageX/e.scaX,Ze.stageY/e.scaY,!1)&&(d.hideControls(),d.dispatchEvent("controlshide"))})}),d.clickEvent=d.on("click",function(){d.ctrlKey&&setTimeout(function(){d.clone(!0).addTo(d.stage).mov(0,100),d.allowToggle&&(d.hideControls(),d.dispatchEvent("controlshide"));var Ze=new $e.Event("change");Ze.controlType="move",d.dispatchEvent(Ze),d.stage.update()},50)}),d.hideControls=function(){return d.toggled=!1,Ie.visible=!1,ie.visible=!1,Q=!1,d.stage&&d.stage.update(),!d.allowToggle&&d.move&&te(),d},v||d.hideControls(),d.showControls=function(){return d.toggled=!0,Ie.visible=!0,ie.visible=!0,Q=!0,Ie.x=V.x,Ie.y=V.y,ie.x=V.x,ie.y=V.y,d.addChildAt(V,0),d.move&&!d.allowToggle&&Ye(),d.stage&&d.stage.update(),d},d.toggle=function(Ze){return Ze===!0?d.showControls():Ze===!1||Q?d.hideControls():d.showControls(),d},d.recordData=function(Ze){n(Ze)&&(Ze=!1);var it={type:"Squiggle",index:d.parent?d.parent.getChildIndex(d):-1,x:d.x,y:d.y,points:d.getPoints(),color:d.color,thickness:d.thickness,move:d.move,allowToggle:d.allowToggle,controlsVisible:Q};return Ze?JSON.stringify(it):it},d.setData=function(Ze,it){if(!n(Ze)){if(it)try{Ze=JSON.parse(Ze)}catch(at){return}var Ve=Ze.index;n(Ve)&&(Ve=-1),delete Ze.index;var Me=Ze.points;n(Me)||d.setPoints(Me),delete Ze.points,d.num=Me.length;for(var Ne in Ze)d[Ne]=Ze[Ne];return d.parent&&d.parent.setChildIndex(d,Ve),d.update(),d}},d.getPoints=function(Ze){n(Ze)&&(Ze=!1);var it=d.points;if(Ze){if(!d.pane){var Ve=d.pane=new e.Pane({container:d.stage,width:Math.min(500,d.stage.width-20),height:Math.min(500,d.stage.height-20),draggable:!0}),Me=d.textArea=new e.TextArea(Math.min(400,d.stage.width-70),Math.min(400,d.stage.height-70));Me.centerReg(Ve)}d.textArea.text=JSON.stringify(it),d.pane.show()}return it},d.recordPoints=d.getPoints,d.setPoints=function(Ze){for(var it,Ve,Me=0;Me<Ze.length;Me++)it=x[Me],Ve=Ze[Me],!n(it)&&(it[0].x=Ve[0],it[0].y=Ve[1],it[1].x=Ve[2],it[1].y=Ve[3],it[2].x=Ve[4],it[2].y=Ve[5],it[3].x=Ve[6],it[3].y=Ve[7],it[4]=Ve[8]);return d.update(),d},G!==!1&&e.styleTransforms(d,X),d.clone=function(Ze,it){var Ve=[],Me=!1;e.loop(d.pointControls,function(at){at.scaleX+at.scaleY+at.regX+at.regY+at.rotation!=2&&(Me=!0),Ve.push([at.scaleX,at.scaleY,at.regX,at.regY,at.rotation])});var Ne=d.cloneProps(new e.Squiggle(it?d.colorCommand:Ze||!e.isPick(U[0])?d.color:U[0],d.thickness,d.getPoints(),o,l,c,p,Ie.visible,w,b,d.allowToggle,d.move,S,P,d.circleColor,d.circleBorderColor,d.stickColor,d.stickThickness,I,C,d.editPoints,Y,W,G,d.group,B));return Me&&(e.loop(Ne.pointControls,function(at,Je){at.scaleX=Ve[Je][0],at.scaleY=Ve[Je][1],at.regX=Ve[Je][2],at.regY=Ve[Je][3],at.rotation=Ve[Je][4]}),Ne.update()),d.linearGradientParams&&Ne.linearGradient.apply(Ne,d.linearGradientParams),d.radialGradientParams&&Ne.radialGradient.apply(Ne,d.radialGradientParams),Ne},d.shape.on("mousedown",function(Ze){h=Ze.target.stage,d.editPoints&&(d.controlsVisible?(d.pressX=Ze.stageX/e.scaX,d.pressY=Ze.stageY/e.scaX):(d.pressX=null,d.pressY=null))}),d.addPointFactor=10,d.addMinDistance=15,d.shape.on("pressup",function(Ze){if(d.editPoints&&d.pressX&&Math.abs(d.pressX-Ze.stageX/e.scaX)<fe&&Math.abs(d.pressY-Ze.stageY/e.scaY)<fe){d.selectPoints&&(d.lastPoints=e.copy(d.points));var it=d.points,Ve=d.globalToLocal(Ze.stageX/e.scaX,Ze.stageY/e.scaY),Me=e.closestPointAlongCurve(Ve,d.segmentPoints);if(d.editPoints=="anywhere")it.splice(Me+1,0,[Ve.x,Ve.y,0,0,0,0,0,0]),d.points=it,d.changeControl({index:Me+1,type:"mirror",update:!0});else{var Ne=d.pointsAdjusted,at=d.getSegmentPoint(Ne[Me],Ne[(Me+1)%Ne.length]),Je=e.distanceAlongCurve(at),dt=Math.round(Je/d.addPointFactor),Oe=d.interpolate(dt,Me,!1,it),je=1e4,gt;if(e.loop(Oe,function(Et,ft){var Lt=e.dist(Et,Ve);Lt<je&&(je=Lt,gt=ft)}),je<d.addMinDistance){var nt=d.segmentRatios,ht=nt[Me],xt=Me>0?nt[Me-1]:0;d.addPoint(100*(xt+(ht-xt)*(gt/(dt+1))))}}d.lastSelectedIndex=Me+1,d.lastSelected=d.controls.getChildAt(d.lastSelectedIndex),d.stage.update()}}),d.controls.on("click",function(Ze){d.lastSelected=Ze.target.parent,d.lastSelectedIndex=d.controls.getChildIndex(Ze.target.parent),d.editPoints&&d.selectionManager.shiftKey&&Ue(Ze)});function Ue(Ze){if(Ze.target.type=="Circle"){var it=d.lastSelectedIndex=d.controls.getChildIndex(Ze.target.parent);if(d.controls.numChildren<=2)return;var Ve=d.points;d.selectPoints&&(d.lastPoints=e.copy(Ve)),Ve.splice(it,1),d.points=Ve,d.stage.update(),d.lastSelected=d.lastSelectedIndex=null}}d.controls.hold(Ue),Q||d.hideControls(),d.dispatchEvent("update")}function Be(){var ie=[],pe=d.selectionManager.currentSet;if(pe&&pe.selections&&pe.selections.length>0)for(var be=0;be<pe.selections.length;be++){var he=d.pointObjects[pe.selections[be]];if(pe==d.selectedBalls)ie.push(he[1]);else if(pe==d.selectedRect1s)ie.push(he[2]);else if(pe==d.selectedRect2s)ie.push(he[3]);else continue}return ie}function z(ie){if(ie.type=="Circle"){var pe=ie,be=pe.mySet,he=pe.rect1,Pe=pe.rect2;he.x-=pe.x,he.y-=pe.y,Pe.x-=pe.x,Pe.y-=pe.y,be.x+=pe.x,be.y+=pe.y,pe.x=0,pe.y=0}}d.selectionManager.on("keydown",function(ie){if(d.selectPoints&&d.keyFocus&&ie.keyCode>=37&&ie.keyCode<=40){var pe=Be();if(pe.length>0){for(var be=0;be<pe.length;be++){var he=pe[be];ie.keyCode==37?he.x-=d.selectionManager.shiftKey?10:1:ie.keyCode==39?he.x+=d.selectionManager.shiftKey?10:1:ie.keyCode==38?he.y-=d.selectionManager.shiftKey?10:1:ie.keyCode==40&&(he.y+=d.selectionManager.shiftKey?10:1),ae(he)}d.drawShape(),d.dispatchEvent("update"),d.stage&&d.stage.update()}}}),d.selectionManager.on("keyup",function(ie){if(d.selectPoints&&d.keyFocus&&ie.keyCode>=37&&ie.keyCode<=40){var pe=Be();if(pe.length>0)for(var be=0;be<pe.length;be++)z(pe[be])}}),d.selectionManager.on("undo",function(){if(d.selectPoints&&d.keyFocus&&d.lastPoints){var ie=e.copy(d.lastPoints);d.lastPoints=e.copy(d.points),d.points=ie,d.stage&&d.stage.update()}}),ae=function(ie){if(!d.lockControls){var pe;if(ie.rect1){pe=ie;var be=pe.x-pe.startX,he=pe.y-pe.startY;pe.rect1.x=pe.rect1.startX+be,pe.rect1.y=pe.rect1.startY+he,pe.rect2.x=pe.rect2.startX+be,pe.rect2.y=pe.rect2.startY+he}else{var Pe=ie,Re=Pe.other;pe=Pe.ball;var ve=pe.index,Ae=c;if(n(x[ve][4])||(Ae=x[ve][4]),Ae=="straight"||Ae=="mirror"){var ye=Pe.x-pe.x,Fe=Pe.y-pe.y;if(Ae=="mirror")Re.x=pe.x-ye,Re.y=pe.y-Fe;else{var De=Math.atan2(Fe,ye),ke=-Re.stickLength*Math.cos(De+Math.PI),oe=-Re.stickLength*Math.sin(De+Math.PI);Re.x=pe.x-ke,Re.y=pe.y-oe}}}}},Object.defineProperty(d,"move",{get:function(){return E},set:function(ie){E!=ie&&(E=ie,ie?Ye():te())}}),Object.defineProperty(d,"interactive",{get:function(){return Y},set:function(ie){Y=ie,Q=Y,d.allowToggle=Y,d.editPoints=Y,d.lockControls=!Y,d.selectPoints=Y,d.move=Y;var pe=d.points;d.points=pe}}),Object.defineProperty(d,"allowToggle",{get:function(){return _},set:function(ie){_!=ie&&(_=ie,_?d.move&&Ye():!Q&&d.move&&te())}});function Ye(){d.move!="always"&&(ue||(ue=!0,V.drag({onTop:!1}),ce=V.on("mousedown",ce),H=V.on("pressmove",H),N=V.on("pressup",N)))}function te(ie){d.move!="always"&&(!ie&&!ue||(ue=!1,V.noDrag(),V.off("mousedown",ce),V.off("pressmove",H),V.off("pressup",N)))}var K=w;Object.defineProperty(d,"lockControls",{get:function(){return K},set:function(ie){K=ie,ie?(d.controls.mouseChildren=!1,d.controls.mouseEnabled=!1):(d.controls.mouseChildren=!0,d.controls.mouseEnabled=!0)}}),d.lockControls=K,Object.defineProperty(d,"controlsVisible",{get:function(){return Q},set:function(ie){Q=ie,ie?d.showControls():d.hideControls()}}),le.KEYFOCUS!=null&&(e.KEYFOCUS=le.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return e.KEYFOCUS==d},set:function(){e.KEYFOCUS=d}}),e.KEYFOCUS||xe();function xe(){if(d.selectPoints){d.keyFocus=!0;var ie=document.activeElement;ie&&ie.blur()}}Object.defineProperty(d,"points",{get:function(){for(var ie=[],pe,be,he=0;he<x.length;he++)be=x[he],pe=[e.decimals(be[0].x),e.decimals(be[0].y),e.decimals(be[1].x),e.decimals(be[1].y),e.decimals(be[2].x),e.decimals(be[2].y),e.decimals(be[3].x),e.decimals(be[3].y)],be[4]&&be[4]!=="mirror"&&pe.push(be[4]),ie.push(pe);return ie},set:function(ie){var pe=d.x,be=d.y,he=d.visible,Pe=[],Re=!1;e.loop(d.pointControls,function(ve){ve.scaleX+ve.scaleY+ve.regX+ve.regY+ve.rotation!=2&&(Re=!0),Pe.push([ve.scaleX,ve.scaleY,ve.regX,ve.regY,ve.rotation])}),d.dispose(!0),i=ie,ge(),d.lockControls=K,d.x=pe,d.y=be,d.visible=he,Re&&(e.loop(d.pointControls,function(ve,Ae){ve.scaleX=Pe[Ae][0],ve.scaleY=Pe[Ae][1],ve.regX=Pe[Ae][2],ve.regY=Pe[Ae][3],ve.rotation=Pe[Ae][4]}),d.update())}}),Object.defineProperty(d,"pointsAdjusted",{get:function(){var ie=[],pe,be,he,Pe=d.pointObjects;return e.loop(Pe.length,function(Re){if(he=Pe[Re],be=x[Re],he[0].rotation==0&&he[0].scaleX==0&&he[0].scaleY==0)pe=[e.decimals(be[0].x),e.decimals(be[0].y),e.decimals(be[1].x),e.decimals(be[1].y),e.decimals(be[2].x),e.decimals(be[2].y),e.decimals(be[3].x),e.decimals(be[3].y)];else{var ve=he[0].localToLocal(he[2].x,he[2].y,he[0].parent),Ae=he[0].localToLocal(he[3].x,he[3].y,he[0].parent);pe=[e.decimals(be[0].x),e.decimals(be[0].y),e.decimals(be[1].x),e.decimals(be[1].y),e.decimals(ve.x-be[0].x),e.decimals(ve.y-be[0].y),e.decimals(Ae.x-be[0].x),e.decimals(Ae.y-be[0].y)]}be[4]&&be[4]!=="mirror"&&pe.push(be[4]),ie.push(pe)}),ie},set:function(){Ct&&lt("Squiggle() - pointsAdjusted is read only")}}),Object.defineProperty(d,"pointObjects",{get:function(){return x},set:function(){Ct&&lt("Squiggle() - pointObjects is read only - but its contents can be manipulated - use squiggle.update() after changes")}}),Object.defineProperty(d,"pointControls",{get:function(){return O},set:function(){Ct&&lt("Squiggle() - pointControls is read only - but its contents can be manipulated - use blob.update() after changes")}}),Object.defineProperty(d,"pointCircles",{get:function(){return j},set:function(){Ct&&lt("Squiggle() - pointCircles is read only - but its contents can be manipulated - use blob.update() after changes")}}),Object.defineProperty(d,"segmentPoints",{get:function(){var ie=[],pe=d.pointsAdjusted;return e.loop(pe.length-1,function(be){var he=d.getSegmentPoint(pe[be],pe[be+1]);ie.push(he)}),ie},set:function(){Ct&&lt("Squiggle() - segmentPoints is read only")}}),Object.defineProperty(d,"segmentRatios",{get:function(){var ie=[],pe=0;e.loop(d.segmentPoints,function(Pe){var Re=e.distanceAlongCurve(Pe);ie.push(Re),pe+=Re});var be=[],he=0;return e.loop(ie,function(Pe){var Re=Pe/pe;he+=Re,be.push(he)}),be},set:function(){Ct&&lt("Squiggle() - segmentRatios is read only")}}),d.approximateBounds=function(ie,pe,be){n(ie)&&(ie=80),n(be)&&(be=0),ie/=d.num;var he=d.interpolate(ie,null,!0,null,!0),Pe=e.boundsAroundPoints(he);if(d.setBounds(Pe.x-be,Pe.y-be,Pe.width+be*2,Pe.height+be*2),pe){if(!d.parent)return Ct&&lt("approximateBounds() - add to stage to first to see points"),d;d.hitPathPoints?d.hitPathPoints.removeAllChildren():d.hitPathPoints=new e.Container().addTo(),d.hitPathPoints.top();for(var Re=0;Re<he.length;Re++){var ve=he[Re];ve=d.localToGlobal(ve.x,ve.y),new e.Circle(3).loc(ve.x,ve.y,d.hitPathPoints)}}return d},d.getPointAngle=function(ie){var pe=d.pointObjects[ie][0],be=d.pointObjects[ie][2],he=d.pointObjects[ie][3],Pe,Re;return pe==d.stage?(Pe=new e.Point(be.x,be.y),Re=new e.Point(he.x,he.y)):(Pe=pe.localToGlobal(be.x,be.y),Re=pe.localToGlobal(he.x,he.y)),e.angle(Pe.x,Pe.y,Re.x,Re.y)},d.getSegmentPoint=function(ie,pe){if(!(n(ie)||n(pe))){(ie[2]!=0||ie[3]!=0)&&(ie[4]-=ie[2],ie[5]-=ie[3],ie[6]-=ie[2],ie[7]-=ie[3],ie[0]+=ie[2],ie[1]+=ie[3],ie[2]=0,ie[3]=0),(pe[2]!=0||pe[3]!=0)&&(pe[4]-=pe[2],pe[5]-=pe[3],pe[6]-=pe[2],pe[7]-=pe[3],pe[0]+=pe[2],pe[1]+=pe[3],pe[2]=0,pe[3]=0);var be={x:ie[0],y:ie[1]},he={x:ie[0]+ie[6],y:ie[1]+ie[7]},Pe={x:pe[0]+pe[4],y:pe[1]+pe[5]},Re={x:pe[0],y:pe[1]};return(Ie.x!=0||Ie.y!=0)&&(be.x+=Ie.x,he.x+=Ie.x,Pe.x+=Ie.x,Re.x+=Ie.x,be.y+=Ie.y,he.y+=Ie.y,Pe.y+=Ie.y,Re.y+=Ie.y),[be,he,Pe,Re]}},d.getAdjacentSegmentData=function(ie){n(ie)&&(ie=0);var pe=d.pointsAdjusted;return d.num==2?[[d.getSegmentPoint(pe[0],pe[1])],[0]]:ie==0?[[d.getSegmentPoint(pe[0],pe[1]),d.getSegmentPoint(pe[1],pe[2])],[0,1]]:ie>=d.num-2?[[d.getSegmentPoint(pe[d.num-3],pe[d.num-2]),d.getSegmentPoint(pe[d.num-2],pe[d.num-1])],[d.num-3,d.num-2]]:[[d.getSegmentPoint(pe[ie-1],pe[ie]),d.getSegmentPoint(pe[ie],pe[ie+1]),d.getSegmentPoint(pe[ie+1],pe[ie+2])],[ie-1,ie,ie+1]]},d.getCurvePoint=function(ie,pe,be,he,Pe){(n(ie)||isNaN(ie))&&(ie=0),n(pe)&&(pe=d.segmentRatios),n(be)&&(be=d.segmentPoints),n(he)&&(he=!1),n(Pe)&&(Pe=!1);var Re=pe,ve=be,Ae=e.loop(Re,function(Ge,We){if(Ge>=ie)return We}),ye=Ae>0?Re[Ae-1]:0,Fe=Ae>0?Re[Ae]-Re[Ae-1]:Re[Ae];if(Fe){var De=(ie-ye)/Fe,ke=e.pointAlongCurve(ve[Ae],De,he,!0),oe=d.localToGlobal(ke.x,ke.y);return oe.angle=ke.angle,oe.z=Ae,n(oe)?void 0:oe}};function _e(ie,pe,be){return{x:ie.x+(pe.x-ie.x)*be,y:ie.y+(pe.y-ie.y)*be}}function Se(ie,pe,be,he,Pe,Re,ve,Ae){var ye=ie.length-1,Fe=0,De=0;he==100&&d.type=="Squiggle"&&(he=99.99),he=(he+1e5)%100,e.loop(be,function(me,Ke){if(he/100<me)return ye=Ke,De=me,!0;Fe=me});var ke=d.segmentPoints[ye],oe=De>0?(he/100-Fe)/(De-Fe):0,Ge=e.pointAlongCurve(ke,oe,null,Ae),We=[Ge.x,Ge.y,0,0];if(!Re){if(ve){d.interpolatedPoints.push({x:Ge.x,y:Ge.y,r:he/100});return}if(Pe!="none"){var Qe=_e(ke[0],ke[1],oe),st=_e(ke[1],ke[2],oe),yt=_e(ke[2],ke[3],oe),Le=_e(Qe,st,oe),ze=_e(st,yt,oe);We[4]=Le.x-Ge.x,We[5]=Le.y-Ge.y,We[6]=ze.x-Ge.x,We[7]=ze.y-Ge.y;var ot=d.localToLocal(Qe.x,Qe.y,pe[ye]);ie[ye][6]=ot.x,ie[ye][7]=ot.y;var Ce=d.localToLocal(yt.x,yt.y,pe[(ye+1)%ie.length]);ie[(ye+1)%ie.length][4]=Ce.x,ie[(ye+1)%ie.length][5]=Ce.y}Pe&&(We[8]=Pe),ie.splice(ye+1,0,We)}}this.addPoint=function(ie,pe){n(ie)&&(ie=100);var be=d.points,he=d.segmentRatios,Pe=d.pointControls;return pe=pe||de,Se(be,Pe,he,ie,pe),d.points=be,d.num=be.length,d},this.removePoint=function(ie){if(!(n(ie)||ie<0)){var pe=e.copy(d.points);return pe.splice(ie,1),d.points=pe,d.stage&&d.stage.update(),d}},this.addPoints=function(ie,pe,be,he,Pe,Re,ve){n(Re)&&(Re=e.copy(d.points));var Ae=e.copy(d.segmentRatios),ye=0;if(Pe&&(d.interpolatedPoints=[]),he)var Fe=Ae.length*ie;return e.loop(Ae,function(De,ke){Pe&&Se(Re,d.pointControls,d.segmentRatios,ye*100,pe,!n(be)&&ke!=be,Pe,ve);var oe=he?Math.round(Fe*(De-ye)):ie,Ge=1/(oe+1);e.loop(oe,function(We){var Qe=ye+(De-ye)*Ge*(We+1);Se(Re,d.pointControls,d.segmentRatios,Qe*100,pe,!n(be)&&ke!=be,Pe,ve),!Pe&&ie>0&&(d.points=Re)}),ye=De}),Pe&&d.type=="Squiggle"&&Se(Re,d.pointControls,d.segmentRatios,100,pe,!1,Pe,ve),d.stage&&d.stage.update(),d.num=Re.length,d},this.interpolate=function(ie,pe,be,he,Pe){return n(ie)&&(ie=1),d.addPoints(ie,"none",pe,be,!0,he,Pe),d.interpolatedPoints},$&&d.approximateBounds(),this.dispose=function(ie,pe,be){if(d.shape){if(e.gD(d),h&&d.toggleStageEvent&&h.off("stagemousedown",d.toggleStageEvent),d.controls.noDrag(),d.controls.removeAllEventListeners(),d.selectPoints&&d.selectionManager&&d.selectionManager.dispose(),d.selectedBalls=null,d.selectedRect1s=null,d.selectedRect2s=null,d.selectionManager=null,d.off("mousedown",d.toggleEvent),d.off("click",d.clickEvent),ie){d.shape.dispose(),d.shape=null;for(var he=0;he<d.points.length;he++)d.pointObjects[he][0].removeAllEventListeners(),d.pointObjects[he][1].removeAllEventListeners(),d.pointObjects[he][2].removeAllEventListeners(),d.pointObjects[he][3].removeAllEventListeners();d.controls.removeFrom(d),d.sticks.dispose(),x=null,j=null}else d.removeAllEventListeners(),x=null,j=null,be||this.zimCustomShape_dispose(!0);return!0}}},e.extend(e.Squiggle,e.CustomShape,["clone","dispose"],"zimCustomShape",!1),e.Blob=function(t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,T,L,I,C,k,Y,W,G,F,B,q){var Z="color, borderColor, borderWidth, points, radius, controlLength, controlType, lockControlType, showControls, lockControls, handleSize, allowToggle, move, dashed, onTop, circleColor, circleBorderColor, stickColor, stickThickness, selectColor, selectPoints, editPoints, interactive, strokeObj, style, group, inherit",X;if(X=vt(e.Blob,arguments,Z,this))return X;He("53.5"),this.group=B;var ne=F===!1?{}:e.getStyle("Blob",this.group,q);n(l)&&(l=ne.radius!=null?ne.radius:100),this.zimCustomShape_constructor(-l,-l,l*2,l*2,!1),this.type="Blob",this.mouseChildren=!0,n(P)&&(P=ne.dashed!=null?ne.dashed:!1),n(r)&&(r=ne.borderColor!=null?ne.borderColor:null),n(i)&&(i=ne.borderWidth!=null?ne.borderWidth:null),r<0||i<0?r=i=null:r!=null&&i==null&&(i=1),n(t)&&(t=ne.color!=null?ne.color:i>0?"rgba(0,0,0,0)":e.green),t.style&&(this.colorCommand=t,t=e.black),r&&r.style&&(this.borderColorCommand=r,r=e.black),n(o)&&(o=ne.points!=null?ne.points:4);var $=typeof o!="number",re=typeof o=="number"?o:o.length,de=c;n(c)&&(c=ne.controlLength!=null?ne.controlLength:l*4/re),n(p)&&(p=ne.controlType!=null?ne.controlType:null);var Q=p;n(p)&&(p="straight"),n(v)&&(v=ne.lockControlType!=null?ne.lockControlType:!1),n(W)&&(W=ne.interactive!=null?ne.interactive:!0),n(w)&&(w=ne.showControls!=null?ne.showControls:W);var U=w;n(b)&&(b=ne.lockControls!=null?ne.lockControls:!W),n(_)&&(_=ne.handleSize!=null?ne.handleSize:e.mobile()?20:10),n(E)&&(E=ne.allowToggle!=null?ne.allowToggle:W),n(S)&&(S=ne.move!=null?ne.move:W),n(R)&&(R=ne.circleColor!=null?ne.circleColor:e.light),n(T)&&(T=ne.circleBorderColor!=null?ne.circleBorderColor:e.dark),n(L)&&(L=ne.stickColor!=null?ne.stickColor:e.darker),n(I)&&(I=ne.stickThickness!=null?ne.stickThickness:1),n(C)&&(C=ne.selectColor!=null?ne.selectColor:e.white),n(k)&&(k=ne.selectPoints!=null?ne.selectPoints:W),this.circleColor=R,this.circleBorderColor=T,this.stickColor=L,this.stickThickness=I,n(A)&&(A=ne.onTop!=null?ne.onTop:!0),n(Y)&&(Y=ne.editPoints!=null?ne.editPoints:W),n(G)&&(G=ne.strokeObj!=null?ne.strokeObj:{});var g=d(t,r);this.veeObj={color:g[0],borderColor:g[1]};function d(){return arguments}t=e.Pick.choose(t),r=e.Pick.choose(r);var h=this;this.interactive=W,this.num=re,this.editPoints=Y,this.selectPoints=k,this.lockControls=b,this.onTop=A,this.move=S,this.allowToggle=E,this.lockControlType=v,this.types=["mirror","straight","free","none"];var x,j,O;h._color=t,h._borderColor=r,h._borderWidth=i,h._dashed=P,h._dashed&&!Array.isArray(h._dashed)&&(h._dashed=[10,10]);var V,ce,H,N,ue,fe=h.move,ae=2,Ie,ge;o=Be(o);function Be(he){(he=="circle"||he=="rectangle"||he=="triangle")&&(he=="circle"&&(he=new e.Circle(l)),he=="rectangle"&&(he=new e.Rectangle(l*2,l*2).centerReg({add:!1})),he=="triangle"&&(he=new e.Triangle(l*2,l*2,l*2)));var Pe;if(he.type=="Circle"||he.type=="Rectangle"||he.type=="Triangle"||he.type=="Flare"){var Re=he.getBounds();if(he.type=="Circle")Pe=4,de=c=l*2*.5523;else if(he.type=="Rectangle")he.centerReg({add:!1}),Pe=[[Re.x-Re.width/2,Re.y-Re.height/2],[Re.x+Re.width/2,Re.y-Re.height/2],[Re.x+Re.width/2,Re.y+Re.height/2],[Re.x-Re.width/2,Re.y+Re.height/2]],h.setBounds(Re.x-Re.width/2,Re.y-Re.height/2,Re.width,Re.height),h.regX=he.regX-Re.width/2,h.regY=he.regY-Re.height/2;else if(he.type=="Triangle")Pe=[[he.three.x-he.width/2,he.three.y+he.height/2+he.adjusted],[he.two.x-he.width/2,he.two.y+he.height/2+he.adjusted],[he.one.x-he.width/2,he.one.y+he.height/2+he.adjusted]],h.setBounds(Re.x-Re.width/2,Re.y-Re.height/2,Re.width,Re.height);else if(he.type=="Flare"){var ve=Re.width/2+Re.x,Ae=Re.height/2+Re.y;Pe=[];var ye=e.copy(he.points),Fe={x:null,y:null};e.loop(ye,(De,ke)=>{var oe=Math.round(De.x),Ge=Math.round(De.y);oe==Fe.x&&Ge==Fe.y||(Fe={x:oe,y:Ge},Pe.push([oe-ve,De.y-Ae]))}),h.setBounds(-he.width/2,-he.height/2,he.width,he.height)}return Pe}else return he}if(typeof o=="string"){var z=new e.SVGContainer;o=z.processPath(o),o[0][0]==o[o.length-1][0]&&o[0][1]==o[o.length-1][1]&&(o[0][4]=o[o.length-1][4],o[0][5]=o[o.length-1][5],o.pop())}Q&&typeof o!="number"&&e.loop(o,function(he){he[8]=Q,Q=="none"&&(he[4]=he[5]=he[6]=he[7]=0)}),Ye();function Ye(){if(ge&&ge.removeAllEventListeners(),h.selectPoints?(h.selectedBalls=new e.SelectionSet,h.selectedRect1s=new e.SelectionSet,h.selectedRect2s=new e.SelectionSet,h.selectionManager=new e.SelectionManager([h.selectedBalls,h.selectedRect1s,h.selectedRect2s],"ctrl",!1)):h.selectionManager=new e.SelectionManager(null,"ctrl"),re=typeof o=="number"?o:o.length,re<=0)return;n(de)&&(c=l*4/re),V=h.shape=new e.Shape({style:!1}).addTo(h);var he=h.sticks=new e.Shape({style:!1}).addTo(h);_<=0&&he.removeFrom();var Pe=V.graphics;Pe.c();var Re=he.graphics;Re.c();var ve=_/10*8,Ae=_,ye=e.mobile();ge=h.controls=new e.Container({style:!1}).addTo(h),h.interactive&&ge.drag({onTop:!ye}),x=[],O=[],j=[];var Fe,De,ke,oe,Ge,We,Qe,st,yt;for(Fe=0;Fe<re;Fe++){if(oe=new e.Container({style:!1}).addTo(ge),oe.num=Fe,typeof o=="number"){var Le=e.Pick.choose(c);ke=new e.Container(Le,l,null,null,!1).reg(Le/2,l).addTo(h),ke.rotation=Fe/re*360,Qe=new e.Circle(ve,h.selectPoints&&h.selectedBalls.isSelected(Fe)?C:h.circleColor,h.circleBorderColor,2,null,null,null,null,!1).centerReg(ke).loc({x:Le/2,y:0}),Ge=new e.Rectangle(Ae,Ae,h.selectPoints&&h.selectedRect1s.isSelected(Fe)?C:et(p),_==0?null:e.dark,_==0?null:2,null,null,null,null,!1).centerReg(ke).loc({x:0,y:0}),We=new e.Rectangle(Ae,Ae,h.selectPoints&&h.selectedRect2s.isSelected(Fe)?C:et(p),_==0?null:e.dark,_==0?null:2,null,null,null,null,!1).centerReg(ke).loc({x:Le,y:0});var ze=ke.localToLocal(Qe.x,Qe.y,ge);Qe.x=ze.x,Qe.y=ze.y,Qe.addTo(oe,null,!1);var ot=ke.localToLocal(Ge.x,Ge.y,ge);Ge.x=p=="none"?0:ot.x-Qe.x,Ge.y=p=="none"?0:ot.y-Qe.y,Ge.addTo(oe,null,!1);var Ce=ke.localToLocal(We.x,We.y,ge);We.x=p=="none"?0:Ce.x-Qe.x,We.y=p=="none"?0:Ce.y-Qe.y,We.addTo(oe,null,!1),oe.x=Qe.x,oe.y=Qe.y,Qe.x=0,Qe.y=0,p=="none"&&Qe.addTo(oe,null,!1)}else yt=o[Fe],st=yt[8]?yt[8]:p,oe.loc({x:yt[0],y:yt[1]}),Qe=new e.Circle(ve,h.circleColor,h.circleBorderColor,2,null,null,null,null,!1).centerReg({add:!1}).addTo(oe).loc({x:yt[2],y:yt[3]}),Ge=new e.Rectangle(Ae,Ae,et(st),_==0?null:e.dark,_==0?null:2,null,null,null,null,!1).centerReg({add:!1}).addTo(oe,0).loc({x:yt[4],y:yt[5]}),We=new e.Rectangle(Ae,Ae,et(st),_==0?null:e.dark,_==0?null:2,null,null,null,null,!1).centerReg({add:!1}).addTo(oe,0).loc({x:yt[6],y:yt[7]});Qe.mySet=oe,Qe.rect1=Ge,Qe.rect2=We,Qe.index=Fe,_==0&&(Qe.expand(10),Ge.expand(10),We.expand(10)),ye?Qe.on("mousedown",Ke):Qe.on("dblclick",ut),Ge.ball=Qe,Ge.other=We,We.ball=Qe,We.other=Ge,ye&&(Qe.expand(),Ge.expand(),We.expand()),De=[oe,Qe,Ge,We,yt?yt[8]:p],x.push(De),j.push(Qe),O.push(oe)}var me=!1;function Ke(Ve){me?(Ve.preventDefault(),ut(Ve)):(me=!0,setTimeout(function(){me=!1},300))}function ut(Ve){if(!h.lockControlType){var Me=Ve.target,Ne=x[Me.index][4]?x[Me.index][4]:p;Math.abs(Me.rect1.x)<=2&&Math.abs(Me.rect1.y)<=2&&Math.abs(Me.rect2.x)<=2&&Math.abs(Me.rect2.y)<=2&&(Ne="none"),Ne=="none"&&Me.parent.addChildAt(Me,0),Ne=h.types[(h.types.indexOf(Ne)+(h.shiftKey?-1:1)+h.types.length)%h.types.length],Ne=="none"&&(Me.rect1.x=Me.rect1.y=Me.rect2.x=Me.rect2.y=0,Me.parent.addChild(Me),Ve.stopImmediatePropagation()),x[Me.index][4]=Ne,Me.rect1.color=et(Ne),Me.rect2.color=et(Ne),h.drawShape();var at=new $e.Event("change");at.controlType="bezierSwitch",h.dispatchEvent(at),Me.stage.update()}}function et(Ve){var Me={mirror:"#993399",free:"#ebcb35",none:"#50c4b7"};return Me[Ve]?Me[Ve]:"#e472c4"}h.drawShape=function(){var Ve,Me,Ne,at,Je,dt,Oe,je,gt,nt,ht,xt,Et;Pe.c(),h.colorCommand||(h.colorCommand=Pe.f(h._color).command,t&&t.type&&h.specialColor(h.colorCommand,t,h)),(n(h._borderWidth)||h._borderWidth>0)&&(!n(h._borderColor)||!n(h._borderWidth))&&(n(h._borderColor)&&(h._borderColor=e.black),h.borderColorCommand||(h.borderColorCommand=Pe.s(h._borderColor).command,h._borderColor&&h._borderColor.type&&h.specialColor(h.borderColorCommand,h._borderColor,h)),h.borderWidthCommand||(h.borderWidthCommand=Pe.ss(h._borderWidth,G.caps,G.joints,G.miterLimit,G.ignoreScale).command),h._dashed&&(h.borderDashedCommand||(h.borderDashedCommand=Pe.sd(Array.isArray(h._dashed)?h._dashed:[10,10],h._dashedOffset).command))),Ne=x[0][0],Oe=Ne.localToLocal(x[0][1].x,x[0][1].y,V),Pe.mt(Oe.x,Oe.y),Re.c().s(h.stickColor).ss(h.stickThickness);for(var ft=0;ft<x.length;ft++)Ve=ft,Me=(ft+1)%x.length,Ne=x[Ve][0],Qe=x[Ve][1],at=x[Ve][2],Je=x[Ve][3],dt=x[Me][0],je=x[Me][1],gt=x[Me][2],ht=Ne.localToLocal(Je.x,Je.y,V),xt=dt.localToLocal(gt.x,gt.y,V),Et=dt.localToLocal(je.x,je.y,V),Pe.bt(ht.x,ht.y,xt.x,xt.y,Et.x,Et.y),Oe=Ne.localToLocal(Qe.x,Qe.y,V),nt=Ne.localToLocal(at.x,at.y,V),Re.mt(Oe.x,Oe.y).lt(nt.x,nt.y),Re.mt(Oe.x,Oe.y).lt(ht.x,ht.y);Pe.cp(),Pe.append(h.colorCommand),h._dashed&&Pe.append(h.borderDashedCommand),h.borderWidthCommand&&Pe.append(h.borderWidthCommand),h.borderColorCommand&&Pe.append(h.borderColorCommand)},h.drawShape(),t.type&&(h.color=t);var qe;ge.on("mousedown",function(Ve){if(!h.lockControls){h.selectPoints&&(h.keyFocus=!0),qe={x:Ve.target.x,y:Ve.target.y};var Me;if(Ve.target.rect1)Me=Ve.target,Me.startX=Me.x,Me.startY=Me.y,Me.rect1.startX=Me.rect1.x,Me.rect1.startY=Me.rect1.y,Me.rect2.startX=Me.rect2.x,Me.rect2.startY=Me.rect2.y;else{var Ne=Ve.target;Ne.startX=Ne.x,Ne.startY=Ne.y,Me=Ne.ball;var at=Me.index,Je=p;if(n(x[at][4])||(Je=x[at][4]),Je=="straight"){var dt=Ne.other,Oe=dt.x-Me.x,je=dt.y-Me.y;dt.stickLength=Math.sqrt(Math.pow(Oe,2)+Math.pow(je,2))}}if(h.selectPoints){var gt=h.selectionManager.currentSet;if(gt&&gt.selections&&gt.selections.length>0)for(var nt=0;nt<gt.selections.length;nt++){var ht=h.pointObjects[gt.selections[nt]];ht[1].startX=ht[1].x,ht[1].startY=ht[1].y,ht[2].startX=ht[2].x,ht[2].startY=ht[2].y,ht[3].startX=ht[3].x,ht[3].startY=ht[3].y}}}}),h.selectPoints&&ge.tap(function(Ve){var Me;if(Ve.target.rect1)Me=Ve.target,h.selectedBalls.toggle(Me.parent.num);else{var Ne=Ve.target;Ne.color="white",Me=Ne.ball,Me.rect1==Ne?h.selectedRect1s.toggle(Me.parent.num):h.selectedRect2s.toggle(Me.parent.num)}for(var at=0;at<h.pointObjects.length;at++){var Je=h.pointObjects[at];Je[1].color=h.selectedBalls.isSelected(at)?C:h.circleColor,Je[2].color=h.selectedRect1s.isSelected(at)?C:et(Je[4]),Je[3].color=h.selectedRect2s.isSelected(at)?C:et(Je[4])}Ve.target.stage.update()}),ge.on("pressmove",function(Ve){if(!h.lockControls)if(h.selectPoints){var Me=te();if(Me.indexOf(Ve.target)==-1)Ie(Ve.target),h.drawShape();else if(Me.length>0){for(var Ne=Ve.target.x-Ve.target.startX,at=Ve.target.y-Ve.target.startY,Je=0;Je<Me.length;Je++){var dt=Me[Je];dt.x=dt.startX+Ne,dt.y=dt.startY+at,Ie(dt)}h.drawShape()}}else Ie(Ve.target),h.drawShape()}),ge.on("pressup",function(Ve){if(!h.lockControls){var Me=Ve.target.x!=qe.x||Ve.target.y!=qe.y,Ne=new $e.Event("change");Ve.target.rect1?(Ne.controlType="bezierPoint",Ue(Ve.target)):Ne.controlType="bezierHandle",Me&&h.dispatchEvent(Ne)}});function Ue(Ve){if(h.selectPoints){var Me=te();if(Me&&Me.indexOf(Ve)==-1)K(Ve);else if(Me&&Me.length>0)for(var Ne=0;Ne<Me.length;Ne++)K(Me[Ne]);else K(Ve)}else K(Ve)}h.changeControl=function(Ve,Me,Ne,at,Je,dt,Oe,je,gt){var nt="index, type, rect1X, rect1Y, rect2X, rect2Y, circleX, circleY, update",ht;if(ht=vt(h.changeControl,arguments,nt))return ht;if(n(Ve)){for(var xt=0;xt<x.length;xt++)h.changeControl(xt,Me,Ne,at,Je,dt,Oe,je);return h}var Et=x[Ve];return Et[4]=Me,Me=="none"?(n(Oe)||(Et[1].x=Oe),n(je)||(Et[1].y=je),Et[2].x=Et[1].x,Et[2].y=Et[1].y,Et[3].x=Et[1].x,Et[3].y=Et[1].y,Et[1].parent.addChild(Et[1])):(n(Oe)||(Et[1].x=Oe),n(je)||(Et[1].y=je),n(Ne)||(Et[2].x=Ne),n(at)||(Et[2].y=at),n(Je)||(Et[3].x=Je),n(dt)||(Et[3].y=dt),Et[1].parent.addChildAt(Et[1],0)),Et[2].color=et(Me),Et[3].color=et(Me),gt&&(h.update(),h.stage&&h.stage.update()),h},h.transformPoints=function(Ve,Me,Ne,at,Je){return n(Je)&&(Je=!0),h.points=e.transformPoints(h.points,Ve,Me,Ne,at),Je&&h.approximateBounds(),h},h.traverse=function(Ve,Me,Ne,at){var Je=e.copy(h.segmentRatios);Je.unshift(0),n(Ne)&&(Ne=Me+1);var dt=Me<Ne,Oe,je;return dt?(Oe=Je[Me]*100,je=Je[Ne]*100):(Oe=50+(100-Je[Me]*100)/2,je=50+(100-Je[Ne]*100)/2),Ve.percentComplete=Oe,Ve.animate({ease:"linear",props:{path:h},rewind:!dt,time:at,events:!0}),Ve.on("animation",function(gt){if(Ve.percentComplete>je||Ve.percentComplete==0){Ve.stopAnimate(),gt.remove();var nt=new $e.Event("traversed");nt.obj=Ve,h.dispatchEvent(nt)}}),h},h.reversePoints=function(Ve){return n(Ve)&&(Ve=!0),o=e.copy(h.points),o.reverse(),Ve&&o.unshift(o.pop()),e.loop(o,function(Me){var Ne=Me[6];Me[6]=Me[4],Me[4]=Ne;var at=Me[7];Me[7]=Me[5],Me[5]=at}),h.points=o,h.update(),h},h.splitPoints=function(Ve){var Me=e.copy(h.points);if(!(Ve<1||Ve>Me.length-1)){var Ne=e.copy(Me.slice(0,Ve+1)),at=e.copy(Me.slice(Ve));e.trimPointEnds(Ne),e.trimPointEnds(at);var Je=h.clone();return h.points=Ne,h.update(),Je.points=at,h.parent&&Je.addTo(h.parent),Je}},h.makeSquiggle=function(Ve){var Me=e.copy(h.points);n(Ve)&&(Ve=0),Ve=(Ve+Me.length*1e3)%Me.length;var Ne=e.copy(Me.slice(Ve)),at=e.copy(Me.slice(0,Ve+1));Me=Ne.concat(at),e.trimPointEnds(Me);var Je=new e.Squiggle({points:Me,color:h.borderColor,thickness:h.borderWidth,showControls:h.controlsVisible,interactive:h.interactive,onTop:h.onTop,dashed:h.dashed,stickColor:h.stickColor,stickThickness:h.stickThickness});return Je},h.update=function(Ve){return Ve?h.points=h.pointsAdjusted:h.drawShape(),h.zimAnimateChanged=!0,h},h.move&&h.interactive&&V.drag({onTop:!1}),ce=V.on("mousedown",function(Ve){ue=Ve.target.stage,qe={x:V.x,y:V.y},h.selectPoints&&(h.keyFocus=!0),Ze()}),H=V.on("pressmove",function(){ge.x=V.x,ge.y=V.y,he.x=V.x,he.y=V.y}),N=V.on("pressup",function(){var Ve=V.x!=qe.x||V.y!=qe.y,Me=V.localToLocal(h.regX,h.regY,h.parent);if(h.x=Me.x,h.y=Me.y,ge.x=ge.y=he.x=he.y=V.x=V.y=0,Ve){var Ne=new $e.Event("change");Ne.controlType="move",h.dispatchEvent(Ne)}ue.update()}),S||_e(!0);function Ze(){if(h.onTop){var Ve=h.parent.numChildren-1;h.parent.getChildAt(Ve).type=="Keyboard"&&Ve--,h.parent.setChildIndex(h,Ve)}}h.toggleEvent=h.on("mousedown",function(){h.allowToggle&&(U||(h.showControls(),h.dispatchEvent("controlsshow")))}),h.added(function(){ue=h.stage,h.toggleStageEvent&&h.stage.off("stagemousedown",h.toggleStageEvent),h.toggleStageEvent=h.stage.on("stagemousedown",function(Ve){!h.allowToggle||!h.stage||U&&!h.hitTestPoint(Ve.stageX/e.scaX,Ve.stageY/e.scaY,!1)&&(h.hideControls(),h.dispatchEvent("controlshide"))})}),h.clickEvent=h.on("click",function(){h.ctrlKey&&setTimeout(function(){h.clone(!0).addTo(h.stage).mov(100),h.allowToggle&&(h.hideControls(),h.dispatchEvent("controlshide"));var Ve=new $e.Event("change");Ve.controlType="move",h.dispatchEvent(Ve),h.stage.update()},50)}),h.hideControls=function(){return h.toggled=!1,ge.visible=!1,he.visible=!1,U=!1,h.stage&&h.stage.update(),!h.allowToggle&&h.move&&_e(),h},U||h.hideControls(),h.showControls=function(){return h.toggled=!0,ge.visible=!0,he.visible=!0,U=!0,ge.x=V.x,ge.y=V.y,he.x=V.x,he.y=V.y,h.addChildAt(V,0),h.move&&!h.allowToggle&&xe(),h.stage&&h.stage.update(),h},h.toggle=function(Ve){return Ve===!0?h.showControls():Ve===!1||U?h.hideControls():h.showControls(),h},h.recordData=function(Ve){n(Ve)&&(Ve=!1);var Me={type:"Blob",index:h.parent?h.parent.getChildIndex(h):-1,x:h.x,y:h.y,points:h.getPoints(),color:h.color,borderColor:h.borderColor,borderWidth:h.borderWidth,move:h.move,allowToggle:h.allowToggle,controlsVisible:U};return Ve?JSON.stringify(Me):Me},h.setData=function(Ve,Me){if(!n(Ve)){if(Me)try{Ve=JSON.parse(Ve)}catch(dt){return}var Ne=Ve.index;n(Ne)&&(Ne=-1),delete Ve.index;var at=Ve.points;n(at)||h.setPoints(at),delete Ve.points,this.num=at.length;for(var Je in Ve)h[Je]=Ve[Je];return h.parent&&h.parent.setChildIndex(h,Ne),h}},h.getPoints=function(Ve){n(Ve)&&(Ve=!1);var Me=h.points;if(Ve){if(!Ne){var Ne=h.pane=new e.Pane({displayClose:!1,container:h.stage,width:Math.min(500,h.stage.width-20),height:Math.min(500,h.stage.height-20),draggable:!0}),at=h.textArea=new e.TextArea(Math.min(400,h.stage.width-70),Math.min(400,h.stage.height-70));at.centerReg(Ne)}Ne.show(),at.text=JSON.stringify(Me)}return Me},h.recordPoints=h.getPoints,h.setPoints=function(Ve){for(var Me,Ne,at=0;at<Ve.length;at++)Me=x[at],Ne=Ve[at],!n(Me)&&(Me[0].x=Ne[0],Me[0].y=Ne[1],Me[1].x=Ne[2],Me[1].y=Ne[3],Me[2].x=Ne[4],Me[2].y=Ne[5],Me[3].x=Ne[6],Me[3].y=Ne[7],Me[4]=Ne[8],Me[2].color=et(Me[4]),Me[3].color=et(Me[4]));return h.update(),h},F!==!1&&e.styleTransforms(h,ne),h.clone=function(Ve,Me){var Ne=[],at=!1;e.loop(h.pointControls,function(dt){dt.scaleX+dt.scaleY+dt.regX+dt.regY+dt.rotation!=2&&(at=!0),Ne.push([dt.scaleX,dt.scaleY,dt.regX,dt.regY,dt.rotation])});var Je=h.cloneProps(new e.Blob(Me?h.colorCommand:Ve||!e.isPick(g[0])?h.color:g[0],Me?h.borderColorCommand:Ve||!e.isPick(g[1])?h.borderColor:g[1],h.borderWidth,h.getPoints(),l,c,p,v,ge.visible,b,_,h.allowToggle,h.move,P,A,h.circleColor,h.circleBorderColor,h.stickColor,h.stickThickness,C,k,h.editPoints,W,G,F,h.group,q));return at&&(e.loop(Je.pointControls,function(dt,Oe){dt.scaleX=Ne[Oe][0],dt.scaleY=Ne[Oe][1],dt.regX=Ne[Oe][2],dt.regY=Ne[Oe][3],dt.rotation=Ne[Oe][4]}),Je.update()),h.linearGradientParams&&Je.linearGradient.apply(Je,h.linearGradientParams),h.radialGradientParams&&Je.radialGradient.apply(Je,h.radialGradientParams),Je},h.shapeMousedownEvent=h.shape.on("mousedown",function(Ve){ue=Ve.target.stage,h.editPoints&&(h.controlsVisible?(h.pressX=Ve.stageX/e.scaX,h.pressY=Ve.stageY/e.scaY):(h.pressX=null,h.pressY=null))}),h.addPointFactor=10,h.addMinDistance=15,h.shapePressupEvent=h.shape.on("pressup",function(Ve){if(h.editPoints&&h.pressX&&Math.abs(h.pressX-Ve.stageX/e.scaX)<ae&&Math.abs(h.pressY-Ve.stageY/e.scaY)<ae){h.selectPoints&&(h.lastPoints=e.copy(h.points));var Me=h.points,Ne=h.globalToLocal(Ve.stageX/e.scaX,Ve.stageY/e.scaY),at=e.closestPointAlongCurve(Ne,h.segmentPoints);if(h.editPoints=="anywhere")Me.splice(at+1,0,[Ne.x,Ne.y,0,0,0,0,0,0]),h.points=Me,h.changeControl({index:at+1,type:"mirror",update:!0});else{var Je=h.pointsAdjusted,dt=h.getSegmentPoint(Je[at],Je[(at+1)%Je.length]),Oe=e.distanceAlongCurve(dt),je=Math.round(Oe/h.addPointFactor),gt=h.interpolate(je,at,!1,Me),nt=1e4,ht;if(e.loop(gt,function(Lt,wt){if(wt!=0){var St=e.dist(Lt,Ne);St<nt&&(nt=St,ht=wt)}}),nt<h.addMinDistance){var xt=h.segmentRatios,Et=xt[at],ft=at>0?xt[at-1]:0;h.addPoint(100*(ft+(Et-ft)*(ht/(je+1))))}}h.lastSelectedIndex=at+1,h.lastSelected=h.controls.getChildAt(h.lastSelectedIndex),h.stage.update()}}),h.controlsClickEvent=h.controls.on("click",function(Ve){h.lastSelected=Ve.target.parent,h.lastSelectedIndex=h.controls.getChildIndex(Ve.target.parent),h.editPoints&&h.selectionManager.shiftKey&&it(Ve)});function it(Ve){if(Ve.target.type=="Circle"){var Me=h.lastSelectedIndex=h.controls.getChildIndex(Ve.target.parent);if(h.controls.numChildren<=2)return;var Ne=h.points;h.selectPoints&&(h.lastPoints=e.copy(Ne)),Ne.splice(Me,1),h.points=Ne,h.stage.update(),h.lastSelected=h.lastSelectedIndex=null}}h.controls.hold(it),U||h.hideControls(),h.dispatchEvent("update")}function te(){var he=[],Pe=h.selectionManager.currentSet;if(Pe&&Pe.selections&&Pe.selections.length>0)for(var Re=0;Re<Pe.selections.length;Re++){var ve=h.pointObjects[Pe.selections[Re]];if(Pe==h.selectedBalls)he.push(ve[1]);else if(Pe==h.selectedRect1s)he.push(ve[2]);else if(Pe==h.selectedRect2s)he.push(ve[3]);else continue}return he}function K(he){if(h.selectPoints&&he.type=="Circle"){var Pe=he,Re=Pe.mySet,ve=Pe.rect1,Ae=Pe.rect2;ve.x-=Pe.x,ve.y-=Pe.y,Ae.x-=Pe.x,Ae.y-=Pe.y,Re.x+=Pe.x,Re.y+=Pe.y,Pe.x=0,Pe.y=0}}h.selectionManager.on("keydown",function(he){if(h.selectPoints&&h.keyFocus&&he.keyCode>=37&&he.keyCode<=40){var Pe=te();if(Pe.length>0){for(var Re=0;Re<Pe.length;Re++){var ve=Pe[Re];he.keyCode==37?ve.x-=h.selectionManager.shiftKey?10:1:he.keyCode==39?ve.x+=h.selectionManager.shiftKey?10:1:he.keyCode==38?ve.y-=h.selectionManager.shiftKey?10:1:he.keyCode==40&&(ve.y+=h.selectionManager.shiftKey?10:1),Ie(ve)}h.drawShape(),h.dispatchEvent("update"),h.stage&&h.stage.update()}}}),h.selectionManager.on("keyup",function(he){if(h.selectPoints&&h.keyFocus&&he.keyCode>=37&&he.keyCode<=40){var Pe=te();if(Pe.length>0)for(var Re=0;Re<Pe.length;Re++)K(Pe[Re])}}),h.selectionManager.on("undo",function(){if(h.selectPoints&&h.keyFocus&&h.lastPoints){var he=e.copy(h.lastPoints);h.lastPoints=e.copy(h.points),h.points=he,h.stage&&h.stage.update()}}),Ie=function(he){if(!h.lockControls){var Pe;if(he.rect1){Pe=he;var Re=Pe.x-Pe.startX,ve=Pe.y-Pe.startY;Pe.rect1.x=Pe.rect1.startX+Re,Pe.rect1.y=Pe.rect1.startY+ve,Pe.rect2.x=Pe.rect2.startX+Re,Pe.rect2.y=Pe.rect2.startY+ve}else{var Ae=he,ye=Ae.other;Pe=Ae.ball;var Fe=Pe.index,De=p;if(n(x[Fe][4])||(De=x[Fe][4]),De=="straight"||De=="mirror"){var ke=Ae.x-Pe.x,oe=Ae.y-Pe.y;if(De=="mirror")ye.x=Pe.x-ke,ye.y=Pe.y-oe;else{var Ge=Math.atan2(oe,ke),We=-ye.stickLength*Math.cos(Ge+Math.PI),Qe=-ye.stickLength*Math.sin(Ge+Math.PI);ye.x=Pe.x-We,ye.y=Pe.y-Qe}}}}},Object.defineProperty(h,"move",{get:function(){return S},set:function(he){S!=he&&(S=he,he?xe():_e())}}),Object.defineProperty(h,"interactive",{get:function(){return W},set:function(he){W=he,U=W,h.allowToggle=W,h.editPoints=W,h.lockControls=!W,h.selectPoints=W,h.move=W;var Pe=h.points;h.points=Pe}}),Object.defineProperty(h,"allowToggle",{get:function(){return E},set:function(he){E!=he&&(E=he,E?h.move&&xe():!U&&h.move&&_e())}});function xe(){h.move!="always"&&(fe||(fe=!0,V.drag({onTop:!1}),ce=V.on("mousedown",ce),H=V.on("pressmove",H),N=V.on("pressup",N)))}function _e(he){h.move!="always"&&(!he&&!fe||(fe=!1,V.noDrag(),V.off("mousedown",ce),V.off("pressmove",H),V.off("pressup",N)))}Object.defineProperty(h,"controlsVisible",{get:function(){return U},set:function(he){U=he,he?h.showControls():h.hideControls()}});var Se=b;Object.defineProperty(h,"lockControls",{get:function(){return Se},set:function(he){Se=he,he?(h.controls.mouseChildren=!1,h.controls.mouseEnabled=!1):(h.controls.mouseChildren=!0,h.controls.mouseEnabled=!0)}}),h.lockControls=Se,le.KEYFOCUS!=null&&(e.KEYFOCUS=le.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return e.KEYFOCUS==h},set:function(){e.KEYFOCUS=h}}),h.selectPoints&&!e.KEYFOCUS&&ie();function ie(){h.keyFocus=!0;var he=document.activeElement;he&&he.blur()}Object.defineProperty(h,"points",{get:function(){for(var he=[],Pe,Re,ve=0;ve<x.length;ve++)Re=x[ve],Pe=[e.decimals(Re[0].x),e.decimals(Re[0].y),e.decimals(Re[1].x),e.decimals(Re[1].y),e.decimals(Re[2].x),e.decimals(Re[2].y),e.decimals(Re[3].x),e.decimals(Re[3].y)],Re[4]&&Re[4]!=="straight"&&Pe.push(Re[4]),he.push(Pe);return he},set:function(he){var Pe=h.x,Re=h.y,ve=h.visible,Ae=[],ye=!1;e.loop(h.pointControls,function(Fe){Fe.scaleX+Fe.scaleY+Fe.regX+Fe.regY+Fe.rotation!=2&&(ye=!0),Ae.push([Fe.scaleX,Fe.scaleY,Fe.regX,Fe.regY,Fe.rotation])}),h.dispose(!0),o=Be(he),h.shape&&(h.shape.graphics.clear(),h.sticks.graphics.clear(),h.controls.noDrag(),h.removeAllChildren(),delete h.shape,delete h.sticks,delete h.controls),h.visible=!1,Ye(),h.lockControls=Se,h.x=Pe,h.y=Re,h.visible=ve,ye&&(e.loop(h.pointControls,function(Fe,De){Fe.scaleX=Ae[De][0],Fe.scaleY=Ae[De][1],Fe.regX=Ae[De][2],Fe.regY=Ae[De][3],Fe.rotation=Ae[De][4]}),h.update())}}),Object.defineProperty(h,"pointsAdjusted",{get:function(){var he=[],Pe,Re,ve,Ae=h.pointObjects;return e.loop(Ae.length,function(ye){if(ve=Ae[ye],Re=x[ye],ve[0].rotation==0&&ve[0].scaleX==0&&ve[0].scaleY==0)Pe=[e.decimals(Re[0].x),e.decimals(Re[0].y),e.decimals(Re[1].x),e.decimals(Re[1].y),e.decimals(Re[2].x),e.decimals(Re[2].y),e.decimals(Re[3].x),e.decimals(Re[3].y)];else{var Fe=ve[0].localToLocal(ve[2].x,ve[2].y,ve[0].parent),De=ve[0].localToLocal(ve[3].x,ve[3].y,ve[0].parent);Pe=[e.decimals(Re[0].x),e.decimals(Re[0].y),e.decimals(Re[1].x),e.decimals(Re[1].y),e.decimals(Fe.x-Re[0].x),e.decimals(Fe.y-Re[0].y),e.decimals(De.x-Re[0].x),e.decimals(De.y-Re[0].y)]}Re[4]&&Re[4]!=="mirror"&&Pe.push(Re[4]),he.push(Pe)}),he},set:function(){Ct&&lt("Blob() - pointsAdjusted is read only")}}),Object.defineProperty(h,"pointObjects",{get:function(){return x},set:function(){Ct&&lt("Blob() - pointObjects is read only - but its contents can be manipulated - use blob.update() after changes")}}),Object.defineProperty(h,"pointControls",{get:function(){return O},set:function(){Ct&&lt("Blob() - pointControls is read only - but its contents can be manipulated - use blob.update() after changes")}}),Object.defineProperty(h,"pointCircles",{get:function(){return j},set:function(){Ct&&lt("Blob() - pointCircles is read only - but its contents can be manipulated - use blob.update() after changes")}}),Object.defineProperty(h,"segmentPoints",{get:function(){var he=h.pointsAdjusted,Pe=[];return e.loop(he.length,function(Re,ve){var Ae=h.getSegmentPoint(he[Re],he[Re<ve-1?Re+1:0]);Pe.push(Ae)}),Pe},set:function(){Ct&&lt("Blob() - segmentPoints is read only")}}),Object.defineProperty(h,"segmentRatios",{get:function(){var he=[],Pe=0;e.loop(h.segmentPoints,function(Ae){var ye=e.distanceAlongCurve(Ae);he.push(ye),Pe+=ye});var Re=[],ve=0;return e.loop(he,function(Ae){var ye=Ae/Pe;ve+=ye,Re.push(ve)}),Re},set:function(){Ct&&lt("Blob() - segmentRatios is read only")}}),h.approximateBounds=function(he,Pe){n(he)&&(he=80),he/=h.num;var Re=h.interpolate(he,null,!0,null,!0),ve=e.boundsAroundPoints(Re);if(h.setBounds(ve.x,ve.y,ve.width,ve.height),Pe){if(!h.parent)return Ct&&lt("approximateBounds() - add to stage to first to see points"),h;h.hitPathPoints?h.hitPathPoints.removeAllChildren():h.hitPathPoints=new e.Container().addTo(),h.hitPathPoints.top();for(var Ae=0;Ae<Re.length;Ae++){var ye=Re[Ae];ye=h.localToGlobal(ye.x,ye.y),new e.Circle(3).loc(ye.x,ye.y,h.hitPathPoints)}}return h},h.getPointAngle=function(he){var Pe=h.pointObjects[he][0],Re=h.pointObjects[he][2],ve=h.pointObjects[he][3],Ae,ye;return Pe==h.stage?(Ae=new e.Point(Re.x,Re.y),ye=new e.Point(ve.x,ve.y)):(Ae=Pe.localToGlobal(Re.x,Re.y),ye=Pe.localToGlobal(ve.x,ve.y)),e.angle(Ae.x,Ae.y,ye.x,ye.y)},h.getSegmentPoint=function(he,Pe){if(!(n(he)||n(Pe))){(he[2]!=0||he[3]!=0)&&(he[4]-=he[2],he[5]-=he[3],he[6]-=he[2],he[7]-=he[3],he[0]+=he[2],he[1]+=he[3],he[2]=0,he[3]=0),(Pe[2]!=0||Pe[3]!=0)&&(Pe[4]-=Pe[2],Pe[5]-=Pe[3],Pe[6]-=Pe[2],Pe[7]-=Pe[3],Pe[0]+=Pe[2],Pe[1]+=Pe[3],Pe[2]=0,Pe[3]=0);var Re={x:he[0],y:he[1]},ve={x:he[0]+he[6],y:he[1]+he[7]},Ae={x:Pe[0]+Pe[4],y:Pe[1]+Pe[5]},ye={x:Pe[0],y:Pe[1]};return(ge.x!=0||ge.y!=0)&&(Re.x+=ge.x,ve.x+=ge.x,Ae.x+=ge.x,ye.x+=ge.x,Re.y+=ge.y,ve.y+=ge.y,Ae.y+=ge.y,ye.y+=ge.y),[Re,ve,Ae,ye]}},h.getAdjacentSegmentData=function(he){n(he)&&(he=0);var Pe=h.pointsAdjusted;if(h.num==2)return[[h.getSegmentPoint(Pe[0],Pe[1]),h.getSegmentPoint(Pe[1],Pe[0])],[0,1]];if(he==0)return[[h.getSegmentPoint(Pe[h.num-1],Pe[0]),h.getSegmentPoint(Pe[0],Pe[1]),h.getSegmentPoint(Pe[1],Pe[2])],[h.num-1,0,1]];if(he>=h.num-1)return[[h.getSegmentPoint(Pe[h.num-2],Pe[h.num-1]),h.getSegmentPoint(Pe[h.num-1],Pe[0]),h.getSegmentPoint(Pe[0],Pe[1])],[h.num-2,h.num-1,0]];var Re=he+2>=h.num?0:he+2;return[[h.getSegmentPoint(Pe[he-1],Pe[he]),h.getSegmentPoint(Pe[he],Pe[he+1]),h.getSegmentPoint(Pe[he+1],Pe[Re])],[he-1,he,he+1]]},h.getCurvePoint=function(he,Pe,Re,ve){n(Pe)&&(Pe=h.segmentRatios),n(Re)&&(Re=h.segmentPoints),n(ve)&&(ve=!1);var Ae=Pe,ye=Re,Fe=e.loop(Ae,function(Qe,st){if(Qe>=he)return st}),De=Fe>0?Ae[Fe-1]:0,ke=Fe>0?Ae[Fe]-Ae[Fe-1]:Ae[Fe],oe=(he-De)/ke,Ge=e.pointAlongCurve(ye[Fe],oe,ve,!0);if(!n(Ge)){var We=h.localToGlobal(Ge.x,Ge.y);return We.angle=Ge.angle,We.z=Fe,n(We)?void 0:We}};function pe(he,Pe,Re){return{x:he.x+(Pe.x-he.x)*Re,y:he.y+(Pe.y-he.y)*Re}}function be(he,Pe,Re,ve,Ae,ye,Fe,De){var ke=he.length-1,oe=0,Ge=0;ve==100&&h.type=="Squiggle"&&(ve=99.99),ve=(ve+1e5)%100,e.loop(Re,function(et,qe){if(ve/100<et)return ke=qe,Ge=et,!0;oe=et});var We=h.segmentPoints[ke],Qe=Ge>0?(ve/100-oe)/(Ge-oe):0,st=e.pointAlongCurve(We,Qe,null,De),yt=[st.x,st.y,0,0];if(!ye){if(Fe){h.interpolatedPoints.push({x:st.x,y:st.y,r:ve/100});return}if(Ae!="none"){var Le=pe(We[0],We[1],Qe),ze=pe(We[1],We[2],Qe),ot=pe(We[2],We[3],Qe),Ce=pe(Le,ze,Qe),me=pe(ze,ot,Qe);yt[4]=Ce.x-st.x,yt[5]=Ce.y-st.y,yt[6]=me.x-st.x,yt[7]=me.y-st.y;var Ke=h.localToLocal(Le.x,Le.y,Pe[ke]);he[ke][6]=Ke.x,he[ke][7]=Ke.y;var ut=h.localToLocal(ot.x,ot.y,Pe[(ke+1)%he.length]);he[(ke+1)%he.length][4]=ut.x,he[(ke+1)%he.length][5]=ut.y}Ae&&(yt[8]=Ae),he.splice(ke+1,0,yt)}}this.addPoint=function(he,Pe){n(he)&&(he=100);var Re=h.points,ve=h.segmentRatios,Ae=h.pointControls;return Pe=Pe||Q,be(Re,Ae,ve,he,Pe),h.points=Re,h.num=Re.length,h},this.removePoint=function(he){if(!(n(he)||he<0)){var Pe=e.copy(h.points);return Pe.splice(he,1),h.points=Pe,h.stage&&h.stage.update(),h}},this.addPoints=function(he,Pe,Re,ve,Ae,ye,Fe){n(ye)&&(ye=e.copy(h.points));var De=e.copy(h.segmentRatios),ke=0;if(Ae&&(h.interpolatedPoints=[]),ve)var oe=De.length*he;return e.loop(De,function(Ge,We){Ae&&be(ye,h.pointControls,h.segmentRatios,ke*100,Pe,!n(Re)&&We!=Re,Ae,Fe);var Qe=ve?Math.round(oe*(Ge-ke)):he,st=1/(Qe+1);e.loop(Qe,function(yt){var Le=ke+(Ge-ke)*st*(yt+1);be(ye,h.pointControls,h.segmentRatios,Le*100,Pe,!n(Re)&&We!=Re,Ae,Fe),!Ae&&he>0&&(h.points=ye)}),ke=Ge}),Ae&&h.type=="Squiggle"&&be(ye,h.pointControls,h.segmentRatios,100,Pe,null,Ae,Fe),h.stage&&h.stage.update(),h.num=ye.length,h},this.interpolate=function(he,Pe,Re,ve,Ae){return n(he)&&(he=1),h.addPoints(he,"none",Pe,Re,!0,ve,Ae),h.interpolatedPoints},$&&h.approximateBounds(),this.dispose=function(he,Pe,Re){if(h.shape){if(e.gD(h),ue&&h.toggleStageEvent&&ue.off("stagemousedown",h.toggleStageEvent),h.controls.noDrag(),h.controls.removeAllEventListeners(),h.selectPoints&&h.selectionManager&&h.selectionManager.dispose(),h.selectedBalls=null,h.selectedRect1s=null,h.selectedRect2s=null,h.selectionManager=null,h.off("mousedown",h.toggleEvent),h.off("click",h.clickEvent),he){h.shape.dispose(),h.shape=null;for(var ve=0;ve<h.points.length;ve++)h.pointObjects[ve][0].removeAllEventListeners(),h.pointObjects[ve][1].removeAllEventListeners(),h.pointObjects[ve][2].removeAllEventListeners(),h.pointObjects[ve][3].removeAllEventListeners();h.controls.removeFrom(h),h.sticks.dispose(),x=null,j=null}else h.removeAllEventListeners(),x=null,j=null,Re||this.zimCustomShape_dispose(!0);return!0}}},e.extend(e.Blob,e.CustomShape,["clone","dispose"],"zimCustomShape",!1),e.Flare=function(t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,T,L,I,C,k,Y,W,G,F,B,q,Z,X,ne,$,re,de){var Q="color, borderColor, borderWidth, crossAngle, thickness, thicknessA, thicknessB, pin, startX, startY, lengths, angles, anglesA, anglesB, anglesEnd, cross, crossColors, close, dashed, strokeObj, spineColor, spineBorderWidth, spineBorderColor, spineDashed, spineStrokeObj, closeColor, closeBorderWidth, closeBorderColor, closeDashed, closeStrokeObj, style, group, inherit",U;if(U=vt(e.Flare,arguments,Q,this))return U;He("53.6"),this.zimContainer_constructor(),this.type="Flare",this.group=re;var g=$===!1?{}:e.getStyle(this.type,this.group,de),d=this;n(r)&&(r=g.borderColor!=null?g.borderColor:null),n(i)&&(i=g.borderWidth!=null?g.borderWidth:null),r<0||i<0?r=i=null:r!=null&&i==null&&(i=1),n(t)&&(t=g.color!=null?g.color:i>0?"rgba(0,0,0,0)":e.black),(n(i)||i>0)&&(!n(r)||!n(i))&&n(r)&&(r=e.black),n(o)&&(o=g.crossAngle!=null?g.crossAngle:0);var h=o;o-=90,n(l)&&(l=g.thickness!=null?g.thickness:null),n(c)&&(c=g.thicknessA!=null?g.thicknessA:null),n(p)&&(p=g.thicknessB!=null?g.thicknessB:null),n(l)?n(p)&&!n(c)?p=c:n(c)&&!n(p)?c=p:p=c=10:n(p)&&!n(c)?p=l-c:n(c)&&!n(p)?c=l-p:p=c=l/2,d.thickness=c+p,n(R)&&(R=g.cross!=null?g.cross:!0),n(T)&&(T=g.crossColors!=null?g.crossColors:null),!n(T)&&!Array.isArray(T)&&(T=[T]),n(L)&&(L=g.close!=null?g.close:!1),n(w)&&(w=g.startX!=null?g.startX:0),n(b)&&(b=g.startY!=null?g.startY:0),n(_)&&(_=g.lengths!=null?g.lengths:[200]),Array.isArray(_)||(_=[_]),n(E)&&(E=g.angles!=null?g.angles:[0]),Array.isArray(E)||(E=[E]),n(S)&&(S=g.anglesA!=null?g.anglesA:[10]),Array.isArray(S)||(S=[S]),n(P)&&(P=g.anglesB!=null?g.anglesB:e.copy(S)),Array.isArray(P)||(P=[P]),n(A)&&(A=g.anglesEnd!=null?g.anglesEnd:[0]),Array.isArray(A)||(A=[A]),n(C)&&(C=g.strokeObj!=null?g.strokeObj:{miterLimit:2}),n(W)&&(W=g.spineBorderColor!=null?g.spineBorderColor:null),n(Y)&&(Y=g.spineBorderWidth!=null?g.spineBorderWidth:null),W<0||Y<0?W=Y=null:W!=null&&Y==null&&(Y=1),n(k)&&(k=g.spineColor!=null?g.spineColor:Y>0?"rgba(0,0,0,0)":e.black),n(G)&&(G=g.spineDashed!=null?g.spineDashed:null),n(F)&&(F=g.spineStrokeObj!=null?g.spineStrokeObj:{miterLimit:2}),(n(Y)||Y>0)&&(!n(W)||!n(Y))&&n(W)&&(W=r||e.black),n(Z)&&(Z=g.closeBorderColor!=null?g.closeBorderColor:null),n(q)&&(q=g.closeBorderWidth!=null?g.closeBorderWidth:null),Z<0||q<0?Z=q=null:Z!=null&&q==null&&(q=1),n(B)&&(B=g.closeColor!=null?g.closeColor:q>0?"rgba(0,0,0,0)":null),n(X)&&(X=g.closeDashed!=null?g.closeDashed:null),n(ne)&&(ne=g.closeStrokeObj!=null?g.closeStrokeObj:{miterLimit:2}),(n(q)||q>0)&&(!n(Z)||!n(q))&&n(Z)&&(Z=r||e.black),this.thicknessA=c,this.thicknessB=p,this.cross=R,this.close=L,this.lengths=_,this.angles=E,this.anglesA=S,this.anglesB=P,this.anglesEnd=A,this.crossColors=T,x(_,E,S,P,A,R,T,L),t.type&&(d.color=t);function x(H,N,ue,fe,ae,Ie,ge,Be){d.removeAllChildren();var z=d.shape=new e.Shape().addTo(d);if(d.colorCommand=z.c().f(t).command,t&&t.type&&d.specialColor(d.colorCommand,t,d),(n(i)||i>0)&&(!n(r)||!n(i))&&(n(r)&&(r=e.black),d.borderColorCommand=z.s(r).command,r&&r.type&&d.specialColor(d.borderColorCommand,r,d),d.borderWidthCommand=z.ss(i,C.caps,C.joints,C.miterLimit,C.ignoreScale).command,I&&(d.borderDashedCommand=z.sd([10,10],5).command)),z.mt(0,0),Y>0){var Ye=d.spineShape=new e.Shape().addTo(d);d.spineColorCommand=Ye.c().f(k).command,k&&k.type&&d.specialColor(d.spineColorCommand,k,d),(n(Y)||Y>0)&&(!n(W)||!n(Y))&&(n(W)&&(W=e.black),d.spineBorderColorCommand=Ye.s(W).command,W&&W.type&&d.specialColor(d.spineBorderColorCommand,W,d),d.spineBorderWidthCommand=Ye.ss(Y,F.caps,F.joints,F.miterLimit,F.ignoreScale).command,G&&(d.spineBorderDashedCommand=Ye.sd([10,10],5).command))}if(!n(B)){var te=d.closeShape=new e.Shape().addTo(d);d.closeColorCommand=te.c().f(B).command,B&&B.type&&d.specialColor(d.closeColorCommand,B,d),(n(q)||q>0)&&(!n(Z)||!n(q))&&(n(Z)&&(Z=e.black),d.closeBorderColorCommand=te.s(Z).command,Z&&Z.type&&d.specialColor(d.closeBorderColorCommand,Z,d),d.closeBorderWidthCommand=te.ss(q,ne.caps,ne.joints,ne.miterLimit,ne.ignoreScale).command,X&&(d.closeBorderDashedCommand=te.sd([10,10],5).command)),z.mt(0,0)}var K=w,xe=b,_e=o,Se=_e-180,ie=c,pe=p,be=Math.max(H.length,N.length,ue.length,fe.length,ae.length),he,Pe,Re=Se,ve=[],Ae=[],ye=[];d.points=[];var Fe=d.pinPoints=[];e.loop(be,function(oe){var Ge=De(oe),We=Math.cos(Ge.a*e.RAD),Qe=Math.sin(Ge.a*e.RAD),st=new e.Point(K+Ge.A.x*We-Ge.A.y*Qe,xe+Ge.A.x*Qe+Ge.A.y*We),yt=new e.Point(K+Ge.B.x*We-Ge.B.y*Qe,xe+Ge.B.x*Qe+Ge.B.y*We),Le=new e.Point(K+Ge.C.x*We-Ge.C.y*Qe,xe+Ge.C.x*Qe+Ge.C.y*We),ze=new e.Point(K+Ge.D.x*We-Ge.D.y*Qe,xe+Ge.D.x*Qe+Ge.D.y*We);ve.push(st,yt),Ae.unshift(Le,ze),ye.push([st,yt,Le,ze]);var ot=new e.Point(K+Ge.F.x*We-Ge.F.y*Qe,xe+Ge.F.x*Qe+Ge.F.y*We),Ce=new e.Point(K+Ge.E.x*We-Ge.E.y*Qe,xe+Ge.E.x*Qe+Ge.E.y*We);oe==0&&d.pinPoints.push(ot),d.pinPoints.push(Ce),K=Ce.x,xe=Ce.y,ie=Ge.tA,pe=Ge.tB}),d.points=ve.concat(Ae),Ie?(d.crossCommands=[],e.loop(ye,function(oe,Ge){z.mt(oe[0].x,oe[0].y),!n(ge)&&!n(ge[Ge])&&(z.f(ge[Ge]),d.crossCommands[Ge]=z.f(ge[Ge]).command,ge[Ge]&&ge[Ge].type&&d.specialColor(d.crossCommands[Ge],ge[Ge],d),z.mt(oe[0].x,oe[0].y)),z.lt(oe[1].x,oe[1].y).lt(oe[2].x,oe[2].y).lt(oe[3].x,oe[3].y).cp()}),Be&&z.mt(ye[ye.length-1][1].x,ye[ye.length-1][1].y).lt(ye[ye.length-1][2].x,ye[ye.length-1][2].y).lt(ye[0][3].x,ye[0][3].y).lt(ye[0][0].x,ye[0][0].y).cp()):(e.loop(ve,function(oe,Ge){Ge==0?z.mt(oe.x,oe.y):z.lt(oe.x,oe.y)}),Be&&(z.lt(ve[0].x,ve[0].y),z.cp()),e.loop(Ae,function(oe,Ge){Ge==0&&Be?z.mt(oe.x,oe.y):z.lt(oe.x,oe.y)}),Be&&z.lt(Ae[0].x,Ae[0].y),z.cp()),Ye&&(e.loop(Fe,function(oe,Ge){Ge==0?Ye.mt(oe.x,oe.y):Ye.lt(oe.x,oe.y)}),Be&&Ye.lt(Fe[0].x,Fe[0].y).cp()),n(B)||(e.loop(Ae,function(oe,Ge){Ge==0?te.mt(oe.x,oe.y):te.lt(oe.x,oe.y)}),Be&&te.lt(Ae[0].x,Ae[0].y).cp());function De(oe){var Ge=N[oe],We=H[oe],Qe=ue[oe],st=fe[oe],yt=ae[oe];if(ge)var Le=ge[oe];n(Ge)&&(Ge=Re,d.angles[oe]=Ge),n(We)&&(We=200,d.lengths[oe]=We),n(Qe)&&(Qe=0,d.anglesA[oe]=Qe),n(st)&&(st=0,d.anglesB[oe]=st),n(yt)&&(yt=0,d.anglesEnd[oe]=yt),ge&&n(Le)&&(Le=t,d.crossColors[oe]=Le),yt=yt+90;var ze=180-yt,ot=Math.cos((Re-Ge)*e.RAD),Ce=Math.sin((Re-Ge)*e.RAD),me=new e.Point(0,0),Ke=new e.Point(We,0);if(n(he))var ut=new e.Point(Math.cos(_e*e.RAD)*ie,Math.sin(_e*e.RAD)*ie);else ut=new e.Point(he.x*ot-he.y*Ce,he.x*Ce+he.y*ot);var et=ke(We,ut.x,ut.y,Qe,ze),qe=new e.Point(We-et.x,-et.y),Ue;n(Pe)?Ue=new e.Point(Math.cos(Se*e.RAD)*ie,Math.sin(Se*e.RAD)*pe):Ue=new e.Point(Pe.x*ot-Pe.y*Ce,Pe.x*Ce+Pe.y*ot);var Ze=ke(We,Ue.x,Ue.y,st,yt),it=new e.Point(We-Ze.x,Ze.y);return he=new e.Point(qe.x-We,qe.y),Pe=new e.Point(it.x-We,it.y),Re=Ge,{a:Ge,A:ut,B:qe,C:it,D:Ue,E:Ke,F:me,tA:et.t,tB:Ze.t}}function ke(oe,Ge,We,Qe,st){var yt=st-90,Le=90-yt,ze=180-Qe-Le,ot=Math.tan(yt*e.RAD)*We,Ce=oe-Ge-ot,me=Ce/Math.sin(ze*e.RAD)*Math.sin(Qe*e.RAD),Ke=Math.sqrt(Math.pow(We,2)+Math.pow(ot,2)),ut=me+Ke,et=ut*Math.sin(yt*e.RAD),qe=ut*Math.cos(yt*e.RAD);return{x:et,y:qe,t:ut}}}this.add=function(H,N,ue,fe,ae,Ie,ge,Be){var z="lengths, angles, anglesA, anglesB, anglesEnd, cross, crossColors, close",Ye;return(Ye=vt(d.add,arguments,z))?Ye:(n(Ie)||(d.cross=Ie),n(Be)||(d.close=Be),n(H)||(Array.isArray(H)||(H=[H]),n(d.lengths)?d.lengths=H:d.lengths=d.lengths.concat(H)),n(N)||(Array.isArray(N)||(N=[N]),n(d.angles)?d.angles=N:d.angles=d.angles.concat(N)),n(ue)||(Array.isArray(ue)||(ue=[ue]),n(d.anglesA)?d.anglesA=ue:d.anglesA=d.anglesA.concat(ue)),n(fe)||(Array.isArray(fe)||(fe=[fe]),n(d.anglesB)?d.anglesB=fe:d.anglesB=d.anglesB.concat(fe)),n(ae)||(Array.isArray(ae)||(ae=[ae]),n(d.anglesEnd)?d.anglesEnd=ae:d.anglesEnd=d.anglesEnd.concat(ae)),n(ge)||(n(d.crossColors)?Ct&&lt("Flare() - must set crossColor for original object parameters"):(Array.isArray(ge)||(ge=[ge]),n(d.crossColors)?d.crossColors=ge:d.crossColors=d.crossColors.concat(ge))),d.remake(),d)},this.remake=function(){return c=this.thicknessA,p=this.thicknessB,x(d.lengths,d.angles,d.anglesA,d.anglesB,d.anglesEnd,d.cross,d.crossColors,d.close),d},Object.defineProperty(d,"color",{get:function(){return t},set:function(H){n(H)&&(H=e.black),t=H,H&&H.type?d.specialColor(d.colorCommand,H,d):d.colorCommand.style=H}});var j,O;this.setColorRange=function(H,N){return n(N)?(j=d.color,O=H):n(H)?(j=d.color,O=N):(j=H,O=N),d};var V=0;Object.defineProperty(d,"colorRange",{get:function(){return V},set:function(H){V=H,!n(j)&&!n(O)&&(d.color=e.colorRange(j,O,H))}}),Object.defineProperty(d,"borderColor",{get:function(){return r},set:function(H){r=H,d.borderColorCommand?H&&H.type?d.specialColor(d.borderColorCommand,H,d):d.borderColorCommand.style=H:x()}}),Object.defineProperty(d,"borderWidth",{get:function(){return i},set:function(H){H>0||(H=0),i=H,!d.borderWidthCommand||i==0?x():(d.borderWidthCommand.width=i,I&&(d.borderDashedCommand.segments=[20,10],d.borderDashedCommand.offset=5))}}),Object.defineProperty(d,"spineColor",{get:function(){return k},set:function(H){n(H)&&(H=e.black),k=H,d.spineColorCommand?H&&H.type?d.specialColor(d.spineColorCommand,H,d):d.spineColorCommand.style=H:x()}}),Object.defineProperty(d,"spineBorderColor",{get:function(){return W},set:function(H){W=H,d.spineBorderColorCommand?H&&H.type?d.specialColor(d.spineBorderColorCommand,H,d):d.spineBorderColorCommand.style=H:x()}}),Object.defineProperty(d,"spineBorderWidth",{get:function(){return Y},set:function(H){H>0||(H=0),Y=H,!d.spineBorderWidthCommand||Y==0?x():(d.spineBorderWidthCommand.width=Y,G&&(d.spineBorderDashedCommand.segments=[20,10],d.spineBorderDashedCommand.offset=5))}}),Object.defineProperty(d,"closeColor",{get:function(){return B},set:function(H){n(H)&&(H=e.black),B=H,d.closeColorCommand?H&&H.type?d.specialColor(d.closeColorCommand,H,d):d.closeColorCommand.style=H:x()}}),Object.defineProperty(d,"closeBorderColor",{get:function(){return Z},set:function(H){Z=H,d.closeBorderColorCommand?H&&H.type?d.specialColor(d.closeBorderColorCommand,H,d):d.closeBorderColorCommand.style=H:x()}}),Object.defineProperty(d,"closeBorderWidth",{get:function(){return q},set:function(H){H>0||(H=0),q=H,!d.closeBorderWidthCommand||q==0?x():(d.closeBorderWidthCommand.width=q,X&&(d.closeBorderDashedCommand.segments=[20,10],d.closeBorderDashedCommand.offset=5))}}),Object.defineProperty(d,"pin",{get:function(){return v},set:function(H){H>0||(H=0),H>d.pinPoints.length-1&&(v=0),v=H;var N=d.pinPoints[v];N&&(d.regX=N.x,d.regY=N.y)}});var ce=e.boundsAroundPoints(d.points);this.setBounds(ce.x,ce.y,ce.width,ce.height),n(v)||(d.pin=v),this.mouseChildren=!1,$!==!1&&e.styleTransforms(this,g),this.clone=function(){return d.cloneProps(new e.Flare(t,r,i,h,e.copy(l),e.copy(c),e.copy(p),v,w,b,e.copy(_),e.copy(E),e.copy(S),e.copy(P),e.copy(A),R,e.copy(T),L,I,C,k,Y,W,G,F,B,q,Z,X,ne,$,this.group,de))}},e.extend(e.Flare,e.Container,["clone"],"zimContainer",!1),e.MultiFlare=function(t,r,i,o,l,c,p){var v="flares, pins, angles, endToEnd, style, group, inherit",w;if(w=vt(e.MultiFlare,arguments,v,this))return w;He("53.7"),this.zimContainer_constructor(),this.type="MultiFlare",this.group=c;var b=l===!1?{}:e.getStyle(this.type,this.group,p),_=this;n(t)&&(t=b.flares!=null?b.flares:[]),Array.isArray(t)||(t=[t]),n(r)&&(r=b.pins!=null?b.pins:null),n(i)&&(i=b.angles!=null?b.angles:null),n(o)&&(o=b.endToEnd!=null?b.endToEnd:!1),_.flares=t,_.pins=r,_.angles=i,_.endToEnd=o,_.mouseChildren=!1,_.add=function(E,S){return n(E)||(n(S)&&(S=!0),Array.isArray(E)||(E=[E]),e.loop(E,function(P){S?_.flares.push(P.clone()):_.flares.push(P)}),_.remake(),_.stage&&_.stage.update()),_},_.remove=function(E){return n(E)||(Array.isArray(E)||(E=[E]),e.loop(E,function(S){var P=_.flares.indexOf(S);P>=0&&_.flares.splice(P,1)}),_.remake(),_.stage&&_.stage.update()),_},_.remake=function(){_.removeAllChildren(),e.loop(_.flares,function(E,S){if(r&&!n(r[S])&&(E.pin=r[S]),i&&!n(i[S])&&(E.rotation=i[S]),E.addTo(_),_.flares.push(E),o&&S>0){var P=t[S-1],A=P.pinPoints[P.pinPoints.length-1],R=P.localToLocal(A.x,A.y,_),T=E.pinPoints[0],L=E.localToLocal(T.x,T.y,_);E.mov(R.x-L.x,R.y-L.y)}})},_.remake(),l!==!1&&e.styleTransforms(this,b),this.clone=function(){return _.cloneProps(new e.MultiFlare(e.copy(t,!0),e.copy(r),e.copy(i),o,l,this.group,p))}},e.extend(e.MultiFlare,e.Container,["clone"],"zimContainer",!1),e.FlareBox=function(t,r,i,o,l,c,p,v,w,b,_){var E="width, height, color, borderColor, borderWidth, flares, corners, pins, style, group, inherit",S;if(S=vt(e.FlareBox,arguments,E,this))return S;He("53.8"),this.group=b;var P=w===!1?{}:e.getStyle("FlareBox",this.group,_);n(t)&&(t=P.width!=null?P.width:220),n(r)&&(r=P.height!=null?P.height:80),this.zimContainer_constructor(t,r),this.type="FlareBox";var A=this;if(this.mouseChildren=!1,n(o)&&(o=P.borderColor!=null?P.borderColor:null),n(l)&&(l=P.borderWidth!=null?P.borderWidth:null),o<0||l<0?o=l=null:o!=null&&l==null&&(l=1),n(i)&&(i=P.color!=null?P.color:l>0?"rgba(0,0,0,0)":e.black),(n(l)||l>0)&&(!n(o)||!n(l))&&n(o)&&(o=e.black),n(c)&&(c=P.flares!=null?P.flares:null),n(p)&&(p=P.corners!=null?P.corners:null),n(v)&&(v=P.pins!=null?P.pins:null),A.backing=new e.Rectangle(t,r,i,o,l).addTo(this),!n(c)){if(c.type!="MultiFlare"){if(!Array.isArray(c)){if(c.type!="Flare")return;c=[c]}c=new e.MultiFlare(c,v)}c.addTo(A),A.multiFlare=c,A.flares=A.multiFlare.flares,c.loop(function(R,T){v&&!n(v[T])?R.pin=v[T]:n(R.pin)&&(R.pin=0),p&&!n(p[T])?R.corner=p[T]:n(R.corner)&&(R.corner=0),R.corner==1?R.loc(t,0):R.corner==2?R.loc(t,r):R.corner==3?R.loc(0,r):R.loc(0,0),R.rot((R.corner-R.pin)*90)}),w!==!1&&e.styleTransforms(this,P),this.clone=function(){return A.cloneProps(new e.FlareBox(t,r,i,o,l,e.copy(c,!0),e.copy(p),e.copy(v),w,this.group,_))}}},e.extend(e.FlareBox,e.Container,["clone"],"zimContainer",!1),e.Label=function(t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,T,L,I,C,k,Y,W,G,F,B,q,Z,X,ne,$,re,de,Q,U){var g="text, size, font, color, rollColor, shadowColor, shadowBlur, align, valign, bold, italic, variant, lineWidth, lineHeight, backing, outlineColor, outlineWidth, backgroundColor, backgroundBorderColor, backgroundBorderWidth, corner, backgroundDashed, padding, paddingH, paddingV, shiftH, shiftV, rollPersist, labelWidth, labelHeight, maxSize, splitWords, style, group, inherit",d;if(d=vt(e.Label,arguments,g,this))return d;He("54"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Label",this.group=Q;var h=de===!1?{}:e.getStyle(this.type,this.group,U);n(t)&&(t=h.text!=null?h.text:"LABEL"),n(r)&&(r=h.size!=null?h.size:36),n(i)&&(i=h.font!=null?h.font:"arial"),n(o)&&(o=h.color!=null?h.color:e.black),n(b)&&(b=h.bold!=null?h.bold:!1),n(_)&&(_=h.italic!=null?h.italic:!1);var x=j(t,r,i,o,b,_);this.veeObj={text:x[0],size:x[1],font:x[2],color:x[3],bold:x[4],italic:x[5]};function j(){return arguments}t=e.Pick.choose(t);var O=!1;t===""&&(t=" ",O=!0),r=e.Pick.choose(r),i=e.Pick.choose(i),i=i.replace("+"," ");var V=["ttf","otf","woff2","woff","fnt"],ce=i.split(".");ce.length>0&&V.indexOf(ce[1])!=-1&&(i=ce[0]),o=e.Pick.choose(o),b=e.Pick.choose(b),_=e.Pick.choose(_),n(l)&&(l=h.rollColor!=null?h.rollColor:null),(n(c)||c=="ignore")&&(c=h.shadowColor!=null&&c!="ignore"?h.shadowColor:-1),(n(p)||p=="ignore")&&(p=h.shadowBlur!=null&&p!="ignore"?h.shadowBlur:14),n(v)&&(v=h.align!=null?h.align:"left"),n(w)&&(w=h.valign!=null?h.valign:"top"),(!n(R)||!n(h.outlineColor))&&n(T)&&(T=h.outlineWidth!=null?h.outlineWidth:Math.round(r*.2)),(!n(T)||!n(h.outlineWidth))&&n(R)&&(R=h.outlineColor!=null?h.outlineColor:e.black),n(T)&&(T=h.outlineWidth!=null?h.outlineWidth:0),(n(L)||L=="ignore")&&(L=h.backgroundColor!=null&&L!="ignore"?h.backgroundColor:null),n(I)&&(I=h.backgroundBorderColor!=null&&I!="ignore"?h.backgroundBorderColor:null),n(C)&&(C=h.backgroundBorderWidth!=null&&C!="ignore"?h.backgroundBorderWidth:null),(n(W)||W=="ignore")&&(W=h.padding!=null&&W!="ignore"?h.padding:10),n(G)&&(G=h.paddingH!=null?h.paddingH:W),n(F)&&(F=h.paddingV!=null?h.paddingV:W),n(B)&&(B=h.shiftH!=null?h.shiftH:0),n(q)&&(q=h.shiftV!=null?h.shiftV:0),n(E)&&(E=h.variant!=null?h.variant:!1),n(S)&&(S=h.lineWidth!=null?h.lineWidth:null),n(P)&&(P=h.lineHeight!=null?h.lineHeight:null),(n(A)||A=="ignore")&&(A=h.backing!=null&&A!="ignore"?h.backing.clone():null),n(Z)&&(Z=h.rollPersist!=null?h.rollPersist:!1),h.labelWidth!=null&&(S=h.labelWidth),n(X)||(S=X),v=="middle"&&(v="center"),n(ne)&&(ne=h.labelHeight!=null?h.labelHeight:null),n($)&&($=h.maxSize!=null?h.maxSize:null),r=$?Math.min(r,$):r,n(re)&&(re=h.splitWords!=null?h.splitWords:!1);var H=le.zdf&&le.zdf.retina,N=this;this.mouseChildren=!1,this.paddingV=F,this.paddingH=G,le.DIR&&le.DIR=="rtl"||!le.DIR&&e.DIR=="rtl"?v=="start"?v="right":v=="end"&&(v="left"):v=="start"?v="left":v=="end"&&(v="right");var ue=[];ue[0]=_?"italic":"normal",ue[1]=E?"small-caps":"normal",ue[2]=b?"bold":"normal",ue[3]=r+"px",ue[4]=i;var fe=ue.join(" ");t=String(t);var ae,Ie=!1,ge=S,Be=ne;if(n(A)&&n(L)){var z=new $e.Shape;N.hitArea=z}else ge&&(ge=ge-G*2),Be&&(Be=Be-F*2);function Ye(oe){var Ge=new $e.Text(oe,fe,o);return Ge.lineWidth=ge,Ge.lineHeight=P,Ge}ae=Ye(t);function te(oe,Ge,We){var Qe=Math.ceil(ge/Ge*We.length),st=We.substr(0,Qe),yt=Ye(st),Le=yt.getMeasuredWidth();if(Le>ge)for(;Le>ge;)Qe--,st=We.substr(0,Qe),yt=Ye(st),Le=yt.getMeasuredWidth();else if(Le<ge){for(;Le<ge;)Qe++,st=We.substr(0,Qe),yt=Ye(st),Le=yt.getMeasuredWidth();Qe--,st=We.substr(0,Qe)}var ze=We.substr(Qe,We.length);return{endIndex:Qe,start:st,end:ze}}if(re&&ge>r*1.2)for(var K=ae.getMetrics(),xe=0;K.width>ge&&xe<1e3;)xe++,e.loop(K.lines,function(oe,Ge){oe=oe.replace(/^[\s\t]+/,"");var We=Ye(oe),Qe=We.getMeasuredWidth();if(Qe>ge){var st=te(We,Qe,oe);return K.lines[Ge]=st.start,K.lines.length>Ge+1?(st.end.trim(),K.lines[Ge+1]=st.end+" "+K.lines[Ge+1]):K.lines.push(st.end),ae=Ye(K.lines.join(" ")),K=ae.getMetrics(),!1}});if(this.label=ae,ae.textAlign=v,ae.textBaseline="alphabetic",T>0){var _e=this.outlineLabel=ae.clone();_e.color=R,_e.outline=T}c!=-1&&p>0&&(ae.shadow=new $e.Shadow(c,3,3,p)),this.addChild(ae);function Se(){N.removeChild(N.background),N.background=new e.Rectangle(N.getBounds().width+G*2,N.getBounds().height+F*2,L,I,C,k,Y,null,null,!1),e.center(N.background,N,0),N.setBounds(N.background.x,N.background.y,N.background.width,N.background.height)}function ie(){var oe=ae.getBounds(),Ge=oe.y,We=oe.height;if(ge&&!Be){var Qe=oe.x,st=ge;v=="right"?Qe=oe.x-ge+oe.width:v=="center"&&(Qe=-ge/2),ae.setBounds(Qe,Ge,st,We),oe=ae.getBounds()}var yt;w=="baseline"?yt=oe.y:w=="top"?(ae.y=r-r/6,yt=0):w=="center"||w=="middle"?(yt=-oe.height/2,ae.y=r*.3):yt=-oe.height,N.setBounds(oe.x,yt,h.width?h.width-W*2:oe.width,h.height?h.height-W*2:oe.height),N.hitArea&&N.hitArea.graphics.c().f("black").r(N.getBounds().x,N.getBounds().y,N.getBounds().width,N.getBounds().height),(w=="center"||w=="middle")&&(e.pos(ae,null,0),e.mov(ae,0,1)),ne||(A?Ie&&he():n(L)||Se()),w!="baseline"&&!H&&(ae.y+=r/32),Pe()}if(ie(),!n(A)){if(A.type=="Pattern"){if(N.backing=new e.Container(N.width+G*2,N.height+F*2,null,null,!1).centerReg(null,null,!1),c!=-1&&p>0){var pe=new e.Rectangle(N.width+G*2-2,N.height+F-2,"#666",null,null,k,null,null,null,!1).center(N.backing);pe.shadow=new $e.Shadow(c,3,3,p)}var be=new e.Rectangle(N.width+G*2,N.height+F*2,L,null,null,k,null,null,null,!1).addTo(N.backing);A.centerReg(be),A.setMask(be),N.backing.pattern=A}else N.backing=A;N.backing.center(N,0),A=N.backing,he(),Ie=!0}function he(){var oe=A.boundsToGlobal(),Ge=N.boundsToGlobal(oe,!0);N.setBounds(Ge.x,Ge.y,Ge.width,Ge.height)}function Pe(){e.pos(ae,v=="left"||v=="right"?A||N.background?G:0:null,w=="top"||w=="baseline"||w=="bottom"?A||N.background?F:0:null,v=="right",w=="bottom"),ae.x+=B,ae.y+=q}Pe();function Re(){_e&&(_e.x=ae.x,_e.y=ae.y,N.addChildAt(_e,N.background||N.backing?1:0))}Re(),Object.defineProperty(N,"text",{get:function(){var oe=ae.text==" "&&O?"":ae.text;return oe},set:function(oe){O=!1,oe===""&&(oe=" ",O=!0),ae.text=String(oe),ae.setBounds(null),N.setBounds(null),ie(),_e&&(_e.text=String(oe)),!n(S)&&!n(ne)&&(ke(),_e&&Re())}}),Object.defineProperty(N,"size",{get:function(){return r},set:function(oe){r=$?Math.min(oe,$):oe,ue[3]=r+"px",this.label.font=ue.join(" "),_e&&(_e.font=ue.join(" ")),ae.setBounds(null),N.setBounds(null),ie(),Re()}}),Object.defineProperty(N,"bold",{get:function(){return!!this.label.font.match("bold")},set:function(oe){b=oe,ue[2]=oe?"bold":"normal",this.label.font=ue.join(" "),_e&&(_e.font=ue.join(" "))}}),Object.defineProperty(N,"italic",{get:function(){return!!this.label.font.match("italic")},set:function(oe){_=oe,ue[0]=oe?"italic":"normal",this.label.font=ue.join(" "),_e&&(_e.font=ue.join(" "))}}),Object.defineProperty(N,"variant",{get:function(){return!!this.label.font.match("small-caps")},set:function(oe){E=oe,ue[1]=oe?"small-caps":"normal",this.label.font=ue.join(" "),_e&&(_e.font=ue.join(" "))}}),Object.defineProperty(N,"font",{get:function(){return ue[4]},set:function(oe){n(oe)||(i=oe,ue[4]=oe,this.label.font=ue.join(" "),_e&&(_e.font=ue.join(" ")))}}),Object.defineProperty(N,"align",{get:function(){return v},set:function(oe){n(oe)||(v=oe,this.label.textAlign=v,_e&&(_e.textAlign=v),ie(),Re())}}),Object.defineProperty(N,"valign",{get:function(){return w},set:function(oe){n(oe)||(w=oe,ie(),Re())}}),Object.defineProperty(N,"color",{get:function(){return o},set:function(oe){l==o&&(l=oe),o=oe,ae.color=o,!e.OPTIMIZE&&(Mt||!le.OPTIMIZE)&&N.stage&&N.stage.update()}}),Object.defineProperty(N,"colorOnly",{get:function(){return o},set:function(oe){o=oe,ae.color=o,!e.OPTIMIZE&&(Mt||!le.OPTIMIZE)&&N.stage&&N.stage.update()}});var ve,Ae;this.setColorRange=function(oe,Ge){return n(Ge)?(ve=N.color,Ae=oe):n(oe)?(ve=N.color,Ae=Ge):(ve=oe,Ae=Ge),N};var ye=0;Object.defineProperty(N,"colorRange",{get:function(){return ye},set:function(oe){ye=oe,!n(ve)&&!n(Ae)&&(N.color=e.colorRange(ve,Ae,oe))}}),Object.defineProperty(N,"backgroundColor",{get:function(){return L},set:function(oe){L=oe,N.background?N.background.color=oe:N.backing?N.backing.color=oe:Se(),!e.OPTIMIZE&&(Mt||!le.OPTIMIZE)&&N.stage&&N.stage.update()}}),Object.defineProperty(N,"outlineColor",{get:function(){return R},set:function(oe){R=oe,_e&&(_e.color=R),!e.OPTIMIZE&&(Mt||!le.OPTIMIZE)&&N.stage&&N.stage.update()}}),Object.defineProperty(N,"rollColor",{get:function(){return l},set:function(oe){!N.mouseoverEvent&&oe&&Fe(),oe==null&&N.mouseoverEvent&&De(),l=oe}}),this._enabled=!0,Object.defineProperty(N,"enabled",{get:function(){return N._enabled},set:function(oe){f(N,oe),ae.color=o,N.mouseChildren=!1,!e.OPTIMIZE&&(Mt||!le.OPTIMIZE)&&N.stage&&N.stage.update()}}),this.showRollColor=function(oe){return n(oe)&&(oe=!0),oe?ae.color=l:ae.color=o,N.stage&&N.stage.update(),N};function Fe(){N.mouseoverEvent=N.on("mouseover",function(){N.showRollColor&&N.showRollColor()}),N.mouseoutEvent=N.on("mouseout",function(){N.rollPersist||N.showRollColor(!1)}),N.pressupEvent=N.on("pressup",function(){N.rollPersist&&N.showRollColor(!1)})}function De(){N.off("mouseover",N.mouseoverEvent),N.off("mouseout",N.mouseoutEvent),N.off("pressup",N.pressupEvent)}l&&Fe(),Object.defineProperty(N,"labelWidth",{get:function(){return S},set:function(oe){oe>0&&(S=oe,ge=S,(!n(A)||!n(L))&&ge&&(ge=ge-G*2),N.label.lineWidth=ge,_e&&(_e.lineWidth=ge),ae.setBounds(null),N.setBounds(null),ie(),ne&&ke(),!e.OPTIMIZE&&(Mt||!le.OPTIMIZE)&&N.stage&&N.stage.update())}}),Object.defineProperty(N,"labelHeight",{get:function(){return ne},set:function(oe){oe>0&&(ne=oe,Be=ne,(!n(A)||!n(L))&&Be&&(Be=Be-F*2),S&&ke(),N.setBounds(null),!e.OPTIMIZE&&(Mt||!le.OPTIMIZE)&&N.stage&&N.stage.update())}}),!n(S)&&!n(ne)&&ke();function ke(){N.size=$||200;for(var oe=0;P<Be/2&&(N.height>Be||N.width>ge)&&(oe++,N.size=N.size/2,!(oe>50)););for(oe=0;N.height<=Be&&N.width<=ge&&(oe++,N.size=Math.ceil(N.size+1),!(oe>50)););N.size=N.size-1,Re(),ae.setBounds(null);var Ge=ae.getBounds(),We=Ge.y,Qe=Ge.height;Be&&(w=="bottom"?We=We-Be+Qe:(w=="center"||w=="middle")&&(We=(We+We-Be+Qe)/2),Qe=Be),ae.setBounds(Ge.x,We,Ge.width,Qe),N.setBounds(null),Ge=N.getBounds(),N.setBounds(Ge.x,Ge.y,Ge.width,Ge.height),A?Ie&&he():n(L)||Se()}e.styleTransforms(this,h),this.clone=function(oe){return N.cloneProps(new e.Label(oe||!e.isPick(x[0])?N.text:x[0],oe||!e.isPick(x[1])?r:x[1],oe||!e.isPick(x[2])?i:x[2],oe||!e.isPick(x[3])?o:x[3],l,c,p,v,w,oe||!e.isPick(x[4])?b:x[4],oe||!e.isPick(x[5])?_:x[5],E,S,P,n(A)?null:A.clone(oe),R,T,L,I,C,k,Y,W,G,F,B,q,Z,X,ne,$,re,de,this.group,U))}},e.extend(e.Label,e.Container,"clone","zimContainer"),e.LabelOnPath=function(t,r,i,o,l,c,p,v,w,b,_,E){var S="label, path, percentAngle, percents, showPath, allowToggle, interactive, onTop, rtl, style, group, inherit",P;if(P=vt(e.LabelOnPath,arguments,S,this))return P;He("54.5"),this.zimContainer_constructor(null,null,null,null,!1),this.type="LabelOnPath",this.group=_;var A=b===!1?{}:e.getStyle(this.type,this.group,E);n(t)&&(t=A.label!=null?A.label:new e.Label("Label on Path")),n(r)&&(r=A.path!=null?A.path:new e.Squiggle({points:[[0,0,0,0,-86,57,86,-57],[300,150,0,0,-133,21,133,-21]]})),n(i)&&(i=A.percentAngle!=null?A.percentAngle:100),n(o)&&(o=A.percents!=null?A.percents:null),n(l)&&(l=A.showPath!=null?A.showPath:!0),n(c)&&(c=A.allowToggle!=null?A.allowToggle:!0),n(p)&&(p=A.interactive!=null?A.interactive:!0),n(v)&&(v=A.onTop!=null?A.onTop:!1),n(w)&&(w=A.rtl!=null?A.rtl:le.DIR=="rtl"||e.DIR=="rtl"),w&&r.reversePoints();var R=t.color;r.addTo(this);var T=this;this.path=r,this.allowToggle=c,r.interactive=p,typeof t=="string"&&(t=new e.Label(t));var L=r.alpha;l||r.alp(0),r.onTop=v;var I=this.letters=new e.Container().addTo(this);if(!o){o=[];for(var C=0;C<t.text.length;C++)o.push(e.decimals(1/(t.text.length-(r.type=="Blob"?0:1))*100*C))}this.percents=o;function k(){var W;for(W=I.numChildren-1;W>=0;W--)I.getChildAt(W).dispose();for(T.numLetters=t.text.length,W=0;W<T.numLetters;W++){var G=t.clone();G.text=t.text[W],G.centerReg(I).reg(null,G.height),G.text!=""&&G.text!=" "&&G.expand(0),T.allowToggle&&G.cur("pointer"),G.on("mousedown",function(){T.allowToggle&&T.toggle()})}T.resize()}this.resize=function(){for(var W=r.segmentRatios,G=r.segmentPoints,F=0;F<this.numLetters;F++){var B=r.getCurvePoint(o[F]/100,W,G,!0);if(B){var q=this.globalToLocal(B.x,B.y);q&&(I.getChildAt(F).loc(q).rot((B.angle>180?B.angle-360:B.angle)*i/100),w&&(I.getChildAt(F).rotation+=180))}}return this},k(),this.showPath=function(W){return this.toggle(!0),r.toggle(W),this},this.hidePath=function(){return this.toggle(!1),this},Object.defineProperty(T,"text",{get:function(){return t.text},set:function(W){t.text=W,o=[];for(var G=0;G<t.text.length;G++)o.push(e.decimals(1/(t.text.length-(r.type=="Blob"?0:1))*100*G));k()}}),Object.defineProperty(this,"color",{get:function(){return R},set:function(W){R=W;for(var G=0;G<T.letters.numChildren;G++)T.letters.getChildAt(G).color=R;T.stage&&T.stage.update()}}),Object.defineProperty(T,"interactive",{get:function(){return p},set:function(W){p=W,r.interactive=W,this.ticker&&e.Ticker.remove(this.ticker),p&&(this.ticker=e.Ticker.add(function(){T.resize()}))}}),this.interactive&&(this.ticker=e.Ticker.add(function(){T.resize()}));var Y=T.toggled=l;this.toggle=function(W){if(this.allowToggle)return n(W)?Y=!Y:W?Y=!0:Y=!1,Y?(r.alp(L),this.interactive&&(r.showControls(),I.mouseEnabled=!1,I.mouseChildren=!1,I.cur("default"),this.controlHideEvent&&r.off("controlshide",this.controlHideEvent),this.controlHideEvent=r.on("controlshide",function(){I.mouseEnabled=!0,I.mouseChildren=!0,I.cur("pointer"),L=r.alpha,r.alp(0),Y=!1,T.toggled=Y,T.stage&&T.stage.update()},null,!0))):(L=r.alpha,r.alp(0),I.mouseEnabled=!0,I.mouseChildren=!0,I.cur("pointer")),T.toggled=Y,T.stage&&T.stage.update(),T},T.toggle(!0),e.styleTransforms(this,A),this.clone=function(){return T.cloneProps(new e.LabelOnPath(T.label.clone(),T.path.clone(),i,e.copy(o),l,c,p,v,w,b,this.group,E))},this.dispose=function(W,G,F){return this.ticker&&e.Ticker.remove(this.ticker),F||this.zimContainer_dispose(!0),!0}},e.extend(e.LabelOnPath,e.Container,["clone","dispose"],"zimContainer",!1),e.LabelOnArc=function(t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,T,L){var I="label, size, font, color, radius, flip, spacing, letterSpacing, angles, showCircle, arcColor, arcBorderColor, arcBorderWidth, radiusSpread, rtl, style, group, inherit",C;if(C=vt(e.LabelOnArc,arguments,I,this))return C;He("54.55"),this.group=T;var k=R===!1?{}:e.getStyle("LabelOnArc",this.group,L);n(r)&&(r=k.size!=null?k.size:30),n(t)&&(t=k.label!=null?k.label:new e.Label("Label on Arc",r)),n(i)&&(i=k.font!=null?k.font:"verdana"),n(o)&&(o=k.color!=null?k.color:e.white),n(l)&&(l=k.radius!=null?k.radius:100),n(c)&&(c=k.flip!=null?k.flip:!1),n(p)&&(p=k.spacing!=null?k.spacing:0),n(v)&&(v=k.letterSpacing!=null?k.letterSpacing:5),n(w)&&(w=k.angles!=null?k.angles:null);var Y=!n(w),W=e.copy(w);n(b)&&(b=k.showCircle!=null?k.showCircle:!1),n(_)&&(_=k.arcColor!=null?k.arcColor:null),n(E)&&(E=k.arcBorderColor!=null?k.arcBorderColor:null),n(S)&&(S=k.arcBorderWidth!=null?k.arcBorderWidth:null),n(P)&&(P=k.radiusSpread!=null?k.radiusSpread:!1),n(A)&&(A=k.rtl!=null?k.rtl:le.DIR=="rtl"||e.DIR=="rtl");var G=this.outerRadius=l+p+t.height;this.innerRadius=l+p,this.zimContainer_constructor(-G,-G,G*2,G*2,!1),this.type="LabelOnArc";var F=this;t.type!="Label"&&(t=new e.Label(t,r,i,o)),t.text;var B,q,Z,X,ne,$;function re(){if(F.disposeAllChildren(),c){var U=t.text.split("").reverse().join("");t.text=U}B=F.letters=new e.Container(F.width,F.height).centerReg(F),F.numLetters=t.text.length,F.letterHeight=t.height,q=F.labels=[];var g;for(g=0;g<F.numLetters;g++){var d=t.clone();q.push(d),d.text=t.text[g],d.letterHolder=new e.Container(d.width,d.height),d.centerReg(d.letterHolder).rot(c?180:0)}if(A&&q.reverse(),X=F.circle=new e.Circle(l),b&&X.addTo(F),Z=F.arc=new e.Shape().addTo(F),de(),w){for(ne=0,g=0;g<w.length;g++)ne+=w[g];ne+=w[w.length-1]/2}Q()}re();function de(){ne=0,$=[0];for(var U=0;U<F.numLetters;U++){var g=q[U],d=Math.atan((g.width+v)/2/(l+p))*180/Math.PI*2;$.push(d),ne+=d,g.letterHolder.centerReg(B).reg(null,l+p+g.height+(c?g.height*.13:0))}F.circle.radius=l,(_||E||S)&&(S>0&&n(E)?E=e.black:n(S)&&!n(E)&&(S=2),Z.graphics.c().f(null).s(E).ss(S).arc(0,0,l,(F.startAngle-90)*Math.PI/180,(F.startAngle-90+ne)*Math.PI/180))}function Q(){var U;if(!Y)for(w=[],U=0;U<$.length-1;U++)w[U]=Math.round(($[U]+$[U+1])/2*100)/100;F.angles=w,F.startAngle=-ne/2;var g=F.startAngle;for(U=0;U<B.numChildren;U++){var d=B.getChildAt(U);g=d.rotation=g+w[U]}}Object.defineProperty(this,"radius",{get:function(){return l},set:function(U){l=U,de(),!Y&&!P&&Q()}}),Object.defineProperty(this,"color",{get:function(){return o},set:function(U){o=U;for(var g=0;g<F.labels.length;g++)F.labels[g].color=o;F.stage&&F.stage.update()}}),Object.defineProperty(F,"text",{get:function(){return t.text},set:function(U){t.text=U,W?w=e.copy(W):w=null,re()}}),e.styleTransforms(this,k),this.clone=function(){return F.cloneProps(new e.LabelOnArc(t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,this.group,L))}},e.extend(e.LabelOnArc,e.Container,"clone","zimContainer",!1),e.LabelLetters=function(t,r,i,o,l,c,p,v,w,b,_,E,S,P,A){var R="label, align, valign, letterSpacing, letterSpacings, lineSpacing, lineSpacings, lineHeight, lineAlign, lineValign, cache, rtl, style, group, inherit",T;if(T=vt(e.LabelLetters,arguments,R,this))return T;He("54.57"),this.group=P;var L=S===!1?{}:e.getStyle("LabelLetters",this.group,A);n(t)&&(t=L.label!=null?L.label:new e.Label("Label Letters")),n(r)&&(r=L.align!=null?L.align:"center"),n(i)&&(i=L.valign!=null?L.valign:"center"),n(o)&&(o=L.letterSpacing!=null?L.letterSpacing:5),n(l)&&(l=L.letterSpacings!=null?L.letterSpacings:null),n(v)&&(v=L.lineHeight!=null?L.lineHeight:null),n(c)&&(c=L.lineSpacing!=null?L.lineSpacing:5),n(p)&&(p=L.lineSpacings!=null?L.lineSpacings:null),n(E)&&(E=L.rtl!=null?L.rtl:!1),n(w)&&(w=L.lineAlign!=null?L.lineAlign:E?"right":"left"),n(b)&&(b=L.lineValign!=null?L.lineValign:"bottom"),n(_)&&(_=L.cache!=null?L.cache:!1),this.zimContainer_constructor(null,null,null,null,!1),this.type="LabelLetters";var I=this,C=I.letterData=[],k,Y;t.type!="Label"?(Y=W(t),C=Y.data,t=new e.Label(Y.text)):(Y=W(t.text),C=Y.data,t.text=Y.text),I.text=Y.original,I._color=t.color,le.DIR&&le.DIR=="rtl"||!le.DIR&&e.DIR=="rtl"?w=="start"?w="right":w=="end"&&(w="left"):w=="start"?w="left":w=="end"&&(w="right");function W(_e){var Se=[];function ie(Ae){return Ae.split("").reverse().join("")}if(E){Be=-1,_e=_e.replace(/[\u0591-\u07FF]+/gi,ie),_e=_e.replace(/([^\u0591-\u07FF ])([\u0591-\u07FF])/gi,"$1-!!-$2"),_e=_e.replace(/([\u0591-\u07FF])([^\u0591-\u07FF ])/gi,"$1-!!-$2"),_e=_e.replace(/([^\u0591-\u07FF]) ([\u0591-\u07FF])/gi,"$1-!!- -!!-$2"),_e=_e.replace(/([\u0591-\u07FF]) ([^\u0591-\u07FF])/gi,"$1-!!- -!!-$2");var pe=_e.split(/-!!-/g);e.loop(pe,function(Ae,ye){Ae.match(/[\u0591-\u07FF]/i)&&(pe[ye]=Ae.split(" ").reverse().join(" "))}),_e=pe.join("")}_e=_e.replace(/\n|\r/g,"<br>"),_e=_e.replace(/<strong>|<strong \/>|<strong\/>/gi,"<b>"),_e=_e.replace(/<\/strong>/gi,"</b>"),_e=_e.replace(/<em>|<em \/>|<em\/>/gi,"<i>"),_e=_e.replace(/<\/em>/gi,"</i>"),_e=_e.replace(/\\n|\\r/g,"<br>"),_e=_e.replace(/<br>|<br \/>|<br\/>(<\/br>)?/gi,"<br>"),_e=_e.replace(/<b/gi,"<b"),_e=_e.replace(/<i/gi,"<i"),_e=_e.replace(/<u/gi,"<u"),_e=_e.replace(/<br/gi,"<br"),_e=_e.replace(/<a/gi,"<a"),_e=_e.replace(/<font/gi,"<font");var be=[/<(a|i|u|f|br|\/a|\/i|\/u|\/f|\/b)[^>]*>/g,/<(a|i|u|f|br|\/a|\/i|\/u|\/f|b)[^>]*>/g,/<(b|i|u|f|br|\/b|\/i|\/u|\/f|\/a)[^>]*>/g,/<(b|i|u|f|br|\/b|\/i|\/u|\/f|a)[^>]*>/g,/<(b|a|u|f|br|\/b|\/a|\/u|\/f|\/i)[^>]*>/g,/<(b|a|u|f|br|\/b|\/a|\/u|\/f|i)[^>]*>/g,/<(b|a|i|f|br|\/b|\/a|\/i|\/f|\/u)[^>]*>/g,/<(b|a|i|f|br|\/b|\/a|\/i|\/f|u)[^>]*>/g,/<(b|a|i|u|br|\/b|\/a|\/i|\/u|\/f)[^>]*>/g,/<(b|a|i|u|br|\/b|\/a|\/i|\/u|f)[^>]*>/g],he=["b","a","i","u","font"],Pe;e.loop(he,function(Ae,ye){Pe=_e.replace(be[ye*2],"");var Fe;Ae=="font"?Fe=Pe.split("<font "):Ae=="a"?Fe=Pe.split("<a "):Fe=Pe.split("<"+Ae+">"),ve(Fe,Ae,0),Pe=_e.replace(be[ye*2+1],""),Fe=Pe.split("</"+Ae+">"),ve(Fe,Ae,1)}),Pe=_e.replace(/<br>/gi,"@^#"),Pe=Pe.replace(/<(b|a|i|u|f|\/b|\/a|\/i|\/u|\/f)[^>]*>/g,"");var Re=Pe.split("@^#");k=Re.join("\n"),Pe=Re.join(""),ve(Re,"br",0);function ve(Ae,ye,Fe){if(Ae.length>1)if((ye=="font"||ye=="a")&&Fe==0){var De=Ae[0].length;e.loop(Ae,function(oe,Ge){if(Ge!=0){var We=Se[De];We||(Se[De]=[]),We=Se[De];var Qe=oe.split(">");We[Fe]?We[Fe].push(ye+" "+Qe[0]):We[Fe]=[ye+" "+Qe[0]],De+=Qe[1].length}})}else{Ae.pop();var ke=0;e.loop(Ae,function(oe){ke+=oe.length;var Ge=Se[ke];Ge||(Se[ke]=[]),Ge=Se[ke],Ge[Fe]?Ge[Fe].push(ye):Ge[Fe]=[ye]})}}return{text:Pe,data:Se,original:k}}I.numLetters=t.text.length;var G=!n(l);l&&!Array.isArray(l)&&(l=null);var F;if(l)for(F=0;F<I.numLetters;F++)n(l[F])&&(l[F]=o);else for(l=[],F=0;F<I.numLetters;F++)l.push(o);if(I.letterSpacings=l,p&&!Array.isArray(p)&&(p=null),p)for(F=0;F<I.numLetters-1;F++)n(p[F])&&(p[F]=c);else for(p=[],F=0;F<I.numLetters-1;F++)p.push(c);I.lineSpacings=p,I.labels=[],I.lines=[[]];var B=[],q=[],Z=[0],X=0,ne=0,$=0,re=0,de=0,Q=C,U=!1,g=!1,d=!1,h=!1,x=!1,j=!1,O=!1,V=!1,ce=!1,H=!1,N=!1,ue=!1;for(I.rolls=[[]],F=0;F<I.numLetters;F++){h=!1,Q[F]&&(Q[F][1]&&(Q[F][1].indexOf("b")>=0&&(U=!1),Q[F][1].indexOf("i")>=0&&(g=!1),Q[F][1].indexOf("u")>=0&&(d=!1),e.loop(Q[F][1],function(_e){if(_e.match(/^font/i)){x=!1,N=!1,ue&&I.rolls.push([]),ue=!1,j=!1,V=!1,O=!1;return}if(_e.match(/^a/i)){ce=!1,H=!1;return}})),Q[F][0]&&(Q[F][0].indexOf("b")>=0&&(U=!0),Q[F][0].indexOf("i")>=0&&(g=!0),Q[F][0].indexOf("u")>=0&&(d=!0),h=0,e.loop(Q[F][0],function(_e){_e=="br"&&h++}),e.loop(Q[F][0],function(_e){var Se,ie;if(_e.match(/^font/i)){Se=_e.match(/ color\s?=\s?(\S*)/i),Se&&(x=Se[1],ie=e.colors.indexOf(x),ie>=0&&(x=e.colorsHex[ie]),x=x.replace(/'/g,"")),Se=_e.match(/size\s?=\s?(\S*)/i),Se&&(j=Se[1]),Se=_e.match(/backgroundColor\s?=\s?(\S*)/i),Se&&(N=Se[1],ie=e.colors.indexOf(N),ie>=0&&(N=e.colorsHex[ie]),N=N.replace(/'/g,"")),Se=_e.match(/rollBackgroundColor\s?=\s?(\S*)/i),Se&&(ue=Se[1],ie=e.colors.indexOf(ue),ie>=0&&(ue=e.colorsHex[ie]),ue=ue.replace(/'/g,"")),Se=_e.match(/group\s?=\s?(\S*)/i),Se&&(O=Se[1]),Se=_e.match(/family\s?=\s?(.*)/i),Se&&(V=Se[1],V=V.split(/\ssize\s?=|\scolor\s?=|\sgroup\s?=/i)[0]);return}if(_e.match(/^a/i)){Se=_e.match(/href\s?=\s?(\S*)/i),Se&&(ce=Se[1]),Se=_e.match(/target\s?=\s?(\S*)/i),Se&&(H=Se[1]);return}})));var fe;O?fe=new e.Label({text:t.text[F],group:O}):(fe=t.clone(),fe.text=t.text[F]),I.labels.push(fe),U&&(fe.bold=!0),g&&(fe.italic=!0),x&&(fe.color=x),N&&(fe.backgroundColor=N);var ae=G||n(fe.backgroundColor)?l[F]:-.5;ue&&(fe.rollIndex=I.rolls.length-1,fe.zrbc=ue,fe.zobc=fe.backgroundColor,I.rolls[fe.rollIndex].push(fe),fe.expand(0),fe.on("mouseover",Ie),fe.on("mouseout",ge)),ce&&(fe.expand(ae,0),fe.zurl=ce,fe.ztar=H,fe.cur(),fe.on("click",function(_e){var Se=_e.currentTarget;ge(_e),Se.ztar||(Se.ztar="_self"),nr(Se.zurl,Se.ztar)})),j&&(fe.size=j),V&&(fe.font=V),h&&(X+=(n(v)?$:v)+p[re],Z.push(X),q.push(n(v)?$:v),B.push(ne),de=Math.max(de,ne)),h&&(h>1&&e.loop(h-1,function(){I.lines.push([]),X+=(n(v)?$:v)+p[re],Z.push(X),q.push(n(v)?$:v),B.push(0),re++}),$=0,ne=0,I.lines.push([]),re++),ne+=fe.width+ae,$=Math.max($,fe.height),F==I.numLetters-1&&(B.push(ne),q.push($),de=Math.max(de,ne)),I.lines[re].push(fe),d&&(fe.underline=new e.Line(fe.width+ae+1,1,fe.color).center(fe,this).mov(0,fe.height/2))}function Ie(_e){var Se=_e.currentTarget,ie=I.rolls[Se.rollIndex];e.loop(ie,function(pe){pe.backgroundColor=Se.zrbc}),Se.stage&&Se.stage.update()}function ge(_e){var Se=_e.currentTarget,ie=I.rolls[Se.rollIndex];e.loop(ie,function(pe){pe.backgroundColor=Se.zobc}),Se.stage&&Se.stage.update()}for(var Be=0,z=0;z<I.lines.length;z++){var Ye=I.lines[z];ne=B[z],$=q[z],X=Z[z];var te,K;for(w=="left"?te=0:w=="right"?te=de-ne:te=(de-ne)/2,K=X,F=0;F<Ye.length;F++){Be++,_&&fe.cache(),fe=Ye[F],fe.regX=r=="left"?0:r=="right"?fe.width:fe.width/2,fe.regY=i=="top"?0:i=="bottom"?fe.height:fe.height/2;var xe=K+(i=="top"?0:i=="bottom"?fe.height:fe.height/2);b=="center"||b=="middle"?xe+=(q[z]-fe.height)/2:b=="bottom"&&(xe+=q[z]-fe.height),ae=G||n(fe.backgroundColor)?l[Be-1]:-.5,r=="left"?(fe.loc(te,xe,this),te=fe.x+fe.width+ae):r=="right"?(fe.loc(te+fe.width,xe,this),te=fe.x+ae):(fe.loc(te+fe.width/2,xe,this),te=fe.x+fe.width/2+ae)}}this.getBounds()||this.setBounds(0,0,0,0),this.regX=this.getBounds().x,this.regY=this.getBounds().y,Object.defineProperty(this,"color",{get:function(){return this._color},set:function(_e){this._color=_e;for(var Se=0;Se<I.numChildren;Se++)I.getChildAt(Se).color=this._color;I.stage&&I.stage.update()}}),this.dispose=function(){e.gD(this),e.loop(I.labels,function(_e){_e.removeFrom(),_e.dispose()}),I.removeFrom()},e.styleTransforms(this,L),this.clone=function(){return I.cloneProps(new e.LabelLetters(t,r,i,o,l,c,p,v,w,b,_,E,S,this.group,A))}},e.extend(e.LabelLetters,e.Container,"clone","zimContainer",!1),e.Emoji=function(t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,T){var L="code, size, monochrome, italic, backgroundColor, backgroundBorderColor, backgroundBorderWidth, corner, backing, padding, paddingH, paddingV, shiftH, shiftV, style, group, inherit",I;if(I=vt(e.Emoji,arguments,L,this))return I;He("54.58"),this.group=R;var C=A===!1?{}:e.getStyle("Emoji",this.group,T);n(t)&&(t=C.code!=null?C.code:"\u{1F642}"),n(r)&&(r=C.size!=null?C.size:30),n(i)&&(i=C.monochrome!=null?C.monochrome:!1),n(o)&&(o=C.italic!=null?C.italic:!1),(n(l)||l=="ignore")&&(l=C.backgroundColor!=null&&l!="ignore"?C.backgroundColor:null),n(c)&&(c=C.backgroundBorderColor!=null&&c!="ignore"?C.backgroundBorderColor:null),n(p)&&(p=C.backgroundBorderWidth!=null&&p!="ignore"?C.backgroundBorderWidth:null),(n(b)||b=="ignore")&&(b=C.padding!=null&&b!="ignore"?C.padding:10),n(_)&&(_=C.paddingH!=null?C.paddingH:b),n(E)&&(E=C.paddingV!=null?C.paddingV:b),n(S)&&(S=C.shiftH!=null?C.shiftH:0),n(P)&&(P=C.shiftV!=null?C.shiftV:0);var k=Y(t,r);this.veeObj={code:k[0],size:k[1]};function Y(){return arguments}t=e.Pick.choose(t),r=e.Pick.choose(r),t.substring(0,2)=="U+"&&(t=e.unicodeToUTF(t)),this.zimLabel_constructor(t,r,null,null,null,null,null,null,null,null,o,null,null,null,w,null,null,l,null,null,v,null,b,_,E,S,P),this.type="Emoji",this.code=t,this.size=r;var W=this,G=this.getBounds(),F=5,B=3;this.bounds=this.setBounds(G.x+B,G.y-F+1,G.width-B*2,G.height+F),i&&(this.saturation=-100);var q=i;Object.defineProperty(W,"monochrome",{get:function(){return q},set:function(Z){Z!=q&&(q=Z,Z&&(this.saturation=Z?-100:0))}}),this.cache=function(Z,X,ne,$){return n(Z)?(X=this.getBounds(),this.zimLabel_cache(X.x-20,X.y-20,X.width+40,X.height+40)):this.zimLabel_cache(Z,X,ne,$),W.z_bc=W.cacheCanvas,this},e.styleTransforms(this,C),this.clone=function(Z){return W.cloneProps(new e.Emoji(Z||!e.isPick(k[0])?t:k[0],Z||!e.isPick(k[1])?W.size:k[1],i,o,l,c,p,v,w,b,_,E,S,P,A,W.group,T))}},e.extend(e.Emoji,e.Label,["clone","cache"],"zimLabel",!1),e.Button=function(t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,T,L,I,C,k,Y,W,G,F,B,q,Z,X,ne,$,re,de,Q,U,g,d,h,x,j,O,V,ce,H,N,ue,fe,ae,Ie,ge,Be,z,Ye,te,K,xe,_e,Se,ie,pe,be,he,Pe,Re,ve,Ae,ye,Fe){var De="width, height, label, backgroundColor, rollBackgroundColor, downBackgroundColor, color, rollColor, downColor, borderColor, borderWidth, rollBorderColor, downBorderColor, backing, rollBacking, downBacking, icon, rollIcon, downIcon, corner, dashed, shadowColor, shadowBlur, gradient, gloss, align, valign, indent, indentH, indentV, hitPadding, autoPadding, autoPaddingH, autoPaddingV, rollPersist, toggle, toggleBackgroundColor, rollToggleBackgroundColor, downToggleBackgroundColor, toggleColor, rollToggleColor, downToggleColor, toggleBacking, rollToggleBacking, downToggleBacking, toggleIcon, rollToggleIcon, downToggleIcon, toggleEvent, wait, waitTime, waitBackgroundColor, rollWaitBackgroundColor, downWaitBackgroundColor, waitColor, rollWaitColor, downWaitColor, waitBacking, rollWaitBacking, downWaitBacking, waitIcon, rollWaitIcon, downWaitIcon, waitModal, waitEnabled, style, group, inherit",ke;if(ke=vt(e.Button,arguments,De,this))return ke;He("55"),this.group=ye;var oe=Ae===!1?{}:e.getStyle("Button",ye,Fe);n(t)&&(t=oe.width!=null?oe.width:200),n(r)&&(r=oe.height!=null?oe.height:60),n(le.M)&&(le.M=e.mobile());var Ge=p,We=v,Qe=w;n(p)&&(p=oe.color!=null?oe.color:e.white),n(v)&&(v=oe.rollColor!=null?oe.rollColor:e.white),n(re)&&(re=oe.autoPadding!=null?oe.autoPadding:20),n(de)&&(de=oe.autoPaddingH!=null?oe.autoPaddingH:re),n(Q)&&(Q=oe.autoPaddingV!=null?oe.autoPaddingV:re),n(B)&&(B=oe.align!=null?oe.align:"center"),n(q)&&(q=oe.valign!=null?oe.valign:"center"),n(i)&&(n(T)?i=oe.label!=null?oe.label:"PRESS":i=""),typeof i=="string"||typeof i=="number"?i=new e.Label({text:i,size:oe.size!=null?oe.size:36,font:oe.font!=null?oe.font:"arial",color:oe.color!=null&&Ge==null?oe.color:p,rollColor:oe.rollColor&&We==null!=null?oe.rollColor:v,align:B,valign:q,rollPersist:oe.rollPersist!=null?oe.rollPersist:!1,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",shiftV:oe.shiftV!=null?oe.shiftV:0,shiftH:oe.shiftH!=null?oe.shiftH:0,style:!1,group:this.group}):(n(Ge)||(i.color=Ge),p=i.color,(n(i.rollColor)||!n(We))&&(i.rollColor=v),v=i.rollColor),n(w)&&(w=oe.downColor!=null?oe.downColor:v),t=="auto"&&(t=i.width+de*2),r=="auto"&&(r=i.height+Q*2),this.zimContainer_constructor(t,r,null,null,!1),this.type="Button",n(o)&&(o=oe.backgroundColor!=null?oe.backgroundColor:e.purple),n(l)&&(l=oe.rollBackgroundColor!=null?oe.rollBackgroundColor:o.lighten(.2)),n(c)&&(c=oe.downBackgroundColor!=null?oe.downBackgroundColor:l);var st=yt(o,l,c,p,v,w);this.veeObj={backgroundColor:st[0],rollBackgroundColor:st[1],downBackgroundColor:st[2],color:st[3],rollColor:st[4],downColor:st[5]};function yt(){return arguments}o=ct(o),l=ct(l),c=ct(c),p=ct(p),v=ct(v),w=ct(w);var Le=b,ze=_;n(b)&&(b=oe.borderColor!=null?oe.borderColor:null),n(_)&&(_=oe.borderWidth!=null?oe.borderWidth:null),b<0||_<0?b=_=null:b!=null&&_==null&&(_=1),n(E)&&(E=oe.rollBorderColor!=null?oe.rollBorderColor:b),n(S)&&(S=oe.downBorderColor!=null?oe.downBorderColor:E),n(C)&&(C=oe.corner!=null?oe.corner:10),n(Y)&&(Y=oe.shadowColor!=null?oe.shadowColor:"rgba(0,0,0,.3)"),n(W)&&(W=oe.shadowBlur!=null?oe.shadowBlur:14),n($)&&($=oe.hitPadding!=null?oe.hitPadding:0),n(Z)&&(Z=oe.indent!=null?oe.indent:10),n(X)&&(X=oe.indentH!=null?oe.indentH:Z),n(ne)&&(ne=oe.indentV!=null?oe.indentV:Z),n(G)&&(G=oe.gradient!=null?oe.gradient:0),n(F)&&(F=oe.gloss!=null?oe.gloss:0);var ot=(!n(g)||!n(ce)||!n(H)||!n(N)||!n(ue)||!n(fe)||!n(ae))&&n(ge)&&n(Se)&&n(ie);ot&&n(Ie)&&(Ie=le.M?"mousedown":"click"),n(U)&&(U=oe.rollPersist!=null?oe.rollPersist:!1),this.rollPersist=U,n(k)&&(k=oe.dashed!=null?oe.dashed:!1),!n(g)&&g.type=="Label"&&Ct&&lt("Button() - do not pass Label to toggle parameter - just pass a String"),n(d)&&(d=oe.toggleBackgroundColor!=null?oe.toggleBackgroundColor:o),n(h)&&(h=oe.rollToggleBackgroundColor!=null?oe.rollToggleBackgroundColor:l),n(x)&&(x=oe.downToggleBackgroundColor!=null?oe.downToggleBackgroundColor:h),n(j)&&(j=oe.toggleColor!=null?oe.toggleColor:i.color),n(O)&&(O=oe.rollToggleColor!=null?oe.rollToggleColor:i.rollColor),n(V)&&(V=oe.downToggleColor!=null?oe.downToggleColor:i.rollToggleColor),n(z)&&(z=oe.waitBackgroundColor!=null?oe.waitBackgroundColor:o),n(Ye)&&(Ye=oe.rollWaitBackgroundColor!=null?oe.rollWaitBackgroundColor:l),n(te)&&(te=oe.downWaitBackgroundColor!=null?oe.downWaitBackgroundColor:l),n(K)&&(K=oe.waitColor!=null?oe.waitColor:i.color),n(xe)&&(xe=oe.rollWaitColor!=null?oe.rollWaitColor:i.rollColor),n(_e)&&(_e=oe.downWaitColor!=null?oe.downWaitColor:xe);var Ce=this;this.mouseChildren=!1,this.cur("pointer"),Ce.focus=!1,Ce.rolled=!1;var me=y(Be);n(P)&&(P=oe.backing!=null?oe.backing.clone():null),n(P)?Ce.backing=new e.Rectangle(t,r,o,null,null,C,k,null,null,!1).centerReg(null,null,!1):Ce.backing=P,Ce.rollBacking=n(A)?oe.rollBacking!=null?oe.rollBacking.clone():null:A,Ce.downBacking=n(R)?oe.downBacking!=null?oe.downBacking.clone():null:R,Ce.waitBacking=n(Se)?oe.waitBacking!=null?oe.waitBacking.clone():null:Se,Ce.rollWaitBacking=n(ie)?oe.rollWaitBacking!=null?oe.rollWaitBacking.clone():null:ie,Ce.downWaitBacking=n(pe)?oe.downWaitBacking!=null?oe.downWaitBacking.clone():null:pe,Ce.toggleBacking=n(ce)?oe.toggleBacking!=null?oe.toggleBacking.clone():null:ce,Ce.rollToggleBacking=n(H)?oe.rollToggleBacking!=null?oe.rollToggleBacking.clone():null:H,Ce.downToggleBacking=n(N)?oe.downToggleBacking!=null?oe.downToggleBacking.clone():null:N;var Ke=["backing","rollBacking","downBacking","toggleBacking","rollToggleBacking","downToggleBacking","waitBacking","rollWaitBacking","downWaitBacking"],ut,et,qe;for(qe=0;qe<Ke.length;qe++)ut=Ke[qe],et=Ce[ut],et&&(et.type=="Pattern"?et=Ue(ut,et):Y!=-1&&W>0&&(et.shadow=new $e.Shadow(Y,3,3,W)),et.x=t/2,et.y=r/2);Ce.addChild(Ce.backing),_&&(Ce.border=new e.Rectangle(t,r,"rgba(0,0,0,0)",b,_,C,k,null,null,!1),Ce.addChild(Ce.border));function Ue(Pt,Bt){if(Ce[Pt]=new e.Container(t,r,null,null,!1).centerReg(null,null,!1),Y!=-1&&W>0){var Kt=new e.Rectangle(t-2,r-2,"#666",null,null,C,null,null,null,!1).center(Ce[Pt]);Kt.shadow=new $e.Shadow(Y,3,3,W)}var Gt=Ce[Pt].mask=new e.Rectangle(t,r,Pt.indexOf("roll")>=0?l:o,null,null,C,null,null,null,!1).addTo(Ce[Pt]);return Bt.centerReg(Gt),Bt.setMask(Gt.shape),Ce[Pt].pattern=Bt,Ce[Pt]}Ce.icon=n(T)?oe.icon!=null?oe.icon.clone():null:T,Ce.rollIcon=n(L)?oe.rollIcon!=null?oe.rollIcon.clone():null:L,Ce.downIcon=n(I)?oe.downIcon!=null?oe.downIcon.clone():null:I,Ce.waitIcon=n(be)?oe.waitIcon!=null?oe.waitIcon.clone():null:be,Ce.rollWaitIcon=n(he)?oe.rollWaitIcon!=null?oe.rollWaitIcon.clone():null:he,Ce.downWaitIcon=n(Pe)?oe.downWaitIcon!=null?oe.downWaitIcon.clone():null:Pe,Ce.toggleIcon=n(ue)?oe.toggleIcon!=null?oe.toggleIcon.clone():null:ue,Ce.rollToggleIcon=n(fe)?oe.rollToggleIcon!=null?oe.rollToggleIcon.clone():null:fe,Ce.downToggleIcon=n(ae)?oe.downToggleIcon!=null?oe.downToggleIcon.clone():null:ae;var Ze=["icon","rollIcon","downIcon","toggleIcon","rollToggleIcon","downToggleIcon","waitIcon","rollWaitIcon","downWaitIcon"];for(qe=0;qe<Ze.length;qe++){var it=Ze[qe],Ve=Ce[it];Ve&&(Ve.x=t/2,Ve.y=r/2)}if(Ce.icon&&Ce.addChild(Ce.icon),Array.isArray(C)||(C=[C,C,C,C]),G>0){var Me=new $e.Shape;Me.graphics.lf(["rgba(255,255,255,"+G+")","rgba(0,0,0,"+G+")"],[0,1],0,0,0,r-_),Me.graphics.rc(_/2,_/2,t-_,r-_,C[0],C[1],C[2],C[3]),this.addChild(Me)}if(F>0){var Ne=new $e.Shape;Ne.graphics.f("rgba(255,255,255,"+F+")"),Ne.graphics.rc(_/2,_/2,t-_,(r-_)/2,C[0],C[1],0,0),Ne.graphics.f("rgba(0,0,0,"+F+")"),Ne.graphics.rc(_/2,r/2,t-_,(r-_)/2,0,0,C[2],C[3]),this.addChild(Ne)}var at,Je;$>0&&dt();function dt(){Je=new $e.Shape,Je.graphics.f("#000").r(-$,-$,t+$*2,r+$*2),Ce.hitArea=at=Je}this.addChild(i),i.center(this),i.y+=1,this.label=i,e.pos(i,B=="left"||B=="right"?X:null,q=="top"||q=="bottom"?ne:null,B=="right",q=="bottom");var Oe=i.color;if(this.toggled=!1,ot){var je=i.text,gt=i.color,nt=i.rollColor;this.on(Ie,function(){Ce.toggled=!Ce.toggled,ht()})}function ht(){Ce.toggled?(n(g)||(Ce.label.text=g===!0?je:g),n(j)||(Ce.label.colorOnly=Oe=j),n(O)||(Ce.label.rollColor=O),Ce.rolled?(Ce.rollToggleBacking?rt("rollToggleBacking"):Ce.toggleBacking&&rt("toggleBacking"),Ce.rollToggleIcon?rt("rollToggleIcon"):Ce.toggleIcon&&rt("toggleIcon"),n(P)&&n(Ce.rollToggleBacking)&&(Ce.backing.color=h)):(Ce.toggleBacking&&rt("toggleBacking"),Ce.toggleIcon&&rt("toggleIcon"),n(P)&&(Ce.backing.color=d))):(Ce.label.colorOnly=Oe=gt,Ce.label.rollColor=nt,Ce.rolled&&Ce.label.showRollColor(!0),Ce.label.text=je,xt()),Ce.stage&&Ce.stage.update()}function xt(){Ce.pressed?(n(P)&&Ce.backing&&!Ce.downBacking&&(Ce.backing.color=c),Ce.downBacking?rt("downBacking"):Ce.rollBacking?rt("rollBacking"):Ce.backing&&rt("backing"),Ce.downIcon?rt("downIcon"):Ce.rollIcon?rt("rollIcon"):Ce.icon?rt("icon"):rt("icon",null)):Ce.rolled?(n(P)&&Ce.backing&&!Ce.rollBacking&&(Ce.backing.color=l),Ce.rollBacking?rt("rollBacking"):Ce.backing&&rt("backing"),Ce.rollIcon?rt("rollIcon"):Ce.icon?rt("icon"):rt("icon",null)):(n(P)&&Ce.backing&&(Ce.backing.color=o),Ce.backing&&rt("backing"),Ce.icon,rt("icon"))}this.toggle=function(Pt){return ot?(n(Pt)?Ce.toggled=!Ce.toggled:Ce.toggled=Pt,ht(),Ce):(Ct&&lt("Button() - can't toggle with wait parameters provided"),Ce)};var Et=!1;Ce.waiting=!1;var ft=!1,Lt,wt,St=Ce.label.color,Ft=Ce.label.rollColor,Xt,Ot,jt=this.on("mousedown",function(){Et=!0,Zt()});function Zt(){(!n(ge)||!n(Se)||!n(ie))&&!Ce.waiting&&(ft=!0,n(ve)&&(ve=!0),Re&&(Ot=Ce.stage.on("stagemousedown",function(Pt){Ce.hitTestPoint(Pt.stageX/e.scaX,Pt.stageY/e.scaY)||Ce.clearWait()},null,!0)),setTimeout(function(){Ce.waiting=!0},50),wt=i.text,n(K)||(Ce.label.colorOnly=Oe=K),n(xe)||(Ce.label.rollColor=xe),Xt=Ce.enabled,!ve&&Ce.enabled&&(Ce.enabled=!1),n(ge)||(Ce.label.text=ge),Ce.rolled?(n(P)&&!Ce.rollWaitBacking&&(Ce.backing.color=Ye),Ce.rollWaitBacking?rt("rollWaitBacking"):Ce.waitBacking&&rt("waitBacking"),Ce.rollWaitIcon?rt("rollWaitIcon"):Ce.waitIcon&&rt("waitIcon")):(n(P)&&!Ce.waitBacking&&(Ce.backing.color=z),Ce.waitBacking&&rt("waitBacking"),Ce.waitIcon&&rt("waitIcon")),n(Be)&&(Be=me=="s"?5:5e3),Lt&&Lt.clear(),Lt=e.timeout(Be,function(){Ce.enabled||(Ce.enabled=Xt),Ce.clearWait(),Ce.dispatchEvent("waited")}),Ce.stage&&Ce.stage.update())}this.wait=Zt,this.clearWait=function(){return Lt&&(Ot&&Ce.stage.off("stagemousedown",Ot),Lt.clear(),Ce.label.text=wt,xt(),Ce.label.colorOnly=Oe=St,Ce.label.rollColor=Ft,setTimeout(function(){Ce.waiting=!1},55),ft=!1,Ce.stage&&Ce.stage.update()),Ce},this.removeWait=function(){return Ce.clearWait(),ge=null,Ce.waitBacking=null,Ce.rollWaitBacking=null,Ce.off("mousedown",jt),Ce};function rt(Pt,Bt){var Kt;if(Pt.indexOf("con")>=0){for(Kt=0;Kt<Ze.length;Kt++){var Gt=Ze[Kt],rn=Ce[Gt];Ce.removeChild(rn)}Ce[Pt]&&Ce.addChildAt(Ce[Pt],1)}else{if(!Ce[Pt]&&!Bt)return;for(Kt=0;Kt<Ke.length;Kt++){var cn=Ke[Kt],ln=Ce[cn];Ce.removeChild(ln)}Ce[Pt]&&Ce.addChildAt(Ce[Pt],0)}}var At=!1;this.on("mouseover",function(Pt){Ce.stage&&Ce.stage.frame.leftMouseDown&&!Rt||mt()});function mt(){Ce.rolled=!0,At=!0,ft?(Ce.pressed&&Ce.downWaitBacking?rt("downWaitBacking"):Ce.pressed&&Ce.downBacking?rt("downBacking"):Ce.rollWaitBacking?rt("rollWaitBacking"):Ce.waitBacking?rt("waitBacking"):Ce.rollBacking?rt("rollBacking"):rt("backing"),Ce.pressed&&Ce.downWaitIcon?rt("downWaitIcon"):Ce.rollWaitIcon?rt("rollWaitIcon"):Ce.waitIcon?rt("waitIcon"):Ce.rollIcon?rt("rollIcon"):rt("icon",!0)):ot&&Ce.toggled?(Ce.pressed&&Ce.downToggleBacking?rt("downToggleBacking"):Ce.pressed&&Ce.downBacking?rt("downBacking"):Ce.rollToggleBacking?rt("rollToggleBacking"):Ce.toggleBacking?rt("toggleBacking"):Ce.rollBacking?rt("rollBacking"):rt("backing"),Ce.pressed&&Ce.downToggleIcon?rt("downToggleIcon"):Ce.rollToggleIcon?rt("rollToggleIcon"):Ce.toggleIcon?rt("toggleIcon"):Ce.rollIcon?rt("rollIcon"):rt("icon",!0)):(Ce.pressed&&Ce.downBacking?rt("downBacking"):Ce.rollBacking?rt("rollBacking"):rt("backing"),Ce.pressed&&Ce.downIcon?rt("downIcon"):Ce.rollIcon?rt("rollIcon"):rt("icon",!0)),Ce.pressed?n(P)&&Ce.backing?Ce.backing.color=c:P&&!n(P.mask)&&Ce.backing&&(Ce.backing.mask.color=c):n(P)&&Ce.backing?Ce.backing.color=l:P&&!n(P.mask)&&Ce.backing&&(Ce.backing.mask.color=l),Ce.border&&(Ce.border.borderColor=Ce.pressed?S:E),Ce.pressed?Ce.label.colorOnly=w:Ce.label.showRollColor?Ce.label.showRollColor():Ce.label.colorOnly=Oe,Ce.stage&&Ce.stage.update()}var Rt=!1;this.on("mousedown",function(){Ce.pressed=Rt=!0,mt(),Ce.rolled}),this.on("pressup",function(){Ce.pressed=Rt=Et=!1,At?mt():Ce.rollPersist&&Ht(),le.M&&Dt()}),this.on("pressmove",function(){var Pt=Ce.stage?Ce.stage.frame:le.zdf,Bt=Ce.hitTestPoint(Pt.mouseX,Pt.mouseY);Rt&&!Bt?(Dt(),Rt=!1):!Rt&&Bt&&(mt(),Rt=!0)}),this.on("mouseout",Dt);function Dt(){At=!1,Ce.rollPersist&&Et||Ht()}function Ht(){Ce.rolled=!1,ft||Ce.waiting?(n(P)&&Ce.backing&&n(Ce.waitBacking)&&(Ce.backing.color=n(z)?o:z),Ce.waitBacking?rt("waitBacking"):Ce.backing&&rt("backing"),Ce.waitIcon?rt("waitIcon"):Ce.icon?rt("icon"):rt("icon",null)):Ce.toggled&&ot?(n(P)&&Ce.backing&&n(Ce.toggleBacking)&&(Ce.backing.color=d),Ce.toggleBacking?rt("toggleBacking"):Ce.backing&&rt("backing"),Ce.toggleIcon?rt("toggleIcon"):Ce.icon?rt("icon"):rt("icon",null)):(n(P)&&Ce.backing?Ce.backing.color=o:P&&!n(P.mask)&&Ce.backing&&(Ce.backing.mask.color=o),Ce.backing&&rt("backing"),Ce.icon?rt("icon"):rt("icon",null)),Ce.border&&(Ce.border.borderColor=b),Ce.label.colorOnly=Oe,Ce.label.showRollColor&&Ce.label.showRollColor(!1),Ce.stage&&Ce.stage.update()}Ce.removeRoll=Ht,Ce.rollBacking&&Ce.rollBacking.removeFrom(),Object.defineProperty(Ce,"text",{get:function(){var Pt=i.text==" "?"":i.text;return Pt},set:function(Pt){i.text=Pt,je&&(je=Pt),i.center(this),i.y+=1,e.pos(i,B=="left"||B=="right"?X:null,q=="top"||q=="bottom"?ne:null,B=="right",q=="bottom")}}),Object.defineProperty(Ce,"color",{get:function(){return p},set:function(Pt){p=Pt,gt&&(gt=p),Ce.label&&!n(Ce.label.color)&&(Ce.label.color=Oe=p),!e.OPTIMIZE&&(Mt||!le.OPTIMIZE)&&Ce.stage&&Ce.stage.update()}}),Object.defineProperty(Ce,"rollColor",{get:function(){return v},set:function(Pt){v=Pt,nt&&(nt=v),Ce.label&&(Ce.label.rollColor=v)}}),Object.defineProperty(Ce,"downColor",{get:function(){return w},set:function(Pt){w=Pt,originalDownColor&&(originalDownColor=w),Ce.label&&(Ce.label.downColor=w)}}),Object.defineProperty(Ce,"backgroundColor",{get:function(){return o},set:function(Pt){o=Pt,Ce.backing.color?Ce.backing.color=o:Ce.backing.mask&&(Ce.backing.mask.color=o),!e.OPTIMIZE&&(Mt||!le.OPTIMIZE)&&Ce.stage&&Ce.stage.update()}}),Object.defineProperty(Ce,"rollBackgroundColor",{get:function(){return l},set:function(Pt){l=Pt,Ce.rollBacking&&Ce.rollBacking.color?Ce.rollBacking.color=l:Ce.rollBacking&&Ce.rollBacking.mask&&(Ce.rollBacking.mask.color=l)}}),Object.defineProperty(Ce,"downBackgroundColor",{get:function(){return c},set:function(Pt){c=Pt,Ce.downBacking&&Ce.downBacking.color?Ce.downBacking.color=c:Ce.downBacking&&Ce.downBacking.mask&&(Ce.downBacking.mask.color=c)}}),Object.defineProperty(Ce,"borderColor",{get:function(){return b},set:function(Pt){b=Pt,Ce.rolled||(Ce.backing&&Ce.backing.borderColor&&(Ce.backing.borderColor=Pt),Ce.border&&(Ce.border.borderColor=Pt))}}),Object.defineProperty(Ce,"rollBorderColor",{get:function(){return E},set:function(Pt){E=Pt,Ce.rolled&&(Ce.backing&&Ce.backing.borderColor&&(Ce.backing.borderColor=Pt),Ce.border&&(Ce.border.borderColor=Pt))}}),Object.defineProperty(Ce,"hitPadding",{get:function(){return $},set:function(Pt){$=Pt,$==0?at&&(this.hitArea=null):dt()}}),this._enabled=!0,this.startMouseChildren=this.mouseChildren,Object.defineProperty(Ce,"enabled",{get:function(){return Ce._enabled},set:function(Pt){Ce._enabled&&(Ce.startMouseChildren=Ce.mouseChildren),Pt?(f(Ce,Pt),Ce.mouseChildren=Ce.startMouseChildren):(Ht(),f(Ce,Pt));var Bt=i.color;i.color=Oe=Bt,!e.OPTIMIZE&&(Mt||!le.OPTIMIZE)&&Ce.stage&&Ce.stage.update()}}),this.setBacking=function(Pt,Bt){Vt(Pt,Bt)},this.setIcon=function(Pt,Bt){Vt(Pt,Bt)};function Vt(Pt,Bt){return n(Pt)||(Ce.contains(Ce[Pt])&&(Ce.removeChild(Ce[Pt]),Bt&&Ce.addChildAt(Bt,Pt.indexOf("con")>=0?Ce.numChildren-1:0),Ce.stage&&Ce.stage.update()),Bt?(n(P)&&Pt=="backing"&&(P=Bt),Bt.type=="Pattern"&&(Bt=Ue(Pt,Bt)),Ce[Pt]=Bt,Ce[Pt].x=t/2,Ce[Pt].y=r/2):Ce[Pt]=null,xt()),Ce}Ae!==!1&&e.styleTransforms(this,oe),this.clone=function(Pt){var Bt=new e.Button(t,r,i.clone(),Pt||!e.isPick(st[0])?o:st[0],Pt||!e.isPick(st[1])?l:st[1],Pt||!e.isPick(st[2])?c:st[2],Pt||!e.isPick(st[3])?p:st[3],Pt||!e.isPick(st[4])?v:st[4],Pt||!e.isPick(st[5])?w:st[5],Le,ze,E,S,n(P)?null:Ce.backing.clone(),n(A)?null:Ce.rollBacking.clone(),n(R)?null:Ce.downBacking.clone(),n(T)?null:T.clone(),n(L)?null:L.clone(),n(I)?null:I.clone(),C,k,Y,W,G,F,B,q,Z,X,ne,$,re,de,Q,U,g,d,h,x,j,O,V,n(ce)?null:ce.clone(),n(H)?null:H.clone(),n(N)?null:N.clone(),n(ue)?null:ue.clone(),n(fe)?null:fe.clone(),n(ae)?null:ae.clone(),Ie,ge,Be,z,Ye,te,K,xe,_e,n(Se)?null:Se.clone(),n(ie)?null:ie.clone(),n(pe)?null:pe.clone(),n(be)?null:be.clone(),n(he)?null:he.clone(),n(Pe)?null:Pe.clone(),Re,ve,Ae,this.group,Fe);return Ce.cloneProps(Bt)},this.doDispose=function(Pt,Bt,Kt){return Ce.icon&&Ce.icon.dispose(),Ce.rollIcon&&Ce.rollIcon.dispose(),Ce.downIcon&&Ce.downIcon.dispose(),Ce.waitIcon&&Ce.waitIcon.dispose(),Ce.rollWaitIcon&&Ce.rollWaitIcon.dispose(),Ce.downWaitIcon&&Ce.downWaitIcon.dispose(),Ce.toggleIcon&&Ce.toggleIcon.dispose(),Ce.rollToggleIcon&&Ce.rollToggleIcon.dispose(),Ce.downToggleIcon&&Ce.downToggleIcon.dispose(),Ce.icon=Ce.rollIcon=Ce.downIcon=Ce.waitIcon=Ce.rollWaitIcon=Ce.downWaitIcon=Ce.toggleIcon=Ce.rollToggleIcon=Ce.downToggleIcon=null,Kt||this.zimContainer_dispose(!0),!0}},e.extend(e.Button,e.Container,["clone","dispose"],"zimContainer",!1),e.Button.prototype.dispose=function(t){return this.doDispose(null,null,t)},e.CheckBox=function(t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R){var T="size, label, startChecked, color, backgroundColor, borderColor, borderWidth, corner, margin, indicatorType, indicatorColor, tap, rtl, style, group, inherit",L;if(L=vt(e.CheckBox,arguments,T,this))return L;He("56"),this.zimContainer_constructor(null,null,null,null,!1),this.type="CheckBox",this.group=A;var I=P===!1?{}:e.getStyle(this.type,this.group,R);n(t)&&(t=I.size!=null?I.size:60),n(r)&&(r=I.label!=null?I.label:null),n(i)&&(i=I.startChecked!=null?I.startChecked:!1),n(o)&&(o=I.color!=null?I.color:e.darker),n(l)&&(l=I.backgroundColor!=null?I.backgroundColor:e.white.toAlpha(.8)),n(c)&&(c=I.borderColor!=null?I.borderColor:e.darker),n(p)&&(p=I.borderWidth!=null?I.borderWidth:t/10),c<0||p<0?c=p=null:c!=null&&p==null&&(p=t/10),n(v)&&(v=I.corner!=null?I.corner:0),n(w)&&(w=I.margin!=null?I.margin:t/5),b!="box"&&b!="square"&&b!="x"&&(b=I.indicatorType!=null?I.indicatorType:"check"),n(_)&&(_=I.indicatorColor!=null?I.indicatorColor:p>0?c:e.black),this.setBounds(-w,-w,t+w*2,t+w*2),n(E)&&(E=I.tap!=null?I.tap:!1),n(S)&&(S=I.rtl!=null?I.rtl:le.DIR=="rtl");var C=this;this.cur("pointer");var k=Y(r,i);this.veeObj={label:k[0],startChecked:k[1]};function Y(){return arguments}r=e.Pick.choose(r),i=e.Pick.choose(i);var W=i;(typeof r=="string"||typeof r=="number")&&(r=new e.Label({text:r,size:t*5/6,color:o,valign:"center",align:S?"right":"left",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",style:P,group:this.group}));var G=this.box=new e.Rectangle(t,t,l,null,null,v),F=this.box2=new e.Rectangle(t*5/7,t*5/7,"rgba(0,0,0,0)",c,p,v);F.x=t/7,F.y=t/7,this.addChild(G,F);var B=t;r&&(r.center(C),this.label=r,S?(r.x=-w,this.setBounds(-r.width-w*2,-w,t+w*3+r.getBounds().width,Math.max(t+w*2,r.getBounds().height)),B=t+r.width+w,this.regX=t):(r.x=C.getBounds().width,this.setBounds(-w,-w,t+w*4+r.getBounds().width,Math.max(t+w*2,r.getBounds().height)),B=r.x+r.width));var q=new e.Shape({style:!1}),Z=q.graphics;Z.f("rgba(0,0,0,.01)").r(this.getBounds().x,this.getBounds().y,B+w*2,this.getBounds().height),this.hitArea=q;var X=new e.Shape({style:!1}),ne=X.graphics;b=="check"?ne.f(_).p("AnQAdICBiaIEEDZIF8nfICfB4In/KPg"):b=="box"||b=="square"?ne.f(_).dr(-35,-35,70,70):ne.f(_).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg");var $=95;X.setBounds(-$/2,-$/2,$,$);var re=t/($+66);X.scaleX=X.scaleY=re,X.alpha=.9,X.x=t/2,X.y=t/2,W&&this.addChild(X),E?this.tap(de):this.on((Mt?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",de),Object.defineProperty(C,"checked",{get:function(){return W},set:function(Q){C.setChecked(Q)}}),this.toggle=function(Q){n(Q)&&(Q=!W),C.setChecked(Q)},Object.defineProperty(C,"toggled",{get:function(){return W},set:function(Q){C.setChecked(Q)}}),Object.defineProperty(C,"text",{get:function(){return r?r.text:null},set:function(Q){r&&(r.text=Q,!e.OPTIMIZE&&(Mt||!le.OPTIMIZE)&&C.stage&&C.stage.update())}}),Object.defineProperty(X,"indicatorColor",{get:function(){return _},set:function(Q){W&&C.removeChild(X),X=new $e.Shape,ne=X.graphics,_=Q,ne.f(_).p("AnQAdICBiaIEEDZIF8nfICfB4In/KPg"),X.scaleX=X.scaleY=re,X.alpha=.9,X.x=t/2,X.y=t/2,W&&C.addChild(X),!e.OPTIMIZE&&(Mt||!le.OPTIMIZE)&&C.stage&&C.stage.update()}}),Object.defineProperty(C,"indicator",{get:function(){return X},set:function(){lt("ZIM CheckBox - check is read only")}}),this._enabled=!0,Object.defineProperty(C,"enabled",{get:function(){return C._enabled},set:function(Q){f(C,Q)}});function de(){W=!W,C.setChecked(W),C.dispatchEvent("change")}this.setChecked=function(Q){return n(Q)&&(Q=!0),W=Q,W?C.addChild(X):C.removeChild(X),!e.OPTIMIZE&&(Mt||!le.OPTIMIZE)&&C.stage&&C.stage.update(),C},P!==!1&&e.styleTransforms(this,I),this.clone=function(Q){return C.cloneProps(new e.CheckBox(t,Q||!e.isPick(k[0])?r?r.clone():null:k[0],Q||!e.isPick(k[1])?i:k[1],o,l,c,p,v,w,b,_,E,S,P,this.group,R))}},e.extend(e.CheckBox,e.Container,"clone","zimContainer",!1),e.RadioButtons=function(t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R){var T="size, buttons, vertical, color, backgroundColor, borderColor, borderWidth, spacing, margin, always, indicatorColor, selectedIndex, rtl, style, group, inherit",L;if(L=vt(e.RadioButtons,arguments,T,this))return L;He("57"),this.zimContainer_constructor(null,null,null,null,!1),this.type="RadioButtons",this.group=A;var I=P===!1?{}:e.getStyle(this.type,this.group,R);n(t)&&(t=I.size!=null?I.size:60),t=Math.max(5,t),n(r)&&(r=I.buttons!=null?I.buttons:["A","B","C"]),n(i)&&(i=I.vertical!=null?I.vertical:!0),n(o)&&(o=I.color!=null?I.color:e.darker),n(l)&&(l=I.backgroundColor!=null?I.backgroundColor:"rgba(255,255,255,.8)"),n(c)&&(c=I.borderColor!=null?I.borderColor:e.darker),n(p)&&(p=I.borderWidth!=null?I.borderWidth:t/9),c<0||p<0?c=p=null:c!=null&&p==null&&(p=t/10),n(v)&&(v=i?I.spacing!=null?I.spacing:t*.2:I.spacing!=null?I.spacing:t),n(w)&&(w=I.margin!=null?I.margin:t/5),n(b)&&(b=I.always!=null?I.always:!1),n(_)&&(_=I.indicatorColor!=null?I.indicatorColor:p>0?c:e.black),n(S)&&(S=I.rtl!=null?I.rtl:le.DIR=="rtl");var C=this;this.cur("pointer"),this.labels=[],this.indicators=[];var k=0,Y;if(typeof r=="string"){var W=r;r=[];for(var G=0;G<W.length;G++)r.push({label:W[G]})}var F=new e.Container({style:!1});this.addChild(F);function B($){var re=F.getChildIndex($.target);b&&C.selectedIndex==re||(C.setSelected(re),C.dispatchEvent("change"))}X();for(var q,Z=0;Z<F.numChildren;Z++)q=F.getChildAt(Z),q.on((Mt?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",B);function X(){var $,re=!1,de;for(de=r.length-1;de>=0;de--)$=r[de],$.selected&&$.selected===!0&&(re?$.selected="false":(re=!0,C.id=$.id));F.removeAllChildren(),C.buttons=[];var Q,U=0;for(de=0;de<r.length;de++){if($=r[de],typeof $=="string"||typeof $=="number"){var g={selected:!1,label:new e.Label({text:$,size:t*5/6,color:I.color!=null?I.color:o,valign:"center",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",style:P,group:C.group})};$=g}($.label&&typeof $.label=="string"||typeof $.label=="number")&&($.label=new e.Label({text:$.label,size:I.size!=null?I.size:t*5/6,color:I.color!=null?I.color:o,valign:"center",style:P})),C.labels.push($.label),$.index=de,r[de]=$,Q=ne($.selected,$.label),Q.type="RadioButton",Q.obj=$,$.selected&&(Y=Q.obj),F.addChild(Q),i?(Q.y=U,U+=Q.getBounds().height+v):(Q.x=U,U+=Q.getBounds().width+v)}}function ne($,re){var de=new e.Container({style:!1});C.buttons.push(de),de.mouseChildren=!1,de.setBounds(-w,-w,t+w*2,t+w*2);var Q=new e.Shape({style:!1}),U=Q.graphics;U.f(l).dc(t/2,t/2,t/1.85),U.s(c).ss(p).dc(t/2,t/2,t/2-t/2/5),de.addChild(Q);var g=de.check=new e.Circle(t/5.2,_,null,null,null,null,null,null,!1);C.indicators.push(g),g.mouseEnabled=!1,g.alpha=.95,g.regX=g.regY=-t/2;var d=t;re&&(k==0&&(k=re.width),de.addChild(re),re.y=t/2,de.text=re.text,S?(re.x=-re.width-w,de.setBounds(-re.width-w,-w,t+w*2+re.getBounds().width,Math.max(t+w*2,re.getBounds().height)),d=re.width+w+t):(re.x=de.getBounds().width,de.setBounds(-w,-w,t+w*2+re.getBounds().width,Math.max(t+w*2,re.getBounds().height)),d=re.x+re.width)),$&&(de.addChild(g),C.label=re,C.label&&(C.text=re.text));var h=new e.Shape({style:!1});return U=h.graphics,U.f("rgba(0,0,0,.01)").r(de.getBounds().x,de.getBounds().y,d+w*2,de.getBounds().height),de.hitArea=h,de}this.getBounds()||this.setBounds(0,0,t,t),S?(this.setBounds(-w*2-k,-w,this.getBounds().width+w*2,this.getBounds().height),this.regX=i?t+w:this.getBounds().width-k-w*3):this.setBounds(-w,-w,this.getBounds().width+w*2,this.getBounds().height),this.setSelected=function($){if(n($)&&($=-1),!($!=-1&&!F.getChildAt($))){for(var re,de=0;de<F.numChildren;de++)re=F.getChildAt(de),re.removeChild(re.check);if($>=0){re=F.getChildAt($);var Q=-2;Y&&(Q=Y.index),Y=re.obj}return $==-1||Q==Y.index?(Y=null,C.id=null,C.label=null,C.text=""):(re.addChild(re.check),C.id=Y.id,C.label=Y.label,C.label&&(C.text=C.label.text)),!e.OPTIMIZE&&(Mt||!le.OPTIMIZE)&&C.stage&&C.stage.update(),C}},Object.defineProperty(C,"selected",{get:function(){return Y},set:function(){lt("ZIM RadioButton - selected is read only")}}),Object.defineProperty(C,"selectedIndex",{get:function(){return Y?Y.index:-1},set:function($){var re=$;b&&C.selectedIndex==re||C.setSelected(re)}}),this._enabled=!0,Object.defineProperty(C,"enabled",{get:function(){return C._enabled},set:function($){f(C,$)}}),n(E)&&(E=I.selectedIndex!=null?I.selectedIndex:0),C.selectedIndex=E,e.styleTransforms(this,I),this.clone=function(){for(var $=e.copy(r),re=0;re<$.length;re++)$[re].label=$[re].label.clone();return C.cloneProps(new e.RadioButtons(t,$,i,o,l,c,p,v,w,b,_,E,S,P,this.group,R))}},e.extend(e.RadioButtons,e.Container,"clone","zimContainer",!1),e.Toggle=function(t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,T,L,I,C,k,Y){var W="width, height, label, startToggled, backgroundColor, margin, indicatorType, indicatorColor, tap, toggleBackgroundColor, color, borderColor, borderWidth, corner, indicatorCorner, shadowColor, shadowBlur, time, labelLeft, style, group, inherit",G;if(G=vt(e.Toggle,arguments,W,this))return G;He("57.5"),this.group=k;var F=C===!1?{}:e.getStyle("Toggle",this.group,Y);n(t)&&(t=F.width!=null?F.width:80),n(r)&&(r=F.height!=null?F.height:50),this.zimContainer_constructor(t,r,null,null,!1),this.type="Toggle",n(l)&&(l=F.backgroundColor!=null?F.backgroundColor:"#C60"),n(c)&&(c=F.margin!=null?F.margin:10),n(p)&&(p=F.indicatorType!=null?F.indicatorType:"circle"),n(v)&&(v=F.indicatorColor!=null?F.indicatorColor:e.white),n(b)&&(b=F.toggleBackgroundColor!=null?F.toggleBackgroundColor:"#F93"),n(_)&&(_=F.color!=null?F.color:e.darker),n(E)&&(E=F.borderColor!=null?F.borderColor:null),n(S)&&(S=F.borderWidth!=null?F.borderWidth:null),E<0||S<0?E=S=null:E!=null&&S==null&&(S=1),n(P)&&(P=F.corner!=null?F.corner:p!="circle"?0:25),n(A)&&(A=F.indicatorCorner!=null?F.indicatorCorner:0),n(R)&&(R=F.shadowColor!=null?F.shadowColor:"rgba(0,0,0,.3)"),n(T)&&(T=F.shadowBlur!=null?F.shadowBlur:14),n(o)&&(o=F.startToggled!=null?F.startToggled:!1);var B=y(L);n(L)&&(L=F.time!=null?F.time:B=="s"?.1:100),n(i)&&(i=F.label!=null?F.label:null),n(I)&&(I=F.labelLeft!=null?F.labelLeft:null);var q=this;q.cur("pointer"),(typeof i=="string"||typeof i=="number")&&(i=this.label=new e.Label({text:i,size:F.size||r*5/6,color:_,valign:"center",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group})),(typeof I=="string"||typeof I=="number")&&(I=this.labelLeft=new e.Label({text:I,size:F.size||r*5/6,color:_,valign:"center",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group})),this.background=new e.Rectangle(t,r,l,E,S,P).addTo(this),p=="rectangle"||p=="square"?this.indicator=new e.Rectangle(r*.65,r*.65,v,null,null,A).center(this.background).pos(r*.2,null,o):this.indicator=new e.Circle(r*.35,v).center(this.background).pos(r*.175,null,o);var Z=o;q.background.color=Z?b:l,R!=-1&&T>0&&(this.background.shadow=new $e.Shadow(R,3,3,T)),i&&(this.addChild(i),i.x=t+2+c+S,i.y=r/2,this.label=i,this.setBounds(-c,-c,t+c*3+S+i.getBounds().width,Math.max(r+c*2,i.getBounds().height))),I&&(this.addChild(I),I.x=0,q.background.x+=I.width+3+c+S,q.label.x+=I.width+3+c+S,I.y=r/2,this.labelLeft=I,this.setBounds(-c,-c,q.getBounds().width+I.width+3+c+S,q.getBounds().height)),this.expand(e.mobile()?20:10),this.tap(function($){if(I){var re=q.localToGlobal(I.width+3+c+S+t/2,0);if($.stageX/e.scaX<re.x-t/2&&!Z||$.stageX/e.scaX>=re.x+t/2&&Z)return}Z=!Z,ne(),q.dispatchEvent("change")},e.mobile()?20:10);var X=new e.Swipe(this,20,B=="s"?.2:200);X.on("swipe",function($){if($.swipeX!=0){{if($.swipeX==1&&Z)return;if($.swipeX==-1&&!Z)return}Z=!Z,ne(),q.dispatchEvent("change")}});function ne($){var re=q.indicator.x,de=L;if($===!0&&(de=0),p=="rectangle"||p=="square"?(q.indicator.pos(r*.2,null,Z),L>0&&q.indicator.animate({props:{x:re},from:!0,time:de})):(q.indicator.pos(r*.175,null,Z),L>0&&q.indicator.animate({props:{x:re},from:!0,time:de})),q.background.color=Z?b:l,q.text=Z?q.label?q.label.text:"on":q.labelLeft?q.labelLeft.text:"off",q.zimAccessibility){var Q="Toggle set to "+(Z?q.label?q.label.text+".":"on.":q.labelLeft?q.labelLeft.text+".":"off.");setTimeout(function(){q.zimAccessibility.talk(Q)},50)}}Object.defineProperty(q,"textLeft",{get:function(){return I?I.text:null},set:function($){I&&(I.text=$,!e.OPTIMIZE&&(Mt||!le.OPTIMIZE)&&q.stage&&q.stage.update())}}),q.toggle=function($,re){var de=Z;return n($)&&($=!0),Z=$,de!=Z&&ne(re),q},q.text=Z?q.label?q.label.text:"on":q.labelLeft?q.labelLeft.text:"off",Object.defineProperty(q,"toggled",{get:function(){return Z},set:function($){q.toggle($)}}),this._enabled=!0,Object.defineProperty(q,"enabled",{get:function(){return q._enabled},set:function($){f(q,$)}}),C!==!1&&e.styleTransforms(this,F),this.clone=function(){return q.cloneProps(new e.Toggle(t,r,i?i.clone():"",o,l,c,p,v,w,b,_,E,S,P,A,R,T,L,I?I.clone():"",C,this.group,Y))}},e.extend(e.Toggle,e.Container,"clone","zimContainer",!1),e.Tip=function(t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,T,L,I,C,k,Y,W,G,F,B,q,Z,X,ne,$,re,de,Q,U,g,d,h,x,j,O,V,ce,H,N){var ue="text, tipAlign, tipValign, margin, marginH, marginV, outside, target, delay, time, mouseClose, size, font, color, rollColor, shadowColor, shadowBlur, align, valign, lineWidth, lineHeight, backing, outlineColor, outlineWidth, backgroundColor, backgroundBorderColor, backgroundBorderWidth, corner, backgroundDashed, padding, paddingH, paddingV, shiftH, shiftV, rollPersist, labelWidth, labelHeight, maxSize, bold, italic, variant, splitWords, style, group, inherit",fe;if(fe=vt(e.Tip,arguments,ue,this))return fe;He("57.6"),this.group=H;var ae=ce===!1?{}:e.getStyle("Tip",this.group,N);n(t)&&(t=ae.text!=null?ae.text:"Here's a tip!"),n(o)&&(o=ae.margin!=null?ae.margin:40),n(l)&&(l=ae.marginH!=null?ae.marginH:o),n(c)&&(c=ae.marginV!=null?ae.marginV:o),n(r)&&(r=ae.tipAlign!=null?ae.tipAlign:"right"),n(i)&&(i=ae.tipValign!=null?ae.tipValign:"bottom"),n(p)&&(p=ae.outside!=null?ae.outside:!1),n(F)&&(F=ae.backgroundColor!=null?ae.backgroundColor:e.blue),n(P)&&(P=ae.color!=null?ae.color:e.white),n(Z)&&(Z=ae.corner!=null?ae.corner:25),n(X)&&(X=ae.backgroundDashed!=null?ae.backgroundDashed:null),n(ne)&&(ne=ae.padding!=null?ae.padding:10),n($)&&($=ae.paddingH!=null?ae.paddingH:ne),n(re)&&(re=ae.paddingV!=null?ae.paddingV:ne),(n(R)||R=="ignore")&&(R=ae.shadowColor!=null&&R!="ignore"?ae.shadowColor:"rgba(0,0,0,.3)"),(n(T)||T=="ignore")&&(T=ae.shadowBlur!=null&&T!="ignore"?ae.shadowBlur:1),n(w)&&(w=ae.delay!=null?ae.delay:0);var Ie=y(b);n(b)&&(b=ae.time!=null?ae.time:Ie=="s"?2:2e3),n(_)&&(_=ae.mouseClose!=null?ae.mouseClose:!0),this.zimLabel_constructor(t,E,S,P,A,null,null,L,I,x,j,O,C,k,Y,W,G,F,B,q,Z,X,ne,$,re,de,Q,U,g,d,h,V,ce,H,e.copy(ae)),this.type="Tip",p&&(l=-l,c=-c);var ge=this;ge.tipAlign=r,ge.tipValign=i,this.background.sha(R,3,5,T),this.show=function(Be,z){var Ye=y(z);if(n(Be)&&(Be=w),n(z)&&(z=b),n(v))if(le.zdf)v=le.zdf.stage;else return ge;else if(v.getBounds){if(n(v.stage))return lt("zim display - Waiter(): The container must have a stage property"),ge}else return lt("zim Tip(): Please pass in a reference to a container with bounds set as parameter to Tip"),ge;Be>0?ge.showID=e.timeout(Be,te):te();function te(){var K;v.boundsToGlobal?K=v.boundsToGlobal():K=v.getBounds();var xe=new e.Container(K.x,K.y,K.width,K.height);xe.zimTemp=!0,xe.loc(0,0,v.stage),ge.pos(l,c,ge.tipAlign,ge.tipValign,xe),p&&(ge.tipAlign=="right"?ge.x+=ge.width:ge.tipAlign=="left"&&(ge.x-=ge.width),ge.tipValign=="bottom"?ge.y+=ge.height:ge.tipValign=="top"&&(ge.y-=ge.height)),ge.addTo(xe.stage),xe.zimTemp&&xe.removeFrom&&(xe.removeFrom(),xe=null),xe=ge.stage,ge.timeoutID&&ge.timeoutID.clear(),ge.timeoutID=e.timeout(z,function(){ge.hide(),xe.stage.update()}),_&&(ge.upID&&xe.stage.off("stagemouseup",ge.upID),ge.upID=xe.stage.on("stagemouseup",function(){ge.hide(),xe.stage&&xe.stage.update()})),xe.stage&&xe.stage.update()}return ge},this.hide=function(){return this.removeFrom(),this.timeoutID&&this.timeoutID.clear(),this.upID&&v.stage&&v.stage.off("stagemouseup",this.upID),ge},this.clear=function(){ge.showID&&ge.showID.clear(),ge.hide()},this.dispose=function(Be,z,Ye){ge.upID&&ge.stage&&ge.stage.off("stagemouseup",ge.upID),Ye||this.zimLabel_dispose(!0)},ce!==!1&&e.styleTransforms(this,ae),this.clone=function(){return ge.cloneProps(new e.Tip(t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,T,L,I,C,k,Y,W,G,F,B,q,Z,X,ne,$,re,de,Q,U,g,d,h,V,ce,this.group,N))}},e.extend(e.Tip,e.Label,["dispose","clone"],"zimLabel",!1),e.Pane=function(j,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,T,L,I,C,k,Y,W,G,F,B,q,Z,X,ne){var $="content, backgroundColor, color, width, height, draggable, resets, modal, corner, backdropColor, shadowColor, shadowBlur, center, displayClose, backdropClose, backing, fadeTime, container, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, close, closeColor, autoPadding, autoPaddingH, autoPaddingV, style, group, inherit";if(j&&!j.header&&!j.message&&!j.display&&!j.buttons){var re;if(re=vt(e.Pane,arguments,$,this))return re}He("58"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Pane";var de="zim display - Pane(): Please pass in a reference to a container with bounds set as first parameter";if(n(L))if(le.zdf)L=le.zdf.stage;else{lt(de);return}else if(L.getBounds){if(n(L.getStage)){lt("zim display - Pane(): The container must have a stage property");return}}else{lt(de);return}this.group=X;var Q=Z===!1?{}:e.getStyle(this.type,this.group,ne);n(o)&&(o=Q.width!=null?Q.width:"auto"),n(l)&&(l=Q.height!=null?Q.height:"auto"),n(j)&&(j=Q.content!=null?Q.content:" "),(typeof j=="string"||typeof j=="number")&&(j=new e.Label({text:j,size:Q.size!=null?Q.size:40,align:Q.align!=null?Q.align:"center",valign:Q.valign!=null?Q.valign:"center",color:Q.color!=null?Q.color:i,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group}).noMouse());var U=this.content=j;n(r)&&(r=Q.backgroundColor!=null?Q.backgroundColor:e.white),n(c)&&(c=Q.draggable!=null?Q.draggable:!1),n(p)&&(p=Q.resets!=null?Q.resets:!0),n(v)&&(v=Q.modal!=null?Q.modal:!0),n(w)&&(w=Q.corner!=null?Q.corner:20),n(I)&&(I=Q.titleBar!=null?Q.titleBar:null),n(C)&&(C=Q.titleBarColor!=null?Q.titleBarColor:null),n(k)&&(k=Q.titleBarBackgroundColor!=null?Q.titleBarBackgroundColor:null),n(Y)&&(Y=Q.titleBarHeight!=null?Q.titleBarHeight:null),n(b)&&(b=Q.backdropColor!=null?Q.backdropColor:"rgba(0,0,0,.2)"),n(_)&&(_=Q.shadowColor!=null?Q.shadowColor:"rgba(0,0,0,.3)"),n(E)&&(E=Q.shadowBlur!=null?Q.shadowBlur:20),n(S)&&(S=Q.center!=null?Q.center:!0),n(P)&&(P=Q.displayClose!=null?Q.displayClose:!0),c&&(P=!1),n(A)&&(A=Q.backdropClose!=null?Q.backdropClose:!0),n(T)&&(T=Q.fadeTime!=null?Q.fadeTime:0),n(W)&&(W=Q.close!=null?Q.close:!1),n(G)&&(G=Q.closeColor!=null?Q.closeColor:e.grey),n(F)&&(F=Q.autoPadding!=null?Q.autoPadding:70),n(B)&&(B=Q.autoPaddingH!=null?Q.autoPaddingH:F),n(q)&&(q=Q.autoPaddingV!=null?Q.autoPaddingV:F);var g=this.backdrop=new e.Shape({style:!1}),d=g.graphics;d.f(b),d.drawRect(-5e3,-5e3,1e4,1e4);var h=this;if(this.add=function(te,K,xe,_e){var Se="obj, index, center, replace",ie;return(ie=vt(h.add,arguments,Se,h))?ie:(n(xe)&&(xe=!0),n(_e)&&(_e=!0),typeof te=="string"&&(te=new Vr(te,null,null,i).noMouse()),_e&&h.contentContainer.removeAllChildren(),xe?te.center(h.contentContainer,K):te.addTo(h.contentContainer,K),h)},U){var x=e.makeContent(U,o,e.dark),O=["header","message","text","display","buttons","config"];O.forEach(function(K){x[K]&&(h[K]=x[K])}),h.label=h.message,o=="auto"&&(o=x.width+B*2),l=="auto"&&(l=x.height+q*2)}var j=h.contentContainer=new e.Container(o,l);x&&h.add(x,null,!0),this.setBounds(-o/2,-l/2,o,l);var O=["header","message","text","display","buttons","config"];j&&O.forEach(function(te){j[te]&&(h[te]=j[te])}),h.label=h.message,h.container=L,g.on((Mt?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",A?ce:function(te){te.stopImmediatePropagation()});var V=new e.Dictionary(!0);function ce(te){h.dispatchEvent("closing"),setTimeout(function(){ge(),h.dispatchEvent("close")},10),te.stopImmediatePropagation()}g.on("mousedown",function(te){te.stopImmediatePropagation()}),this.addChild(g),v||g.noMouse();var H;if(n(R))H=this.backing=new e.Rectangle({width:o,height:l,color:r,corner:w,style:!1});else{if(R.type=="Pattern"){var N=R;H=new e.Rectangle(o,l,r,null,null,w,null,null,null,!1),N.centerReg(H),N.setMask(H.shape)}else H=R;h.display=h.backing=H}if(P&&(H.cur("pointer"),H.on((Mt?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",ce)),_!=-1&&E>0&&(H.shadow=new $e.Shadow(_,8,8,E)),H.on("click",function(te){te.stopImmediatePropagation()}),this.resetX,this.resetY,c){H.cur("pointer");var ue,fe;H.on("mousedown",function(te){isNaN(h.resetX)&&(h.resetX=h.x),isNaN(h.resetY)&&(h.resetY=h.y),ue=te.stageX/e.scaX-h.x,fe=te.stageY/e.scaY-h.y,H.cur("pointer")}),H.on("pressmove",function(te){var K=Ye(te.stageX/e.scaX-ue,te.stageY/e.scaY-fe);h.x=K.x,h.y=K.y;for(var xe,_e=0;_e<h.numChildren;_e++)xe=h.getChildAt(_e),(xe.type=="TextArea"||xe.type=="Loader"||xe.type=="Tag")&&xe.resize();h.stage.update()}),this.on("pressup",function(){H.cur("pointer"),h.stage&&h.stage.update()})}if(H.centerReg(this),j&&j.center(this),!n(I)){typeof I=="string"&&(I=new e.Label(I,null,null,C));var ae=h.titleBarLabel=I;n(Y)&&(Y=ae.height*1.5),n(C)&&(C=e.black),n(k)&&(k="rgba(0,0,0,.2)"),h.titleBar=I=new e.Container(o,Y,null,null,!1).centerReg(h).mov(0,-l/2+Y/2),I.mouseEnabled=!1,I.mouseChildren=!1,h.titleBar.backing=new e.Rectangle(o,Y,k,null,null,[w*.95,w*.95,0,0],null,null,null,!1).addTo(I),ae.center(I).pos({x:Math.max(w/2,10),reg:!0})}W&&(W=h.close=new e.Shape(-40,-40,80,80,null,!1),W.graphics.f(G).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg"),I?W.addTo(h).scaleTo(I,null,50).mov(o/2-Math.max(w/2,10)-W.width/2,-l/2+Y/2).expand(40):W.addTo(h).sca(.3).mov(o/2-W.width-3,-l/2+W.height).expand(40),W.cur("pointer"),W.expand(),W.on((Mt?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",ce)),Object.defineProperty(h,"text",{get:function(){if(h.message){var te=h.message.text==" "?"":h.message.text;return te}else if(h.content.text){var te=h.content.text==" "?"":h.content.text;return te}},set:function(te){h.message?h.message.text=te:h.content.text&&(h.content.text=te)}}),this._enabled=!0,Object.defineProperty(h,"enabled",{get:function(){return h._enabled},set:function(te){f(h,te)}}),this.hide=function(te,K){return n(te)||(h.closeParams=te),ge(),K&&(h.dispatchEvent("close"),h.dispatchEvent("change")),h},this.on("removed",Ie);function Ie(){h.toggled=!1;var te,K;for(K=0;K<h.numChildren;K++)if(te=h.getChildAt(K),te.type=="TextArea"||te.type=="Loader"||te.type=="Tag"){var xe={obj:te,depth:h.getChildIndex(te)};V.add(te,xe)}for(K=h.numChildren-1;K>=0;K--)te=h.getChildAt(K),(te.type=="TextArea"||te.type=="Loader"||te.type=="Tag")&&h.removeChild(te);if(!e.OPTIMIZE&&(Mt||!le.OPTIMIZE)&&h.container.stage.update(),p&&(isNaN(h.resetX)||(h.x=h.resetX),isNaN(h.resetY)||(h.y=h.resetY)),h.zimAccessibility){var _e=h.zimAccessibility;_e.resize(h),Be?Be.focus():h.zimTabTag.nextSibling.focus(),setTimeout(function(){_e.talk("Pane has been closed.")},50)}}function ge(){T>0?h.animate({obj:{alpha:0},time:T,call:function(){te(),h.dispatchEvent("fadedout")}}):te();function te(){h.container.removeChild(h),h.closeCall&&h.closeCall(h.closeParams),!e.OPTIMIZE&&(Mt||!le.OPTIMIZE)&&h.container.stage.update(),p&&(isNaN(h.resetX)||(h.x=h.resetX),isNaN(h.resetY)||(h.y=h.resetY))}}var Be;this.show=function(te,K){return n(te)||(h.closeCall=te),n(K)||(h.closeParams=K),S&&isNaN(h.resetX)&&(h.x=h.container.getBounds().width/2,h.y=h.container.getBounds().height/2),h.container.addChild(h),T>0?(h.alpha=0,h.animate({props:{alpha:1},time:T,call:function(){h.dispatchEvent("fadedin")}})):setTimeout(function(){h.container.stage&&h.container.stage.update()},10),h},this.on("added",z);function z(){for(var te=0;te<V.length;te++)h.addChildAt(V.values[te].obj,V.values[te].depth);if(h.zimAccessibility){var K=h.zimAccessibility;setTimeout(function(){K.activatedObject&&(Be=K.activatedObject.zimTabTag)},50),K.resize(h),K.tabIndex=h.zimTabIndex}h.toggled=!0}function Ye(te,K){return te=Math.max(o/2,Math.min(h.container.getBounds().width-o/2,te)),K=Math.max(l/2,Math.min(h.container.getBounds().height-l/2,K)),{x:te,y:K}}this.toggle=function(te){return te===!0?h.show():te===!1||h.container.contains(h)?h.hide():h.show(),h},Z!==!1&&e.styleTransforms(this,Q),this.clone=function(){var te=h.contentContainer.x,K=h.contentContainer.y,xe=h.cloneProps(new e.Pane(e.copy(j),r,i,o,l,c,p,v,w,b,_,E,S,P,A,n(R)?null:R.clone(),T,h.container,I,C,k,Y,W,G,F,B,q,Z,this.group,ne));return xe.contentContainer.x=te,xe.contentContainer.y=K,xe}},e.extend(e.Pane,e.Container,"clone","zimContainer",!1),e.Panel=function(t,r,h,o,l,c,p,v,w,b,_,E,S,P,A,R,T,L,I,C,k,Y,W,G,F,B,q){var Z="width, height, content, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, backgroundColor, borderColor, borderWidth, corner, close, closeColor, next, nextColor, extraButton, collapse, collapseColor, collapsed, align, shadowColor, shadowBlur, draggable, boundary, style, group, inherit",X;if(X=vt(e.Panel,arguments,Z,this))return X;He("57.7"),this.group=B;var ne=F===!1?{}:e.getStyle("Panel",this.group,q);n(t)&&(t=ne.width!=null?ne.width:250),n(r)&&(r=ne.height!=null?ne.height:300),this.zimContainer_constructor(t,r,null,null,!1),this.type="Panel",n(h)&&(h=ne.content!=null?ne.content:null);var $=this.content=h;n(o)&&(o=ne.titleBar!=null?ne.titleBar:"PANEL"),n(l)&&(l=ne.titleBarColor!=null?ne.titleBarColor:e.white),n(c)&&(c=ne.titleBarBackgroundColor!=null?ne.titleBarBackgroundColor:e.grey),n(p)&&(p=ne.titleBarHeight!=null?ne.titleBarHeight:30),n(v)&&(v=ne.backgroundColor!=null?ne.backgroundColor:e.lighter),n(w)&&(w=ne.borderColor!=null?ne.borderColor:e.pewter),n(b)&&(b=ne.borderWidth!=null?ne.borderWidth:null),w<0||b<0?w=b=null:w!=null&&b==null&&(b=1),n(_)&&(_=ne.corner!=null?ne.corner:5),n(C)&&(C=ne.align!=null?ne.align:"left"),n(k)&&(k=ne.shadowColor!=null?ne.shadowColor:"rgba(0,0,0,.3)"),n(Y)&&(Y=ne.shadowBlur!=null?ne.shadowBlur:14),n(W)&&(W=ne.draggable!=null?ne.draggable:!1),n(G)&&(G=ne.boundary!=null?ne.boundary:null),n(E)&&(E=ne.close!=null?ne.close:!1),n(S)&&(S=ne.closeColor!=null?ne.closeColor:n(l)?e.grey:l),n(P)&&(P=ne.next!=null?ne.next:e.vee(o)),n(A)&&(A=ne.nextColor!=null?ne.nextColor:n(l)?e.grey:l),Array.isArray(_)||(_=[_,_,_,_]),n(T)&&(T=ne.collapse!=null?ne.collapse:!1),n(L)&&(L=ne.collapseColor!=null?ne.collapseColor:n(l)?e.grey:l),n(I)&&(I=ne.collapsed!=null?ne.collapsed:!1);var re=this,de=this.background=new e.Rectangle(t,r,v,w,b,_).addTo(this);k!=-1&&Y>0&&(this.background.shadow=new $e.Shadow(k,3,3,Y));var Q=o,U=e.Pick.choose(Q),g=e.Pick.choose(l),d=e.Pick.choose(c),h=re.contentContainer=new e.Container(t,r-p).addTo(re).mov(0,p);typeof U=="string"&&(U=new e.Label({text:U,color:g,size:ne.size!=null?ne.size:20,bold:ne.bold!=null?ne.bold:!1,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group}));var x=re.titleBarLabel=U;n(d)&&(d="rgba(0,0,0,.2)"),re.titleBar=o=new e.Container(t,p,null,null,!1).loc(0,0,re);var j=re.titleBar.backing=new e.Rectangle(t+b,p,d,null,null,[_[0]*.95,_[1]*.95,0,0],!0,null,null,!1).center(o);if(o&&H(),re.label=U,re.text=U.text,E){var O=re.closeIcon=new e.Shape(-40,-40,80,80,null,!1);O.graphics.f(S).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg"),o?(O.centerReg(o).scaleTo(o,null,50),O.pos(Math.max(_[1]/2,15),null,!0)):O.addTo(re).sca(.3).mov(t/2-O.width-3,-r/2+E.height),O.expand(40),O.cur("pointer"),O.on((Mt?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){var ae=re.stage;re.removeFrom(),re.dispatchEvent("close"),ae.update()})}if(this.add=function(ae,Ie,ge,Be){var z="obj, index, center, replace",Ye;return(Ye=vt(re.add,arguments,z,re))?Ye:(Be&&re.contentContainer.removeAllChildren(),ge?ae.center(re.contentContainer,Ie):ae.addTo(re.contentContainer,Ie),re)},$){var V=e.makeContent($,t),ce=["header","message","text","display","buttons","config"];ce.forEach(function(ae){V[ae]&&(re[ae]=V[ae])}),re.label=re.message,re.add(V,null,!0)}this.nextPanel=function(ae,Ie){var ge=n(ae)||n(Q.array)?e.Pick.choose(Q):Q.array[ae],Be=n(ae)||n(l.array)?e.Pick.choose(l):l.array[ae],z=n(ae)||n(c.array)?e.Pick.choose(c):c.array[ae],Ye=n(ae)||n(v.array)?e.Pick.choose(v):v.array[ae],te=n(ae)||n(w.array)?e.Pick.choose(w):w.array[ae];typeof ge=="string"&&(ge=new e.Label({text:ge,color:Be,size:ne.size!=null?ne.size:20,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group})),re.label=ge,re.text=ge.text,x.removeFrom(),x=re.titleBarLabel=ge,H(),j.color=z,re.background.color=Ye,re.background.borderColor=te,Ie&&re.dispatchEvent("change"),!e.OPTIMIZE&&(Mt||!le.OPTIMIZE)&&re.stage&&re.stage.update()};function H(){C=="right"?x.center(o).pos(Math.max(_[0]/2,10),null,!0):C=="center"||C=="middle"?x.center(o):x.center(o).loc(Math.max(_[0]/2,10)),x.mov(0,2)}if(W&&(o.cur("pointer"),o.on("mousedown",function(){re.drag({rect:G,currentTarget:!0})}),o.on("pressup",function(){re.noDrag(!1)})),P>0){var N=re.nextIcon=new e.Shape(-20,-20,40,40,null,!1);N.graphics.f(l).p("AiJieIETCeIkTCfg"),N.centerReg(o).scaleTo(o,null,70).alp(.8).hov(1).expand(),N.pos(Math.max(_[1]/2,15),null,!0),O&&N.mov(-O.width-8),N.cur("pointer"),N.on((Mt?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){re.nextPanel(),re.dispatchEvent("change")})}if(n(R)||(R=re.extraButton=new e.Button({label:"R",width:50,height:50,corner:5,group:"PanelExtra"}).scaleTo(o,null,70).centerReg(o).expand(),R.pos(Math.max(_[1]/2,15),null,!0),O&&R.mov(-O.width-8),N&&R.mov(-N.width-8)),T){fe=I,re.collapse=function(ae){if(n(ae)&&(ae=!0),ae==fe)return re;ae?(ue.rot(180),de.visible=!1,h.visible=!1,fe=!0,re.dispatchEvent("collapse")):(ue.rot(0),de.visible=!0,h.visible=!0,fe=!1,re.dispatchEvent("expand")),re.stage&&re.stage.update()},re.collapseEvent=re.titleBar.on("dblclick",function(){re.collapsed=!re.collapsed}),n(L)&&(L=e.grey);var ue=re.collapseIcon=new e.Triangle(90,90,90,e.faint,L,16);ue.centerReg(re).scaleTo(o,null,41).pos({x:t-Math.max(_[1]/2,15)-ue.width/2-4,y:p/2,reg:!0}).expand(40),R&&ue.mov(-R.width-8),O&&ue.mov(-O.width-8),N&&ue.mov(-N.width-8),ue.cur("pointer"),ue.expand();var fe=!1;ue.on((Mt?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){fe?re.collapse(!1):re.collapse(!0)})}re.overlay=new e.Rectangle(t,r,null,null,null,_).alp(.3),Object.defineProperty(re,"panelHeight",{get:function(){return re.background.height},set:function(ae){de.removeFrom(),de=this.background=new e.Rectangle(t,ae,v,w,b,_).addTo(this).bot(),k!=-1&&Y>0&&(this.background.shadow=new $e.Shadow(k,3,3,Y)),re.setBounds(t,ae),!e.OPTIMIZE&&(Mt||!le.OPTIMIZE)&&re.stage&&re.stage.update()}}),Object.defineProperty(re,"collapsed",{get:function(){return fe},set:function(ae){re.collapse&&re.collapse(ae)}}),this._enabled=!0,Object.defineProperty(re,"enabled",{get:function(){return re._enabled},set:function(ae){f(re,ae),ae?re.overlay.removeFrom():re.overlay.addTo(re),!e.OPTIMIZE&&(Mt||!le.OPTIMIZE)&&re.stage&&re.stage.update()}}),I&&(I=!1,re.collapsed=!0),F!==!1&&e.styleTransforms(this,ne),this.clone=function(){return re.cloneProps(new e.Toggle(t,r,o?o.clone():"",l,c,p,v,w,b,_,E,S,P,A,R,T,L,re.collapsed,C,k,Y,W,G,F,this.group,q))},this.doDispose=function(ae,Ie,ge){return T&&this.titleBar.off("dblclick",this.collapseEvent),ge||this.zimContainer_dispose(!0),!0}},e.extend(e.Panel,e.Container,["clone","dispose"],"zimContainer",!1),e.Panel.prototype.dispose=function(t){return this.doDispose(null,null,t)},e.Window=function(t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,T,L,I,C,k,Y,W,G,F,B,q,Z,X,ne,$,re,de,Q,U,g,d,h,x,j,O,V,ce,H,N,ue,fe,ae,Ie){var ge="width, height, content, backgroundColor, borderColor, borderWidth, padding, corner, swipe, scrollBarActive, scrollBarDrag, scrollBarColor, scrollBarAlpha, scrollBarFade, scrollBarH, scrollBarV, slide, slideFactor, slideSnap, slideSnapDamp, interactive, shadowColor, shadowBlur, paddingH, paddingV, scrollWheel, damp, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, draggable, boundary, onTop, close, closeColor, cancelCurrentDrag, fullSize, fullSizeColor, resizeHandle, collapse, collapseColor, collapsed, optimize, resizeBoundary, resizeVisible, style, group, inherit",Be;if(Be=vt(e.Window,arguments,ge,this))return Be;He("58.1"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Window",this.group=ae;var z=fe===!1?{}:e.getStyle(this.type,this.group,Ie);n(t)&&(t=z.width!=null?z.width:300),n(r)&&(r=z.height!=null?z.height:200),n(o)&&(o=z.backgroundColor!=null?z.backgroundColor:e.dark);var Ye=l,te=c;n(l)&&(l=z.borderColor!=null?z.borderColor:e.silver),n(c)&&(c=z.borderWidth!=null?z.borderWidth:1),n(p)&&(p=z.padding!=null?z.padding:0),n(v)&&(v=z.corner!=null?z.corner:0),n(w)&&(w=z.swipe!=null?z.swipe:!0),n(b)&&(b=z.scrollBarActive!=null?z.scrollBarActive:!0),n(_)&&(_=z.scrollBarDrag!=null?z.scrollBarDrag:!1),n(E)&&(E=z.scrollBarColor!=null?z.scrollBarColor:l),n(S)&&(S=z.scrollBarAlpha!=null?z.scrollBarAlpha:.3),n(P)&&(P=z.scrollBarFade!=null?z.scrollBarFade:!0),n(A)&&(A=z.scrollBarH!=null?z.scrollBarH:!0),n(R)&&(R=z.scrollBarV!=null?z.scrollBarV:!0),_&&(P=z.scrollBarFade!=null?z.scrollBarFade:!1),n(T)&&(T=z.slide!=null?z.slide:!0),n(L)&&(L=z.slideFactor!=null?z.slideFactor:.9),n(I)&&(I=z.slideSnap!=null?z.slideSnap:"vertical"),n(k)&&(k=z.interactive!=null?z.interactive:!0),n(Y)&&(Y=z.shadowColor!=null?z.shadowColor:"rgba(0,0,0,.3)"),n(W)&&(W=z.shadowBlur!=null?z.shadowBlur:20),n(F)&&(F=z.paddingV!=null?z.paddingV:p),n(G)&&(G=z.paddingH!=null?z.paddingH:p),n(B)&&(B=z.scrollWheel!=null?z.scrollWheel:!0),n(q)&&(q=z.damp!=null?z.damp:null),n(Z)&&(Z=z.titleBar!=null?z.titleBar:null),n(X)&&(X=z.titleBarColor!=null?z.titleBarColor:null),n(ne)&&(ne=z.titleBarBackgroundColor!=null?z.titleBarBackgroundColor:null),n($)&&($=z.titleBarHeight!=null?z.titleBarHeight:null),n(re)&&(re=z.draggable!=null?z.draggable:null),n(de)&&(de=z.boundary!=null?z.boundary:null),n(Q)&&(Q=z.onTop!=null?z.onTop:null),n(U)&&(U=z.close!=null?z.close:null),n(g)&&(g=z.closeColor!=null?z.closeColor:null),n(d)&&(d=z.cancelCurrentDrag!=null?z.cancelCurrentDrag:!1),n(h)&&(h=z.fullSize!=null?z.fullSize:null),n(x)&&(x=z.fullSizeColor!=null?z.fullSizeColor:null),n(j)&&(j=z.resizeHandle!=null?z.resizeHandle:null),n(O)&&(O=z.collapse!=null?z.collapse:!1),n(V)&&(V=z.collapseColor!=null?z.collapseColor:null),n(ce)&&(ce=z.collapsed!=null?z.collapsed:!1),n(H)&&(H=z.optimize!=null?z.optimize:!0),n(N)&&(N=z.resizeBoundary!=null?z.resizeBoundary:null),n(ue)&&(ue=z.resizeVisible!=null?z.resizeVisible:!1),Z===!1&&(Z=null),n(Z)||(n($)&&($=30),r=r-$);var K=this;K.optimize=H,this.scrollX=this.scrollY=this.scrollXMax=this.scrollYMax=0;var xe=this.backing=new e.Shape({style:!1});this.addChild(xe);var _e=new $e.Shape;_e.type="WindowBacking";var Se=_e.graphics;if(this.addChild(_e),i)var ie=K.content=i;i=this.contentContainer=new e.Container({style:!1}),this.addChild(i),i.mask=_e;var pe;if(!k)var be=new $e.Shape;if(c>0){var he=new $e.Shape;this.addChild(he)}var Pe=Z?0:v,Re=0;function ve(){K.setBounds(0,0,t,r),xe.graphics.c().f(o).rc(0,0,t,r,Pe,Pe,v,v),Y!=-1&&W>0&&(xe.shadow=new $e.Shadow(Y,4,4,W)),c>0&&(v?he.graphics.c().s(l).ss(c,"square","miter").rc(0,0,t,r,Pe,Pe,v,v):he.graphics.c().s(l).ss(c,"square","miter").dr(0,0,t,r)),n(ut)||(ut.widthOnly=K.width+c,Ke.widthOnly=K.width+c-1,K.setBounds(0,-$,K.width,r+$)),et&&(Z?(et.pos({x:t-Math.max(v/2,10)-et.width/2,y:$/2,reg:!0}),Ke.widthOnly=et.x-15,Re=K.width-Ke.width):et.pos(Math.max(v/2,10)/2,et.height/2,!0,!1,K)),Ne&&(Ne.pos({x:t-Math.max(v/2,10)-Ne.width/2,y:$/2,reg:!0}),et&&Ne.mov(-et.width-10),Z&&(Ke.widthOnly=Ne.x-15),Re=K.width-Ke.width),dt&&(dt.pos({x:t-Math.max(v/2,10)-dt.width/2,y:$/2,reg:!0}),et&&dt.mov(-et.width-10),Ne&&dt.mov(-Ne.width-10),Z&&(Ke.widthOnly=dt.x-15),Re=K.width-Ke.width)}ve();var Ae=this.scrollBar={};if(Ae.color=E,Ae.size=6,Ae.minSize=Ae.size*2,Ae.spacing=3.5+c/2,Ae.margin=0,Ae.corner=Ae.size/2,Ae.showTime=.5,Ae.fadeTime=3,b){var ye=Ae.horizontal=new e.Shape({style:!1}),Fe=ye.graphics;ye.alpha=S,this.addChild(ye),_&&ye.drag({localBoundary:!0});var De=Ae.vertical=new e.Shape({style:!1}),ke=De.graphics;De.alpha=S,this.addChild(De),_&&De.drag({localBoundary:!0})}var oe,Ge,We,Qe,st,yt,Le,ze,ot,Ce=!1;if(this.update=function(){b&&(Fe.clear(),ke.clear()),st=b?Ae.size+Ae.spacing*2:0,yt=i.getBounds()?i.getBounds().width:0,Le=i.getBounds()?i.getBounds().height:0,We=A&&yt>t-G&&(b||w===!0||w=="auto"||w=="horizontal"),Qe=R&&Le>r-F&&(b||w===!0||w=="auto"||w=="vertical"),K.scrollXMax=yt+G*2-t+(Qe?st+Ae.margin:0),K.scrollYMax=Le+F*2-r+(We?st+Ae.margin:0),Se.clear();var It=c/2,tt=c/2,_t=t-(Qe&&b?Ae.size+Ae.spacing*2:0)-(Qe?0:c),$t=r-(We&&b?Ae.size+Ae.spacing*2:0)-(We?0:c);Se.f("rgba(0,0,0,0)").rc(It,tt,_t,$t,Pe,Pe,Qe&&b?0:Math.max(0,v-c/2),We&&b?0:Math.max(0,v-c/2)),_e.setBounds(K.getBounds().x,K.getBounds().y,K.getBounds().width,K.getBounds().height),e.expand(_e,0),k||(be.graphics.c().f("red").dr(It,tt,_t,$t),i.hitArea=be);var Wt=Math.max(v,Math.min(Ae.corner,Ae.spacing)),on=Wt+c/2,en=Wt+(Qe?st:0)+c/2,un=Wt+c/2,bt=Wt+(We?st:0)+c/2,Ut,tn;We&&b&&(Ut=Math.max(Ae.minSize,(t-on-en)*(t-on-en)/(yt+G+Ae.margin)),Fe.f(Ae.color).rr(0,0,Ut,Ae.size,Ae.corner),ye.x=on,ye.y=r-Ae.size-Ae.spacing,oe=new e.Proportion(-K.scrollXMax,0,on,t-Ut-en,-1),_&&(ye.setBounds(0,0,Ut,Ae.size),tn=new $e.Rectangle(on,ye.y,t-Ut-on-en,0),ye.dragBoundary(tn),ye.proportion=new e.Proportion(tn.x,tn.x+tn.width,0,-K.scrollXMax),ye.off("pressmove",ze),ze=ye.on("pressmove",function(){K.dispatchEvent("scrolling"),be&&(be.x=-i.x,be.y=-i.y),i.x=ye.proportion.convert(ye.x),wt()}))),Qe&&b&&(Ut=Math.max(Ae.minSize,(r-un-bt)*(r-un-bt)/(Le+F+Ae.margin)),ke.f(Ae.color).rr(0,0,Ae.size,Ut,Ae.corner),De.x=t-Ae.size-Ae.spacing,De.y=un,Ge=new e.Proportion(-K.scrollYMax,0,un,r-Ut-bt,-1),_&&(De.setBounds(0,0,Ae.size,Ut),tn=new $e.Rectangle(De.x,un,0,r-Ut-un-bt),De.dragBoundary(tn),De.proportion=new e.Proportion(tn.y,tn.y+tn.height,0,-K.scrollYMax),De.off("pressmove",ot),ot=De.on("pressmove",function(){q&&(Ce=!0),K.dispatchEvent("scrolling"),be&&(be.x=-i.x,be.y=-i.y),q?rn=De.proportion.convert(De.y):i.y=De.proportion.convert(De.y),wt()}))),St(),clearTimeout(K.d2Timeout),K.d2Timeout=setTimeout(function(){ye&&ye.proportion&&(i.x=ye.proportion.convert(ye.x)),De&&De.proportion&&(i.y=De.proportion.convert(De.y))},50),clearTimeout(K.dTimeout),K.dTimeout=setTimeout(function(){Et()},300),Et(),wt()},this.resize=function(It,tt){n(It)&&(It=t),n(tt)&&(tt=r);var _t=Math.max(20,v*2);Z&&(_t=Math.max(Re,_t)),It<_t&&(It=_t),tt<20&&(tt=20),t=It,r=tt,ve();for(var $t=0;$t<i.numChildren;$t++){var Wt=i.getChildAt($t);Wt.type=="Wrapper"&&nt(Wt)}return j&&gt(),K.update(),rn=i.y,q&&ln.immediate(rn),K.dispatchEvent("resize"),K},!n(Z)){n(re)&&(re=!0),typeof Z=="string"&&(Z=new e.Label({text:Z,color:X,size:z.size!=null?z.size:20,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group}));var me=K.titleBarLabel=Z;me.noMouse(),n(ne)&&(ne="rgba(0,0,0,.2)"),K.titleBar=Z=new e.Container(t,$,null,null,!1).centerReg(K).mov(0,-r/2-$/2);var Ke=new e.Rectangle(Z.width-1,Z.height,red).alp(0).addTo(Z);me.setMask(Ke,!0);var ut=K.titleBar.backing=new e.Rectangle(t+c,$,ne,null,null,[v*.95,v*.95,0,0],!0,null,!1,!1).center(Z);me.center(Z).pos({x:Math.max(v/2,Math.max(10,p)),reg:!0}),K.regX=0,K.regY=-$,K.setBounds(0,-$,t,r+$),re?(Z.cur("pointer"),Z.on("mousedown",function(){K.drag({rect:de,currentTarget:!0,onTop:Q})}),Z.on("pressup",function(){K.noDrag(!1)})):Z.on("mousedown",function(){})}if(U){n(g)&&(g=e.grey);var et=K.closeIcon=new e.Shape(-40,-40,80,80,null,!1);et.graphics.f(g).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg"),Z?et.centerReg(K).scaleTo(Z,null,50).pos({x:t-Math.max(v/2,10)-et.width/2,y:$/2,reg:!0}).expand(40):et.sca(.3).pos(Math.max(v/2,10)/2,et.height/2,!0,!1,K).expand(40),et.cur("pointer"),et.expand(),et.on((Mt?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){var It=K.stage;K.removeFrom(),K.dispatchEvent("close"),It&&It.update()})}var qe,Ue,Ze,it,Ve,Me;if(!n(Z)){if(h){K.fullSize=function(It){if(n(It)&&(It=!0),It==Ue||!K.parent)return K;It?(Ze=K.width,it=K.height,Ve=K.x,Me=K.y,K.resize(K.parent.width,K.parent.height),K.x=0,K.y=0,Ue=!0,at.alpha=1,Ne.getChildAt(0).alpha=.01,K.dispatchEvent("fullsize")):(K.resize(Ze,it-Z.height),K.x=Ve,K.y=Me,Ue=!1,at.alpha=0,Ne.getChildAt(0).alpha=1,K.dispatchEvent("originalsize")),K.stage&&K.stage.update()},n(x)&&(x=e.grey);var Ne=K.fullSizeIcon=new e.Rectangle(80,80,e.faint,x,16),at=new e.Shape().s(x).ss(16).mt(-19.6,-20.6).lt(-19.6,-40).lt(40,-40).lt(40,20.7).lt(19.6,20.7).lt(19.6,40).lt(-40,40).lt(-40,-20.6).lt(-19.6,-20.6).lt(19.6,-20.6).lt(19.6,20.7).addTo(Ne).mov(40,40).alp(0);Ne.centerReg(K).scaleTo(Z,null,42).pos({x:t-Math.max(v/2,10)-Ne.width/2,y:$/2,reg:!0}).expand(40),et&&Ne.mov(-et.width-10),Ne.cur("pointer"),Ne.expand(),Ue=!1,Ze=t,it=r,Ve=K.x,Me=K.y,Ne.on((Mt?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){Ue?K.fullSize(!1):K.fullSize(!0)})}var Je=e.copy(K.getBounds(),!0);if(O){qe=ce,K.collapse=function(It){if(n(It)&&(It=!0),It==qe)return K;It?(dt.rot(180),K.backing.visible=!1,K.contentContainer.visible=!1,_e.visible=!1,ye&&(ye.visible=!1),ye&&(De.visible=!1),he&&(he.visible=!1),qe=!0,ut.sha(Y,5,5,W),j&&(K.resizeHandle.visible=!1),K.setBounds(Je.x,Je.y,Je.width,Z.height),K.dispatchEvent("collapse")):(dt.rot(0),K.backing.visible=!0,K.contentContainer.visible=!0,_e.visible=!0,ye&&(ye.visible=!0),ye&&(De.visible=!0),he&&(he.visible=!0),qe=!1,ut.sha(null),j&&(K.resizeHandle.visible=!0),K.setBounds(Je.x,Je.y,Je.width,Je.height),K.dispatchEvent("expand")),K.stage&&K.stage.update()},n(V)&&(V=e.grey);var dt=K.collapseIcon=new e.Triangle(90,90,90,e.faint,V,16);dt.centerReg(K).scaleTo(Z,null,42).pos({x:t-Math.max(v/2,10)-dt.width/2,y:$/2,reg:!0}).expand(40),et&&dt.mov(-et.width-10),Ne&&dt.mov(-Ne.width-10),dt.cur("pointer"),dt.expand(),qe=!1,Ze=t,it=r,Ve=K.x,Me=K.y,dt.on((Mt?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){qe?K.collapse(!1):K.collapse(!0)})}}if(j){var Oe=new Ur().loc(0,0,K).mov(K.width,K.height-(K.titleBar?K.titleBar.height:0)),je=K.resizeHandle=new e.Rectangle(25,25,e.grey,e.white).alp(ue?.5:.01).centerReg().rot(45).loc(0,0,Oe).drag({boundary:N,localBoundary:!0});je.on("mouseover",function(){je.alp(.5),je.stage&&je.stage.update()}),je.on("mousedown",function(){je.pressing=!0}),je.on("mouseout",function(){je.pressing||(ue||je.alp(.01),je.stage&&je.stage.update())}),je.on("pressmove",function(){K.resize(Math.max(50,Oe.x+je.x),Math.max(50,Oe.y+je.y))}),je.on("pressup",function(){je.pressing=!1,ue||je.alp(.01),gt(),je.stage&&je.stage.update()}),K.titleBar&&K.titleBar.on("pressup",gt)}function gt(It){K.resizeHandle.loc(0,0,Oe).top().mov(-Oe.x+K.width,-Oe.y+K.height-(K.titleBar?K.titleBar.height:0))}function nt(It){It.align=="right"?(It.x=G,It.resize(K.width-(Qe?Ae.size+Ae.spacing*2:G)-G*2)):(It.align=="center"||It.align=="middle",It.resize(K.width-(Qe?Ae.size+Ae.spacing*2:0)-G*2)),It.alpha=It.wrapperLastAlpha}if(ve(),this.add=function(It,tt,_t,$t){var Wt="obj, index, center, replace",on;if(on=vt(K.add,arguments,Wt,K))return on;var en=It;if(!en.getBounds()){lt("Window.add() - please add content with bounds set");return}return Jt(en),n(tt)&&(tt=i.numChildren),$t&&(tt=0,K.removeAll()),_t?(en.center(K).addTo(i,tt).mov(0,$?$/2:0),i.height>K.height-($||0)&&en.loc(null,0),i.width>K.width&&en.loc(0)):en.addTo(i,tt),en.type=="Wrapper"&&(De.alpha=0,A=!1,en.wrapperLastAlpha=en.alpha,en.alpha=0,this.added(function(){nt(en),K.resize(),ye.alpha=1,De.alpha=1})),en.x==0&&(en.x=G),en.y==0&&(en.y=F),K.update(),K},ie){var ht=e.makeContent(ie,t),xt=["header","message","text","display","buttons","config"];xt.forEach(function(It){ht[It]&&(K[It]=ht[It])}),K.label=K.message,K.add(ht,0,!0)}this.remove=function(It){return i.removeChild(It),K.update(),K},this.removeAll=function(){return i.removeAllChildren(),K.update(),K};function Et(It){n(pe)&&(pe=K.stage||le.zdf.stage),n(It)&&(It=!0),It?e.dragBoundary(i,new $e.Rectangle(0,0,We?-K.scrollXMax:0,Qe?-K.scrollYMax:0)):e.dragBoundary(i,new $e.Rectangle(-1e3,-1e3,pe.width+2e3,pe.height+2e3))}var ft=!1;w&&i.on("mousedown",function(){ft||e.Ticker.add(Lt,i.stage),ft=!0,We&&b&&P&&e.animate(ye,{alpha:S},Ae.showTime),Qe&&b&&P&&e.animate(De,{alpha:S},Ae.showTime)});function Lt(){rn=i.y,q&&ln.immediate(rn),b&&St()}function wt(){K.optimize&&(pe=K.stage,i.loop(function(It){!It.hitTestBounds||!It.stage||(It.hitTestBounds(pe)?(It.visible=!0,It.loop&&It.loop(function(tt){tt.hitTestBounds&&(tt.hitTestBounds(pe)?tt.visible=!0:tt.visible=!1)})):It.visible=!1)}))}function St(){wt(),K.dispatchEvent("scrolling"),be&&(be.x=-i.x,be.y=-i.y),We&&b&&(ye.x=oe.convert(i.x)),Qe&&b&&(De.y=Ge.convert(i.y))}this.on("added",function(){Ft(50)},null,!0);function Ft(It){n(It)&&(It=100),Jt(K),w&&setTimeout(function(){i&&(e.drag({obj:i,currentTarget:!0,localBoundary:!0,slide:T,slideFactor:L,slideSnap:A&&(w===!0||w=="auto"||w=="horizontal")||R&&(w===!0||w=="auto"||w=="vertical")?I:!1}),i.removeAllEventListeners("slidestart"),i.on("slidestart",function(){K.dispatchEvent("slidestart")}),i.removeAllEventListeners("slidestop"),!b&&H&&(K.zDE&&i.off(K.zDE),K.zDE=i.on("mousedown",()=>{K.zTI&&e.Ticker.remove(wt)}),K.zME&&i.off(K.zME),K.zME=i.on("pressmove",wt),K.zSTA&&i.off(K.zSTA),K.zSTA=i.on("slidestart",function(){K.zTI=e.Ticker.add(wt)}),K.zSTO&&i.off(K.zSTO),K.zSTO=i.on("slidestop",function(tt){K.zTI&&e.Ticker.remove(K.zTI)})),i.on("slidestop",function(tt){T&&Ot(tt),K.dispatchEvent("slidestop")}),i.getBounds()&&i.getBounds().width>0&&Et())},It)}this.cancelCurrentDrag=function(){K.contentContainer&&K.contentContainer.noDrag(!1),setTimeout(function(){i&&(e.drag({obj:i,currentTarget:!0,localBoundary:!0,slide:T,slideFactor:L,slideSnap:A&&(w===!0||w=="auto"||w=="horizontal")||R&&(w===!0||w=="auto"||w=="vertical")?I:!1}),i.getBounds()&&i.getBounds().width>0&&Et())},300)};var Xt;this.added(function(It){pe=It,Xt=pe.on("stagemousemove",function(tt){K.windowMouseX=tt.stageX/e.scaX,K.windowMouseY=tt.stageY/e.scaY})}),T?i.on("slidestop",Ot):i.on("mousedown",function(){i.stage.on("stagemouseup",Ot,null,!0)}),d&&(K.blurEvent=function(){K.cancelCurrentDrag(),Ot()},document.WW.addEventListener("blur",K.blurEvent));function Ot(){e.Ticker.remove(Lt),ft=!1,We&&P&&b&&e.animate(ye,{alpha:0},Ae.fadeTime),Qe&&P&&b&&e.animate(De,{alpha:0},Ae.fadeTime)}var jt=!1,Zt,rt=0,At=0,mt=0,Rt=0,Dt=300,Ht=2;function Vt(){Zt=Date.now(),e.Ticker.add(Bt,i.stage)}function Pt(){jt||(K.dispatchEvent("hoverout"),jt=!0),e.Ticker.remove(Bt)}function Bt(){if(!i.stage){jt||(K.dispatchEvent("hoverout"),jt=!0),e.Ticker.remove(Bt);return}Math.abs(rt-K.windowMouseX)>Ht||Math.abs(At-K.windowMouseY)>Ht?(jt||(K.dispatchEvent("hoverout"),jt=!0),Zt=Date.now(),rt=K.windowMouseX,At=K.windowMouseY):Date.now()-Zt>Dt&&((Math.abs(mt-K.windowMouseX)>Ht||Math.abs(Rt-K.windowMouseY)>Ht)&&(K.contentMouse=i.globalToLocal(K.windowMouseX,K.windowMouseY),K.dispatchEvent("hoverover"),mt=K.windowMouseX,Rt=K.windowMouseY,jt=!1),Zt=Date.now())}if(k){var Kt,Gt;i.on("mousedown",function(It){pe=It.target.stage,Kt=It.stageX/e.scaX,Gt=Date.now()}),i.on("click",function(It){Date.now()-Gt<600&&Math.abs(It.stageX/e.scaX-Kt)<5&&(K.contentMouse=i.globalToLocal(It.stageX/e.scaX,It.stageY/e.scaY),K.dispatchEvent("select"))}),i.on("mouseover",Vt),i.on("mouseout",Pt)}var rn=K.scrollY;K.scrollWindow=function(tt){if(Qe&&K.stage&&K.hitTestPoint(K.windowMouseX,K.windowMouseY)&&K.contains(K.stage.getObjectUnderPoint(K.windowMouseX*e.scaX,K.windowMouseY*e.scaY))){n(tt)&&(tt=event);var _t=tt.detail?tt.detail*-19:tt.wheelDelta;n(_t)&&(_t=tt.deltaY*-19),rn+=_t,rn=Math.max(-K.scrollYMax,Math.min(0,rn)),q||(K.scrollY=rn,i.stage.update()),Ce=!1}H&&wt()},B&&(le.addEventListener("mousewheel",K.scrollWindow),le.addEventListener("wheel",K.scrollWindow),le.addEventListener("DOMMouseScroll",K.scrollWindow));var cn=!1,ln;function Jt(It){q&&!cn&&It.stage&&(cn=!0,ln=new e.Damp(K.scrollY,q),K.dampTicker=e.Ticker.add(function(){if(!ft){if(K.scrollY!=null&&rn!=null&&K.scrollY!=rn&&Math.round(K.scrollY)==Math.round(rn)){Ce=!1;return}n(rn)||(i.y=ln.convert(rn)),Ce||St()}},It.stage))}this._enabled=!0,Object.defineProperty(K,"enabled",{get:function(){return K._enabled},set:function(It){It?Ft():(clearTimeout(K.dTimeout),e.noDrag(i)),f(K,It)}}),this._scrollEnabled=!0,Object.defineProperty(K,"scrollEnabled",{get:function(){return K._scrollEnabled},set:function(It){It?(Ft(),_&&(ze&&(ye.mouseEnabled=!0),ot&&(De.mouseEnabled=!0)),le.addEventListener("mousewheel",K.scrollWindow),le.addEventListener("wheel",K.scrollWindow),le.addEventListener("DOMMouseScroll",K.scrollWindow)):(clearTimeout(K.dTimeout),e.noDrag(i),_&&(ze&&(ye.mouseEnabled=!1),ot&&(De.mouseEnabled=!1)),le.removeEventListener("mousewheel",K.scrollWindow),le.removeEventListener("wheel",K.scrollWindow),le.removeEventListener("DOMMouseScroll",K.scrollWindow)),K._scrollEnabled=It}}),Object.defineProperty(K,"scrollX",{get:function(){return i.x},set:function(It){i.x=It,clearTimeout(K.d2Timeout),i.zimDragImmediate&&i.zimDragImmediate(i.x,i.y),St()}}),Object.defineProperty(K,"scrollY",{get:function(){return i.y},set:function(It){i.y=It,i.y=rn=It,q&&ln.immediate(rn),clearTimeout(K.d2Timeout),i.zimDragImmediate&&i.zimDragImmediate(i.x,i.y),St()}}),Object.defineProperty(K,"backgroundColor",{get:function(){return o},set:function(It){o=It,ve()}}),Object.defineProperty(K,"fullSized",{get:function(){return Ue},set:function(It){K.fullSize&&K.fullSize(It)}}),Object.defineProperty(K,"collapsed",{get:function(){return qe},set:function(It){K.collapse&&K.collapse(It)}}),ce&&(qe=!1,K.collapsed=!0),K.titleBar&&(K.collapseEvent=K.titleBar.on("dblclick",function(){K.collapsed=!K.collapsed})),fe!==!1&&e.styleTransforms(this,z),this.clone=function(It){n(It)&&(It=!0);var tt=K.cloneProps(new e.Window(t,r,null,o,Ye,te,p,v,w,b,_,Ae.color,S,P,A,R,T,L,I,C,k,Y,W,G,F,Z,X,ne,$,re,de,Q,U,g,d,h,x,j,O,V,ce,H,N,ue,fe,ae,Ie));return It&&(K.contentContainer.cloneChildren(tt.contentContainer),tt.update()),tt},this.doDispose=function(It,tt,_t){return B&&(le.removeEventListener("mousewheel",K.scrollWindow),le.removeEventListener("wheel",K.scrollWindow),le.removeEventListener("DOMMouseScroll",K.scrollWindow)),i&&(K.zDE&&i.off(K.zDE),K.zME&&i.off(K.zME),K.zSTA&&i.off(K.zSTA),K.zSTO&&i.off(K.zSTO),K.zTI&&e.Ticker.remove(K.zTI)),K.titleBar&&K.titleBar.removeAllEventListeners(),Xt&&pe&&pe.off("stagemousemove",Xt),K.resizeHandle&&K.resizeHandle.removeAllEventListeners(),K.blurEvent&&le.removeEventListener("blur",K.blurEvent),typeof Bt<"u"&&e.Ticker.remove(Bt),n(Lt)||e.Ticker.remove(Lt),_t||this.zimContainer_dispose(!0),i=K.contentContainer=null,!0}},e.extend(e.Window,e.Container,["clone","dispose"],"zimContainer",!1),e.Window.prototype.dispose=function(t){return this.doDispose(null,null,t)},e.Page=function(t,r,i,o,l,c,p,v,w,b,_){var E="width, height, color, color2, vertical, pattern, scalePattern, cache, style, group, inherit",S;if(S=vt(e.Page,arguments,E,this))return S;He("58.3"),this.group=b;var P=w===!1?{}:e.getStyle("Page",this.group,_);n(t)&&(t=P.width!=null?P.width:le.zdf.width),n(r)&&(r=P.height!=null?P.height:le.zdf.height),this.zimContainer_constructor(0,0,t,r,!1),this.type="Page";var A=this;n(l)&&(l=P.vertical!=null?P.vertical:!0),n(i)&&(i=P.color!=null?P.color:e.light),n(o)&&(o=P.color2!=null?P.color2:null),n(c)&&(c=P.pattern!=null?P.pattern:null),n(p)&&(p=P.scalePattern!=null?P.scalePattern:"fill"),n(v)&&(v=P.cache!=null?P.cache:!1),n(o)||(i=new e.GradientColor([i,o],[0,1],0,0,l?0:t,l?r:0),o=null);var R=this.backing=new e.Rectangle({width:t,height:r,color:i,style:!1}).addTo(this);n(v)&&(!n(o)||!n(c))&&(v=!0),v&&R.cache(),n(c)||(this.pattern=c.addTo(this),p&&c.scaleTo(this,100,100,p).center(this),v&&c.cache()),Object.defineProperty(A,"color",{get:function(){return i},set:function(T){n(T)&&(T=e.black),i=T,A.backing.color=T}}),w!==!1&&e.styleTransforms(this,P),this.clone=function(T){n(T)&&(T=!1),i.type&&(o=null);var L=A.cloneProps(new e.Page(t,r,i,o,l,c,p,v,w,b,_));return T&&A.cloneChildren(L),L}},e.extend(e.Page,e.Container,["clone"],"zimContainer",!1),e.Layer=function(t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,T,L,I,C,k,Y,W,G,F,B,q,Z,X,ne){var $="width, height, titleBar, titleBarContainer, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, color, rollColor, selectedColor, selectedRollColor, borderWidth, borderColor, dashed, transformObject, titleBarWidth, titleBarHeight, titleBarX, titleBarY, titleBarDraggable, close, closeColor, closeBackgroundColor, closeIndicatorColor, anchor, onTop, style, group, inherit",re;if(re=vt(e.Layer,arguments,$,this))return re;He("58.5"),this.group=X;var de=Z===!1?{}:e.getStyle("Layer",this.group,ne);n(t)&&(t=de.width!=null?de.width:500),n(r)&&(r=de.height!=null?de.height:500),this.zimContainer_constructor(0,0,t,r,!1),this.type="Layer";var Q=this;Q.distX=40,Q.distY=0,n(i)&&(i=de.titleBar!=null?de.titleBar:"LAYER");var U=i,g=i,d=!0;n(l)&&(l=de.backgroundColor!=null?de.backgroundColor:e.lighter),n(c)&&(c=de.rollBackgroundColor!=null?de.rollBackgroundColor:e.white),n(p)&&(p=de.selectedBackgroundColor!=null?de.selectedBackgroundColor:e.granite),n(w)&&(w=de.color!=null?de.color:e.granite),n(b)&&(b=de.rollColor!=null?de.rollColor:e.granite),n(_)&&(_=de.selectedColor!=null?de.selectedColor:e.moon),n(S)&&(S=de.borderWidth!=null?de.borderWidth:1),n(P)&&(P=de.borderColor!=null?de.borderColor:l),(P<0||S<0)&&(P=S=null),n(A)&&(A=de.dashed!=null?de.dashed:!0),n(R)&&(R=de.titleBar!=null?de.titleBar:null),n(T)&&(T=de.titleBarWidth!=null?de.titleBarWidth:100);var h=T;if(n(L)&&(L=de.titleBarHeight!=null?de.titleBarHeight:40),n(I)&&(I=de.titleBarX!=null?de.titleBarX:null),n(C)&&(C=de.titleBarY!=null?de.titleBarY:null),n(k)&&(k=de.titleBarDraggable!=null?de.titleBarDraggable:!0),n(Y)&&(Y=de.close!=null?de.close:!0),n(W)&&(W=de.closeColor!=null?de.closeColor:p),n(G)&&(G=de.closeBackgroundColor!=null?de.closeBackgroundColor:p),n(F)&&(F=de.closeIndicatorColor!=null?de.closeIndicatorColor:_),n(B)&&(B=de.anchor!=null?de.anchor:!0),n(q)&&(q=de.onTop!=null?de.onTop:!0),k||(B=!1),Q.anchor=B,Y&&(T+=30),R=e.merge({borderColor:p},R,{onTop:q,events:!0,visible:!1,ghostColor:P,ghostWidth:S,ghostDashed:A,ghostHidden:!0}),n(o)&&(o=de.titleBarContainer!=null?de.titleBarContainer:null),n(o))if(le.zdf)o=le.zdf.stage;else{lt("zim Layer(): Please pass in a reference to a container with bounds set.");return}Q.active=!1,Q.turnOff=function(){Q.active=!1,Y&&(Q.checkBox.visible=!1),Q.transformControls.remove(),Q.mouseChildren=!0,Q.button.backgroundColor=l,Q.button.rollBackgroundColor=c,Q.button.color=w,Q.button.rollColor=w,Q.transformControls.allowToggleOff(),Q.resizeChildren&&Q.resizeChildren()},Q.turnOn=function(){Q.active=!0,Y&&(Q.checkBox.visible=!0,Q.checkBox.checked=!0),Q.button.backgroundColor=p,Q.button.rollBackgroundColor=p,Q.button.color=_,Q.button.rollColor=_,Q.mouseChildren=!1,Q.transformControls.add(),Q.transformControls.allowToggleOn()};var x;Q.titleBarPos=function(V,ce){if(Q.titleBar)return Q.titleBar.pos?(Q.titleBar.pos(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9]),x.update()):(Q.distX=V,Q.distY=ce),d=!1,Q};var j=Q.visible;Q.visible=!1;var O=y();this.added(function(V){x=V,Q.transform(R),S>=0&&Q.transformControls.hideGhost(),setTimeout(function(){function ce(){return Q.localToLocal(0,0,o)}Q.visible=j,S>=0&&setTimeout(function(){Q.transformControls.showGhost(),Q.stage&&Q.stage.update()},200),x=V;var H=Q.titleBar=new e.Container(T,L).reg(0,L).loc(Q,null,o).mov(Q.distX,Q.distY);k&&H.drag({all:!0,boundary:new e.Boundary(0,L,o.width-T,o.height-L),localBoundary:!0}),(Q.distX!=40||Q.distY!=0)&&H.pos(Q.distX,Q.distY),Y&&(Q.checkBox=new e.CheckBox({borderColor:W,backgroundColor:G,indicatorColor:F,size:20,startChecked:!0}).center(H).pos(0,null,!0).change(function(){Q.turnOff(),Q.dispatchEvent("transformhide")}),Q.checkBox.visible=!1),H.mouseChildren=!0,H.layer=Q,Q.resetTitleBar=function(){Q.distX=40,Q.distY=0,d=!0,Q.move(!0),Q.stage&&Q.stage.update()},(typeof g=="string"||typeof g=="number")&&(g=new e.Label({text:g,color:w,rollColor:b,size:de.size!=null?de.size:18,group:this.group})),Q.label=g,Q.label.center(H),Q.button=new e.Button({shadowBlur:-1,width:h,height:L-1,label:Q.label,color:w,rollColor:b,backgroundColor:l,rollBackgroundColor:c,corner:de.corner!=null?de.corner:0,inherit:e.copy(de)}).addTo(H),Q.button.on("mousedown",function(){o.loop(function(z){z&&z!=H&&z.layer&&z.layer.turnOff&&z.layer.active&&z.layer.turnOff()}),Q.active||(Q.turnOn(),Q.dispatchEvent("transformshow")),H.top()}),Q.button.on("pressmove",function(){N()}),Q.button.on("pressup",function(){N(!0);var z=Q.localToLocal(0,0,o);Q.distX=H.x-z.x,Q.distY=H.y-z.y,H.top(),!fe()&&k&&(z=Q.localToGlobal(0,0),Q.button.hitTestPoint(z.x,z.y)&&Q.resetTitleBar())});function N(z){if(d&&k){var Ye=o.localToLocal(H.x-Q.distX,H.y-Q.distY,Q.parent),te=Q.localToLocal(Q.regX,Q.regY,Q.parent),K=Q.localToLocal(0,0,Q.parent);Q.x=Ye.x+(te.x-K.x),Q.y=Ye.y+(te.y-K.y),Q.transformControls.resize(z),ue(Q),Q.stage&&Q.stage.update()}}function ue(z){z.loop(function(Ye){Ye.type=="Layer"&&(Q.titleBarDraggable&&Ye.move(),Ye.transformControls.ghost&&Ye.transformControls.resize(),ue(Ye))})}Q.button.on("dblclick",function(){k&&Q.resetTitleBar()}),Q.turnOff(),Q.on("transformed",function(z){(z.transformType=="move"||z.transformType=="size"||z.transformType=="stretch"||z.transformType=="rotate")&&(k&&Q.move(),ue(Q))});function fe(){if(H.x==0||H.y==H.height||H.x==o.width-H.width||H.y==o.height)return!0}Q.move=function(z){!z&&!d&&Q.anchor&&fe()||(H.loc(ce()).mov(Q.distX,Q.distY),H.x<0&&(d=!1,H.x=0),H.y<H.height&&(d=!1,H.y=H.height),H.x>o.width-H.width&&(d=!1,H.x=o.width-H.width),H.y>o.height&&(d=!1,H.y=o.height),Q.anchor||(d=!0))},Q.on("transformhide",function(){Q.turnOff(),o.loop(function(z){z&&z!=H&&z.layer&&z.layer.turnOff&&z.layer.active&&z.layer.turnOff()})}),Q.resizeChildren=function(z){Q.transformControls.resize(z),Q.loop(function(Ye){Ye.transformControls&&(Ye.transformControls.visible&&Ye.transformControls.hide(),Ye.type=="Layer"?Ye.resizeChildren():Ye.transformControls.resize())})},Q.resize=function(z){return Q.move(),Q.resizeChildren(z),Q},Q.toggled=!1;function ae(){Q.toggled?(o.loop(function(z){z&&z!=H&&z.layer&&z.layer.turnOff&&z.layer.active&&z.layer.turnOff()}),Q.turnOn(),Q.dispatchEvent("transformshow")):(H.top(),Q.turnOff(),o.loop(function(z){z&&z!=H&&z.layer&&z.layer.turnOff&&z.layer.active&&z.layer.turnOff()}),Q.dispatchEvent("transformhide")),Q.stage&&Q.stage.update()}if(Q.toggle=function(z){return n(z)?Q.toggled=!Q.toggled:Q.toggled=z,ae(),Q},Object.defineProperty(Q,"titleBarDraggable",{get:function(){return k},set:function(z){k=z,k?H.drag({all:!0,boundary:e.Boundary(0,40,o.width-T,o.height-L),localBoundary:!0}):H.noDrag(!1)}}),Q.stageUpEvent=x.on("stagemouseup",function(){Q.transformControls.visible&&H.top()}),!n(I)||!n(C)){d=!1;var Ie=n(I)?H.x:I,ge=n(C)?H.y-L:C;Q.titleBarStartX=I,Q.titleBarStartY=C,Q.titleBarPos(Ie,ge);var Be=Q.parent.localToLocal(Q.x,Q.y,o);Q.distX=H.x-Be.x,Q.distY=H.y-Be.y}},50)},O=="s"?.05:50),Z!==!1&&e.styleTransforms(this,de),this.clone=function(){return Q.cloneProps(new e.Layer(t,r,U,o,l,c,p,v,w,b,_,E,S,P,A,R,h,L,I,C,k,Y,W,G,F,B,q,Z,this.group,ne))},this.dispose=function(V,ce,H){return Q.stageUpEvent&&x.off("stagemouseup",Q.stageUpEvent),o&&o.loop(function(N){N.layer=null}),Q.transformControls.dispose(),Q.transformControls=null,H||this.zimContainer_dispose(!0),Q.titleBar.layer=null,Q.titleBar.dispose(),Q.checkBox=Q.button=null,i=Q.titleBar=R=null,!0}},e.extend(e.Layer,e.Container,["clone","dispose"],"zimContainer",!1),e.Waiter=function(t,r,i,o,l,c,p,v,w,b,_){var E="container, speed, foregroundColor, backgroundColor, corner, shadowColor, shadowBlur, fadeTime, style, group, inherit",S;if(S=vt(e.Waiter,arguments,E,this))return S;He("59"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Waiter",this.group=b;var P=w===!1?{}:e.getStyle(this.type,this.group,_),A=y(r);n(r)&&(r=P.speed!=null?P.speed:A=="s"?.6:600),n(i)&&(i=P.foregroundColor!=null?P.foregroundColor:e.white),n(o)&&(o=P.backgroundColor!=null?P.backgroundColor:"orange"),n(l)&&(l=P.corner!=null?P.corner:16),n(c)&&(c=P.shadowColor!=null?P.shadowColor:"rgba(0,0,0,.3)"),n(p)&&(p=P.shadowBlur!=null?P.shadowBlur:14),n(v)&&(v=P.fadeTime!=null?P.fadeTime:0);var R=40,T=3,L=R*.6/2,I=(R-L*2)/2,C=T*(L*2+I)+I;this.setBounds(-C/2,-R/2,C,R);var k=this,Y,W=this.display=new e.Shape({style:!1});this.addChild(W),W.setBounds(0,0,C,R),W.regX=C/2,W.regY=R/2;var G=W.graphics;G.f(o);var F=l;Array.isArray(F)||(F=[l,l,l,l]),G.rc(0,0,C,R,F[0],F[1],F[2],F[3]),c!=-1&&p>0&&(W.shadow=new $e.Shadow(c,3,3,p)),W.on("click",function($){$.stopImmediatePropagation()});var B=new e.Container({style:!1});this.addChild(B);for(var q,Z=0;Z<T;Z++)q=new $e.Shape,q.graphics.f(i).dc(0,0,L),q.x=(Z-(T-1)/2)*(L*2+I),B.addChild(q),q.cache(-L,-L,L*2,L*2),q.alpha=0;this.hide=function(){v>0?k.animate({obj:{alpha:0},time:v,call:$}):$();function $(){if(k.parent&&k.parent.removeChild(k),Y=k.stage,Y&&Y.update(),k.zimAccessibility){var re=k.zimAccessibility;re.resize(k),X?X.focus():k.zimTabTag.nextSibling.focus(),setTimeout(function(){re.talk("Waiter has finished.")},50)}}return k.toggled=!1,k};var X,ne=[];this.show=function(){var $="zim display - Waiter(): Please pass in a reference to a container with bounds set as first parameter to Waiter";if(n(t))if(le.zdf)t=le.zdf.stage;else{lt($);return}else if(t.getBounds){if(n(t.stage)){lt("zim display - Waiter(): The container must have a stage property");return}}else{lt($);return}for(var re,de=0,Q=r*(A=="s"?1e3:1),U=0;U<B.numChildren;U++)B&&ne.push(setTimeout(function(){re=B.getChildAt(de),$e.Tween.get(re,{loop:!0}).to({alpha:1},Q/T/2).wait(Q/T).to({alpha:0},Q/T).wait(Q-Q/T-Q/T/2),de++},U*Q/T));if(k.ticker=$e.Ticker.on("tick",function(){t.stage.update()}),k.x=t.getBounds().width/2,k.y=t.getBounds().height/2,t.addChild(k),v>0&&(k.alpha=0,k.animate({alpha:1},v)),k.zimAccessibility){var g=k.zimAccessibility;setTimeout(function(){g.activatedObject&&(X=g.activatedObject.zimTabTag)},50),g.resize(k),g.talk(k.zimTabTag.getAttribute("aria-label"))}return k.toggled=!0,k},k.toggle=function($){return $===!0?k.show():$===!1||k.parent?k.hide():k.show(),k},w!==!1&&e.styleTransforms(this,P),this.clone=function(){return k.cloneProps(new e.Waiter(t,r,i,o,l,c,p,v,w,this.group,_))},this.dispose=function($,re,de){k.ticker&&$e.Ticker.off("tick",k.ticker),$e.Tween.removeTweens(k),k.removeFrom();for(var Q=0;Q<B.numChildren;Q++){var U=B.getChildAt(Q);clearInterval(ne[Q]),$e.Tween.removeTweens(U)}return de||this.zimContainer_dispose(!0),!0}},e.extend(e.Waiter,e.Container,["clone","dispose"],"zimContainer",!1),e.ProgressBar=function(t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,T,L,I,C,k,Y){var W="barType, foregroundColor, backgroundColor, borderColor, borderWidth, padding, label, color, labelPosition, percentage, corner, shadowColor, shadowBlur, backing, delay, fastClose, container, autoHide, width, style, group, inherit",G;if(G=vt(e.ProgressBar,arguments,W,this))return G;He("59.5"),this.zimContainer_constructor(null,null,null,null,!1),this.type="ProgressBar",this.group=k;var F=C===!1?{}:e.getStyle(this.type,this.group,Y);n(r)&&(r=F.foregroundColor!=null?F.foregroundColor:e.green),n(i)&&(i=F.backgroundColor!=null?F.backgroundColor:e.charcoal),n(o)&&(o=F.borderColor!=null?F.borderColor:i),n(l)&&(l=F.borderWidth!=null?F.borderWidth:null),n(w)&&(w=F.labelPosition!=null?F.labelPosition:"bottom"),n(t)&&(t=F.barType!=null?F.barType:"circle"),n(c)&&(c=F.padding!=null?F.padding:t=="circle"?2:-.5),n(_)&&(_=F.corner!=null?F.corner:15),n(E)&&(E=F.shadowColor!=null?F.shadowColor:"rgba(0,0,0,.3)"),n(S)&&(S=F.shadowBlur!=null?F.shadowBlur:14),n(P)&&(P=F.backing!=null?F.backing.clone():null),n(R)&&(R=F.fastClose!=null?F.fastClose:!0),o<0||l<0?o=l=null:o!=null&&l==null&&(t=="circle"?l=10:l=2);var B=y(A);n(A)&&(A=F.delay!=null?F.delay:B=="s"?.1:100),n(L)&&(L=F.autoHide!=null?F.autoHide:!0),n(p)&&(p=F.label!=null?F.label:null),n(v)&&(v=F.color!=null?F.color:r),n(I)&&(I=F.width!=null?F.width:t=="circle"?40:200),(typeof p=="string"||typeof p=="number")&&(p=new e.Label({text:p,color:v,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group})),!n(b)&&n(p)&&(p=new e.Label("")),this.label=p;var q=30,Z=this,X=0;Z.visible=!1,setTimeout(function(){Z.visible=!0,Z.stage&&Z.stage.update()},A);var ne;if(t=="circle")I=I/2,P=this.backing=new e.Circle(I,"rgba(0,0,0,0)",i,l,null,null,null,null,!1).addTo(Z),ne=this.bar=new e.Shape({style:!1}).addTo(Z).loc(P.x,P.y).rot(-90);else{if(E!=-1&&S>0){var $=new e.Rectangle(I-2,q-2,i,null,null,_,null,null,null,!1).addTo(this);$.shadow=new $e.Shadow(E,3,3,S)}P=U(P);var re=_;Array.isArray(re)||(re=[_,_,_,_]);var de=(c+l/2)*1.2;ne=this.bar=new e.Rectangle(I-(c+l/2)*1.8,q-(c+l/2)*1.8,r,null,null,[re[0]-de,re[1]-de,re[2]-de,re[3]-de],null,null,null,!1).center(this);var Q=this.mask=new e.Rectangle(I-(c+l/2)*1.8,q-(c+l/2)*1.8,null,null,null,null,null,null,null,!1).center(this).alp(0).sca(0,1);ne.setMask(Q)}function U(x){var j;if(Z.backing?(j=Z.getChildIndex(Z.backing),Z.removeChild(Z.backing)):j=Z.numChildren,Z.border&&Z.removeChild(Z.border),!n(x)&&x.type=="Pattern"){var O=x;x=Z.backing=new e.Rectangle(I,q,i,null,null,_,null,null,null,!1).addTo(Z,j),x.pattern=O,O.center(x),O.setMask(x.shape),l&&(Z.border=new e.Rectangle(I,q,"rgba(0,0,0,0)",o,l,_,null,null,null,!1).addTo(Z,j+1))}else x=Z.backing=n(x)?new e.Rectangle(I,q,i,o,l,_,null,null,null,!1).addTo(Z,j):P.addTo(Z,j);return x}Z.setBacking=function(x){U(x),Z.stage&&Z.stage.update()},P.on("click",function(x){x.stopImmediatePropagation()}),n(p)||(p.scaleX=p.scaleY=.8,p.startText=p.text,n(b)||(p.text=p.startText+"  0%"),p.center(Z),w=="above"?p.y-=60:p.y+=60,p.alpha=.8),this.hide=function(){var x=Z.stage;if(Z.parent&&Z.parent.removeChild(Z),Z.backing.type=="Pattern"&&Z.backing.pauseInterval&&Z.backing.pauseInterval(),x&&x.update(),Z.zimAccessibility){var j=Z.zimAccessibility;j.resize(Z),g?g.focus():Z.zimTabTag.nextSibling.focus(),setTimeout(function(){j.talk("Progress Bar has finished.")},50)}return Z.toggled=!1,Z};var g;this.show=function(){var x="zim display - ProgressBar(): Please pass in a reference to a container with bounds set as first parameter of the ProgressBar";if(n(T))if(le.zdf)T=le.zdf.stage;else{lt(x);return}else if(T.getBounds){if(n(T.stage)){lt("zim display - Waiter(): The container must have a stage property");return}}else{lt(x);return}if(Z.timeOut&&clearTimeout(Z.timeOut),d(0),Z.zimActiveLoader&&Z.zimActiveLoader.on("progress",function(O){X=O.progress*100,d(X)}),Z.center(T),Z.backing.type=="Pattern"&&Z.backing.pauseInterval&&Z.backing.pauseInterval(!1),Z.zimAccessibility){var j=Z.zimAccessibility;setTimeout(function(){j.activatedObject&&(g=j.activatedObject.zimTabTag)},50),j.resize(Z),j.talk(Z.zimTabTag.getAttribute("aria-label"))}return Z.toggled=!0,Z},Z.toggle=function(x){return x===!0?Z.show():x===!1||Z.parent?Z.hide():Z.show(),Z},Z.run=function(x,j){n(j)||(L=j),n(x)&&(x=B=="s"?3:3e3),a(x,B);var O=x*(B=="s"?1e3:1);Z.runInterval&&clearInterval(Z.runInterval),Z.percent=0;var V=Date.now();return Z.runInterval=setInterval(function(){Z.percent=(Date.now()-V)/O*100,Z.percent>=100&&(Z.percent=100,clearInterval(Z.runInterval))},30),Z},Z.dispatched=!1;function d(x){t=="circle"?ne.graphics.c().mt(0,0).s(r).ss(l-c*2+.5).a(0,0,I,0,360*x/100*Math.PI/180):(Q.sca(x/100,1),ne.setMask(Q)),n(b)||(p.text=p.startText+" "+Math.min(Math.round(x),100)+"%"),L&&R&&Math.round(x)>=100&&(Z.timeOut=setTimeout(function(){Z.hide()},200)),!Z.dispatched&&Math.round(x)>=100&&(Z.dispatchEvent("complete"),Z.dispatched=!0,setTimeout(function(){Z&&(Z.dispatched=!1)},100)),Z.stage&&Z.stage.update()}Object.defineProperty(Z,"percent",{get:function(){return X},set:function(x){X=x,d(x)}});var h=Z.getBounds();Z.setBounds(h.x-5,h.y-5,h.width+10,h.height+10),C!==!1&&e.styleTransforms(this,F),this.clone=function(){return Z.cloneProps(new e.ProgressBar(t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,T,L,I,C,this.group,Y))},this.dispose=function(x,j,O){return Z.backing.type=="Pattern"&&Z.backing.clearInterval&&Z.backing.clearInterval(),Z.runInterval&&clearInterval(Z.runInterval),O||this.zimContainer_dispose(!0),!0}},e.extend(e.ProgressBar,e.Container,["clone","dispose"],"zimContainer",!1),e.Indicator=function(t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,T,L,I,C,k){var Y="width, height, num, foregroundColor, backgroundColor, borderColor, borderWidth, backdropColor, corner, indicatorType, fill, scale, lightScale, interactive, shadowColor, shadowBlur, selectedIndex, backgroundAlpha, style, group, inherit",W;if(W=vt(e.Indicator,arguments,Y,this))return W;He("60"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Indicator",this.group=C;var G=I===!1?{}:e.getStyle(this.type,this.group,k);n(t)&&(t=G.width!=null?G.width:300),n(r)&&(r=G.height!=null?G.height:50),n(i)&&(i=G.num!=null?G.num:6),n(b)&&(b=G.indicatorType!=null?G.indicatorType:"dot"),n(o)&&(o=G.foregroundColor!=null?G.foregroundColor:b=="star"?e.yellow:b=="heart"?e.red:e.orange),n(l)&&(l=G.backgroundColor!=null?G.backgroundColor:e.granite),l<0&&(l=G.backgroundColor!=null?G.backgroundColor:"rgba(0,0,0,.01)"),n(c)&&(c=G.borderColor!=null?G.borderColor:null),n(p)&&(p=G.borderWidth!=null?G.borderWidth:null),c<0||p<0?c=p=null:c!=null&&p==null&&(p=1),n(v)&&(v=G.backdropColor!=null?G.backdropColor:-1),n(w)&&(w=G.corner!=null?G.corner:0),n(_)&&(_=G.fill!=null?G.fill:!1),n(E)&&(E=G.scale!=null?G.scale:1),n(S)&&(S=G.lightScale!=null?G.lightScale:1),n(P)&&(P=G.interactive!=null?G.interactive:!1),n(A)&&(A=G.shadowColor!=null?G.shadowColor:"rgba(0,0,0,.3)"),n(R)&&(R=G.shadowBlur!=null?G.shadowBlur:5),n(L)&&(L=G.backgroundAlpha!=null?G.backgroundAlpha:.2);var F=(Mt?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",B=this;this.lights=[];var q;if(v!=-1){var Z=B.backdrop=new e.Rectangle(t,r,v,c,p,w,null,null,null,!1);this.addChild(Z)}var X=this.lightsContainer=new e.Container({style:!1});this.addChild(X);var ne,$=r*.5,re=t/(i+1),de=new $e.Shape,Q=!1;b=="square"||b=="box"||b.type=="Emoji"?de.graphics.f("black").dr(-re/2/S+$/2,-r/2+$/2,re/S,r):de.graphics.f("black").dr(-re/2/S,-r/2,re/S,r);for(var U=0;U<i;U++)b=="square"||b=="box"?(ne=new e.Rectangle($,$,l,c,p,null,null,null,null,!1),ne.regX=ne.width/2,ne.regY=ne.height/2):b=="star"?ne=new e.Poly($*.6,5,.5,l,c,p,null,null,!1):b=="heart"?ne=new e.Blob({points:[[0,-40.7,0,0,-57.3,-76.6,41.8,-80.3,"mirror"],[100,0,0,0,23.7,-45.4,-23.7,45.4,"mirror"],[0,100,0,0,0,0,0,0,"mirror"],[-100,0,0,0,21.9,48.2,-21.9,-48.2,"mirror"]],color:l,interactive:!1}).transformPoints("scale",.15):b.type=="Emoji"?(Q=!0,ne=b.clone().reg("center","center"),ne.myCache=!1):ne=new e.Circle($/2,l,c,p,null,null,null,null,!1),this.lights.push(ne),ne.znum=U,ne.scaleX=ne.scaleY=S,ne.hitArea=de,ne.x=re+re*U,ne.y=r/2,X.addChild(ne);X.setBounds(0,0,t,r),X.regX=X.x=t/2,X.regY=X.y=r/2,this.addChild(X),A!=-1&&R>0&&(X.shadow=new $e.Shadow(A,2,2,R)),P&&(X.cur("pointer"),B.lightsEvent=X.on(F,function(d){if(q==d.target.znum){if(q>0)return;if(q==0){q=-1,g(q),B.dispatchEvent("change");return}}q=d.target.znum,g(q),B.dispatchEvent("change")})),X.scaleX=X.scaleY=E;function g(d){d>=i&&(d=-1);for(var h,x=0;x<i;x++){_&&x<d?h=o:h=l,x==d&&(h=o);var j=X.getChildAt(x);Q&&(j.alpha=h==o?1:L),j.color=h}B.zimAccessibility&&B.zimAccessibility.changeTitle(B),!e.OPTIMIZE&&(Mt||!le.OPTIMIZE)&&B.stage&&B.stage.update()}Object.defineProperty(this,"selectedIndex",{get:function(){return q},set:function(d){q=Math.floor(d),q=e.constrain(q,-1,i-1),g(q)}}),Object.defineProperty(this,"num",{get:function(){return i},set:function(){Ct&&lt("Indicator() - num is read only")}}),this._enabled=!0,Object.defineProperty(B,"enabled",{get:function(){return B._enabled},set:function(d){f(B,d)}}),n(T)&&(T=G.selectedIndex!=null?G.selectedIndex:0),B.selectedIndex=T,I!==!1&&e.styleTransforms(this,G),this.dispose=function(d,h,x){x||(B.lightsEvent&&X.off(F,B.lightsEvent),this.zimContainer_dispose())},this.clone=function(){return B.cloneProps(new e.Indicator(t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,T,L,I,this.group,k))}},e.extend(e.Indicator,e.Container,["clone","dispose"],"zimContainer",!1),e.TextInput=function(t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,T,L,I,C,k,Y,W,G,F,B,q,Z,X,ne,$,re,de,Q,U,g,d,h,x,j,O){var V="width, height, placeholder, text, size, font, color, backgroundColor, borderColor, borderWidth, maxLength, password, selectionColor, selectionAlpha, cursorColor, cursorSpeed, shadowColor, shadowBlur, align, corner, padding, paddingH, paddingV, shiftH, shiftV, scrollBarActive, scrollBarDrag, scrollBarColor, scrollBarAlpha, scrollBarFade, scrollBarH, scrollBarV, readOnly, inputType, rtl, uppercase, placeholderInstant, keyboardShift, style, group, inherit",ce;if(ce=vt(e.TextInput,arguments,V,this))return ce;He("54.2"),this.group=j;var H=x===!1?{}:e.getStyle("TextInput",this.group,O);n(l)&&(l=H.size!=null?H.size:36),(n(k)||k=="ignore")&&(k=H.padding!=null&&k!="ignore"?H.padding:5),n(Y)&&(Y=H.paddingH!=null?H.paddingH:k),n(W)&&(W=H.paddingV!=null?H.paddingV:k),n(t)&&(t=H.width!=null?H.width:300),n(r)&&(r=H.height!=null?H.height:l+W*2),n(i)&&(i=H.placeholder!=null?H.placeholder:null),n(o)&&(o=H.text!=null?H.text:""),n(c)&&(c=H.font!=null?H.font:"arial"),n(p)&&(p=H.color!=null?H.color:e.dark),n(v)&&(v=H.backgroundColor!=null?H.backgroundColor:e.lighter),n(w)&&(w=H.borderColor!=null?H.borderColor:null),n(b)&&(b=H.borderWidth!=null?H.borderWidth:null);var N=ue(t,r,i,o,p,v,w);this.veeObj={width:N[0],height:N[1],placeholder:N[2],text:N[3],color:N[4],backgroundColor:N[5],borderColor:N[6]};function ue(){return arguments}t=e.Pick.choose(t),r=e.Pick.choose(r),i=e.Pick.choose(i),o=e.Pick.choose(o),p=e.Pick.choose(p),v=e.Pick.choose(v),w=e.Pick.choose(w),n(S)&&(S=H.selectionColor!=null?H.selectionColor:p),n(P)&&(P=H.selectionAlpha!=null?H.selectionAlpha:.2),n(A)&&(A=H.cursorColor!=null?H.cursorColor:p),n(R)&&(R=H.cursorSpeed!=null?H.cursorSpeed:.5),n(T)&&(T=H.shadowColor!=null?H.shadowColor:"rgba(0,0,0,.3)"),n(L)&&(L=H.shadowBlur!=null?H.shadowBlur:20),n(I)&&(I=H.align!=null?H.align:"left"),n(C)&&(C=H.corner!=null?H.corner:0),n(G)&&(G=H.shiftH!=null?H.shiftH:0),n(E)&&(E=H.password!=null?H.password:!1),n(F)&&(F=H.shiftV!=null?H.shiftV:E?l*.25:0),n(_)&&(_=H.maxLength!=null?H.maxLength:I=="center"?Math.floor(t/l)*1.8:null),n(B)&&(B=H.scrollBarActive!=null?H.scrollBarActive:!1),n(q)&&(q=H.scrollBarDrag!=null?H.scrollBarDrag:!1),n(Z)&&(Z=H.scrollBarColor!=null?H.scrollBarColor:w),n(X)&&(X=H.scrollBarAlpha!=null?H.scrollBarAlpha:.3),n(ne)&&(ne=H.scrollBarFade!=null?H.scrollBarFade:!0),n($)&&($=H.scrollBarH!=null?H.scrollBarH:!0),n(re)&&(re=H.scrollBarV!=null?H.scrollBarV:!0),n(de)&&(de=H.readOnly!=null?H.readOnly:!1),n(Q)&&(Q=H.inputType!=null?H.inputType:"text"),q&&(ne=H.scrollBarFade!=null?H.scrollBarFade:!1),n(U)&&(U=H.rtl!=null?H.rtl:le.DIR=="rtl"||e.DIR=="rtl"?"rtl":null),n(g)&&(g=H.uppercase!=null?H.uppercase:null),n(h)&&(h=H.keyboardShift!=null?H.keyboardShift:null),g&&(o&&(o=o.toUpperCase()),i&&(i=i.toUpperCase())),n(d)&&(d=H.placeholderInstant!=null?H.placeholderInstant:!0);function fe(){return le.DIR&&le.DIR=="rtl"||!le.DIR&&e.DIR=="rtl"?I=="start"?I="right":I=="end"&&(I="left"):I=="start"?I="left":I=="end"&&(I="right"),I}I=fe(I),this.zimWindow_constructor(t,r,null,v,w,b,k,C,!1,B,q,Z,X,ne,$,re,!1,null,!1,!0,T,L,Y,W,!0,null,null,null,null,null,!1,null,null,null,null,null,null,null,null,null,null,null,null,x,j,e.copy(H)),this.type="TextInput";var ae=this;this.placeholderLabel=new e.Label({text:i||"",size:l,color:p,font:c,shiftH:G,shiftV:F,valign:"top"}).alp(.5),o==""&&this.add(this.placeholderLabel);var Ie=new e.Rectangle({width:t-k*2,height:r-k*2,color:e.clear,style:!1}).center(this);this.cur("text");var ge=this.label=new e.TextInput.LabelInput(o,l,_,E,S,P,A,R,c,p,null,null,null,I,"top",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,G,F,null,null,null,null,Q,U,g,d,x,j,O);this.add(ge),ge.setMask(Ie),this.htmlTag=this.label.hiddenInput,this.selection=this.label.selection,this.blinker=this.label.blinker,I=="right"?(ge.x=t-Y,this.placeholderLabel.x=t-this.placeholderLabel.width-Y):I=="center"&&(ge.x=t/2,this.placeholderLabel.x=(t-this.placeholderLabel.width)/2),ge.ogx=ge.x,ae.placeholderLabel.x=ge.x,ae.placeholderLabel.align=I;var Be=new e.Rectangle({width:k,height:r,color:e.clear,style:!1}).addTo(this).expand(0);Be.on("mousedown",function(_e){ge.onMousedown(_e),_e.stopImmediatePropagation()}),Be.on("pressmove",function(_e){ge.onPressmove(_e),_e.stopImmediatePropagation()}),Be.on("dblclick",function(_e){ge.onDblclick(_e),_e.stopImmediatePropagation()});var z=new e.Rectangle({width:k,height:r,color:e.clear,style:!1}).pos(0,0,e.RIGHT,e.TOP,this).expand(0);z.on("mousedown",function(_e){ge.onMousedown(_e),_e.stopImmediatePropagation()}),z.on("pressmove",function(_e){ge.onPressmove(_e),_e.stopImmediatePropagation()}),z.on("dblclick",function(_e){ge.onDblclick(_e),_e.stopImmediatePropagation()});var Ye=ge.text;this.on("mousedown",function(_e){ge.onMousedown(_e),Ye=ge.text}),this.on("pressmove",function(_e){ge.onPressmove(_e),_e.stopImmediatePropagation()}),this.on("dblclick",function(_e){ge.onDblclick(_e),_e.stopImmediatePropagation()}),this.added(function(_e){_e.on("stagemousedown",function(Se){ae.hitTestPoint(Se.stageX,Se.stageY)||(ge.focus=!1,ge.text!=Ye&&ae.dispatchEvent("change"),Ye=ge.text)})});var te=ae.stage?stage.y:0;this.label.on("focus",function(){if(le.M&&h){ae.re&&ae.stage.frame.off("resize",ae.re),ae.re=ae.stage.frame.on("resize",function(){ae.stage&&_e>ae.stage.height/4&&(ae.stage.y=ae.stage.scaleY*(ae.stage.height/4-_e),ae.stage.update())});var _e=ae.label.localToGlobal(0,0).y;ae.stage&&_e>ae.stage.height/4&&(ae.stage.y=ae.stage.scaleY*(ae.stage.height/4-_e),ae.stage.update())}d&&ae.placeholderLabel.parent&&(ae.placeholderLabel.removeFrom(),ae.stage&&ae.stage.update()),ae.dispatchEvent("focus")}),this.label.on("blur",function(){le.M&&h&&ae.stage&&(ae.re&&ae.stage.frame.off("resize",ae.re),ae.stage.y=te,ae.stage.update()),d&&ge.text==""&&!ae.placeholderLabel.parent&&(ae.add(ae.placeholderLabel),ae.stage&&ae.stage.update()),ae.dispatchEvent("blur")});function K(){ge.text!=""&&ae.placeholderLabel.parent&&(ae.placeholderLabel.removeFrom(),ae.stage&&ae.stage.update()),ge.text==""&&!ae.placeholderLabel.parent&&(ae.add(ae.placeholderLabel),ae.stage&&ae.stage.update())}this.label.on("input",function(){K(),ae.dispatchEvent("input")}),this.label.on("keydown",function(_e){this.label.deleteKey=_e.detail==46,ae.dispatchEvent("keydown")}),this.label.on("blinker",function(){var _e=ae.localToGlobal(0,0).x,Se=_e+t-Y-ge.blinker.width,ie=ge.blinker,pe=ie.localToGlobal(0,0).x,be=ge.localToGlobal(0,0).x-1,he=ge.x+ge.blinker.x,Pe=e.constrain(he,Y,t-Y-ge.blinker.width);if(he!=Pe&&(ge.x-=he-Pe),I=="left")ge.width<ae.width?ge.x=ge.ogx:Se<pe||ge.oldWidth==ge.width?ge.x-=he-Pe:ge.oldWidth>ge.width&&this.label.deleteKey!=!0&&(ge.x+=Math.abs(ie.oldX-pe)+ge.blinker.width+Y);else if(I=="right")ge.width<ae.width?ge.x=ge.ogx:Se<pe||ge.oldWidth==ge.width?ge.x-=he-Pe:ge.oldWidth>ge.width&&this.label.deleteKey==!0&&pe<be-ae.width&&(ge.x-=Math.abs(ie.oldX-pe)+ge.blinker.width+Y);else if(I=="center"){if(ge.width<ae.width)ge.x=ge.ogx;else if(Se<pe)ge.x-=he-Pe;else if(ge.oldWidth==ge.width)ge.x-=he-Pe;else if(ge.oldWidth>ge.width&&Se>pe){var Re=_e+ae.width*.5;this.label.deleteKey!=!0?ge.x+=ge.blinker.width+Y:ge.x-=ge.blinker.width+Y}}ge.oldWidth=ge.width,ie.oldX=pe,ae.stage&&ae.stage.update()}),Object.defineProperty(ae,"text",{get:function(){return ge.hiddenInput.value},set:function(_e){Ye=_e,ge.setText(_e),K(),!e.OPTIMIZE&&(Mt||!le.OPTIMIZE)&&ae.stage&&ae.stage.update()}}),le.KEYFOCUS!=null&&(e.KEYFOCUS=le.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return e.KEYFOCUS==ae},set:function(){e.KEYFOCUS=ae}}),e.KEYFOCUS||xe(),this.on("mousedown",function(){xe()});function xe(){ae.keyFocus=!0}Object.defineProperty(ae,"readOnly",{get:function(){return de},set:function(_e){de=_e,ae.htmlTag.setAttribute("readonly",de)}}),de&&(ae.readOnly=!0),Object.defineProperty(ae,"focus",{get:function(){return ge.focus},set:function(_e){ge.focus=_e}}),Object.defineProperty(ae,"color",{get:function(){return ge.color},set:function(_e){ge.color=latestColor=_e,!e.OPTIMIZE&&(Mt||!le.OPTIMIZE)&&ae.stage&&ae.stage.update()}}),Object.defineProperty(ae,"size",{get:function(){return ge.size},set:function(_e){ge.size=_e,ge.hiddenInput.style.fontSize=_e+"px",!e.OPTIMIZE&&(Mt||!le.OPTIMIZE)&&ae.stage&&ae.stage.update()}}),Object.defineProperty(ae,"align",{get:function(){return ge.align},set:function(_e){ge.align=I=fe(_e),I=="right"?ge.x=t-ge.width:I=="center"?ge.x=t/2:ge.x=0,ae.placeholderLabel.x=ge.x,ae.placeholderLabel.align=I,!e.OPTIMIZE&&(Mt||!le.OPTIMIZE)&&ae.stage&&ae.stage.update()}}),Object.defineProperty(ae,"font",{get:function(){return ge.font},set:function(_e){ge.font=_e,!e.OPTIMIZE&&(Mt||!le.OPTIMIZE)&&ae.stage&&ae.stage.update()}}),Object.defineProperty(ae,"selectionAlpha",{get:function(){return ge.selectionAlpha},set:function(_e){ge.selectionAlpha=_e,ge.selection.alpha!=0&&(ge.selection.alpha=_e),!e.OPTIMIZE&&(Mt||!le.OPTIMIZE)&&ae.stage&&ae.stage.update()}}),e.styleTransforms(this,H),this.clone=function(_e){return ae.cloneProps(_e||!e.isPick(N[0])?t:N[0],_e||!e.isPick(N[1])?r:N[1],_e||!e.isPick(N[2])?i:N[2],_e||!e.isPick(N[3])?o:N[3],l,c,_e||!e.isPick(N[4])?p:N[4],_e||!e.isPick(N[5])?v:N[5],_e||!e.isPick(N[6])?w:N[6],b,_,E,S,P,A,R,T,L,I,C,k,Y,W,G,F,B,q,Z,X,ne,$,re,de,Q,g,d,h,x,this.group,O)}},e.extend(e.TextInput,e.Window,"clone","zimWindow",!1),e.TextInput.LabelInput=function(t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,T,L,I,C,k,Y,W,G,F,B,q,Z,X,ne,$,re,de,Q,U,g,d,h,x,j,O,V,ce){this.zimLabel_constructor(t,r,w,b,null,E,S,P,A,R,T,L,I,C,k,Y,W,G,F,B,q,Z,X,ne,$,re,de,null,U,g,null,d,O,V,ce),this.type="LabelInput",n(b)&&(b=e.dark),n(l)&&(l=b),n(c)&&(c=.2),this.selectionAlpha=c,n(p)&&(p=b),n(v)&&(v=.5),this.hiddenInput=document.createElement("INPUT"),this.hiddenInput.value=t,h=="text"&&o&&(h="password"),this.hiddenInput.type=h,h=="number"&&(this.hiddenInput.pattern="[^(0-9).-+*/%$]*",this.hiddenInput.inputmode="numeric"),i>0&&(this.hiddenInput.maxLength=i),this.hiddenInput.autocapitalize="off",this.hiddenInput.autocorrect="off",this.hiddenInput.autocomplete="off",this.hiddenInput.spellcheck=!1,this.hiddenInput.style.position="absolute",this.hiddenInput.style.overflow="hidden",this.hiddenInput.style.touchAction="none",this.hiddenInput.style.left="-99999px",this.hiddenInput.style.top="-99999px",this.hiddenInput.style.zIndex=-999,this.hiddenInput.style.opacity=0,this.hiddenInput.style.width="1px",this.hiddenInput.style.height="1px",this.hiddenInput.style.fontSize="1px",this.onFocus=function(){this.stage&&(N=this.stage.frame),N.zil&&le.removeEventListener("keydown",N.zil[0]),this.blinker.alp(1).replayTween(),this.selection.alp(.2),this.positionBlinkerAndSelection(),this.dispatchEvent("focus")},this.onBlur=function(){this.stage&&(N=this.stage.frame),N.zil&&le.addEventListener("keydown",N.zil[0]),this.positionBlinkerAndSelection(),this.blinker.pauseAnimate(!0).alp(0),this.selection.alp(0),this.hiddenInput.type=h,this.dispatchEvent("blur")},this.onInput=function(){j&&(this.hiddenInput.value=this.hiddenInput.value.toUpperCase());var ue=this.hiddenInput.value;h=="number"&&(ue=ue.replace(/[^(0-9).\-+*/%$]*/g,""),this.hiddenInput.value=ue),this.text=this.hiddenInput.type=="password"?ue.replace(/./g,"*"):ue,this.measureText(),this.dispatchEvent("input")},this.onSelect=function(){this.positionBlinkerAndSelection(),this.focus&&this.blinker.replayTween()};var H=this;this.onKeydown=function(ue){this.deleteKey=ue.code=="Backspace"||ue.code=="Delete",this.blinker.replayTween(),setTimeout(function(){let fe=new CustomEvent("keydown",{detail:ue.keyCode});H.positionBlinkerAndSelection.call(H),H.dispatchEvent(fe)},10)},this.onMousedown=function(ue){var fe=this.text.length,ae=this.eventPositionGlobalToLocal(ue);this.focus||(this.hiddenInput.focus(),(h=="number"||h=="email")&&(this.hiddenInput.type="text"));var Ie=this.mapPointToIndex(ae);x?this.hiddenInput.setSelectionRange(fe-Ie,fe-Ie):this.hiddenInput.setSelectionRange(Ie,Ie),this.positionBlinkerAndSelection()},this.onPressmove=function(ue){var fe=this.text.length;this.focus||this.hiddenInput.focus();var ae=this.eventPositionGlobalToLocal(ue),Ie;x?Ie=fe-this.mapPointToIndex(ae):Ie=this.mapPointToIndex(ae),this.hiddenInput.selectionStart===this.hiddenInput.selectionEnd?this.hiddenInput.selectionStart<=Ie?this.hiddenInput.setSelectionRange(this.hiddenInput.selectionStart,Ie,x?"backward":"forward"):this.hiddenInput.setSelectionRange(Ie,this.hiddenInput.selectionEnd,x?"forward":"backward"):this.hiddenInput.selectionDirection===(x?"backward":"forward")?this.hiddenInput.setSelectionRange(this.hiddenInput.selectionStart,Ie,x?"backward":"forward"):this.hiddenInput.setSelectionRange(Ie,this.hiddenInput.selectionEnd,x?"forward":"backward"),this.positionBlinkerAndSelection()},this.onDblclick=function(){this.hiddenInput.select(),this.positionBlinkerAndSelection()},this.positionBlinkerAndSelection=function(){var ue=this.text.length;if(this.focus){var fe=this.backing||this.background?this.paddingH:0,ae=this.backing||this.background?this.paddingV:0;if(this.hiddenInput.selectionStart!==this.hiddenInput.selectionEnd){var Ie,ge;x?(Ie=this.textWidthArray[ue-this.hiddenInput.selectionStart],ge=this.textWidthArray[ue-this.hiddenInput.selectionEnd],this.selection.widthOnly=ge-Ie,this.selection.pos(ge+fe-1+re,ae+de)):(Ie=this.textWidthArray[this.hiddenInput.selectionStart],ge=this.textWidthArray[this.hiddenInput.selectionEnd],this.selection.widthOnly=ge-Ie,this.selection.pos(Ie+fe-1+re,ae+de)),this.selection.heightOnly=this.textHeight,this.selection.alp(this.selectionAlpha)}else this.selection.alp(0);this.blinker.heightOnly=this.textHeight;var Be=this.hiddenInput.selectionDirection==="backward"?this.hiddenInput.selectionStart:this.hiddenInput.selectionEnd;Be||(Be=0),x&&(Be=ue-Be),this.blinker.pos(this.textWidthArray[Be]+fe-1+(P=="right"&&this.text==""?this.width:P=="center"&&this.text==""?this.width/2:0)+re,ae+de),this.dispatchEvent("blinker")}this.stage&&this.stage.update()},this.eventPositionGlobalToLocal=function(ue){var fe=this.globalToLocal(ue.stageX/e.scaX,ue.stageY/e.scaY);return P=="right"?fe.x-=this.label.x-this.width:P=="center"?fe.x-=(this.label.x-this.width)/2:fe.x-=this.label.x,fe.y-=this.label.y,fe},this.mapPointToIndex=function(ue){for(var fe=this.textWidthArray.length-1,ae=0;ae<this.textWidthArray.length-1;ae++){var Ie=(this.textWidthArray[ae]+this.textWidthArray[ae+1])/2;if(ue.x<=Ie){fe=ae;break}}return fe},this.measureText=function(){var ue=this.label.clone(),fe=this.text;x&&(fe=fe.split("").reverse().join(""));for(var ae=0;ae<fe.length&&ae<this.previousMeasuredText.length&&fe[ae]===this.previousMeasuredText[ae];)ae++;for(this.textWidthArray=this.textWidthArray.slice(0,ae+1),ae++;ae<=fe.length;ae++)ue.text=fe.slice(0,ae),this.textWidthArray.push(ue.getMeasuredWidth());this.previousMeasuredText=fe,this.textHeight=ue.getMeasuredLineHeight()},this.setText=function(ue){j&&(ue=ue.toUpperCase()),this.hiddenInput.value=ue,this.onInput()},Object.defineProperty(this,"focus",{get:function(){return document.activeElement===H.hiddenInput},set:function(ue){ue===!0?H.hiddenInput.focus():H.hiddenInput.blur()}});var N;this.added(function(ue){N=ue.frame,H.hiddenInput.addEventListener("focus",H.onFocus.bind(H)),H.hiddenInput.addEventListener("blur",H.onBlur.bind(H))}),this.hiddenInput.addEventListener("input",this.onInput.bind(this)),this.hiddenInput.addEventListener("select",this.onSelect.bind(this)),this.hiddenInput.addEventListener("keydown",this.onKeydown.bind(this)),document.body.appendChild(this.hiddenInput),this.on("mousedown",this.onMousedown.bind(this)),this.on("pressmove",this.onPressmove.bind(this)),this.on("dblclick",this.onDblclick.bind(this)),this.cur("text"),this.blinker=new e.Rectangle({width:2,height:1,color:p,style:!1}).animate({obj:{alpha:0},wait:v,time:.1,rewind:!0,rewindWait:v,loop:!0,loopWait:v}).pauseAnimate(!0).alp(0).addTo(this),this.selection=new e.Rectangle({width:1,height:1,color:l,style:!1}).alp(0).addTo(this),this.textWidthArray=[0],this.previousMeasuredText="",this.textHeight=null,this.measureText()},e.extend(e.TextInput.LabelInput,e.Label,null,"zimLabel",!1),e.List=function(t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,T,L,I,C,k,Y,W,G,F,B,q,Z,X,ne,$,re,de,Q,U,g,d,h,x,j,O,V,ce,H,N,ue,fe,ae,Ie,ge,Be,z,Ye,te,K,xe,_e,Se,ie,pe,be,he,Pe,Re,ve,Ae,ye,Fe,De,ke,oe,Ge,We,Qe,st,yt,Le,ze){var ot="width, height, list, viewNum, vertical, currentSelected, align, valign, labelAlign, labelValign, labelIndent, labelIndentH, labelIndentV, indent, spacing, backgroundColor, rollBackgroundColor, downBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, backdropColor, color, rollColor, downColor, selectedColor, selectedRollColor, borderColor, borderWidth, padding, corner, swipe, scrollBarActive, scrollBarDrag, scrollBarColor, scrollBarAlpha, scrollBarFade, scrollBarH, scrollBarV, scrollBarOverlay, slide, slideFactor, slideSnap, slideSnapDamp, shadowColor, shadowBlur, paddingH, paddingV, scrollWheel, damp, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, draggable, boundary, onTop, close, closeColor, collapse, collapseColor, collapsed, excludeCustomTap, organizer, checkBox, pulldown, clone, cancelCurrentDrag, selectedIndex, noScale, pulldownToggle, optimize, keyEnabled, resizeHandle, resizeBoundary, resizeVisible, style, group, inherit",Ce;if(Ce=vt(e.List,arguments,ot,this))return Ce;He("60.5"),this.group=Le;var me=yt===!1?{}:e.getStyle("List",this.group,ze);n(t)&&(t=me.width!=null?me.width:300);var Ke=r;n(r)&&(r=me.height!=null?me.height:n(Pe)?200:200+Pe.height),n(i)&&(i=i=me.list!=null?me.list:["Option 1","Option 2","Option 3","Option 4","Option 5","Option 6","Option 7","Option 8","Option 9","Option 10"]),i.length==0&&(i=["%-&"]),this.originalList=i,n(o)&&(o=me.viewNum!=null?me.viewNum:5),n(l)&&(l=me.vertical!=null?me.vertical:!0),n(c)&&(c=me.currentSelected!=null?me.currentSelected:!0);var ut=!n(p)||!n(w);n(Re)&&(Re=me.checkBox!=null?me.checkBox:!1),n(p)&&(p=me.align!=null?me.align:Re?"left":"center"),n(v)&&(v=me.valign!=null?me.valign:"center"),n(w)&&(w=me.labelAlign!=null?me.labelAlign:p),n(b)&&(b=me.labelValign!=null?me.labelValign:v),n(P)&&(P=me.indent!=null?me.indent:Re?0:10),n(_)&&(_=me.labelIndent!=null?me.labelIndent:P),n(E)&&(E=me.labelIndentH!=null?me.labelIndentH:_),n(S)&&(S=me.labelIndentV!=null?me.labelIndentV:_),n(A)&&(A=me.spacing!=null?me.spacing:2),n(k)&&(k=me.backdropColor!=null?me.backdropColor:e.dark),n(R)&&(R=me.backgroundColor!=null?me.backgroundColor:e.tin),n(T)&&(T=me.rollBackgroundColor!=null?me.rollBackgroundColor:e.grey),n(L)&&(L=me.downBackgroundColor!=null?me.downBackgroundColor:T),n(I)&&(I=me.selectedBackgroundColor!=null?me.selectedBackgroundColor:e.charcoal),n(C)&&(C=me.selectedRollBackgroundColor!=null?me.selectedRollBackgroundColor:e.grey),n(Y)&&(Y=me.color!=null?me.color:e.white),n(W)&&(W=me.rollColor!=null?me.rollColor:Y),n(G)&&(G=me.downColor!=null?me.downColor:W),n(F)&&(F=me.selectedColor!=null?me.selectedColor:Y),n(B)&&(B=me.selectedRollColor!=null?me.selectedRollColor:W),n(k)&&(k=me.backdropColor!=null?me.backdropColor:k);var et=q,qe=Z;n(q)&&(q=me.borderColor!=null?me.borderColor:e.silver),n(Z)&&(Z=me.borderWidth!=null?me.borderWidth:1),n(X)&&(X=me.padding!=null?me.padding:A),n(ne)&&(ne=me.corner!=null?me.corner:0),n($)&&($=me.swipe!=null?me.swipe:!0),n(re)&&(re=me.scrollBarActive!=null?me.scrollBarActive:!0),n(de)&&(de=me.scrollBarDrag!=null?me.scrollBarDrag:!0),n(Q)&&(Q=me.scrollBarColor!=null?me.scrollBarColor:q),n(U)&&(U=me.scrollBarAlpha!=null?me.scrollBarAlpha:.3),n(g)&&(g=me.scrollBarFade!=null?me.scrollBarFade:!0),n(d)&&(d=me.scrollBarH!=null?me.scrollBarH:!l),n(h)&&(h=me.scrollBarV!=null?me.scrollBarV:l),de&&(g=me.scrollBarFade!=null?me.scrollBarFade:!1),n(x)&&(x=me.scrollBarOverlay!=null?me.scrollBarOverlay:!0),n(j)&&(j=me.slide!=null?me.slide:!0),n(O)&&(O=me.slideFactor!=null?me.slideFactor:.95),n(V)&&(V=me.slideSnap!=null?me.slideSnap:l?"vertical":"horizontal"),n(H)&&(H=me.shadowColor!=null?me.shadowColor:"rgba(0,0,0,.3)"),n(N)&&(N=me.shadowBlur!=null?me.shadowBlur:20),n(fe)&&(fe=me.paddingV!=null?me.paddingV:X),n(ue)&&(ue=me.paddingH!=null?me.paddingH:X),n(ae)&&(ae=me.scrollWheel!=null?me.scrollWheel:!0),n(ge)&&(ge=me.titleBar!=null?me.titleBar:null),n(Be)&&(Be=me.titleBarColor!=null?me.titleBarColor:null),n(z)&&(z=me.titleBarBackgroundColor!=null?me.titleBarBackgroundColor:null),n(Ye)&&(Ye=me.titleBarHeight!=null?me.titleBarHeight:35),n(te)&&(te=me.draggable!=null?me.draggable:null),n(K)&&(K=me.boundary!=null?me.boundary:null),n(xe)&&(xe=me.onTop!=null?me.onTop:null),n(_e)&&(_e=me.close!=null?me.close:null),n(Se)&&(Se=me.closeColor!=null?me.closeColor:null),n(ie)&&(ie=me.collapse!=null?me.collapse:null),n(pe)&&(pe=me.collapseColor!=null?me.collapseColor:null),n(he)&&(he=me.excludeCustomTap!=null?me.excludeCustomTap:!1),n(Re)&&(Re=me.checkBox!=null?me.checkBox:!1),n(ve)&&(ve=me.pulldown!=null?me.pulldown:!1),n(ke)&&(ke=me.pulldownToggle!=null?me.pulldownToggle:!1),n(De)&&(De=me.noScale!=null?me.noScale:!1),n(Ae)&&(Ae=me.clone!=null?me.clone:!1),n(oe)&&(oe=me.optimize!=null?me.optimize:!0),n(Ge)&&(Ge=me.keyEnabled!=null?me.keyEnabled:null),n(We)&&(We=me.resizeHandle!=null?me.resizeHandle:null),n(Qe)&&(Qe=me.resizeBoundary!=null?me.resizeBoundary:null),n(st)&&(st=me.resizeVisible!=null?me.resizeVisible:!1),ge===!1&&(ge=null),this.vertical=l;var Ue=this,Ze=r;le.DIR&&le.DIR=="rtl"||!le.DIR&&e.DIR=="rtl"?p=="start"?p="right":p=="end"&&(p="left"):p=="start"?p="left":p=="end"&&(p="right"),Re&&e.loop(i,function(rt,At){i[At]!="%-&"&&(i[At]=e.List.checkItem(rt,null,t,"left",10,10,A,Y,W,F,B,R,T,I,C))});var it=y(),Ve;if(i.constructor=={}.constructor){var Me=n(i.shade)?n(me.shade)?.2:me.shade:i.shade,Ne=n(i.dim)?n(me.dim)?.1:me.dim:i.dim,at=n(i.shift)?n(me.shift)?15:me.shift:i.shift,Je=n(i.bloom)?n(me.bloom)?!1:me.bloom:i.bloom,dt=n(i.whither)?n(me.whither)?!1:me.whither:i.whither,Oe=n(i.open)?n(me.open)?!1:me.open:i.open,je=n(i.expander)?n(me.expander)?"plus":me.expander:i.expander;je=je.toLowerCase(),je=="arrows"&&(je="arrow"),je!="none"&&je!="arrow"&&(je="plus"),Je===!0&&(Je=it=="s"?.01:10),dt===!0&&(dt=it=="s"?.01:10),a(Je),a(dt),at===!0&&(at=15),Me===!0&&(Me=.2),Ne===!0&&(Ne=.1);var gt=n(i.subStyles)?n(me.subStyles)?{}:me.subStyles:i.subStyles;n(i.menu)||(i=i.menu),Ve=Ue.tree=new e.Hierarchy(i),i=Ve.getLinearList(),ut||(p=w="left")}ve&&(o=n(Ve)?i.length:Ve.length,n(Ke)&&(r=o*t/620*100+(o+1)*A+(n(ge)?0:Ye)),Z=0,I=R,k=e.clear,$=!1);var nt=0,ht=0;e.loop(i,function(rt){rt.type=="ListItem"&&(rt.width=t-A*2),De&&(rt.width&&(nt+=rt.width),rt.height&&(ht+=rt.height))}),nt&&(nt+=A*(i.length-1)),ht&&(ht+=A*(i.length-1)),this.align=p,this.valign=v,this.indent=P,n(Pe)||(r=r-Pe.height,Pe.list=Ue,Ue.organizer=Pe,Pe.setButtons(),Ye+=Pe.height),this.zimWindow_constructor(t,r,null,k,q,Z,X,ne,$,re,de,Q,U,g,d,h,j,O,V,ce,!0,H,N,ue,fe,ae,Ie,ge,Be,z,Ye,te,K,xe,_e,Se,ye,!1,null,We,ie,pe,be,oe,Qe,st,yt,Le,e.copy(me)),this.type="List",n(ge)||(this.titleBarLabel.pos(null,Ye-30,null,!0),n(Ye)&&(Ye=30),r=r-Ye),n(Pe)||Pe.addTo(Ue).loc(0,-Pe.height),nt&&De?(Ue.itemWidth=l?t-ue*2-(re?x?0:6:0):nt/i.length,Ue.itemHeight=l?ht/i.length:r-fe*2-(re?x?0:6:0)):(Ue.itemWidth=l?t-ue*2-(re?x?0:6:0):(t-ue*2)/o,Ue.itemHeight=l?(r-fe*2)/o:r-fe*2-(re?x?0:6:0));var xt,Et=e.copy(me);delete Et.borderWidth,delete Et.borderColor;function ft(rt){xt=Ue.tabs=new e.Tabs({width:l?Ue.itemWidth:Ue.itemWidth*i.length,height:l?Ue.itemHeight*i.length:Ue.itemHeight,tabs:rt,spacing:A,vertical:l,backgroundColor:R,rollBackgroundColor:T,downBackgroundColor:L,selectedBackgroundColor:I,selectedRollBackgroundColor:C,color:Y,rollColor:W,downColor:G,selectedColor:F,selectedRollColor:B,backdropColor:k,currentEnabled:!0,currentSelected:c,align:p,valign:v,labelAlign:w,labelValign:b,labelIndent:_,labelIndentH:E,labelIndentV:S,indent:P,useTap:!0,excludeCustomTap:he,keyWrap:!1,keyEnabled:Ge,style:yt,group:Le,inherit:Et}).mov(l?0:ue,l?fe:0),Ue.add(xt),e.loop(xt.labels,function(At){At&&(At.backgroundColor=e.clear)})}ft(e.copy(i,Ae));function Lt(rt,At,mt){rt.listZID=At,rt.label&&(Me&&new e.Rectangle(at*(mt.level+1),rt.height).alp(Me).pos(0,0,Ue.align=="right",!1,rt),Ne&&new e.Rectangle(rt.width,rt.height).alp((mt.level+1)*Ne).addTo(rt).bot().ord(1),at&&Ue.align!="center"&&(rt.label.x+=(Ue.align=="right"?-1:1)*at*(mt.level+1)));var Rt=Ve.getData(At);Rt.obj=rt,Rt.list&&!e.isEmpty(Rt.list)&&(rt.expander=new e.Label({size:je=="arrow"?22:36,text:Rt.open?je=="arrow"?"\u25B2":"-":je=="arrow"?"\u25BC":"+",align:"center",color:e.convertColor(Y,"rgba",.6)}).center(rt).alp(je=="none"?0:.7).pos(15,null,Ue.align!="right").mov(0,Rt.open?-3:0))}function wt(){if(!(!Ue.selected||!Ue.selected.expander)){var rt=Ve.getData(Ue.selected.listZID),At;if(rt.open){Ue.selected.expander&&(Ue.selected.expander.text=je=="arrow"?"\u25BC":"+",Ue.selected.expander.mov(0,3)),rt.open=!1;var mt=Ve.getNextSibling(Ue.selected.listZID),Rt;n(mt)?Rt=Ue.items.length-1:Rt=e.loop(Ue.items,function(Bt,Kt){if(Bt.listZID==mt)return Kt-1}),dt?(At=0,Ue.enabled=!1,e.interval(dt,function(Bt){Ue.removeAt(1,Ue.selectedIndex+Rt-Ue.selectedIndex-At),At++,Bt.total==Bt.count+1&&(Ue.enabled=!0,Ue.dispatchEvent("collapsed"))},Rt-Ue.selectedIndex,!0)):(Ue.removeAt(Rt-Ue.selectedIndex,Ue.selectedIndex+1),Ue.dispatchEvent("collapsed"))}else{rt.open=!0,Ue.selected.expander&&(Ue.selected.expander.text=je=="arrow"?"\u25B2":"-",Ue.selected.expander.mov(0,-3));var Dt=Ve.getLinearList(rt.list),Ht=Ve.getLinearIDs(rt.list),Vt;if(rt.opened)Array.isArray(Dt)&&(Je?(At=0,Ue.enabled=!1,e.interval(Je,function(Bt){Ue.addAt(Dt[At],Ue.selectedIndex+1+At),Vt=new $e.Event("bloom"),Vt.item=Dt[At],Ue.dispatchEvent(Vt),Bt.total==Bt.count+1&&(Ue.enabled=!0,Vt=new $e.Event("expanded"),Vt.items=Dt,Ue.dispatchEvent(Vt)),At++},Dt.length,!0)):(Ue.addAt(Dt,Ue.selectedIndex+1),Vt=new $e.Event("expanded"),Vt.items=Dt,Ue.dispatchEvent(Vt)));else{rt.opened=!0;var Pt=gt[rt.level];n(Pt)&&(Pt={}),Array.isArray(Dt)&&(Je?(At=0,Ue.enabled=!1,e.interval(Je,function(Bt){Ue.addAt(Dt[At],Ue.selectedIndex+1+At,{backgroundColor:Pt.backgroundColor,color:Pt.color,rollBackgroundColor:Pt.rollBackgroundColor,rollColor:Pt.rollColor,selectedBackgroundColor:Pt.selectedBackgroundColor,selectedColor:Pt.selectedColor,selectedRollBackgroundColor:Pt.selectedRollBackgroundColor,selectedRollColor:Pt.selectedRollColor});var Kt=Ht[At],Gt=Ue.items[Ue.selectedIndex+1+At];Pt.borderColor&&(Gt.borderColor=Pt.borderColor),Lt(Gt,Kt,rt),Gt.label&&(Gt.label.backgroundColor=e.clear),Vt=new $e.Event("bloom"),Vt.item=Gt,Ue.dispatchEvent(Vt),Bt.total==Bt.count+1&&(Ue.enabled=!0,Vt=new $e.Event("expanded"),Vt.items=Dt,Ue.dispatchEvent(Vt)),At++,Ue.stage&&Ue.stage.update()},Dt.length,!0)):(Ue.addAt(Dt,Ue.selectedIndex+1,{backgroundColor:Pt.backgroundColor,color:Pt.color,rollBackgroundColor:Pt.rollBackgroundColor,rollColor:Pt.rollColor,selectedBackgroundColor:Pt.selectedBackgroundColor,selectedColor:Pt.selectedColor,selectedRollBackgroundColor:Pt.selectedRollBackgroundColor,selectedRollColor:Pt.selectedRollColor}),e.loop(Ht,function(Bt,Kt){var Gt=Ue.items[Ue.selectedIndex+1+Kt];Lt(Gt,Bt,rt),Gt.label&&(Gt.label.backgroundColor=e.clear)}),Vt=new $e.Event("expanded"),Vt.items=Dt,Ue.dispatchEvent(Vt)))}}}}Ue.expandList=function(rt){return Ue.selectedIndex=rt,Ue.selected&&wt(),Ue.selected};var St;if(Ve){ke&&Ue.added(function(rt){St=rt,Ue.stageToggleEvent=St.on("stagemousedown",function(){var At=St.getObjectUnderPoint(St.frame.mouseX,St.frame.mouseY);if(!(At&&Ue.contains(At))&&!(!Ue.enabled||!Ue.selected)){var mt=Ve.getData(Ue.selected.listZID);mt.open&&wt()}})});var Ft=Ve.getLinearIDs();e.loop(Ft,function(rt,At){Ue.tabs.buttons[At].listZID=rt}),e.loop(Ue.tabs.buttons,function(rt){var At=Ve.getData(rt.listZID);e.isEmpty(At.list)||(rt.expander=new e.Label({size:je=="arrow"?22:36,text:je=="arrow"?"\u25BC":"+",align:"center",color:e.convertColor(Y,"rgba",.6)}).center(rt).alp(je=="none"?0:.7).pos(15,null,Ue.align!="right"))});var Xt=Oe;Ue.toggle=function(rt){if(n(rt))rt=!Xt;else if(rt==Xt)return;Ue.selectedIndex=0,Xt=rt,wt()},Object.defineProperty(Ue,"toggled",{get:function(){return Xt},set:function(rt){Xt!=rt&&Ue.toggle()}}),Ue.tap(wt)}var Ot;xt.tap(function(rt){rt.target.selectedIndex!=Ue.selectedIndex&&(Ue.selectedIndex=xt.selectedIndex,Ue.dispatchEvent("change"),ke&&(Ue.selectedIndex=0),rt.preventDefault())}),xt.on("keychange",function(rt){if(rt.target.selectedIndex!=Ue.selectedIndex){Ue.selectedIndex=xt.selectedIndex;var At;setTimeout(function(){l?(At=Ue.selected.y+Ue.scrollY,(At<0||At>Ue.height-Ue.selected.height)&&Ue.animateTo(Ue.selectedIndex,it=="ms"?100:.1)):(At=Ue.selected.x+Ue.scrollX,(At<0||At>Ue.width-Ue.selected.width)&&Ue.animateTo(Ue.selectedIndex,it=="ms"?100:.1))},100),Ue.dispatchEvent("change")}}),this.getItemIndex=function(rt){return Ue.items.indexOf(rt)},this.animateTo=function(rt,At){n(rt)&&(rt=0),n(At)&&(At=.05);var mt=y(At);Ue.selectedIndex=rt;var Rt=jt(rt),Dt;return l?(Dt=Math.abs(Ue.scrollY-Rt)/Ue.itemHeight,Ue.animate({scrollY:Rt},Dt*At/(mt=="s"?1:1e3))):(Dt=Math.abs(Ue.scrollX-Rt)/Ue.itemWidth,Ue.animate({scrollX:Rt},Dt*At/(mt=="s"?1:1e3))),Ue},this.addAt=function(rt,At,mt,Rt){if(n(rt))return Ue;if(Ue.tabs.loop(function(Ht){Ht.visible=!0}),rt.type=="ListItem"?rt.width=t-A*2:Array.isArray(rt)&&e.loop(rt,function(Ht){Ht.type=="ListItem"&&(Ht.width=t-A*2)}),Rt)if(Array.isArray(rt)){var Dt=[];e.loop(rt,function(Ht){Ht.clone?Dt.push(rt.clone()):Dt.push(e.copy(rt,Rt))}),Ue.tabs.addAt(Dt,At,mt)}else rt.clone?Ue.tabs.addAt(rt.clone(),At,mt):Ue.tabs.addAt(e.copy(rt,Rt),At,mt);else Re&&(Array.isArray(rt)||(rt=[rt]),e.loop(rt,function(Ht,Vt){typeof Ht=="string"&&(rt[Vt]=e.List.checkItem(Ht,null,t,"left",10,10,A,Y,W,F,B,R,T,I,C))})),Ue.tabs.addAt(rt,At,mt);return Ue.update(),Ue},this.removeAt=function(rt,At){Ue.tabs.removeAt(rt,At),Ue.tabs.loop(function(Rt){Rt.visible=!0}),Ot=Ue.tabs.selectedIndex;var mt=xt.getBounds();return xt.setBounds(0,0,mt.width,mt.height),mt.height<r&&(Ue.scrollY=0),Ue.update(),Ue},i[0]=="%-&"&&i.length==1&&Ue.removeAt(1,0),this.clear=function(){return Ue.tabs.removeAt(Ue.length,0),Ue.contentContainer.x=0,Ue.contentContainer.y=0,Ue.update(),Ue},this.setCheck=function(rt,At){n(rt)&&(rt=0),n(At)&&(At=!0),Ue.items[rt].checkBox.checked=At,Ue.items[rt].content.zimOut()},this.getCheck=function(rt){return n(rt)&&(rt=0),Ue.items[rt].checkBox.checked},this.setChecks=function(rt){return e.loop(Ue.items,function(At){At.checkBox.checked=rt,At.content.zimOut()}),Ue},Object.defineProperty(Ue,"items",{get:function(){return Ue.tabs.buttons},set:function(){Ct&&lt("List() - items is read only - use addAt() and removeAt() to change")}}),Object.defineProperty(Ue,"list",{get:function(){return Ue.tabs.buttons},set:function(){Ct&&lt("List() - list is read only - use addAt() and removeAt() to change")}}),Object.defineProperty(Ue,"length",{get:function(){return Ue.tabs.buttons.length},set:function(){Ct&&lt("List() - length is read only")}}),Object.defineProperty(Ue,"selectedIndex",{get:function(){return Ot},set:function(rt){xt.selectedIndex=rt,Ue.label=xt.label,Ue.selected=xt.selected,Ot=rt,!e.OPTIMIZE&&(Mt||!le.OPTIMIZE)&&Ue.stage&&Ue.stage.update()}}),c&&(Ue.selectedIndex=0),Object.defineProperty(Ue,"selectedIndexPlusPosition",{get:function(){return Ot},set:function(rt){Ue.selectedIndex=rt,Ot=rt,l?Ue.scrollY=jt(rt)-2:Ue.scrollX=jt(rt),!e.OPTIMIZE&&(Mt||!le.OPTIMIZE)&&Ue.stage&&Ue.stage.update()}});function jt(rt){if(l){var At=-(Ue.itemHeight+A)*rt+r/2-Ue.itemHeight/2;return(Ue.itemHeight+A)*Ue.length<r&&(At=0),At>0&&(At=0),(Ue.itemHeight+A)*Ue.length>r&&At<-Ue.tabs.height+r-fe*2&&(At=-Ue.tabs.height+r-fe*2),At}else{var mt=-(Ue.itemWidth+A)*rt+t/2-Ue.itemWidth/2;return(Ue.itemWidth+A)*Ue.length<t&&(mt=0),mt>0&&(mt=0),(Ue.itemWidth+A)*Ue.length>t&&mt<-Ue.tabs.width+t-ue*2&&(mt=-Ue.tabs.width+t-ue*2),mt}}Object.defineProperty(Ue,"text",{get:function(){return Ue.label?Ue.label.text:null},set:function(rt){Ue.label&&(Ue.label.text=rt)}}),Object.defineProperty(Ue,"bloom",{get:function(){return Je},set:function(rt){Je=rt}}),Object.defineProperty(Ue,"currentValue",{get:function(){return Ue.label?Ue.label.text:null},set:function(rt){var At=e.loop(Ue.list,function(mt,Rt){var Dt;mt.label&&(Dt=mt.label.text),mt.type=="Label"&&(Dt=mt.text);var Ht=new RegExp(rt,"i");if(Dt&&Dt.match(Ht))return Rt});At!==!0&&(Ue.selectedIndexPlusPosition=At)}}),Object.defineProperty(Ue,"itemDown",{get:function(){return Ue.tabs.buttonDown},set:function(){}}),Object.defineProperty(Ue,"itemsText",{get:function(){for(var rt=[],At=0;At<Ue.tabs.buttons.length;At++){var mt=Ue.tabs.buttons[At].label;mt&&!n(mt.text)?rt.push(mt.text):rt.push(null)}return rt},set:function(){Ct&&lt("List() - itemsText is read only")}}),c&&(Ue.selectedIndex=0),Object.defineProperty(Ue,"checkBoxes",{get:function(){for(var rt=[],At=0;At<Ue.tabs.buttons.length;At++){var mt=Ue.tabs.buttons[At].checkBox;rt.push(mt)}return rt},set:function(){Ct&&lt("List() - checkBoxes is read only")}}),Object.defineProperty(Ue,"accordionIndex",{get:function(){var rt=Ue.selected.listZID;return rt?Number(rt.split("id")[1]):null},set:function(){Ct&&lt("List() - accordionIndex is read only")}}),this.last=function(){return this.selectedIndexPlusPosition=this.length-1,this},this.first=function(){return this.selectedIndexPlusPosition=0,this},this.openAtLevel=function(rt){if(!n(rt)){var At=[];e.loop(rt,function(Rt){At.push(Rt)});var mt=Ue.bloom;Ue.bloom=!1,e.interval(.01,function(Rt){var Dt=Ue.items[Rt.count];Dt?At.indexOf(Ue.tree.getData(Dt.listZID).level)!=-1&&Ue.expandList(Rt.count):(Rt.clear(),Ue.bloom=mt)},null,!0,!1,"s")}};var Zt;this.openAtNum=function(rt){if(!n(rt)){if(!Zt){let Bt=function(Kt,Gt){for(At in Kt)Zt[At]=Gt,Bt(Kt[At].list,At)};var At;Zt={},Bt(Ue.tree.data);var mt={};for(var Rt in Zt){mt[Rt]||(mt[Rt]=[]);for(var Dt=Zt[Rt];Dt;)mt[Rt].unshift(Dt),Dt=Zt[Dt];mt[Rt].push(Rt)}}var Ht="id"+rt,Vt=mt[Ht],Pt=Ue.bloom;Ue.bloom=!1,yi(.01,function(Bt){var Kt=Ue.items[Bt.count];Kt?Vt.indexOf(Kt.listZID)!=-1&&Ue.expandList(Bt.count):(Bt.clear(),Ue.bloom=Pt)},null,!0,!1,"s")}},Oe&&wt&&Ue.openAtLevel(1e4),n(Fe)&&(Fe=me.selectedIndex!=null?me.selectedIndex:0),Ue.selectedIndex=Fe,yt!==!1&&e.styleTransforms(this,me),this.clone=function(){return Ue.cloneProps(new e.List(t,Ze,e.copy(Ue.originalList,!0),o,l,c,p,v,w,b,_,E,S,P,A,R,T,L,I,C,k,Y,W,G,F,B,et,qe,X,e.copy(ne),$,re,de,Q,U,g,d,h,x,j,O,V,ce,H,N,ue,fe,ae,Ie,ge,Be,z,Ye,te,K,xe,_e,Se,ie,pe,be,he,Pe,Re,ve,Ae,ye,Fe,De,ke,oe,Ge,We,Qe,st,yt,this.group,ze))},this.dispose=function(rt,At,mt){return mt||(Ue.stageToggleEvent&&St.off("stagemousedown",Ue.stageToggleEvent),Ue.organizer&&Ue.organizer.dispose(),this.zimWindow_dispose()),!0}},e.extend(e.List,e.Window,["clone","dispose"],"zimWindow",!1),e.List.makeBase=function(t,r,i,o){n(o)&&(o=e.dark),t.backing=new e.Rectangle(t.width,t.height,o).center(t),r.type=="Label"?t.label=r:t.label=new e.Label(r,null,null,e.white),t.text=t.label.text,t.label.center(t).loc(i)},e.List.slider=function(t,r,i,o,l,c,p,v,w,b,_,E,S){var P="label, min, max, val, call, step, obj, property, paddingLeft, paddingRight, factor, offset, backgroundColor",A;if(A=vt(e.List.slider,arguments,P))return A;var R=new e.Container(620,100);return R.type="ListItem",R.listItem="Slider",n(w)&&(w=20),n(b)&&(b=30),n(_)&&(_=1),n(E)&&(E=0),e.List.makeBase(R,t,w,S),R.slider=new e.Slider({inside:!0,barWidth:40,barLength:150,barColor:e.blue,min:r,max:i,step:c}).sca(1.5).center(R).mov(20).change(function(){R.stepper.currentValue=E+Math.round(R.slider.currentValue*_),p&&v&&(p[v]=R.slider.currentValue),l&&typeof l=="function"&&l(R.slider.currentValue,R.parent),R.slider.stage&&R.slider.stage.update()}),n(o)||(R.slider.currentValue=o),R.stepper=new e.Stepper({corner:0,arrows:!1,stepperType:"number",min:E+r*_,max:E+i*_,step:c}).sca(.5).center(R).pos(b,null,!0).change(function(){R.slider.currentValue=R.stepper.currentValue/(_||1)-E,p&&v&&(p[v]=R.slider.currentValue),l&&typeof l=="function"&&l(R.slider.currentValue,R.parent),R.stepper.stage&&R.stepper.stage.update()}),n(o)||(R.stepper.currentValue=E+o*_),R},e.List.checkBox=function(t,r,i,o,l,c,p,v){var w="label, checked, call, obj, property, paddingLeft, paddingRight, backgroundColor",b;if(b=vt(e.List.checkBox,arguments,w))return b;var _=new e.Container(620,100);return _.type="ListItem",_.listItem="CheckBox",n(c)&&(c=20),n(p)&&(p=30),e.List.makeBase(_,t,c,v),_.checkBox=new e.CheckBox({startChecked:r,label:""}).sca(1.2).center(_).pos(256+p,null,!0).change(function(){o&&l&&(o[l]=_.checkBox.checked),i&&typeof i=="function"&&i(_.checkBox.checked,_.parent),_.checkBox.stage&&_.checkBox.stage.update()}),_},e.List.colorPicker=function(t,r,i,o,l,c,p,v,w){var b="label, color, picker, call, obj, property, paddingLeft, paddingRight, backgroundColor",_;if(_=vt(e.List.colorPicker,arguments,b))return _;var E=new e.Container(620,100);return E.type="ListItem",E.listItem="ColorPicker",n(p)&&(p=20),n(v)&&(v=30),e.List.makeBase(E,t,p,w),n(r)&&(r=e.pink),E.colorPicker=i||new e.ColorPicker({alphaPicker:!1,selectedColor:r}),E.swatch=new e.Rectangle(132,66,r,e.lighter,5).center(E).pos(270,null,!0).cur(),E.swatch.on("mousedown",function(){E.colorPicker.selectedColor=E.swatch.color,E.colorPicker.show()}),E.colorLabel=new e.Label(E.swatch.color.toUpperCase(),40,null,e.light).center(E).pos(v,null,!0),E.colorPicker.on("close",function(){var S=E.colorPicker.stage;E.colorPicker.hide(),S&&S.update()}),E.colorPicker.on("change",function(){var S=E.colorPicker.stage;E.swatch.color=E.colorPicker.selectedColor,E.colorLabel.text=E.swatch.color.toUpperCase(),E.colorPicker.hide(),l&&c&&(l[c]=E.colorPicker.selectedColor),o&&typeof o=="function"&&o(E.colorPicker.selectedColor,E.parent),S&&S.update()}),E},e.List.checkItem=function(t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,T){var L="label, size, width, align, paddingH, paddingV, spacing, color, rollColor, selectedColor, selectedRollColor, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, group, inherit",I;if(I=vt(e.List.checkItem,arguments,L))return I;var C=e.getStyle("CheckBox",R,T);n(r)&&(r=C.size!=null?C.size:20);var k=e.getStyle("List",R,T);n(i)&&(i=300),n(l)&&(l=10),n(c)&&(c=10),n(o)&&(o=k.align!=null?k.align:"center"),n(p)&&(p=k.spacing!=null?k.spacing:2),n(E)&&(E=k.backgroundColor!=null?k.backgroundColor:e.tin),n(S)&&(S=k.rollBackgroundColor!=null?k.rollBackgroundColor:e.grey),n(P)&&(P=k.selectedBackgroundColor!=null?k.selectedBackgroundColor:e.charcoal),n(A)&&(A=k.selectedRollBackgroundColor!=null?k.selectedRollBackgroundColor:e.grey),n(v)&&(v=k.color!=null?k.color:e.white),n(w)&&(w=k.rollColor!=null?k.rollColor:v),n(b)&&(b=k.selectedColor!=null?k.selectedColor:v),n(_)&&(_=k.selectedRollColor!=null?k.selectedRollColor:w);var Y=new e.Container;return Y.type="CheckItem",Y.checkBox=new e.CheckBox({size:r,label:t,color:v,tap:!0}),Y.backing=new e.Rectangle(i-p*2,Y.checkBox.height+c*2,E).addTo(Y),Y.checkBox.center(Y),o!="center"&&o!="middle"&&Y.checkBox.pos(l,null,o=="right"),Y.backing.tap(function(){Y.checkBox.toggle(),Y.zimOut()}),Y.checkBox.change(function(){Y.zimOut()}),Y.zimOver=function(){Y.backing.color=Y.checkBox.checked?A:S,Y.checkBox.label.color=Y.checkBox.checked?_:w,Y.stage&&Y.stage.update()},Y.zimOut=function(){Y.backing.color=Y.checkBox.checked?P:E,Y.checkBox.label.color=Y.checkBox.checked?b:v,Y.stage&&Y.stage.update()},Y.backing.on("mouseover",Y.zimOver),Y.checkBox.on("mouseover",Y.zimOver),Y.backing.on("mouseout",Y.zimOut),Y.checkBox.on("mouseout",Y.zimOut),Y},e.Stepper=function(t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,T,L,I,C,k,Y,W,G,F,B,q,Z,X,ne,$,re,de,Q,U,g,d,h){var x="list, width, backgroundColor, borderColor, borderWidth, label, color, vertical, arrows, corner, shadowColor, shadowBlur, continuous, display, press, hold, holdDelay, holdSpeed, draggable, dragSensitivity, dragRange, stepperType, min, max, step, step2, arrows2, arrows2Scale, keyEnabled, keyArrows, rightForward, downForward, selectedIndex, currentValue, arrowColor, style, group, inherit",j;if(j=vt(e.Stepper,arguments,x,this))return j;He("61"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Stepper",this.group=d;var O=g===!1?{}:e.getStyle(this.type,this.group,h);n(t)&&(t=O.list!=null?O.list:[]),n(r)&&(r=O.width!=null?O.width:100),n(i)&&(i=O.backgroundColor!=null?O.backgroundColor:e.white),n(o)&&(o=O.borderColor!=null?O.borderColor:null),n(l)&&(l=O.borderWidth!=null?O.borderWidth:null),o<0||l<0?o=l=null:o!=null&&l==null&&(l=1),n(p)&&(p=O.color!=null?O.color:e.grey),n(c)&&(c=O.label!=null?O.label:""),(typeof c=="string"||typeof c=="number")&&(c=new e.Label({text:c,size:O.size!=null?O.size*2:40,color:p,align:O.align!=null?O.align:"center",valign:O.valign!=null?O.valign:"center",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group}).loc(0,0)),n(v)&&(v=O.vertical!=null?O.vertical:!1),n(w)&&(w=O.arrows!=null?O.arrows:!0),n(b)&&(b=O.corner!=null?O.corner:16),n(_)&&(_=O.shadowColor!=null?O.shadowColor:"rgba(0,0,0,.3)"),n(E)&&(E=O.shadowBlur!=null?O.shadowBlur:14),n(S)&&(S=O.continuous!=null?O.continuous:!1),n(P)&&(P=O.display!=null?O.display:!0),n(A)&&(A=O.press!=null?O.press:!0),n(R)&&(R=O.hold!=null?O.hold:!0);var V=y(T);n(T)&&(T=O.holdDelay!=null?O.holdDelay:V=="s"?.4:400),n(L)&&(L=O.holdSpeed!=null?O.holdSpeed:V=="s"?.2:200),a(L,V),n(I)&&(I=O.draggable!=null?O.draggable:!0),(n(C)||C<=0)&&(C=O.dragSensitivity!=null?O.dragSensitivity:.1),n(k)&&(k=O.dragRange!=null?O.dragRange:200),n(Y)&&(Y=O.stepperType!=null?O.stepperType:t.length>0?"list":"number"),n(W)&&(W=O.min!=null?O.min:0),n(G)&&(G=O.max!=null?O.max:10),n(F)&&(F=O.step!=null?O.step:1),n(B)&&(B=O.step2!=null?O.step2:F),n(q)&&B!=F&&Y=="number"&&(q=O.arrows2!=null?O.arrows2:!0),n(Z)&&(Z=O.arrows2Scale!=null?O.arrows2Scale:.5),n(X)&&(X=O.keyEnabled!=null?O.keyEnabled:!0),n(ne)&&(ne=O.keyArrows!=null?O.keyArrows:!0),n($)&&($=O.rightForward!=null?O.rightForward:!0),n(re)&&(re=O.downForward!=null?O.downForward:Y!="number"),n(U)&&(U=O.arrowColor!=null?O.arrowColor:i);var ce=this,H,N=60,ue=N/4;i=ct(i);var fe=F,ae,Ie=1,ge;if(Y=="number"){if(W=Number(W),G=Number(G),isNaN(W)&&(W=0),isNaN(G)&&(G=100),G<W){Ie=-1;var Be=G;G=W,W=Be,ae=G}else ae=W;this.min=W,this.max=G,0>W&&0<G&&(ae=0),F=Math.abs(F),ge=Math.max(te(F),te(B))}else if(Y=="letter"){t="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),typeof W!="string"&&(W="A"),typeof G!="string"&&(G="Z"),W=W.substr(0,1).toUpperCase(),G=G.substr(0,1).toUpperCase();var z=t.indexOf(W);z<0&&(W="A",z=0);var Ye=t.indexOf(G);Ye<0&&(G="Z",Ye=t.length),Ye<z&&(t.reverse(),z=t.length-1-z,Ye=t.length-1-Ye),t=t.splice(z,Ye-z+1)}else Y="list";function te(et){var qe=String(et).split(".")[1];return qe?qe=qe.length:qe=0,qe}var K,xe=0,_e=0;I&&this.on("mousedown",function(et){ce.zimAccessibility&&ce.zimAccessibility.aria||(this.stage.mouseMoveOutside=!0,xe=et.rawX/e.scaX,_e=et.rawY/e.scaY,K=this.stage.on("stagemousemove",function(qe){xe=qe.rawX/e.scaX,_e=qe.rawY/e.scaY}))},null,!0),this.label=c,c.mouseChildren=!1,c.mouseEnabled=!1;var Se,ie,pe,be,he,Pe,Re,ve,Ae,ye,Fe,De,ke;if(w&&(pe=this.containerPrev=new e.Container({style:!1}),this.addChild(pe),be=this.arrowPrev=new e.Triangle(N,N*.8,N*.8,U,null,null,null,null,null,null,null,!1),_!=-1&&E>0&&(pe.shadow=new $e.Shadow(_,3,3,E)),pe.addChild(be),pe.expand(),pe.cur("pointer"),pe.on("mousedown",function(et){if(!(ce.zimAccessibility&&ce.zimAccessibility.aria)){fe=F;var qe=v?re?1:-1:$?-1:1;st(qe),We(qe,null,null,et.stageX/e.scaX,et.stageY/e.scaY)}}),R&&pe.on("pressup",Qe),v?(pe.rotation=180,pe.x=r/2,P?pe.y=pe.height+ue+N+pe.height/2+ue:pe.y=pe.height*2):(pe.rotation=-90,pe.x=pe.height/2,pe.y=pe.width/2)),P){var oe=this.textBox=new e.Rectangle(r,N,i,o,l,b,null,null,null,!1);oe.cur("pointer"),this.addChild(oe),_!=-1&&E>0&&(oe.shadow=new $e.Shadow(_,3,3,E)),w&&(v?w&&(oe.y=be.height+ue):w&&(oe.x=be.height+ue)),this.addChild(c),t.length>0&&(H=0,c.text=t[H]),c.center(ce);var Ge;oe.on("mousedown",function(et){ce.zimAccessibility&&ce.zimAccessibility.aria||(Ge=ce.currentValue,A&&st(1),We(1,!0,null,et.stageX/e.scaX,et.stageY/e.scaY))}),oe.on("pressup",function(){ce.zimAccessibility&&ce.zimAccessibility.aria})}else t.length>0&&(H=0);w&&(he=this.containerNext=new e.Container({style:!1}),this.addChild(he),Pe=this.arrowNext=new e.Triangle(N,N*.8,N*.8,U,null,null,null,null,null,null,null,!1),_!=-1&&E>0&&(he.shadow=new $e.Shadow(_,3,3,E)),he.addChild(Pe),he.expand(),he.cur("pointer"),he.on("mousedown",function(et){if(!(ce.zimAccessibility&&ce.zimAccessibility.aria)){fe=F;var qe=v?re?-1:1:$?1:-1;st(qe),We(qe,null,null,et.stageX/e.scaX,et.stageY/e.scaY)}}),R&&he.on("pressup",Qe),v?(he.rotation=0,he.x=r/2,he.y=he.getBounds().height/2):(he.rotation=90,P?he.x=oe.x+oe.getBounds().width+he.getBounds().height/2+ue:he.x=pe.x+pe.getBounds().width,he.y=he.getBounds().width/2));function We(et,qe,Ue,Ze,it){if(R){Fe=Ze,De=it,Fe==0&&(Fe=1),De==0&&(De=1),I||(C=1);var Ve=L*(V=="s"?1e3:1),Me=T*(V=="s"?1e3:1),Ne=Ve;ke=new e.Proportion(0,k,Ve,Ve*C),Se=setTimeout(function(){function at(){ie=setTimeout(function(){var Je=et;if(I){var dt=Math.abs(xe-Fe),Oe=Math.abs(_e-De);v?(!qe&&!Ue&&(dt=0),Ue&&(Oe=0)):(!qe&&!Ue&&(Oe=0),Ue&&(dt=0)),(dt>=10||Oe>=10)&&(dt>Oe?(fe=v?B:F,Je=xe-Fe>0?1:-1,$||Je*-1,Ne=ke.convert(Math.abs(Fe-xe))):(fe=v?F:B,Je=_e-De>0?1:-1,(Y=="number"||!re)&&(Je*=-1),Ne=ke.convert(Math.abs(De-_e))))}st(Je),at()},Ne)}at()},Me)}}R&&P&&oe.on("pressup",Qe);function Qe(){ce.zimAccessibility&&ce.zimAccessibility.aria||(clearTimeout(Se),clearTimeout(ie))}q&&(Re=this.prev2=new e.Container({style:!1}),ve=this.arrowPrev2=new e.Triangle(N,N*.8,N*.8,"rgba(0,0,0,.2)",U,2,null,null,null,null,null,!1),Re.addChild(ve),Re.expand(),Re.cur("pointer"),Re.sca(Z),Re.alpha=.5,Re.on("mousedown",function(et){if(!(ce.zimAccessibility&&ce.zimAccessibility.aria)){fe=B;var qe=v?$?-1:1:re?1:-1;st(qe),We(qe,null,!0,et.stageX/e.scaX,et.stageY/e.scaY)}}),R&&Re.on("pressup",Qe),Ae=this.next2=new e.Container({style:!1}),ye=this.arrowNext2=new e.Triangle(N,N*.8,N*.8,"rgba(0,0,0,.2)",U,2,null,null,null,null,null,!1),Ae.addChild(ye),Ae.expand(),Ae.cur("pointer"),Ae.sca(Z),Ae.alpha=.5,Ae.on("mousedown",function(et){if(!(ce.zimAccessibility&&ce.zimAccessibility.aria)){fe=B;var qe=v?$?1:-1:re?-1:1;st(qe),We(qe,null,!0,et.stageX/e.scaX,et.stageY/e.scaY)}}),R&&Ae.on("pressup",Qe),v?(Re.y=this.height/2,Re.x=-Re.width/2-ue*Math.max(.2,Math.min(1,Z)),Re.rotation=270,Ae.y=this.height/2,Ae.x=this.width+Ae.width/2+ue*Math.max(.2,Math.min(1,Z)),Ae.rotation=90):(Ae.x=this.width/2,Ae.y=-Ae.height/2-ue*Math.max(.2,Math.min(1,Z)),Ae.rotation=0,Re.x=this.width/2,Re.y=this.height+Re.height/2+ue*Math.max(.2,Math.min(1,Z)),Re.rotation=180),this.addChild(Re,Ae)),Object.defineProperty(this,"stepperArray",{get:function(){if(Y=="number"){t=[];for(var et=ce.min;et<=ce.max;et+=Math.min(F,B))t.push(Number(e.decimals(et,ge,null,!1)))}return t},set:function(et){t=et;var qe=ce.selectedIndex;ce.selectedIndex=qe}}),Object.defineProperty(this,"min",{get:function(){return W},set:function(et){if(Y=="number"){ce.currentValue<et&&(ce.currentValue=et),W=et;var qe=ce.selectedIndex;ce.selectedIndex=qe}else W=et}}),Object.defineProperty(this,"max",{get:function(){return G},set:function(et){if(Y=="number"){ce.currentValue>et&&(ce.currentValue=et),G=et;var qe=ce.selectedIndex;ce.selectedIndex=qe}else G=et}}),ze(Y=="number"?ae:t[H],Y=="number"?ae:H);function st(et){var qe;if(Y=="number"){ae=Number(ae);var Ue=ae;ae+=Number(fe*et*Ie),ae=e.decimals(ae,ge),S?ae>ce.max?ae=ce.min:ae<ce.min&&(ae=ce.max):(ae>ce.max?(ae=F==1?ce.max:Ue,P&&oe.cur("default")):P&&oe.cur("pointer"),ae<ce.min&&(ae=F==1?ce.min:Ue))}else{if(qe=H+et,S)qe>t.length-1&&(qe=0),qe<0&&(qe=t.length-1);else{if(qe>t.length-1){P&&oe.cur("default");return}else P&&oe.cur("pointer");if(qe<0)return}H=qe}ze(Y=="number"?ae:t[H],Y=="number"?ae:H),ce.currentValue!=Ge&&ce.dispatchEvent("change"),Ge=ce.currentValue}Object.defineProperty(this,"selectedIndex",{get:function(){return Y=="number"?ce.stepperArray.indexOf(ce.currentValue):H},set:function(et){n(et)||(Y=="number"?(H=Math.min(ce.stepperArray.length-1,Math.max(0,et)),ae=ce.stepperArray[H],ze(ae,ae)):(et=Math.min(t.length-1,Math.max(0,et)),H=et,ze(t[H],H)))}}),Object.defineProperty(this,"currentValue",{get:function(){return Y=="number"?Number(ae):t[H]},set:function(et){if(!n(et))if(Y=="number"){if(et=Number(et),ce.max>ce.min){if(et>ce.max||et<ce.min)return}else if(et<ce.max||et>ce.min)return;var qe=ce.stepperArray.indexOf(et);if(qe<0)return;H=qe,ae=Number(ce.stepperArray[H]),ze(ae,ae)}else{if(t.indexOf(et)>-1)et=t.indexOf(et);else return;if(et==ce.selectedIndex)return;H=et,ze(t[H],H)}}}),Object.defineProperty(this,"currentValueEvent",{get:function(){return ce.currentValue},set:function(et){String(et)!=String(ce.currentValue)&&(ce.currentValue=et,ce.dispatchEvent("change"))}}),Object.defineProperty(this,"continuous",{get:function(){return S},set:function(et){S=et,Y=="number"?ze(ae,ae):ze(t[ce.selectedIndex],ce.selectedIndex)}}),this._enabled=!0,Object.defineProperty(ce,"enabled",{get:function(){return ce._enabled},set:function(et){f(ce,et),et?(Y=="number"?ze(ae,ae):ze(t[ce.selectedIndex],ce.selectedIndex),le.addEventListener("keydown",ce.keyDownEvent)):(ot(),Ce(),le.removeEventListener("keydown",ce.keyDownEvent),P&&(c.mouseChildren=!1),P&&(c.mouseEnabled=!1)),he&&!e.OPTIMIZE&&(Mt||!le.OPTIMIZE)&&he.stage?he.stage.update():c&&!e.OPTIMIZE&&(Mt||!le.OPTIMIZE)&&c.stage&&c.stage.update()}}),le.KEYFOCUS!=null&&(e.KEYFOCUS=le.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return e.KEYFOCUS==ce},set:function(){e.KEYFOCUS=ce}}),e.KEYFOCUS||yt(),this.on("mousedown",function(){yt()});function yt(){ce.keyFocus=!0;var et=document.activeElement;et&&et.blur()}function Le(){pe.alpha=1,be.color=U,pe.cur("pointer"),he.alpha=1,Pe.color=U,he.cur("pointer"),S||(Y=="number"?(H==ce.min&&(Ie>0?ot():Ce()),H==ce.max&&(Ie>0?Ce():ot())):(H==0&&(v?Ce():ot()),H==t.length-1&&(v?ot():Ce())))}function ze(et,qe){H=qe,P&&(Y=="number"&&et!=0&&ge>0&&(et=e.decimals(et,ge,!0)),c.text=et,c.center(ce)),w&&Le(),he&&!e.OPTIMIZE&&(Mt||!le.OPTIMIZE)&&he.stage?he.stage.update():c&&!e.OPTIMIZE&&(Mt||!le.OPTIMIZE)&&c.stage&&c.stage.update(),ce.zimAccessibility&&ce.zimAccessibility.changeTitle(ce,null,!0)}function ot(){w&&(pe.alpha=.8,be.color=e.fog,pe.cur("default"))}function Ce(){w&&(he.alpha=.8,Pe.color=e.fog,he.cur("default"))}var me,Ke=!0,ut="";this.on("mousedown",function(){Ke=!0,ut="",!(ce.zimAccessibility&&ce.zimAccessibility.aria)&&(ce.focus=!0,me=!1)}),this.keyDownEvent=function(et){if(ce.stage&&(ce.zimAccessibility&&ce.focus||!ce.zimAccessibility&&ce.keyFocus)){et||(et=event);var qe=et.keyCode;if(ne&&qe>=37&&qe<=40){var Ue=re?40:38,Ze=$?39:37,it=re?38:40,Ve=$?37:39;qe==Ue||qe==Ze?(v&&qe==Ue||!v&&qe==Ze?fe=F:fe=B,st(1)):(qe==it||qe==Ve)&&(v&&qe==it||!v&&qe==Ve?fe=F:fe=B,st(-1))}if(X)if(Y=="number"){var Me=null,Ne=null;if(qe==8){var at=String(ut).split("");at.pop(),Me=at.pop(),ut=at.join("")}if(!et.shiftKey&&qe>=48&&qe<=57?Me=qe-48:qe>=96&&qe<=105?Me=qe-96:qe==190?(ut=String(ut)+".",Ne=!0):qe==173||qe==189?(ce.currentValue=ce.currentValue*-1,ce.currentValue!=Ge&&ce.dispatchEvent("change"),Ge=ce.currentValue,me=!me):qe==46&&(Ke=!0,ut=""),n(Me)&&n(Ne)){Ke=!0,ut="";return}if(n(Me)||(Ke?(Ke=!1,ut=Me):ut=Me=+(ut+""+Me),Me<W||Me>G))return;ce.currentValue=Me,ce.currentValue!=Ge&&ce.dispatchEvent("change"),Ge=ce.currentValue}else Ke=!0,ut="",ce.currentValue=String.fromCharCode(et.keyCode),ce.currentValue!=Ge&&ce.dispatchEvent("change"),Ge=ce.currentValue}},le.addEventListener("keydown",this.keyDownEvent),this.next=function(){st(1)},this.prev=function(){st(-1)},n(de)&&(de=O.selectedIndex!=null?O.selectedIndex:0),ce.selectedIndex=de,n(Q)&&(Q=O.currentValue!=null?O.currentValue:null),n(Q)||(ce.currentValue=Q),g!==!1&&e.styleTransforms(this,O),this.clone=function(){return ce.cloneProps(new e.Stepper(t,r,i,o,l,c.clone(),p,v,w,b,_,E,S,P,A,R,T,L,I,C,k,Y,W,G,F,B,q,Z,X,ne,$,re,de,Q,U,g,this.group,h))},this.dispose=function(et,qe,Ue){return le.removeEventListener("keydown",ce.keyDownEvent),ce.removeAllEventListeners(),ce.stage&&ce.stage.off(K),Ue||this.zimContainer_dispose(!0),pe=this.containerPrev=be=this.arrowPrev=null,he=this.containerNext=Pe=this.arrowNext=null,oe=this.textBox=c=this.label=null,!0}},e["zut"]=function(t){if(!n(t)&&t["key"])e.async("https://zimjs.com/gamdata.php?id="+t["key"]+"&player="+t["player"]+"&score="+t["score"]+"&reverse="+t["info"]["reverse"]+"&total="+t["info"]["total"]+"&allowZero="+t["info"]["allowZero"],t["info"]["type"]);else return!0},e.extend(e.Stepper,e.Container,["clone","dispose"],"zimContainer",!1),e.Slider=function(t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,T,L,I,C,k,Y,W,G,F,B,q,Z,X,ne,$,re,de,Q,U,g){var d="min, max, step, button, barLength, barWidth, barColor, vertical, useTicks, tickColor, tickStep, semiTicks, tickScale, semiTickScale, accentSize, accentOffset, accentColor, accentBackgroundColor, accentDifference, sound, inside, keyArrows, keyArrowsStep, keyArrowsH, keyArrowsV, damp, currentValue, expand, expandVertical, expandBar, expandBarVertical, useLabels, labelMargin, style, group, inherit",h;if(h=vt(e.Slider,arguments,d,this))return h;He("62"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Slider",this.group=U;var x=Q===!1?{}:e.getStyle(this.type,this.group,g);if(n(t)&&(t=x.min!=null?x.min:0),n(r)&&(r=x.max!=null?x.max:10),r-t==0){lt("ZIM Slider range must not be 0");return}n(C)&&(C=x.sound!=null?x.sound:!1),n(i)&&(i=x.step!=null?x.step:0),n(o)&&(o=x.button!=null?x.button:C?"aztec":null),o&&o.type=="Button"&&(o=o.clone()),n(l)&&(l=x.barLength!=null?x.barLength:300),n(c)&&(c=x.barWidth!=null?x.barWidth:3),n(p)&&(p=x.barColor!=null?x.barColor:C?e.lighter:e.granite),n(v)&&(v=x.vertical!=null?x.vertical:!!C),n(w)&&(w=x.useTicks!=null?x.useTicks:!!C),n(_)&&(_=x.tickStep!=null?x.tickStep:i||(w||C?(r-t)/40:0)),n(E)&&(E=x.semiTicks!=null?x.semiTicks:_?3:0),n(b)&&(b=x.tickColor!=null?x.tickColor:C?e.tin:p),n(S)&&(S=x.tickScale!=null?x.tickScale:C?1.25:1),n(P)&&(P=x.semiTickScale!=null?x.semiTickScale:1),n(A)&&(A=x.accentSize!=null?x.accentSize:C?10:0),n(R)&&(R=x.accentOffset!=null?x.accentOffset:C?-(A+c)/2:0),n(T)&&(T=x.accentColor!=null?x.accentColor:e.pink),n(L)&&(L=x.accentBackgroundColor!=null?x.accentBackgroundColor:C?e.blue:e.clear),n(I)&&(I=x.accentDifference!=null?x.accentDifference:-.5),n(k)&&(k=x.inside!=null?x.inside:!1),n(Y)&&(Y=x.keyArrows!=null?x.keyArrows:!0),n(G)&&(G=x.keyArrowsH!=null?x.keyArrowsH:!0),n(F)&&(F=x.keyArrowsV!=null?x.keyArrowsV:!0),n(W)&&(W=x.keyArrowsStep!=null?x.keyArrowsStep:(r-t)/100),n(B)&&(B=x.damp!=null?x.damp:!1),n(q)&&(q=x.currentValue!=null?x.currentValue:!1),n(Z)&&(Z=x.expand!=null?x.expand:e.mobile()?10:null),n(X)&&(X=x.expandVertical!=null?x.expandVertical:Z),n(ne)&&(ne=x.expandBar!=null?x.expandBar:null),n($)&&($=x.expandBarVertical!=null?x.expandBarVertical:Z),n(re)&&(re=x.useLabels!=null?x.useLabels:!1),n(de)&&(de=x.labelMargin!=null?x.labelMargin:20);var j,O=this,V=ce(t,r,i,q);this.veeObj={min:V[0],max:V[1],step:V[2],currentValue:V[3]};function ce(){return arguments}t=e.Pick.choose(t),r=e.Pick.choose(r),i=e.Pick.choose(i);var H=i;q=e.Pick.choose(q);var N;A&&(O.accentBacking=new e.Rectangle(l-.25,A+I,L).addTo(this).rot(v?90:0).mov(v?-R-c/2+I/2:.25,v?0:R+c/2-I/2),N=O.accent=new e.Rectangle(l,A,T).sca(0,1).rot(v?-90:0).mov(v?-R-A-c/2:0,v?l:R+c/2).addTo(this));function ue(){N.sca((O.currentValue-O.min)/Math.abs(O.max-O.min),1)}var fe=!(!n(x.backing)&&x.backing.type!="Pattern");function ae(Ne,at,Je){var dt=new e.Shape(at,Je);return dt.f(Ne).s(x.borderColor!=null?x.borderColor:e.tin).ss(x.borderWidth!=null?x.borderWidth:3).mt(2,0).lt(at+2,Je*.2).lt(at+2,Je*.8).lt(2,Je).cp().centerReg({add:!1}),dt}if(n(o)||typeof o=="string"){var Ie=30,ge=40;v&&(Ie=50,ge=40);var Be;if(o=="pill"||o=="aztec"||o=="circle"||o=="grip"){if(o=="pill")Be={width:v?40:18,height:v?18:40,borderColor:e.tin,borderWidth:3,corner:8};else if(o=="aztec"){Ie=x.width!=null?x.width:Math.max(Ie,ge)*.9,ge=x.height!=null?x.height:Math.min(Ie,ge)*.6;var z=ae(x.backgroundColor!=null?x.backgroundColor:e.lighter,Ie,ge).rot(v?0:-90),Ye=ae(x.rollBackgroundColor!=null?x.rollBackgroundColor:e.white,Ie,ge).rot(v?0:-90);Be={width:Ie,height:ge,backing:z,rollBacking:Ye},x.borderWidth=0,x.borderColor=0}else o=="circle"&&(Ie=x.width!=null?x.width:30,ge=x.height!=null?x.height:30,Be={width:Ie,height:Ie,corner:x.corner!=null?x.corner:Ie/2});O.buttonType=o}var te=x.borderColor!=null?x.borderColor:Be?Be.borderColor:fe?e.granite:null;if(o=new e.Button({width:x.width!=null?x.width:Be?Be.width:Ie,height:x.height!=null?x.height:Be?Be.height:ge,label:"",backgroundColor:x.backgroundColor!=null?x.backgroundColor:e.white,rollBackgroundColor:x.rollBackgroundColor!=null?x.rollBackgroundColor:n(x.backgroundColor)||x.backgroundColor==e.white?e.moon:x.backgroundColor.lighten(.2),borderColor:te,rollBorderColor:x.rollBorderColor!=null?x.rollBorderColor:te,borderWidth:x.borderWidth!=null?x.borderWidth:Be?Be.borderWidth:fe?1:null,corner:x.corner!=null?x.corner:Be?Be.corner:0,backing:x.backing!=null?x.backing.clone():Be?Be.backing:null,rollBacking:x.rollBacking!=null?x.rollBacking.clone():Be?Be.rollBacking:null,shadowColor:x.shadowColor!=null?x.shadowColor:null,shadowBlur:x.shadowBlur!=null?x.shadowBlur:null,hitPadding:30,style:!1}),O.buttonType=="circle")o.scaleY=ge/Ie,v||o.rot(-90);else if(O.buttonType=="grip"){var K=[1,1,1],xe=.4;e.loop(K,function(Ne,at,Je){v?new e.Line(o.width*.62,Ne,o.borderColor?o.borderColor:e.grey).pos(0,o.height*xe/2+(at+1)*(o.height*(1-xe))/(Je+1),e.CENTER,e.TOP,o):new e.Line(o.height*.62,Ne,o.borderColor?o.borderColor:e.grey).rot(90).pos(o.width*xe/2+(at+1)*(o.width*(1-xe))/(Je+1),0,e.LEFT,e.CENTER,o)})}}o.rollPersist=!0,(!n(Z)||!n(X))&&o.expand(Z,X);var _e,Se;v?(_e=o.width,k?(Se=l,this.setBounds(0,0,_e,Se)):(Se=l+o.height,this.setBounds(-o.width/2,-o.height/2,_e,Se))):(Se=Math.max(o.height,c),k?(_e=l,this.setBounds(0,0,_e,Se)):(_e=l+o.width,this.setBounds(-o.width/2,-o.height/2,_e,Se)));var ie=t,pe=0;this.button=o,this.cur("pointer");var be,he,Pe,Re,ve;if(w){Re=this.ticks=new e.Shape({style:!1}),this.addChild(Re),ve=Re.graphics,ve.ss(1).s(b);var Ae=Math.round((r-t)/(_||i)),ye=(r-t)/Ae;_?(ye!=_&&Ct&&lt("Slider() - non-divisible step ("+_+") adjusted to "+ye),_=ye):(ye!=i&&Ct&&lt("Slider() - non-divisible step ("+i+") adjusted to "+ye),i=ye);var Fe;k?Fe=(l-(v?o.height:o.width))/Math.abs(Ae):Fe=l/Math.abs(Ae)}var De,ke,oe,Ge,We,Qe,st;if(v){if(De=k?o.height/2:0,be=this.bar=new e.Rectangle(c,l,p,null,null,null,null,null,null,!1),ne?be.expand(ne,$):be.expand(20,0),be.centerReg(this),o.centerReg(this),Pe=be.getBounds(),he=new $e.Rectangle(be.x,Pe.y+De,0,Pe.height-De*2),w){for(re&&(ke=O.labels=new e.Container().addTo(O)),oe=0;oe<=Math.abs(Ae);oe++)Ge=oe%(E+1)==0,We=Ge?25*S:15*P,Qe=De+Fe*oe,ve.mt(0,Qe).lt(We,Qe),re&&(E&&Ge||!E)&&(st=Math.max(e.countDecimals(H),e.countDecimals(t),e.countDecimals(r)),new e.Label({text:e.decimals(r-(r-t)/Math.abs(Ae)*oe,st+1),size:x.size?x.size:10,align:"left",valign:"center"}).centerReg({add:!1}).reg(0).loc(We+de+2,Qe-1,ke));Re.x=be.x+15}}else if(De=k?o.width/2:0,be=this.bar=new e.Rectangle(l,c,p,null,null,null,null,null,null,!1),ne?be.expand(ne,$):be.expand(0,20),be.centerReg(this),o.centerReg(this),Pe=be.getBounds(),he=new $e.Rectangle(Pe.x+De,be.y,Pe.width-De*2,0),w){for(re&&(ke=O.labels=new e.Container().addTo(O)),oe=0;oe<=Math.abs(Ae);oe++)Ge=oe%(E+1)==0,We=De+Fe*oe,Qe=-(Ge?25*S:15*P),ve.mt(We,0).lt(We,Qe),re&&(E&&Ge||!E)&&(st=Math.max(e.countDecimals(H),e.countDecimals(t),e.countDecimals(r)),new e.Label({text:e.decimals(t+(r-t)/Math.abs(Ae)*oe,st+1),size:x.size?x.size:10,align:"center",valign:"center"}).centerReg({add:!1}).loc(We,Qe-de,ke));Re.y=be.y-10}o.x=he.x,o.y=he.y;function yt(Ne){return i==0?Ne:Math.round(Ne/i)*i}var Le,ze;o.on("mousedown",function(Ne){j=Ne.target.stage,O.focus=!0;var at=O.globalToLocal(Ne.stageX/e.scaX,Ne.stageY/e.scaY);Le=at.x-o.x,ze=at.y-o.y,j&&(j.mouseMoveOutside=!0)}),o.on("pressmove",function(Ne){ot(Ne)});function ot(Ne){var at=O.globalToLocal(Ne.stageX/e.scaX,Ne.stageY/e.scaY),Je=Ke(at.x-Le,at.y-ze,he);v?(o.x=Je.x,ie=yt((Je.y-he.y)/he.height*(t-r)),o.y=he.y+ie*he.height/(t-r),ie+=r,o.y!=pe&&O.dispatchEvent("change"),pe=o.y):(ie=yt((Je.x-he.x)/he.width*(r-t)),o.x=he.x+ie*he.width/(r-t),ie+=t,o.y=Je.y,o.x!=pe&&O.dispatchEvent("change"),pe=o.x),N&&ue(),me(),!e.OPTIMIZE&&(Mt||!le.OPTIMIZE)&&O.stage&&O.stage.update()}function Ce(Ne){return Ne>0?1:-1}function me(){O.zimAccessibility&&O.zimAccessibility.changeTitle(O,null,!0)}function Ke(Ne,at,Je){return Ne=Math.max(Je.x,Math.min(Je.x+Je.width,Ne)),at=Math.max(Je.y,Math.min(Je.y+Je.height,at)),{x:Ne,y:at}}be.on("mousedown",function(Ne){j=Ne.target.stage,Le=0,ze=0,!(O.zimAccessibility&&O.zimAccessibility.aria)&&ot(Ne)});var ut,et;B&&(ut=t,et=new e.Damp(ut,B),O.ticker=e.Ticker.add(function(){ut=et.convert(ie)})),Object.defineProperty(this,"currentValue",{get:function(){return B?ut:ie},set:function(Ne){n(Ne)||(t<r?(Ne<t&&(Ne=t),Ne>r&&(Ne=r)):(Ne>t&&(Ne=t),Ne<r&&(Ne=r)),ie=Ne=yt(Ne),et&&et.immediate(ie),v?(o.y=(Ne-r)/(t-r)*he.height+De,pe=o.y):(o.x=(Ne-t)/(r-t)*he.width+De,pe=o.x),N&&ue(),me(),!e.OPTIMIZE&&(Mt||!le.OPTIMIZE)&&O.stage&&O.stage.update())}}),Object.defineProperty(this,"currentValueEvent",{get:function(){return B?ut:ie},set:function(Ne){Ne!=O.currentValue&&(O.currentValue=Ne,O.dispatchEvent("change"))}}),Object.defineProperty(this,"min",{get:function(){return t},set:function(){Ct&&lt("Slider() - min is read only")}}),Object.defineProperty(this,"max",{get:function(){return r},set:function(){Ct&&lt("Slider() - max is read only")}}),Object.defineProperty(this,"step",{get:function(){return i},set:function(){Ct&&lt("Slider() - step is read only")}}),Object.defineProperty(this,"keyArrowsH",{get:function(){return G},set:function(Ne){G=Ne}}),Object.defineProperty(this,"keyArrowsV",{get:function(){return F},set:function(Ne){F=Ne}}),le.KEYFOCUS!=null&&(e.KEYFOCUS=le.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return e.KEYFOCUS==O},set:function(){e.KEYFOCUS=O}}),Y&&!e.KEYFOCUS&&qe(),this.on("mousedown",function(){Y&&qe()});function qe(){O.keyFocus=!0;var Ne=document.activeElement;Ne&&Ne.blur()}var Ue=!1,Ze=!1,it=!1,Ve=!1;this.keyDownEvent=function(Ne){O.stage&&(O.zimAccessibility&&O.focus||!O.zimAccessibility&&O.keyFocus)&&(Ne.keyCode==37&&G?Ue=!0:Ne.keyCode==40&&F?Ze=!0:Ne.keyCode==39&&G?it=!0:Ne.keyCode==38&&F&&(Ve=!0),O.keyInterval==null&&(Ue||Ze||it||Ve)&&(Me(),O.keyTimeout=setTimeout(function(){O.keyInterval==null&&(Ue||Ze||it||Ve)&&(O.keyInterval=setInterval(Me,40))},140)))};function Me(){(Ue||Ze)&&(i>0?O.currentValueEvent-=i*Ce(r-t):O.currentValueEvent-=W*Ce(r-t)),(it||Ve)&&(i>0?O.currentValueEvent+=i*Ce(r-t):O.currentValueEvent+=W*Ce(r-t))}le.addEventListener("keydown",this.keyDownEvent),O.keyUpEvent=function(Ne){Ne.keyCode==37?Ue=!1:Ne.keyCode==40?Ze=!1:Ne.keyCode==39?it=!1:Ne.keyCode==38&&(Ve=!1),O.keyInterval!=null&&!Ue&&!Ze&&!it&&!Ve&&(clearInterval(O.keyInterval),O.keyInterval=null)},le.addEventListener("keyup",this.keyUpEvent),this._enabled=!0,Object.defineProperty(O,"enabled",{get:function(){return O._enabled},set:function(Ne){f(O,Ne),Ne?(le.addEventListener("keydown",O.keyDownEvent),le.addEventListener("keyup",O.keyUpEvent)):(le.removeEventListener("keydown",O.keyDownEvent),le.removeEventListener("keyup",O.keyUpEvent))}}),n(q)||(O.currentValue=q),e.setSwipe(this,!1),Q!==!1&&e.styleTransforms(this,x),this.clone=function(Ne){return O.cloneProps(new e.Slider(Ne||!e.isPick(V[0])?O.min:V[0],Ne||!e.isPick(V[1])?O.max:V[1],Ne||!e.isPick(V[2])?O.step:V[2],o.clone(),l,c,p,v,w,b,_,E,S,P,A,R,T,L,I,C,k,Y,W,G,F,B,Ne||!e.isPick(V[3])?O.currentValue:V[3],Z,X,ne,$,re,de,Q,this.group,g))},this.dispose=function(Ne,at,Je){return le.removeEventListener("keydown",O.keyDownEvent),le.removeEventListener("keyup",O.keyUpEvent),Je||this.zimContainer_dispose(!0),!0}},e.extend(e.Slider,e.Container,["clone","dispose"],"zimContainer",!1),e.Selector=function(t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,T,L,I){var C="tile, borderColor, borderWidth, backgroundColor, corner, dashed, paddingH, paddingV, speed, diagonal, dim, multi, keyArrows, behind, resizeScale, selectedIndex, style, group, inherit",k;if(k=vt(e.Selector,arguments,C,this))return k;He("62.5"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Selector",this.group=L;var Y=T===!1?{}:e.getStyle(this.type,this.group,I),W=y();n(t)&&(t=Y.tile!=null?Y.tile:new e.Tile(new e.Circle(20,e.red),4,4,10,10)),n(r)&&(r=Y.borderColor!=null?Y.borderColor:e.white),n(i)&&(i=Y.borderWidth!=null?Y.borderWidth:2),n(o)&&(o=Y.backgroundColor!=null?Y.backgroundColor:"rgba(0,0,0,.1)"),n(l)&&(l=Y.corner!=null?Y.corner:10),n(c)&&(c=Y.dashed!=null?Y.dashed:!1),n(p)&&(p=Y.padding!=null?Y.padding:t.spacingH/2),n(v)&&(v=Y.paddingV!=null?Y.paddingV:t.spacingV/2),n(w)&&(w=Y.speed!=null?Y.speed:2),n(b)&&(b=Y.diagonal!=null?Y.diagonal:!1),n(_)&&(_=Y.dim!=null?Y.dim:!1),n(E)&&(E=Y.multi!=null?Y.multi:!1),E&&(w=0),n(S)&&(S=Y.keyArrows!=null?Y.keyArrows:!0),n(P)&&(P=Y.behind!=null?Y.behind:!1),n(A)&&(A=Y.resizeScale!=null?Y.resizeScale:!1),n(R)&&(R=Y.selectedIndex!=null?Y.selectedIndex:null);var G=[],F=[];e.loop(t.items.length,function(){G.push(ct(r)),F.push(ct(o))});var B=this;if(!(n(R)&&E)){var q=R,Z=n(R)||R<0?0:R,X=t.getChildAt(Z);B.currentItem=t.getChildAt(Z),R=q,n(R)&&(R=Y.selectedIndex!=null?Y.selectedIndex:0)}var ne,$,re;ne=X||t.getChildAt(0),ne&&($=ne.width+p*2,re=ne.height+v*2),B.tile=t.addTo(B).cur();var de;if(E){var Q=this.selectors=[];e.loop(10,function(){de=new e.Rectangle($,re,e.faint,e.faint,i,l,c,{ignoreScale:!A}).centerReg(B,P?0:1),de.visible=!1,Q.push(de),de.mouseEnabled=!1}),this.selector=de}else de=this.selector=new e.Rectangle($,re,e.faint,e.faint,i,l,c,{ignoreScale:!A}).centerReg(B),de.loc(t.width/2,ne.y+v,B,P?0:1),de.visible=!1;R<0||n(X)||(de.loc(ne.x+p,ne.y+v,B,P?0:1),de.color=F[R],de.borderColor=G[R],de.visible=!0),t.mov(p,v),this.setBounds(t.width+p*2,t.height+v*2);var U={};this.tileDown=t.on("mousedown",function(h){var x=de;if(!(E&&(x=Q.shift(),n(x)))){x.visible=!0;for(var j=h.target,O=0;j.parent!=t&&O<10;)j=j.parent,O++;if(j.parent==t&&g(j,null,x),E){var V="id"+Math.abs(h.pointerID+1);U[V]={index:R,item:X,selector:x}}}}),E&&(this.tileMove=t.on("pressmove",function(h){var x="id"+Math.abs(h.pointerID+1),j=U[x];if(!n(j)){var O=t.itemUnderPoint(h.stageX/e.scaX,h.stageY/e.scaY);if(j.item!=O){if(B.upItem=j.item,B.upIndex=j.index,B.downItem=j.item=O,B.downIndex=j.index=O?O.tileNum:null,B.dispatchEvent("change"),n(O))j.selector.visible=!1;else{var V=t.localToLocal(O.x,O.y,B);j.selector.loc(V.x,V.y).siz(O.width+p*2,O.height+v*2),j.selector.color=F[j.index],j.selector.borderColor=G[j.index],j.selector.visible=!0}B.stage.update()}}}),this.tileUp=t.on("pressup",function(h){var x="id"+Math.abs(h.pointerID+1),j=U[x];n(j)||(B.downIndex=B.downItem=null,B.upIndex=j.index,B.upItem=j.item,Q.push(j.selector),j.selector.visible=!1,B.dispatchEvent("change"),B.stage&&!e.OPTIMIZE&&(Mt||!le.OPTIMIZE)&&B.stage.update(),delete U[x])})),B.noAnimate=!1;function g(h,x,j){n(j)&&(j=de),X=h,R=h.tileNum,j.color=F[R],j.borderColor=G[R],E&&(B.upItem=B.upIndex=null,B.downItem=X,B.downIndex=R),B.animating=!0;var O=t.localToLocal(h.x,h.y,B),V=Math.abs(O.x-de.x),ce=Math.abs(O.y-de.y),H=B.noAnimate||x?0:w;if(B.noAnimate=!1,H==0)j.loc(O.x,O.y).siz(h.width+p*2,h.height+v*2),B.animating=!1,B.dispatchEvent("change");else if(b||(V+ce)*H<=0?j.animate({x:O.x,y:O.y},(ce+V)*H):(j.stopAnimate(),V>=ce?j.animate([{props:{x:O.x},time:Math.max(W=="s"?.1:100,V*H/(W=="s"?1e3:1))},{props:{y:O.y},time:Math.max(W=="s"?.1:100,ce*H/(W=="s"?1e3:1))}]):j.animate([{props:{y:O.y},time:Math.max(W=="s"?.1:100,ce*H/(W=="s"?1e3:1))},{props:{x:O.x},time:Math.max(W=="s"?.1:100,V*H/(W=="s"?1e3:1))}])),j.animate({props:{widthOnly:h.width+p*2,heightOnly:h.height+v*2},time:Math.max(W=="s"?.2:200,(ce+V)*H/(W=="s"?1e3:1)),call:function(){B.animating=!1,B.dispatchEvent("change")}}),_){if(_===!0)var N=.7;else N=e.constrain(_,0,1);t.animate({props:{alpha:N},rewind:!0,time:(ce+V)*w*.7/(W=="s"?1e3:1)})}t.stage&&t.stage.update()}S&&B.added(function(){B.keyEvent=B.stage.frame.on("keydown",function(h){if(B.stage&&B.enabled&&!B.animating&&(B.zimAccessibility&&B.focus||!B.zimAccessibility&&B.keyFocus)){var x=e.loop(t.items2D,function(ce,H){var N=e.loop(ce,function(ue,fe){if(ue==X)return[fe,H]});if(Array.isArray(N))return N});x===!0&&(x=[0,0]);var j=t.items2D[x[1]].length,O=t.items2D.length,V;h.keyCode=="39"?(V=(x[0]+1)%j,g(t.items2D[x[1]][V],V<x[0])):h.keyCode=="37"?(V=(x[0]-1+j)%j,g(t.items2D[x[1]][V],V>x[0])):h.keyCode=="38"?(V=(x[1]-1+O)%O,g(t.items2D[V][x[0]],V>x[1])):h.keyCode=="40"&&(V=(x[1]+1)%O,g(t.items2D[V][x[0]],V<x[1]))}})}),Object.defineProperty(this,"selectedIndex",{get:function(){return R},set:function(h){n(h)&&(B.currentItem=null),B.currentItem=t.items[Math.round(h)]}}),Object.defineProperty(this,"text",{get:function(){return X.text},set:function(){Ct&&lt("Selector() - text is read only")}}),Object.defineProperty(this,"currentItem",{get:function(){return X},set:function(h){if(n(h)){X=null,R=null,de.visible=!1,B.selectedCol=null,B.selectedRow=null;return}de.visible=!0,B.lastItem=X,B.lastIndex=R,B.lastCol=B.selectedCol,B.lastRow=B.selectedRow,B.selectedCol=h.tileCol,B.selectedRow=h.tileRow,R=h.tileNum,X=h,g(X)}}),this._enabled=!0,Object.defineProperty(B,"enabled",{get:function(){return B._enabled},set:function(h){h?B.mouse():B.noMouse(),B._enabled=h}}),le.KEYFOCUS!=null&&(e.KEYFOCUS=le.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return e.KEYFOCUS==B},set:function(){e.KEYFOCUS=B}}),e.KEYFOCUS||d(),this.on("mousedown",function(){d()});function d(){B.keyFocus=!0;var h=document.activeElement;h&&h.blur()}T!==!1&&e.styleTransforms(this,Y),this.clone=function(h){if(h)for(var x=[],j=0;j<B.tile.items.length;j++)x.push(B.tile.items[j].clone(!0));return B.cloneProps(new e.Selector(h?e.series(x):t.clone?t.clone():t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,this.style,this.group))},this.dispose=function(h,x,j){B.keyEvent&&B.stage&&B.stage.frame.off("keydown",B.keyEvent),t.off(B.tileDown),t.dispose(),E&&(t.off(B.tileMove),t.off(B.tileUp)),j||this.zimContainer_dispose(!0)}},e.extend(e.Selector,e.Container,["clone","dispose"],"zimContainer",!1),e.Dial=function(t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,T,L,I,C,k,Y,W,G,F,B,q,Z,X,ne,$,re,de,Q,U,g,d,h,x,j,O,V){var ce="min, max, step, width, backgroundColor, indicatorColor, indicatorScale, indicatorType, useTicks, innerTicks, tickColor, tickStep, semiTicks, tickScale, semiTickScale, innerCircle, innerScale, innerColor, inner2Color, accentSize, accentOffset, accentColor, accentBackgroundColor, accentDifference, sound, linear, gap, limit, keyArrows, keyArrowsStep, keyArrowsH, keyArrowsV, continuous, continuousMin, continuousMax, damp, currentValue, useLabels, labelMargin, style, group, inherit",H;if(H=vt(e.Dial,arguments,ce,this))return H;He("63"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Dial",this.group=O;var N=j===!1?{}:e.getStyle(this.type,this.group,V);if(n(t)&&(t=N.min!=null?N.min:0),n(r)&&(r=N.max!=null?N.max:10),r-t==0){lt("ZIM Dial range must not be 0");return}n(F)&&(F=N.sound!=null?N.sound:!1),n(i)&&(i=N.step!=null?N.step:F?0:1),n(o)&&(o=N.width!=null?N.width:100),n(l)&&(l=N.backgroundColor!=null?N.backgroundColor:e.granite),n(c)&&(c=N.indicatorColor!=null?N.indicatorColor:F?e.white:e.licorice),n(p)&&(p=N.indicatorScale!=null?N.indicatorScale:1),n(v)&&(v=N.indicatorType!=null?N.indicatorType:F?"aztec":"arrow"),n(w)&&(w=N.useTicks!=null?N.useTicks:i!=0),n(b)&&(b=N.innerTicks!=null?N.innerTicks:!1),n(E)&&(E=N.tickStep!=null?N.tickStep:i||(w?.25:0)),n(S)&&(S=N.semiTicks!=null?N.semiTicks:F?3:0),n(_)&&(_=N.tickColor!=null?N.tickColor:F?e.tin:l),n(P)&&(P=N.tickScale!=null?N.tickScale:F?1.25:1),n(A)&&(A=N.semiTickScale!=null?N.semiTickScale:1.25),n(R)&&(R=N.innerCircle!=null?N.innerCircle:!0),n(L)&&(L=N.innerColor!=null?N.innerColor:F?e.pink:"rgba(0,0,0,.2)"),n(I)&&(I=N.inner2Color!=null?N.inner2Color:F?e.light:"rgba(0,0,0,.1)"),n(T)&&(T=N.innerScale!=null?N.innerScale:F?.4:.5),n(C)&&(C=N.accentSize!=null?N.accentSize:F?o/2*.15:0),n(k)&&(k=N.accentOffset!=null?N.accentOffset:o/2*.45),n(G)&&(G=N.accentDifference!=null?N.accentDifference:-.25),n(Y)&&(Y=N.accentColor!=null?N.accentColor:e.pink),n(W)&&(W=N.accentBackgroundColor!=null?N.accentBackgroundColor:F?e.blue:e.clear),n(q)&&(q=N.gap!=null?N.gap:F?.25:0),n(B)&&(B=N.linear!=null?N.linear:F),q&&(B=!0,de=!1),n(Z)&&(Z=N.limit!=null?N.limit:!0),n(X)&&(X=N.keyArrows!=null?N.keyArrows:!0),n(ne)&&(ne=N.keyArrowsStep!=null?N.keyArrowsStep:(r-t)/100),n($)&&($=N.keyArrowsH!=null?N.keyArrowsH:!0),n(re)&&(re=N.keyArrowsV!=null?N.keyArrowsV:!0),n(de)&&(de=N.continuous!=null?N.continuous:!1),de&&(Z=N.limit!=null?N.limit:!1),n(g)&&(g=N.damp!=null?N.damp:!1),n(d)&&(d=N.currentValue!=null?N.currentValue:!1),n(h)&&(h=N.useLabels!=null?N.useLabels:!1),n(x)&&(x=N.labelMargin!=null?N.labelMargin:10),Z==!1&&(g=null);var ue=this;this.cur("pointer");var fe=ae(t,r,i,d);this.veeObj={min:fe[0],max:fe[1],step:fe[2],currentValue:fe[3]};function ae(){return arguments}t=e.Pick.choose(t),r=e.Pick.choose(r),i=e.Pick.choose(i);var Ie=i;d=e.Pick.choose(d);var ge=o/2,Be=o,z=t,Ye=0,te;if(C){var K=o/2+k+C/2,xe=360*q/2;ue.accentBacking=new e.Shape(-ge,-ge,ge*2,ge*2).addTo(this).s(W).ss(C+G).a(0,0,K,(xe-90)*e.RAD,(360-xe-90)*e.RAD),te=ue.accent=new e.Shape(-ge,-ge,ge*2,ge*2).addTo(this)}function _e(){te.c().s(Y).ss(C),B?te.a(0,0,K,(xe-90)*e.RAD,(De.rotation-xe*2)*e.RAD):te.a(0,0,K,(xe-90)*e.RAD,(De.rotation-90)*e.RAD)}var Se=this.backing=new e.Circle(ge,l,null,null,null,null,null,null,!1);if(C?Se.center(this):this.addChild(Se),R){var ie=this.inner=new e.Circle(ge*T,L,null,null,null,null,null,null,!1);this.addChild(ie);var pe=this.inner2=new e.Circle(ge*(T-.1),I,null,null,null,null,null,null,!1);this.addChild(pe)}F&&(ue.rotation=180);var be=Math.abs(r-t)/(E||i)+(q?1:0),he=i?Math.abs(r-t)/i:0;if(w){var Pe=this.ticks=new e.Container({style:!1});if(this.addChild(Pe),h)var Re=ue.labels=new e.Container(o*2,Be*2).centerReg(ue);for(var ve=0;ve<be;ve++){var Ae=ve%(S+1)==0,ye=new e.Rectangle(1,ge*(Ae?.2*P:.1*A),_,null,null,null,null,null,null,!1);if(ye.regY=ge+(b?T-.05:ye.height+ge*.1),ye.regX=.5,ye.rotation=(360-360*q)/(be-(q?1:0))*ve+360*q/2,Pe.addChild(ye),h&&(S&&Ae||!S)){var Fe=Math.max(e.countDecimals(Ie),e.countDecimals(t),e.countDecimals(r));new e.Label({text:e.decimals(t+(r-t)/Math.abs(he)*ve,Fe+1),size:N.size?N.size:10,align:"center",valign:"center"}).centerReg({add:!1}).loc(0,-x-1,ye).addTo(Re)}}ue.expand(ye.height)}this.setBounds(-ge,-ge,o,o);var De,ke;if(v=="dot"||v=="circle")De=this.indicator=new e.Container({style:!1}),ke=this.indicatorShape=new e.Circle(ge*.19,c,null,null,null,null,null,null,!1),De.addChild(ke),e.sca(De,p),De.regY=ge-De.getBounds().width*p/2-ge*.07;else if(v=="line"||v=="rectangle")De=this.indicator=new e.Container({style:!1}),ke=this.indicatorShape=new e.Rectangle(ge*.1,ge*.3,c,null,null,null,null,null,null,null,null,!1),De.addChild(ke),e.sca(De,p),De.regY=ge-De.getBounds().width*p/2-ge*.07,De.regX=ge*.05;else if(v=="aztec"){De=this.indicator=new e.Container({style:!1});var oe=ge*.05,Ge=ge*.1,We=ge*.42;ke=this.indicatorShape=new e.Shape(-Ge,0,Ge*2,We).f(c).mt(-oe,0).lt(oe,0).lt(Ge,We).lt(-Ge,We).cp(),De.addChild(ke),e.sca(De,p),De.regY=ge-De.getBounds().width*p/2-ge*.04}else De=this.indicator=new e.Container({style:!1}),ke=this.indicatorShape=new e.Triangle(ge*.4,ge*.4,ge*.4,c,null,null,null,null,null,null,null,!1),De.addChild(ke),e.sca(De,p),De.regY=ge-De.getBounds().height*p*(b?.85:.75),b&&(ke.rotation=180);De.regY/=p,this.addChild(De);function Qe(nt){return i==0?nt:Math.round(nt/i)*i}var st,yt,Le,ze,ot=0;if(de)var Ce=0,me=0,Ke=0,ut=!1,et=!1,qe=!0;if(B)this.on("mousedown",function(nt){if(!(ue.zimAccessibility&&ue.zimAccessibility.aria)){var ht=st=De.rotation,xt=ue.parent.globalToLocal(nt.stageX/e.scaX,nt.stageY/e.scaY);Le=ue.on("pressmove",function(Et){var ft=ue.parent.globalToLocal(Et.rawX/e.scaX,Et.rawY/e.scaY);De.rotation=ht=st+(xt.y-ft.y)*100/(this.width||1),Z&&(ht>360-360*q/2||ht<0+360*q/2)&&(ht=e.constrain(ht,360*q/2,360-360*q/2),xt=ue.parent.globalToLocal(Et.rawX/e.scaX,Et.rawY/e.scaY),st=ht),Ve(ht)}),ze=this.on("pressup",function(){ue.off("pressmove",Le),ue.off("pressup",ze)})}});else{var Ue=!0;this.on("mousedown",function(nt){if(!(ue.zimAccessibility&&ue.zimAccessibility.aria)){st=De.rotation;var ht=ue.parent.globalToLocal(nt.stageX/e.scaX,nt.stageY/e.scaY),xt=ht.x-ue.x,Et=ue.y-ht.y;yt=Math.atan2(xt,Et)*180/Math.PI;var ft=new Date().getTime();Le=ue.on("pressmove",function(Lt){if(ut){var wt=ue.parent.globalToLocal(Lt.rawX/e.scaX,Lt.rawY/e.scaY),St=wt.x-ue.x,Ft=ue.y-wt.y;yt=Math.atan2(St,Ft)*180/Math.PI,st=De.rotation}wt=ue.parent.globalToLocal(Lt.rawX/e.scaX,Lt.rawY/e.scaY),St=wt.x-ue.x,Ft=ue.y-wt.y;var Xt=Math.atan2(St,Ft)*180/Math.PI,Ot=st+Xt-yt;Ot=(Ot+360*1e4)%360,Z&&Ue&&(Ot-ot>180&&ue.currentValue!=r?Ot=0:Ot-ot<-180&&(Ot=359)),Ue=!0,Ve(Ot),ot=Ot}),ze=this.on("pressup",function(Lt){ue.currentValue!=ue.min&&ue.currentValue!=ue.max&&(Ue=!1);var wt=new Date().getTime()-ft;if(wt<200){ht=ue.parent.globalToLocal(Lt.rawX/e.scaX,Lt.rawY/e.scaY),xt=ht.x-ue.x,Et=ue.y-ht.y;var St=Math.atan2(xt,Et)*180/Math.PI-ue.rotation;Ve(St)}st=De.rotation,ue.off("pressmove",Le),ue.off("pressup",ze)})}})}function Ze(nt){return nt>0?1:-1}function it(){ue.zimAccessibility&&ue.zimAccessibility.changeTitle(ue,null,!0)}function Ve(nt){if(de){et&&(Ce=nt,et=!1),nt>Ce+180?Ke-=360:nt<Ce-180&&(Ke+=360),me=Ke+nt,qe=!1;var ht=ue.currentValue;return ue.currentValue=Qe(me*(r-t)/360),ht!=ue.currentValue&&ue.dispatchEvent("change"),Ce=nt,qe=!0,te&&_e(),!0}var xt;nt<0&&(nt+=360),nt=nt%360,i!=0?(nt=Math.min(nt,360),xt=Qe((nt-360*q/2)/(360-360*q)*(r-t)),De.rotation=360*q/2+xt*(360-360*q)/(r-t)):(De.rotation=nt,xt=(nt-360*q/2)/(360-360*q)*(r-t)),xt!=Ye&&(Ye=xt,z=xt+t,te&&_e(),ue.dispatchEvent("change"),!e.OPTIMIZE&&(Mt||!le.OPTIMIZE)&&ue.stage&&ue.stage.update()),it()}var Me,Ne;g&&(Me=t,Ne=new e.Damp(Me,g),ue.ticker=e.Ticker.add(function(){Me=Ne.convert(z)})),Object.defineProperty(this,"currentValue",{get:function(){return g?Me:z},set:function(nt){n(nt)||(de?(ut=!1,!n(Q)&&!n(U)?Q<U?(nt<Q&&(nt=Q,ut=!0),nt>U&&(nt=U,ut=!0)):(nt>Q&&(nt=Q,ut=!0),nt<U&&(nt=U,ut=!0)):n(Q)?n(U)||nt>U&&(nt=U,ut=!0):nt<Q&&(nt=Q,ut=!0),qe&&(et=!0,Ke=Math.floor(nt/(r-t))*360)):t<r?(nt<t&&(nt=Z?t:r),nt>r&&(nt=Z?r:t)):(nt>t&&(nt=Z?t:r),nt<r&&(nt=Z?r:t)),z=nt,nt=Qe(nt),g&&g.immediate(z),De.rotation=q*360/2+(nt-t)*(360-q*360)/(r-t),De.rotation=(De.rotation+360*1e4)%360,Ye=nt-t,ot=De.rotation,te&&_e(),it(),!e.OPTIMIZE&&(Mt||!le.OPTIMIZE)&&ue.stage&&ue.stage.update())}}),Object.defineProperty(this,"currentValueEvent",{get:function(){return g?Me:z},set:function(nt){nt!=ue.currentValue&&(ue.currentValue=nt,ue.dispatchEvent("change"))}}),Object.defineProperty(this,"min",{get:function(){return t},set:function(nt){de?t=nt:Ct&&lt("Dial() - min is read only")}}),Object.defineProperty(this,"max",{get:function(){return r},set:function(nt){de?r=nt:Ct&&lt("Dial() - max is read only")}}),Object.defineProperty(this,"continuous",{get:function(){return de},set:function(){Ct&&lt("Dial() - continuous is read only")}}),Object.defineProperty(this,"continuousMin",{get:function(){return Q},set:function(nt){Q=nt,ue.currentValue<Q&&(ue.currentValue=Q)}}),Object.defineProperty(this,"continuousMax",{get:function(){return U},set:function(nt){U=nt,ue.currentValue>U&&(ue.currentValue=U)}}),Object.defineProperty(this,"step",{get:function(){return i},set:function(){Ct&&lt("Dial() - step is read only")}}),Object.defineProperty(this,"keyArrowsH",{get:function(){return $},set:function(nt){$=nt}}),Object.defineProperty(this,"keyArrowsV",{get:function(){return re},set:function(nt){re=nt}}),le.KEYFOCUS!=null&&(e.KEYFOCUS=le.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return e.KEYFOCUS==ue},set:function(){e.KEYFOCUS=ue}}),X&&!e.KEYFOCUS&&at(),this.on("mousedown",function(){X&&at()});function at(){ue.keyFocus=!0;var nt=document.activeElement;nt&&nt.blur()}var Je=!1,dt=!1,Oe=!1,je=!1;this.keyDownEvent=function(nt){ue.stage&&(ue.zimAccessibility&&ue.focus||!ue.zimAccessibility&&ue.keyFocus)&&(nt.keyCode==37&&$?Je=!0:nt.keyCode==40&&re?dt=!0:nt.keyCode==39&&$?Oe=!0:nt.keyCode==38&&re&&(je=!0),ue.keyInterval==null&&(Je||dt||Oe||je)&&(gt(),ue.keyTimeout=setTimeout(function(){ue.keyInterval==null&&(Je||dt||Oe||je)&&(ue.keyInterval=setInterval(gt,40))},140)))};function gt(){(Je||dt)&&(i>0?ue.currentValueEvent-=i*Ze(r-t):ue.currentValueEvent-=ne*Ze(r-t)),(Oe||je)&&(i>0?ue.currentValueEvent+=i*Ze(r-t):ue.currentValueEvent+=ne*Ze(r-t))}le.addEventListener("keydown",this.keyDownEvent),ue.keyUpEvent=function(nt){nt.keyCode==37?Je=!1:nt.keyCode==40?dt=!1:nt.keyCode==39?Oe=!1:nt.keyCode==38&&(je=!1),ue.keyInterval!=null&&!Je&&!dt&&!Oe&&!je&&(clearInterval(ue.keyInterval),ue.keyInterval=null)},le.addEventListener("keyup",this.keyUpEvent),this._enabled=!0,Object.defineProperty(ue,"enabled",{get:function(){return ue._enabled},set:function(nt){nt?(le.addEventListener("keydown",ue.keyDownEvent),le.addEventListener("keyup",ue.keyUpEvent)):(le.removeEventListener("keydown",ue.keyDownEvent),le.removeEventListener("keyup",ue.keyUpEvent)),ue._enabled=nt}}),n(d)&&(d=N.currentValue!=null?N.currentValue:t),ue.currentValue=d,j!==!1&&e.styleTransforms(this,N),this.clone=function(nt){return ue.cloneProps(new e.Dial(nt||!e.isPick(fe[0])?ue.min:fe[0],nt||!e.isPick(fe[1])?ue.max:fe[1],nt||!e.isPick(fe[2])?ue.step:fe[2],o,l,c,p,v,w,b,_,E,S,P,A,R,T,L,I,C,k,Y,W,G,F,B,q,Z,X,ne,$,re,de,Q,U,g,nt||!e.isPick(fe[3])?ue.currentValue:fe[3],h,x,j,this.group,V))},this.dispose=function(nt,ht,xt){return le.removeEventListener("keydown",ue.keyDownEvent),le.removeEventListener("keyup",ue.keyUpEvent),xt||this.zimContainer_dispose(!0),!0}},e.extend(e.Dial,e.Container,["clone","dispose"],"zimContainer",!1),e.Tabs=function(t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,T,L,I,C,k,Y,W,G,F,B,q,Z,X,ne,$,re,de,Q,U,g,d,h,x,j,O,V,ce,H,N,ue,fe,ae,Ie){var ge="width, height, tabs, backgroundColor, rollBackgroundColor, downBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, color, rollColor, downColor, selectedColor, selectedRollColor, vertical, spacing, currentEnabled, currentSelected, corner, base, keyEnabled, gradient, gloss, backing, rollBacking, wait, waitTime, waitBackgroundColor, rollWaitBackgroundColor, waitColor, rollWaitColor, waitModal, waitEnabled, backdropColor, align, valign, labelAlign, labelValign, labelIndent, labelIndentH, labelIndentV, indent, useTap, excludeCustomTap, selectedIndex, styleLabels, keyWrap, style, group, inherit",Be;if(Be=vt(e.Tabs,arguments,ge,this))return Be;He("65");var z=fe===!1?{}:e.getStyle("Tabs",ae,Ie);n(P)&&(P=z.vertical!=null?z.vertical:!1),n(t)&&(t=z.width!=null?z.width:null);var Ye=!n(t);if(n(t)&&(t=P?60:240),n(r)&&(r=z.height!=null?z.height:P?240:60),this.zimContainer_constructor(null,null,null,null,!0),this.type="Tabs",this.group=ae,(n(i)||i.length<=0)&&(i=z.tabs!=null?z.tabs:[1,2,3,4]),n(o)&&(o=z.backgroundColor!=null?z.backgroundColor:e.tin),n(l)&&(l=z.rollBackgroundColor!=null?z.rollBackgroundColor:e.grey),n(c)&&(c=z.downBackgroundColor!=null?z.downBackgroundColor:l),n(p)&&(p=z.selectedBackgroundColor!=null?z.selectedBackgroundColor:e.dark),n(v)&&(v=z.selectedRollBackgroundColor!=null?z.selectedRollBackgroundColor:l),n(w)&&(w=z.color!=null?z.color:e.white),n(b)&&(b=z.rollColor!=null?z.rollColor:w),n(_)&&(_=z.downColor!=null?z.downColor:b),n(E)&&(E=z.selectedColor!=null?z.selectedColor:w),n(S)&&(S=z.selectedRollColor!=null?z.selectedRollColor:b),n(W)&&(W=z.backing!=null?z.backing.clone():null),n(G)&&(G=z.rollBacking!=null?z.rollBacking.clone():null),n(Q)&&(Q=z.align!=null?z.align:"center"),n(U)&&(U=z.valign!=null?z.valign:"center"),n(g)&&(g=z.labelAlign!=null?z.labelAlign:Q),n(d)&&(d=z.labelValign!=null?z.labelValign:U),n(O)&&(O=z.indent!=null?z.indent:10),n(h)&&(h=z.labelIndent!=null?z.labelIndent:O),n(x)&&(x=z.labelIndentH!=null?z.labelIndentH:h),n(j)&&(j=z.labelIndentV!=null?z.labelIndentV:h),n(R)&&(R=z.currentEnabled!=null?z.currentEnabled:!1),n(T)&&(T=z.currentSelected!=null?z.currentSelected:!0),T||(R=!0),n(A)&&(A=z.spacing!=null?z.spacing:1),n(L)&&(L=z.corner!=null?z.corner:0),n(k)&&(k=z.gradient!=null?z.gradient:null),n(Y)&&(Y=z.gloss!=null?z.gloss:null),n(I)&&(I=z.base!=null?z.base:L==0&&!Array.isArray(L)?"none":P?"left":"bottom"),n(C)&&(C=z.keyEnabled!=null?z.keyEnabled:!0),n(V)&&(V=z.useTap!=null?z.useTap:!1),n(ce)&&(ce=z.excludeCustomTap!=null?z.excludeCustomTap:!1),n(de)&&(de=z.backdropColor!=null?z.backdropColor:null),n(N)&&(N=z.styleLabels!=null?z.styleLabels:!1),n(ue)&&(ue=z.keyWrap!=null?z.keyWrap:!0),I!="none"&&L!=0&&!Array.isArray(L))switch(I){case"bottom":L=[L,L,0,0];break;case"left":L=[0,L,L,0];break;case"top":L=[0,0,L,L];break;case"right":L=[L,0,0,L];break}else Array.isArray(L)||(L=[L,L,L,L]);var te=this;this.keyEnabled=C;var K=0,xe=[],_e=[],Se,ie,pe=i.length,be=(t-A*(pe-1))/pe,he=(r-A*(pe-1)-2)/pe;if(!n(de)){var Pe=this.backdrop=new e.Rectangle(t,r,de,null,null,null,null,null,null,!1);this.addChild(Pe)}var Re=!1,ve;function Ae(me){for(var Ke=0;Ke<me.length;Ke++){var ut=me[Ke];if(ut.constructor==={}.constructor){ve&&ve!="TabObject"&&(Re=!0),ve="TabObject",ut.type="TabObject";continue}typeof ut=="string"||typeof ut=="number"||ut.type=="Label"?(me[Ke]={type:"TabObject",label:String(ut!=null)||ut.type=="Label"?ut:"1"},ve&&ve!="TabObject"&&(Re=!0),ve="TabObject"):(ve&&ve=="TabObject"&&(Re=!0),ve="Other")}}Ae(i);for(var ye=0,Fe,De=0,ke=0;ke<i.length;ke++)ie=i[ke],P?Ye&&(ie.width=ie.width?ie.width:t):(n(ie.width)&&De++,ye+=n(ie.width)?be:ie.width);if(!P){if(ye>t-A*(pe-1))for(ke=0;ke<i.length;ke++)ie=i[ke],ie.width=(t-A*(pe-1))/ye*(n(ie.width)?be:ie.width);else if(Math.round(ye)<Math.round(t-A*(pe-1))&&De>0)for(Fe=(pe*be-(ye-De*be))/De,ke=0;ke<i.length;ke++)ie=i[ke],ie.width=n(ie.width)?Fe:ie.width}function oe(me,Ke){for(ke=0;ke<me.length;ke++)ie=me[ke],ie!=""&&ie.type=="TabObject"&&(n(ie.label)&&(ie.label=" "),(typeof ie.label=="string"||typeof ie.label=="number")&&(ie.label=new e.Label({text:ie.label,size:z.size!=null?z.size:P?he/2:r/2,font:z.font!=null?z.font:null,style:N,valign:d,inherit:Ke})))}oe(i,N?z:null);var Ge=0;for(ke=0;ke<i.length;ke++)ie=i[ke],!ie.width&&P&&ie.label.width>Ge&&(Ge=ie.label.width);var We=0;function Qe(me,Ke){var ut=[],et=[];for(ke=0;ke<me.length;ke++){if(ie=me[ke],ie.type=="TabObject"){var qe={color:n(ie.color)?e.Pick.choose(w):ie.color,rollColor:n(ie.rollColor)?e.Pick.choose(b):ie.rollColor,downColor:n(ie.downColor)?e.Pick.choose(_):ie.downColor,selectedColor:n(ie.selectedColor)?e.Pick.choose(E):ie.selectedColor,selectedRollColor:n(ie.selectedRollColor)?e.Pick.choose(S):ie.selectedRollColor,backgroundColor:n(ie.backgroundColor)?e.Pick.choose(o):ie.backgroundColor,rollBackgroundColor:n(ie.rollBackgroundColor)?e.Pick.choose(l):ie.rollBackgroundColor,downBackgroundColor:n(ie.downBackgroundColor)?e.Pick.choose(c):ie.downBackgroundColor,selectedBackgroundColor:n(ie.selectedBackgroundColor)?e.Pick.choose(p):ie.selectedBackgroundColor,selectedRollBackgroundColor:n(ie.selectedRollBackgroundColor)?e.Pick.choose(v):ie.selectedRollBackgroundColor,wait:n(ie.wait)?e.Pick.choose(F):ie.wait};if(Ke)for(var Ue in Ke)n(Ke[Ue])||(qe[Ue]=Ke[Ue]);Se=new e.Button({width:P?n(ie.width)?Ye?t:Ge+he/2+L[0]/2:ie.width:n(ie.width)?be:ie.width,height:P?he:r,label:ie.label,borderColor:z.borderColor!=null?z.borderColor:null,borderWidth:z.borderWidth!=null?z.borderWidth:null,backgroundColor:qe.backgroundColor,rollBackgroundColor:qe.rollBackgroundColor,downBackgroundColor:qe.downBackgroundColor,downColor:qe.downColor,corner:L,shadowColor:-1,gradient:k,gloss:Y,backing:W?W.clone():null,rollBacking:G?G.clone():null,wait:qe.wait,waitTime:n(ie.waitTime)?B:ie.waitTime,waitBackgroundColor:n(ie.waitBackgroundColor)?q:ie.waitBackgroundColor,rollWaitBackgroundColor:n(ie.rollWaitBackgroundColor)?Z:ie.rollWaitBackgroundColor,waitColor:n(ie.waitColor)?X:ie.waitColor,rollWaitColor:n(ie.rollWaitBackgroundColor)?ne:ie.rollWaitColor,waitModal:n(ie.waitModal)?$:ie.waitModal,waitEnabled:n(ie.waitEnabled)?re:ie.waitEnabled,align:g,valign:d,indentH:x,indentV:j,inherit:e.copy(z)}),Se.tabInfo=qe,Se.color=Se.tabInfo.color,Se.rollColor=Se.tabInfo.rollColor,Se.type="TabsButton",Se.content=ie,Se.listIndentReady=!0}else{if(ie.listIndentReady)Se=ie;else{Se=new e.Container,Se.type=ie.type,Se.content=ie;for(var Ze=["text","backing","label","slider","stepper","checkBox","colorPicker","swatch","colorLabel"],it=0;it<Ze.length;it++)ie[Ze[it]]&&(Se[Ze[it]]=ie[Ze[it]])}ie.checkBox&&(Se.checkBox=ie.checkBox),n(Se.tabInfo)&&(Se.tabInfo={}),ce&&(Se.excludeTap=!0),Se.tabInfo.color=n(ie.color)?w:ie.color,Se.tabInfo.backgroundColor=n(ie.backgroundColor)?o:ie.backgroundColor,ie.listIndentReady||(new e.Rectangle(Math.max(ie.width,P?Ye?t:Ge+he/2+L[0]/2:ie.width),Math.max(ie.height,P?he:r),e.clear).addTo(Se).expand(0).cur(),ie.center(Se).cur(),Q=="center"||Q=="middle"||ie.pos(0,null,Q=="right"),U=="center"||U=="middle"||ie.pos(null,0,null,U=="bottom"),Se.listIndentReady=!0)}Se.width>We&&(We=Se.width),V?Se.tap(function(Ve){Le(Ve.currentTarget.znum),te.dispatchEvent("change"),!e.OPTIMIZE&&(Mt||!le.OPTIMIZE)&&te.stage&&te.stage.update()}):Se.zimTabEvent=Se.on((Mt?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",function(Ve){Le(Ve.currentTarget.znum),te.dispatchEvent("change"),!e.OPTIMIZE&&(Mt||!le.OPTIMIZE)&&te.stage&&te.stage.update()}),Se.on("mousedown",function(Ve){te.buttonDown=Ve.currentTarget}),Se.on("pressup",function(Ve){te.buttonDown=null;var Me=Ve.currentTarget.znum;V||e.ACTIONEVENT=="click"?setTimeout(function(){ze(Me)},50):ze(Me)}),et.push(ie.label),ut.push(Se),Se.index=ke}return[ut,et]}var st=Qe(i);_e=st[0],xe=st[1];function yt(){var me=0,Ke=0,ut;for(ke=0;ke<_e.length;ke++)ut=_e[ke],ut.znum=ke,ut.selectedIndex=ke,ut.selectedIndex==K&&T&&(ut.backgroundColor=p,ut.rollBackgroundColor=v,ut.color=E),xe[ke]&&(xe[ke].znum=ke),te.addChild(ut),(!P||Ye)&&(ut.x=(t-ut.width)/2,ut.y=(r-ut.height)/2),P?(ut.y=Ke,Ke=ut.y+ut.height+A,Q=="left"?ut.x=(ut.type=="TabsButton"||ut.type=="ListItem"?0:O)+(ut.regX-(ut.getBounds()?ut.getBounds().x:0))*ut.scaleX:Q=="right"&&(ut.x=(Ye?t:We)-ut.width-(ut.type=="TabsButton"||ut.type=="ListItem"?0:O))):(ut.x=me,me=ut.x+ut.width+A,U=="top"?ut.y=(ut.type=="TabsButton"&&!Re?0:O)+(ut.regY-(ut.getBounds()?ut.getBounds().y:0))*ut.scaleY:U=="bottom"&&(ut.y=r-ut.height-(ut.type=="TabsButton"&&!Re?0:O))),ke==K&&!R?ut.enabled=!1:ut.enabled=!0;n(de)||te.removeChild(Pe),te._bounds=null;var et=te.getBounds(),qe=0,Ue=0;if(!et&&$e.EaselJS.version[0]!=0?te.setBounds():et&&(qe=P&&et.width!=0&&Ye?t:et.width,Ue=P&&et.height!=0?et.height:r,te.setBounds(qe,Ue)),n(de)||(Pe.widthOnly=qe,Pe.heightOnly=Ue,te.addChildAt(Pe,0)),P&&!Ye)for(ke=0;ke<=_e.length;ke++)(Q=="center"||Q=="middle")&&(ut.x=(qe-ut.width)/2)}yt();function Le(me,Ke){if(me!=K){var ut=_e[K];if(ut&&T&&(ut.tabInfo&&n(ut.tabInfo.wait)&&(ut.tabInfo.backgroundColor&&(ut.backgroundColor=ut.tabInfo.backgroundColor),ut.tabInfo.rollBackgroundColor&&(ut.rollBackgroundColor=ut.tabInfo.rollBackgroundColor),ut.tabInfo.color&&ut.label&&(ut.color=ut.tabInfo.color),ut.tabInfo.rollColor&&ut.label&&(ut.rollColor=ut.tabInfo.rollColor)),R||(ut.enabled=!0)),K=me,ut=_e[K],ut){var et=ut.tabInfo;et&&n(ut.tabInfo.wait)&&T&&(et.selectedBackgroundColor&&(ut.backgroundColor=!n(et.downBackgroundColor)&&!Ke?et.downBackgroundColor:et.selectedBackgroundColor),et.selectedRollBackgroundColor&&(ut.rollBackgroundColor=et.selectedRollBackgroundColor),et.selectedColor&&ut.label&&(ut.color=!n(et.downColor)&&!Ke?et.downColor:et.selectedColor),et.selectedRollColor&&ut.label&&(ut.rollColor=et.selectedRollColor)),Ke&&!R&&(ut.enabled=!1)}}}function ze(me){var Ke=_e[me];if(Ke&&T){var ut=Ke.tabInfo;ut&&n(ut.wait)&&(ut.selectedBackgroundColor&&(Ke.backgroundColor=te.selected==Ke?ut.selectedBackgroundColor:ut.backgroundColor),ut.selectedColor&&Ke.label&&(Ke.color=te.selected==Ke?ut.selectedColor:ut.color)),R||(Ke.enabled=!1)}}this.addAt=function(me,Ke,ut){n(Ke)&&(Ke=_e.length),Ke=e.constrain(Ke,0,_e.length),Array.isArray(me)||(me=[me]),Ae(me),oe(me,ut);var et=Qe(me,ut),qe=et[0],Ue=et[1];Ke<=K&&(K+=qe.length);var Ze=[Ke,0].concat(qe);return Array.prototype.splice.apply(_e,Ze),Ze=[Ke,0].concat(Ue),Array.prototype.splice.apply(xe,Ze),yt(),te},this.removeAt=function(me,Ke){if(_e.length==0)return te;for(n(me)&&(me=1),n(Ke)&&(Ke=_e.length-me),Ke=e.constrain(Ke,0,_e.length-me),K>=Ke&&K<=Ke+me&&(K=-1),K>Ke+me&&(K-=me),ke=Ke;ke<Ke+me;ke++)_e[ke].tabInfo&&(_e[ke].tabInfo.backgroundColor&&(_e[ke].backgroundColor=_e[ke].tabInfo.backgroundColor),_e[ke].tabInfo.color&&_e[ke].label&&(_e[ke].color=_e[ke].tabInfo.color)),V?_e[ke].noTap():_e[ke].off((Mt?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",_e[ke].zimTabEvent),_e[ke].removeFrom();return _e.splice(Ke,me),xe.splice(Ke,me),yt(),te},te.keyEvent=function(me){if(!(!te.keyEnabled||!te.keyFocus||te.zimAccessibility)&&me.keyCode==9){var Ke=K;me.shiftKey?Le(--Ke<0?ue?i.length-1:0:Ke):Le(++Ke>i.length-1?ue?0:i.length-1:Ke),te.dispatchEvent("change"),te.dispatchEvent("keychange"),!e.OPTIMIZE&&(Mt||!le.OPTIMIZE)&&te.stage&&te.stage.update(),me.preventDefault()}},le.addEventListener("keydown",te.keyEvent),Object.defineProperty(this,"selected",{get:function(){return _e[K]},set:function(){Ct&&lt("Tabs() - selected is read only - try selectedIndex")}}),Object.defineProperty(this,"selectedIndex",{get:function(){return K},set:function(me){Le(me,!0),!e.OPTIMIZE&&(Mt||!le.OPTIMIZE)&&te.stage&&te.stage.update()}}),this.last=function(){return this.selectedIndex=this.buttons.length-1,this},this.first=function(){return this.selectedIndex=0,this},Object.defineProperty(this,"tabs",{get:function(){return K},set:function(me){Le(Math.min(Math.max(me,0),i.length-1)),!e.OPTIMIZE&&(Mt||!le.OPTIMIZE)&&te.stage&&te.stage.update()}}),Object.defineProperty(this,"color",{get:function(){return te.buttons[0].tabItems?te.buttons[0].tabItems.color:w},set:function(me){if(w=me,te.buttons[0].tabInfo){for(var Ke=0;Ke<te.buttons.length;Ke++)te.buttons[Ke].tabInfo&&(te.buttons[Ke].tabInfo.color=me),(Ke!=K||!T)&&(te.buttons[Ke].color=w);!e.OPTIMIZE&&(Mt||!le.OPTIMIZE)&&te.stage&&te.stage.update()}}}),Object.defineProperty(this,"rollColor",{get:function(){return te.buttons[0].tabItems?te.buttons[0].tabItems.rollColor:b},set:function(me){if(b=me,te.buttons[0].tabInfo){for(var Ke=0;Ke<te.buttons.length;Ke++)te.buttons[Ke].tabInfo&&(te.buttons[Ke].tabInfo.rollColor=me),te.buttons[Ke].rollColor=b,Ke!=K&&te.buttons[Ke].rolled&&(te.buttons[Ke].color=b);!e.OPTIMIZE&&(Mt||!le.OPTIMIZE)&&te.stage&&te.stage.update()}}}),Object.defineProperty(this,"selectedColor",{get:function(){return te.buttons[0].tabItems?te.buttons[0].tabItems.selectedColor:E},set:function(me){if(E=me,te.buttons[0].tabInfo){for(var Ke=0;Ke<te.buttons.length;Ke++)te.buttons[Ke].tabInfo&&(te.buttons[Ke].tabInfo.selectedColor=me),Ke==K&&T&&(te.buttons[Ke].color=E);!e.OPTIMIZE&&(Mt||!le.OPTIMIZE)&&te.stage&&te.stage.update()}}}),Object.defineProperty(this,"selectedRollColor",{get:function(){return te.buttons[0].tabItems?te.buttons[0].tabItems.selectedRollColor:S},set:function(me){if(S=me,te.buttons[0].tabInfo){for(var Ke=0;Ke<te.buttons.length;Ke++)te.buttons[Ke].tabInfo&&(te.buttons[Ke].tabInfo.selectedRollColor=me),Ke==K&&T&&te.buttons[Ke].rolled&&(te.buttons[Ke].color=S);!e.OPTIMIZE&&(Mt||!le.OPTIMIZE)&&te.stage&&te.stage.update()}}}),Object.defineProperty(this,"backgroundColor",{get:function(){return te.buttons[0].tabItems?te.buttons[0].tabItems.backgroundColor:o},set:function(me){if(o=me,te.buttons[0].tabInfo){for(var Ke=0;Ke<te.buttons.length;Ke++)te.buttons[Ke].tabInfo&&(te.buttons[Ke].tabInfo.backgroundColor=me),(Ke!=K||!T)&&(te.buttons[Ke].backgroundColor=o);!e.OPTIMIZE&&(Mt||!le.OPTIMIZE)&&te.stage&&te.stage.update()}}}),Object.defineProperty(this,"rollBackgroundColor",{get:function(){return te.buttons[0].tabItems?te.buttons[0].tabItems.rollBackgroundColor:l},set:function(me){if(l=me,te.buttons[0].tabInfo){for(var Ke=0;Ke<te.buttons.length;Ke++)te.buttons[Ke].tabInfo&&(te.buttons[Ke].tabInfo.rollBackgroundColor=me),te.buttons[Ke].rollBackgroundColor=l,Ke!=K&&te.buttons[Ke].rolled&&(te.buttons[Ke].backgroundColor=l);!e.OPTIMIZE&&(Mt||!le.OPTIMIZE)&&te.stage&&te.stage.update()}}}),Object.defineProperty(this,"selectedBackgroundColor",{get:function(){return te.buttons[0].tabItems?te.buttons[0].tabItems.selectedBackgroundColor:p},set:function(me){if(p=me,te.buttons[0].tabInfo){for(var Ke=0;Ke<te.buttons.length;Ke++)te.buttons[Ke].tabInfo&&(te.buttons[Ke].tabInfo.selectedBackgroundColor=me),Ke==K&&T&&(te.buttons[Ke].backgroundColor=p);!e.OPTIMIZE&&(Mt||!le.OPTIMIZE)&&te.stage&&te.stage.update()}}}),Object.defineProperty(this,"selectedRollBackgroundColor",{get:function(){return te.buttons[0].tabItems?te.buttons[0].tabItems.selectedRollBackgroundColor:v},set:function(me){if(v=me,te.buttons[0].tabInfo){for(var Ke=0;Ke<te.buttons.length;Ke++)te.buttons[Ke].tabInfo&&(te.buttons[Ke].tabInfo.selectedRollBackgroundColor=me),Ke==K&&T&&te.buttons[Ke].rolled&&(te.buttons[Ke].backgroundColor=v);!e.OPTIMIZE&&(Mt||!le.OPTIMIZE)&&te.stage&&te.stage.update()}}}),Object.defineProperty(this,"label",{get:function(){return xe[K]},set:function(){Ct&&lt("Tabs() - selected is read only - try selectedIndex")}}),Object.defineProperty(this,"text",{get:function(){return xe[K]!=null?xe[K].text:void 0},set:function(){Ct&&lt("Tabs() - selected is read only - try selectedIndex")}}),Object.defineProperty(this,"buttons",{get:function(){return _e},set:function(){Ct&&lt("Tabs() - buttons is read only")}}),Object.defineProperty(this,"labels",{get:function(){return xe},set:function(){Ct&&lt("Tabs() - labels is read only")}}),this._enabled=!0,Object.defineProperty(te,"enabled",{get:function(){return te._enabled},set:function(me){f(te,me)}}),le.KEYFOCUS!=null&&(e.KEYFOCUS=le.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return e.KEYFOCUS==te},set:function(){e.KEYFOCUS=te}}),C&&e.KEYFOCUS&&ot(),this.on("mousedown",function(){C&&ot()});function ot(){te.keyFocus=!0;var me=document.activeElement;me&&me.blur()}var Ce=te.getBounds();n(Ce)||Ce.width==0?te.setBounds(0,0,t,r):te.width=t,n(H)&&(H=z.selectedIndex!=null?z.selectedIndex:0),te.selectedIndex=H,fe!==!1&&e.styleTransforms(this,z),this.clone=function(){for(var me=e.copy(i,!0),Ke=0;Ke<me.length;Ke++)me[Ke].label=me[Ke].label.clone();return te.cloneProps(new e.Tabs(t,r,me,o,l,c,p,v,w,b,_,E,S,P,A,R,T,L,I,C,k,Y,W,G,F,B,q,Z,X,ne,$,re,de,Q,U,g,d,h,x,j,O,V,ce,H,N,ue,fe,this.group,Ie))},this.doDispose=function(me,Ke,ut){te.keyEvent&&le.removeEventListener("keydown",te.keyEvent),e.loop(te.buttons,function(et){et.dispose()}),te.keyEvent=null,ut||this.zimContainer_dispose(!0),T=ie=i=xe=Se=_e=st=null}},e.extend(e.Tabs,e.Container,["clone","dispose"],"zimContainer",!1),e.Tabs.prototype.dispose=function(t){return this.doDispose(null,null,t)},e.Pad=function(t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,T,L,I,C,k,Y,W,G,F,B,q,Z,X,ne,$,re,de,Q,U){var g="width, cols, rows, keys, backgroundColor, rollBackgroundColor, downBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, color, rollColor, downColor, selectedColor, selectedRollColor, spacing, currentEnabled, currentSelected, corner, labelColor, gradient, gloss, backing, rollBacking, wait, waitTime, waitBackgroundColor, rollWaitBackgroundColor, waitColor, rollWaitColor, waitModal, waitEnabled, selectedIndex, style, group, inherit",d;if(d=vt(e.Pad,arguments,g,this))return d;He("66"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Pad",this.group=Q;var h=de===!1?{}:e.getStyle(this.type,this.group,U);n(t)&&(t=h.width!=null?h.width:150),n(r)&&(r=h.cols!=null?h.cols:3),n(i)&&(i=h.rows!=null?h.rows:r);var x;if(n(o))if(h.keys!=null)o=h.keys;else for(o=[],x=1;x<=i*r;x++)o.push(x);n(R)&&(R=h.currentEnabled!=null?h.currentEnabled:!0),n(A)&&(A=h.spacing!=null?h.spacing:1);var j=this,O;this.cols=r,this.rows=i;var V=t/r-A,ce=[],H=0,N;for(this.labels=[],this.buttons=[],x=0;x<i;x++){for(var ue=[],fe=0;fe<r;fe++)ue.push(o[H]!=null?o[H]:""),H++;var ae=h.corner!=null?h.corner:L;ae&&!Array.isArray(ae)&&(ae=[ae,ae,ae,ae]),N=ce[x]=new e.Tabs({width:t,height:V,tabs:ue,backgroundColor:h.backgroundColor!=null?h.backgroundColor:l,rollBackgroundColor:h.rollBackgroundColor!=null?h.rollBackgroundColor:c,downBackgroundColor:h.downBackgroundColor!=null?h.downBackgroundColor:p,selectedBackgroundColor:h.selectedBackgroundColor!=null?h.selectedBackgroundColor:v,color:h.color!=null?h.color:b,rollColor:h.rollColor!=null?h.rollColor:_,downColor:h.downColor!=null?h.downColor:E,selectedColor:h.selectedColor!=null?h.selectedColor:S,spacing:h.spacing!=null?h.spacing:A,currentEnabled:h.currentEnabled!=null?h.currentEnabled:R,currentSelected:h.currentSelected!=null?h.currentSelected:T,corner:ae,backing:h.backing!=null?h.backing.clone():Y,rollBacking:h.rollBacking!=null?h.rollBacking.clone():W,base:null,keyEnabled:!1,gradient:h.gradient!=null?h.gradient:C,gloss:h.gloss!=null?h.gloss:k,wait:h.wait!=null?h.wait:G,waitTime:h.waitTime!=null?h.waitTime:F,waitBackgroundColor:h.waitBackgroundColor!=null?h.waitBackgroundColor:B,rollWaitBackgroundColor:h.rollWaitBackgroundColor!=null?h.rollWaitBackgroundColor:q,waitColor:h.waitColor!=null?h.waitColor:Z,rollWaitColor:h.rollWaitColor!=null?h.rollWaitColor:X,waitModal:h.waitModal!=null?h.waitModal:ne,waitEnabled:h.waitEnabled!=null?h.waitEnabled:$,group:Q,style:!1}),this.labels=this.labels.concat(N.labels),this.buttons=this.buttons.concat(N.buttons),this.addChild(N),N.selectedIndex=-1,N.y=(V+A)*x,N.znum=x,N.on("change",Ie)}this.tabs=ce;function Ie(ge){var Be=ge.target;j.selected=Be.selected,j.text=Be.text,j.label=Be.label;for(var z=Be.selectedIndex,Ye=0;Ye<ce.length;Ye++)Be!=ce[Ye]&&(ce[Ye].selectedIndex=-1);O=Be.znum*r+z,j.dispatchEvent("change"),!e.OPTIMIZE&&(Mt||!le.OPTIMIZE)&&j.stage&&j.stage.update()}Object.defineProperty(this,"selectedIndex",{get:function(){return O},set:function(ge){O=ge;for(var Be=0;Be<ce.length;Be++)ce[Be].selectedIndex=-1;var z=Math.floor(O/r);z>=0&&z<j.tabs.length&&(j.tabs[z].selectedIndex=O%r)}}),this._enabled=!0,Object.defineProperty(j,"enabled",{get:function(){return j._enabled},set:function(ge){f(j,ge)}}),n(re)&&(re=h.selectedIndex!=null?h.selectedIndex:0),j.selectedIndex=re,de!==!1&&e.styleTransforms(this,h),this.clone=function(){return j.cloneProps(new e.Pad(t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,T,L,I,C,k,Y,W,G,F,B,q,Z,X,ne,$,re,de,this.group,U))},this.dispose=function(ge,Be,z){e.loop(ce,function(Ye){Ye.dispose()}),this.labels=this.buttons=this.tabs=null,N=ce=j.rowTabs=null,z||this.zimContainer_dispose(!0)}},e.extend(e.Pad,e.Container,["clone","dispose"],"zimContainer",!1),e.NumPad=function(t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,T,L,I,C,k,Y,W){var G="advanced, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, backgroundColor, borderColor, borderWidth, corner, numberCorner, close, closeColor, collapse, collapseColor, collapsed, align, shadowColor, shadowBlur, draggable, boundary, style, group, inherit",F;if(F=vt(e.NumPad,arguments,G,this))return F;He("57.7"),this.group=Y;var B=k===!1?{}:e.getStyle("NumPad",this.group,W);n(t)&&(t=B.advanced!=null?B.advanced:!1);var q=400,Z=t?620:530;n(r)&&(r=B.titleBar!=null?B.titleBar:"NUMPAD"),n(i)&&(i=B.titleBarColor!=null?B.titleBarColor:e.white),n(o)&&(o=B.titleBarBackgroundColor!=null?B.titleBarBackgroundColor:e.grey),n(l)&&(l=B.titleBarHeight!=null?B.titleBarHeight:40),n(c)&&(c=B.backgroundColor!=null?B.backgroundColor:e.darker),n(p)&&(p=B.borderColor!=null?B.borderColor:e.pewter),n(v)&&(v=B.borderWidth!=null?B.borderWidth:null),p<0||v<0?p=v=null:p!=null&&v==null&&(v=1),n(w)&&(w=B.corner!=null?B.corner:15),n(b)&&(b=B.numberCorner!=null?B.numberCorner:30),n(R)&&(R=B.align!=null?B.align:"left"),n(T)&&(T=B.shadowColor!=null?B.shadowColor:"rgba(0,0,0,.3)"),n(L)&&(L=B.shadowBlur!=null?B.shadowBlur:14),n(I)&&(I=B.draggable!=null?B.draggable:!0),n(C)&&(C=B.boundary!=null?B.boundary:null),n(_)&&(_=B.close!=null?B.close:!0),n(E)&&(E=B.closeColor!=null?B.closeColor:n(i)?e.grey:i),Array.isArray(w)||(w=[w,w,w,w]),n(S)&&(S=B.collapse!=null?B.collapse:!0),n(P)&&(P=B.collapseColor!=null?B.collapseColor:n(i)?e.grey:i),n(A)&&(A=B.collapsed!=null?B.collapsed:!1),this.zimPanel_constructor(q,Z,null,r,i,o,l,c,p,v,w,_,E,null,null,null,S,P,A,R,T,L,I,C,k,Y,W),this.type="NumPad";var X=this;function ne(re,de){return n(de)&&(de=mist),{label:re,backgroundColor:de,rollBackgroundColor:white,color:darker,rollColor:darker}}var $=[ne("C",e.red.darken(.1)),ne(new e.Label({text:"\u2423",size:90,shiftV:-24}),e.yellow.darken(.1)),ne(new e.Label({text:"/",size:48,bold:!0,shiftV:3})),ne(new e.Label({text:"*",size:65,shiftV:18})),1,2,3,ne(new e.Label({text:"-",size:60,shiftV:-3})),4,5,6,ne(new e.Label({text:"+",size:55,shiftV:3})),7,8,9,ne(new e.Label({text:"\u232B",size:M=="ios"?60:35}),e.red.darken(.1)),ne(new e.Label({text:",",size:70,shiftV:-3})),ne(new Vr({text:".",size:70,shiftV:-3})),0,ne(new e.Label({text:"\u23CE",size:M=="ios"?40:50,shiftV:5}),e.green.darken(.1))];t&&($.splice(2,0,ne("%",yellow.darken(.1))),$.splice(4,0,ne(new e.Label({text:"^",size:47,shiftV:10}),yellow.darken(.1))),$.splice(4,0,ne(")",yellow.darken(.1))),$.splice(4,0,ne("(",yellow.darken(.1)))),X.pad=new e.Pad({width:380,cols:4,rows:t?6:5,keys:$,spacing:6,currentSelected:!1,backgroundColor:e.grey,rollBackgroundColor:e.tin,selectedBackgroundColor:e.grey,downBackgroundColor:e.green,corner:b}),X.pad.on("mousedown",function(){X.pad.text=="C"?X.key="clear":X.pad.text=="\u2423"?X.key="space":X.pad.text=="\u232B"?X.key="backspace":X.pad.text=="\u23CE"?X.key="enter":X.key=X.pad.text,X.dispatchEvent("pressed")}),X.add(X.pad,null,!0),k!==!1&&e.styleTransforms(this,B),this.clone=function(){return X.cloneProps(new e.NumPad(t,r?r.clone():"",i,o,l,c,p,v,w,b,_,E,S,P,X.collapsed,R,T,L,I,C,k,this.group,W))}},e.extend(e.NumPad,e.Panel,["clone"],"zimPanel",!1),e.DPad=function(t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,T){var L="axis, width, backgroundColor, borderWidth, borderColor, indicatorColor, indicatorPressColor, indicatorScale, indicatorRadius, innerCircle, innerScale, activeRadius, clamp, logo, style, group, inherit",I;if(I=vt(e.DPad,arguments,L,this))return I;He("66.2"),this.zimContainer_constructor(null,null,null,null,!1),this.type="DPad",this.group=R;var C=A===!1?{}:e.getStyle(this.type,this.group,T);n(t)&&(t=C.axis!=null?C.axis:"all"),n(r)&&(r=C.width!=null?C.width:100),n(i)&&(i=C.backgroundColor!=null?C.backgroundColor:e.granite),n(l)&&(l=C.borderColor!=null?C.borderColor:null),n(o)&&(o=C.borderWidth!=null?C.borderWidth:null),l<0||o<0?l=o=null:l!=null&&o==null&&(o=1),n(c)&&(c=C.indicatorColor!=null?C.indicatorColor:e.moon),n(p)&&(p=C.indicatorPressColor!=null?C.indicatorPressColor:e.lighter),n(v)&&(v=C.indicatorScale!=null?C.indicatorScale:1),n(w)&&(w=C.indicatorRadius!=null?C.indicatorRadius:null),n(b)&&(b=C.innerCircle!=null?C.innerCircle:!0),n(_)&&(_=C.innerScale!=null?C.innerScale:.5),n(E)&&(E=C.activeRadius!=null?C.activeRadius:r),n(S)&&(S=C.clamp!=null?C.clamp:!0),n(P)&&(P=C.logo!=null?C.logo:!1);var k=this;this.axis=t,this.outer=new e.Circle(r/2,i,l,o).addTo(this);var Y=this.inner=new e.Circle(r*_/2,"rgba(0,0,0,.2)").center(this);P&&(this.logo=new e.Label({text:"D",bold:!0}).center(Y).mov(1,2).alp(.3));var W=new e.Container().addTo(this),G=(r-o)*.2*v,F=8;t=="vertical"?F=2:t=="horizontal"?(F=2,W.rotation=90):t=="both"&&(F=4),e.loop(F,function(re,de){new e.Triangle(G,G,G,c).addTo(W).reg(null,n(w)?(r-o)*.475:w).rot(re*360/de)});var B=0,q=0,Z;k.dirX=0,k.dirY=0;var X,ne=!0;this.on("mousedown",function(re){X=re,W.loop(function(de){de.color=p}),ne?k.ticker=e.Ticker.add(function(){$()}):e.Ticker.add(k.ticker)}),this.on("pressmove",function(re){X=re}),this.on("pressup",function(){e.Ticker.remove(k.ticker),k.dirX=k.dirY=0,W.loop(function(re){re.color=c}),k.stage&&k.stage.update()});function $(){var re=X;B=re.stageX/e.scaX,q=re.stageY/e.scaY,Z=k.globalToLocal(B,q),re=new $e.Event("change"),re.dirX=((Z.x+E)/(E*2)-.5)*2,re.dirY=((Z.y+E)/(E*2)-.5)*2,S&&(re.dirX=e.constrain(re.dirX,-1,1),re.dirY=e.constrain(re.dirY,-1,1)),k.dirX=re.dirX,k.dirY=re.dirY,k.dispatchEvent(re)}this._enabled=!0,Object.defineProperty(k,"enabled",{get:function(){return k._enabled},set:function(re){f(k,re)}}),e.styleTransforms(this,C),this.clone=function(){return k.cloneProps(new e.DPad(t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,this.group,T))},this.dispose=function(re,de,Q){return this.ticker&&e.Ticker.remove(this.ticker),Q||this.zimContainer_dispose(!0),!0}},e.extend(e.DPad,e.Container,["clone","dispose"],"zimContainer",!1),e.Radial=function(t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,T,L,I,C,k,Y,W,G,F,B,q,Z,X,ne,$,re,de,Q,U,g,d,h){var x="labels, size, font, height, coreRadius, coreColor, startAngle, totalAngle, angles, flip, shiftRadial, icons, rollIcons, rotateIcons, iconsShiftRadial, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, backdropColor, color, rollColor, selectedColor, selectedRollColor, borderColor, borderWidth, gradient, gap, gapAsAngle, spacing, spacingInner, spacingOuter, currentEnabled, currentSelected, selectedIndex, style, group, inherit",j;if(j=vt(e.Radial,arguments,x,this))return j;He("66.4"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Radial",this.group=d;var O=g===!1?{}:e.getStyle(this.type,this.group,h);n(t)&&(t=O.labels!=null?O.labels:["A","B","C","D","E"]),n(r)&&(r=O.size!=null?O.size:30),n(i)&&(i=O.font!=null?O.font:"verdana"),n(p)&&(p=O.startAngle!=null?O.startAngle:null),n(v)&&(v=O.totalAngle!=null?O.totalAngle:360),n(w)&&(w=O.angles!=null?O.angles:null),n(b)&&(b=O.flip!=null?O.flip:!0),n(_)&&(_=O.shiftRadial!=null?O.shiftRadial:0),n(E)&&(E=O.icons!=null?O.icons:null),n(S)&&(S=O.rollIcons!=null?O.rollIcons:null),n(P)&&(P=O.rotateIcons!=null?O.rotateIcons:!1),n(A)&&(A=O.iconsShiftRadial!=null?O.iconsShiftRadial:0),n(o)&&(o=O.height!=null?O.height:60),n(l)&&(l=O.coreRadius!=null?O.coreRadius:100),n(c)&&(c=O.coreColor!=null?O.coreColor:e.dark),n(C)&&(C=O.backdropColor!=null?O.backdropColor:e.clear),n(R)&&(R=O.backgroundColor!=null?O.backgroundColor:e.granite),n(T)&&(T=O.rollBackgroundColor!=null?O.rollBackgroundColor:e.tin),n(L)&&(L=O.selectedBackgroundColor!=null?O.selectedBackgroundColor:e.charcoal),n(I)&&(I=O.selectedRollBackgroundColor!=null?O.selectedRollBackgroundColor:L),n(k)&&(k=O.color!=null?O.color:e.white),n(Y)&&(Y=O.rollColor!=null?O.rollColor:k),n(W)&&(W=O.selectedColor!=null?O.selectedColor:k),n(G)&&(G=O.selectedRollColor!=null?O.selectedRollColor:Y),n(F)&&(F=O.borderColor!=null?O.borderColor:e.dark),n(B)&&(B=O.borderWidth!=null?O.borderWidth:2),n(X)&&(X=O.gapAsAngle!=null?O.gapAsAngle:!1),n(Z)&&(Z=O.gap!=null?O.gap:X?3:6),n(q)&&(q=O.gradient!=null?O.gradient:null),q===!0&&(q=.1),n(ne)&&(ne=O.spacing!=null?O.spacing:6),n($)&&($=O.spacingInner!=null?O.spacingInner:ne),n(re)&&(re=O.spacingOuter!=null?O.spacingOuter:ne),n(de)&&(de=O.currentEnabled!=null?O.currentEnabled:!1),n(Q)&&(Q=O.currentSelected!=null?O.currentSelected:!0);var V=this,ce=this.innerRadius=l+$,H=this.outerRadius=ce+o;this.setBounds(-H,-H,H*2,H*2);var N=this.backdrop=new e.Circle(H+re,C).center(this);if(l>0&&(this.core=new e.Circle(l,c).center(this)),w&&w.length<t.length-1)return Ct&&lt("Radial() - not enough angles provided"),this;if(t&&t.length>0||E&&E.length>0){var ue;if(t&&t.length>0&&(ue=t.length),E&&E.length>0&&(ue>0?ue=Math.min(E.length,ue):ue=E.length),S&&S.length<ue)for(var fe=0;fe<ue-S.length;fe++)S.push(new e.Circle(1,e.clear));var ae=N.width,Ie=this.buttons=new e.Container(-ae/2,-ae/2,ae,ae).centerReg(this),ge=Z;X||(Z=Z/H*180/Math.PI,ge=ge/ce*180/Math.PI);for(var Be=(v-Z*ue+(v==360?0:Z))/ue,z=p||0,Ye=0;Ye<ue;Ye++){w&&(Be=w[Ye]);var te=new e.Shape(-ae/2,-ae/2,ae,ae).centerReg(Ie);te.num=Ye,te.zimSelected=!1,te.angle=Be;var K=te.graphics;te.backgroundColor=e.Pick.choose(R),te.rollBackgroundColor=e.Pick.choose(T),te.selectedBackgroundColor=e.Pick.choose(L),te.selectedRollBackgroundColor=e.Pick.choose(I),te.color=e.Pick.choose(k),te.rollColor=e.Pick.choose(Y),te.selectedColor=e.Pick.choose(W),te.selectedRollColor=e.Pick.choose(G),te.colorCommand=K.f(te.backgroundColor).command,(n(B)||B>0)&&(!n(F)||!n(B))&&(n(F)&&(F=e.black),te.borderColorCommand=K.s(F).command,te.borderWidthCommand=K.ss(B).command);var xe=(z-90-Be/2)*Math.PI/180,_e=(z-90+Be/2)*Math.PI/180,Se=(z-90+(Be+Z-ge)/2)*Math.PI/180,ie=(z-90-(Be+Z-ge)/2)*Math.PI/180;if(K.arc(0,0,H,xe,_e,!1),K.arc(0,0,ce,Se,ie,!0).cp(),q&&(K.s().ss().rf(["rgba(0,0,0,"+q+")","rgba(255,255,255,"+q+")"],[0,1],0,0,ce,0,0,H),K.arc(0,0,H,xe,_e,!1),K.arc(0,0,ce,Se,ie,!0).cp()),te.cur("pointer"),te.zimOverEvent=te.on("mouseover",function(Ae){var ye=Ae.target;ye.colorCommand.style=ye==V.selected&&Q?ye.selectedRollBackgroundColor:ye.rollBackgroundColor,ye.label&&(ye.label.color=ye==V.selected&&Q?ye.selectedRollColor:ye.rollColor),S&&(ye.holder.removeAllChildren(),S[ye.num].loc(1,0,ye.holder)),V.stage&&V.stage.update()}),te.zimOutEvent=te.on("mouseout",function(Ae){var ye=Ae.target;ye.colorCommand.style=ye==V.selected&&Q?ye.selectedBackgroundColor:ye.backgroundColor,ye.label&&(ye.label.color=ye==V.selected&&Q?ye.selectedColor:ye.color),S&&(ye.holder.removeAllChildren(),E&&E[ye.num].loc(1,0,ye.holder)),V.stage&&V.stage.update()}),te.zimDownEvent=te.on((Mt?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",function(Ae){var ye=Ae.target,Fe=ye!==V.selected;V.lastSelected=V.selected,ve=ye.num,Q?Fe?(V.selected&&(V.selected.colorCommand.style=V.selected.backgroundColor,V.selected.label&&(V.selected.label.color=V.selected.color)),V.selected=ye,V.label=ye.label,V.label&&(V.text=V.label.text),V.icon=ye.icon,ye.colorCommand.style=ye.selectedRollBackgroundColor,ye.label&&(ye.label.color=ye.selectedRollColor)):de||(ve=-1,V.selected=null,V.label=null,V.text=null,V.icon=null,ye.colorCommand.style=ye.rollBackgroundColor,ye.label&&(ye.label.color=ye.rollColor)):(V.selected=ye,V.label=ye.label,V.label&&(V.text=V.label.text),V.icon=ye.icon),V.dispatchEvent("change"),!e.OPTIMIZE&&(Mt||!le.OPTIMIZE)&&V.stage&&V.stage.update()}),E&&E.length>0){var pe=ce+o/2+A,be=te.holder=new e.Container(3,pe).addTo(this).reg(1,pe).rot(z);be.mouseChildren=!1,be.mouseEnabled=!1,te.icon=E[Ye],E[Ye].loc(1,0,be),P||(E[Ye].rotation=-z)}if(t&&t.length>0){var he;if(t[Ye].type!="LabelOnArc"){var Pe=t[Ye].type=="Label"?t[Ye]:new e.Label({text:t[Ye],size:r,font:i,color:k,style:g,inherit:h});he=new e.LabelOnArc({label:Pe,color:k,size:r,spacing:-5,flip:b&&z>90&&z<270,radius:ce+(o-Pe.height)/2+2+_,style:g,inherit:h})}else he=t[Ye];t[Ye]=he,te.label=he,he.center(this).rot(z),he.mouseChildren=!1,he.mouseEnabled=!1}if(Ye!=t.length-1){var Re=w?w[Ye+1]:Be;z+=(Be+Re)/2+Z}}n(p)||(V.rotation+=V.buttons.getChildAt(0).angle/2)}var ve=null;Object.defineProperty(this,"selectedIndex",{get:function(){return ve},set:function(Ae){var ye;V.buttons&&(ye=V.buttons.getChildAt(Ae)),ye!==V.selected&&(V.selected&&(V.selected.colorCommand.style=V.selected.backgroundColor,V.selected.label&&(V.selected.label.color=V.selected.color)),V.selected=ye,ye&&(Q&&(ye.colorCommand.style=ye.selectedRollBackgroundColor),ye.label&&(Q&&(ye.label.color=ye.selectedColor),V.text=ye.label.text))),!e.OPTIMIZE&&(Mt||!le.OPTIMIZE)&&V.stage&&V.stage.update()}}),n(U)&&(U=O.selectedIndex!=null?O.selectedIndex:0),V.selectedIndex=U,e.styleTransforms(this,O),this.clone=function(){return V.cloneProps(new e.Radial(t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,T,L,I,C,k,Y,W,G,F,B,q,Z,X,ne,$,re,de,Q,U,g,this.group,h))}},e.extend(e.Radial,e.Container,"clone","zimContainer",!1),e.RadialMenu=function(t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,T,L,I,C,k,Y,W,G,F,B,q,Z,X,ne,$,re,de,Q,U,g,d,h){var x="menu, size, font, height, coreRadius, coreColor, title, titleIcon, startAngle, totalAngle, flip, shiftRadial, rotateIcons, iconsShiftRadial, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, backdropColor, color, rollColor, selectedColor, selectedRollColor, borderColor, borderWidth, gradient, gap, gapAsAngle, spacing, spacingInner, spacingOuter, currentEnabled, currentSelected, open, under, style, group, inherit",j=x.split(", "),O=!1;if(t&&t.constructor==={}.constructor){for(var V in t)if(j.indexOf(V)>=0){O=!0;break}}if(t&&O){var ce;if(ce=vt(e.RadialMenu,arguments,x,this))return ce}He("66.6"),this.zimContainer_constructor(null,null,null,null,!1),this.type="RadialMenu",this.group=d;var H=g===!1?{}:e.getStyle(this.type,this.group,h);n(t)&&(t=H.menu!=null?H.menu:{A:{A1:["AA1","AA2","AA3","AA4"],A2:[],A3:[]},B:["B1","B2","B3","B4","B5","B6"],C:[]}),n(r)&&(r=H.size!=null?H.size:30),n(i)&&(i=H.font!=null?H.font:"verdana"),n(w)&&(w=H.startAngle!=null?H.startAngle:null),n(b)&&(b=H.totalAngle!=null?H.totalAngle:360),n(_)&&(_=H.flip!=null?H.flip:!0),n(S)&&(S=H.rotateIcons!=null?H.rotateIcons:!1),n(E)&&(E=H.shiftRadial!=null?H.shiftRadial:0),n(P)&&(P=H.iconsShiftRadial!=null?H.iconsShiftRadial:0),n(o)&&(o=H.height!=null?H.height:60),n(l)&&(l=H.coreRadius!=null?H.coreRadius:100),n(c)&&(c=H.coreColor!=null?H.coreColor:e.dark),n(p)&&(p=H.title!=null?H.title:"MENU"),n(v)&&(v=H.titleIcon!=null?H.titleIcon:null),n(I)&&(I=H.backdropColor!=null?H.backdropColor:e.clear),n(A)&&(A=H.backgroundColor!=null?H.backgroundColor:e.granite),n(R)&&(R=H.rollBackgroundColor!=null?H.rollBackgroundColor:e.tin),n(T)&&(T=H.selectedBackgroundColor!=null?H.selectedBackgroundColor:e.charcoal),n(L)&&(L=H.selectedRollBackgroundColor!=null?H.selectedRollBackgroundColor:T),n(C)&&(C=H.color!=null?H.color:e.white),n(k)&&(k=H.rollColor!=null?H.rollColor:C),n(Y)&&(Y=H.selectedColor!=null?H.selectedColor:C),n(W)&&(W=H.selectedRollColor!=null?H.selectedRollColor:k),n(G)&&(G=H.borderColor!=null?H.borderColor:e.dark),n(F)&&(F=H.borderWidth!=null?H.borderWidth:2),n(Z)&&(Z=H.gapAsAngle!=null?H.gapAsAngle:!1),n(q)&&(q=H.gap!=null?H.gap:Z?3:6),n(X)&&(X=H.spacing!=null?H.spacing:6),n(B)&&(B=H.gradient!=null?H.gradient:null),B===!0&&(B=.1),n(ne)&&(ne=H.spacingInner!=null?H.spacingInner:X),n($)&&($=H.spacingOuter!=null?H.spacingOuter:X),n(re)&&(re=H.currentEnabled!=null?H.currentEnabled:!1),n(de)&&(de=H.currentSelected!=null?H.currentSelected:!0),n(Q)&&(Q=H.open!=null?H.open:!1),n(U)&&(U=H.under!=null?H.under:!0);var N=this,ue=(Mt?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",fe=null,ae=this.core=new e.Circle({radius:l,color:c,style:g,inherit:h}).addTo(this);v&&(this.titleIcon=v.center(ae)),p&&(this.title=new e.Label({text:p,size:r,font:i,color:C,style:g,inherit:h}).center(ae)),ae.cur("pointer"),ae.on(ue,function(){N.leafNode=!1,z.length==0?Ye():(e.loop(z,function(K){K.selectedIndex=-1,K.removeFrom(),z=[]}),N.outerLevel=0,N.selected=N.outerMenu=N.selectedMenu=N.text=null),(re||N.selected!=fe)&&N.dispatchEvent("change"),fe=N.selected,N.stage&&N.stage.update()}),this.closeRings=function(K){n(K)&&(K=N.outerLevel);var xe=N.outerLevel-K;e.loop(z,function(_e,Se){Se>xe-1&&(_e.removeFrom(),_e.selectedIndex=-1,z.pop())},!0),N.outerLevel=xe,N.outerMenu=z[z.length-1],N.outerMenu&&(N.outerMenu.selectedIndex=-1),N.selected=N.selectedMenu=N.text=null,z[z.length-2]?(N.selectedMenu=z[z.length-2],N.selectedIndex=N.selectedMenu.selectedIndex):N.selectedIndex=-1,N.selected!=fe&&N.dispatchEvent("change"),fe=N.selected,N.stage&&N.stage.update()};var Ie={},ge,Be;N.outerLevel=0,t.constructor=={}.constructor&&(t={core:t},ge=N.tree=new e.Hierarchy(t),Be=ge.getLinearIDs()),N.lastRadial=null;var z=this.radials=[];Q&&Ye();function Ye(K){var xe,_e;K?xe=K.ringLevel:(xe=0,_e=l),e.loop(z,function(pe,be){be>xe-1&&(pe.removeFrom(),pe.selectedIndex=-1,z.pop())},!0);var Se;if(K&&(Se=K.selected),Se){var ie=Se.id;_e=K.outerRadius,te(ie,xe+1,_e)}else K||te("id0",xe+1,_e);N.selected=Se,N.selected?(N.selectedMenu=z[N.selected.menu.ringLevel-1],N.selectedIndex=N.selected.num,N.selected.label?N.text=N.selected.label.text:N.text=null):re&&K?(N.selectedIndex=K.selectedIndex,N.label=K.label,N.text=K.text,N.icon=K.icon,N.selectedMenu=K):(N.text=null,N.selectedIndex=-1,N.selectedMenu=null),N.stage&&N.stage.update()}function te(K,xe,_e){xe&&(N.outerLevel=xe);var Se;if(!Ie[K]){var ie=ge.getData(K),pe=ie.list;if(pe&&!e.isEmpty(pe)){var be={labels:ge.getLinearList(pe),coreRadius:_e,size:r,font:i,startAngle:w,totalAngle:b,flip:_,rotateIcons:S,shiftRadial:E,iconsShiftRadial:P,height:o,coreColor:e.clear,backdropColor:I,backgroundColor:A,rollBackgroundColor:R,selectedBackgroundColor:T,selectedRollBackgroundColor:L,color:C,rollColor:k,selectedColor:Y,selectedRollColor:W,borderColor:G,borderWidth:F,gapAsAngle:Z,gap:q,gradient:B,spacingInner:ne,spacingOuter:$,currentSelected:de,currentEnabled:re,style:g,inherit:h};ie.styles&&(be=e.merge(be,ie.styles)),Se=Ie[K]=new e.Radial(be),Be=ge.getLinearIDs(pe),Se.buttons.loop(function(he,Pe){he.menu=Se,he.id=Be[Pe]}),Se.ringLevel=N.outerLevel,Se.selectedIndex=-1,Se.on("change",function(he){N.leafNode=!1,Ye(he.target),(re||N.selected!=fe)&&N.dispatchEvent("change"),fe=N.selected})}}Ie[K]?(z.push(Ie[K]),Ie[K].center(N),U&&Ie[K].bot()):(N.leafNode=!0,N.outerLevel-=1),N.outerMenu=Se}e.styleTransforms(this,H),this.clone=function(){return N.cloneProps(new e.RadialMenu(t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,T,L,I,C,k,Y,W,G,F,B,q,Z,X,ne,$,re,de,Q,U,g,this.group,h))}},e.extend(e.RadialMenu,e.Container,"clone","zimContainer",!1),e.ColorPicker=function(t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,T,L,I,C,k,Y,W,G,F,B,q,Z,X){var ne="width, colors, cols, spacing, greyPicker, alphaPicker, startBackgroundColor, draggable, shadowColor, shadowBlur, buttonBar, circles, indicator, backgroundColor, keyArrows, container, selectedIndex, selectedColor, dropperTarget, spectrumCollapse, spectrumMode, spectrumClose, spectrumOk, spectrumTitle, tolerancePicker, collapsed, style, group, inherit",$;if($=vt(e.ColorPicker,arguments,ne,this))return $;He("67"),this.zimContainer_constructor(null,null,null,null,!1),this.type="ColorPicker",this.group=Z;var re=q===!1?{}:e.getStyle(this.type,this.group,X),de;n(t)&&(t=re.width!=null?re.width:500),n(r)&&(r=re.colors!=null?re.colors:"spectrum"),r=="legacy"&&(de=!0),n(i)&&(i=re.cols!=null?re.cols:10),n(o)&&(o=re.spacing!=null?re.spacing:2);var Q=!de&&r.length>0&&r.length<=i;r=="spectrum"&&(i=10,o=2,Q=!1),n(c)&&(c=re.alphaPicker!=null?re.alphaPicker:!Q),n(F)&&(F=re.tolerancePicker!=null?re.tolerancePicker:!1),F&&(c=!1),n(l)&&(l=re.greyPicker!=null?re.greyPicker:!Q),n(w)&&(w=re.shadowColor!=null?re.shadowColor:"rgba(0,0,0,.3)"),n(b)&&(b=re.shadowBlur!=null?re.shadowBlur:14),n(_)&&(_=re.buttonBar!=null?re.buttonBar:!Q),n(v)&&(_||r=="spectrum"?v=re.draggable!=null?re.draggable:!0:v=re.draggable!=null?re.draggable:!1),n(E)&&(E=re.circles!=null?re.circles:!1),n(S)&&(S=re.indicator!=null?re.indicator:!1,_||(S=re.indicator!=null?re.indicator:!0)),n(P)&&(P=re.backgroundColor!=null?re.backgroundColor:e.black),n(p)&&(p=re.startBackgroundColor!=null?re.startBackgroundColor:null),n(A)&&(A=re.keyArrows!=null?re.keyArrows:!0),n(I)&&(I=re.dropperTarget!=null?re.dropperTarget:!1),n(C)&&(C=re.spectrumCollapse!=null?re.spectrumCollapse:!0),n(k)&&(k=re.spectrumMode!=null?re.spectrumMode:!0),n(Y)&&(Y=re.spectrumClose!=null?re.spectrumClose:!0),n(W)&&(W=re.spectrumOk!=null?re.spectrumOk:!0),n(G)&&(G=re.spectrumTitle!=null?re.spectrumTitle:null),n(B)&&(B=re.collapsed!=null?re.collapsed:!1);var U=this;if(n(R))if(le.zdf)R=le.zdf.stage;else return;else if(R.getBounds){if(n(R.getStage))return}else return;U.container=R;var g="#e472c4",d="#50c4b7",h=1,x=1,j=new e.Shape;this.addChild(j),j.x+=o,j.y+=o,de=!1;var O,V,ce=[],H,N,ue,fe,ae,Ie=r=="spectrum";if(n(r)||r=="legacy"||r=="spectrum"){de=!0;var ge=6,Be=ge*ge*ge;ge=Math.ceil(Math.pow(Be,1/2)),V=(t-o)/18-o,ae=Math.floor(Math.pow(ge*ge,1/3)),O=[];for(var z=0;z<6;z++)for(var Ye=0;Ye<6;Ye++)for(var te=0;te<6;te++)O.push("#"+pe(z*3)+pe(Ye*3)+pe(te*3));for(r=[],z=0;z<O.length;z++)H=Math.floor(z/6),N=z%6,H>=6*3?ae=1:ae=0,ue=H-ae*6*3,fe=N+ae*6,r[fe*18+ue]=O[z];i=18,ce=[d,g]}else V=(t-o)/i-o;var K=Math.ceil(r.length/i),xe=1,_e=String(r[r.length-1]);if(!n(p)){var Se=p.match(/rgba\((.*)\)/);Se&&(H=Se[1].split(","),xe=H.pop(),p="rgb("+H.join(",")+")"),_e=String(p)}var ie;de&&(ie=d);function pe(bt){return bt=Math.floor(bt).toString(16),bt+""+bt}ae=0;var be=j.graphics,he,Pe,Re=re.borderColor!=null?re.borderColor:null,ve=re.borderWidth!=null?re.borderWidth:null;!n(Re)&&n(ve)&&(ve=1),ve&&n(Re)&&(Re=e.dark),ve&&be.s(Re).ss(ve);var Ae=r.length;for(Ie&&(Ae=56),z=0;z<Ae;z++)H=z%i,N=Math.floor(z/i),he=H*(V+o),Pe=N*(V+o),E?be.f(r[z]).dc(he+V/2,Pe+V/2,V/2):be.f(r[z]).r(he,Pe,V,V);var ye=Pe+V+o;U.colors=r;var Fe=ye;if(l){for(z=0;z<16;z++)ce.push("#"+pe(z)+pe(z)+pe(z));for(z=0;z<ce.length;z++)H=Math.floor(z/i),N=z%i,he=N*(V+o),Pe=H*(V+o)+ye,E?be.f(ce[z]).dc(he+V/2,Pe+V/2,V/2):be.f(ce[z]).r(he,Pe,V,V);ye=Pe+V+o;var De=i,ke=Math.ceil(ce.length/i)}U.greys=ce,S&&!Ie&&(S=this.indicator=E?new e.Circle(V/2*.5,null,null,null,null,null,null,null,!1):new e.Rectangle(V*.5,V*.5,null,null,null,null,null,null,null,!1),S.alpha=.5,S.centerReg(),this.addChild(S),S.mouseEnabled=!1,oe(r.indexOf(_e)));function oe(bt){if(n(bt)||bt<0){S.visible=!1;return}else S.visible=!0;_e=="#000"||_e=="#000000"||_e=="black"?(S.color="#222",S.alpha=1):(S.color="black",S.alpha=.5),S.x=j.x+bt%i*(V+o)+V/2,S.y=j.x+Math.floor(bt/i)*(V+o)+V/2}var Ge=10,We=ye;if(c||F){var Qe=new e.Container({style:!1});Qe.setBounds(0,0,600,70),this.addChild(Qe),Qe.x=0,Qe.y=ye;var st=this.alphaBacking=new e.Rectangle(600-Ge*2,50,e.licorice,null,null,0,null,null,null,!1);Qe.addChild(st),e.centerReg(st,Qe);var yt=this.alphaBut=new e.Button({width:20,height:30,backgroundColor:"darkorange",rollBackgroundColor:"orange",label:"",corner:0,hitPadding:20,style:!1}),Le=this.alphaSlider=new e.Slider({min:0,max:1,step:F?0:.05,button:yt,barLength:F?500*.55:600*.55,barWidth:2,barColor:e.silver,vertical:!1,useTicks:!1,inside:!1,style:!1});Le.currentValue=n(xe)?1:xe,F&&(Le.currentValue=.1),Qe.addChild(Le),Le.x=40,Le.y=Qe.height/2;var ze=this.alphaText=new e.Label({text:F?"Tolerance: 0.1":"Alpha: "+e.decimals(xe),size:30,color:"orange",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",backgroundColor:"ignore",rollColor:"orange",group:this.group});Qe.addChild(ze),ze.x=Le.x+Le.bar.width+40,ze.y=Qe.height/2-ze.height/2,Qe.scaleX=Qe.scaleY=t/600,Le.on("change",function(){ze.text=F?"Tolerance: "+un(Le.currentValue):"Alpha: "+un(Le.currentValue),c&&qe&&(qe.alpha=x=Le.currentValue),U.dispatchEvent("change"),U.stage&&U.stage.update()}),ye+=Qe.height-Ge,F&&(U.toleranceBacking=U.alphaBacking,U.toleranceBut=U.alphaBut,U.toleranceSlider=U.alphaSlider,U.alphaBacking=U.alphaBut=U.alphaSlider=null)}if(_){var ot=new e.Container({style:!1});ot.setBounds(0,0,600,100),this.addChild(ot),ot.x=0,ot.y=ye+Ge;var Ce=this.swatchText=new e.TextInput({align:"left",selectionAlpha:.5,text:_e.toUpperCase(),width:140,size:30,color:"orange",shadowColor:"ignore",shadowBlur:"ignore",backgroundColor:"ignore",group:this.group});if(Ce.on("input",function(){(Ce.text.length==4||Ce.text.length==7)&&(qe.color=Ce.text,_e=qe.color)}),ot.addChild(Ce),e.centerReg(Ce),Ce.x=200/2-10,Ce.y=50-2,v){var me=this.grip=new e.Shape({style:!1});me.cur("pointer"),ot.addChild(me),me.graphics.f("rgba(256,256,256,.25)").r(0,0,5,20).r(10,0,5,20).r(20,0,5,20).r(30,0,5,20),me.x=70,me.y=65,Ce.y=50-10,me.mouseEnabled=!1}var Ke=this.closeBut=new e.Button({width:90,height:90,label:"X",backgroundColor:e.licorice,rollBackgroundColor:e.charcoal,corner:0,style:!1});ot.addChild(Ke),Ke.x=600-Ke.width-Ge,Ke.y=0,Ke.on((Mt?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){U.hide(),U.dispatchEvent("close")});var ut=this.okBut=new e.Button({width:150,height:90,label:"OK",backgroundColor:e.licorice,rollBackgroundColor:e.charcoal,corner:0,style:!1});ot.addChild(ut),ut.x=Ke.x-ut.width-Ge,ut.y=0,ut.on((Mt?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){Rt(),U.dispatchEvent("ok")});var et=this.swatchBacking=new e.Shape({style:!1});ot.addChild(et),be=et.graphics,be.f(e.black).r(.5,.5,50,89).f(e.granite).r(50,.5,50,89).f(e.white).r(100,.5,49.5,89),et.x=ut.x-150-Ge,et.y=0;var qe=this.swatch=new e.Rectangle(150,90,_e,null,null,null,null,null,null,!1);ot.addChild(qe),qe.x=et.x,qe.y=0,qe.on((Mt?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){U.dispatchEvent("swatch")}),qe.cur("pointer"),qe.alpha=x=xe,ot.scaleX=ot.scaleY=t/600,ye+=ot.height}else j.cur("pointer");!c&&!_&&(ye-=Ge-o);var Ue=ye+Ge;this.setBounds(0,0,t,Ue);var Ze=this.background=new e.Rectangle(t,Ue,P,null,null,null,null,null,null,!1);this.addChildAt(Ze,0),w!=-1&&b>0&&(Ze.shadow=new $e.Shadow(w,8,8,b));var _t=le.zdf,it,Ve=!1;if(this.dropperTarget=I,Ie){r="spectrum";var Me=30,Ne=20,at=We-Me+1,Je=at-Ne+1,dt=U.bar=new e.Rectangle(U.width,Me+1,e.black).addTo(U);G&&(U.title=new e.Label(G,18,null,e.light).pos(12,1,LEFT,CENTER,U.bar).noMouse()),v&&dt.cur();var Oe=new e.Container(U.width,at).loc(0,Me,U),je=new e.Rectangle(U.width,Je,new e.GradientColor(["rgb(255 0 0)","rgb(255 255 0)","rgb(0 255 0)","rgb(0 255 255)","rgb(0 0 255)","rgb(255 0 255)","rgb(255 0 0)"],[0,1/6,2/6,3/6,4/6,5/6,6/6],0,0,500,0)).addTo(Oe).mov(0,Ne-1);new e.Rectangle(U.width,Je/2,new e.GradientColor(["rgba(255,255,255,1)","rgba(255,255,255,0)"],[0,1],0,0,0,Je/2)).loc(je,null,Oe),new e.Rectangle(U.width,Je/2+.5,new e.GradientColor(["rgba(0,0,0,1)","rgba(0,0,00,0)"],[1,0],0,0,0,Je/2+.5)).loc(je,null,Oe).mov(0,Je/2),new e.Rectangle(U.width,20,new e.GradientColor(["black","white"],[.1,.9],0,0,U.width,0)).addTo(Oe);var gt=U.gradient=new e.Bitmap(Oe).loc(Oe,null,U).cur("none"),nt=U.pixels=new e.Pixel(Oe,.5).loc(Oe,null,U).vis(!1).cur("none");Oe.dispose();var ht;!_&&Y&&(ht=U.closeIcon=new e.Shape(-40,-40,80,80,null,!1),ht.graphics.f(e.light).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg"),ht.sca(.25).expand(10,10,10,1).pos(7,0,e.RIGHT,e.CENTER,dt).cur().addTo(U),ht.on((Mt?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){U.hide(),U.dispatchEvent("close")}));var xt=U.collapseIcon=new e.Triangle(20,20,20,e.faint,e.light,2).expand(10,10,10,1).pos(40+(ht?30:0),0,e.RIGHT,e.CENTER,dt).cur().addTo(U);xt.on("mousedown",function(){U.collapse(xt.rotation==0)});var Et=new e.Rectangle(20,20,e.white).reg("center");new e.Tile(new e.Rectangle(10,10,e.series(e.silver,e.white,e.white,e.silver)),2,2,0,0).addTo(Et),Et.mouseChildren=!1;var ft=U.modeIcon=new e.Button({width:20,height:20,shadowColor:-1,label:"",backing:Et,toggleEvent:"mousedown",toggleBacking:new e.Rectangle(20,20,new e.GradientColor([e.white,e.grey],[0,1],0,0,20,20)).reg("center")}).pos(8+(ht?30:0),5,e.RIGHT,e.TOP,U).expand(10,10,10,1);ft.on("mousedown",function(){nt.vis(ft.toggled),U.spectrumToggled=!ft.toggled,_t.stage.update()}),k||(ft.removeFrom(),xt.mov(28)),C||xt.removeFrom(),W||U.okBut&&U.okBut.removeFrom(),!Y&&Ke&&Ke.removeFrom();var Lt=new e.Rectangle(U.width,U.height-at-Me,e.faint).pos(0,0,e.LEFT,e.BOTTOM,U).noMouse(),wt=this.dropper=new e.Circle(10,e.clear,e.white,8);new e.Circle(5,e.clear,e.black,2).center(wt),new e.Circle(7,e.clear,e.white,2).center(wt),wt.noMouse()}this.updateDropperTarget=function(){wt.vis(!1),rt(),wt.vis(!0).top()},this.spectrumToggled=Ie,this.toggleSpectrum=function(bt){bt!=U.spectrumToggled&&(n(bt)&&(bt=!U.spectrumToggled),U.spectrumToggled=bt,ft.toggle(!bt),nt.vis(!bt),U.updateDropperTarget())};var St=!1;function Ft(){_t.stage.mouseInBounds?wt.alp(1):wt.alp(0),wt.loc(_t.mouseX,_t.mouseY,_t.stage),St=U.spectrumToggled?gt.hitTestReg(wt):nt.hitTestReg(wt);var bt;U.dropperTarget?bt=wt.x>=it.x&&wt.x<=it.x+it.width&&wt.y>=it.y&&wt.y<=it.y+it.height:bt=!1;var Ut;if(U.dropperTarget?Ut=(St||bt)&&!Lt.hitTestReg(wt)&&!dt.hitTestReg(wt):Ut=St,!Ve&&Ut)Xt(bt);else if(Ve&&!Ut){Ot(),_t.stage.update();return}if(Ut){var tn;if(St)tn=U.spectrumToggled?gt:nt;else if(U.dropperTarget)tn=it;else return;var _n=tn.globalToLocal(_t.mouseX,_t.mouseY),nn=tn.getColorAt(_n.x,_n.y,!0),Dn="rgba("+nn[0]+","+nn[1]+","+nn[2]+","+nn[3]+")";nn[3]<.05&&(Dn=_t.color),wt.borderColor=Dn,_t.stage.update()}}function Xt(bt){Ve=!0,bt&&rt(),wt.vis(!0).top()}function Ot(){Ve=!1,it.dispose(),wt.vis(!1)}this.collapsed=!1,this.collapse=function(bt){n(bt)&&(bt=!0),bt!=U.collapsed&&(U.collapsed=bt,bt?(ft.enabled=!1,xt.rot(180),U.background.vis(!1),gt.vis(!1),Lt.vis(!1),j.visible=!1,nt&&nt.vis(!1),Qe&&Qe.vis(!1),_&&ot.vis(!1),Ve=!1,Zt(),At(),U.dispatchEvent("collapsed")):(ft.enabled=!0,xt.rot(0),U.background.vis(!0),gt.vis(!0),Lt.vis(!0),j.visible=!0,U.spectrumToggled||nt.vis(!0),Qe&&Qe.vis(!0),_&&ot.vis(!0),Ve=!0,jt(),rt(),dt.hitTestReg(wt)&&At(),U.dispatchEvent("expanded")),_t.stage.update())},Ie&&C&&(U.collapseEvent=dt.on("dblclick",function(){U.collapsed?U.collapse(!1):U.collapse(!0)})),Ie&&B&&C&&(U.vis(!1),setTimeout(function(){U.collapse(!0),U.vis(!0),U.stage&&U.stage.update()},50));function jt(){Zt(),U.dropperDown=_t.stage.on("stagemousedown",Ft),U.dropperMove=_t.stage.on("stagemousemove",Ft),U.dropperUp=_t.stage.on("stagemouseup",function(){Ft(),qe&&Ie&&St&&qe.color!=wt.borderColor&&mt()})}function Zt(){U.dropperDown&&_t.stage.off("stagemousedown",U.dropperDown),U.dropperMove&&_t.stage.off("stagemousemove",U.dropperMove),U.dropperUp&&_t.stage.off("stagemouseup",U.dropperUp)}function rt(){it&&it.dispose&&it.dispose();var bt=new e.Rectangle(_t.width,_t.height,_t.color).addTo(_t.stage,0),Ut;U.dropperTarget&&U.dropperTarget.getBounds&&U.dropperTarget.type&&!U.dropperTarget.type.includes("Stage")?Ut=U.dropperTarget.boundsToGlobal():Ut=_t.stage.getBounds(),it=new e.Bitmap(_t.stage,Ut.width,Ut.height,Ut.x,Ut.y).loc(Ut).cur("none"),bt.dispose(),it.on("mousedown",mt)}function At(){it&&it.dispose&&it.dispose(),wt.vis(!1)}function mt(){wt.vis(!1),U.currentValue=e.convertColor(wt.borderColor,"hex"),U.dispatchEvent("change"),Ve&&(I?(rt(),wt.vis(!0).top(),setTimeout(function(){U.updateDropperTarget(),_t.stage.update()},50)):(wt.vis(!0).top(),_t.stage.update()))}function Rt(){if(de&&l){d=g,g=ie;var bt=[d,g];for(z=0;z<2;z++){var Ut=j.graphics;H=Math.floor(z/i),N=z%i,he=N*(V+o),Pe=H*(V+o)+Fe,ce[z]=bt[z],Ut.f(Ze.color).r(he-1,Pe-1,V+2,V+2).f(bt[z]).r(he,Pe,V,V)}}ie=_e,h=x,U.dispatchEvent("change"),!e.OPTIMIZE&&(Mt||!le.OPTIMIZE)&&U.stage&&U.stage.update()}if(v){var Dt,Ht;Ze.on("mousedown",Vt),Ze.on("pressmove",Pt),Ze.on("pressup",Bt),Ie&&(dt.on("mousedown",Vt),dt.on("pressmove",Pt),dt.on("pressup",Bt))}function Vt(bt){Dt=bt.stageX/e.scaX-U.x,Ht=bt.stageY/e.scaY-U.y}function Pt(bt){U.x=bt.stageX/e.scaX-Dt,U.y=bt.stageY/e.scaY-Ht,U.stage&&U.stage.update()}function Bt(){U.stage&&U.stage.update()}var Kt=i*(V+o),Gt=K*(V+o);if(l)var rn=De*(V+o),cn=ke*(V+o);j.on((Mt?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",function(bt){var Ut=e.hitTestGrid(j,Kt,Gt,i,K,bt.stageX,bt.stageY,0,0,o,o);n(Ut)||(_e=r[Ut],_&&(qe.color=_e,Ce.text=String(r[Ut]).toUpperCase()),Rt()),l&&(Ut=null,Ut=e.hitTestGrid(j,rn,cn,De,ke,bt.stageX,bt.stageY,0,Gt,o,o),n(Ut)||(_e=ce[Ut],_&&(qe.color=_e,Ce.text=ce[Ut].toUpperCase()),Rt())),S&&oe(r.indexOf(_e)),_?U.stage&&U.stage.update():S&&U.stage&&U.stage.update(),Jt()}),Object.defineProperty(this,"selectedColor",{get:function(){return _e},set:function(bt){bt=bt.toLowerCase(),ie=_e=bt,_&&(qe.color=_e,Ce.text=_e,U.stage&&U.stage.update()),S&&!Ie&&oe(r.indexOf(_e)),Jt()}}),Object.defineProperty(this,"currentValue",{get:function(){return _e},set:function(bt){U.selectedColor=bt}}),Object.defineProperty(this,"currentValueEvent",{get:function(){return _e},set:function(bt){bt!=U.selectedColor&&(U.selectedColor=bt,U.dispatchEvent("change"))}}),Object.defineProperty(this,"selectedIndex",{get:function(){return Ie?null:r.indexOf(_e)},set:function(bt){Ie||(ie=_e=r[bt],_&&(qe.color=_e,Ce.text=_e,U.stage&&U.stage.update()),S&&oe(r.indexOf(_e)),Jt())}}),Object.defineProperty(this,"selectedAlpha",{get:function(){return c?un(Le.currentValue):1},set:function(bt){c&&(h=Le.currentValue=bt,qe&&(qe.alpha=h),ze&&(ze.text="Alpha: "+un(Le.currentValue)),U.stage&&U.stage.update())}}),Object.defineProperty(this,"selectedTolerance",{get:function(){return F?un(Le.currentValue):1},set:function(bt){F&&(Le.currentValue=bt,U.stage&&U.stage.update())}}),Object.defineProperty(this,"colors",{get:function(){return Ie?"spectrum":l?r.concat(ce):r},set:function(){Ct&&lt("ColorPicker() colors is read only - make a new ColorPicker to change")}}),le.KEYFOCUS!=null&&(e.KEYFOCUS=le.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return e.KEYFOCUS==U},set:function(){Mt?e.KEYFOCUS=U:le.KEYFOCUS=U}}),A&&e.KEYFOCUS&&ln(),this.on("mousedown",function(){A&&ln()});function ln(){U.keyFocus=!0;var bt=document.activeElement;bt&&bt.blur()}function Jt(){U.zimAccessibility&&U.zimAccessibility.changeTitle(U,null,!0)}this.keyDownEvent=function(bt){if(U.stage&&!Ie&&(U.zimAccessibility&&U.focus||!U.zimAccessibility&&U.keyFocus)){var Ut=U.selectedIndex;bt.keyCode==37||bt.keyCode==40?(Ut--,It(Ut)):(bt.keyCode==38||bt.keyCode==39)&&(Ut++,It(Ut))}};function It(bt){bt<0&&(bt=U.colors.length-1),bt>U.colors.length-1&&(bt=0),U.selectedIndex=bt,U.dispatchEvent("change"),U.stage&&U.stage.update()}le.addEventListener("keydown",this.keyDownEvent);var tt,_t;this.hide=function(){return tt=U.stage,U.removeFrom(),tt&&tt.update(),U},this.on("removed",$t);function $t(){if(Ie&&(Ve=!1,Zt(),At()),U.toggled=!1,U.zimAccessibility){var bt=U.zimAccessibility;bt.resize(U),Wt?Wt.focus():U.zimTabTag.nextSibling.focus(),setTimeout(function(){bt.talk("ColorPicker has been closed.")},50)}tt&&tt.update()}var Wt,on=!1;this.show=function(){return U.center(U.container),U};function en(){if(U.stage&&(tt=U.stage,_t=tt.frame),U.zimAccessibility){var bt=U.zimAccessibility;setTimeout(function(){bt.activatedObject&&(Wt=bt.activatedObject.zimTabTag)},50),bt.resize(U),bt.tabIndex=U.zimTabIndex}U.toggled=!0,setTimeout(function(){Ie&&(Ve=!0,rt(),jt(),Xt(),Ft()),U.stage&&U.stage.update()},20)}this.on("added",en),this.toggle=function(bt){return bt===!0?U.show():bt===!1||U.container.contains(U)?U.hide():U.show(),U};function un(bt){return Math.round(bt*Math.pow(10,2))/Math.pow(10,2)}n(T)&&(T=re.selectedIndex!=null?re.selectedIndex:0),U.selectedIndex=T,n(L)&&(L=re.selectedColor!=null?re.selectedColor:null),L!=null?U.selectedColor=L:Ie&&(U.selectedColor="#888888"),q!==!1&&e.styleTransforms(this,re),this.clone=function(){return U.cloneProps(new e.ColorPicker(t,de?null:r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,T,L,I,C,k,Y,W,G,F,B,q,this.group,X))},this.dispose=function(bt,Ut,tn){return le.removeEventListener("keydown",U.keyDownEvent),Ie&&(Zt(),U.gradient.cur("default"),U.pixels.cur("default"),I&&I.cur("default"),it.cur("default"),Ve=!1,At()),Le&&Le.dispose(),wt&&wt.dispose(),U.dropperDown&&_t.stage.off("stagemousedown",U.dropperDown),U.dropperMove&&_t.stage.off("stagemousemove",U.dropperMove),U.dropperUp&&_t.stage.off("stagemouseup",U.dropperUp),tn||this.zimContainer_dispose(!0),!0}},e.extend(e.ColorPicker,e.Container,["clone","dispose"],"zimContainer",!1),e.EmojiPicker=function(t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,T,L,I){var C="width, height, emojis, monochrome, backgroundColor, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, cache, size, collapse, collapseColor, collapsed, colSize, rowSize, style, group, inherit",k;if(k=vt(e.EmojiPicker,arguments,C,this))return k;He("67.05"),this.group=L;var Y=T===!1?{}:e.getStyle("EmojiPicker",this.group,I);n(t)&&(t=Y.width!=null?Y.width:400),n(r)&&(r=Y.height!=null?Y.height:600),n(o)&&(o=Y.monochrome!=null?Y.monochrome:!1),n(l)&&(l=Y.backgroundColor!=null?Y.backgroundColor:e.lighter),n(c)&&(c=Y.titleBar!=null?Y.titleBar:"Emojis"),n(p)&&(p=Y.titleBarColor!=null?Y.titleBarColor:null),n(v)&&(v=Y.titleBarBackgroundColor!=null?Y.titleBarBackgroundColor:e.silver.toAlpha(.8)),n(w)&&(w=Y.titleBarHeight!=null?Y.titleBarHeight:40),n(b)&&(b=Y.cache!=null?Y.cache:!!e.mobile()),n(_)&&(_=Y.size!=null?Y.size:30),n(A)&&(A=Y.colSize!=null?Y.colSize:_+15),n(R)&&(R=Y.rowSize!=null?Y.rowSize:_+14),n(E)&&(E=Y.collapse!=null?Y.collapse:!1),n(S)&&(S=Y.collapseColor!=null?Y.collapseColor:n(p)?e.grey:p),n(P)&&(P=Y.collapsed!=null?Y.collapsed:!1),this.zimWindow_constructor(t,r,null,l,null,Y.borderWidth!=null?Y.borderWidth:2,Y.padding!=null?Y.padding:10,Y.corner!=null?Y.corner:10,null,Y.scrollBarActive!=null?Y.scrollBarActive:!0,Y.scrollBarDrag!=null?Y.scrollBarDrag:!0,null,null,null,!1,null,null,null,null,!0,null,null,null,null,null,null,c,p,v,w,Y.draggable!=null?Y.draggable:!0,null,null,Y.close!=null?Y.close:!0,null,null,Y.fullSize!=null?Y.fullSize:!1,null,Y.resizeHandle!=null?Y.resizeHandle:!1,E,S,P,null,T,L,e.copy(Y)),this.type="EmojiPicker";var W=this;this.emojiData=n(i)?["\u{1F4A5}","\u{1F335}","\u{1F382}","\u{1F370}","\u{1F429}","\u{1F525}","\u{1F32B}","\u{1F30A}","\u{1F34F}","\u{1F34E}","\u{1F34B}","\u{1F34C}","\u{1F347}","\u{1F351}","\u{1F345}","\u{1F346}","\u{1F9C0}","\u{1F355}","\u{1F36C}","\u{1F36D}","\u{1F369}","\u{1F37A}","\u{1F37B}","\u{1F378}","\u{1F37E}","\u2615\uFE0F","\u{1F4A9}","\u{1F47B}","\u{1F916}","\u{1F4A4}","\u{1F440}","\u{1F483}","\u{1F483}\u{1F3FB}","\u{1F483}\u{1F3FC}","\u{1F483}\u{1F3FD}","\u{1F483}\u{1F3FE}","\u{1F483}\u{1F3FF}","\u{1F454}","\u{1F457}","\u{1F459}","\u{1F458}","\u{1F460}","\u{1F452}","\u{1F3A9}","\u{1F431}","\u{1F43B}","\u{1F436}","\u{1F43C}","\u{1F42F}","\u{1F981}","\u{1F42E}","\u{1F437}","\u{1F419}","\u{1F435}","\u{1F412}","\u{1F414}","\u{1F426}","\u{1F434}","\u{1F984}","\u{1F41D}","\u{1F422}","\u{1F420}","\u{1F410}","\u{1F54A}","\u{1F415}","\u{1F408}","\u{1F409}","\u{1F432}","\u{1F384}","\u{1F340}","\u{1F33B}","\u{1F339}","\u{1F490}","\u{1F344}","\u2600\uFE0F","\u{1F327}","\u26BD\uFE0F","\u{1F3C0}","\u{1F3C8}","\u26BE\uFE0F","\u{1F3BE}","\u{1F3D2}","\u26F7","\u{1F3C4}","\u{1F3CA}","\u{1F6B4}","\u{1F3AD}","\u{1F3A8}","\u{1F3B7}","\u{1F3BA}","\u{1F3B8}","\u{1F3BB}","\u{1F3B0}","\u{1F3B3}","\u{1F697}","\u{1F695}","\u{1F68C}","\u{1F68E}","\u{1F691}","\u{1F692}","\u{1F69C}","\u{1F682}","\u2708\uFE0F","\u26F5\uFE0F","\u{1F6F0}","\u{1F301}","\u{1F30B}","\u{1F3DE}","\u{1F305}","\u{1F386}","\u{1F308}","\u{1F3E0}","\u{1F3E5}","\u{1F3EB}","\u231A\uFE0F","\u{1F4F1}","\u{1F5A5}","\u{1F4BE}","\u{1F4FC}","\u{1F3A5}","\u260E\uFE0F","\u{1F4FA}","\u{1F4FB}","\u{1F4E1}","\u{1F56F}","\u{1F4B0}","\u{1F48E}","\u{1F6AC}","\u26B0","\u{1F52E}","\u{1F488}","\u{1F6BD}","\u{1F511}","\u{1F6CF}","\u{1F389}","\u{1F38A}","\u2764\uFE0F","\u{1F921}","\u{1F600}","\u{1F62C}","\u{1F601}","\u{1F602}","\u{1F603}","\u{1F604}","\u{1F605}","\u{1F606}","\u{1F607}","\u{1F609}","\u{1F60A}","\u{1F642}","\u{1F643}","\u263A\uFE0F","\u{1F60B}","\u{1F60C}","\u{1F60D}","\u{1F618}","\u{1F617}","\u{1F619}","\u{1F61A}","\u{1F61C}","\u{1F61D}","\u{1F61B}","\u{1F911}","\u{1F913}","\u{1F60E}","\u{1F917}","\u{1F60F}","\u{1F636}","\u{1F610}","\u{1F611}","\u{1F612}","\u{1F644}","\u{1F914}","\u{1F633}","\u{1F61F}","\u{1F620}","\u{1F614}","\u{1F615}","\u{1F641}","\u2639\uFE0F","\u{1F623}","\u{1F62B}","\u{1F629}","\u{1F631}","\u{1F628}","\u{1F630}","\u{1F62F}","\u{1F626}","\u{1F622}","\u{1F62A}","\u{1F613}","\u{1F62D}","\u{1F635}","\u{1F632}","\u{1F910}","\u{1F637}","\u{1F912}","\u{1F915}","\u{1F634}","\u{1F480}","\u2620\uFE0F","\u{1F47D}","\u{1F63A}","\u{1F638}","\u{1F639}","\u{1F63B}","\u{1F63C}","\u{1F63D}","\u{1F640}","\u{1F63F}","\u{1F63E}","\u{1F444}","\u{1F48B}","\u{1F445}","\u{1F5E3}","\u{1F464}","\u{1F465}","\u{1F456}","\u{1F463}","\u{1F461}","\u{1F462}","\u{1F45E}","\u{1F45F}","\u{1F393}","\u{1F451}","\u{1F45C}","\u{1F45B}","\u{1F4BC}","\u{1F453}","\u{1F576}","\u{1F48D}","\u{1F302}","\u2744\uFE0F","\u{1F32A}","\u26A1\uFE0F","\u{1F951}","\u{1F98B}","\u{1F648}","\u{1F649}","\u{1F64A}","\u{1F427}","\u{1F577}","\u{1F982}","\u{1F980}","\u{1F40D}","\u{1F41B}","\u{1F40C}","\u{1F41E}","\u{1F41C}","\u{1F41F}","\u{1F421}","\u{1F42C}","\u{1F433}","\u{1F40B}","\u{1F40A}","\u{1F406}","\u{1F332}","\u{1F333}","\u{1F334}","\u{1F331}","\u{1F33F}","\u{1F343}","\u{1F342}","\u{1F341}","\u{1F33A}","\u{1F33C}","\u{1F338}","\u{1F330}","\u{1F383}","\u{1F41A}","\u{1F578}","\u{1F30E}","\u{1F30D}","\u{1F30F}","\u{1F315}","\u{1F316}","\u{1F317}","\u{1F318}","\u{1F311}","\u{1F312}","\u{1F313}","\u{1F314}","\u{1F31A}","\u{1F31D}","\u{1F31B}","\u{1F31C}","\u{1F31E}","\u{1F319}","\u2B50\uFE0F","\u{1F31F}","\u{1F4AB}","\u2728","\u2604\uFE0F","\u{1F354}","\u{1F373}","\u{1F35F}","\u{1F32D}","\u{1F35D}","\u{1F32E}","\u{1F32F}","\u{1F363}","\u{1F368}","\u{1F366}","\u{1F377}","\u{1F379}","\u{1F3C6}","\u{1F3AA}","\u{1F3B9}","\u{1F680}","\u26F2\uFE0F","\u{1F3A2}","\u26F0","\u{1F3D4}","\u{1F5FB}","\u{1F4AF}","\u{1F3B5}","\u{1F3B6}","\u{1F4AC}","\u{1F4AD}","\u{1F5EF}","\u{1F0CF}","\u{1F3F3}\uFE0F\u200D\u{1F308}","\u{1F953}","\u{1F943}","\u{1F3A4}","\u{1F6A8}","\u{1F3CD}","\u{1F3D5}","\u26FA\uFE0F","\u{1F3DC}","\u{1F3D6}","\u{1F3DD}","\u{1F307}","\u{1F306}","\u{1F3D9}","\u{1F303}","\u{1F3D8}","\u{1F3E1}","\u{1F3E2}","\u{1F528}","\u2699","\u{1F52B}","\u{1F4A3}","\u{1F52A}","\u{1F48A}","\u{1F573}","\u{1F489}","\u{1F6C1}","\u26F1","\u{1F381}","\u{1F388}","\u{1F380}","\u{1F4C5}","\u{1F5F3}","\u{1F4DA}","\u270F\uFE0F","\u26AA\uFE0F","\u26AB\uFE0F","\u2B1B\uFE0F","\u2B1C\uFE0F","\u{1F5BC}","\u{1F3DA}","\u{1F3ED}","\u{1F532}","\u{1F533}","\u{1F3B1}","\u{1F53A}","\u{1F53B}","\u{1F4A6}","\u26F3\uFE0F","\u{1F3DF}","\u{1F4A1}","\u{1F52D}","\u{1F52C}","\u{1F570}","\u{1F42A}","\u{1F42B}","\u{1F418}","\u{1F438}","\u{1F430}","\u{1F42D}","\u{1F6AA}","\u{1F6CD}","\u{1F441}","\u{1F353}","\u{1F352}","\u{1F336}","\u{1F33D}","\u{1F360}","\u{1F36F}","\u{1F35E}","\u{1F36B}","\u{1F37F}","\u{1F36A}","\u{1F34A}","\u{1F3F9}","\u{1F46F}","\u{1F46F}\u200D\u2642\uFE0F","\u{1F5D1}"]:i;var G=[];e.loop(this.emojiData,function(F){var B=new e.Emoji(F,_,o);G.push(B)}),this.wrapper=new e.Wrapper({items:G,width:t,alignInner:e.CENTER,valignInner:e.CENTER,wrapperType:"column",colSize:A,rowSize:R}).cur(),this.backdrop=new e.Rectangle(this.wrapper.width,this.wrapper.height,e.faint),e.timeout(.2,function(){W.scrollBar&&W.scrollBar.vertical&&W.scrollBar.vertical.getBounds()&&W.scrollBar.vertical.expand(),W.backdrop.heightOnly=W.wrapper.height,b&&W.wrapper.cache()}),this.add(this.backdrop),this.add(this.wrapper),this.wrapper.tap(function(F){W.currentEmoji=F.target,W.dispatchEvent("change")}),T!==!1&&e.styleTransforms(this,Y),this.clone=function(){return W.cloneProps(new e.EmojiPicker(t,r,T,this.group,I))},this.dispose=function(){return!0}},e.extend(e.EmojiPicker,e.Window,["clone","dispose"],"zimWindow",!1),e.TextEditor=function(t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,T,L,I,C,k,Y,W,G,F,B,q,Z,X,ne,$,re,de,Q,U){var g="width, color, backgroundColor, fieldColor, fieldHeight, textSize, sizeList, optionList, colorList, fontList, live, button, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, wrap, limit, scroll, placeholder, password, borderColor, borderWidth, margin, corner, shadowColor, shadowBlur, draggable, boundary, frame, fontListHeight, fontListViewNum, style, group, inherit",d;if(d=vt(e.TextEditor,arguments,g,this))return d;He("67.1"),this.group=Q;var h=de===!1?{}:e.getStyle("TextEditor",this.group,U);if(n(t)&&(t=h.width!=null?h.width:400),n(i)&&(i=h.backgroundColor!=null?h.backgroundColor:e.lighter),n(S)&&(S=h.titleBar!=null?h.titleBar:"Text Editor"),n(Z)&&(Z=h.draggable!=null?h.draggable:!0),n(R)&&(R=h.titleBarHeight!=null?h.titleBarHeight:30),n(o)&&(o=h.fieldColor!=null?h.fieldColor:i.darken(.05)),n(_)&&(_=h.live!=null?h.live:!0),n(T)&&(T=h.wrap!=null?h.wrap:!0),n(I)&&(I=h.scroll!=null?h.scroll:!0),n(G)&&(G=h.margin!=null?h.margin:10),n(L)&&(L=h.limit!=null?h.limit:null),n(S)&&(S=h.titleBar!=null?h.titleBar:null),n(p)&&(p=h.sizeList!=null?h.sizeList:null),n(w)&&(w=h.colorList!=null?h.colorList:null),n(v)&&(v=h.optionList!=null?h.optionList:null),n(b)&&(b=h.fontList!=null?h.fontList:null),n(o)&&(o=h.fieldColor!=null?h.fieldColor:null),n(l)&&(l=h.fieldHeight!=null?h.fieldHeight:null),n(c)&&(c=h.textSize!=null?h.textSize:null),n($)&&($=h.fontListHeight!=null?h.fontListHeight:100),n(re)&&(re=h.fontListViewNum!=null?h.fontListViewNum:3),typeof ne>"u")if(le.zdf)var ne=le.zdf;else{Ct&&lt("zim.TextEditor - please provide a reference to zim Frame");return}this.zimPanel_constructor(t,300,null,S,P,A,R,i,Y,W,F,!0,null,null,null,null,null,null,null,null,B,q,Z,X,de,Q,U);var x=this;n(E)&&(E=new e.Button({width:50,height:50,label:"",icon:new e.Shape().sca(.4).f("white").p("AikFsQg5jmhphxIA1gXQBeBGA3CwQC8mRCpjOIBfAoQkPFGiSFpg"),color:e.white,corner:10,backgroundColor:e.green.darken(.2),borderColor:e.white,borderWidth:2,rollBackgroundColor:e.green,shadowBlur:3}).pos(G,R+G*2,e.RIGHT,e.TOP,x)),x.button=E,E.on((Mt?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",j),n(l)&&(l=h.fieldHeight!=null?h.fieldHeight:E.height+G*2);function j(){_||(V.text=O.text),x.hide(),x.dispatchEvent("set")}var O=x.textArea=new e.TextArea({color:r,backgroundColor:o,width:t-E.width-G*3,height:n(l)?E.height+G*2:l,expand:10,password:k,placeholder:C,frame:ne}).loc(G,R+G+(l&&l<E.height+G*2?(E.height-l)/2+G:0),null,null,!1);T||(O.tag.style.whiteSpace="nowrap"),L&&O.tag.setAttribute("maxLength",L),I&&(O.tag.style.overflowY="auto");var V=new e.Label;x.on("pressmove",function(){O.resize()}),x.on("close",function(){x.inputEvent&&O.off("input",x.inputEvent),O.removeFrom()}),x.panelHeight=R+G+Math.max(l,E.height+G*2)+G;var ce=e.mobile(),H=ce?35:30;if(p||v||w){new e.Rectangle(t,H+G,"rgba(0,0,0,.05)").loc(0,x.panelHeight,x);var N=[];if(w){var ue=Array.isArray(w),fe=x.colorPicker=new e.ColorPicker({colors:ue?w:null,cols:ue?Math.min(w.length,12):null,alphaPicker:!1,greyPicker:!ue,container:ne.stage});fe.on("close",Ye),fe.on("change",function(){V.color=r.color=fe.selectedColor,x.dispatchEvent("update"),Ye()}),x.closeColorPicker=function(){Ye()},r=x.swatch=new e.Rectangle(H,H,V.color,e.dark,1).cur(),r.on("mousedown",function(){x.dispatchEvent("color"),O.tag.style.display="none",fe.selectedColor=r.color,fe.show(),x.stage&&x.stage.update()}),N.push(r)}if(v){v===!0&&(v=["bold","italic","align"]),n(le.STYLE)&&(le.STYLE={}),n(le.STYLE.group)&&(le.STYLE.group={}),le.STYLE.group.zimEditor={width:H,height:H,corner:0,borderColor:e.tin,shadowBlur:-1,backgroundColor:e.light,rollBackgroundColor:e.light,toggleBackgroundColor:e.green,toggleColor:e.grey};var ae,Ie,ge;e.loop(v,function(Se){if(Se.toLowerCase()=="bold")ae=x.bold=new e.Button({label:new e.Label({text:"B",color:e.grey,size:16,bold:!0}),toggle:"B",group:"zimEditor"}),ae.on("click",function(){V.bold=ae.toggled,x.dispatchEvent("update"),x.stage&&x.stage.update()}),N.push(ae),V.bold&&ae.toggle();else if(Se.toLowerCase()=="italic")Ie=x.italic=new e.Button({label:new e.Label({text:"I",color:e.grey,size:16,bold:!0,italic:!0}),toggle:"I",group:"zimEditor"}),Ie.on("click",function(){V.italic=Ie.toggled,x.dispatchEvent("update"),x.stage&&x.stage.update()}),N.push(Ie),V.italic&&Ie.toggle();else if(Se.toLowerCase()=="align"){var ie=new e.Tile(new e.Rectangle(H-10,H-10,e.grey).centerReg(),3,1,10,10),pe=ce?["\u21DA","\u21D4","\u21DB"]:["\u21D0","\u21D4","\u21D2"];e.loop(3,function(he){var Pe=ie.getChildAt(he);new e.Label(pe[he],H*2/3,null,e.white).center(Pe).expand(10)});var be=0;V.align=="right"?be=2:(V.align=="center"||V.align=="middle")&&(be=1),ge=x.align=new e.Selector({tile:ie,corner:0,borderWidth:1,borderColor:e.grey,backgroundColor:e.clear,selectedIndex:be}),ge.on("change",function(){ge.selectedIndex==0?V.align="left":ge.selectedIndex==1&&(V.align="center"),ge.selectedIndex==2&&(V.align="right"),x.dispatchEvent("update"),x.stage&&x.stage.update()}),N.push(ge)}}),delete le.STYLE.group.zimEditor}if(p){var Be=x.sizePicker=new e.Stepper({list:p===!0?null:p,stepperType:p===!0?null:"list",min:p===!0?5:null,max:p===!0?500:null,width:150,shadowBlur:-1,borderColor:e.dark,borderWidth:2,corner:0,backgroundColor:e.green,downForward:!1}).siz(null,H);Be.arrowPrev.expand(0),Be.textBox.color=e.lighter,Be.on("change",function(){V.size=Be.currentValue,x.dispatchEvent("update"),x.stage&&x.stage.update()}),Be.currentValue=V.size,N.push(Be)}var z=new e.Tile(N,N.length,1,10,10,!0).loc(G,x.panelHeight+G/2,x);x.panelHeight=x.panelHeight+G+z.height+G}function Ye(){O.tag.style.display="block",fe.hide(),x.stage&&x.stage.update()}var te;if(b){Array.isArray(b)?te=b:(te=["Arial","Courier New","Georgia","Helvetica","Palatino","Tahoma","Verdana"],ce||(te=te.concat(["Comic Sans MS","Impact"])),te.sort());var K=x.fonts=new e.List({width:t-G*2,height:$,viewNum:re,backgroundColor:e.moon,color:e.grey,rollColor:e.dark,rollBackgroundColor:e.green.lighten(.5),selectedBackgroundColor:e.mist,selectedRollBackgroundColor:e.green.lighten(.6),selectedColor:e.dark,backdropColor:e.light,scrollBarColor:e.dark,shadowBlur:-1,list:te}).center(x).loc(null,x.panelHeight);K.on("change",function(){V.font=K.currentValue,x.dispatchEvent("update"),x.stage&&x.stage.update()}),x.panelHeight=x.panelHeight+G+K.height+G}x.show=function(Se,ie,pe,be){if(x.parent)return Se==x.label||(x.label=Se),x;V=Se,O.addTo(x);var he;if(V&&V.stage)he=V.stage;else if(be)he=be.stage;else if(le.zdf)he=le.zdf.stage;else return x;return!n(ie)||!n(pe)?x.loc(ie,pe):V&&V.y>he.height/2?x.loc(he.width/2-t/2,V.y-x.panelHeight-he.height*.05,he):V&&V.y<=he.height/2?x.loc(he.width/2-t/2,V.y+V.height+he.height*.05,he):x.center(he),x.y<20&&(x.y=20),x.y+x.height>x.stage.height&&(x.y=x.stage.height-x.height-20),xe(),x.stage.update(),x};function xe(){V&&(O.text=V.text),r&&(r.color=V.color),ae&&ae.toggle(V.bold==!0),Ie&&Ie.toggle(V.italic==!0),ge&&(ge.noAnimate=!0,V.align=="center"?ge.selectedIndex=1:V.align=="right"?ge.selectedIndex=2:ge.selectedIndex=0),Be&&(Be.currentValue=V.size),K&&(K.currentValue=V.font),x.inputEvent&&O.off("input",x.inputEvent),x.inputEvent=O.on("input",function(){_&&V&&(V.text=O.text),x.dispatchEvent("input"),x.dispatchEvent("update"),x.stage&&x.stage.update()})}x.hide=function(){if(w&&fe.hide(),O&&O.removeFrom(),!n(x.stage)){var Se=x.stage;return x.removeFrom(),Se.update(),x}},le.KEYFOCUS!=null&&(e.KEYFOCUS=le.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return e.KEYFOCUS==x},set:function(){e.KEYFOCUS=x}}),e.KEYFOCUS||_e(),this.on("mousedown",function(){_e()});function _e(){x.keyFocus=!0}Object.defineProperty(x,"label",{get:function(){return V},set:function(Se){V=Se,xe()}}),de!==!1&&e.styleTransforms(this,h),this.clone=function(){return x.cloneProps(new e.TextEditor(t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,T,L,I,C,k,Y,W,G,F,B,q,Z,X,ne,$,re,de,this.group,U))},this.dispose=function(Se,ie,pe){return x.inputEvent&&O.off("input",x.inputEvent),fe&&fe.dispose(),r&&r.dispose(),K&&K.dispose(),E&&E.dispose(),O&&O.dispose(),ge&&ge.dispose(),ae&&ae.dispose(),Ie&&Ie.dispose(),Be&&Be.dispose(),pe||this.zimPanel_dispose(),x.stage&&x.stage.update(),x.textArea=x.color=x.colorPicker=x.font=x.button=x.selector=x.bold=x.italic=x.size=null,!0}},e.extend(e.TextEditor,e.Panel,["clone","dispose"],"zimPanel",!1),e.Keyboard=function(t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,T,L,I,C,k,Y,W,G,F,B,q,Z,X,ne,$,re,de){var Q="labels, backgroundColor, color, shiftBackgroundColor, shiftHoldBackgroundColor, placeBackgroundColor, placeColor, cursorColor, shadeAlpha, borderColor, borderWidth, margin, corner, draggable, placeClose, shadowColor, shadowBlur, container, data, place, placeShiftH, placeShiftV, special, rtl, hardKeyboard, layout, numPadScale, numPadDraggable, numPadOnly, numPadAdvanced, style, group, inherit",U;if(U=vt(e.Keyboard,arguments,Q,this))return U;He("67.2"),this.zimContainer_constructor(1e3,400,null,null,!1),this.type="Keyboard",this.group=re;var g=$===!1?{}:e.getStyle(this.type,this.group,de);n(t)&&(t=g.labels!=null?g.labels:[]),Array.isArray(t)||(t=[t]),n(r)&&(r=g.backgroundColor!=null?g.backgroundColor:e.dark),n(i)&&(i=g.color!=null?g.color:e.white),n(o)&&(o=g.shiftBackgroundColor!=null?g.shiftBackgroundColor:"orange"),n(l)&&(l=g.shiftHoldBackgroundColor!=null?g.shiftHoldBackgroundColor:"red"),n(c)&&(c=g.placeBackgroundColor!=null?g.placeBackgroundColor:e.blue),n(p)&&(p=g.placeColor!=null?g.placeColor:i),n(v)&&(v=g.cursorColor!=null?g.cursorColor:e.blue),n(w)&&(w=g.shadeAlpha!=null?g.shadeAlpha:.2),n(b)&&(b=g.borderColor!=null?g.borderColor:"rgba(0,0,0,.1)"),n(_)&&(_=g.borderWidth!=null?g.borderWidth:null),b<0||_<0?b=_=null:b!=null&&_==null&&(_=1),n(E)&&(E=g.margin!=null?g.margin:5),n(S)&&(S=g.corner!=null?g.corner:30),n(P)&&(P=g.draggable!=null?g.draggable:!1),n(A)&&(A=g.placeClose!=null?g.placeClose:!0),n(R)&&(R=g.shadowColor!=null?g.shadowColor:"rgba(0,0,0,.2)"),n(T)&&(T=g.shadowBlur!=null?g.shadowBlur:14),n(I)&&(I=g.data!=null?g.data:[[["q","w","e","r","t","y","u","i","o","p"],["a","s","d","f","g","h","j","k","l"],["shift","z","x","c","v","b","n","m","backspace"],["?123","@"]],[["1","2","3","4","5","6","7","8","9","0"],["!","@","#","$","/","^","&","*","(",")"],["1/2","-","'",'"',":",";",",","?","backspace"],["ABC","@"]],[["+","x","%","=","<",">","{","}","[","]"],["\u20AC","\xA3","\xA5","$","\uFFE6","~","`","\xA4","\u2661","\u2606"],["2/2","_","\\","|","\u300A","\u300B","\xA1","\xBF","backspace"],["ABC","@"]]]),I[3]||(I[3]={e:["\u0117","\u0113","\u0119","\xEA","\xE9","\xEB","\xE8"],u:["\u016B","\xFB","\xFA","\xFC","\xF9"],i:["\u012B","\u012F","\xEC","\xED","\xEF","\xEE"],o:["\u014D","\u0153","\xF8","\xF5","\xF4","\xF3","\xF6","\xF2"],a:["\u0101","\xE3","\xE5","\xE2","\xE1","\xE4","\xE0","\xE6"],n:["\xF1","\u0144"]});var d=this;n(C)&&(C=g.place!=null?g.place:!0),n(k)&&(k=g.placeShiftH!=null?g.placeShiftH:0),n(Y)&&(Y=g.placeShiftV!=null?g.placeShiftV:0),n(G)&&(G=g.rtl!=null?g.rtl:!1),n(F)&&(F=g.hardKeyboard!=null?g.hardKeyboard:!0),n(q)&&(q=g.numPadScale!=null?g.numPadScale:.8),n(X)&&(X=g.numPadOnly!=null?g.numPadOnly:!1),n(Z)&&(Z=g.numPadDraggable!=null?g.numPadDraggable:!0),n(ne)&&(ne=g.numPadAdvanced!=null?g.numPadAdvanced:!1),n(B)&&(B=g.layout!=null?g.layout:"qwerty"),B=B.toLowerCase(),B!="qwerty"&&(B=="arabic"?I=[[["\u0636","\u0635","\u062B","\u0642","\u0641","\u063A","\u0639","\u0647","\u062E","\u062D","\u062C"],["\u0634","\u0633","\u064A","\u0628","\u0644","\u0627","\u062A","\u0646","\u0645","\u0643","\u0637"],["\u0630","\u0621","\u0624","\u0631","\u0649","\u0629","\u0648","\u0632","\u0638","\u062F","back"],["?123","\u0640"]],[["1","2","3","4","5","6","7","8","9","0","*"],["!","@","#","$","/","^","&","*","(",")","*"],["1/2","-","'",'"',":",";",",","?","*","backspace"],["ABC","*"]],[["+","x","%","=","<",">","{","}","[","]","*"],["\u20AC","\xA3","\xA5","$","\uFFE6","~","`","\xA4","\u2661","\u2606","*"],["2/2","_","\\","|","\u300A","\u300B","\xA1","\xBF","*","backspace"],["ABC","*"]],{\u0627:["\u0623","\u0625","\u0622","\u0621"],\u0649:["\u0626"],\u0621:["\u0626","\u0624"],\u0648:["\u0624"],\u0640:["\u064D","\u064B","\u064C","\u0652","\u064F","\u0650","\u064E","\u0651"],"*":["\u064D","\u064B","\u064C","\u0652","\u064F","\u0650","\u064E","\u0651"],n:["\xF1","\u0144"]}]:B=="hebrew"?I=[[["\u05E7","\u05E8","\u05D0","\u05D8","\u05D5","\u05DF","\u05DD","\u05E4","backspace"],["\u05E9","\u05D3","\u05D2","\u05DB","\u05E2","\u05D9","\u05D7","\u05DC","\u05DA","\u05E3"],["\u05D6","\u05E1","\u05D1","\u05E0","\u05D4","\u05DE","\u05E6","\u05EA","\u05E5"],["?123","@"]],[["1","2","3","4","5","6","7","8","9","0"],["!","@","#","$","/","^","&","*","(",")"],["1/2","-","'",'"',":",";",",","?","backspace"],["ABC","@"]],[["+","x","%","=","<",">","{","}","[","]"],["\u20AC","\xA3","\xA5","$","\uFFE6","~","`","\xA4","\u2661","\u2606"],["2/2","_","\\","|","\u300A","\u300B","\xA1","\xBF","backspace"],["ABC","@"]],{e:["\u0117","\u0113","\u0119","\xEA","\xE9","\xEB","\xE8"],u:["\u016B","\xFB","\xFA","\xFC","\xF9"],i:["\u012B","\u012F","\xEC","\xED","\xEF","\xEE"],o:["\u014D","\u0153","\xF8","\xF5","\xF4","\xF3","\xF6","\xF2"],a:["\u0101","\xE3","\xE5","\xE2","\xE1","\xE4","\xE0","\xE6"],n:["\xF1","\u0144"]}]:B=="azerty"?I=[[["a","z","e","r","t","y","u","i","o","p"],["q","s","d","f","g","h","j","k","l","m"],["shift","w","x","c","v","b","n","\xB4","backspace"],["?123","@"]],[["1","2","3","4","5","6","7","8","9","0"],["!","@","#","$","/","^","&","*","(",")"],["1/2","-","'",'"',":",";",",","?","backspace"],["ABC","@"]],[["+","x","%","=","<",">","{","}","[","]"],["\u20AC","\xA3","\xA5","$","\uFFE6","~","`","\xA4","\u2661","\u2606"],["2/2","_","\\","|","\u300A","\u300B","\xA1","\xBF","backspace"],["ABC","@"]],{e:["\u0117","\u0113","\u0119","\xEA","\xE9","\xEB","\xE8"],u:["\u016B","\xFB","\xFA","\xFC","\xF9"],i:["\u012B","\u012F","\xEC","\xED","\xEF","\xEE"],o:["\u014D","\u0153","\xF8","\xF5","\xF4","\xF3","\xF6","\xF2"],a:["\u0101","\xE3","\xE5","\xE2","\xE1","\xE4","\xE0","\xE6"],n:["\xF1","\u0144"]}]:B=="turkish"&&(I=[[["q","w","e","r","t","y","u","\u0131","o","p","\u011F","\xFC"],["a","s","d","f","g","h","j","k","l","\u015F","i"],["shift","z","x","c","v","b","n","m","\xF6","\xE7","backspace"],["?123","*"]],[["1","2","3","4","5","6","7","8","9","0","*"],["!","@","#","$","/","^","&","*","(",")","*"],["1/2","-","'",'"',":",";",",","?","*","backspace"],["ABC","*"]],[["+","x","%","=","<",">","{","}","[","]","*"],["\u20AC","\xA3","\xA5","$","\uFFE6","~","`","\xA4","\u2661","\u2606","*"],["2/2","_","\\","|","\u300A","\u300B","\xA1","\xBF","*","backspace"],["ABC","*"]],{e:["\u0117","\u0113","\u0119","\xEA","\xE9","\xEB","\xE8"],u:["\u016B","\xFB","\xFA","\xFC","\xF9"],i:["\u012B","\u012F","\xEC","\xED","\xEF","\xEE"],o:["\u014D","\u0153","\xF8","\xF5","\xF4","\xF3","\xF6","\xF2"],a:["\u0101","\xE3","\xE5","\xE2","\xE1","\xE4","\xE0","\xE6"],n:["\xF1","\u0144"]},{\u0131:"I",i:"\u0130"},{I:"\u0131",\u0130:"i"}])),d.data=I;var h="zim display - Keyboard(): Please pass in a reference to a container with bounds set";if(n(L))if(le.zdf)L=le.zdf.stage;else{lt(h);return}else if(L.getBounds){if(n(L.stage)){lt("zim display - Keyboard(): The container must have a stage property");return}}else{lt(h);return}R!=-1&&T>0&&(d.shadow=new $e.Shadow(R,3,3,T));var x=le.zdf?le.zdf.stage:null;d.labels=t;var j,O=10;e.loop(I[0],function(Me){Me.length>O&&(O=Me.length)});var V=O,ce=["/","",",",".","numpad","away"];n(W)||ce.splice(1,0,W);var H=e.copy(I[0]);H[3]=H[3].concat(ce);var N=e.copy(I[1]);N[3]=N[3].concat(ce);var ue=e.copy(I[2]);ue[3]=ue[3].concat(ce);var fe=[],ae=(1e3-(V-1)*5)/V,Ie={def:"default",shift:"shift",number1:"number1",number2:"number2"},ge=Ie.def,Be,z,Ye,te=!1,K,xe,_e=0,Se,ie=[],pe,be,he,Pe,Re,ve,Ae,ye;We(),oe(ge),P&&Qe(),this.on("mousedown",Fe);function Fe(Me){x=d.stage,z&&d.removeChild(z),Se&&ie.indexOf(Me.target)<0&&Ce(),n(Me.target.na)||(P&&Me.target===Ae?(d.tickerMouseEvent=x.on("stagemousemove",function(Ne){d.mouseYAmount=Ne.stageY}),e.Ticker.add(yt),d.on("pressup",Le),ye=Me.stageY-d.localToGlobal(0,0).y):!n(W)&&Me.target.na===W?d.dispatchEvent("special"):Me.target.na==="shift"?ke():Me.target.toggle==="?123"?(d.removeChild(Be),oe(Ie.number1)):Me.target.toggle==="ABC"?(d.removeChild(Be),ge=Ie.def,oe(),te&&ke(!0)):Me.target.toggle==="1/2"?(d.removeChild(Be),oe(Ie.number2)):Me.target.toggle==="2/2"?(d.removeChild(Be),oe(Ie.number1)):Me.target.na==="numpad"?st(Me.target):Me.target.na==="away"?(d.hideKeyboard(),d.dispatchEvent("close")):I[3]&&I[3][Me.target.na]?Ge(Me.target.na):Me.target.na==="return"?me("\n"):Me.target.na==="backspace"||Me.target.na==="back"?et():Me.target.na===""?me(" "):me(Me.target.na),x.update())}d.addChar=function(Me){!n(Me)&&Me.match(/^.$/)&&me(Me)},d.removeChar=function(){et(!0)},d.clearText=function(){xe.text="",et(!0),ut(),d.selectedIndex=0},d.setText=function(Me){xe.text=Me,ut(),d.selectedIndex=Me.length};var De;function ke(Me){var Ne=!1,at,Je;if(ge===Ie.def){for(K.color=Me?l:o,at=0;at<fe.length-6-(n(W)?0:1);at++)Je=fe[at],Je.label.text.length>0&&(Je.na.length===1?(I[4]&&I[4][Je.label.text]?Je.label.text=I[4][Je.label.text]:Je.label.text=Je.label.text.toUpperCase(),Je.label.centerReg(Je).mov(0,6)):Je.label.centerReg(Je));Me||(Ne=!0,setTimeout(dt,500),De=d.on("pressup",Oe)),ge=Ie.shift}else{for(K.color=r,te=!1,at=0;at<fe.length-6;at++)Je=fe[at],Je.label.text.length>0&&(Je.na.length===1?(I[5]&&I[5][Je.label.text]?Je.label.text=I[5][Je.label.text]:Je.label.text=Je.label.text.toLowerCase(),Je.label.centerReg(Je).mov(0,3)):Je.label.centerReg(Je));ge=Ie.def}Be.updateCache(),d.stage&&d.stage.update();function dt(){Ne&&(te=!0,K.color=l,Be.updateCache(),d.stage&&d.stage.update())}function Oe(){d.off("pressup",De),Ne=!1}}function oe(Me){var Ne,at,Je,dt=0,Oe=0,je,gt,nt=!1,ht,xt,Et=!1;n(Me)&&(Me=Ie.def),Me===Ie.def?Ne=H:Me===Ie.number1?Ne=N:Me===Ie.number2&&(Ne=ue),d.keys=Be=new e.Container(1e3,430,null,null,!1).addTo(d).vis(!X);for(var ft=0;ft<Ne.length;ft++){(ft<=1||Me==Ie.def&&ft==2&&Ne[2][0]!="shift")&&(dt=(ae/2+2.5)*(V-Ne[ft].length));for(var Lt=0;Lt<Ne[ft].length;Lt++){if(nt=!1,ht=null,Et=!1,Ne[ft][Lt]=="backspace"?(gt=!0,ht=be,Et=!0):Ne[ft][Lt]=="back"?(gt=!1,ht=be,Et=!0):Ne[ft][Lt]=="shift"?(gt=!0,ht=pe):(ft==3||Me!=Ie.def&&ft==2)&&Lt==0?(gt=!0,Et=!0):Ne[ft][Lt]==""?(gt=!1,nt=!0):Ne[ft][Lt]=="numpad"?(ht=Pe,gt=!1,Et=!0):Ne[ft][Lt]=="away"?(ht=he,gt=!0,Et=!0):gt=!1,gt?je=ae*1.5+2.5:nt?(je=(ae+5)*((n(W)?3:2)+V-10+1-I[0][3].length)-5,I[0][3].indexOf("backspace")!=-1&&(je-=ae/2)):je=ae,Je=new e.Rectangle(je,ae,r,b,_,S,null,null,null,!1).cur().addTo(Be),Et&&Je.addChild(new e.Rectangle(je,ae,"black",null,null,S,null,null,null,!1).alp(w)),ht?Je.label=at=new e.Label({text:"",backgroundColor:"ignore",font:g.font!=null?g.font:null,style:!1}):Je.label=at=new e.Label({lineWidth:10,lineHeight:25,font:g.font!=null?g.font:null,text:Ne[ft][Lt],color:i,align:"center",style:!1}),ht){var wt=ht.clone(),St;Ne[ft][Lt]=="numpad"?(St=60,ve=Je):St=70,wt.scaleTo(Je,St,St),wt.centerReg(Je)}xt?(xt=!1,dt+=67.33):(at.centerReg(Je).mov(0,isNaN(at.text)?3:7),Je.x=dt,Je.y=Oe,Je.na=Ne[ft][Lt],ft==2&&Lt==0&&Me==Ie.number1&&(Je.toggle="1/2"),ft==2&&Lt==0&&Me==Ie.number2&&(Je.toggle="2/2"),ft==3&&Lt==0&&Me==Ie.def&&(Je.toggle="?123"),ft==3&&Lt==0&&Me!=Ie.def&&(Je.toggle="ABC"),Je.toggle&&at.mov(0,3),fe.push(Je),Je.na=="shift"&&(K=Je),dt=Je.x+Je.width+5)}Oe+=ae+5,dt=0}Be.cache(_?-_:0,_?-_:0,_?Be.width+_*2:Be.width,_?Be.height+_*2:Be.height)}function Ge(Me){var Ne=I[3][Me],at=!1,Je=!1,dt;dt=e.timeout(500,gt,null,"ms");var Oe=d.on("pressup",je);function je(){at=!0,d.off("pressup",Oe),Je||me(Me)}function gt(){var nt,ht,xt,Et=0,ft;if(dt.clear(),!at){Je=!0,z=new e.Container(1e3,ae,null,null,!1).addTo(d,0),z.y=-ae-5;for(var Lt=0;Lt<Ne.length;Lt++)ge===Ie.shift?ft=Ne[Lt].toUpperCase():ft=Ne[Lt],nt=new e.Label({lineWidth:10,lineHeight:25,text:ft,font:g.font!=null?g.font:null,color:i,align:"center",style:!1}),ht=new e.Rectangle(ae,ae,r,b,_,S,null,null,null,!1).addTo(z),xt=new e.Rectangle(ae,ae,"white",null,null,S,null,null,null,!1).alp(.2),ht.addChild(xt),nt.center(ht),ht.na=Ne[Lt],ht.x=Et,Et+=ae+5;d.stage&&d.stage.update()}}}function We(){pe=new e.Shape({style:!1}),pe.graphics.f(i).p("AhIFoIAAjYIixAAID5n3ID6H3IixAAIAADYgAjHBxICeAAIAADYIBTAAIAAjYICeAAIjImSg"),pe.setBounds(-51/2,-72/2,51,72),be=new e.Container({style:!1});var Me=new e.Shape({style:!1});Me.graphics.f(i).p("ACgC+IigigIifCgQgGAGgJAAQgJAAgGgGQgGgGgBgJQABgJAGgGICgigIigifQgGgGgBgJQABgJAGgGQAGgGAJAAQAIAAAHAGICfCgICgigQAGgGAJAAQAJAAAGAGQAGAGABAJQgBAJgGAGIigCfICgCgQAGAGABAJQgBAJgGAGQgGAGgJAAQgJAAgGgGg"),Me.setTransform(82.6,32),Me.addTo(be);var Ne=new e.Shape({style:!1});Ne.graphics.f(i).s().p("AkhFAQgcAAgUgUIkHj6QgVgUAAgeQAAgdAVgVIEHj6QAUgTAcAAINKAAQAdAAAUAUQAUAUAAAdIAAH1QAAAdgUATQgUAVgdAAgAk0kOIkGD8QgIAHAAALQAAALAIAIIEGD7QAIAHALAAINKAAQALAAAIgIQAHgHAAgLIAAn1QAAgLgHgIQgIgIgLAAItKAAQgLAAgIAHg"),Ne.setTransform(62.2,32),Ne.addTo(be),be.setBounds(0,0,125,64),he=new e.Container({style:!1}),he.setBounds(0,0,147,86);for(var at=[{p:"Ai+heIF9AAIi/C9g",transform:[73.4,76]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[128.4,43.2]},{p:"AnNAzIAAhlIObAAIAABlg",transform:[73,43.2]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[18.8,43.2]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[128.2,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[114.5,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[100.8,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[87.1,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[73.4,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[59.7,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[46,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[32.3,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[18.6,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[128,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[114.3,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[100.6,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[86.9,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[73.2,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[59.5,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[45.8,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[32.1,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[18.4,15.8]},{p:"AphEnQgzAAgkgkQglglAAgzIAAlVQAAgzAlglQAkgkAzAAITDAAQAzAAAkAkQAlAlAAAzIAAFVQAAAzglAlQgkAkgzAAgAqjjtQgcAcAAAnIAAFVQAAAnAcAbQAbAcAnAAITDAAQAnAAAcgcQAbgbAAgnIAAlVQAAgngbgcQgcgcgnAAIzDAAQgnAAgbAcg",transform:[73.4,29.5]}],Je,dt=0;dt<at.length;dt++)Je=new e.Shape({style:!1}),Je.graphics.f(i).s().p(at[dt].p),Je.setTransform(at[dt].transform[0],at[dt].transform[1]),Je.addTo(he);Pe=new e.Container({style:!1}),Pe.setBounds(0,0,62,86),Re=new e.Container({style:!1}),Re.setBounds(0,0,62,86);for(var Oe=[{p:"Ai+heIF9AAIi/C9g",transform:[33,76,1,1,180]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[46,43.2]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[32.3,43.2]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[18.8,43.2]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[46,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[32.3,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[18.6,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[45.8,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[32.1,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[18.4,15.8]}],dt=0;dt<Oe.length;dt++){var je=new e.Shape({style:!1});je.graphics.f(i).s().p(Oe[dt].p),je.setTransform(Oe[dt].transform[0],Oe[dt].transform[1],Oe[dt].transform[2],Oe[dt].transform[3],Oe[dt].transform[4]),je.addTo(Pe);var gt=new e.Shape({style:!1});gt.graphics.f(i).s().p(Oe[dt].p),gt.setTransform(Oe[dt].transform[0],Oe[dt].transform[1]),gt.addTo(Re)}je.graphics.ef().s(white).ss(3).rr(-16,-14,60,55,10),gt.graphics.ef().s(white).ss(3).rr(-16,-14,60,55,10)}function Qe(){Ae=new e.Rectangle(ae*1.5+2.5+2.5,ae,r,b,_,S,null,null,null,!1).addTo(d,0).cur();for(var Me,Ne=0;Ne<4;Ne++)Me=new e.Rectangle(Ae.width*.4,4,i,null,null,null,null,null,null,!1).centerReg(Ae).alp(.2),Me.y-=-22+Ne*15;Ae.x=8.5*ae+40,Ae.y=-ae-5,Ae.na="drag"}function st(Me){d.numPad||(d.numPad=new e.NumPad({advanced:ne,draggable:Z}).sca(q),Z||X?d.numPad.center({add:!1}):d.numPad.pos({x:0,y:8,horizontal:"center",vertical:"bottom",add:!1}),d.numPad.on("pressed",function(){d.numPad.key=="enter"?d.dispatchEvent("enter"):d.numPad.key=="backspace"?d.removeChar():d.numPad.key=="clear"?d.clearText():d.numPad.key=="space"?me(" "):me(d.numPad.key)}),d.numPad.on("close",function(){ve.removeChildAt(2),Pe.clone().scaleTo(ve,60,60).centerReg(ve,2),Be.updateCache(),(!d.keys.parent||!d.keys.visible)&&Ye&&(Ye.visible=!1,d.toggled=!1,Ce())})),ve.removeChildAt(2),d.numPad.parent||Me===!1?(d.numPad.removeFrom(),Pe.clone().scaleTo(ve,60,60).centerReg(ve,2)):(!d.numPad.parent||Me===!0)&&(d.numPad.addTo(),Re.clone().scaleTo(ve,60,60).centerReg(ve,2)),Be.updateCache(),d.stage&&d.stage.update()}function yt(){d.mouseYAmount&&(d.y=d.parent.globalToLocal(0,d.mouseYAmount-ye).y)}function Le(){x.off("pressmousemove",d.tickerMouseEvent),e.Ticker.remove(yt)}d.setBounds(1e3,400-(V-10)*26);function ze(){if(!(!xe||!Ye)){for(var Me=xe.label.x+xe.label.getBounds().x,Ne=0;Ne<_e;Ne++)Me+=xe.widthArray[Ne]?xe.widthArray[Ne]:0;Ye.heightOnly=xe.getBounds().height*(xe.backing&&n(xe.padding)?.9:1)-(xe.paddingV&&xe.background?xe.paddingV*2:0),Ye.center(xe),Ye.x=Me}}function ot(){if(Se||!xe)return d;var Me=A?["<",">","x"]:["<",">"],Ne,at,Je;ie=[],Je=xe.localToLocal(0,0,d),Se=d.place=new e.Container({style:!1}).addTo(d).cur();for(var dt=0;dt<Me.length;dt++)Ne=new e.Rectangle(ae,ae,c,b,_,S,null,null,null,!1),Me[dt]=="x"&&new e.Rectangle(ae,ae,"black",null,null,S,null,null,null,!1).alp(w).addTo(Ne),at=new e.Label({lineWidth:10,text:Me[dt],backing:Ne,font:g.font!=null?g.font:null,color:p,align:"center",valign:"center",style:!1}),at.pos(0,0,e.LEFT,e.TOP,Se).cache(),at.x=at.x+dt*(ae+5),ie.push(at);Je=xe.localToLocal(0,0,d),Se.x=Je.x+k,Se.y=Je.y+xe.height+15+Y,Se.on("click",Oe);function Oe(je){ie.indexOf(je.target)==0?_e>0&&_e--:ie.indexOf(je.target)==1?_e<xe.text.length&&_e++:Ce(),ze()}d.stage&&d.stage.update()}function Ce(){if(!Se)return d;Se.dispose(),Se=null}function me(Me){if(xe){var Ne,at;if(Me==="del")xe&&(xe.text=[xe.text.slice(0,_e-1),xe.text.slice(_e)].join("")),_e--,ut();else{ge===Ie.shift&&(Me=Me.toUpperCase());var Je=xe.text;Ne=xe.clone().removeFrom(),Ne.text=Me,at=Ne.label.getMeasuredWidth(),xe.widthArray?xe.widthArray.splice(_e,0,at):xe.widthArray=[xe.breedte],_e<xe.text.length?xe.text=[xe.text.slice(0,_e),Me,xe.text.slice(_e)].join(""):xe.text+=Me,xe&&xe.label.getBounds().width<j?(_e++,ze()):xe.text=Je}ge===Ie.shift&&!te&&(d.removeChild(Be),oe(),ge=Ie.def),ze();var dt=new $e.Event("keydown");dt.letter=Me,d.dispatchEvent(dt),d.stage&&d.stage.update()}}function Ke(Me){if(d.stage){var Ne,at=0,Je=!1;xe=Me.target,xe.widthArrayCheck||ut(),j=xe.label.lineWidth?xe.label.lineWidth:1e4,Ne=xe.globalToLocal(Me.stageX/e.scaX,Me.stageY/e.scaY),Ne.x-=xe.label.x,Ne.y-=xe.label.y;for(var dt=0;dt<xe.widthArray.length;dt++)if(at+=xe.widthArray[dt],Ne.x<at-xe.widthArray[dt]/2+xe.label.getBounds().x){_e=dt,Je=!0;break}Je||(_e=xe.text.length),ze(),C&&!Se&&xe.text.length>0&&ot(),Se&&xe&&(xe.text.length>0?(Ne=xe.localToLocal(0,0,d),Se.x=Ne.x+k,Se.y=Ne.y+xe.height+15+Y):Ce())}}function ut(){if(xe){var Me=new e.Label("");xe.widthArray=[];for(var Ne=0;Ne<xe.text.length;Ne++)Me=xe.clone().removeFrom(),Me.text=xe.text[Ne],xe.widthArray.push(Me.label.getMeasuredWidth());Me.text=xe.text,xe.widthArrayCheck=!0,ze()}}function et(Me){var Ne=!0,at;function Je(){(!xe||xe.text.length<1||d.currentIndex==0)&&(Ne=!1),Ne&&(dt(),at&&(at=e.timeout(200,Je,null,"ms"))),xe&&xe.text.length<1&&Oe()}function dt(){xe&&xe.text.length>0?(d.selectedIndex>0&&me("del"),Me?Oe():d.on("pressup",Oe)):me("del")}function Oe(){Ne=!1,at&&at.clear(),d.off("pressup",Oe)}dt(),at=e.timeout(300,Je,null,"ms"),d.stage&&d.stage.update()}function qe(){for(var Me=0;Me<t.length;Me++)t[Me].clickEvent=t[Me].on("click",Ke)}qe();function Ue(){if(t.length>1)for(var Me=0;Me<t.length;Me++)t[Me].off("click",t[Me].clickEvent)}function Ze(){if(!Ye&&(xe=t[0],j=xe&&xe.label.lineWidth?xe.label.lineWidth:1e4,xe)){Ye=new e.Rectangle(3,xe.height-(xe.paddingV&&xe.background?xe.paddingV*2:0),v,null,null,null,null,null,null,!1).center(xe),Ye.x=0,Ye.visible=!1,Ye.animate({obj:{alpha:0},rewind:!0,loop:!0,loopWait:750,time:250,id:"knipperTekst",timeUnit:"ms"});for(var Me=0;Me<t.length;Me++)t[Me].widthArray=[0];ut()}}Ze();function it(){e.stopAnimate("knipperTekst"),xe&&xe.removeChild(Ye),Ye=null,xe=null}Object.defineProperty(this,"selectedLabel",{get:function(){return xe},set:function(Me){var Ne={target:Me};Ke(Ne),d.hidePlace()}}),Object.defineProperty(this,"selectedIndex",{get:function(){return _e},set:function(Me){_e=Me,ze()}}),this.show=function(Me,Ne){if(d.addTo(L),!n(Me)){var at={target:t[Me]};Ke(at)}return Ye&&(Ye.visible=!0),d.toggled=!0,X?st():(!X||Ne)&&(d.keys.vis(!0),Ve.vis(!0)),d.numPad&&d.numPad.parent&&d.numPad.top(),d},this.hide=function(){return d.removeFrom(L),st(!1),Ye&&(Ye.visible=!1),x.update(),d.toggled=!1,d},this.showNumPad=function(){st(!0),d.toggled=!0,Ye&&(Ye.visible=!0)},this.hideNumPad=function(){st(!1),(!d.keys.parent||!d.keys.visible)&&Ye&&(Ye.visible=!1,d.toggled=!1,Ce())},this.showKeyboard=function(){d.show(null,!0)},this.hideKeyboard=function(){!d.numPad||!d.numPad.parent?d.hide():(d.keys.vis(!1),Ve.vis(!1))},this.toggle=function(Me){return Me===!0?d.show():Me===!1||d.parent?d.hide():d.show(),d},this.showPlace=function(){return ot(),d},this.hidePlace=function(){return Ce(),d},this.addLabels=function(Me){Array.isArray(Me)||(Me=[Me]);for(var Ne=Me.length-1;Ne>=0;Ne--){var at=t.indexOf(Me[Ne]);at>=0||Me[Ne].type!="Label"?Me.splice(Ne,1):Me[Ne].widthArray=[0]}return Ue(),t=t.concat(Me),qe(),Ze(),Ye&&(Ye.visible=!0),d},this.removeLabels=function(Me){Array.isArray(Me)||(Me=[Me]),Ue();for(var Ne=0;Ne<Me.length;Ne++){var at=t.indexOf(Me[Ne]);at>=0&&t.splice(at,1)}return qe(),t.length==0?xe&&it():xe&&t.indexOf(xe)==-1&&(it(),Ze()),d};var Ve=new e.Rectangle(this.width,this.height,e.clear,null,null,null,null,null,null,!1).addTo(this).expand().bot();Ve.on("mousedown",function(){}),Ve.on("click",function(){}),X&&Ve.vis(!1),this.resize=function(){if(d.scaleTo(x,100-E*2/x.width*100,50-E*2/x.height*100),d.y=x.height-d.height-E,d.x=x.width/2-d.width/2,xe&&Se){var Me=xe.localToLocal(0,0,d);Se.x=Me.x,Se.y=Me.y+xe.height+15}return d.stage&&d.stage.update(),d},this.resize(),d.selectedLabel&&(d.selectedIndex=d.selectedLabel.text.length),F&&(this.keydownEvent=function(Me){if(d.stage){var Ne=d;n(Ne)||(Me.keyCode==35&&(Ne.selectedIndex=Ne.selectedLabel.text.length),Me.keyCode==36&&(Ne.selectedIndex=0),Me.keyCode==37&&(Ne.selectedIndex=Ne.selectedIndex-1),Me.keyCode==39&&(Ne.selectedIndex=Ne.selectedIndex+1),Me.keyCode==46&&Ne.selectedIndex<Ne.selectedLabel.text.length&&(Ne.selectedIndex=Ne.selectedIndex+1,Ne.removeChar()),Me.keyCode==8&&(Me.preventDefault(),Ne.removeChar()),Ne.addChar(Me.key),d.stage&&d.stage.update())}},le.addEventListener("keydown",this.keydownEvent)),$!==!1&&e.styleTransforms(this,g),this.clone=function(){var Me=new e.Keyboard(t,r,i,o,l,c,v,w,E,S,P,A,R,T,L,I,C,k,Y,W,G,F,B,q,Z,X,ne,$,this.group,de);return d.cloneProps(Me)},this.dispose=function(Me,Ne,at){Ve.removeAllEventListeners(),Ve=null,d.keydownEvent&&le.removeEventListener("keydown",d.keydownEvent);for(var Je=0;Je<d.labels.length;Je++)d.labels[Je].removeAllEventListeners();return d.numPad&&d.numPad.dispose(),Ye&&Ye.dispose(),d.labels=xe=null,x&&x.off("pressmousemove",d.tickerMouseEvent),at||d.zimContainer_dispose(!0),!0}},e.extend(e.Keyboard,e.Container,["clone","dispose"],"zimContainer",!1),e.Organizer=function(t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,T,L,I,C,k,Y,W,G,F,B,q){var Z="width, list, useAdd, useRemove, usePosition, autoAdd, autoRemove, autoPosition, addForward, removeForward, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, color, rollColor, selectedColor, selectedRollColor, spacing, corner, keyEnabled, gradient, gloss, backdropColor, style, group, inherit",X;if(X=vt(e.Organizer,arguments,Z,this))return X;He("67.3"),this.group=B;var ne=F===!1?{}:e.getStyle("Organizer",this.group,q);if(n(t)&&(t=ne.width!=null?ne.width:r&&r.vertical?r.width:300),n(i)&&(i=ne.useAdd!=null?ne.useAdd:!0),n(o)&&(o=ne.useRemove!=null?ne.useRemove:!0),n(l)&&(l=ne.usePosition!=null?ne.usePosition:!0),n(c)&&(c=ne.autoAdd!=null?ne.autoAdd:i),n(p)&&(p=ne.autoRemove!=null?ne.autoRemove:o),n(v)&&(v=ne.autoPosition!=null?ne.autoPosition:l),n(w)&&(w=ne.addForward!=null?ne.addForward:!0),n(b)&&(b=ne.removeForward!=null?ne.removeForward:!0),n(_)&&(_=ne.backgroundColor!=null?ne.backgroundColor:e.tin),n(E)&&(E=ne.rollBackgroundColor!=null?ne.rollBackgroundColor:e.grey),n(S)&&(S=ne.selectedBackgroundColor!=null?ne.selectedBackgroundColor:e.dark),n(A)&&(A=ne.color!=null?ne.color:e.white),n(R)&&(R=ne.rollColor!=null?ne.rollColor:A),n(T)&&(T=ne.selectedColor!=null?ne.selectedColor:A),n(L)&&(L=ne.selectedRollColor!=null?ne.selectedRollColor:A),n(I)&&(I=ne.spacing!=null?ne.spacing:1),n(C)&&(C=ne.corner!=null?ne.corner:0),n(Y)&&(Y=ne.gradient!=null?ne.gradient:.2),n(W)&&(W=ne.gloss!=null?ne.gloss:null),n(G)&&(G=ne.backdropColor!=null?ne.backdropColor:null),Array.isArray(C)||(C=[C,C,C,C]),!(!i&&!l&&!o)){var $=(i?1:0)+(l?4:0)+(o?1:0),re=(t+I)/$,de={width:re,height:re,label:"",shadowColor:-1,gradient:Y,corner:C,backgroundColor:_,rollBackgroundColor:E},Q=[],U=new e.Shape;if(U.graphics.f(A).p("AAAA4Ih6B8Ig5g4IB8h8Ih7h6IA4g5IB6B8IB7h8IA5A5Ih8B6IB8B7Ig5A5g"),i&&Q.push(new e.Button({icon:U.sca(.55).rot(-45).reg(1),inherit:de})),l){var g=new e.Shape;g.graphics.f(A).p("AiJieIETCeIkTCfg"),Q.push(new e.Button({icon:g.sca(.6).rot(r&&!r.vertical?180:-90).reg(-2),inherit:de})),Q.push(new e.Button({icon:g.clone().sca(.6).rot(r&&!r.vertical?0:90).reg(-2),inherit:de}));var d=new e.Shape;d.graphics.f(A).p("AiFCLIAAkVIBXAAIAAEVgAgiAAICoiHIAAEQg"),Q.push(new e.Button({icon:d.sca(.62).rot(r&&!r.vertical?0:90).reg(0),inherit:de})),Q.push(new e.Button({icon:d.clone().sca(.62).rot(r&&!r.vertical?180:-90).reg(0),inherit:de}))}o&&Q.push(new e.Button({icon:U.clone().rot(0).sca(.55),inherit:de})),Q.length==0&&(Q=[""]),this.zimTabs_constructor(t,re,Q,_,E,null,S,P,A,R,null,T,L,!1,I,!0,!1,C,null,!0,Y,W,null,null,null,null,null,null,null,null,null,null,G);var h=this;h.list=r,h.type="Organizer",h.setButtons=function(){if(l){var O=i?1:0;Q[O+0]&&(Q[O+0].icon.rotation=h.list&&!h.list.vertical?180:-90),Q[O+1]&&(Q[O+1].icon.rotation=h.list&&!h.list.vertical?0:90),Q[O+2]&&(Q[O+2].icon.rotation=h.list&&!h.list.vertical?0:90),Q[O+3]&&(Q[O+3].icon.rotation=h.list&&!h.list.vertical?180:-90)}};var x=!1,j=r;h.change(function(O){(!x&&h.list||h.list&&h.list!=j)&&(h.list!=j&&j&&j.noChange(),h.list.change(function(){h.orgItem=h.list.selected,h.orgIndex=h.list.selectedIndex}),x=!0,j=h.list);var V=O.target.selectedIndex;i||V++,!l&&(!i||V>0)&&(V=5);var ce=n(h.list.selectedIndex)||h.list.selectedIndex<0;ce&&(h.currentValue=null),h.lastIndex=h.list.selectedIndex;var H;switch(V){case 0:c&&(H=Math.max(0,h.list.selectedIndex),h.add(H)),h.orgType="add";break;case 1:if(ce)break;v&&(H=h.list.selectedIndex,h.up(H)),h.orgType="up";break;case 2:if(ce)break;v&&(H=h.list.selectedIndex,h.down(H)),h.orgType="down";break;case 3:if(ce)break;v&&(H=h.list.selectedIndex,h.toTop(H)),h.orgType="top";break;case 4:if(ce)break;v&&(H=h.list.selectedIndex,h.toBottom(H)),h.orgType="bottom";break;case 5:if(ce)break;p&&(H=h.list.selectedIndex,h.remove(H)),h.orgType="remove";break}}),this.add=function(O,V,ce){return n(O)&&(O=h.lastIndex),n(V)&&(V=""),w?O=Math.min(h.list.length,Math.max(0,h.list.selectedIndex)+1):O=Math.max(0,h.list.selectedIndex),h.list.addAt(V,O,ce),h.list.selectedIndexPlusPosition=O,h.orgItem=h.list.selected,h.orgIndex=h.list.selectedIndex,h},this.up=function(O){n(O)&&(O=h.lastIndex);var V=h.list.items[O];return n(V)||(h.list.removeAt(1,O),h.list.addAt(V,O-1),h.list.selectedIndexPlusPosition=Math.max(0,O-1),h.orgItem=h.list.selected,h.orgIndex=h.list.selectedIndex),h},this.down=function(O){n(O)&&(O=h.lastIndex);var V=h.list.items[O];return n(V)||(h.list.removeAt(1,O),h.list.addAt(V,O+1),h.list.selectedIndexPlusPosition=Math.min(h.list.length-1,O+1),h.orgItem=h.list.selected,h.orgIndex=h.list.selectedIndex),h},this.toTop=function(O){n(O)&&(O=h.lastIndex);var V=h.list.items[O];return n(V)||(h.list.removeAt(1,O),h.list.addAt(V,0),h.list.first(),h.orgItem=h.list.selected,h.orgIndex=h.list.selectedIndex),h},this.toBottom=function(O){n(O)&&(O=h.lastIndex);var V=h.list.items[O];if(!n(V))return h.list.removeAt(1,O),h.list.addAt(V,h.list.length),h.list.last(),h.orgItem=h.list.selected,h.orgIndex=h.list.selectedIndex,h},this.remove=function(O){if(n(O))if(h.list.selectedIndex>=0)O=h.list.selectedIndex;else return h;var V=O==h.list.selectedIndex;return h.removedItem=h.list.items[O],h.list.removeAt(1,O),V?b||(O=Math.max(0,O-1)):O=h.list.selectedIndex,h.list.selectedIndexPlusPosition=Math.min(h.list.length-1,O),h.orgItem=h.list.selected,h.orgIndex=h.list.selectedIndex,h},F!==!1&&e.styleTransforms(this,ne),this.clone=function(){return h.cloneProps(new e.Organizer(t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,T,L,I,C,k,Y,W,G,F,h.group,q))},this.dispose=function(O,V,ce){return Q=null,ce||h.zimTabs_dispose(!0),!0}}},e.extend(e.Organizer,e.Tabs,["clone","dispose"],"zimTabs",!1),e.Connectors=function(t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,T,L,I,C,k,Y,W,G,F,B,q,Z,X,ne,$,re,de,Q,U,g,d){var h="width, height, points, node, line, linear, linearWrap, linearOrder, num, snapH, snapV, dropType, dropArray, continuous, startIndex, duplicateLine, deleteNode, dblclick, fullMove, min, max, boundary, expand, nodeRollColor, nodeRollBorderColor, nodeSelectedColor, nodeSelectedBorderColor, baseColor, baseBorderColor, baseRollover, rootLock, grandChildren, dblclickTime, steps, style, group, inherit",x;if(x=vt(e.Connectors,arguments,h,this))return x;He("67.39"),this.group=g;var j=U===!1?{}:e.getStyle("Connectors",this.group,d);n(t)&&(t=j.width!=null?j.width:null),n(r)&&(r=j.height!=null?j.height:null),this.zimContainer_constructor(null,null,null,null,!1),this.type="Connectors",n(i)&&(i=j.points!=null?j.points:[[0,0],[100,0],[100,100],[0,100]]),n(o)&&(o=j.node!=null?j.node:new e.Circle(10,e.grey,e.grey)),o.removeFrom(),o.color==e.clear&&!o.hitArea&&o.expand(0),n(l)&&(l=j.line!=null?j.line:new e.Line({length:10,thickness:3,color:e.tin,strokeObj:{caps:"round"}})),n(w)&&(w=j.num!=null?j.num:10),n(c)&&(c=j.linear!=null?j.linear:!1),n(p)&&(p=j.linearWrap!=null?j.linearWrap:!0),n(G)&&(G=j.nodeRollColor!=null?j.nodeRollColor:o.color.match("rgb")?o.color:o.color.lighten(.2)),n(F)&&(F=j.nodeRollBorderColor!=null?j.nodeRollBorderColor:o.borderColor),n(B)&&(B=j.nodeSelectedColor!=null?j.nodeSelectedColor:e.white),n(q)&&(q=j.nodeSelectedBorderColor!=null?j.nodeSelectedBorderColor:o.borderColor),n(Z)&&(Z=j.baseColor!=null?j.baseColor:o.color),n(X)&&(X=j.baseBorderColor!=null?j.baseBorderColor:o.borderColor),n(ne)&&(ne=j.baseRollover!=null?j.baseRollover:!1),n(C)&&(C=j.min!=null?j.min:o.radius?o.radius*2:Math.min(o.width,o.height)),n(k)&&(k=j.max!=null?j.max:null),n(W)&&(W=j.expand!=null?j.expand:e.mobile()?10:0),n(E)&&(E=j.dropType!=null?j.dropType:"any"),n(S)&&(S=j.dropArray!=null?j.dropArray:null),n(P)&&(P=j.continuous!=null?j.continuous:!1),n(A)&&(A=j.startIndex!=null?j.startIndex:null),n(R)&&(R=j.duplicateLine!=null?j.duplicateLine:!0),n(T)&&(T=j.deleteNode!=null?j.deleteNode:!0),n(L)&&(L=j.dblclick!=null?j.dblclick:!0),n(I)&&(I=j.fullMove!=null?j.fullMove:!0),n(de)&&(de=j.dblclickTime!=null?j.dblclickTime:.5);var O=y(de);if(de*=O=="s"?1e3:1,n(b)&&(b=j.snapH!=null?j.snapH:null),n(_)&&(_=j.snapV!=null?j.snapV:null),n($)&&($=j.rootLock!=null?j.rootLock:!1),n(re)&&(re=j.grandChildren!=null?j.grandChildren:!0),n(Q)&&(Q=j.steps!=null?j.steps:null),c&&i.length<=1){Ct&&lt("Connector() - linear needs more than one point");return}var V=this,ce=0;V.node=o,V.line=l;var H=[],N=o.color,ue=o.borderColor,fe=V.lines=new e.Container(t,r).addTo(V),ae=V.nodes=new e.Container(t,r).addTo(V);if(i.type=="Blob"||i.type=="Squiggle"){var Ie=[];e.loop(i.points,function(Le){Ie.push([Le[0],Le[1]])}),i=Ie}V.points=i,this.addNode=function(Le,ze,ot){if(!c)return ge(Le,ze,ot)};function ge(Le,ze,ot,Ce){if(Le.addChild){E="on",$=!0,re=!1,ot=Le,ot.connectorMoveEvent||(V.bases||(V.bases=[]),V.bases.push(ot),ot.connectorMoveEvent=ot.on("pressmove",function(){ot.positionConnectors(ot,!0,!0)}),ot.connectorUpEvent=ot.on("pressup",function(){ot.positionConnectors(ot,!0,!0)}),ne&&(ot.connectorOverEvent=ot.on("mouseover",function(){Ae(ot)}),ot.connectorOutEvent=ot.on("mouseout",function(){ye(ot)})),ot.positionConnectors=function(et,qe,Ue){e.loop(et.connectors,function(Ze){var it=et.parent.localToLocal(et.x-et.baseStart.x+Ze.nodeStart.x,et.y-et.baseStart.y+Ze.nodeStart.y,Ze.parent);Ze.x=it.x,Ze.y=it.y,Qe(Ze,qe,Ue)}),et.stage&&et.stage.update()},ot.setConnectorColors=function(et,qe,Ue,Ze){return n(et)||(ot.connectorColor=et),n(qe)||(ot.connectorBorderColor=qe),n(Ue)||(ot.connectorRollColor=Ue),n(Ze)||(ot.connectorRollBorderColor=Ze),e.loop(ot.connectors,function(it){n(et)||(it.color=et),n(qe)||(it.borderColor=qe)}),ot},ot.setConnectorColors(Z,X,G,F));var me=ot.getBounds();l.endHead,Array.isArray(ze)||(ze=[ze,ze]);var Ke=[];return ze.length==2&&(ze=[ze[0],ze[1],ze[0],ze[1]]),(l.lineOrientation==e.HORIZONTAL||l.lineOrientation=="auto")&&e.loop([ze[0],ze[1]],function(et,qe){if(et==-1||et==-2){var Ue=ot.localToLocal(qe==0?me.x:me.x+me.width,me.y,V);Ke.push([Ue.x,Ue.y,e.HORIZONTAL])}if(et==-1||et==-3){var Ze=ot.localToLocal(qe==0?me.x:me.x+me.width,me.y+me.height,V);Ke.push([Ze.x,Ze.y,e.HORIZONTAL])}et>0&&e.loop(et,function(it,Ve){var Me=ot.localToLocal(qe==0?me.x:me.x+me.width,me.y+me.height*(it+1)/(Ve+1),V);Ke.push([Me.x,Me.y,e.HORIZONTAL])})}),(l.lineOrientation==e.VERTICAL||l.lineOrientation=="auto")&&e.loop([ze[2],ze[3]],function(et,qe){if(et==-1||et==-2){var Ue=ot.localToLocal(me.x,qe==0?me.y:me.y+me.height,V);Ke.push([Ue.x,Ue.y,e.VERTICAL])}if(et==-1||et==-3){var Ze=ot.localToLocal(me.x+me.width,qe==0?me.y:me.y+me.height,V);Ke.push([Ze.x,Ze.y,e.VERTICAL])}et>0&&e.loop(et,function(it,Ve){var Me=ot.localToLocal(me.x+me.width*(it+1)/(Ve+1),qe==0?me.y:me.y+me.height,V);Ke.push([Me.x,Me.y,e.VERTICAL])})}),ot.connectors=[],ot.baseStart=new e.Point(ot.x,ot.y),e.loop(Ke,function(et){var qe=ge(et[0],et[1],ot,et[2]);Fe(ot,qe)}),setTimeout(function(){ot.positionConnectors(ot,!0,!0)},50),V}var ut=o.clone().loc(Le,ze,ae).drag({boundary:Y}).expand(W);return ut.orientation=Ce,ut.nodeColor=ut.color,ut.on("mouseover",Ye),ut.on("mouseout",te),ut.on("mousedown",pe),ut.on("pressmove",be),ut.on("pressup",he),T&&ut.hold(z),ut.nodeNum=ce++,ut.creations=[],ut}function Be(){e.loop(i,function(Le,ze){var ot=ge(Le[0],Le[1]);ot.dropIndex=ze,S&&(ot.dropArray=S[ze])}),c&&ae.loop(function(Le,ze,ot){ze==0?(p?Le.before=ae.getChildAt(ot-1):Le.before=null,Le.after=ae.getChildAt(ze+1)):ze==ot-1?(p?Le.after=ae.getChildAt(0):Le.after=null,Le.before=ae.getChildAt(ze-1)):(Le.before=ae.getChildAt(ze-1),Le.after=ae.getChildAt(ze+1)),v&&ze>0&&Le.noMouse()})}Be(),V.setAvailableIndexes=function(Le){return Array.isArray(Le)||(Le=[Le]),V.nodes.loop(function(ze,ot){Le.indexOf(ot)==-1?ze.noMouse():ze.mouse()}),V},n(A)||V.setAvailableIndexes(A),V.keyEvent=function(Le){T&&Le.keyCode==46&&(e.loop(K,function(ze){ze&&ze.parent&&st(ze)}),V.stage&&V.stage.update())},le.addEventListener("keydown",V.keyEvent);function z(Le){var ze=Le.target.stage,ot=Le.target;V.bases||$&&!ot.creator.creator||(ot.adding?st(ot.creator):st(ot),V.stage&&V.stage.update())}function Ye(Le){var ze=Le.target;ze.selected||(ze.color=ze.base?ze.base.connectorRollColor:G,ze.borderColor=ze.base?ze.base.connectorRollBorderColor:F,V.stage&&V.stage.update())}function te(Le){var ze=Le.target;ze.selected||(ze.color=ze.base?ze.base.connectorColor:ze.nodeColor,ze.borderColor=ze.base?ze.base.connectorBorderColor:ue,V.stage&&V.stage.update())}var K=[],xe,_e=0,Se,ie;function pe(Le,ze,ot,Ce){var me=Le.target;if(!n(me)&&(ot&&(me.selected=!0,K=[],V.selectNode(me,!Ce)),ie=me.nodeNum,!c&&(!$||me.creator)&&L&&!ze&&(_e==0&&(Se=setTimeout(function(){if(_e=0,K){var qe=V.stage?V.stage.frame:le.zdf,Ue=ae.loop(function(Ze){if(Ze.hitTestPoint(qe.mouseX,qe.mouseY)&&Ze.selected)return!1});Ue&&We()}},de)),_e++),me.startX=me.x,me.startY=me.y,!c&&K.length>0&&e.loop(K,function(qe){qe.startX=qe.x,qe.startY=qe.y}),!(me.creations.length>=w||me.selected||me.creator&&!re))){me.adding=!0;var Ke=ge(me.x,me.y).bot();Ke.creations=me.creations,Ke.creatorLine=me.creatorLine,Ke.creator=me.creator,Ke.orientation=me.orientation,Ke.startX=me.startX,Ke.startY=me.startY,Ke.dropIndex=me.dropIndex,Ke.dropArray=me.dropArray,Ke.lineArray=me.lineArray,Ke.color=Ke.nodeColor=me.nodeColor;var ut=Ke.nodeNum;if(Ke.nodeNum=me.nodeNum,me.nodeNum=ut,me.base&&(Ke.base=me.base,Ke.baseStart=me.baseStart,Ke.nodeStart=me.nodeStart,Ke.connectors=me.connectors,me.base=me.baseStart=me.nodeStart=me.connectors=null,Ke.base.connectors&&Ke.base.connectors.splice(Ke.base.connectors.indexOf(me),1,Ke),Ke.color=Ke.base.connectorColor,Ke.borderColor=Ke.base.connectorBorderColor),Ke.before=me.before,Ke.after=me.after,Ke.before&&(Ke.before.after=Ke),Ke.after&&(Ke.after.before=Ke),Ke.creator){var et=Ke.creator.creations.indexOf(me);et!=-1&&Ke.creator.creations.splice(et,1,Ke)}e.loop(Ke.creations,function(qe){qe.creator=Ke}),me.creator=Ke,me.creatorLine=l.clone().setPoints(me.x,me.y,me.x,me.y).addTo(fe).alp(0),me.creatorLine.lineOrientation=me.orientation,me.creatorLine.node=me,me.creatorLine.creatorNode=Ke,me.creations=[],me.veeObj&&!n(me.veeObj.color)?me.color=e.Pick.choose(me.veeObj.color):me.color=Ke.color,me.nodeColor=me.color,Ke.creations.push(me),V.latestNode=me}}function be(Le,ze,ot,Ce){var me=Le.target;me.creatorLine&&me.creatorLine.alp(1),!c&&K.length>0&&K.indexOf(me)==-1&&We(),Qe(me,!1,!0),V.bases&&e.loop(V.bases,function(Ke){me.creator&&me.creator.base==Ke||(!Ke.connectorsOn&&me.hitTestBounds(Ke)&&Ae(Ke),Ke.connectorsOn&&!me.hitTestBounds(Ke)&&ye(Ke))}),V.stage&&V.stage.update()}function he(Le,ze,ot,Ce){var me=Le.target;V.bases&&e.loop(V.bases,function(Je){Je!=me.base&&Je.connectorsOn&&ye(Je)});var Ke=!1;if(!c&&_e>1&&!ze){clearTimeout(Se);var ut=me.adding?me.creator:me;if(me.adding&&st(ut.creations[ut.creations.length-1],!0),!ut.selected){var et=V.stage?V.stage.frame:le.zdf;oe(ut,!et.ctrlKey)}_e=0,Ke=!0}if(!c&&!V.base&&(b&&(me.x=Math.round(me.x/b)*b),_&&(me.y=Math.round(me.y/_)*_)),C&&e.dist(me.x,me.y,me.startX,me.startY)<C||k&&e.dist(me.x,me.y,me.startX,me.startY)>k){me.adding?st(me,!0):(me.loc(me.startX,me.startY),Ke||Qe(me)),V.stage&&V.stage.update(),V.lastNode=null,V.targetNode=null,V.dispatchEvent("noconnection");return}var qe=!1,Ue=!1;if(c){var Ze=me.creator;if(V.connectionStart=Ze,V.connectionEnd=me,Ze.before&&me.hitTestCircle(Ze.before)&&!v)me.loc(Ze.before).removeFrom(),Ze.before.after=null,Ze.before.before||Ze.before.noMouse(),Ze.before=null,Ze.after||Ze.noMouse(),Ue=!0,qe=Ge();else if(Ze.after&&me.hitTestCircle(Ze.after))me.loc(Ze.after).removeFrom(),Ze.after.before=null,Ze.after.after||Ze.after.noMouse(),v&&Ze.after.mouse(),Ze.after=null,Ze.before||Ze.noMouse(),v&&Ze.noMouse(),Ue=!0,qe=Ge();else if(!Ze||me.creations.length>0)me.loc(me.startX,me.startY).bot();else{st(me,!0),V.stage&&V.stage.update(),V.lastNode=null,V.targetNode=null,V.dispatchEvent("noconnection");return}}else if(E=="off"){var it=ae.loop(function(Je){if(me!=Je&&me.hitTestCircles(Je)){me.adding?st(me,!0):(me.loc(me.startX,me.startY),Qe(me)),$&&ke(me),!I&&me.creator&&w>0&&me.creator.creations.length>=w&&me.creator.noMouse(),V.targetNode=Je,P&&V.nodes.loop(function(dt){dt!=V.latestNode&&dt.noMouse()}),P&&V.nodes.loop(function(dt){dt!=V.latestNode&&dt.noMouse()}),Pe(),V.dispatchEvent("connection"),V.stage&&V.stage.update();return}});if(!it){ve(me);return}}else if(E=="on"||E=="single"){var Ve=0,Me,Ne=ae.loop(function(Je){if(me!=Je&&me.hitTestCircles(Je)){if(Me=Je,V.bases&&(me.orientation!=Je.orientation||me.creator&&me.creator.base&&me.creator.base==Je.base)||me.dropArray&&me.dropArray.indexOf(Je.dropIndex)==-1||!R&&me.lineArray&&me.lineArray.indexOf(Je.dropIndex)!=-1)return;if(E=="on")return!1;Ve++,Ve+=Je.creations.length}});if(Ne&&!(E=="single"&&Ve==1)){ve(me);return}else{if(me.loc(Me),me.creator&&me.orientation==e.VERTICAL&&Math.round(me.y)==Math.round(me.creator.startY)||me.creator&&me.orientation==e.HORIZONTAL&&Math.round(me.x)==Math.round(me.creator.startX))return;V.targetNode=Me;var at=me.dropIndex;me.dropIndex=Me.dropIndex,me.dropArray=e.copy(Me.dropArray),Me.lineArray?Me.lineArray.push(at):Me.lineArray=[at],me.lineArray=e.copy(Me.lineArray),me.creator&&(me.creator.lineArray||(me.creator.lineArray=[]),me.creator.lineArray.push(me.dropIndex)),Me.base&&Me.base.connectors&&Fe(Me.base,me),Ue=!0}}else me.selected||(Ue=!0);!I&&me.creator&&w>0&&me.creator.creations.length>=w&&me.creator.noMouse(),me.adding=!1,Qe(me,!0,!0),e.loop(K,function(Je){if(K.indexOf(Je.creator)==-1){var dt=e.loop(Je.creations,function(Oe){if(K.indexOf(Oe)>=0)return!1});Pe(Je.nodeNum,null,e.decimals(Je.x,2),e.decimals(Je.y,2),dt||dt===void 0?1:0)}Je.startX=Je.x,Je.startY=Je.y}),me.startX=me.x,me.startY=me.y,$&&ke(me),Ue?(P&&V.nodes.loop(function(Je){Je!=V.latestNode&&Je.noMouse()}),Pe(),V.dispatchEvent("connection"),e.arraysEqual(me.dropArray,me.lineArray,!1)&&V.dispatchEvent("blocked")):V.dispatchEvent("noconnection"),qe&&V.dispatchEvent("complete"),V.stage&&V.stage.update()}function Pe(Le,ze,ot,Ce,me){ze?H.push([Le,null,null,1]):n(ot)?H.push([ie,e.decimals(V.latestNode.x,2),e.decimals(V.latestNode.y,2)]):H.push([Le,null,null,null,ot,Ce,me])}V.makeConnection=function(Le,ze,ot,Ce,me){var Ke=V.stage?V.stage.frame:le.zdf;return Ce?(Ke.ctrlKey=me==1,pe({target:Le},!0,!0,me),Le.loc(ze,ot),be({target:Le},!0,!0,me),he({target:Le},!0,!0,me)):(pe({target:Le},!0,!1,null),V.latestNode.loc(ze,ot),be({target:V.latestNode},!0,!1,null),he({target:V.latestNode},!0,!1,null)),Ke.ctrlKey=!1,V.latestNode};function Re(Le){var ze=V.nodes.loop(function(ot){if(ot.nodeNum==Le)return ot});if(ze.type)return ze}V.setSteps=function(Le){return e.loop(Le,function(ze){var ot=Re(ze[0]);ot&&(ze[3]?ot&&st(ot):n(ze[4])?V.makeConnection(ot,ze[1],ze[2]):(V.makeConnection(ot,ze[4],ze[5],!0,ze[6]),We()))}),V},V.applySteps=V.setSteps,V.getSteps=function(Le){return Le&&(V.stage||(V.stage=zdf.stage),V.pane||(V.pane=new e.Pane({displayClose:!1,container:V.stage,width:Math.min(500,V.stage.width-20),height:Math.min(500,V.stage.height-20),draggable:!0}),V.textArea=new e.TextArea(Math.min(400,V.stage.width-70),Math.min(400,V.stage.height-70)).centerReg(V.pane)),V.pane.show(),V.textArea.text=JSON.stringify(H)),H},Object.defineProperty(this,"steps",{get:function(){return H},set:function(Le){V.setSteps(Le)}});function ve(Le){Le.adding||!re?st(Le,!0):(Le.loc(Le.startX,Le.startY),Qe(Le)),$&&ke(Le),Le.base&&Le.base.connectors&&De(Le.base,Le),V.lastNode=null,V.targetNode=null,V.dispatchEvent("noconnection"),V.stage&&V.stage.update()}function Ae(Le){e.loop(Le.connectors,function(ze){ze.color=Le.connectorRollColor,ze.borderColor=Le.connectorRollBorderColor}),Le.connectorsOn=!0,Le.stage&&Le.stage.update()}function ye(Le){e.loop(Le.connectors,function(ze){ze.color=Le.connectorColor,ze.borderColor=Le.connectorBorderColor}),Le.connectorsOn=!1,Le.stage&&Le.stage.update()}function Fe(Le,ze){Le.connectors.push(ze),ze.nodeStart=ze.parent.localToLocal(ze.x,ze.y,Le.parent),ze.nodeStart.x-=Le.x-Le.baseStart.x,ze.nodeStart.y-=Le.y-Le.baseStart.y,ze.base=Le}function De(Le,ze){Le.connectors.splice(Le.connectors.indexOf(ze),1),ze.nodeStart=null,ze.base=null}function ke(Le){if(Le.creator){if(Le.creator.creator){ke(Le.creator);return}Le.creator&&Le.creator.creations.length>=w?Le.creator.noMouse():Le.creator.mouse()}}function oe(Le,ze){ze&&e.loop(Le.creations,function(ot){oe(ot,ze)}),Le.selected=!0,Le.color=Le.base?Le.base.connectorColor:B,Le.borderColor=Le.base?Le.base.connectorBorderColor:q,K.push(Le),Le.top(),xe||(xe=V.stage.on("stagemousedown",function(){var ot=V.stage?V.stage.frame:le.zdf,Ce=ae.loop(function(me){if(me.hitTestPoint(ot.mouseX,ot.mouseY))return!1});Ce&&We()}))}this.selectNode=function(Le,ze){oe(Le,ze)};function Ge(){var Le=ae.loop(function(ze){if(ze.before||ze.after)return!1});if(Le)return ae.loop(function(ze){ze.noMouse()}),!0}function We(){e.loop(K,function(Le){Le.selected=!1,Le.color=Le.base?Le.base.connectorColor:Le.nodeColor,Le.borderColor=Le.base?Le.base.connectorBorderColor:ue}),K=[],V.stage.off("stagemousedown",xe),xe=null,V.stage&&V.stage.update()}function Qe(Le,ze,ot){var Ce=K.length>0?K:[Le];e.loop(Ce,function(me){me!=Le&&me.loc(me.startX+Le.x-Le.startX,me.startY+Le.y-Le.startY),me.creator&&me.creatorLine.setPoints(me.x,me.y,me.creator.x,me.creator.y,ze,ot),e.loop(me.creations,function(Ke){Ke.creatorLine.setPoints(Ke.x,Ke.y,Ke.creator.x,Ke.creator.y,ze,ot)})})}function st(Le,ze){if(e.loop(Le.creations,function(Ce){st(Ce)},!0),Le.creatorLine){Le.creatorLine.removeFrom();var ot=Le.creator.creations.indexOf(Le);ot!=-1&&Le.creator.creations.splice(ot,1),!Le.creator.mouseEnabled&&!($&&!Le.creator.creator)&&Le.creator.mouse()}return Le.removeFrom(),Le.removeAllEventListeners(),ze?ce--:Pe(Le.nodeNum,1),Le=null,V}this.removeNode=function(Le){st(Le)},this.removeConnectors=function(){e.loop(ae,function(Le){st(Le)},!0),Be(),V.stage&&V.stage.update()},this.removeBase=function(Le){e.loop(Le.connectors,function(ze){st(ze)}),yt(Le)},this.addBase=function(Le,ze){ge(Le,ze)};function yt(Le){Le.off("pressmove",Le.connectorMoveEvent),Le.off("pressup",Le.connectorUpEvent),Le.connectorOverEvent&&Le.off("mouseover",Le.connectorOverEvent),Le.connectorOutEvent&&Le.off("mouseout",Le.connectorOutEvent),Le.connectors=null,Le.baseStart=null,Le.positionConnectors=Le.setConnectorColors=null,Le.connectorColor=Le.connectorBorderColor=Le.connectorRollColor=Le.connectorRollBorderColor=null,V.bases.splice(V.bases.indexOf(Le),1),V.stage&&V.stage.update()}Q&&V.added(function(){V.setSteps(Q),V.stage.update()}),Object.defineProperty(this,"selectedList",{get:function(){return K},set:function(){Ct&&lt("Selectors() - selectedList is read only")}}),this.dispose=function(Le,ze,ot){return V.nodes.loop(function(Ce){Ce.removeFrom(),Ce.removeAllEventListeners(),Ce=null},!0),V.lines.loop(function(Ce){Ce.removeFrom(),Ce=null},!0),le.removeEventListener("keydown",V.keyEvent),V.keyEvent=null,V.bases&&e.loop(V.bases,function(Ce){yt(Ce)}),ot||(V.zimContainer_dispose(!0),V.stage&&V.stage.update()),!0},U!==!1&&e.styleTransforms(this,j),this.clone=function(){return V.cloneProps(new e.Connectors(t,r,i,o,l,c,p,v,w,b,_,E,e.copy(S),P,A,R,T,L,I,C,k,Y,W,G,F,B,q,Z,X,ne,$,re,de,Q,U,V.group,d))}},e.extend(e.Connectors,e.Container,["clone","dispose"],"zimContainer",!1),e.Marquee=function(t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,T){var L="width, height, items, time, transition, speed, direction, marginLeft, marginRight, marqueeType, borderColor, borderWidth, refresh, mix, style, group, inherit",I;if(I=vt(e.Marquee,arguments,L,this))return I;He("67.4"),this.group=R;var C=A===!1?{}:e.getStyle("Marquee",this.group,T),k=this;n(t)&&(t=C.width!=null?C.width:300),n(r)&&(r=C.height!=null?C.height:100);var Y=y(o);n(o)&&(o=C.time!=null?C.time:Y=="s"?5:5e3),n(l)&&(l=C.transition!=null?C.transition:"slide"),n(_)&&(_=C.borderColor!=null?C.borderColor:e.dark),n(E)&&(E=C.borderWidth!=null?C.borderWidth:1),_<0||E<0?_=E=null:_!=null&&E==null&&(E=1),n(v)&&(v=C.marginLeft!=null?C.marginLeft:25),n(w)&&(w=C.marginRight!=null?C.marginRight:25),n(c)&&(c=C.speed!=null?C.speed:Y=="s"?.5:500),a(c,Y),n(p)&&(p=C.direction!=null?C.direction:"right"),n(S)&&(S=C.refresh!=null?C.refresh:Y=="s"?30*60:30*60*1e3),n(P)&&(P=C.mix!=null?C.mix:!0),this.zimContainer_constructor(t+v+w,r,null,null,!1),this.type="Marquee",this.speed=c;var W=new e.Rectangle(t-1,r-1,e.clear).addTo(k).mov(v+.5,.5),G=this.content=new e.Container(t,r).loc(v,0,k).setMask(W),F=this.pages=new e.Pages(null,l,c,null,G).addTo(G),B=!1;this.add=function(O,V,ce,H,N){n(N)&&(N=!0),O.scaleTo(G,100,100),V&&O.cur().on("click",function(){nr(V,ce)}),F.addPage(O),N&&F.center(),O.marqueeViews=0,O.marquee=k,B||q(),H||U(),j&&j.top()},this.remove=function(O){if(k.selected==O){if(k.pages.pages.length==1)return;var V=k.selectedIndex+1;V==k.pages.pages.length&&(V=0),k.pages.go(V,null,null,0),setTimeout(function(){k.pages.removePage(O),O.dispose&&O.dispose(),U()},20)}else k.pages.removePage(O),O.dispose&&O.dispose(),U()};function q(){B=!0,k.selectedIndex=0,k.selected=F.pages[k.selectedIndex].page,k.lastSelected=null,k.selected.marqueeOn&&k.selected.marqueeOn(),k.interval=e.interval(o,function(){k.go()})}if(!n(i)&&!Array.isArray(i)&&(i=[i]),i&&i.length>0&&(P&&e.shuffle(i),e.loop(i,function(O){k.add(O,null,null,!0)})),S>0)var Z=e.timeout(S*(Y=="s"?1e3:1),function(){location.reload()},null,"ms");k.go=function(O){if(k.selected.marqueeViews+=1,k.selected.marqueeOff&&k.selected.marqueeOff(),O)k.selected=O,e.loop(F.pages,function(ce,H){if(ce.page==O){k.selectedIndex=H;return}}),k.interval.interval=k.selected.marqueeTime?k.selected.marqueeTime:o,k.interval.pause(de.toggled,null,!0);else{var V=k.selectedIndex+1;k.selectedIndex=V%F.pages.length,k.selected=F.pages[k.selectedIndex].page,k.interval.time=k.selected.marqueeTime?k.selected.marqueeTime:o}k.dispatchEvent("page"),k.selected.marqueeOn&&k.selected.marqueeOn(),F.go(k.selected,p,l,c)},F.on("pagetransitioned",function(){k.dispatchEvent("pagetransitioned"),k.indicator&&(k.indicator.selectedIndex=k.selectedIndex)});var X=!1,ne=k.left=new e.Container(v-4,r-4),$=new e.Shape().sca(.6);$.graphics.f(e.light).mt(0,0).p("AAhCLIAAkVIBXAAIAAEVgAh3CLIAAkVIBXAAIAAEVg");var re=new e.Shape().sca(.6).reg(-2,0);re.graphics.f(e.light).mt(0,0).p("AiJieIETCeIkTCfg");var de=k.button=new e.Button({label:"",icon:$,toggleIcon:re,width:45,height:45,corner:0,shadowBlur:0}).scaleTo(ne,100).pos(0,0,!1,!0,ne);de.on("click",function(){k.interval&&k.interval.pause(de.toggled),X=de.toggled,k.stage.update()});var Q;function U(){if(!(n(v)||v==0)){var O=4*v/25;ne.pos(v-ne.width-O,O/2,!1,!0,k),k.indicator&&(k.indicator.dispose(),k.indicator.removeFrom()),Q||(Q=new e.Proportion(8,16,ne.width+O,ne.width/2+O,-1)),k.indicator=new e.Indicator({width:(F.pages.length<=2?F.pages.length:F.pages.length-1)*(ne.width-3),height:Q.convert(F.pages.length),num:F.pages.length,shadowBlur:-1,interactive:!0,scale:1.2,indicatorType:b}),k.indicator.fit(0,0,r-de.height,de.width),k.indicator.rot(p=="down"?-90:90).center(ne).pos(null,ne.width-O/2,null,!0),k.indicator.selectedIndex=k.selectedIndex,k.indicator.on("change",function(){k.go(F.pages[k.indicator.selectedIndex].page)})}}if(U(),!n(w)&&w>0&&le.zdf&&le.zdf){var g=4*w/25,d=k.right=new e.Container(45,270),h=k.icon=le.zdf.makeIcon(e.grey,e.lighter,e.silver).sca(.5).pos(0,0,!0,!0,d).mov(0,0).cur();h.on("mouseover",function(){x.animate({props:{scaleX:1},time:500,ease:"backOut",override:!0,timeUnit:"ms"}),h.stage.update()}),h.on("mouseout",function(){x.animate({props:{scaleX:0},time:300,ease:"backIn",override:!0,timeUnit:"ms"}),h.stage.update()}),h.on("mousedown",function(){nr("https://zimjs.com/marquee","_blank")});var x=k.label=new e.Label({text:"MARQUEE",color:e.dark,backgroundColor:e.lighter,shiftV:1,paddingV:5}).rot(-90).pos(0,13,!0,!1,d).reg(-10).sca(0,1).mov(0);d.fit(0,0,w-g,r-g),d.pos(w-d.width-g,g/2,!0,!0,k)}if(k.stage&&k.stage.update(),this.pause=function(O,V){n(O)&&(O=!0),O!=X&&(X=O,k.interval.pause(O,V),k.button.toggle(O))},Object.defineProperty(this,"paused",{get:function(){return X},set:function(){Ct&&lt("Marquee() - paused is read only - use pause()")}}),Object.defineProperty(this,"time",{get:function(){return o},set:function(O){o=O,k.interval.time=o}}),this.load=function(O,V){var ce=[];P&&e.shuffle(O),e.loop(O,function(N){Array.isArray(N)?ce.push(N[0]):ce.push(N)});var H=k.stage?k.stage.frame:le.zdf;return k.marqueeLoader=H.loadAssets(ce,V),k.loadEvent=k.marqueeLoader.on("assetload",function(N){var ue=O[N.asset.id],fe,ae;Array.isArray(ue)?(fe=ue[0],ae=ue[1]):(fe=ue,ae="_self"),k.add(N.asset,fe,ae),U()}),k},!n(_)){var j=new e.Rectangle(t-1,r-1,e.clear,_,E).loc(W,null,k);j.mouseEnabled=!1}A!==!1&&e.styleTransforms(this,C),this.clone=function(){return k.cloneProps(new e.Marquee(t,r,i,o,l,c,p,b,_,E,S,P,A,this.group,T))},this.dispose=function(O,V,ce){return Z&&Z.clear(),k.interval&&k.interval.clear(),k.loadEvent&&k.marqueeLoader.off("assetload",k.loadEvent),F.dispose(),F=null,ce||this.zimContainer_dispose(!0),!0}},e.extend(e.Marquee,e.Container,["clone","dispose"],"zimContainer"),e.Carousel=function(t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,T,L,I,C){var k="items, viewNum, time, spacing, backgroundColor, backing, padding, paddingH, paddingV, arrowLeft, arrowRight, arrowGap, valign, ease, swipe, remember, selectedIndex, style, group, inherit",Y;if(Y=vt(e.Carousel,arguments,k,this))return Y;He("67.45"),this.group=I;var W=L===!1?{}:e.getStyle("Carousel",this.group,C),G=this;this.zimContainer_constructor(),n(t)&&(t=W.items!=null?W.items:[new Ln({color:red}),new Ln({color:orange}),new Ln({color:yellow}),new Ln({color:green}),new Ln({color:blue}),new Ln({color:purple}),new Ln({color:pink})]),n(l)&&(l=W.backgroundColor!=null?W.backgroundColor:e.clear),n(c)&&(c=W.backing!=null?W.backing:null),n(S)&&(S=W.valign!=null?W.valign:"center"),n(r)&&(r=W.viewNum!=null?W.viewNum:3),n(o)&&(o=W.spacing!=null?W.spacing:20),n(p)&&(p=W.padding!=null?W.padding:0),n(v)&&(v=W.paddingH!=null?W.paddingH:p),n(w)&&(w=W.paddingV!=null?W.paddingV:p),n(b)&&(b=W.arrowLeft!=null?W.arrowLeft:new e.Arrow().rot(180)),n(_)&&(_=W.arrowRight!=null?W.arrowRight:new e.Arrow),n(E)&&(E=W.arrowGap!=null?W.arrowGap:20);var F=y(i);n(i)&&(i=W.time!=null?W.time:F=="s"?.2:200),n(P)&&(P=W.ease!=null?W.ease:"quadInOut"),n(A)&&(A=W.swipe!=null?W.swipe:!0),n(R)&&(R=W.remember!=null?W.remember:"zimCarousel"),n(T)&&(T=W.selectedIndex!=null?W.selectedIndex:0),R&&localStorage&&!n(localStorage[R])&&(T=Number(localStorage[R])),G.items=t,G.viewNum=r,G.spacing=o,G.arrowLeft=b,G.arrowRight=_,c&&(G.backing=c);var B={};e.loop(t,function(g,d){typeof g=="string"&&(g=t[d]=new e.Pic(g)),g.reg(CENTER,CENTER);var h=B["width"+g.width];h?B["width"+g.width]+=1:B["width"+g.width]=1});var q=0,Z=0;e.loop(B,function(g,d){d>q&&(q=d,Z=Number(g.substring(5)))});var X=0;e.loop(t,function(g){g.width=Z,g.height>X&&(X=g.height)}),G.itemWidth=Z,G.itemHeight=X;var ne=b.width+E+v,$;function re(){var g=r*(Z+o)-o,d=X;$=g+v*2+E*2+b.width+_.width,G.setBounds(0,0,$,d+w*2),G.tile=new e.Tile({obj:t,cols:t.length,spacingH:o,rows:1,unique:!0,align:"center",valign:S}).center(G).loc(ne),G.background=new Ln(g+v*2,d+w*2,l).center(G,0),G.tile.setMask(G.background)}function de(){b.pos(0,0,"left","center",G),_.pos(0,0,"right","center",G),b.on("mousedown",function(){G.cycleInterval&&(G.cycleClear(),G.dispatchEvent("cyclecleared")),G.goLeft()}),_.on("mousedown",function(){G.cycleInterval&&(G.cycleClear(),G.dispatchEvent("cyclecleared")),G.goRight()}),U()}function Q(){if(G.swipe){var g=G.swipeObj=new e.Swipe(G.tile);g.on("swipe",function(d){d.swipeX!=0&&G.cycleInterval&&(G.cycleClear(),G.dispatchEvent("cyclecleared")),d.swipeX==1?G.goLeft():d.swipeX==-1&&G.goRight()})}}function U(){localStorage&&R&&(localStorage[R]=T),b.activate(!0),_.activate(!0),G.tile.x+G.tile.width<=$-_.width-v-E&&_.activate(!1),G.tile.x>=ne&&b.activate(!1)}G.goLeft=function(g){return n(g)&&(g=i),G.tile.x<ne&&(G.disableArrows(),T--,G.tile.animate({props:{x:G.tile.x+Z+o},time:g,ease:P,call:function(){U(),G.enableArrows(),G.dispatchEvent("transitioned")}})),G},G.goRight=function(g){return n(g)&&(g=i),G.tile.x+G.tile.width>$-_.width-v-E&&(G.disableArrows(),T++,G.tile.animate({props:{x:G.tile.x-Z-o},time:g,ease:P,call:function(){U(),G.enableArrows(),G.dispatchEvent("transitioned")}})),G},G.cycleClear=function(){return G.cycleInterval.clear(),G.cycleInterval=null,G},G.cycle=function(g,d,h,x,j,O){var V="cycleTime, transitionTime, bounce, bounceNum, recycle, rtl",ce;if(ce=vt(G.cycle,arguments,V))return ce;n(g)&&(g=W.cycleTime!=null?W.cycleTime:F=="s"?5:5e3),n(d)&&(d=W.transitionTime!=null?W.transitionTime:F=="s"?1:1e3),n(h)&&(h=!0),n(x)&&(x=0),n(j)&&(j=g*2),n(O)&&(O=le.DIR&&le.DIR=="rtl"||!le.DIR&&e.DIR=="rtl");let H=O?-1:1;return G.cycleInterval&&G.cycleInterval.clear(),j&&j!=-1&&(G.recycleEvent&&G.off("cyclecleared",G.recycleEvent),G.recycleWait&&G.recycleWait.clear(),G.recycleEvent=G.on("cyclecleared",function(){G.recycleWait&&G.recycleWait.clear(),G.recycleWait=Gr(j,function(){G.cycle(g,d,h,x,j,O)})})),G.bounceTotal=.5,G.cycleInterval=e.interval(g,function(N){if(G.selectedIndex==0)if(h){if(N.count!=1&&(G.bounceTotal+=.5),x!=0&&G.bounceTotal>x){G.cycleInterval.clear(),G.dispatchEvent("bouncedone");return}G.bounceTotal>=1&&G.dispatchEvent("bounced"),H=1,G.goRight(d)}else O?G.cycleInterval.clear():H==1?G.goRight(d):G.goLeft(d);else if(G.selectedIndex==t.length-r){if(N.count!=1&&(G.bounceTotal+=.5),x!=0&&G.bounceTotal>x){G.cycleInterval.clear(),G.dispatchEvent("bouncedone");return}G.bounceTotal>=1&&G.dispatchEvent("bounced"),h?(H=-1,G.goLeft(d)):O?H==1?G.goRight(d):G.goLeft(d):G.cycleInterval.clear()}else H==1?G.goRight(d):G.goLeft(d)}),G},G.enableArrows=function(){return G.swipeObj&&(G.swipeObj.active=!0),b.mouse(),_.mouse(),G},G.disableArrows=function(){return G.swipeObj&&(G.swipeObj.active=!1),b.noMouse(),_.noMouse(),G},Object.defineProperty(G,"selectedIndex",{get:function(){return T},set:function(g){T=e.constrain(g,0,t.length-r),G.tile.x=ne-T*(Z+o),U()}}),Object.defineProperty(G,"swipe",{get:function(){return A},set:function(g){A=g,A&&!G.swipeObj&&Q(),G.swipeObj.active=A}}),re(),de(),Q(),c&&c.center(G,1),T&&(G.selectedIndex=T),this.dispose=function(g,d,h){return G.swipeObj&&G.swipeObj.dispose(),G.recycleEvent&&G.off("cyclecleared",G.recycleEvent),G.cycleWait&&G.cycleWait.clear(),G.cycleInterval&&G.cycleInterval.clear(),G.swipeObj=G.recycleEvent=G.cycleWait=null,h||this.zimContainer_dispose(),!0},L!==!1&&e.styleTransforms(this,W),this.clone=function(){return G.cloneProps(new e.Carousel(e.copy(t),r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,T,L,this.group))}},e.extend(e.Carousel,e.Container,["clone","dispose"],"zimContainer",!1),e.Loader=function(t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,T,L,I,C,k,Y,W,G,F,B,q,Z,X,ne,$,re,de,Q,U){var g="width, height, label, type, backgroundColor, rollBackgroundColor, color, rollColor, borderColor, rollBorderColor, borderWidth, corner, shadowColor, shadowBlur, hitPadding, gradient, gloss, dashed, backing, rollBacking, rollPersist, icon, rollIcon, toggle, toggleBacking, rollToggleBacking, toggleIcon, rollToggleIcon, toggleEvent, frame, multiple, accept, style, group, inherit",d;if(d=vt(e.Loader,arguments,g,this))return d;He("67.5"),this.group=Q;var h=de===!1?{}:e.getStyle("Loader",this.group,U);if(n(t)&&(t=h.width!=null?h.width:250),n(r)&&(r=h.height!=null?h.height:70),n(o)&&(o=h.type!=null?h.type:"image"),o=o.toLowerCase(),n(l)&&(l=h.backgroundColor!=null?h.backgroundColor:"rgba(0,0,0,.05)"),n(c)&&(c=h.rollBackgroundColor!=null?h.rollBackgroundColor:"rgba(0,0,0,.1)"),n(p)&&(p=h.color!=null?h.color:"rgba(0,0,0,.5)"),n(v)&&(v=h.rollColor!=null?h.rollColor:p),n(w)&&(w=h.borderColor!=null?h.borderColor:"rgba(0,0,0,.3)"),n(_)&&(_=h.borderWidth!=null?h.borderWidth:1),n(L)&&(L=h.dashed!=null?h.dashed:!0),n(E)&&(E=h.corner!=null?h.corner:0),n($)&&($=h.multiple!=null?h.multiple:!0),n(i)&&(i=h.label!=null?h.label:new e.Label({text:"UPLOAD PIC",color:p,rollColor:v,valign:"center",align:"center",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",backgroundColor:"ignore",group:this.group})),typeof ne>"u")if(le.zdf)var ne=le.zdf;else{Ct&&lt("zim.Loader - please provide a reference to zim Frame");return}this.zimButton_constructor(t,r,i,l,c,null,p,v,null,w,_,b,null,I,C,null,Y,W,null,E,L,S,P,R,T,null,null,null,null,null,A,null,null,null,k,G,null,null,null,null,null,null,F,B,null,q,Z,null,X,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,!1),this.type="Loader";var x=this,j=ne.stage;i=x.label;var O=x.tag=document.createElement("input");ne.tag?ne.tag.appendChild(O):document.body.appendChild(O),O.setAttribute("type","file"),O.setAttribute("aria-hidden",!0),$&&O.setAttribute("multiple","multiple"),re&&O.setAttribute("accept",re),O.hidden=!0,O.zimDisplay=O.style.display||"inline-block",O.style.cssText="border:thin solid grey; z-index:2; width:"+t+"px; height:"+r+"px; overflow:hidden; outline:none;position:absolute; left:0px; top:0px; display:none; cursor:pointer; opacity: 0; filter: alpha(opacity=0);",this.addEventListener("mousedown",function(){O.click()}),O.addEventListener("change",N);var V=new $e.DOMElement(O);j.addChild(V),V.alpha=0;var ce=ne.retina&&le.devicePixelRatio||1;this.resize=function(ae,Ie){if(!x.stage){O.setAttribute("aria-hidden",!0),O.hidden=!0,O.style.display="none";return}O.setAttribute("aria-hidden",!1),O.hidden=!1,O.style.display=O.zimDisplay,n(ae)&&(ae=!0),x.time1&&clearTimeout(x.time1),Ie||(x.time1=setTimeout(function(){x.resize(null,!0)},40));var ge=x.getConcatenatedMatrix().decompose(),Be=x.localToGlobal(0,0);if(ne.retina){var z=e.browserZoom();ne.tag?(V.x=Be.x/ce/z,V.y=Be.y/ce/z):(V.x=ne.x/j.scaleX+Be.x/ce/z,V.y=ne.y/j.scaleY+Be.y/ce/z),e.sca(V,ge.scaleX/ce/j.scaleX/z,ge.scaleY/ce/j.scaleY/z)}else V.x=ne.x+Be.x*ne.scale,V.y=ne.y+Be.y*ne.scale,e.sca(V,ne.scale*ge.scaleX,ne.scale*ge.scaleY);return j.update(),x},this.resize(),x.on("added",function(){O.style.display="block",O.hidden=!1,O.style.display="block",x.resize()}),x.added(H);function H(){x.resize(),x.time2=setTimeout(function(){O.style.display="block",O.hidden=!1,O.style.display="block"},50),x.on("added",H,null,!0)}x.on("removed",function(){x.time1&&clearTimeout(x.time1),x.time2&&clearTimeout(x.time2),O&&(O.style.display="none",O.hidden=!0,O.style.display="none")});function N(ae){var Ie;if(ae.dataTransfer&&ae.dataTransfer.files&&ae.dataTransfer.files.length>0?Ie=ae.dataTransfer.files:Ie=ae.target.files,o=="text"||o=="json"){var ge=[],Be;if(o.toLowerCase()=="json")var z=[],Ye}else if(o=="other")var te=[],K;else var xe=[],_e;for(var Se=0;Se<Ie.length;Se++)(function(ie){var pe=new FileReader;pe.onload=function(be){if(o=="text"||o=="json"){var he=be.target.result;if(ge.push(he),o=="json"){var Pe=JSON.parse(he);z.push(Pe)}if(ge.length==1&&(Be=he,o=="json"&&(Ye=Pe)),ge.length==Ie.length){var Re=new $e.Event("loaded");Re.texts=ge,Re.text=Be,Re.lastText=he,Re.total=ge.length,o=="json"&&(Re.jsons=z,Re.json=Ye,Re.lastJSON=Pe),x.dispatchEvent(Re),O.value=""}}else if(o=="other"){var ve=be.target.result;if(te.push(ve),te.length==1&&(K=ve),te.length==Ie.length){var Re=new $e.Event("loaded");Re.others=te,Re.other=K,Re.lastOther=ve,Re.total=te.length,x.dispatchEvent(Re),O.value=""}}else{var Ae=new Image;Ae.onload=function(){var ye=new e.Bitmap(Ae);if(xe.push(ye),xe.length==1&&(_e=ye),xe.length==Ie.length){var Fe=new $e.Event("loaded");Fe.bitmaps=xe,Fe.bitmap=_e,Fe.lastBitmap=ye,Fe.total=xe.length,x.dispatchEvent(Fe),O.value=""}},Ae.src=be.target.result}},o=="text"||o=="json"?pe.readAsText(ie):pe.readAsDataURL(ie)})(Ie[Se])}var ue=new XMLHttpRequest;if(ue.upload){var fe=function(ae){O.removeEventListener("change",N),N(ae),setInterval(function(){O.addEventListener("change",N)},100)};O.addEventListener("drop",fe)}this.save=function(ae,Ie,ge,Be,z,Ye,te,K,xe,_e,Se){var ie="content, filename, x, y, width, height, cached, cachedBounds, type, data, quality",pe;if(pe=vt(x.save,arguments,ie))return pe;if(n(ae)&&(ae=ne.stage),n(xe)&&(xe="png"),n(Ie))Ie="saved_"+String(e.makeID("numbers",5))+"."+xe;else{var be=Ie.split(".");if(be.length==1)Ie+="."+xe;else{var he=["png","jpg","jpeg"],Pe=he.indexOf(be[be.length-1].toLowerCase());Pe==-1?Ie+="."+xe:xe=he[Pe]}}if(n(ge)&&(ge=0),n(Be)&&(Be=0),n(z)&&(z=ae.getBounds&&ae.getBounds()?ae.getBounds().width:ne.width),n(Ye)&&(Ye=ae.getBounds&&ae.getBounds()?ae.getBounds().height:ne.height),ae.cache(ge,Be,z,Ye),_e){var Re=ae.cacheCanvas.toDataURL("image/"+xe,Se);return te?K&&ae.cache(K.x,K.y,K.width,K.height):ae.uncache(),Re}var ve=/Edge\/(\d)+/.test(navigator.userAgent);if(ve){var Ae=le.open();Ae.document.write("<html><head><title>saved</title></head><body style='margin:0px;padding:0px;overflow:hidden'><img src="+ae.cacheCanvas.toDataURL("image/"+xe)+"></body></html>"),Ae.document.close()}else{xe=="jpg"&&(xe="jpeg");var ye=document.createElement("a");ye.setAttribute("download",Ie),ye.setAttribute("href",ae.cacheCanvas.toDataURL("image/"+xe,Se)),document.body.appendChild(ye),ye.click(),document.body.removeChild(ye)}return te?K&&ae.cache(K.x,K.y,K.width,K.height):ae.uncache(),x},de!==!1&&e.styleTransforms(this,h),this.clone=function(){var ae=new e.Loader(t,r,n(i)?null:i.clone(),l,c,p,v,w,_,E,S,P,A,R,T,n(I)?null:I.clone(),n(C)?null:C.clone(),k,n(Y)?null:Y.clone(),n(W)?null:W.clone(),G,n(F)?null:F.clone(),n(B)?null:B.clone(),n(q)?null:q.clone(),n(Z)?null:Z.clone(),X,ne,de,this.group);return x.cloneProps(ae)},Object.defineProperty(this,"frame",{get:function(){return ne},set:function(ae){ae!=ne&&(ne.off("update",x.updateEvent),ne.off("resize",x.resizeEvent),ne=ae,x.resizeEvent=ne.on("resize",x.resize),x.updateEvent=ne.on("update",x.resize),x.resize())}}),this.resizeEvent=ne.on("resize",x.resize),this.updateEvent=ne.on("update",x.resize),this.dispose=function(ae,Ie,ge){var Be;return x.stage&&(Be=x.stage),ne.off("update",x.updateEvent),ne.off("resize",x.resizeEvent),N&&O.removeEventListener("change",N),fe&&O.removeEventListener("drop",fe),O&&O.parentNode&&O.parentNode.removeChild(O),O=null,ge||(this.zimButton_dispose(),Be&&Be.update()),!0}},e.extend(e.Loader,e.Button,["clone","dispose"],"zimButton",!1),e.TextArea=function(t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,T,L,I,C,k,Y,W,G,F,B,q){var Z="width, height, placeholder, text, size, padding, color, backgroundColor, borderColor, borderWidth, corner, shadowColor, shadowBlur, dashed, id, readOnly, spellCheck, password, inputType, wrap, maxLength, frame, expand, keyboardShift, style, group, inherit",X;if(X=vt(e.TextArea,arguments,Z,this))return X;He("67.6"),this.group=B;var ne=F===!1?{}:e.getStyle("TextArea",this.group,q);if(n(t)&&(t=ne.width!=null?ne.width:250),n(r)&&(r=ne.height!=null?ne.height:70),n(i)&&(i=ne.placeholder!=null?ne.placeholder:null),n(o)&&(o=ne.text!=null?ne.text:null),n(l)&&(l=ne.size!=null?ne.size:20),n(c)&&(c=ne.padding!=null?ne.padding:5),n(p)&&(p=ne.color!=null?ne.color:e.granite),n(v)&&(v=ne.backgroundColor!=null?ne.backgroundColor:"rgba(256,256,256,.1)"),n(w)&&(w=ne.borderColor!=null?ne.borderColor:"rgba(0,0,0,.1)"),n(b)&&(b=ne.borderWidth!=null?ne.borderWidth:null),w<0||b<0?w=b=null:w!=null&&b==null&&(b=1),n(_)&&(_=ne.corner!=null?ne.corner:0),!n(S)&&n(E)&&(E=ne.shadowColor!=null?ne.shadowColor:"rgba(0,0,0,.3)"),!n(E)&&n(S)&&(S=ne.shadowBlur!=null?ne.shadowBlur:10),n(L)&&(L=ne.password!=null?ne.password:!1),n(I)&&(I=ne.inputType!=null?ne.inputType:!1),n(C)&&(C=ne.wrap!=null?ne.wrap:!0),n(k)&&(k=ne.maxLength!=null?ne.maxLength:null),n(T)&&(T=ne.spellCheck!=null?ne.spellCheck:!0),n(R)&&(R=ne.readOnly!=null?ne.readOnly:!1),n(G)&&(G=ne.keyboardShift!=null?ne.keyboardShift:!1),this.maxLength=k,n(W)&&(W=ne.expand!=null?ne.expand:20),W===!0&&(W=20),typeof Y>"u")if(le.zdf)var Y=le.zdf;else{Ct&&lt("zim.TextArea - please provide a reference to zim Frame");return}this.zimContainer_constructor(t,r,null,null,!1),this.type="TextArea";var $=this,re=Y.stage,de=this.background=new e.Rectangle(t,r,v,w,b,_,P,null,null,!1).expand(W);E!=-1&&S>0&&(de.shadow=new $e.Shadow(E,3,3,S)),$.addChild(de);var Q=$.tag=I||L?document.createElement("input"):document.createElement("textarea");Y.tag?Y.tag.appendChild(Q):document.body.appendChild(Q),n(A)||(Q.setAttribute("id",A),Q.setAttribute("name",A)),L?Q.setAttribute("type","password"):I&&Q.setAttribute("type",I),Q.readOnly=R,Q.spellcheck=T,i&&Q.setAttribute("placeholder",i),o&&(Q.value=o),Q.zimDisplay=Q.style.display||"inline-block",Q.style.cssText="background-color:rgba(0,0,0,.01); color:"+p+"; resize:none; z-index:3; width:"+(t-c*2)+"px; height:"+(r-c*2)+"px; overflow:hidden; outline:none;font-size:"+l+"px; font-family:"+(ne.font!=null?ne.font:"arial")+"; border:none; position:absolute; left:0px; top:0px; display:none;",$.taInput=function(){!n($.maxLength)&&$.text.length>$.maxLength&&($.text=$.text.substring(0,$.maxLength)),$.dispatchEvent("input")};var U=$.y;$.taFocus=function(){if(le.M&&G){$.re&&$.stage.frame.off("resize",$.re),$.re=$.stage.frame.on("resize",function(){$.stage&&x>$.stage.height/4&&($.stage.y=$.stage.scaleY*($.stage.height/4-x),$.stage.update())});var x=$.localToGlobal(0,0).y;$.stage&&x>$.stage.height/4&&($.stage.y=$.stage.scaleY*($.stage.height/4-x),$.stage.update())}$.stage&&(Y=$.stage.frame),Y.zil&&le.removeEventListener("keydown",Y.zil[0]),$.dispatchEvent("focus")},$.taBlur=function(){le.M&&G&&$.stage&&($.re&&$.stage.frame.off("resize",$.re),$.stage.y=U,$.stage.update()),$.stage&&(Y=$.stage.frame),Y.zil&&le.addEventListener("keydown",Y.zil[0]),$.dispatchEvent("blur")},Q.addEventListener("change",$.taChange),Q.addEventListener("input",$.taInput),Q.addEventListener("focus",$.taFocus),Q.addEventListener("blur",$.taBlur);var g=new $e.DOMElement(Q);g.alpha=0,this.on("mousedown",function(){setTimeout(function(){Q.focus()},100)}),this.setFocus=function(x){return n(x)&&(x=!0),x?Q.focus():Q.blur(),$};var d=Y.retina&&le.devicePixelRatio||1;this.resize=function(x,j){n(x)&&(x=!0),$.time1&&clearTimeout($.time1),j||($.time1=setTimeout(function(){$.resize(null,!0)},40));var O=$.getConcatenatedMatrix().decompose(),V=$.localToGlobal(c,c);if(Y.retina){var ce=e.browserZoom();Y.tag?(g.x=V.x/d/ce,g.y=V.y/d/ce):(g.x=Y.x/re.scaleX+V.x/d/ce,g.y=Y.y/re.scaleY+V.y/d/ce),e.sca(g,O.scaleX/d/re.scaleX/ce,O.scaleY/d/re.scaleY/ce)}else Y.tag?(g.x=V.x*Y.scale,g.y=V.y*Y.scale):(g.x=Y.x+V.x*Y.scale,g.y=Y.y+V.y*Y.scale),e.sca(g,Y.scale*O.scaleX,Y.scale*O.scaleY);return g.alpha=$.alpha,$.parent&&(g.alpha*=$.parent.alpha),x&&$.stage&&re.update(),$},this.resize(),$.added(h);function h(){re.addChild(g),$.time2=setTimeout(function(){Q.style.display=Q.zimDisplay},50),$.resize(),$.on("added",h,null,!0),$.FOEvent=re.on("stagemousedown",function(){$.focus=!1})}$.on("removed",function(){$.time1&&clearTimeout($.time1),$.time2&&clearTimeout($.time2),re.removeChild(g),$.FOEvent&&re.off("stagemousedown",$.FOEvent),Q&&(Q.style.display="none")}),Object.defineProperty(this,"currentValue",{get:function(){return Q.value},set:function(x){Q.value=x}}),Object.defineProperty(this,"text",{get:function(){return Q.value},set:function(x){Q.value=x}}),Object.defineProperty(this,"focus",{get:function(){return document.activeElement==Q},set:function(x){$.setFocus(x)}}),Object.defineProperty(this,"readOnly",{get:function(){return Q.readOnly},set:function(x){Q.readOnly=x}}),le.KEYFOCUS!=null&&(e.KEYFOCUS=le.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return e.KEYFOCUS==$},set:function(){e.KEYFOCUS=$}}),e.KEYFOCUS||($.keyFocus=!0),$.taMousedown=function(){$.keyFocus=!0},Q.addEventListener("mousedown",$.taMousedown),C||(Q.style.whiteSpace="pre"),F!==!1&&e.styleTransforms(this,ne),this.clone=function(){var x=new e.TextArea(t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,T,L,I,C,k,Y,W,G,F,this.group,q);return $.cloneProps(x)},Object.defineProperty(this,"frame",{get:function(){return Y},set:function(x){x!=Y&&(Y.off("update",$.updateEvent),Y.off("resize",$.resizeEvent),Y=x,$.resizeEvent=Y.on("resize",$.resize),$.updateEvent=Y.on("update",$.resize),d=Y.retina&&le.devicePixelRatio||1,re=Y.stage,$.resize())}}),this.resizeEvent=Y.on("resize",$.resize),this.updateEvent=Y.on("update",$.resize),this.dispose=function(x,j,O){var V;return $.stage&&(V=$.stage),Y.off("update",$.updateEvent),Y.off("resize",$.resizeEvent),V&&$.FOEvent&&V.off("stagemousedown",$.FOEvent),Q&&Q.parentNode&&Q.parentNode.removeChild(Q),Q.removeEventListener("change",$.taChange),Q.removeEventListener("input",$.taInput),Q.removeEventListener("focus",$.taFocus),Q.removeEventListener("blur",$.taBlur),Q.removeEventListener("mousedown",$.taMousedown),Q=null,O||(this.zimContainer_dispose(!0),V&&V.update()),$.background=null,!0}},e.extend(e.TextArea,e.Container,["clone","dispose"],"zimContainer",!1),e.Tag=function(t,r,i,o,l,c,p,v,w,b,_,E){var S="width, height, id, frame, backgroundColor, padding, paddingH, paddingV, expand, style, group, inherit",P;if(P=vt(e.Tag,arguments,S,this))return P;He("67.7"),this.group=_;var A=b===!1?{}:e.getStyle("Tag",this.group,E);if(n(t)&&(t=A.width!=null?A.width:250),n(r)&&(r=A.height!=null?A.height:70),n(i)&&(i=A.id!=null?A.id:"zimTag_"+e.rand(1e4)),typeof o>"u")if(le.zdf)var o=le.zdf;else{Ct&&lt("zim.Tag - please provide a reference to zim Frame");return}n(l)&&(l=A.backgroundColor!=null?A.backgroundColor:"rgba(0,0,0,0)"),n(c)&&(c=A.padding!=null?A.padding:10),n(p)&&(p=A.paddingH!=null?A.paddingH:c),n(v)&&(v=A.paddingV!=null?A.paddingV:c),n(w)&&(w=A.expand!=null?A.expand:20),w===!0&&(w=20),this.zimContainer_constructor(t,r,null,null,!1),this.type="Tag",this.tagID=i,this.id=i;var R=this,T=o.stage;R.background=new e.Rectangle(t+p,r+v,l).center(this).expand(w||0);var L=R.tag=document.createElement("div");o.tag?o.tag.appendChild(L):document.body.appendChild(L),L.setAttribute("id",i),L.setAttribute("name",i),L.zimDisplay=L.style.display||"inline-block",L.style.cssText="resize:none; z-index:3; width:"+t+"px; height:"+r+"px; overflow:hidden; outline:none;position:absolute; left:0px; top:0px; display:none;";var I=new $e.DOMElement(L);I.alpha=0;var C=o.retina&&le.devicePixelRatio||1;this.resize=function(Y,W){n(Y)&&(Y=!0),R.time1&&clearTimeout(R.time1),W||(R.time1=setTimeout(function(){R.resize(null,!0)},40));var G=R.getConcatenatedMatrix().decompose(),F=R.localToGlobal(0,0);if(o.retina){var B=e.browserZoom();o.tag?(I.x=F.x/C/B,I.y=F.y/C/B):(I.x=o.x/T.scaleX+F.x/C/B,I.y=o.y/T.scaleY+F.y/C/B),e.sca(I,G.scaleX/C/T.scaleX/B,G.scaleY/C/T.scaleY/B)}else I.x=o.x+F.x*o.scale,I.y=o.y+F.y*o.scale,e.sca(I,o.scale*G.scaleX,o.scale*G.scaleY);return I.alpha=R.alpha,R.parent&&(I.alpha*=R.parent.alpha),Y&&R.stage&&T.update(),R},this.resize(),R.added(k);function k(){T.addChild(I),R.time2=setTimeout(function(){L.style.display=L.zimDisplay},50),R.resize(),R.on("added",k,null,!0)}R.on("removed",function(){R.time1&&clearTimeout(R.time1),R.time2&&clearTimeout(R.time2),T.removeChild(I),L&&(L.style.display="none")}),this.add=function(Y){return L.innerHTML+=Y,R},Object.defineProperty(this,"innerHTML",{get:function(){return L.innerHTML},set:function(Y){L.innerHTML=Y}}),Object.defineProperty(this,"style",{get:function(){return L.style},set:function(Y){L.style=Y}}),b!==!1&&e.styleTransforms(this,A),this.clone=function(){var Y=new e.Tag(t,r,i,o,l,c,p,v,w,b,this.group,E);return R.cloneProps(Y)},Object.defineProperty(this,"frame",{get:function(){return o},set:function(Y){Y!=o&&(o.off("update",R.updateEvent),o.off("resize",R.resizeEvent),o=Y,R.resizeEvent=o.on("resize",R.resize),R.updateEvent=o.on("update",R.resize),R.resize())}}),this.resizeEvent=o.on("resize",R.resize),this.updateEvent=o.on("update",R.resize),this.dispose=function(Y,W,G){var F;return R.stage&&(F=R.stage),o.off("update",R.updateEvent),o.off("resize",R.resizeEvent),L&&L.parentNode&&L.parentNode.removeChild(L),L=null,G||(this.zimContainer_dispose(!0),F&&F.update()),!0}},e.extend(e.Tag,e.Container,["clone","dispose"],"zimContainer",!1);function f(t,r){r?(t.mouseChildren=!0,t.mouseEnabled=!0,t._enabled=!0):(t.mouseChildren=!1,t.mouseEnabled=!1,t._enabled=!1)}if(e.addTo=function(t,r,i,o){var l="obj, container, index, localToLocal",c;if(c=vt(e.addTo,arguments,l))return c;if(He("47.5"),n(t)){lt("zim methods - addTo(): please provide object");return}if(n(r))if(le.zdf)r=le.zdf.stage;else{lt("zim methods - addTo(): please provide container");return}if(n(o)&&(o=!0),t.parent||(o=!1),o)var p=t.parent.localToLocal(t.x,t.y,r);return n(i)||isNaN(i)?r.addChild(t):r.addChildAt(t,i),o&&(t.x=p.x,t.y=p.y),t},e.removeFrom=function(t,r){if(He("47.6"),n(t)){lt("zim methods - removeFrom(): please provide object");return}return t.removePhysics&&t.removePhysics(),n(r)?t.parent&&t.parent.removeChild(t):r.removeChild(t),t},e.added=function(t,r,i,o){if(He("47.7"),!(n(t)||n(r)||typeof r!="function")){var l=y(i);if(n(i)&&(i=l=="s"?.1:100),t.stage){r(t.stage,t);return}var c=i*(l=="s"?1e3:1),p;o&&(a(o),p=o*(l=="s"?1e3:1));var v=Date.now(),w=0,b=setInterval(function(){if(w>5){clearInterval(b);return}w++,t.stage&&(r(t.stage,t),clearInterval(b),clearInterval(_))},10),_=setInterval(function(){p>0&&v-Date.now()>p&&clearInterval(_),t.stage&&(r(t.stage,t),clearInterval(_))},c);return _}},e.centerReg=function(t,r,i,o){var l="obj, container, index, add",c;if(c=vt(e.centerReg,arguments,l))return c;if(t.type=="AC"&&le.zdf)return le.zdf.ac("centerReg",arguments),t.addTo(r,i);if(He("48"),n(t)||!t.getBounds||!t.getBounds())return lt("zim methods - centerReg(): please provide object with bounds set"),t;n(o)&&(o=!0),n(r)&&t.parent&&o&&(r=t.parent,n(i)&&(i=t.parent.getChildIndex(t)),t.parent.removeChild(t)),!n(r)&&r==t.parent&&(n(i)&&(i=t.parent.getChildIndex(t)),t.parent.removeChild(t));var p=t.getBounds();return t.regX=p.x+p.width/2,t.regY=p.y+p.height/2,o?e.center(t,r,i):t},e.center=function(t,r,i,o){var l="obj, container, index, add",c;if(c=vt(e.center,arguments,l))return c;if(t.type=="AC"&&le.zdf)return le.zdf.ac("center",arguments),t.addTo(r,i);if(e.centerCheck||(He("48.1"),e.centerCheck=!0),n(t)||!t.getBounds)return lt("zim.center(): please provide object with bounds"),t;if(n(r)&&(t.parent?r=t.parent:le.zdf&&(r=le.zdf.stage)),n(r)||!r.getBounds)return lt("zim.center(): please provide container with bounds"),t;var p=t.getBounds(),v=r.getBounds();n(o)&&(o=!0);var w=!1;if(n(v)&&(r.setBounds(0,0),v=r.getBounds(),w=!0),o&&r.addChild&&(n(i)||typeof i=="number"&&isNaN(i)?(!t.parent||t.parent!=r)&&r.addChild(t):r.addChildAt(t,i)),n(p))return t.x=v.x+v.width/2,t.y=v.y+v.height/2,t;var b=!1,_=!1;r.scaleX==0&&(b=!0,r.scaleX=1e-5),r.scaleY==0&&(_=!0,r.scaleY=1e-5);var E=t.localToLocal(t.regX,t.regY,r),S=e.boundsToGlobal(t),P=e.boundsToGlobal(r,S,!0);if(b&&(r.scaleX=0),_&&(r.scaleY=0),t.x=v.x+v.width/2-P.width/2+(E.x-P.x),t.y=v.y+v.height/2-P.height/2+(E.y-P.y),!o&&r.getStage&&r.stage&&t.parent){var A=r.localToLocal(t.x,t.y,t.parent);t.x=A.x,t.y=A.y}return w&&r.setBounds(null),t},e.place=function(t,r){if(He("49"),n(t))return;n(r)&&(r="obj"),e.lastPlace=t;function i(){lt(r+".x = "+Math.round(t.x)+"; "+r+".y = "+Math.round(t.y)+";"),lt(r+".loc("+Math.round(t.x)+", "+Math.round(t.y)+");")}e.drag({obj:t,currentTarget:!0,dragCursor:"crosshair"}),t.on("mousedown",function(){e.lastPlace=t});var o=le.zdf;return o&&o.on("keydown",function(l){if(t==e.lastPlace){var c=l.keyCode;if(c>=37&&c<=40){var p=l.shiftKey?10:1;t.mov(c==37?-1*p:c==39?1*p:0,c==38?-1*p:c==40?1*p:0),i(),t.stage&&t.stage.update()}}}),lt("place "+r+" - to get new position"),t.on("click",i),t},e.placeReg=function(t,r){if(He("49.5"),n(t))return;var i=t.stage;if(n(i))return lt("zim.placeReg() - add object to stage before calling placeReg()"),t;n(r)&&(r="obj");function o(){var p=t.globalToLocal(c.x,c.y);lt(r+".regX = "+Math.round(p.x)+"; "+r+".regY = "+Math.round(p.y)+";"),lt(r+".reg("+Math.round(p.x)+", "+Math.round(p.y)+");")}var l=t.parent.localToGlobal(t.x,t.y),c=new e.Shape(-25,-25,50,50,null,!1).addTo(i).pos({x:l.x,y:l.y,reg:!0});return c.graphics.s("white").mt(-25,0).lt(25,0).mt(0,-25).lt(0,20),c.compositeOperation="difference",c.expand(0),e.drag({obj:c}),lt("place cursor to get new registration point location"),i.on("stagemouseup",o),t},e.pos=function(t,r,i,o,l,c,p,v,w,b,_){var E="obj, x, y, horizontal, vertical, container, index, add, reg, regX, regY",S;if(S=vt(e.pos,arguments,E))return S;if(t.type=="AC"&&le.zdf)return le.zdf.ac("pos",arguments),t.addTo(c,p);He("41.5"),le.DIR&&le.DIR=="rtl"||!le.DIR&&e.DIR=="rtl"?o=="start"?o="right":o=="end"&&(o="left"):o=="start"?o="left":o=="end"&&(o="right");var P=!1;o=="right"&&(P=!0);var A=!1;l=="bottom"&&(A=!0);var R=e.POSREG;if(le.POSREG!=null&&(R=le.POSREG),n(w)&&(w=R),n(t))return;n(w)&&n(b)&&(b=!1),n(w)&&n(_)&&(_=!1),!n(w)&&n(b)&&(b=w),!n(w)&&n(_)&&(_=w),n(v)&&(v=!0),!n(c)&&!c.addChild&&(c=null),!t.getBounds&&!t.getBounds()&&(b=_=!1),t.zimPos={x:r,y:i,h:o,v:l,i:p},n(c)&&(t.parent?c=t.parent:le.zdf&&(c=le.zdf.stage)),!t.parent&&n(r)&&(r=0),!t.parent&&n(i)&&(i=0);var T=!1;t.getBounds()||(t.setBounds(0,0),T=!0);var L=!1;c&&!c.getBounds()&&(c.setBounds(0,0),L=!0);function I(){n(p)||typeof p=="number"&&isNaN(p)?c.contains(t)||c.addChild(t):c.addChildAt(t,p)}if(!n(c)&&c.addChild&&v){var C=c.getBounds().clone();I();var k=c.getBounds();(C.width!=k.width||C.height!=k.height||C.x!=k.x||C.y!=k.y)&&(t.removeFrom(),c.setBounds(C.x,C.y,C.width,C.height),L=!0,I())}if(!b&&!_&&(o=="center"||o=="middle")&&(l=="center"||l=="middle"))return t.center({container:c}),t.mov(r,i),T&&t.setBounds(null),L&&c.setBounds(null),t;if(o=="center"||o=="middle"){if(b)t.x=c.width/2;else{var Y=t.y;t.center(),t.y=Y}t.mov(r),r=null,o=null}else o===!0&&(P=!0);if(l=="center"||l=="middle"){if(_)t.y=c.height/2;else{var W=t.x;t.center(),t.x=W}t.mov(0,i),i=null,l=null}else l===!0&&(A=!0);function G(){var ne=t.getBounds(),$=ne.x,re=ne.y,de=ne.width,Q=ne.height,U=t._props.matrix;U=t.getMatrix(U),($||re)&&U.appendTransform(0,0,1,1,0,0,0,-$,-re);var g=de*U.a,d=de*U.b,h=Q*U.c,x=Q*U.d,j=U.tx,O=U.ty,V=j,ce=j,H=O,N=O;return($=g+j)<V?V=$:$>ce&&(ce=$),($=g+h+j)<V?V=$:$>ce&&(ce=$),($=h+j)<V?V=$:$>ce&&(ce=$),(re=d+O)<H?H=re:re>N&&(N=re),(re=d+x+O)<H?H=re:re>N&&(N=re),(re=x+O)<H?H=re:re>N&&(N=re),{x:V,y:H,width:ce-V,height:N-H}}if(t.parent&&t.parent.getBounds){if(c=t.parent,n(r)&&P==!0&&(r=0),n(i)&&A==!0&&(i=0),n(r)||(t.x=r),n(i)||(t.y=i),n(r)&&n(i)&&!P&&!A)return T&&t.setBounds(null),L&&c.setBounds(null),t;var F=0,B=0;if(t.getBounds()){var q=G();if(!n(r)){var Z;P?Z=new e.Point(q.x+q.width,q.y+q.height):Z=new e.Point(q.x,q.y),F=Z.x-r}n(i)||(A?Z=new e.Point(q.x+q.width,q.y+q.height):Z=new e.Point(q.x,q.y),B=Z.y-i);var X=c.getBounds();n(r)||(P?b?t.x=X.width+X.x-r:t.x=X.width+X.x-r-F:(b?t.x=r:t.x=r-F,t.x+=X.x)),n(i)||(A?_?t.y=X.height+X.y-i:t.y=X.height+X.y-i-B:(_?t.y=i:t.y=i-B,t.y+=X.y))}}return T&&t.setBounds(null),L&&c.setBounds(null),v||t.removeFrom(),t},e.loc=function(t,r,i,o,l,c,p,v){var w="obj, target, y, container, index, add, localToLocal, x",b;if(b=vt(e.loc,arguments,w))return b;if(t.type=="AC"&&le.zdf)return le.zdf.ac("loc",arguments),t.addTo(o,l);if(He("41.55"),!n(t)){if(typeof r=="number"&&(v=r,r=null),n(r)||(Array.isArray(r)?(v=r[0],i=r[1]):(n(r.x)||(v=r.x),n(r.y)||(i=r.y))),n(v)&&n(r)&&(v=t.x),n(i)&&n(r)&&(i=t.y),n(c)&&(c=!0),n(o)&&(t.parent?o=t.parent:le.zdf&&(o=le.zdf.stage)),c&&o&&(!t.parent||o!=t.parent?n(l)||isNaN(l)?o.addChild(t):o.addChildAt(t,l):n(l)||o.addChildAt(t,l)),n(p)&&(p=!0),r&&r.parent&&t.parent&&p){var _=r.parent.localToLocal(v,i,t.parent);v=_.x,i=_.y}return t.x=v,t.y=i,t}},e.mov=function(t,r,i){var o="obj, x, y",l;if(l=vt(e.mov,arguments,o))return l;if(t.type=="AC"&&le.zdf)return le.zdf.ac("mov",arguments),t;if(He("41.6"),!n(t))return n(r)||(t.x+=r),n(i)||(t.y+=i),t},e.sca=function(t,r,i){return t.type=="AC"&&le.zdf?(le.zdf.ac("sca",arguments),t):(He("41.97"),n(t)||n(t.scaleX)||(n(r)&&(r=t.scaleX),n(i)&&(i=r),t.scaleX=r,t.scaleY=i),t)},e.alp=function(t,r){if(He("41.7"),!n(t))return n(r)||(t.alpha=t.hovOriginal=r,t.tag&&t.tag.style&&(t.type!="Loader"&&(t.tag.style.opacity=r),r==0?t.tag.style.display=t.tag.zimDisplay="none":t.tag.style.display=t.tag.zimDisplay="inline-block")),t},e.vis=function(t,r){if(He("41.71"),!n(t))return t.visible=r,t.tag&&t.tag.style&&(r?t.tag.style.display=t.tag.zimDisplay="inline-block":t.tag.style.display=t.tag.zimDisplay="none"),t},e.ble=function(t,r){if(He("41.72"),!n(t))return n(r)&&(r="difference"),t.compositeOperation=r,(t.type=="Blob"||t.type=="Squiggle")&&t.update(),t},e.dye=function(t,r){if(He("41.73"),!n(t))return t.hasOwnProperty("backgroundColor")?t.backgroundColor=r:t.hasOwnProperty("color")&&(t.color=r),t},e.hov=function(t,r,i){if(He("41.75"),!n(t))return n(r)&&(r=1),n(i)&&(i=typeof r=="number"?"alpha":"color"),t.hovMouseover&&(t.off("mouseover",t.hovMouseover),t.off("mouseout",t.hovMouseout)),r==-1?(t.cur("default"),n(t.hovOld)||(t[t.hovType]=t.hovOld),t.hovOld=null,t.stage&&t.stage.update(),t):(t.cur(),t.hovOld=t[i],t.hovNew=r,t.hovType=i,t.hovMouseover=t.on("mouseover",function(){t[i]=t.hovNew,t.stage&&t.stage.update()}),t.hovMouseout=t.on("mouseout",function(){t[i]=t.hovOld,t.stage&&t.stage.update()}),t)},e.rot=function(t,r,i,o){if(He("41.8"),!n(t)){if(t.type=="AC"&&le.zdf)return le.zdf.ac("rot",arguments),t;if(!n(r))if(t.parent&&(!n(i)||!n(o))){n(i)&&(i=t.x),n(o)&&(o=t.y);var l=t.parent.localToLocal(i,o,t),c=new e.Point(t.x,t.y);t.reg(l.x,l.y),t.rotation=r,t.x=i,t.y=o;var p=t.parent.localToLocal(c.x,c.y,t);t.reg(p.x,p.y),t.x=c.x,t.y=c.y}else t.rotation=r;return t}},e.siz=function(t,r,i,o){if(He("41.85"),!n(t))return t.type=="AC"&&le.zdf?(le.zdf.ac("siz",arguments),t):(n(o)&&(o=!1),!n(r)&&!n(i)?(t.widthOnly=r,t.heightOnly=i):n(r)?n(i)||(o?t.heightOnly=i:t.height=i):o?t.widthOnly=r:t.width=r,t)},e.ske=function(t,r,i){if(He("41.9"),!n(t))return t.type=="AC"&&le.zdf?(le.zdf.ac("ske",arguments),t):(n(r)||(t.skewX=r),n(i)||(t.skewY=i),t)},e.reg=function(t,r,i,o){if(He("41.95"),!n(t)){if(t.type=="AC"&&le.zdf)return le.zdf.ac("reg",arguments),t;var l=t.regX,c=t.regY,p=r,v=le.DIR||e.DIR||"ltr",w;if(r=="default"&&(r=null),typeof r=="string"&&(w=t.getBounds(),w?(r=="start"&&(r=v=="ltr"?"left":"right"),r=="end"&&(r=v=="ltr"?"right":"left"),r=="left"?r=w.x:r=="right"?r=w.x+w.width:(r=="center"||r=="middle")&&(r=w.x+w.width/2)):r=null),typeof i=="string"?(w||(w=t.getBounds()),w?i=="top"?i=w.y:i=="bottom"?i=w.y+w.height:(i=="center"||i=="middle")&&(i=w.y+w.height/2):i=null):n(i)&&(p=="center"||p=="middle")&&(w||(w=t.getBounds()),w?i=w.y+w.height/2:i=null),i=="default"&&(i=null),n(r)||(t.regX=r),n(i)||(t.regY=i),o&&t.parent){var b=t.localToLocal(l,c,t.parent);t.x-=b.x-t.x,t.y-=b.y-t.y}return t}},e.top=function(t){return He("41.62"),n(t)||!t.parent||t.parent.setChildIndex(t,t.parent.numChildren-1),t},e.bot=function(t){return He("41.63"),n(t)||!t.parent||t.parent.setChildIndex(t,0),t},e.ord=function(t,r){if(He("41.64"),!(n(t)||!t.parent))return n(r)&&(r=0),t.parent.setChildIndex(t,e.constrain(t.parent.getChildIndex(t)+r,0,t.parent.numChildren-1)),t},e.cur=function(t,r){if(He("41.1"),n(t))return lt("zim methods - cur(): please provide object"),t;n(r)&&(r="pointer");var i=le.zdf;return t.stage&&(i=t.stage.frame),i.cursors&&i.cursors[r]?(t.cursor="none",t._cursor=r,i.cursorList.add(t,r),t):(i.cursorList&&i.cursorList.add(t,!0),t.cursor=r,t)},e.sha=function(t,r,i,o,l){return He("41.2"),n(t)?(lt("zim methods - sha(): please provide object"),t):(n(r)&&(r="rgba(0,0,0,.3)"),r.blur?(t.shadow=r,t):(n(i)&&(i=t.width?t.width*.08:5),n(o)&&(o=t.height?t.height*.08:5),n(l)&&(l=t.width?t.width*.16:10),r==-1?t.shadow=null:t.shadow=new $e.Shadow(r,i,o,l),t))},e.dep=function(t,r){if(He("41.65"),!n(t))return n(r)&&(r=0),t.depth=r,t},e.nam=function(t,r){if(He("41.67"),!(n(t)||n(r)))return t.name=r,e.zimObjectIDs[r]=t,t},e.movement=function(t,r,i){He("47.75");var o=t.stage||le.zdf.stage;function l(){o=t.stage,t.zimMovementStage=o,t.zimMovementEvent&&o.off("stagemousemove",t.zimMovementEvent),t.zimMovementEvent=o.on("stagemousemove",function(c){r(c)}),t.on("mouseout",function(){t.zimMovementEvent&&o.off("stagemousemove",t.zimMovementEvent)},null,!0)}return e.mobile()?(t.zimMovementEvent&&o.off("pressmove",t.zimMovementEvent),t.zimMovementEvent=t.on("pressmove",function(c){r(c)})):(t.zimMouseoverEvent&&t.off("mouseover",t.zimMouseoverEvent),t.zimMouseoverEvent=t.on("mouseover",l),i&&l()),t},e.noMovement=function(t){if(He("47.9"),!n(t))return t.zimMouseoverEvent&&t.off("mouseover",t.zimMouseoverEvent),t.zimMovementEvent&&t.zimMovementStage&&t.zimMovementStage.off("stagemousemove",t.zimMovementEvent),t},e.tap=function(t,r,i,o,l,c,p,v,w,b){var _="obj, call, distance, time, once, dbl, dblTime, call2, call3, call4",E;if(E=vt(e.tap,arguments,_))return E;if(He("47.8"),!(n(t)||n(r)||typeof r!="function")){n(i)&&(i=c?10:5);var S=y(o);n(o)&&(o=S=="s"?8:8e3),n(l)&&(l=!1),n(c)&&(c=!1),n(p)&&(b?p=S=="s"?.5:500:p=S=="s"?1:1e3),t.cur("pointer");var P=!1,A=!1,R;return c?t.zimDblClickDownEvent=t.on("mousedown",function(T){if(R=!1,P){P=!1;return}if(P=!0,T.currentTarget.type=="List"){if(T.target.type=="WindowBacking")return;var L=T.currentTarget.globalToLocal(T.stageX/e.scaX,T.stageY/e.scaY);if(L.y<=0)return}var I=T.stageX/e.scaX,C=T.stageY/e.scaY,k=Date.now(),Y,W;A=!0,t.zimDoubleTimeout&&clearTimeout(t.zimDoubleTimeout),t.zimDoubleTimeout=setTimeout(function(){if(A=!1,P=!1,t.zimDblClickUpEvent&&t.off("pressup",t.zimDblClickUpEvent),R&&b)if(Math.abs(I+C-Y/e.scaX-W/e.scaY)<i){if(t.excludeTap)return;b(T)}else v&&v(T)},S=="s"?p*1e3:p),t.zimDblClickUpEvent=t.on("pressup",function(G){if(Y=G.stageX,W=G.stageY,R=!0,P){w&&w(G);return}else if(!A)return;if(Math.abs(I+C-G.stageX/e.scaX-G.stageY/e.scaY)<i&&Date.now()-k<(S=="s"?o*1e3:o)){if(t.excludeTap)return;clearTimeout(t.zimDoubleTimeout),r(G)}else v&&v(G);G.remove()})},null,l):t.zimClickDownEvent=t.on("mousedown",function(T){if(T.currentTarget.type=="List"){if(T.target.type=="WindowBacking")return;var L=T.currentTarget.globalToLocal(T.stageX/e.scaX,T.stageY/e.scaY);if(L.y<=0)return}var I=T.stageX/e.scaX,C=T.stageY/e.scaY,k=Date.now();t.zimClickUpEvent=t.on("pressup",function(Y){if(Math.abs(I+C-Y.stageX/e.scaX-Y.stageY/e.scaY)<i&&Date.now()-k<(S=="s"?o*1e3:o)){if(t.excludeTap)return;r(Y)}else v&&v(Y);Y.remove()})},null,l),t}},e.noTap=function(t){if(He("47.9"),!n(t))return t.cursor&&t.cur("default"),t.zimClickDownEvent&&t.off("mousedown",t.zimClickDownEvent),t.zimClickUpEvent&&t.off("pressup",t.zimClickUpEvent),t.zimDoubleTimeout&&clearInterval(t.zimDoubleTimeout),t},e.hold=function(t,r,i,o,l){if(He("47.87"),!(n(t)||n(r)||typeof r!="function")){n(i)&&(i=5);var c=y(o);n(o)&&(o=c=="s"?1.5:1500),n(l)&&(l=!1),t.cur("pointer");var p;return t.zimClickHoldDownEvent=t.on("mousedown",function(v){if(p||(p=v.target.stage),!!p){if(n(p.frame)&&(p.frame=le.zdf),(n(p.frame)||!p.frame.mousemoveEvent)&&(n(p.frame)&&(p.frame={}),p.frame.mouseX=v.stageX/e.scaX,p.frame.mouseY=v.stageY/e.scaY,p.frame.mouseholdEvent&&p.off("stagemousemove",p.frame.mouseholdEvent),p.frame.mouseholdEvent=p.on("stagemousemove",function(S){p.frame.mouseX=S.stageX/e.scaX,p.frame.mouseY=S.stageY/e.scaY})),v.currentTarget.type=="List"){if(v.target.type=="WindowBacking")return;var w=v.currentTarget.globalToLocal(v.stageX/e.scaX,v.stageY/e.scaY);if(w.y<=0)return}var b=v.stageX/e.scaX,_=v.stageY/e.scaY;clearInterval(t.zimHoldInterval);var E=0;t.zimHoldInterval=setInterval(function(){if(E<10)Math.abs(b+_-p.frame.mouseX-p.frame.mouseY)>i&&clearInterval(t.zimHoldInterval);else{if(Math.abs(b+_-p.frame.mouseX-p.frame.mouseY)<i){if(t.excludeHold)return;r(v)}clearInterval(t.zimHoldInterval)}E++},o/10*(c=="s"?1e3:1)),t.zimClickHoldUpEvent=t.on("pressup",function(){clearInterval(t.zimHoldInterval),p&&p.frame.mouseholdEvent&&p.off("stagemousemove",p.frame.mouseholdEvent)},null,!0)}},null,l),t}},e.noHold=function(t){if(He("47.88"),!n(t))return t.cursor&&t.cur("default"),t.off("mousedown",t.zimClickHoldDownEvent),t.off("pressup",t.zimClickHoldUpEvent),t.stage&&t.stage.frame.mouseEvent&&t.stage.off("stagemousemove",t.stage.frame.mouseEvent),clearInterval(t.zimHoldTimeout),t},e.change=function(t,r,i){if(He("47.85"),!(n(t)||n(r)||typeof r!="function"))return n(i)&&(i=!1),t.zimChangeEvent=t.on("change",function(o){r(o)},null,i),t},e.noChange=function(t){if(He("47.95"),!n(t))return t.off("mousedown",t.zimChangeEvent),t},e.drag=function(t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,T,L,I,C,k,Y){var W="obj, boundary, axis, overCursor, dragCursor, all, swipe, localBoundary, onTop, surround, slide, slideFactor, slideSnap, slideSnapDamp, reg, removeTweens, startBounds, rect, currentTarget, offStage, immediateBoundary, singleTouch",G;if(G=vt(e.drag,arguments,W))return G;if(He("31"),n(t)||!t.on)return;var F=e.DRAGALL;if(le.DRAGALL!=null&&(F=le.DRAGALL),n(c)&&n(I)&&(c=F),n(c)&&n(I)?I=!1:n(c)?n(I)&&(I=!1):I=c,(t.type=="Tag"||t.type=="TextArea"||t.type=="Loader")&&(I=!0),r&&r.getBounds&&(t.type=="Container"||t.type=="Tile")&&t.mouseChildren==!0&&!c){var B=Array.prototype.slice.call(arguments);return B[4]=!0,setTimeout(function(){t.loop(function(ke){B[0]=ke,e.drag.apply(null,B)})},k?0:50),t}(n(i)||i=="all"||i!="horizontal"&&i!="vertical")&&(i="both"),t.zimDown&&t.noDrag(),t.cur(n(o)?"pointer":o),n(p)&&(p=!1),n(v)&&(v=!1),n(w)&&(w=!0),n(b)&&(b=!1),n(_)&&(_=!1),n(E)&&(E=.9),n(S)&&(S=!0);var q=["horizontal","vertical","auto"];if(S!==!0&&q.indexOf(S)<0&&(S=!1),S=="auto"&&(S=!0),n(P)&&(P=.1),n(A)&&(A=!1),n(R)&&(R=!0),n(T)&&(T=!0),n(r)&&!n(L)&&(r=L),n(Y)&&(Y=!1),t.dragPaused=!1,_)var Z,X,ne,$,re,de,Q,U,g,d,h,x,j,O,V,ce,H,N,ue=le.M?20:10,fe,ae,Ie,ge,Be=!1,z=!1,Ye=50;else t.zimDragTicker=function(){};t._draggable=!0,e.setSwipe(t,p),t.zimBoundary=r,t.zimlocalBoundary=v,t.circleBounds=r&&r.type=="Circle"?r.radius:!1,t.downCheck=!1;var te=!1,K,xe,_e,Se,ie;t.zimAdded=t.on("added",pe,null,!0),t.zimRemoved=t.on("removed",be,null,!0),t.parent&&pe();function pe(){if(t.off("added",t.zimAdded),r=t.zimBoundary,r&&r.getBounds&&r.type!="Blob"){if(t.zimlocalBoundary=!1,r.type!="Stage"&&r.type!="StageGL"?r=r.boundsToGlobal():r=new e.Boundary(0,0,r.width,r.height),!b){var ke=t.boundsToGlobal();ie=t.localToGlobal(t.regX,t.regY);var oe=new e.Point(ie.x-ke.x,ie.y-ke.y),Ge=t.borderWidth?t.borderWidth:0;r.x+=oe.x+Ge/2,r.y+=oe.y+Ge/2,r.width-=ke.width+Ge,r.height-=ke.height+Ge}t.zimBoundary=r}K=0,xe=0,t.zimBoundary&&t.zimBoundary.type!="Blob"&&(v?(_e=e.boundsToGlobal(t.parent,t.zimBoundary),b&&(Se=t.zimBoundary)):(_e=t.zimBoundary,b&&(Se=e.boundsToGlobal(t.parent,t.zimBoundary,!0)))),_e&&T&&(ie=t.parent.localToGlobal(t.x,t.y),ve(t,ie.x,ie.y)),_&&setTimeout(function(){_&&S&&(Z=new e.Damp(null,P),X=new e.Damp(null,P)),t.zimDragImmediate=function(We,Qe){h=We,x=Qe,fe=ae=0,Ie=ge=0,U=j=g=O=d=V=0,_&&S&&(n(We)||Z.immediate(We),n(Qe)||X.immediate(Qe))},ne=3,$=0,re=[],de=[],Q=[],U=t.x,g=t.y,h=t.x,x=t.y,j=t.x,O=t.y,V=Date.now(),ce=-1e4,H=-1e4,t.zimDragMoving=!0,De()},50),n(t.zimMaskDynamic)||t.zimMaskApply()}function be(){t.zimDragTicker&&e.Ticker.remove(t.zimDragTicker)}var he,Pe;t.pointers={};var Re=!1;t.zimDown=t.on("mousedown",function(ke){if(!(!t.stage||t.dragPaused)&&!(Y&&Re)){Re=!0,Pe=t.stage,t.zmu||(t.zmu=Pe.frame.on("mouseupplus",function(st){t.downCheck&&(_||(t.downCheck=!1),Ae(st,!0))})),t.dragMouseX=Math.round(ke.stageX/e.scaX)+Pe.x,t.dragMouseY=Math.round(ke.stageY/e.scaY)+Pe.y;var oe="id"+Math.abs(ke.pointerID+1);if(t.pointers[oe]=!0,he=I?ke.currentTarget:ke.target,t.zimBoundary&&!he.getBounds()){lt("zim.drag() - drag object needs bounds set");return}if(t.downCheck=!0,t.stage.mouseMoveOutside=!0,e.Ticker.has(t.zimDragTicker)||e.Ticker.add(t.zimDragTicker,t.stage),R&&t.zimTweens)for(var Ge in t.zimTweens){var We=t.zimTweens[Ge];We.zimObj&&(We.zimObj.x!=null||We.zimObj.y!=null)&&t.stopAnimate(Ge)}if(he.parent){if(w){var Qe=he.parent.numChildren-1;he.parent.getChildAt(Qe).type=="Keyboard"&&Qe--,he.parent.setChildIndex(he,Qe),he.ZIMoutlineShape&&he.outline()}he.parent==t.stage?ie=new e.Point(ke.stageX/e.scaX,ke.stageY/e.scaY):ie=he.parent.globalToLocal(ke.stageX/e.scaX,ke.stageY/e.scaY),A&&(he.x=ie.x,he.y=ie.y),K=ie.x-he.x,xe=ie.y-he.y,_e=null,t.zimBoundary&&(v?(_e=e.boundsToGlobal(he.parent,t.zimBoundary),b&&(Se=t.zimBoundary)):(_e=t.zimBoundary,b&&(Se=e.boundsToGlobal(he.parent,t.zimBoundary,!0)))),t.cur(n(l)?"pointer":l),_&&(t.slideStartX=t.x,t.slideStartY=t.y,N=t.zimDragMoving,$=0,re=[ie.x],de=[ie.y],Q=[Date.now()],ce=-1e4,H=-1e4,t.zimDragMoving=!0),t.type=="Pen"&&(t.zimDragCheck=!0,te=!1)}}},!0),t.zimMove=t.on("pressmove",function(ke){if(!(Y&&!t.pointers["id"+Math.abs(ke.pointerID+1)])&&!(!t.downCheck||t.dragPaused)){var oe=(C?ke.rawX:ke.stageX)/e.scaX+Pe.x,Ge=(C?ke.rawY:ke.stageY)/e.scaY+Pe.y;t.dragMouseX=Math.round(oe),t.dragMouseY=Math.round(Ge),ve(he,oe,Ge),he.ZIMoutlineShape&&he.outline(),t.type=="Pen"&&!te&&t.drawing?te=!0:(t.type=="Tag"||t.type=="TextArea"||t.type=="Loader")&&t.resize()}},!0);function ve(ke,oe,Ge){if(n(ke)&&(ke=he||t),!!ke.parent){if(n(oe)||n(Ge)){var We=ke.parent.localToGlobal(ke.x,ke.y);K=xe=0,t.zimBoundary&&(v?(_e=e.boundsToGlobal(ke.parent,t.zimBoundary),b&&(Se=ke.zimBoundary)):(_e=t.zimBoundary,b&&(Se=e.boundsToGlobal(ke.parent,t.zimBoundary,!0)))),oe=We.x,Ge=We.y,_&&(h=ke.x,x=ke.y,he=ke)}var Qe;Pe&&Pe.type?Qe=ke.parent.globalToLocal(oe,Ge):Qe=ke.parent.globalToLocal(oe*e.scaX,Ge*e.scaY);var st=i=="both"||i=="horizontal",yt=i=="both"||i=="vertical",Le;_&&S?S=="vertical"?(Le=ye(ke,Qe.x-K,Qe.y-xe),st&&(ke.x=Le.x),yt&&(ke.y=Qe.y-xe)):S=="horizontal"?(Le=ye(ke,Qe.x-K,Qe.y-xe),st&&(ke.x=Qe.x-K),yt&&(ke.y=Le.y)):(st&&(ke.x=Qe.x-K),yt&&(ke.y=Qe.y-xe)):(Le=ye(ke,Qe.x-K,Qe.y-xe),st&&(ke.x=Le.x),yt&&(ke.y=Le.y)),_&&!N&&(ke.slideStartX!=ke.x||ke.slideStartY!=ke.y)&&(N=!0)}}t.zimPosition=ve,t.zimUp=t.on("pressup",function(ke){Ae(ke)},!0);function Ae(ke,oe){if(!(Y&&!oe&&!t.pointers["id"+Math.abs(ke.pointerID+1)])){Re=!1;var Ge="id"+Math.abs(ke.pointerID+1);if(delete t.pointers[Ge],!(!t.downCheck||t.dragPaused)){if(t.cur(n(o)?"pointer":o),_){if(he.dispatchEvent("slidestart"),he.parent){var We=C?ke.rawX:ke.stageX,Qe=C?ke.rawY:ke.stageY;ie=he.parent.globalToLocal(We/e.scaX,Qe/e.scaY)}else ie=new e.Point(0,0);U=ie.x,g=ie.y,d=Date.now(),Ie=U-j,ge=g-O;var st=d-V;fe=e.constrain(Ie*ue/st,-Ye,Ye),ae=e.constrain(ge*ue/st,-Ye,Ye),Be=!1,z=!1,t.downCheck=!1,h=he.x,x=he.y,oe&&(j=U=0,O=g=0,V=d=0)}else{t.downCheck=!1;var yt=0;for(var Le in t.pointers)yt++;yt==0&&e.Ticker.remove(t.zimDragTicker),t.type=="Pen"&&(t.zimDragCheck=!1,te&&t.drawing&&t.stopCheck())}t.stage&&t.stage.update()}}}function ye(ke,oe,Ge){if(!ke.parent)return{x:oe,y:Ge};if(_e)if(b){var We=ke.getBounds().width,Qe=ke.getBounds().height,st=ke.getBounds().x,yt=ke.getBounds().y;We<Se.width?oe=Se.x+(Se.width-We)/2+(ke.regX-st):(oe-(ke.regX-st)>Se.x&&(oe=Se.x+(ke.regX-st)),oe-(ke.regX-st)+We<Se.x+Se.width&&(oe=Se.x+Se.width+(ke.regX-st)-We)),ke.height<Se.height?Ge=Se.y+(Se.height-Qe)/2+(ke.regY-yt):(Ge-(ke.regY-yt)>Se.y&&(Ge=Se.y+(ke.regY-yt)),Ge-(ke.regY-yt)+Qe<Se.y+Se.height&&(Ge=Se.y+Se.height+(ke.regY-yt)-Qe))}else{if(_e.type=="Blob")return _e.shape.hitTestPoint(oe,Ge)?{x:oe,y:Ge}:{x:t.x,y:t.y};if(ie=ke.parent.localToGlobal(oe,Ge),t.circleBounds){var Le=_e.x+_e.width/2,ze=_e.y+_e.height/2,ot=t.circleBounds;if(e.dist(Le,ze,ie.x,ie.y)<=ot)oe=ie.x,Ge=ie.y;else{var Ce=e.angle(Le,ze,ie.x,ie.y)*RAD;oe=Le+ot*Math.cos(Ce),Ge=ze+ot*Math.sin(Ce)}}else oe=Math.max(_e.x,Math.min(_e.x+_e.width,ie.x)),Ge=Math.max(_e.y,Math.min(_e.y+_e.height,ie.y));ie=ke.parent.globalToLocal(oe,Ge),oe=ie.x,Ge=ie.y}return{x:oe,y:Ge}}function Fe(ke,oe,Ge,We,Qe){Math.abs(ke.x-ce)<.1&&Math.abs(ke.y-H)<.1?(t.zimDragMoving=!1,ke.x=We,ke.y=Qe,ke.slideStartX=null,ke.slideStartY=null,N&&(ke.dispatchEvent("slidestop"),e.Ticker.remove(t.zimDragTicker)),t.type=="Pen"&&(t.zimDragCheck=!1,te&&t.drawing&&t.stopCheck())):(ce=oe,H=Ge)}function De(){t.zimDragTicker=function(){if(!n(t.slideStartX))if(he||(he=t),t.downCheck){var ke;he.parent?ke=he.parent.globalToLocal(t.dragMouseX,t.dragMouseY):ke=new e.Point(0,0),$++,re.push(ke.x),de.push(ke.y),Q.push(Date.now()),$>=ne?(j=re.shift(),O=de.shift(),V=Q.shift()):(j=re[0],O=de[0],V=Q[0])}else{if(!t.zimDragMoving)return;Ie=fe,ge=ae;var oe,Ge;(i==BOTH||i==HORIZONTAL)&&(oe=he.x+Ie),(i==BOTH||i==VERTICAL)&&(Ge=he.y+ge),fe=Ie*E,ae=ge*E;var We;_e&&(We=ye(he,oe,Ge),(S===!0||S=="horizontal")&&(Math.round(oe)!=Math.round(We.x)&&(Be||(Z.immediate(oe),Be=!0),fe=0,oe=Z.convert(We.x)),S=="horizontal"&&(Ge=We.y)),(S===!0||S=="vertical")&&(Math.round(Ge)!=Math.round(We.y)&&(z||(z=!0,X.immediate(Ge),ae=0),Ge=X.convert(We.y)),S=="vertical"&&(oe=We.x)),S||(oe=We.x,Ge=We.y)),he.x=oe,he.y=Ge,Fe(he,he.x,he.y,oe,Ge)}}}return t},e.noDrag=function(t,r){if(He("32"),n(t)||!t.on)return;if(n(r)&&(r=!0),r&&t.numChildren&&t.numChildren>1)for(var i=0;i<t.numChildren;i++){var o=t.getChildAt(i);l(o)}l(t);function l(c){c.cur("default"),c._draggable=!1,e.setSwipe(c,!0),c.off("added",c.zimAdded),c.off("removed",c.zimRemoved),c.off("mousedown",c.zimDown),c.off("pressmove",c.zimMove),c.off("pressup",c.zimUp),c.zmu&&(c.stage?c.stage.frame.off("mouseupplus",c.zmu):le.zdf.off("mouseupplus",c.zmu)),e.Ticker&&(c.zimDragSlide&&e.Ticker.remove(c.zimDragSlide),c.zimDragTicker&&e.Ticker.remove(c.zimDragTicker)),c.zimDragMoving=c.zimAdded=c.zimRemoved=c.zimDown=c.zimMove=c.zimUp=c.zimBoundary=c.zimDragSlide=null,c.slideStartX=c.slideStartY=c.zimDragImmediate=null,c.dragMouseX=c.zimPosition=c.dragMouseY=c.zimDown=c.zimUp=null,c.zimDragTicker=c.zimDragSlide=null}return t},e.dragBoundary=function(t,r){if(He("33"),!(n(t)||!t.on))return t.zimBoundary=r,t.zimDragMoving=!0,t.zimPosition&&t.zimPosition(),t},e.dragRect=e.dragBoundary,e.mouse=function(t){return He("33.1"),t.zimLastMouse&&(t.mouseChildren=t.zimLastMouse),t.mouseEnabled=!0,t.zimLastMouseEnabled=!0,t},e.noMouse=function(t){return He("33.15"),t.zimLastMouse=t.mouseChildren,t.mouseChildren=!1,t.mouseEnabled=!1,t.zimLastMouseEnabled=!1,t},e.wire=function(t,r,i,o,l,c,p,v){var w="source, target, prop, twoWay, setSource, filter, call, input",b;if(b=vt(e.wire,arguments,w))return b;if(He("33.2"),n(e.Ticker)&&Ct)return lt("wire() - requires ZIM Frame"),t;if(n(r)&&Ct)return lt("wire() - requires a target"),t;var _=e.DEFAULTWIRE;return le.DEFAULTWIRE!=null&&(_=le.DEFAULTWIRE),n(v)&&(_&&_!="currentValue"&&_!="selectedIndex"||_&&Object.prototype.hasOwnProperty.call(t,_)?v=_:Object.prototype.hasOwnProperty.call(t,"currentValue")?v="currentValue":Object.prototype.hasOwnProperty.call(t,"selectedIndex")?v="selectedIndex":v=i),n(i)&&(i=v),t.addChild&&(t.zimWire=!0),r.addChild&&(r.zimWired=!0),e.Ticker.addWire(t,[r,i,o,l,c,p,v]),t},e.noWire=function(t,r,i,o){var l="source, target, prop, input",c;return(c=vt(e.noWire,arguments,l))?c:(He("33.25"),n(e.Ticker)&&Ct?(lt("noWire() - requires ZIM Frame"),t):(e.Ticker.removeWire(t,r,i,o),t))},e.wired=function(t,r,i,o,l,c,p,v){var w="target, source, prop, twoWay, setSource, filter, call, input",b;return(b=vt(e.wired,arguments,w))?b:(He("33.3"),n(e.Ticker)&&Ct?(lt("wired() - requires ZIM Frame"),t):(e.wire(r,t,i,o,l,c,p,v),t))},e.noWired=function(t,r,i,o){var l="target, source, prop, input",c;return(c=vt(e.noWire,arguments,l))?c:(He("33.35"),n(e.Ticker)&&Ct?(lt("noWired() - requires ZIM Frame"),t):(e.Ticker.removeWire(r,t,i,o),t))},typeof m>"u")var m;if(e.bind=function(t,r,i,o,l,c){var p="obj, id, props, extra, filter, bindObj",v;if(v=vt(e.bind,arguments,p))return v;if(He("33.17"),!m)return Ct&&lt("bind() - needs a Bind() object created first"),t;if(n(r))return Ct&&lt("bind() - needs a unique id"),t;var w=c||m;return w.add(r,t,i,o,l),t},e.noBind=function(t,r,i,o,l){var c="obj, props, removeConnectionData, call, bindObj",p;if(p=vt(e.noBind,arguments,c))return p;if(He("33.18"),!m)return t;var v=l||m;return v.remove(t,r,i,o),t},e.transform=function(t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,T,L,I,C,k,Y,W,G,F,B,q,Z,X){var ne="obj, move, stretchX, stretchY, scale, rotate, allowToggle, visible, onTop, showStretch, showRotate, showScale, showReg, showBorder, borderColor, borderWidth, dashed, customCursors, handleSize, regSize, snapDistance, snapRotation, cache, events, ghostColor, ghostWidth, ghostDashed, ghostHidden, frame",$;if($=vt(e.transform,arguments,ne))return $;if(t.type=="AC"&&le.zdf)return le.zdf.ac("transform",arguments),t;if(He("33.5"),n(t)||!t.getBounds)return lt("zim methods - transform(): please provide object with bounds set"),t;if(!t.getBounds())return lt("zim methods - transform(): please setBounds() on object"),t;if(!t.parent)return lt("zim methods - transform(): object should be on stage first"),t;n(r)&&(r=!0),n(i)&&(i=!0),n(o)&&(o=!0),t.width==0&&(i=!1),t.height==0&&(o=!1),n(l)&&(l=!0),n(c)&&(c=!0);var re=e.mobile();n(p)&&(p=!0),n(v)&&(v=!0),n(w)&&(w=!0),n(b)&&(b=!!re),n(_)&&(_=!!re),n(E)&&(E=!0),n(S)&&(S=!0),n(P)&&(P=!0),n(A)&&(A="brown"),n(R)&&(R=1),n(F)&&(F=null),n(B)&&(B=null),F<0||B<0?F=B=null:F!=null&&B==null&&(B=1),n(q)&&(q=!0),n(Z)&&(Z=!1),n(X)&&(X=le.zdf),n(L)&&(L=!re),n(I)&&(I=re?20:10),n(C)&&(C=16),n(k)&&(k=10),n(Y)&&(Y=5),n(W)&&(W=!0),n(G)&&(G=!1),(t.type=="Tag"||t.type=="TextArea"||t.type=="Loader")&&(G=!0),t.mouseChildren=!1;var de=t.getConcatenatedMatrix().decompose(),Q=t.stage?t.stage:X.stage;n(X.eventRemove)&&(Q.enableMouseOver(),X.ctrlKey=!1,X.shiftKey=!1,le.addEventListener("keydown",function(tt){X.altKey=tt.altKey,X.ctrlKey=tt.ctrlKey}),le.addEventListener("keyup",function(tt){X.altKey=tt.altKey,X.ctrlKey=tt.ctrlKey}));var U=t.getBounds(),g=new e.Shape({style:!1}),d=new e.Shape({style:!1}),h=new e.Shape({style:!1});d.mouseEnabled=!1,h.controlType="reg";var x=t.parent,j=g.graphics,O=d.graphics,V=h.graphics,ce,H,N,ue,fe,ae,Ie,ge,Be,z=new e.Container({style:!1});z.type="TransformControls";var Ye=new e.Container({style:!1}),te=new e.Container({style:!1}),K=new e.Container({style:!1}),xe=new e.Container({style:!1}),_e,Se,ie,pe,be;n(t.zimMaskDynamic)||t.zimMaskApply();function he(tt,_t){tt==_t&&new e.Triangle(16,12,12,"white",null,null,0).addTo(tt).mov(0,-13.5),new e.Triangle(16,12,12,"white",null,null,0).addTo(tt).mov(13.5).rot(90),tt==_t&&new e.Triangle(16,12,12,"white",null,null,0).addTo(tt).mov(0,13.5).rot(180),new e.Triangle(16,12,12,"white",null,null,0).addTo(tt).mov(-13.5).rot(-90),tt==_t&&new e.Triangle(10,7,7,"black",null,null,0).addTo(tt).mov(0,-13),new e.Triangle(10,7,7,"black",null,null,0).addTo(tt).mov(13).rot(90),tt==_t&&new e.Triangle(10,7,7,"black",null,null,0).addTo(tt).mov(0,13).rot(180),new e.Triangle(10,7,7,"black",null,null,0).addTo(tt).mov(-13).rot(-90),W&&tt.cache(-20,-20,40,40)}if(L){var Pe=new e.Container({style:!1}),Re=new e.Container({style:!1});he(Pe,Pe),he(Re,Pe);var ve={"nw-resize":45,"ne-resize":-45,"n-resize":90,"e-resize":0}}function Ae(){var tt=t;for(_e=0,Se=1,ie=1,pe=0,be=0;tt.parent;)_e+=tt.rotation,Se*=tt.scaleX,ie*=tt.scaleY,pe+=tt.skewX,be+=tt.skewY,tt=tt.parent}Ae();var ye=_e,Fe=["nw-resize","ne-resize","nw-resize","ne-resize"],De=[2,3,0,1],ke,oe;for(oe=0;oe<4;oe++)E?(ke=new e.Rectangle(I,I,e.pink,e.grey,2,null,null,null,null,!1),ke.centerReg(Ye),W&&ke.cache(-1,-1,I+2,I+2)):(ke=new e.Rectangle(I,I,"rgba(0,0,0,0)","rgba(0,0,0,0)",2,null,null,null,null,!1),ke.centerReg(Ye),ke.expand(0)),ke.rotation=_e,Ie=L?"none":Fe[oe],ke.drag({overCursor:Ie,dragCursor:Ie,onTop:!1}),ke.controlType="corner",ke.cu=Fe[oe];for(oe=0;oe<De.length;oe++)Ye.getChildAt(oe).op=Ye.getChildAt(De[oe]);var Ge=["n-resize","e-resize","n-resize","e-resize"];for(De=[1,1,0,0],oe=0;oe<4;oe++){var We=oe%2==0?t.width/2:I,Qe=oe%2==0?I:t.height/2;b?(ke=new e.Rectangle(I,I,e.fog,e.dark,2,null,null,null,null,!1),ke.centerReg(oe%2==0?K:te),W&&ke.cache(-1,-1,I+2,I+2)):(ke=new e.Rectangle(We,Qe,"rgba(0,0,0,0)",null,null,null,null,null,null,!1),ke.centerReg(oe%2==0?K:te),ke.expand(0)),ke.rotation=_e,Ie=L?"none":Ge[oe],ke.drag({overCursor:Ie,dragCursor:Ie,onTop:!1}),ke.controlType="side",ke.cu=Ge[oe]}for(oe=0;oe<De.length;oe++){var st=oe%2==0?K:te;st.getChildAt(Math.floor(oe/2)).op=st.getChildAt(De[oe])}var yt=["ne-resize","nw-resize","ne-resize","nw-resize"];for(oe=0;oe<4;oe++)_?(ke=new e.Circle(I,e.pink,null,null,null,null,null,null,!1),ke.addTo(xe),W&&ke.cache(-I,-I,I*2,I*2)):(ke=new e.Circle(I,"rgba(0,0,0,0)",null,null,null,null,null,null,!1),ke.addTo(xe),ke.expand(0)),Ie=L?"none":yt[oe],ke.drag({overCursor:Ie,dragCursor:Ie,onTop:!1}),ke.controlType="rotate",ke.cu=yt[oe];var Le=1.8;xe.alpha=.5,ze();function ze(){var tt=I*Le*e.sign(Se),_t=I*Le*e.sign(ie);xe.getChildAt(0).reg(tt,_t),xe.getChildAt(1).reg(-tt,_t),xe.getChildAt(2).reg(-tt,-_t),xe.getChildAt(3).reg(tt,-_t),Q.update()}function ot(){j.c(),O.c(),V.c(),ce=t.localToGlobal(U.x,U.y),H=t.localToGlobal(U.x+U.width,U.y),N=t.localToGlobal(U.x+U.width,U.y+U.height),ue=t.localToGlobal(U.x,U.y+U.height);var tt=t.localToGlobal(U.x+U.width/2,U.y),_t=t.localToGlobal(U.x+U.width,U.y+U.height/2),$t=t.localToGlobal(U.x+U.width/2,U.y+U.height),Wt=t.localToGlobal(U.x,U.y+U.height/2);fe=t.localToGlobal(t.regX,t.regY),ae=t.localToGlobal(U.x+U.width/2,U.y+U.height/2),Be=[ce,H,N,ue],ge=[tt,_t,$t,Wt],P&&(j.s(A),T&&j.sd([10,5],0),j.ss(R).mt(ce.x,ce.y).lt(H.x,H.y).lt(N.x,N.y).lt(ue.x,ue.y).lt(ce.x,ce.y).cp()),n(F)||(O.s(F),q&&O.sd([10,5],0),O.ss(B).mt(ce.x,ce.y).lt(H.x,H.y).lt(N.x,N.y).lt(ue.x,ue.y).lt(ce.x,ce.y).cp()),g.setBounds(ce.x,ce.y,H.x-ce.x,ue.y-ce.y),S&&(V.s("#eee").ss(R).f("rgba(0,0,0,.1)").dc(0,0,C),V.s("#222").ss(R).dc(0,0,C*.3)),Ae();for(var on=Math.min(50,Math.abs(pe))*e.sign(pe),en=Math.min(50,Math.abs(be))*e.sign(be),un=_e*e.sign(Se*ie)*e.sign(t.scaleX*t.scaleY),bt=0;bt<Be.length;bt++){var Ut=Be[bt];Ye.getChildAt(bt).loc(Ut.x,Ut.y).ske(on,en).rot(un),xe.getChildAt(bt).loc(Ut.x,Ut.y).rot(un);var tn=ge[bt],_n=bt%2==0?K:te;_n.getChildAt(Math.floor(bt/2)).loc(tn.x,tn.y).ske(on,en).rot(un),b||_n.getChildAt(Math.floor(bt/2)).sca(bt%2==0?Se/2:1,bt%2==0?1:ie/2)}h.x=fe.x,h.y=fe.y}ot();var Ce=new e.Shape(1e3,1e3,null,null,null,!1);function me(){Ce.x=0,Ce.y=0,Ce.graphics.c().f("rgba(0,0,0,.01)").mt(ce.x,ce.y).lt(H.x,H.y).lt(N.x,N.y).lt(ue.x,ue.y).lt(ce.x,ce.y).cp(),Ce.reg(fe.x,fe.y),Ce.x=fe.x,Ce.y=fe.y}me(),z.on("dblclick",function(tt){X.ctrlKey&&t.transformControls.visible&&(t.scaleX=1,t.scaleY=1,t.rotation=0,ot(),me(),Q.update()),Zt(tt,!0)});var Ke=z.on("mousedown",et),ut=t.on("mousedown",et);function et(tt){var _t=Q.getObjectUnderPoint(tt.stageX,tt.stageY,1);re||_t&&(t.contains&&t.contains(_t)||!t.contains&&t==_t)?t.transformControls.visible||(L?(Pt=!1,Ce.mouseEnabled=!1):X.canvas.style.cursor="move",t.transformControls.show(),t.dispatchEvent("transformshow")):t.transformControls.visible&&(!_t||!z.contains(_t))&&(t.transformControls.hide(),t.dispatchEvent("transformhide"))}var qe=Q.on("stagemousedown",function(tt){var _t=Q.getObjectUnderPoint(tt.stageX,tt.stageY,1),$t=_t&&_t.parent&&_t.parent.layer&&_t.parent.layer==t;t.transformControls.visible&&(!_t||!z.contains(_t)&&!$t)&&(t.dispatchEvent("transformhide"),t.transformControls.hide())});p||(z.off("mousedown",Ke),t.off("mousedown",ut),Q.off("stagemousedown",qe));var Ue,Ze,it,Ve,Me,Ne,at,Je,dt,Oe,je,gt,nt,ht=!1,xt=!1,Et,ft,Lt=t.cursor,wt,St=new e.Circle(30,"rgba(0,0,0,0)",null,null,null,null,null,null,!1).expand(20);if(L){St.mouseEnabled=!1,St.mouseChildren=!1,St.addChild(Re),Ye.on("mouseover",At),Ye.on("mouseout",mt),te.on("mouseover",At),te.on("mouseout",mt),K.on("mouseover",At),K.on("mouseout",mt),xe.on("mouseover",At),xe.on("mouseout",mt);var Ft=new e.Circle(30,"rgba(0,0,0,0)",null,null,null,null,null,null,!1).expand(20);Ft.cursor="none"}Ye.on("mousedown",Xt),Ye.on("pressmove",Ot),Ye.on("pressup",Zt),te.on("mousedown",Xt),te.on("pressmove",Ot),te.on("pressup",Zt),K.on("mousedown",Xt),K.on("pressmove",Ot),K.on("pressup",Zt),xe.on("mousedown",Xt),xe.on("pressmove",jt),xe.on("pressup",Zt);function Xt(tt){if(xt=!0,w&&Rt(),Et&&Q.off("stagemousemove",Et),Ue=tt.target.x,Ze=tt.target.y,Oe=t.x,je=t.y,it=t.scaleX,Ve=t.scaleY,tt.target.controlType=="rotate"){ht=!0,Me=t.rotation;var _t=tt.stageX/e.scaX,$t=tt.stageY/e.scaY,Wt=x.localToGlobal(Oe,je);gt=Wt.x,nt=Wt.y,Ne=Math.atan2($t-nt,_t-gt)*180/Math.PI}X.ctrlKey||tt.target.controlType=="rotate"?(at=Math.abs(Ue-t.x),Je=Math.abs(Ze-t.y)):(at=Math.abs(Ue-tt.target.op.x),Je=Math.abs(Ze-tt.target.op.y)),tt.target.controlType!="rotate"&&(dt=tt.target.op.parent.localToLocal(tt.target.op.x,tt.target.op.y,t.parent)),St.stage?Q.setChildIndex(St,Q.getChildIndex(z)):St.addTo(Q,Q.getChildIndex(z)+1),St.x=tt.stageX/e.scaX,St.y=tt.stageY/e.scaY,St.cursor=L?"none":tt.target.cu,L&&(t.getConcatenatedMatrix().decompose(de),de.rotation||(de.rotation=0),Re.rotation=de.rotation*e.sign(Se*ie)*e.sign(t.scaleX*t.scaleY)+ve[tt.target.cu]+ye,tt.target.controlType!="side"&&Se*ie<0&&(Re.rotation+=90),Ft.addTo(Q,1).pos({x:tt.stageX/e.scaX,y:tt.stageY/e.scaY,reg:!0})),Ce.visible=!1,t.cursor="none"}function Ot(tt){var _t=1;if(X.ctrlKey&&tt.target.controlType=="corner"?_t=at>Je?(tt.target.x-Oe)/(Ue-Oe):(tt.target.y-je)/(Ze-je):at>Je?Ue-tt.target.op.x&&(_t=(tt.target.x-tt.target.op.x)/(Ue-tt.target.op.x)):Ze-tt.target.op.y&&(_t=(tt.target.y-tt.target.op.y)/(Ze-tt.target.op.y)),tt.target.controlType=="corner"?(t.scaleX=_t*it,t.scaleY=_t*Ve):(t.scaleX=tt.target.cu=="e-resize"?_t*it:it,t.scaleY=tt.target.cu=="n-resize"?_t*Ve:Ve),ot(),St.x=tt.stageX/e.scaX,St.y=tt.stageY/e.scaY,L&&(Ft.x=tt.stageX/e.scaX,Ft.y=tt.stageY/e.scaY),!X.ctrlKey||tt.target.controlType=="side"){var $t=tt.target.op.parent.localToLocal(tt.target.op.x,tt.target.op.y,t.parent);t.x-=($t.x-dt.x)*e.sign(Se)*e.sign(t.scaleX),t.y-=($t.y-dt.y)*e.sign(ie)*e.sign(t.scaleY)}if(ot(),t.transformControls.events){var Wt=tt.target.controlType;rt(tt,Wt)}}function jt(tt){var _t=Math.atan2(tt.stageY/e.scaY-nt,tt.stageX/e.scaX-gt)*180/Math.PI;if(X.shiftKey?t.rot(Math.round((Me+(_t-Ne)*e.sign(Se)*e.sign(t.scaleX))/45)*45):t.rot(Me+(_t-Ne)*e.sign(Se)*e.sign(t.scaleX)),ot(),St.x=tt.stageX/e.scaX,St.y=tt.stageY/e.scaY,L&&(t.getConcatenatedMatrix().decompose(de),de.rotation||(de.rotation=0),Re.rotation=de.rotation*e.sign(Se*ie)*e.sign(t.scaleX*t.scaleY)+ve[tt.target.cu]+ye,tt.target.controlType!="side"&&Se*ie<0&&(Re.rotation+=90),Ft.x=tt.stageX/e.scaX,Ft.y=tt.stageY/e.scaY),ot(),t.transformControls.events){var $t=tt.target.controlType;rt(tt,$t,null,!1)}}function Zt(tt,_t){ze();var $t=tt?tt.target.controlType:"move";_t&&($t="reset"),L&&Ft.removeFrom(Q),rt(tt,$t,!0),Q.update()}function rt(tt,_t,$t,Wt){Wt==null&&(Wt=!0);var on=!1;wt=null,_t=="move"?((t.x!=cn.x||t.y!=cn.y)&&(wt=new $e.Event("transformed"),wt.transformType="move"),Wt&&(on=Ce.hitTestPoint(tt.stageX/e.scaX,tt.stageY/e.scaY))):_t=="corner"?((t.scaleX!=cn.scaleX||t.scaleY!=cn.scaleY)&&(wt=new $e.Event("transformed"),wt.transformType="size"),Wt&&(on=Ye.hitTestPoint(tt.stageX/e.scaX,tt.stageY/e.scaY))):_t=="side"?((t.scaleX!=cn.scaleX||t.scaleY!=cn.scaleY)&&(wt=new $e.Event("transformed"),wt.transformType="stretch"),Wt&&(on=te.hitTestPoint(tt.stageX/e.scaX,tt.stageY/e.scaY)||K.hitTestPoint(tt.stageX/e.scaX,tt.stageY/e.scaY))):_t=="rotate"?(t.rotation!=cn.rotation&&(wt=new $e.Event("transformed"),wt.transformType="rotate"),Wt&&(on=xe.hitTestPoint(tt.stageX/e.scaX,tt.stageY/e.scaY))):_t=="reg"?(t.regX!=cn.regX||t.regY!=cn.regY)&&(wt=new $e.Event("transformed"),wt.transformType="reg"):_t=="reset"?(wt=new $e.Event("transformed"),wt.transformType="reset"):(wt=new $e.Event("transformed"),wt.transformType="unknown"),Wt&&!on&&(St.removeFrom(Q),X.canvas.style.cur("default"),t.cursor=Lt),wt&&(wt.pressup=$t,(t.type=="Tag"||t.type=="TextArea"||t.type=="Loader")&&t.resize(),t.dispatchEvent(wt))}function At(tt){xt||(St.stage?Q.setChildIndex(St,Q.getChildIndex(z)):St.addTo(Q,Q.getChildIndex(z)+1),Ft.addTo(Q,1),St.x=tt.stageX/e.scaX,St.y=tt.stageY/e.scaY,Ft.x=tt.stageX/e.scaX,Ft.y=tt.stageY/e.scaY,t.getConcatenatedMatrix().decompose(de),de.rotation||(de.rotation=0),Re.rotation=de.rotation*e.sign(Se*ie)*e.sign(t.scaleX*t.scaleY)+ve[tt.target.cu]+ye,tt.target.controlType!="side"&&Se*ie<0&&(Re.rotation+=90),Q.update(),Et&&Q.off("stagemousemove",Et),Et=Q.on("stagemousemove",function(_t){St.x=_t.stageX/e.scaX,St.y=_t.stageY/e.scaY,Q.update()}))}function mt(){Q.off("stagemousemove",Et),!xt&&(t.cursor=Lt,St.removeFrom(Q),Ft.removeFrom(Q),Q.update())}function Rt(){if(w){var tt=x.numChildren-1;x.getChildAt(tt).type=="Keyboard"&&tt--,x.setChildIndex(t,tt),Dt()}}function Dt(){if(x==Q)z.removeFrom(),Q.addChildAt(z,Q.getChildIndex(t)+1);else{for(var tt=x;tt.parent&&tt.parent!=Q;)tt=tt.parent;t.stage&&(z.parent==Q&&Q.removeChild(z),Q.addChildAt(z,Q.getChildIndex(tt)+1))}}var Ht,Vt;h.drag(),h.on("mousedown",Rt),h.on("pressup",function(tt){if(!X.ctrlKey){for(var _t=0;_t<Be.length;_t++)if(e.dist(h.x,h.y,Be[_t].x,Be[_t].y)<k){h.x=Be[_t].x,h.y=Be[_t].y;break}e.dist(h.x,h.y,ae.x,ae.y)<k&&(h.x=ae.x,h.y=ae.y)}var $t=t.rotation;Ht=t.globalToLocal(h.x,h.y),x==Q?Vt=new e.Point(h.x,h.y):Vt=x.globalToLocal(h.x,h.y),t.reg(Ht.x,Ht.y),t.rotation=0,t.x=t.x+Vt.x-t.x,t.y=t.y+Vt.y-t.y,t.rotation=$t,ot(),me(),Zt(tt),Q.update()});var Pt=!0;Ie=L?"none":"move",Ce.drag({overCursor:Ie,dragCursor:Ie,onTop:!1}),Ce.controlType="move",L&&(Ce.on("mouseover",Kt),Ce.on("mouseout",Bt));function Bt(){Q.off("stagemousemove",ft),!xt&&(Pe.removeFrom(z),Q.update())}function Kt(tt){xt||!L||!Pt||(Pe.addTo(z).pos({x:tt.stageX/e.scaX,y:tt.stageY/e.scaY,reg:!0}),Q.update(),ft&&Q.off("stagemousemove",ft),ft=Q.on("stagemousemove",function(_t){Pe.x=_t.stageX/e.scaX,Pe.y=_t.stageY/e.scaY,Q.update()}))}Ce.on("mousedown",Rt),Ce.on("pressmove",function(tt){if(t.transformControls.visible){var _t;if(x==Q?_t=new e.Point(Ce.x,Ce.y):_t=x.globalToLocal(Ce.x,Ce.y),t.x=_t.x,t.y=_t.y,ot(),t.transformControls.events){var $t="move";rt(tt,$t)}}}),Ce.on("pressup",function(tt){t.transformControls.visible&&Zt(tt)});var Gt=Q.on("stagemouseup",function(){xt=!1,Ce.mouseEnabled=!0,Pt||(wt=new $e.Event("transformed"),t.x!=cn.x||t.y!=cn.y?wt.transformType="move":wt.transformType="select",wt.pressup=!0,t.dispatchEvent(wt)),Pt=!0,Ce.visible=!0,ht&&!X.ctrlKey&&Y>1&&(t.rotation=Math.round(t.rotation/Y)*Y,ot()),me(),Ce.mouseEnabled=!0,ht=!1,Q.update()});function rn(){cn={x:t.x,y:t.y,rotation:t.rotation,regX:t.regX,regY:t.regY,scaleX:t.scaleX,scaleY:t.scaleY}}var cn;rn();var ln=t.on("mousedown",rn);z.on("mousedown",rn),z.addChild(g),r&&z.addChild(Ce),l&&z.addChild(Ye),i&&z.addChild(te),o&&z.addChild(K),c&&z.addChild(xe),z.addChild(h);var Jt;r&&(t.drag({overCursor:"pointer",dragCursor:"pointer",onTop:!1,removeTweens:!1}),Jt=t.on("pressmove",function(tt){if(ot(),me(),ze(),t.transformControls.events){var _t="move";rt(tt,_t)}}));var It=p;return t.transformControls={visible:v,events:G,ghost:!n(F),ghostEnabled:!n(F),show:function(){return w&&Rt(),Dt(),t.toggled=!0,t.transformControls.visible=!0,d.parent&&d.removeFrom(),Q.update(),t},hide:function(){if(t.transformControls.ghost)var tt=Q.getChildIndex(z);return Q.removeChild(z),t.transformControls.ghost&&t.transformControls.ghostEnabled&&Q.addChildAt(d,tt),t.toggled=!1,t.transformControls.visible=!1,L&&(Et&&Q.off("stagemousemove",Et),ft&&Q.off("stagemousemove",ft),xt=!1,St.removeFrom(Q),Ft.removeFrom(Q)),r||t.cur(Lt),Q.update(),t},remove:function(tt){tt||t.transformControls.hide(),p=!1,r&&(t.noDrag(),t.off("pressmove",Jt))},add:function(tt){tt||t.transformControls.show(),p=It,r&&(t.drag({overCursor:"pointer",dragCursor:"pointer",onTop:!1,removeTweens:!1}),Jt=t.on("pressmove",Jt))},allowToggleOn:function(){p=It=!0,Ke=z.on("mousedown",Ke),ut=t.on("mousedown",ut),qe=Q.on("stagemousedown",qe)},allowToggleOff:function(){p=It=!1,z.off("mousedown",Ke),t.off("mousedown",ut),Q.off("stagemousedown",qe)},disable:function(){z.mouseChildren=!1,z.mouseEnabled=!1,r&&(t.noDrag(),t.off("pressmove",Jt))},enable:function(){z.mouseChildren=!0,z.mouseEnabled=!0,r&&(t.drag({overCursor:"pointer",dragCursor:"pointer",onTop:!1,removeTweens:!1}),Jt=t.on("pressmove",Jt))},recordData:function(tt){var _t={type:t.type,index:x.getChildIndex(t),x:t.x,y:t.y,scaleX:t.scaleX,scaleY:t.scaleY,rotation:t.rotation,skewX:t.skewX,skewY:t.skewY,regX:t.regX,regY:t.regY,controls:t.transformControls.visible};return tt?JSON.stringify(_t):_t},setData:function(tt,_t){if(!n(tt)){_t&&(tt=JSON.parse(tt)),delete tt.controls;var $t=tt.index;n($t)&&($t=0),delete tt.index;for(var Wt in tt)t[Wt]=tt[Wt];return setTimeout(function(){ot(),me(),ze(),x.setChildIndex(t,$t),t.transformControls.visible&&t.type!="Layer"?t.transformControls.show():t.transformControls.hide(),t.transformControls.ghost&&!t.transformControls.ghostEnabled&&!t.transformControls.visible&&Q.addChild(d)},90),t}},hideGhost:function(){t.transformControls.ghost=!1,d.removeFrom()},showGhost:function(){if(t.transformControls.ghost=!0,t.transformControls.ghostEnabled&&!t.transformControls.visible){for(var tt=x;tt.parent&&tt.parent!=Q;)tt=tt.parent;d.stage?Q.setChildIndex(d,Q.getChildIndex(tt)+1):Q.addChildAt(d,Q.getChildIndex(tt)+1)}},addGhost:function(){B>0?(t.transformControls.ghostEnabled=!0,t.transformControls.showGhost()):Ct&&lt("transform() - ghostWidth must be > 0 when making transform")},removeGhost:function(){t.transformControls.ghostEnabled=!1,t.transformControls.hideGhost()},resize:function(tt){if(x=t.parent,ot(),me(),ze(),v&&t.transformControls.show(),tt){var _t=new $e.Event("transformed");_t.pressup=!0,_t.transformType="resize",t.dispatchEvent(_t)}return t},dispose:function(){t.transformControls.hide(),p=!1,r&&(t.noDrag(),t.off("pressmove",Jt)),t.transformControls.hideGhost(),Ce.removeAllEventListeners(),xe.removeAllEventListeners(),h.removeAllEventListeners(),te.removeAllEventListeners(),K.removeAllEventListeners(),Ye.removeAllEventListeners(),z.removeAllEventListeners(),ut&&t.off("mousedown",ut),Ke&&t.off("mousedown",Ke),qe&&Q.off("stagemousedown",qe),Et&&Q.off("stagemousemove",Et),ft&&Q.off("stagemousemove",ft),Gt&&Q.off("stagemouseup",Gt),ln&&t.off("mousedown",ln),Jt&&t.off("pressmove",Jt),z=St=Ft=null,t.transformControls=null},controls:z,scaleControls:Ye,stretchXControls:te,stretchYControls:K,rotateControls:xe},t.toggle=function(tt){return tt===!0?t.transformControls.show():tt===!1||t.transformControls.visible?t.transformControls.hide():t.transformControls.show(),t},t.transformControls.ghost&&(t.transformControls.toggleGhost=function(tt){return tt===!0?t.transformControls.showGhost():tt===!1||t.transformControls.visible?t.transformControls.hideGhost():t.transformControls.showGhost(),t}),v?t.transformControls.show():!Z&&t.transformControls.ghost&&t.transformControls.showGhost(),t},e.gesture=function(t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R){var T="obj, move, scale, rotate, boundary, minScale, maxScale, snapRotate, localBoundary, slide, slideFactor, regControl, onTop, surround, circularBounds, rect",L;if(L=vt(e.gesture,arguments,T))return L;if(He("34.5"),n(t)||!t.on)return;n(r)&&(r=!0),n(i)&&(i=!0),n(o)&&(o=!0),n(w)&&(w=!1),n(v)&&(v=1),n(b)&&(b=!1),n(_)&&(_=5),n(E)&&(E=!1),n(S)&&(S=!0),n(P)&&(P=!1),P&&o&&(P=R=null,Ct&&lt("gesture() - does not support surround when rotate is true")),n(A)&&(A=!1),n(l)&&!n(R)&&(l=R);var I,C,k,Y,W=y();if(n(t.zimMaskDynamic)||t.zimMaskApply(),!t.zimTouch){var G=new e.Damp(t.scaleX,.05),F=new e.Damp(t.scaleY,.05),B=t.scaleX/t.scaleY;if(t.zimTouch={move:r,scale:i,rotate:o,pointers:{},checkBounds:function(h,x){if(t.zimTouch.boundary){var j=t.zimTouch.boundary,O=t.parent.localToLocal(h,x,t.parent);P?(h=Math.min(j.x,Math.max(j.x+j.width,O.x)),x=Math.min(j.y,Math.max(j.y+j.height,O.y))):(h=Math.max(j.x,Math.min(j.x+j.width,O.x)),x=Math.max(j.y,Math.min(j.y+j.height,O.y))),O=t.parent.globalToLocal(h,x),h=O.x,x=O.y}return{x:h,y:x}}},l){t.zimTouch.boundary=l,w&&(t.zimTouch.boundary=e.boundsToGlobal(t.parent,l)),t.zimTouch.boundaryStartX=t.zimTouch.boundary.x,t.zimTouch.boundaryStartY=t.zimTouch.boundary.y,t.zimTouch.boundaryStartW=t.zimTouch.boundary.width,t.zimTouch.boundaryStartH=t.zimTouch.boundary.height;var q=t.zimTouch.checkBounds(t.x,t.y);t.x=q.x,t.y=q.y}b&&(k=10,Y=5,C=0,I=[],t.zimTouch.slideInterval=e.interval(k/(W=="s"?1e3:1),function(){I[C++%Y]=[t.x,t.y]}),t.zimTouch.slideInterval.pause(),t.animate({x:t.x,y:t.y},10/(W=="s"?1e3:1),"quadOut"));var Z,X,ne,$,re,de,Q,U;t.zimTouch.mousedown=t.on("mousedown",function(h){if(n(U)?U=1:U++,S){var x=t.parent.numChildren-1;t.parent.getChildAt(x).type=="Keyboard"&&x--,t.parent.setChildIndex(t,x),t.ZIMoutlineShape&&t.outline()}E||(Q=null,X=t.scaleX,ne=t.scaleY,$=t.rotation,re=t.regX,de=t.regY,t.reg(0,0),Z=t.getMatrix(),t.regX=re,t.regY=de);var j="id"+Math.abs(h.pointerID+1),O=t.parent.globalToLocal(h.stageX/e.scaX,h.stageY/e.scaY);t.zimTouch.pointers[j]={startX:O.x,startY:O.y,x:O.x,y:O.y},(t.zimTouch.move||t.zimTouch.rotate)&&(t.zimTouch.total=0,e.loop(t.zimTouch.pointers,function(){t.zimTouch.total++})),b&&t.zimTouch.total==1&&t.zimTouch.slideInterval.pause(!1),g()}),t.zimTouch.pressmove=t.on("pressmove",function(h){var x="id"+Math.abs(h.pointerID+1),j=t.parent.globalToLocal(h.stageX/e.scaX,h.stageY/e.scaY);t.zimTouch.pointers[x]&&(t.zimTouch.pointers[x].x=j.x,t.zimTouch.pointers[x].y=j.y);var O=0,V=0,ce=0,H=0,N=0,ue=0;if(e.loop(t.zimTouch.pointers,function(Pe,Re){O+=Re.x-Re.startX,V+=Re.y-Re.startY,ce+=Re.x,H+=Re.y}),t.zimTouch.total!=0){N=O/t.zimTouch.total,ue=V/t.zimTouch.total,O=t.zimTouch.startX+N,V=t.zimTouch.startY+ue,ce=ce/t.zimTouch.total,H=H/t.zimTouch.total;var fe={x:t.x,y:t.y,scaleX:t.scaleX,scaleY:t.scaleY,rotation:t.rotation};if(t.zimTouch.move){var ae=t.zimTouch.checkBounds(O,V);fe.x=ae.x,fe.y=ae.y}if(t.zimTouch.pair.length==2){var Ie=t.zimTouch.pair[0],ge=t.zimTouch.pair[1];if(t.zimTouch.scale){var Be=Math.sqrt(Math.pow(ge.startX-Ie.startX,2)+Math.pow(ge.startY-Ie.startY,2)),z=Math.sqrt(Math.pow(ge.x-Ie.x,2)+Math.pow(ge.y-Ie.y,2)),Ye=t.zimTouch.startSX+(z/Be-1),te=t.zimTouch.startSY+(z/Be-1);fe.scaleX=Ye,fe.scaleY=te,fe.scaleX=G.convert(Ye),fe.scaleY=F.convert(te);var K=!n(c)&&Math.min(Ye,te)<c,xe=!n(p)&&Math.max(Ye,te)>p;(K||xe)&&(K?B>1?(fe.scaleY=c,fe.scaleX=c*B):(fe.scaleX=c,fe.scaleY=c/B):xe&&(B>1?(fe.scaleX=p,fe.scaleY=p/B):(fe.scaleY=p,fe.scaleX=p*B)),G.immediate(fe.scaleX),F.immediate(fe.scaleY))}if(t.zimTouch.rotate){var _e=Math.atan2(Ie.startY-ge.startY,Ie.startX-ge.startX)*(180/Math.PI),Se=Math.atan2(Ie.y-ge.y,Ie.x-ge.x)*(180/Math.PI),ie=Se-_e;fe.rotation=t.zimTouch.startR+ie}if(E)t.scaleX=fe.scaleX,t.scaleY=fe.scaleY,t.rotation=fe.rotation,t.zimTouch.move&&(t.x=fe.x,t.y=fe.y);else{t.reg(0,0);var pe=t.parent.localToGlobal(ce,H);ce=pe.x,H=pe.y;var be=n(Q)?t.globalToLocal(ce,H):t.globalToLocal(Q.x,Q.y),he=Z.clone().translate(be.x,be.y).rotate(fe.rotation-$).scale(fe.scaleX/X,fe.scaleY/ne).translate(-be.x,-be.y);he.decompose(t),t.zimTouch.move&&(t.x+=N,t.y+=ue),Q=t.localToGlobal(be.x,be.y),t.reg(re,de)}t.zimTouch.scale&&t.dispatchEvent("scale"),t.zimTouch.rotate&&t.dispatchEvent("rotate"),t.zimTouch.move&&t.dispatchEvent("move")}else t.x=fe.x,t.y=fe.y,t.zimTouch.move&&t.dispatchEvent("move");(t.type=="Tag"||t.type=="TextArea"||t.type=="Loader")&&t.resize(),t.ZIMoutlineShape&&t.outline(),t.getStage&&t.stage&&t.stage.update()}}),t.on("mousedown",function(){var h=1;t.stage.on("stagemousedown",function(){h++}),t.stage.on("stagemouseup",function(){h--,h==0&&setTimeout(function(){t.zimTouch&&(t.zimTouch.total=0),t.zimTouch&&(t.zimTouch.pointers={}),U=null},50)})},null,!0),t.zimTouch.pressup=t.on("pressup",function(h){var x="id"+Math.abs(h.pointerID+1);if(delete t.zimTouch.pointers[x],(t.zimTouch.move||t.zimTouch.rotate)&&t.zimTouch.total--,o&&!n(v)&&t.zimTouch.total==0&&(v>0?t.rotation=Math.round(t.rotation/v)*v:v==0&&(t.rotation=Math.round(t.rotation))),b&&t.zimTouch.total==0&&U==1){t.zimTouch.slideInterval.pause();var j=I[(C+1)%I.length],O=I[C%I.length],V=t.x+(j[0]-O[0])*_,ce=t.y+(j[1]-O[1])*_,H=t.zimTouch.checkBounds(V,ce),N=Y*k*_*Math.min((t.x-H.x)/(t.x-V)||1,(t.y-H.y)/(t.y-ce)||1);t.animate({x:H.x,y:H.y},N/(W=="s"?1e3:1),"quadOut",function(){t.dispatchEvent("slidestop")})}t.zimTouch.total==0&&(U=null),t.getStage&&t.stage&&t.stage.update(),g()}),l&&(d(),t.on("move",d))}function g(){t.zimTouch.pair=[],e.loop(t.zimTouch.pointers,function(h,x,j){x.startX=x.x,x.startY=x.y,j<=1&&t.zimTouch.pair.push(x)}),t.zimTouch.startX=t.x,t.zimTouch.startY=t.y,t.zimTouch.startSX=t.scaleX,t.zimTouch.startSY=t.scaleY,t.zimTouch.startR=t.rotation}function d(){var h=t.localToGlobal(t.regX,t.regY),x;if(A){var j=t.parent.localToGlobal(t.x-t.width/2,t.y-t.height/2),O=t.parent.localToGlobal(t.x+t.width/2,t.y+t.height/2);x={x:j.x,y:j.y,width:O.x-j.x,height:O.y-j.y}}else x=t.boundsToGlobal();var V={x:t.zimTouch.boundaryStartX+h.x-x.x,y:t.zimTouch.boundaryStartY+h.y-x.y,width:t.zimTouch.boundaryStartW-x.width,height:t.zimTouch.boundaryStartH-x.height};t.gestureBoundary(V,!1)}return t},e.noGesture=function(t,r,i,o){var l="obj, move, scale, rotate",c;if(c=vt(e.noGesture,arguments,l))return c;if(He("34.6"),!(n(t)||!t.on||!t.zimTouch))return n(r)&&(r=!0),n(i)&&(i=!0),n(o)&&(o=!0),t.zimTouch.move=!r,t.zimTouch.scale=!i,t.zimTouch.rotate=!o,!t.zimTouch.move&&!t.zimTouch.scale&&!t.zimTouch.rotate&&(t.off("mousedown",t.zimTouch.mousedown),t.off("pressmove",t.zimTouch.pressmove),t.off("pressup",t.zimTouch.pressup),delete t.zimTouch),t},e.gestureBoundary=function(t,r,i){if(He("34.7"),!(n(t)||!t.on)&&!(n(r)||!t.zimTouch)){t.zimTouch.localBoundary&&t.parent?t.zimTouch.boundary=e.boundsToGlobal(t.parent,r):t.zimTouch.boundary=r,n(i)&&(i=!0),i&&(t.zimTouch.boundaryStartX=r.x,t.zimTouch.boundaryStartY=r.y,t.zimTouch.boundaryStartW=r.width,t.zimTouch.boundaryStartH=r.height);var o=t.zimTouch.checkBounds(t.x,t.y);return t.x=o.x,t.y=o.y,t}},e.effect=function(t,r,i,o,l,c){if(He("33.16"),n(r))return t;n(t.effects)&&(t.effects={}),Array.isArray(r)||(r=[r]);for(var p=0,v=0;v<r.length;v++){var w=r[v];w.type||(w instanceof $e.BlurFilter?w.type="BlurEffect":w instanceof $e.ColorFilter?w.type="ColorEffect":w instanceof $e.AlphaMaskFilter?w.type="AlphaEffect":w instanceof $e.ColorMatrixFilter?w.type="MultiEffect":n(w.type)&&(w.type="custom"+p++));var b=w.type.replace(/effect/i,"");t.effects[b.toLowerCase()]=w}t.filters=[];for(var _ in t.effects)t.filters.push(t.effects[_]);return t.cache(i,o,l,c),t},e.updateEffects=function(t,r){return He("33.163"),t.updateCache&&(r?t.cache():t.updateCache()),t},e.noEffect=function(t,r,i){if(He("33.165"),n(i)&&(i=!1),n(r)){var o;t.effects.multi&&(o=t.effects.multi),t.effects={},o&&(t.effects.multi=o)}else{t.effects||(t.effects={}),Array.isArray(r)||(r=[r]);for(var l=0;l<r.length;l++){var c=r[l].replace(/effect/i,"");delete t.effects[c.toLowerCase()]}}t.filters=[];for(var p in t.effects)t.filters.push(t.effects[p]);return i||t.filters.length>0?t.updateCache&&t.updateCache():t.uncache&&t.uncache(),t},e.addPhysics=function(t,r,i,o,l,c,p,v,w,b,_,E,S,P){var A="obj, dynamic, contract, shape, friction, linear, angular, density, bounciness, maskBits, categoryBits, physics, restitution, sensor",R;if(R=vt(e.addPhysics,arguments,A))return R;if(He("34.8"),n(E)){if(typeof zimPhysics>"u")return Ct&&lt("ZIM Physics module must be imported"),t;n(le.zimDefaultPhysics)&&(le.zimDefaultPhysics=new e.Physics),E=le.zimDefaultPhysics}t.physics=E;var T="rectangle";return t.type=="Circle"||t.type=="Dial"?T="circle":t.type=="Triangle"?T="triangle":t.type=="Blob"&&(T="poly"),n(o)&&(o=T),n(w)&&(w=S),Te(t,r,i,o,l,c,p,v,w,b,_,P),t},e.removePhysics=function(t){return He("34.85"),n(t.physics)||(t==t.physics.followObj&&t.physics.follow(null),t.follow=t.noFollow=t.control=t.noControl=t.sleep=t.wake=null,t.impulse=t.force=t.spin=t.torque=null,t.physics.remove(t.body),t.physics=null),t},e.hitTestPoint=function(t,r,i,o){if(e.zimhtp||(He("35"),e.zimhtp=!0),!t.stage||n(r)||n(i))return!1;if(!(n(t)||!t.globalToLocal)){if(n(o)&&(o=!0),o){var l=t.getBounds();if(l){var c=t.globalToLocal(r,i);if(c.x>l.x+l.width||c.x<l.x||c.y>l.y+l.height||c.y<l.y)return!1}}var p={x:r,y:i};return t.image||t.spriteSheet||t.type=="Shape"?p=t.globalToLocal(p.x,p.y):p=t.globalToLocal(p.x*e.scaX,p.y*e.scaY),t.hitTest(p.x,p.y)}},e.hitTestReg=function(t,r,i){if(e.zimhtr||(He("36"),e.zimhtr=!0),!t.stage||!r.stage)return!1;if(!(n(t)||n(r)||!t.localToLocal||!r.localToLocal)){n(i)&&(i=!0);var o=r.localToGlobal(r.regX,r.regY),l=t.getBounds();if(i&&l){var c=t.globalToLocal(o.x,o.y);if(c.x>l.x+l.width||c.x<l.x||c.y>l.y+l.height||c.y<l.y)return!1}return t.image||t.spriteSheet||t.type=="Shape"?o=t.globalToLocal(o.x,o.y):o=t.globalToLocal(o.x*e.scaX,o.y*e.scaY),t.hitTest(o.x,o.y)}},e.hitTestRect=function(t,r,i,o,l){if(e.zimhtr||(He("37"),e.zimhtr=!0),!t.stage||!r.stage)return!1;if(n(t)||n(r)||!t.hitTest||!r.getBounds)return;n(i)&&(i=0),n(o)&&(o=!0);var c=r.getBounds();if(!c){Ct&&lt("hitTestRect():\n please setBounds() on param b object");return}if(o){var p=t.getBounds();if(p&&!e.hitTestBounds(t,r))return!1}function v(A){if(t.image||t.spriteSheet||t.type=="Shape"?A=t.globalToLocal(A.x,A.y):A=t.globalToLocal(A.x*e.scaX,A.y*e.scaY),t.hitTest(A.x,A.y))return!0}var w=c.x+c.width/2,b=c.y+c.height/2,_=r.localToGlobal(w,b),E,S;if(l){if(!v(_))return!1;for(var P=0;P<=i;P++)if(E=c.width*(P+1)/(i+1),S=c.height*(P+1)/(i+1),_=r.localToGlobal(c.x+E,c.y),!v(_)||(_=r.localToGlobal(c.x+c.width,c.y+S),!v(_))||(_=r.localToGlobal(c.x+c.width-E,c.y+c.height),!v(_))||(_=r.localToGlobal(c.x,c.y+c.height-S),!v(_)))return!1;return!0}else{if(v(_))return!0;for(var P=0;P<=i;P++)if(E=c.width*(P+1)/(i+1),S=c.height*(P+1)/(i+1),_=r.localToGlobal(c.x+E,c.y),v(_)||(_=r.localToGlobal(c.x+c.width,c.y+S),v(_))||(_=r.localToGlobal(c.x+c.width-E,c.y+c.height),v(_))||(_=r.localToGlobal(c.x,c.y+c.height-S),v(_)))return!0}},e.hitTestCircle=function(t,r,i,o,l){if(e.zimhtc||(He("38"),e.zimhtr=!0),He("38"),!t.stage||!r.stage||n(t)||n(r)||!t.hitTest||!r.getBounds)return;n(i)&&(i=8),n(o)&&(o=!0);var c=r.getBounds();if(!c){Ct&&lt("hitTestCircle():\n please setBounds() on param b object");return}var p=t.getBounds();if(o&&p&&!e.hitTestBounds(t,r))return!1;function v(T){if(t.image||t.spriteSheet||t.type=="Shape"?T=t.globalToLocal(T.x,T.y):T=t.globalToLocal(T.x*e.scaX,T.y*e.scaY),t.hitTest(T.x,T.y))return!0}var w=c.x+c.width/2,b=c.y+c.height/2,_=r.localToGlobal(w,b),E=(c.width+c.height)/2/2,S,P,A;if(l){if(!v(_))return!1;for(var R=0;R<i;R++)if(S=R/i*2*Math.PI,P=w+E*Math.cos(S),A=b+E*Math.sin(S),_=r.localToGlobal(P,A),!v(_))return!1;return!0}else{if(v(_))return!0;for(var R=0;R<i;R++)if(S=R/i*2*Math.PI,P=w+E*Math.cos(S),A=b+E*Math.sin(S),_=r.localToGlobal(P,A),v(_))return!0}return!1},e.hitTestCircleRect=function(t,r,i){if(e.zimhtcr||(He("38.2"),e.zimhtcr=!0),!(!t.stage||!r.stage)){var o=t.stage;if(!(n(t)||n(r)||!t.getBounds||!r.getBounds)){var l=t.getBounds(),c=r.getBounds();if(!l||!c){Ct&&lt("hitTestCircleRect():\n please setBounds() on both objects");return}n(i)&&(i=0);var p=(t.radius?t.radius:(l.width+l.height)/2)+i,v=t.getConcatenatedMatrix().decompose().scaleX;p*=v/o.scaleX;var w=r.boundsToGlobal(),b=t.localToGlobal(0,0),_=b.x,E=b.y,S=w.x,P=w.y,A=w.x+w.width,R=w.y+w.height,T=_<S?S:_>A?A:_,L=E<P?P:E>R?R:E,I=T-_,C=L-E;return I*I+C*C<=p*p}}},e.hitTestCircles=function(t,r,i){if(e.zimhtcs||(He("38.5"),e.zimhtcs=!0),!(!t.stage||!r.stage)){var o=t.stage;if(!(n(t)||n(r)||!t.hitTest||!t.getBounds||!r.getBounds)){var l=t.getBounds(),c=r.getBounds();if(!l||!c){Ct&&lt("hitTestCircles():\n please setBounds() on both objects");return}n(i)&&(i=0);var p=t.localToGlobal(l.x+l.width/2,l.y+l.height/2),v=r.localToGlobal(c.x+c.width/2,c.y+c.height/2),w=t.getConcatenatedMatrix(),b=r.getConcatenatedMatrix(),_=Math.sqrt(w.a/o.scaleX*w.a/o.scaleX+w.c/o.scaleX*w.c/o.scaleX),E=Math.sqrt(w.b/o.scaleY*w.b/o.scaleY+w.d/o.scaleY*w.d/o.scaleY),S=Math.sqrt(b.a/o.scaleX*b.a/o.scaleX+b.c/o.scaleX*b.c/o.scaleX),P=Math.sqrt(b.b/o.scaleY*b.b/o.scaleY+b.d/o.scaleY*b.d/o.scaleY),A=Math.sqrt(Math.abs(Math.pow(p.x-v.x,2)+Math.pow(p.y-v.y,2)));return l.width*Math.max(_,E)/2+c.width*Math.max(S,P)/2>=A-i}}},e.hitTestBounds=function(t,r,i,o){if(e.zimhtb||(He("39"),e.zimhtb=!0),!(!t.stage||!r.stage)&&!(n(t)||n(r)||!t.getBounds||!r.getBounds)){var l=!1;o&&o.graphics&&(l=!0);var c=t.getBounds(),p=r.getBounds();if(!c||!p){Ct&&lt("hitTestBounds():\n please setBounds() on both objects");return}n(i)&&(i=0);var v=e.boundsToGlobal(t),w=e.boundsToGlobal(r);if(l){var b=o.graphics;b.c(),b.ss(1).s("blue"),b.r(v.x,v.y,v.width,v.height),b.s("green"),b.r(w.x,w.y,w.width,w.height),o.stage.update()}return e.rectIntersect(v,w,i)}},e.hitTestPath=function(t,r,i,o,l,c){if(e.zimhtpa||(He("37.5"),e.zimhtpa=!0),!t.stage||!r.stage||n(t)||n(r)||!t.hitTest||r.type!="Squiggle"&&r.type!="Blob")return;var p=t.getBounds();n(i)&&(i=2),n(o)&&(o=!1),n(l)&&(l=!1),n(c)&&(c=!1);var v=[],w;function b(A){var R;if(t.image||t.spriteSheet||t.type=="Shape"?R=t.globalToLocal(A.x,A.y):R=t.globalToLocal(A.x*e.scaX,A.y*e.scaY),t.hitTest(R.x,R.y))if(l)v.push({x:Math.round(A.x),y:Math.round(A.y)});else if(c)w=E/_.length*100;else return!0}var _=r.interpolate(i,null,!0,null,!0),E,S;if(o)for(r.hitPathPoints?r.hitPathPoints.removeAllChildren():r.hitPathPoints=new e.Container().addTo(),r.hitPathPoints.top(),E=0;E<_.length;E++)S=_[E],S=r.localToGlobal(S.x,S.y),new e.Circle(3).loc(S.x,S.y,r.hitPathPoints);if(p){var P=e.boundsAroundPoints(_);if(!e.rectIntersect(t.boundsToGlobal(p),r.boundsToGlobal(P)))return!1}for(E=0;E<_.length;E++){if(S=_[E],S=r.localToGlobal(S.x,S.y),b(S))return!0;if(w!=null)return w}return v.length>0?v:!1},e.hitTestGrid=function(t,r,i,o,l,c,p,v,w,b,_,E,S){if(e.zimhtg||(He("41"),e.zimhtg=!0),!t.stage)return!1;if(!n(t)&&!E){var P=t.globalToLocal(c,p);c=P.x,p=P.y}n(v)&&(v=0),n(w)&&(w=0),n(b)&&(b=0),n(_)&&(_=0),r+=b,i+=_;var A=r/o,R=i/l,T=Math.min(o-1,Math.max(0,Math.floor((c-v+b/2)/A))),L=Math.min(l-1,Math.max(0,Math.floor((p-w+_/2)/R)));if(!(S!="open"&&(c-v>A*(T+1)-b||c-v<A*T||p-w>R*(L+1)-_||p-w<R*L))){var I=L*o+T;if(n(S)||S=="index")return I;if(S=="col")return T;if(S=="row")return L;if(S=="array"||S=="open")return[I,T,L]}},e.animate=function(t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,T,L,I,C,k,Y,W,G,F,B,q,Z,X,ne,$,re,de,Q,U,g,d,h,x,j,O,V,ce,H,N,ue,fe,ae,Ie,ge,Be,z,Ye,te){var K="target, props, time, ease, call, params, wait, waitedCall, waitedParams, loop, loopCount, loopWait, loopCall, loopParams, loopWaitCall, loopWaitParams, loopPick, rewind, rewindWait, rewindCall, rewindParams, rewindWaitCall, rewindWaitParams, rewindTime, rewindEase, sequence, sequenceCall, sequenceParams, sequenceReverse, ticker, cjsProps, css, protect, override, from, set, id, events, sequenceTarget, dynamic, drag, clamp, startPaused, clean, obj, seriesWait, sequenceWait, rate, pauseOnBlur, easeAmount, easeFrequency, timeUnit, timeCheck, noAnimateCall";if(t&&(t.props||t.obj)){var xe;if(xe=vt(e.animate,arguments,K))return xe}if(t.type=="AC"&&le.zdf)return le.zdf.ac("animate",arguments),t;if(e.animateCheck||(He("45"),e.animateCheck=!0),!t)return;var _e=e.ANIMATE;if(le.ANIMATE!=null&&(_e=le.ANIMATE),!_e)return n(te)&&(te=!0),l&&te&&typeof l=="function"&&l(n(c)?t:c),t;n(Ye)&&(Ye=!0);var Se=y(null,z,null,null,n(Ye)?!1:!Ye);(_||S||E)&&(b=!0),(G||C||G||F||I)&&(L=!0);var ie,pe,be,he=arguments,Pe=Array.prototype.slice.call(arguments);if(n(r)&&!n(N)&&(r=N),N=r,n(N))return Ct&&lt("animate() - need props"),t;if(t.type=="BeadsContainer"&&n(B)&&(B=0),t.type=="Tone"&&(Ie=!1),Ie===!1?e.pauseAnimateOnBlur=!1:(Ie||n(Ie)&&e.pauseAnimateOnBlur!==!1)&&(n(e.blurCheck)&&e.setBlurDetect(),e.pauseAnimateOnBlur=!0),!(!n(B)&&t.addChild)){i=e.Pick.choose(i),o=e.Pick.choose(o),p=e.Pick.choose(p),_=e.Pick.choose(_),E=e.Pick.choose(E),L=e.Pick.choose(L),I=e.Pick.choose(I),n(G)?G=i:G=e.Pick.choose(G),X=e.Pick.choose(X),U=e.Pick.choose(U),g=e.Pick.choose(g);var Re=["loopCount","loopWait","rewind","rewindWait"];for(pe in $)Re.indexOf(pe)>=0&&($[pe]=e.Pick.choose($[pe]))}var ve={override:!n(t)&&!n(t.zimX)&&!n(N.x)||!n(t)&&!n(t.zimY)&&!n(N.y)};n(b)||(ve.loop=b),n(_)||(ve.count=_),n(E)||(ve.loopWait=E),n(S)||(ve.loopCall=S),n(R)||(ve.loopWaitParams=R),n(A)||(ve.loopWaitCall=A),n(P)||(ve.loopParams=P),n(T)||(ve.loopPick=T),n(L)||(ve.rewind=L),n(I)||(ve.rewindWait=I),n(C)||(ve.rewindCall=C),n(k)||(ve.rewindParams=k),n(Y)||(ve.rewindWaitCall=Y),n(W)||(ve.rewindWaitParams=W),n(r)||(ve=e.merge(ve,$)),$=ve,e.loop(N,function(Xe,pt){if(typeof Xe=="string"){var Tt=Xe.split(".");if(Tt.length>1&&Xe.substr(0,1)!="."&&(N["."+Xe]=pt,delete N[Xe],Xe="."+Xe),Tt.length>1&&typeof pt=="string"){var kt=pt.substr(0,1);kt!="+"&&kt!="-"&&(N[Xe]="+"+pt)}}});function Ae(Xe,pt){if(pt.substr(0,1)=="."){for(var Tt=pt.split("."),kt=Xe,Yt=1;Yt<Tt.length;Yt++)kt=kt[Tt[Yt]];return kt}else return pt=="transform"&&Xe.style?Xe.style.transform:Xe[pt]}function ye(Xe,pt,Tt){if(pt.substr(0,1)=="."){for(var kt=pt.split("."),Yt=Xe,Nt=1;Nt<kt.length-1;Nt++)Yt=Yt[kt[Nt]];Yt[kt[kt.length-1]]=Tt}else Xe[pt]=Tt}if(t.zimTweenOriginals={},!n(B)&&t.addChild){var Fe=[];for(ie=0;ie<t.numChildren;ie++)Fe.push(t.getChildAt(ie));x=t,t=Fe}var De=["extra","zoom","speed","layer","fade"],ke={zoom:t.type=="Pen"?"size":"scale",speed:"percentSpeed",layer:"layer",fade:"alpha"};if(t instanceof Array){for(X&&t.reverse(),ie=0;ie<t.length;ie++){var oe=t[ie];if(U){var Ge;oe.zimObj={};for(pe in N){if(De.indexOf(pe)>=0?Ge=N[pe]:Ge=e.Pick.choose(N[pe]),oe.zimObj[pe]=oe[pe],typeof Ge=="string"&&pe!="transform"){var We;oe.zimLastObj&&!n(oe.zimLastObj[pe])?We=oe.zimLastObj[pe]:We=oe[pe],Ge=We+Number(Ge.replace(/\s/g,""))}oe.zimLastObj&&(oe.zimLastObj[pe]=L?oe.zimTweenOriginals[pe]:N[pe]),oe[pe]=Ge}}else{oe.zimObj={};for(pe in N)De.indexOf(pe)>=0,oe.zimObj[pe]=N[pe]}var Qe=ie*B;ie==0&&B!=0&&(Qe=Se=="s"?.02:20),e.animate(oe,oe.zimObj,i,o,ie==t.length-1?l:null,ie==t.length-1?c:null,p,v,w,null,null,null,null,null,null,null,T,null,null,null,null,null,null,G,F,null,q,Z,null,ne,e.copy($),re,de,Q,null,g,d,h,x,j,O,V,ce,H,N,ue,Qe,ae,Ie,ge,Be,z,Ye,te)}return x}var st=i,yt=G;n(st)&&(st=Se=="s"?1:1e3),n(G)&&(G=yt=st),n(o)&&(o="quadInOut"),n(p)&&(p=0),n(I)&&(I=0),n($)&&($={override:!n(t.zimX)&&!n(N.x)||!n(t.zimY)&&!n(N.y)}),n(c)&&(c=t),n(ne)&&(ne=!0),n(re)&&(re=!1),n(de)&&(de=!1),n(U)&&(U=!1),n(g)&&(g={}),g.scale&&(g.scaleX=g.scaleY=g.scale,delete g.scale),n(Q)||($.override=Q),n(O)&&(O=!1),n(ce)&&(ce=!!O),n(j)&&(j=!1),n(V)&&(V=!0),n(H)&&(H=!0),n(ae)&&(ae=1),t.futureRate=ae;var Le,ze,ot;if(N instanceof Array){if(be=1,N.length==0)return this;var Ce,me;return et(),ft(),Ke(),t}function Ke(){t.zimLastObj&&e.loop(t.zimLastObj,function(yn){n(t.zimTweenOriginals[yn])||(t[yn]=t.zimTweenOriginals[yn],t.zimLastObj[yn]=t.zimTweenOriginals[yn])});for(var Xe,pt=p,Tt=0,kt,Yt,Nt=0;Nt<N.length;Nt++)if(Xe=N[Nt],!n(Xe.target)){n(Xe.time)&&(Xe.time=st),pt+=Xe.wait?Xe.wait:0,kt=Xe.time,Yt=n(Xe.rewindTime)?kt:Xe.rewindTime,Xe.rewind&&(kt=kt+Yt+(Xe.rewindWait?Xe.rewindWait:0)),Xe.loop&&(kt*=Xe.loopCount,kt+=(Xe.loopCount-1)*(Xe.loopWait?Xe.loopWait:0)),n(Xe.params)&&(Xe.params=Xe.target),me=Xe.target,pt<0&&(Tt+=pt,pt=0);var gn={target:Xe.target,obj:e.copy(Xe.obj),seriesWait:Tt,wait:pt,waitedCall:Xe.waitedCall,waitedParams:Xe.waitedParams,time:Xe.time,ease:Xe.ease,from:Xe.from,rewind:Xe.rewind,call:Xe.call,params:Xe.params,loop:Xe.loop,loopCount:Xe.loopCount,loopWait:Xe.loopWait,loopCall:Xe.loopCall,loopParams:Xe.loopParams,loopWaitCall:Xe.loopWaitCall,loopWaitParams:Xe.loopWaitParams,loopPick:Xe.loopPick,rewindWait:Xe.rewindWait,rewindCall:Xe.rewindCall,rewindParams:Xe.rewindParams,rewindWaitCall:Xe.rewindWaitCall,rewindWaitParams:Xe.rewindWaitParams,rewindTime:Xe.rewindTime,rewindEase:Xe.rewindEase,set:e.copy(Xe.masterSet),events:h,rate:t.futureRate,pauseOnBlur:Xe.pauseOnBlur,easeAmount:Xe.easeAmount,easeFrequency:Xe.easeFrequency,override:!1,id:d};Nt==N.length-1&&ut(gn),e.animate(gn),Tt+=pt+kt,pt=0}}function ut(Xe){var pt=Xe.call,Tt=Xe.params;$.loop&&(!$.count||be<$.count)?Xe.call=function(){pt&&typeof pt=="function"&&pt(Tt),$.loopCall&&typeof $.loopCall=="function"&&$.loopCall($.loopParams),$.loopWait?(n(t.zimTweens)&&(t.zimTweens={}),Le=t.zimTweens[d]=t.zimTween=$e.Tween.get(t,{override:$.override}).wait($.loopWait,!0).call(kt),Le.timeScale=t.futureRate):kt();function kt(){for(var Yt=0;Yt<Ce.objects.length;Yt++)Ce.objects[Yt].set&&Ce.objects[Yt].set(Ce.values[Yt]);$.loopWaitCall&&typeof $.loopWaitCall=="function"&&$.loopWaitCall($.loopWaitParams),Ke()}}:Xe.call=function(){pt&&typeof pt=="function"&&pt(Tt),n(c)&&(c=me),l&&typeof l=="function"&&l(c),yr(d),t.zimLastObj=null},be++}function et(){t&&!t.seriesTweens&&(t.seriesTweens=[],t.seriesCalls=[],t.seriesParams=[]);for(var Xe,pt=0;pt<N.length;pt++)Xe=N[pt],Xe.target?(Xe.target.seriesTweens||(Xe.target.seriesTweens=[]),Xe.target.seriesCalls||(Xe.target.seriesCalls=[]),Xe.target.seriesParams||(Xe.target.seriesParams=[]),Xe.target.seriesTweens.push(Xe.props),Xe.target.seriesCalls.push(Xe.call),Xe.target.seriesParams.push(Xe.params)):(t.seriesTweens.push(Xe.props),t.seriesCalls.push(Xe.call),t.seriesParams.push(Xe.params));t.seriesCalls.push(l),t.seriesParams.push(c),Xe=N[0];var Tt;for(t?Tt=t:Tt=Xe.target,Tt.zimSeriesOriginals={},pt=N.length-1;pt>=0;pt--)Xe=N[pt],n(Xe.props)&&!n(Xe.obj)&&(Xe.props=Xe.obj),Xe.obj=Xe.props,e.loop(Xe.obj,function(lr){lr=="path"?Tt.zimSeriesOriginals[lr]=N[lr]:Tt.zimSeriesOriginals[lr]=Ae(Tt,lr)});var kt=new e.Dictionary;for(Ce=new e.Dictionary,pt=0;pt<N.length;pt++)if(Xe=N[pt],t||(t=Xe.target),n(Xe.target)&&(Xe.target=t),n(Xe.ease)&&(Xe.ease=o),!n(Xe.target)){if(pt==0&&(Xe.target.zimSeriesArgs=he),n(Xe.props)&&!n(Xe.obj)&&(Xe.props=Xe.obj),Xe.obj=Xe.props,Xe.loop&&(n(Xe.loopCount)||Xe.loopCount<=0)&&(Xe.loopCount=0,N.splice(pt+1,N.length)),n(Xe.obj.scale)||(Xe.obj.scaleX=Xe.obj.scaleY=Xe.obj.scale,delete Xe.obj.scale),Xe.from){var Yt=kt.at(Xe.target);if(Yt){if(Xe.set){var Nt=e.copy(Xe.obj),gn=e.merge(Yt,Xe.set);Xe.obj=mt(Xe.target,Xe.obj,gn),Xe.set=e.merge(Xe.set,Nt)}else Xe.set=e.copy(Xe.obj),Xe.obj=mt(Xe.target,Xe.obj,Yt);Xe.from=!1}else kt.add(Xe.target,mt(Xe.target,Xe.obj,Xe.set))}var yn={};for(var On in Xe.obj)yn[On]=Xe.set&&Xe.set[On]?Xe.set[On]:Xe.target[On];n(Ce.at(Xe.target))&&Ce.add(Xe.target,{});var er=e.merge(Ce.at(Xe.target),yn);Ce.remove(Xe.target),Ce.add(Xe.target,er),Xe.masterSet=e.copy(Xe.set)}n(t.zimTweens)&&(t.zimTweens={})}if(N&&(N.x&&(t.zimX=!0),N.y&&(t.zimY=!0)),!n(N.shape)&&N.shape.type==t.type&&(t.type=="Blob"||t.type=="Squiggle")){var qe=t.pointObjects,Ue=N.shape.pointObjects;if(qe.length!=Ue.length)Ct&&lt("animate() - shapes must be of same number of points"),delete N.shape;else{delete N.shape;var Ze=n(N.blobShift)?0:N.blobShift;delete N.blobShift;var it=!0;for(ie=0;ie<qe.length;ie++){var Ve=qe[ie],Me=Ue[(qe.length*2e4+ie+Ze)%qe.length];for(Mn=0;Mn<4;Mn++)if(Mn!=1){var Ne=Ve[Mn],at=e.copy(Pe);at[0]=Ne,at[1]={x:Me[Mn].x,y:Me[Mn].y,rotation:Me[Mn].rotation},it&&(at[37]=!0,Ne.animateEvent&&Ne.off("animation",Ne.animateEvent),Ne.animateEvent=Ne.on("animation",function(){t.update()})),it=!1,e.animate.apply(e.animate,at)}}if(e.isEmpty(N))return t}}if(n(t))return;t.tweenStates||(t.tweenStates={all:!0});var Je=!1;if(N.note){if(Array.isArray(N.note))e.loop(N.note,function(Xe,pt){typeof Xe=="string"&&(N.note[pt]=e.Synth.note(Xe))});else if(N.note.min)N.note.min=e.Synth.note(N.note.min),N.note.max=e.Synth.note(N.note.max);else if(N.note.array)e.loop(N.note.array,function(Xe,pt){typeof Xe=="string"&&(N.note.array[pt]=e.Synth.note(Xe))});else if(typeof N.note=="function"){if(Ct)return lt("animate() - use frequency in ZIM VEE functions not note"),t}else N.note=e.Synth.note(N.note);N.frequency=N.note,delete N.note}function dt(Xe,pt){return!!Object.getOwnPropertyDescriptor(Xe,pt).get}(t.type=="Sprite"||!Object.prototype.hasOwnProperty.call(t,"paused"))&&(Object.defineProperty(t,"paused",{get:function(){return t.animatePaused},set:function(Xe){t.animatePaused=Xe}}),t.type!=null&&(t.paused=!0),t.animating=!1),t.endTween=function(Xe,pt){if(t.stopAnimate(pt),Xe!="all"&&Xe!="main"&&Xe!="none"&&(Xe="all"),!t.seriesTweens)e.loop(t.zimLastObj,function(kt){typeof t.zimLastObj[kt]=="string"&&kt!="transform"&&(t.zimLastObj[kt]=t[kt]+Number(t.zimLastObj[kt].replace(/\s/g,""))),ye(t,kt,t.zimLastObj[kt])}),Xe!="none"&&l&&l(c);else{if(e.loop(t.seriesTweens,function(kt,Yt){e.loop(kt,function(Nt){typeof kt[Nt]=="string"&&Nt!="transform"&&(kt[Nt]=t[Nt]+Number(kt[Nt].replace(/\s/g,""))),ye(t,Nt,kt[Nt])}),Xe=="all"&&t.seriesCalls[Yt]&&t.seriesCalls[Yt](t.seriesParams[Yt])}),Xe!="none"){var Tt=t.seriesCalls[t.seriesCalls.length-1];Tt&&Tt(t.seriesParams[t.seriesParams.length-1])}t.seriesTweens=null,t.seriesCalls=null,t.seriesParams=null}return t.stage&&t.stage.update(),t};var Oe=!1;if(e.loop(N,function(Xe,pt){Xe=="path"?t.zimTweenOriginals[Xe]=N[Xe]:t.zimTweenOriginals[Xe]=Ae(t,Xe),Xe.match("hue")?(N.hueBatch=pt,delete N.hue,Oe=!0):Xe.match("saturation")?(N.saturationBatch=pt,delete N.saturation,Oe=!0):Xe.match("brightness")?(N.brightnessBatch=pt,delete N.brightness,Oe=!0):Xe.match("contrast")?(N.contrastBatch=pt,delete N.contrast,Oe=!0):Xe.match(/^.effects/)&&(Oe=!0)}),t.resetTween=function(Xe){n(Xe)&&(Xe=!0),t.pauseAnimate(),t.percent=null,t.startPercent=null;var pt=t.zimSeriesOriginals?t.zimSeriesOriginals:t.zimTweenOriginals;return e.loop(pt,function(Tt){if(Tt=="path"){t.percentComplete=0,t.zimPath=pt[Tt];var kt;t.zimStartPercent,kt=t.zimPath.getCurvePoint(t.zimStartPercent/100),t.loc(kt.x,kt.y)}else ye(t,Tt,pt[Tt])}),t.zimLastObj=null,t.stage&&t.stage.update(),t.stopAnimate(),t.zimPath&&(Pe[1].path=t.zimPath),n(t.zimStartRotation)||(t.rotation=t.zimStartRotation),t.zimStartRotation=null,n(t.zimStartScaleX)||(t.scaleX=t.zimStartScaleX),t.zimStartScaleX=null,n(t.zimStartScaleY)||(t.scaleY=t.zimStartScaleY),t.zimStartScaleY=null,e.animate.apply(null,t.zimSeriesArgs?t.zimSeriesArgs:Pe),t.pauseAnimate(Xe),t},t.replayTween=function(){return t.resetTween(!1),t},N.path||j){var je;t.requestedPercentComplete?je=t.requestedPercentComplete:t.percentComplete&&!dt(t,"percentComplete")&&(je=t.percentComplete),t.requestedPercentComplete=null,n(je)&&(je=0),t.pathRatio=0,t.zimStartRotation=t.rotation,t.percent=null,t.parent&&t.parent.type=="BeadsContainer"||(t.startPercent=null)}re&&(ne=!1),n(t.zimTweens)&&(t.zimTweens={});var gt;if(re||(t.stage?gt=t.stage:le.zdf?gt=le.zdf.stage:re=!0),t.setColorRange&&!n(N.color)){var nt=N.color;delete N.color,N.colorRange=1,t.setColorRange(t.color,nt),t.colorRange=0}var ht={};for(ie in N)De.indexOf(ie)>=0||(ht[ie]=e.copy(N[ie]),N[ie]=e.Pick.choose(N[ie]));n(N.scale)||(N.scaleX=N.scaleY=e.Pick.choose(N.scale),delete N.scale);for(var xt in N){if(!t.zimBusy)break;t.zimBusy[xt]&&delete N[xt]}if(e.isEmpty(N))return;t.type!="Sprite"&&(t.type!=null&&(t.paused=!1),t.animating=!0);function Et(){t.zimMouseEnabledCheck||(t.zimMouseEnabledCheck=!0,t.zimLastMouseEnabled=t.mouseEnabled),t.mouseEnabled=!1,setTimeout(function(){t.zimBusy||(t.zimBusy={});for(var Xe in N)t.zimBusy[Xe]=!0;t.zimMouseEnabledCheck=null,t.mouseEnabled=t.zimLastMouseEnabled},70)}(de||$.loop||$.rewind)&&Et(),ft();function ft(){n(d)?d=e.makeID(null,10):(d=String(d),ot=d),n(t.zimIdSets)&&(t.zimIdSets={}),n(t.zimIdSets[d])?n(t.zimTweens[d])||(ze=d,d=e.makeID(null,10),t.zimIdSets[ze]=[ze],t.zimTweens[ze].zimIdSet=ze,t.zimIdSets[ze].push(d)):(ze=d,d=e.makeID(null,10),t.zimIdSets[ze].push(d))}De.shift();for(ie in g)g[ie]=e.Pick.choose(g[ie]);for(ie in $)ie=="waitedCall"||ie=="waitedParams"||ie=="loopCall"||ie=="rewindCall"||ie=="loopWaitCall"||ie=="rewindWaitCall"||($[ie]=e.Pick.choose($[ie]));Lt();function Lt(){St(),Ft(),t.seriesTweens&&(t.seriesTweens[0]=N),U&&!Je&&(N=mt(t,N,g,!0))}function wt(){St(),U&&!Je&&(N=mt(t,N,g,!0))}function St(){var Xe;t.zimLastObj||(t.zimLastObj={});for(ie in N){if(typeof N[ie]=="string"&&ie!="transform"){if(ie.substring&&ie.substring(0,1)=="."){if(N[ie].substr(0,1)=="+"||N[ie].substr(0,1)=="-")continue}else if(N[ie].substr(0,1)=="+")continue;if(N[ie].substr(0,3)=="rgb")continue;t.zimLastObj&&!n(t.zimLastObj[ie])?Xe=t.zimLastObj[ie]:Xe=t[ie],N[ie]=Xe+Number(N[ie].replace(/\s/g,""))}t.zimLastObj[ie]=L?t.zimTweenOriginals[ie]:N[ie]}}function Ft(){var Xe;for(ie in g){if(typeof g[ie]=="string"&&ie!="transform"){if(ie.substring&&ie.substring(0,1)=="."){if(g[ie].substr(0,1)=="+"||g[ie].substr(0,1)=="-")continue}else if(g[ie].substr(0,1)=="+")continue;if(g[ie].substr(0,3)=="rgb")continue;t.zimLastObj&&!n(t.zimLastObj[ie])?Xe=t.zimLastObj[ie]:Xe=t[ie],g[ie]=Xe+Number(g[ie].replace(/\s/g,""))}t.zimLastObj[ie]=L?t.zimTweenOriginals[ie]:N[ie]}}t.getBounds&&n(t.percentCompleteCheck)&&(t.percentCompleteCheck=!0,Object.defineProperty(t,"percentComplete",{get:function(){return this.zimTween&&this.zimTween.duration?this.zimTween.position/this.zimTween.duration*100:0},set:function(Xe){this.zimTween?(_n=!0,Xt(Xe,!0)):this.requestedPercentComplete=Xe}}),Object.defineProperty(t,"percentCompleteNoAngle",{get:function(){return this.zimTween&&this.zimTween.duration?this.zimTween.position/this.zimTween.duration*100:0},set:function(Xe){this.zimTween?Xt(Xe,!1):this.requestedPercentComplete=Xe}})),Object.defineProperty(t,"rate",{get:function(){return t.futureRate},set:function(Xe){t.futureRate=Xe,e.loop(t.zimTweens,function(pt,Tt){Tt.timeScale=Xe})},configurable:!0});function Xt(Xe,pt){t.zimTween.startPaused=!1,j?n(t.zimTween.currentTime)||(t.zimTween.currentTime=t.zimTween.currentTime-t.zimTween.position+Xe*t.zimTween.duration/100):t.zimTween.setPosition(Math.round(Xe*t.zimTween.duration/100)),pt&&Ot&&N.orient!==!1&&Ot.getCurvePoint&&(t.rotation=Ot.getCurvePoint(t.pathRatio,null,null,!0).angle+(Pn||0)),_n&&typeof Gt<"u"&&(Gt=Xe),t.handlePath&&t.handlePath()}var Ot,jt,Zt,rt;if(!n(N.path)&&N.path.segmentPoints){n(N.orient)&&(N.orient=!0),N.orient&&n(N.flip)&&(N.flip=!0),t.type=="Pen"&&(t.infinite=!0),t.zimOnPath=!0,n(t.pathRatio)&&(t.pathRatio=0),N.orient&&(N.orient=N.path,N.startOrient=N.rotation),Ot=N.path,O?(delete N.path,delete N.percent,(Ct&&t.startPercent&&t.startPercent>0||t.percent&&t.percent!=100)&&lt("ZIM.animate() - startPercent and percent currently not supported with drag on path"),jt=Ot.getCurvePoint(t.pathRatio,Bt,rt),jt&&(Zt=t.parent.globalToLocal(jt.x,jt.y),t.x=Zt.x,t.y=Zt.y)):(n(t.startPercent)&&(t.startPercent=e.Pick.choose(n(N.startPercent)?0:N.startPercent)),n(t.percent)&&(t.percent=e.Pick.choose(n(N.percent)?100:N.percent)),delete N.path,delete N.percent);var At=!Ot.lockControls;delete N.path,N.pathRatio=1}function mt(Xe,pt,Tt,kt){Je=!0,Ot&&(!n(Xe.percentComplete)||Tt&&!n(Tt.percentComplete))&&(Tt||(Tt={}),n(Tt.pathRatio)&&(Tt.pathRatio=n(Tt.percentComplete)?Xe.percentComplete/100:Tt.percentComplete/100));var Yt={};for(ie in pt)Tt&&!n(Tt[ie])?Yt[ie]=Tt[ie]:Yt[ie]=Xe[ie],kt&&(Xe[ie]=pt[ie]);return Yt}var Rt=!0,Dt=!1,Ht=!0,Vt=!0;n(N.redirect)||(Vt=N.redirect,delete N.redirect);function Pt(Xe){var pt=Ot.globalToLocal(Xe.rawX/e.scaX,Xe.rawY/e.scaY),Tt=Wt;Ot.type=="Blob"&&(tn[0]<tn[4]?ln=!0:tn[0]>tn[4]&&(ln=!1),Tt<10&&!ln?(on=Wt=Tt=tt-5,un.immediate(on/tt*100),tn=[tt-1,tt-2,tt,tt-3,tt-4]):Tt>tt-10&&ln&&(on=Wt=Tt=5,un.immediate(on/tt*100),tn=[0,0,0,0,0]));var kt={x:pt.x,y:pt.y,r:Tt};$t.sort(function(Yt,Nt){var gn={x:Yt.x,y:Yt.y,r:Yt.r*tt},yn={x:Nt.x,y:Nt.y,r:Nt.r*tt},On=Math.sqrt(Math.pow(kt.x-gn.x,2)+Math.pow(kt.y-gn.y,2)+Math.pow(kt.r-gn.r,2)),er=Math.sqrt(Math.pow(kt.x-yn.x,2)+Math.pow(kt.y-yn.y,2)+Math.pow(kt.r-yn.r,2));return On-er}),on=$t[0].r*tt,Gt=on/tt*100,Gt=e.constrain(Gt,0,99.95),L&&(Gt/=2,Le.position>Le.duration/2&&(Gt=100-Gt))}if(Ot){var Bt;At||(rt=e.copy(Ot.segmentPoints),Bt=e.copy(Ot.segmentRatios)),t.currentPercent=t.startPercent+t.percent*t.pathRatio;var Kt=(1e6+t.currentPercent)%100/100;if(jt=Ot.getCurvePoint(Kt,Bt,rt),t.parent&&jt&&(Zt=t.parent.globalToLocal(jt.x,jt.y),t.x=Zt.x,t.y=Zt.y),O){o="linear",t.cur("pointer");var Gt=t.percentComplete,rn=!1,cn=!0,ln=!0,Jt=Gt,It=10;rt=e.copy(Ot.segmentPoints);var tt=0;e.loop(rt,function(Xe){tt+=e.distanceAlongCurve(Xe)});var _t=Math.round(tt/rt.length/It),$t=Ot.interpolate(_t,null,!0,null,!0),Wt=(Gt||0)/100*tt,on=Wt;Ot.zimAnimateChanged=!1,t.zimAnimatePathChange=Ot.on("change",function(){Ot.zimAnimateChanged=!0}),t.zimAnimatePathDown=Ot.on("mousedown",function(){rn=!0,t.paused==!0&&(Dt=!0)}),t.zimAnimatePathUp=Ot.on("pressup",function(){Dt=!1}),t.zimAnimateDragDown=t.on("mousedown",function(Xe){gt=Xe.target.stage,t.amu||(t.amu=gt.frame.on("mouseupplus",function(){Dt=!1})),gt.mouseMoveOutside=!0,Rt=!1,Ht=!0,setTimeout(function(){Rt=!0},50),Dt=!0,Ot.zimAnimateChanged&&(rt=e.copy(Ot.segmentPoints),tt=0,e.loop(rt,function(Tt){tt+=e.distanceAlongCurve(Tt)}),_t=Math.round(tt/rt.length/It),$t=Ot.interpolate(_t,null,!0,null,!0)),Ot.zimAnimateChanged=!1,Gt=t.percentComplete,un.immediate(Gt);var pt=Gt;L&&(Le.position>Le.duration/2?pt=(100-Gt)*2:pt=Gt*2),Wt=(pt||0)/100*tt,on=Wt});var en=!1;t.zimAnimateDragPress=t.on("pressmove",function(Xe){en=!0,Pt(Xe)}),t.animateReturn=function(){if(!L){Ct&&lt("animate() - animateReturn() needs rewind set to true");return}cn=!1,ln=!1,t.percentComplete<50&&(t.percentComplete=100-t.percentComplete),t.pauseAnimate(!1)},t.zimAnimateDragUp=t.on("pressup",function(){t.paused==!1&&(Dt=!1),Rt=!1,setTimeout(function(){Rt=!0},50),tn[0]<tn[4]?ln=!0:tn[0]>tn[4]&&(ln=!1),!t.paused&&L&&Vt&&ln!=cn&&(t.percentComplete=100-t.percentComplete,cn=ln)});var un=new e.Damp(Gt,.15),bt=0,Ut=0,tn=[0,0,0,0,0],_n=!1;t.zimDragAnimateTicker=e.Ticker.add(function(){var Xe;O&&(++Ut%20&&(tn.push(on),tn.shift()),Wt=on,rn&&(Gt=t.percentComplete),Dt||Ht&&t.paused==!0?(rn||_n||Ot.type=="Blob"&&Math.abs(bt-Gt)>(L?45:90)?(rn=!1,Xe=Gt,un.immediate(Xe),_n=!1):Xe=un.convert(Gt),Math.abs(bt-Xe)>.1?(t.percentCompleteNoAngle=Xe,bt=Xe):(t.percentCompleteNoAngle=Xe,Ht=!1,en=!1)):Ht=!1)},gt)}}var nn;if(N.orient){if(N.orient===!0){var Dn=t.parent.localToGlobal(n(N.x)?t.x:N.x,n(N.y)?t.y:N.y);N.orient={x:Dn.x,y:Dn.y}}nn=N.orient,delete N.orient;var Pn=t.rotation;if(t.rotation=Ot.getPointAngle(0)+Pn,nn!=Ot){var qn;nn.parent?qn=nn.parent.localToLocal(nn.x,nn.y,t.parent):qn=t.parent.globalToLocal(nn.x,nn.y),t.rotation=e.angle(t.x,t.y,qn.x,qn.y)+Pn}}var Qn=t.scaleX,Zn=t.scaleY,En=N.flip!=null?N.flip:!1,sn=N.flipVertical!=null?N.flipVertical:!1,mn=t.x,Rn=t.y,wn=0;$.loop&&(n($.count)||(wn=$.count,delete $.count,be=1));var zt=0;$.loopWait&&(zt=$.loopWait,E=$.loopWait,delete $.loopWait);var Gn;$.loopCall&&(Gn=$.loopCall,delete $.loopCall);var Un=t;$.loopParams&&(Un=$.loopParams,delete $.loopParams),le.TIMECHECK&&Ye&&(st&&a(st,Se),yt&&a(yt,Se),p&&a(p,Se),In&&a(In,Se),zt&&a(zt,Se),E&&a(E,Se),$.rewindWait&&a($.rewindWait,Se),ue&&a(ue,Se),fe&&a(fe,Se)),Se=="s"&&(st&&(st*=1e3),yt&&(yt*=1e3),p&&(p*=1e3),In&&(In*=1e3),zt&&(zt*=1e3),E&&(E*=1e3),$.rewindWait&&($.rewindWait*=1e3),ue&&(ue*=1e3),fe&&(fe*=1e3));function hr(){if(zt>0&&(t.waiting=!1),!!$.loop){if(q&&typeof q=="function"){var Xe=n(Z)?t:Z;q(Xe)}if(Gn&&typeof Gn=="function"&&Gn(Un),T){var pt=e.Pick.choose(t.futureRate);n(t.futureRate)||(Le.timeScale=pt);var Tt;if(n(ht.scale)||(Tt=e.Pick.choose(ht.scale)),!U&&Le.step&&Le.step.prev&&Le.step.prev.props){for(var kt in Le.step.prev.props)if(!(De.indexOf(kt)>=0)){var Yt=e.Pick.choose(ht[kt]);if(typeof Yt=="string"&&kt!="transform"&&Yt.substr(0,1)!="+"&&Yt.substr(0,1)!="-"){var Nt;t.zimLastObj&&!n(t.zimLastObj[kt])?Nt=t.zimLastObj[kt]:Nt=t[kt],Yt=Nt+Number(Yt.replace(/\s/g,""))}t.zimLastObj[kt]=L?t.zimTweenOriginals[kt]:Yt,L?(n(ht[kt])||(Le.step.prev.props[kt]=Yt),kt=="scaleX"&&!n(Tt)&&(Le.step.prev.props.scaleX=Tt),kt=="scaleY"&&!n(Tt)&&(Le.step.prev.props.scaleY=Tt)):(n(ht[kt])||(Le.step.props[kt]=Yt),kt=="scaleX"&&!n(Tt)&&(Le.step.props.scaleX=Tt),kt=="scaleY"&&!n(Tt)&&(Le.step.props.scaleY=Tt))}}}}}var Kn;$.loopWaitCall&&(Kn=$.loopWaitCall,delete $.loopWaitCall);var Jn=t;$.loopWaitParams&&(Jn=$.loopWaitParams,delete $.loopWaitParams);function Sn(){Kn&&typeof Kn=="function"&&Kn(Jn)}var Vn=["ballisticIn","ballisticOut","ballisticInOut","snapIn","snapOut","snapInOut","slowmoIn","slowmoOut","slowmoInOut"];Vn.indexOf(o)!=-1&&(o=qt(o));function qt(Xe){var pt=[.4,.75,.9,.95],Tt=[.99,-.69,.53,.014],kt=[1.18,.69,1,.96];return Xe=="ballisticIn"?Xe=ct(e.zimEase(pt)):Xe=="ballisticOut"?Xe=ct(e.zimEase(pt).reverse()):Xe=="ballisticInOut"?Xe=ct(e.zimEase(pt,null,!0)):Xe=="snapIn"?Xe=ct(e.zimEase(Tt)):Xe=="snapOut"?Xe=ct(e.zimEase(Tt).reverse()):Xe=="snapInOut"?Xe=ct(e.zimEase(Tt,null,!0)):Xe=="slowmoIn"?Xe=ct(e.zimEase(kt)):Xe=="slowmoOut"?Xe=ct(e.zimEase(kt).reverse()):Xe=="slowmoInOut"&&(Xe=ct(e.zimEase(kt,null,!0))),Xe}var Qt,an,pn;if($.rewind&&(o&&(o instanceof Function?Qt=ct(o.reverse()):(Qt=o,Qt.indexOf("InOut")==-1&&(Qt.indexOf("Out")!=-1?Qt=Qt.replace("Out","In"):Qt.indexOf("In")!=-1&&(Qt=Qt.replace("In","Out"))))),F&&(Qt=F,Vn.indexOf(Qt)!=-1&&(Qt=qt(Qt)))),o instanceof Function)an=o;else{var Tn="get"+o.charAt(0).toUpperCase()+o.slice(1),dn=ct(ge),xn=ct(Be);(!n(dn)||!n(xn))&&$e.Ease[Tn]?(!n(xn)&&n(dn)&&(dn=1),!n(dn)&&n(xn)&&(xn=.3*1.5),an=$e.Ease[Tn](dn,xn)):an=$e.Ease[o]}Qt&&(Qt instanceof Function?pn=Qt:(Tn="get"+Qt.charAt(0).toUpperCase()+Qt.slice(1),dn=ct(ge),xn=ct(Be),(!n(dn)||!n(xn))&&$e.Ease[Tn]?(!n(xn)&&n(dn)&&(dn=1),!n(dn)&&n(xn)&&(xn=.3*1.5),pn=$e.Ease[Tn](dn,xn)):pn=$e.Ease[Qt]));function Bn(){In>0&&(t.waiting=!1),$n&&typeof $n=="function"&&$n(rr)}function Xn(){In>0&&(t.waiting=!0),jn&&typeof jn=="function"&&jn(ir)}function dr(Xe){wt(),p>0&&(t.waiting=!0),Le=t.zimTweens[d]=t.zimTween=$e.Tween.get(t,{override:$.override}).wait(p,!0).call(function(){t.waiting=!1,v&&typeof v=="function"&&v(n(w)?t:w),p=0,pr(Le)}),Le.timeScale=t.futureRate,Xe&&zn(Xe,Le)}function pr(Xe){var pt=Ir();t.set&&!U&&t.set(g),Le=t.zimTweens[d]=t.zimTween=$e.Tween.get(t,$).to(N,st,an).call(Xn).wait(In,!0).call(Bn).to(pt,yt,pn).call(Sr).wait(zt,!0).call(hr),Le.timeScale=t.futureRate,Xe&&zn(Xe,Le),Cr()}function gr(Xe){wt(),p>0&&(t.waiting=!0),Le=t.zimTweens[d]=t.zimTween=$e.Tween.get(t,{override:$.override}).wait(p,!0).call(function(){p=0,t.waiting=!1,v&&typeof v=="function"&&v(n(w)?t:w),vr(Le)}),Le.timeScale=t.futureRate,Xe&&zn(Xe,Le)}function vr(Xe){t.set&&!U&&t.set(g),Le=t.zimTweens[d]=t.zimTween=$e.Tween.get(t,$).to(N,st,an).call(Sr).wait(zt,!0).call(hr),Le.timeScale=t.futureRate,Xe&&zn(Xe,Le),Cr()}if($.rewind){var In=0;delete $.rewind,L=!0,I=$.rewindWait,$.rewindWait&&(In=$.rewindWait,delete $.rewindWait);var $n;if($.rewindCall){$n=$.rewindCall;var rr=$.rewindParams;n(rr)&&(rr=t),delete $.rewindCall,delete $.rewindParams}var jn;if($.rewindWaitCall){jn=$.rewindWaitCall;var ir=$.rewindWaitParams;n(ir)&&(ir=t),delete $.rewindWaitCall,delete $.rewindWaitParams}ue>0||fe>0||p>0?ue>0||fe>0?(t.waiting=!0,Le=t.zimTweens[d]=t.zimTween=$e.Tween.get(t,{override:$.override}).wait(ue>0?ue:0,!0).wait(fe>0?fe:0,!0).call(function(Xe){Xe.waiting=!1,fe=ue=0,dr(Le)}),Le.timeScale=t.futureRate):dr():(wt(),pr())}else ue>0||fe>0||p>0?ue>0||fe>0?(t.waiting=!0,Le=t.zimTweens[d]=t.zimTween=$e.Tween.get(t,{override:$.override}).wait(ue>0?ue:0,!0).wait(fe>0?fe:0,!0).call(function(){fe=ue=0,t.waiting=!1,gr(Le)}),Le.timeScale=t.futureRate):gr():(wt(),vr());function zn(Xe,pt){pt.zimIdSet=Xe.zimIdSet,pt.zimObj=Xe.zimObj,pt.zimTicker=Xe.zimTicker,pt.zimExtraTickers=Xe.zimExtraTickers,pt.requestID=Xe.requestID}Le.startPaused=ce,Le.rewinding=!1,n(ae)||(Le.timeScale=e.Pick.choose(ae));var Hn;!re&&ne&&(je&&(t.pathRatio=t.percentComplete&&Math.round(t.percentComplete)!=100?t.percentComplete/100:0,t.percentCompleteNoAngle=Math.round(je)!=100?je:0),h&&!n(x)&&x.dispatchEvent?Hn=e.Ticker.add(function(){Oe&&t.updateEffects(),(Ot||nn||En||sn)&&or(),x.dispatchEvent("animation")},gt):h&&t.dispatchEvent?Hn=e.Ticker.add(function(){Oe&&t.updateEffects(),(Ot||nn||En||sn)&&or(),t.dispatchEvent("animation")},gt):Hn=e.Ticker.add(function(){Oe&&t.updateEffects(),(Ot||nn||En||sn)&&or()},gt));function An(Xe){if(Array.isArray(Xe)){for(var pt=0,Tt=0,kt=Xe.length;Tt<kt;Tt++)pt+=Xe[Tt];return pt}}var sr=[1,1,1],ar=0,mi=1,or=function(){if(!(!t.parent||Le.passive||Le.startPaused)){if(O&&L&&(Jt<50&&t.percentComplete>50||Jt>50&&t.percentComplete<50)&&(cn=t.percentComplete<50),Jt=t.percentComplete,Ot){if(At&&(rt=Ot.segmentPoints,Bt=Ot.segmentRatios),O)var Xe=Ot.getCurvePoint(t.pathRatio,Bt,rt);else{t.currentPercent=t.startPercent+t.percent*t.pathRatio;var pt=(1e6+t.currentPercent)%100/100;t.pathRatio==1&&(pt+=t.percent>0?1:0),Xe=Ot.getCurvePoint(pt,Bt,rt)}if(Xe){var Tt=t.parent.globalToLocal(Xe.x,Xe.y);t.x=Tt.x,t.y=Tt.y}}var kt=Math.abs(mn-t.x),Yt=Math.abs(Rn-t.y),Nt=Pn==90||Pn==270||Pn==-90;En&&Rt&&(mn>t.x&&kt>.01&&e.sign(Nt?t.scaleY:t.scaleX)==e.sign(Qn)||mn<t.x&&kt>.01&&e.sign(Nt?t.scaleY:t.scaleX)!=e.sign(Qn)||t.percentComplete<99&&t.percentComplete>1&&kt<.01&&Yt>.01&&e.sign(Nt?t.scaleY:t.scaleX)!=e.sign(Qn))&&(Nt?t.scaleY*=-1:t.scaleX*=-1),sn&&Rt&&(Rn>t.y&&Yt>.01&&e.sign(Nt?t.scaleX:t.scaleY)==e.sign(Zn)||Rn<t.y&&Yt>.01&&e.sign(Nt?t.scaleX:t.scaleY)!=e.sign(Zn)||t.percentComplete<99&&t.percentComplete>1&&Yt<.01&&kt>.01&&e.sign(Nt?t.scaleX:t.scaleY)!=e.sign(Zn))&&(Nt?t.scaleX*=-1:t.scaleY*=-1);var gn;if(nn&&kt>.05||nn&&Yt>.05){if(Ot==nn)gn=e.angle(mn,Rn,t.x,t.y)+Pn;else{var yn;nn.parent?yn=nn.parent.localToLocal(nn.x,nn.y,t.parent):yn=t.parent.globalToLocal(nn.x,nn.y),gn=e.angle(t.x,t.y,yn.x,yn.y)+Pn}if(gn!=0&&(!t.paused||en)){En&&mn-t.x>.01&&(gn+=180);var On=gn;t.rotation=Math.round(On==Pn?t.rotation:On),L&&t.percentComplete>50&&!En&&(t.rotation+=180)}}if(O){var er=t.x-mn+t.y-Rn;Math.abs(er)>2&&(sr.push(e.sign(er)),sr.shift(),Le.forward=An(sr))}mn=t.x,Rn=t.y}};(Ot||nn||En||sn)&&(t.handlePath=or),n(t.zimMaskDynamic)||t.zimMaskApply();function Sr(){if(t.seriesTweens&&t.seriesTweens.shift(),t.seriesCalls&&t.seriesCalls.shift(),t.seriesParams&&t.seriesParams.shift(),t.paused&&t.type!="Sprite"){l&&typeof l=="function"&&l(c);return}if($.loop)if(wn>0)if(be<wn){zt>0&&(t.waiting=!0),Sn(),be++;return}else L?t.set&&t.set(Ir()):t.set&&t.set(N);else{zt>0&&(t.waiting=!0),Sn();return}if(H?yr(d):t.pauseAnimate(!0,d),!$.loop&&q&&typeof q=="function"){var Xe=n(Z)?t:Z;q(Xe)}l&&typeof l=="function"&&l(c)}function Ir(){var Xe={};for(var pt in N)if(re&&t.style)!n(g[pt])&&!U?Xe[pt]=g[pt]:pt=="transform"?Xe[pt]=t.style[pt]:Xe[pt]=Fn(t.style[pt]);else if(!n(g[pt])&&!U)Xe[pt]=g[pt];else if(pt.substr(0,1)=="."){for(var Tt=pt.split("."),kt=t,Yt=1;Yt<Tt.length;Yt++)kt=kt[Tt[Yt]];Xe[pt]=kt}else Xe[pt]=t[pt];return Xe}function $r(Xe){if(t.zimBusy){for(var pt in Xe)delete t.zimBusy[pt];e.isEmpty(t.zimBusy)&&(t.zimBusy=null)}}var jr=!1;Cr();function Cr(){Le.zimObj=N,Le.zimTicker=Hn,Le.zimPaused=jr,ze&&(Le.zimIdSet=ze),ot&&(n(e.idSets)&&(e.idSets={}),n(e.idSets[ot])?e.idSets[ot]=[t]:e.idSets[ot].indexOf(t)<0&&e.idSets[ot].push(t)),e.animatedObjects||(e.animatedObjects=new e.Dictionary(!0)),e.animatedObjects.add(t,!0)}function yr(Xe){if(t.tweenStates&&t.tweenStates[Xe]&&delete t.tweenStates[Xe],!(n(t.zimTweens)||n(t.zimTweens[Xe]))){t.zimX=null,t.zimY=null,$r(t.zimTweens[Xe].zimObj),t.zimTweens[Xe].paused=!0,Mr(Xe);var pt=t.zimTweens[Xe].zimIdSet;if(!n(pt)&&t.zimIdSets){var Tt=t.zimIdSets[pt];Tt&&Tt.splice(Tt.indexOf(Xe),1),Tt&&Tt.length==0&&(delete t.zimIdSets[pt],e.isEmpty(t.zimIdSets)&&delete t.zimIdSets)}if(t.type=="Pen"&&t.zimOnPath&&(t.stop(),t.zimOnPath=!1),delete t.zimTweens[Xe],t.zimLastObj=null,e.isEmpty(t.zimTweens)&&t.stopAnimate(null,null,null,!1,!0),!(t.zimTweens&&t.zimTweens[Xe]||t.zimIdSets&&t.zimIdSets[pt||Xe])){if(e.idSets&&e.idSets[pt||Xe]){e.idSets[pt||Xe];var kt=e.idSets[pt||Xe].indexOf(t);kt>=0&&e.idSets[pt||Xe].splice(kt,1),e.idSets[pt||Xe].length<=0&&(delete e.idSets[pt||Xe],e.isEmpty(e.idSets)&&delete e.idSets)}}}}function Mr(Xe){-function(){var pt=t.zimTweens[Xe].zimTicker;if(t.zimTweens[Xe].extraTickers)for(var Tt=0;Tt<t.zimTweens[Xe].extraTickers.length;Tt++)e.Ticker.remove(t.zimTweens[Xe].extraTickers[Tt]);t.zimTweens[Xe].requestID&&cancelAnimationFrame(t.zimTweens[Xe].requestID),pt&&setTimeout(function(){pt&&e.Ticker.remove(pt),pt=null},200)}()}function mr(Xe,pt){var Tt=t.zimTweens[Xe];Tt.paused=pt,pt!=Tt.zimPaused&&(Tt.zimPaused=pt,pt?Tt.zimTicker&&(Tt.zimAnimateTimeout=setTimeout(function(){e.Ticker.remove(Tt.zimTicker)},200)):(Tt.startPaused=!1,clearTimeout(Tt.zimAnimateTimeout),Tt.zimTicker&&(Tt.zimTicker=e.Ticker.add(Tt.zimTicker,gt))))}function Or(Xe){for(var pt=[],Tt=0;Tt<Xe.length;Tt++)t.zimIdSets&&!n(t.zimIdSets[Xe[Tt]])?pt=pt.concat(t.zimIdSets[Xe[Tt]]):pt.push(Xe[Tt]);return pt}(!t.stopAnimate||!t.stopAnimate.real)&&(t.stopAnimate=function(Xe,pt,Tt,kt,Yt){var Nt;if(t.dynamicAnimation=null,Yt&&O){t.pauseAnimate();return}if(n(Xe)&&(t.tweenStates={}),pt)return t.endTween(null,Xe),t;if(n(kt)&&(kt=!0),t.pan==null&&(t.type!=null&&(t.paused=!0),t.animating=!1),t.type=="Pen"&&t.zimOnPath&&(t.stop(),t.zimOnPath=!1),n(Tt)&&(Tt=!0),kt&&O&&(Ot&&Ot.off("change",t.zimAnimatePathChange),t.off("mousedown",t.zimAnimateDragDown),t.off("pressmove",t.zimAnimateDragPress),t.off("pressup",t.zimAnimateDragUp),t.amu&&gt.frame.off("mouseupplus",t.amu),e.Ticker.remove(t.zimDragAnimateTicker)),n(Xe)){if(!Tt)return t;t.zimBusy=null,$e.Tween.removeTweens(t);for(Nt in t.zimTweens)Mr(Nt);t.zimTweens=null,t.zimIdSets=null,t.zimTween=null,e.idSets&&e.idSets[ze||Nt]&&(delete e.idSets[ze||Nt],e.isEmpty(e.idSets)&&delete e.idSets),e.animatedObjects.remove(t)}else{Array.isArray(Xe)||(Xe=[Xe]);var gn=Or(Xe);for(Nt in t.zimTweens)t.zimTweens[Nt].requestID&&cancelAnimationFrame(t.zimTweens[Nt].requestID),Tt&&gn.indexOf(Nt)>=0&&yr(Nt,kt),!Tt&&gn.indexOf(Nt)<0&&yr(Nt,kt)}return t},t.stopAnimate.real=!0,t.pauseAnimate=function(Xe,pt,Tt,kt){var Yt;if(pt=="pauseOnBlur"?pt=null:n(pt)&&(t.tweenStates={all:Xe===!1}),t.type=="Pen"&&(Xe===!1?t.zimOnPath&&(t.infinite=!0):t.stop()),Rr&&!kt){if(n(pt))for(Yt in t.zimTweens)mr(Yt,Xe);else t.pause(Xe,pt);return t}if(n(Xe)&&(Xe=!0),Dt=!1,t.type!=null&&(t.paused=Xe),t.animating=!Xe,n(Tt)&&(Tt=!0),n(pt)&&!Tt)return t;if(n(pt))for(Yt in t.zimTweens)mr(Yt,Xe);else{Array.isArray(pt)||(pt=[pt]);var Nt=Or(pt);for(Yt in t.zimTweens)Tt&&Nt.indexOf(Yt)>=0&&(mr(Yt,Xe),t.tweenStates[Yt]=!Xe),!Tt&&Nt.indexOf(Yt)<0&&(mr(Yt,Xe),t.tweenStates[Yt]=!Xe)}return t.type=="Sprite"&&(t.running||t.stop()),t}),ce&&t.pauseAnimate(!0,d,null,!0);var bn;for(N.extra&&(bn=N.extra,delete N.extra,Array.isArray(bn)||(bn=[bn])),ie=0;ie<De.length;ie++){var xr=De[ie];N[xr]&&(n(bn)&&(bn=[]),zr(xr,N[xr]),delete N[xr])}function zr(Xe,pt){pt===!0?bn.push({outputProp:ke[Xe]}):Array.isArray(pt)?bn.push({outputProp:ke[Xe],outputMin:pt[0],outputMax:pt[1],inputMin:pt[2],inputMax:pt[3]}):bn.push({outputProp:ke[Xe],outputMax:pt})}if(bn){t.zimStartScaleX=t.scaleX,t.zimStartScaleY=t.scaleY,Le.extraTickers=[];var Lr;for(ie=0;ie<bn.length;ie++){var fn=bn[ie];n(fn.inputObj)&&(fn.inputObj=t),n(fn.inputProp)&&(fn.inputProp="y"),n(fn.inputMin)&&(fn.inputMin=0),n(fn.inputMax)&&(fn.inputMax=fn.inputProp=="x"?gt.width:gt.height),n(fn.outputObj)&&(fn.outputObj=t),n(fn.outputProp)&&(fn.outputProp="scale"),n(fn.outputMin)&&(fn.outputMin=0),n(fn.outputMax)&&(fn.outputMax=fn.outputMin+1),n(fn.constrain)&&(fn.constrain=!0);for(var Mn in fn)N[Mn]=e.Pick.choose(N[Mn]);fn.outputProp=="percentSpeed"&&(j=!0),Lr=new e.Proportion(fn.inputMin,fn.inputMax,fn.outputMin,fn.outputMax,fn.factor,fn.outputRound);var Dr=function(){var Xe=fn,pt=Lr;return function(){var Tt,kt=Xe.outputObj,Yt=Xe.inputObj[Xe.inputProp];if((Xe.inputProp=="x"||Xe.inputProp=="y")&&Xe.inputObj.parent){var Nt=Xe.inputObj.parent.localToGlobal(Yt,Yt);Yt=Nt[Xe.inputProp]}if(Xe.constrain?Tt=e.constrain(pt.convert(Yt),Xe.outputMin,Xe.outputMax):Tt=pt.convert(Yt),Number.isNaN(Tt)&&(Tt=Xe.outputMin!=null?Xe.outputMin:0),Xe.outputProp=="scale")kt.scaleX=e.sign(kt.scaleX)*Tt,kt.scaleY=e.sign(kt.scaleY)*Tt;else if(Xe.outputProp=="scaleX")kt.scaleX=e.sign(kt.scaleX)*Tt;else if(Xe.outputProp=="scaleY")kt.scaleY=e.sign(kt.scaleY)*Tt;else if(Xe.outputProp=="layer"){if(!kt.parent)return;var gn=e.constrain(Math.round(Tt),0,kt.parent.numChildren-1);gn!=kt.parent.getChildIndex(kt)&&kt.parent.setChildIndex(kt,gn)}else Xe.outputProp=="percentSpeed"?kt[Xe.outputProp]=Tt*100:kt[Xe.outputProp]=Tt}}();Dr(),Le.extraTickers.push(e.Ticker.add(Dr,gt))}}var Rr;function Br(){if(Le.requestID=requestAnimationFrame(Br),!(!j||Le.startPaused&&t.percentSpeed==0)){Le.startPaused=!1,Le!=Yr&&(Yr=Le,Le.currentTime=0,t.pauseAnimate(!0,d,null,!0),t.type!=null&&(t.paused=!1),t.animating=!0,Ar=!fe&&!ue&&!p&&!wn&&$.loop),Ar&&(Le.currentTime+=1e4*Er,Le.setPosition(Le.currentTime,!0),Ar=!1);var Xe=Le.currentTime+ei*t.percentSpeed/100;Pr&&p==0&&(Xe=e.constrain(Xe,0,Pr)),Le.currentTime=Xe,Le.setPosition(Le.currentTime),(Ot||nn||En||sn)&&or(),gt.update()}}if(j&&(t.dynamicAnimation=!0),j||t.zimAnimateDragDown){if(j){Rr=!0,t.pauseAnimate(!0,d,null,!0),t.type!=null&&(t.paused=!1),t.animating=!0,Le.currentTime=0;var Yr=Le;n(t.percentSpeed)&&(t.percentSpeed=Le.startPaused?0:100);var ei=1e3/60;Le.currentTime=0;var Ar=!fe&&!ue&&!p&&!wn&&$.loop;V&&$.loop&&!wn&&(V=!1);var Er=i+(L?G||i:0)+(I||0)+(E||0);Er*=Se=="s"?1e3:1;var Xr=1;$.loop&&wn&&(Xr=wn);var Pr;V&&(Pr=Er*Xr),Br()}var _r;t.pause=function(Xe,pt){if(n(Xe)&&(Xe=!0),n(pt)&&(pt=0),Xe){if(t.zimAnimateDragDown&&(O=!1,t.cur("default"),Ot&&Ot.off("change",t.zimAnimatePathChange),t.off("mousedown",t.zimAnimateDragDown),t.off("pressmove",t.zimAnimateDragPress),t.off("pressup",t.zimAnimateDragUp),!j))return;_r=t.percentSpeed,pt>0?e.animate({target:t,props:{percentSpeed:0},override:!1,ticker:!1,time:pt,call:function(){t.percentSpeed=0,t.type!=null&&(t.paused=!0),t.animating=!1,j=!1,t.dispatchEvent("pause")}}):(Le.startPaused=!1,t.percentSpeed=0,t.type!=null&&(t.paused=!0),t.animating=!1,j=!1,setTimeout(function(){t.dispatchEvent("pause")},10))}else{if(t.zimAnimateDragDown&&(O=!0,t.cur("pointer"),Ot&&(t.zimAnimatePathChange=Ot.on("change",t.zimAnimatePathChange)),t.zimAnimateDragDown=t.on("mousedown",t.zimAnimateDragDown),t.zimAnimateDragPress=t.on("pressmove",t.zimAnimateDragPress),t.zimAnimateDragUp=t.on("pressup",t.zimAnimateDragUp),!j&&ce!=!1))return;Dt=!1,Le.currentTime=Le.position,pt>0?e.animate({target:t,props:{percentSpeed:_r},override:!1,ticker:!1,time:pt,call:function(){t.percentSpeed=_r,t.paused=!1,t.animating=!0,j=!0}}):(t.percentSpeed=_r,t.type!=null&&(t.paused=!1),t.animating=!0,j=!0)}return t}}return t},e.stopAnimate=function(t,r){He("45.12");var i;if(n(t)){if(e.animatedObjects)for(i=e.animatedObjects.length-1;i>=0;i--)e.animatedObjects.objects[i].stopAnimate(null,r);return}if(Array.isArray(t)||(t=[t]),!!e.idSets)for(var o=0;o<t.length;o++){var l=t[o];if(e.idSets[l]){var c=e.idSets[l].length-1;for(i=c;i>=0;i--)e.idSets[l][i].stopAnimate(l,r)}}},e.stopZimAnimate=function(t){He("45.1"),e.stopAnimate(t)},e.pauseAnimate=function(t,r){He("45.22"),n(t)&&(t=!0);var i;if(n(r)||r=="pauseOnBlur"){if(e.animatedObjects)for(i=e.animatedObjects.length-1;i>=0;i--)e.animatedObjects.objects[i].pauseAnimate(t,r);return}if(Array.isArray(r)||(r=[r]),!!e.idSets)for(var o=0;o<r.length;o++){var l=r[o];if(e.idSets[l])for(i=e.idSets[l].length-1;i>=0;i--)e.idSets[l][i].pauseAnimate(t,l)}},e.pauseZimAnimate=function(t,r){He("45.2"),e.pauseAnimate(t,r)},e.wiggle=function(t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R){var T="target, property, baseAmount, minAmount, maxAmount, minTime, maxTime, totalTime, type, ease, integer, id, startType, ticker, wait, pauseOnBlur",L;if(L=vt(e.wiggle,arguments,T))return L;if(He("45.25"),n(t)||n(i)||n(o))return t;n(l)&&(l=o);var I=y(c,null,40);n(c)&&(c=I=="s"?1:1e3),n(p)&&(p=c),a(p,I,40),n(b)&&(b="quadInOut"),n(_)&&(_=!1),n(E)&&(E=e.makeID()),n(w)&&(w="both"),n(S)&&(S="both"),n(P)&&(P=!0),n(A)&&(A=0),a(v,I,40),n(v)||(t.wiggleTimeout=setTimeout(function(){t.stopAnimate(E),t.dispatchEvent("wigglestop")},v*(I=="s"?1e3:1)));var C=0,k;function Y(){var W=e.rand(e.Pick.choose(c),e.Pick.choose(p),!1),G={},F={},B;F[r]=e.Pick.choose(i),w=="negative"||C==0&&S=="negative"?B=-e.rand(e.Pick.choose(o),e.Pick.choose(l),_):w=="positive"||C==0&&S=="positive"?B=e.rand(e.Pick.choose(o),e.Pick.choose(l),_):C==0?B=e.rand(e.Pick.choose(o),e.Pick.choose(l),_,!0):B=e.rand(e.Pick.choose(o),e.Pick.choose(l),_)*e.sign(k)*-1,G[r]=e.Pick.choose(i)+B,C==0&&(W=W/2),k=B,C++;var q=t.futureRate;w=="negative"||w=="positive"?e.animate({target:t,obj:G,set:F,ease:b,time:W*2,wait:ct(A),rewind:!0,override:!1,call:Y,id:E,ticker:!!t.stage,timeCheck:!1,pauseOnBlur:R}):e.animate({target:t,obj:G,ease:b,time:W,wait:ct(A),override:!1,call:Y,id:E,ticker:!!t.stage,timeCheck:!1,pauseOnBlur:R}),q&&(t.futureRate=q)}return t.addTo&&!t.stage?t.added(Y):Y(),t},e.loop=function(t,r,i,o,l,c,p,v){var w="obj, call, reverse, interval, step, start, end, immediate",b;if(b=vt(e.loop,arguments,w))return b;if(e.zimLoopCheck||He("45.3"),e.zimLoopCheck=!0,n(t)||n(r))return;n(i)&&(i=!1),n(o)&&(o=0),(n(l)||l<=0)&&(l=1),n(v)&&(v=!0),t.constructor===Number&&(t=Number(t)),t.constructor===String&&(t=String(t));var _=typeof t=="number"?"number":t.constructor===Array?"array":t.constructor==={}.constructor?"object":t instanceof NodeList?"nodelist":typeof t=="string"?"string":t instanceof HTMLCollection?"htmlcollection":t.type&&t.type=="Dictionary"?"Dictionary":"invalid";if(_=="container"&&!t.addChild)return;var E,S,P,A;if(_=="number"||_=="string"||_=="array"||_=="nodelist"||_=="htmlcollection"||_=="Dictionary"){if(_=="Dictionary"){var R=e.copy(t.values);t=e.copy(t.objects)}if(E=_=="number"?t:t.length,P=L(E-1),P==0)return;if(i)if(o===0){for(S=c;S>=p;S-=l)if(_=="number"?A=r(S,P,c,p,t):_=="array"||_=="string"?A=r(t[S],S,P,c,p,t):_=="Dictionary"?A=r(t[S],R[S],S,P,c,p,t):A=r(t.item(S),S,P,c,p,t),typeof A<"u"&&A!="next")return A}else e.interval(o,function(I){if(S=I.count,v||S--,l&&(S*=l),S=c-S,_=="number"?A=r(S,P,c,p,t):_=="array"||_=="string"?A=r(t[S],S,P,c,p,t):_=="Dictionary"?A=r(t[S],R[S],S,P,c,p,t):A=r(t.item(S),S,P,c,p,t),A=="next")I.next();else if(typeof A<"u")return I.clear(),A},P,v);else if(o===0){for(S=c;S<=p;S+=l)if(_=="number"?A=r(S,P,c,p,t):_=="array"||_=="string"?A=r(t[S],S,P,c,p,t):_=="Dictionary"?A=r(t[S],R[S],S,P,c,p,t):A=r(t.item(S),S,P,c,p,t),typeof A<"u"&&A!="next")return A}else e.interval(o,function(I){if(S=I.count,v||S--,l&&(S*=l),_=="number"?A=r(S,P,c,p,t,I):_=="array"||_=="string"?A=r(t[S],S,P,c,p,t,I):_=="Dictionary"?A=r(t[S],R[S],S,P,c,p,t):A=r(t.item(S),S,P,c,p,t,I),A=="next")I.next();else if(typeof A<"u")return I.clear(),A},P,v);return!0}else if(_=="object"){E=0;var T=[];for(S in t)E++,T.push(S);if(P=L(E-1),P==0)return;if(i)if(o===0){for(S=c;S>=p;S-=l)if(A=r(T[S],t[T[S]],S,P,c,p,t),typeof A<"u"&&A!="next")return A}else e.interval(o,function(I){if(S=I.count,v||S--,l&&(S*=l),S=c-S,A=r(T[S],t[T[S]],S,P,c,p,t),A=="next")I.next();else if(typeof A<"u")return I.clear(),A},P,v);else if(o===0){for(S=c;S<=p;S+=l)if(A=r(T[S],t[T[S]],S,P,c,p,t),typeof A<"u"&&A!="next")return A}else e.interval(o,function(I){if(S=I.count,v||S--,l&&(S*=l),A=r(T[S],t[T[S]],S,P,c,p,t),A=="next")I.next();else if(typeof A<"u")return I.clear(),A},P,v);return!0}else{if(P=L(t.numChildren-1),P==0)return;if(i)if(o===0){for(S=c;S>=p;S-=l)if(A=r(t.getChildAt(S),S,P,c,p,t),typeof A<"u"&&A!="next")return A}else e.interval(o,function(I){if(S=I.count,v||S--,l&&(S*=l),S=c-S,A=r(t.getChildAt(S),S,P,c,p,t),A=="next")I.next();else if(typeof A<"u")return I.clear(),A},P,v);else if(o===0){for(S=c;S<=p;S+=l)if(A=r(t.getChildAt(S),S,P,c,p,t),typeof A<"u"&&A!="next")return A}else e.interval(o,function(I){if(S=I.count,v||S--,l&&(S*=l),A=r(t.getChildAt(S),S,P,c,p,t),A=="next")I.next();else if(typeof A<"u")return I.clear(),A},P,v);return!0}function L(I){return n(c)&&(c=i?I:0),n(p)&&(p=i?0:I),i&&p>c||!i&&c>p||(c<0&&p)<0||c>I&&p>I?0:(c=Math.max(0,Math.min(c,I)),p=Math.max(0,Math.min(p,I)),Math.floor((i?c-p:p-c)/l)+1)}},e.scaleTo=function(t,r,i,o,l,c,p){var v="obj, boundObj, percentX, percentY, type, boundsOnly, simple",w;if(w=vt(e.scaleTo,arguments,v))return w;if(t.type=="AC"&&le.zdf)return le.zdf.ac("scaleTo",arguments),t;if(He("43"),n(r)&&(r=le.zdf&&le.zdf.stage?le.zdf.stage:null),n(t)||!t.getBounds||!t.getBounds())return Nn("zim methods - scaleTo(): please provide an object (with setBounds) to scale"),t;if(n(r)||!r.getBounds||!r.getBounds())return Nn("zim methods - scaleTo(): please provide a boundObject (with setBounds) to scale to"),t;n(i)&&(i=-1),n(o)&&(o=-1),i==-1&&o==-1&&(i=o=100,n(l)&&(l="fill")),n(l)&&(l="fit"),l=="smallest"?l="fit":l=="biggest"||l=="outside"||l=="largest"?l="fill":(l=="both"||l=="stretch")&&(l="full"),n(c)&&(c=!1),n(p)&&(p=!1);var b=r.getBounds().width*i/100*(c?1:r.scaleX),_=r.getBounds().height*o/100*(c?1:r.scaleY);(r.type=="Stage"||r.type=="StageGL")&&(b=r.width*i/100,_=r.height*o/100);var E,S;if(p)E=t.getBounds().height,S=t.getBounds().width;else{var P=e.boundsToGlobal(t);E=P.height/t.scaleX,S=P.width/t.scaleY,(isNaN(E)||isNaN(S)||E>5e3)&&(E=t.getBounds().height,S=t.getBounds().width)}if((i==-1||o==-1)&&l!="full")return i==-1?e.sca(t,_/E):e.sca(t,b/S),t;var A;return l=="full"?(t.scaleX=i!=-1?b/S:t.scaleX,t.scaleY=o!=-1?_/E:t.scaleY,t):(l=="fill"?A=Math.max(b/S,_/E):A=Math.min(b/S,_/E),e.sca(t,A),t)},e.fit=function(t,r,i,o,l,c){var p="obj, left, top, width, height, type",v;if(v=vt(e.fit,arguments,p))return v;if(t.type=="AC"&&le.zdf)return le.zdf.ac("fit",arguments),t;if(He("46"),!(n(t)||!t.getBounds)){if(!t.getBounds()){lt("zim methods - fit(): please setBounds() on object");return}if(n(r)){if(!t.stage){lt("zim methods - fit(): please add boundary dimensions or add obj to stage first");return}if(!t.stage.getBounds()){lt("zim methods - fit(): please add boundary dimensions or add obj with bounds to stage first");return}var w=t.stage.getBounds().width,b=t.stage.getBounds().height;r=0,i=0,o=w,l=b}c===!0?c="fit":c===!1&&(c="fill"),n(c)&&(c="fit"),t.scaleX=t.scaleY=1;var _=o,E=l,S=t.getBounds().width,P=t.getBounds().height,A,R,T,L,I;return c=="full"?(t.scaleX=T=_/S,t.scaleY=L=E/P,A=_,R=E):(c=="fit"?_/E>=S/P?I=E/P:I=_/S:c=="fill"&&(_/E>=S/P?I=_/S:I=E/P),T=L=I),t.scaleX=T,t.scaleY=L,A=S*T,R=P*L,t.x=(t.regX-t.getBounds().x)*T+r+(_-A)/2,t.y=(t.regY-t.getBounds().y)*L+i+(E-R)/2,{x:t.x,y:t.y,width:A,height:R,scale:I,scaleX:T,scaleY:L,bX:r,bY:i,bWidth:o,bHeight:l}}},e.boundsCheck=!1,e.boundsToGlobal=function(t,r,i,o,l){if(e.boundsCheck||(He("40"),e.boundsCheck=!0),!(n(t)||!t.getBounds)){if(n(i)&&(i=!1),l&&!t.getBounds&&!t.getBounds())return t;var c=t.getBounds();if(!c&&n(r)){lt("zim methods - boundsToGlobal():\n please setBounds() on object (or a rectangle)");return}r&&(c=r);var p,v,w,b;l&&l.type&&!(l.type=="Stage"||l.type=="StageGL")?(p=t.localToLocal(c.x,c.y,l),v=t.localToLocal(c.x+c.width,c.y,l),w=t.localToLocal(c.x+c.width,c.y+c.height,l),b=t.localToLocal(c.x,c.y+c.height,l)):i?(p=t.globalToLocal(c.x,c.y),v=t.globalToLocal(c.x+c.width,c.y),w=t.globalToLocal(c.x+c.width,c.y+c.height),b=t.globalToLocal(c.x,c.y+c.height)):(p=t.localToGlobal(c.x,c.y),v=t.localToGlobal(c.x+c.width,c.y),w=t.localToGlobal(c.x+c.width,c.y+c.height),b=t.localToGlobal(c.x,c.y+c.height));var _=Math.min(p.x,v.x,w.x,b.x),E=Math.min(p.y,v.y,w.y,b.y),S=Math.max(p.x,v.x,w.x,b.x),P=Math.max(p.y,v.y,w.y,b.y);return new $e.Rectangle(_,E,S-_,P-E)}},e.resetBounds=function(t,r,i,o,l,c){var p="obj, a, b, c, d, margin",v;if(v=vt(e.resetBounds,arguments,p))return v;He("40.5");var w,b,_,E;return n(o)?(w=0,b=r,_=0,E=i):(w=r,b=o,_=i,E=l),n(E)&&(E=b),n(r)?t.setBounds(null):t.setBounds(w,_,b,E),c&&(i=t.getBounds(),i&&t.setBounds(i.x-c,i.y-c,i.width+c*2,i.height+c*2)),t},e.copyMatrix=function(t,r){return He("45.5"),t.x=r.x,t.y=r.y,t.scaleX=r.scaleX,t.scaleY=r.scaleY,t.regX=r.regX,t.regY=r.regY,t.rotation=r.rotation,t.skewX=r.skewX,t.skewY=r.skewY,t},e.duplicate=function(t,r){He("45.6");var i=t.clone(r);for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)&&i[o]==null){if(o=="parent"||o=="zimTouch")continue;i[o]=t[o]}return i},e.expand=function(t,r,i,o,l){var c="obj, padding, paddingV, paddingRight, paddingBottom",p;if(p=vt(e.expand,arguments,c))return p;if(He("50"),n(t)||!t.getBounds||!t.getBounds())return lt("zim methods - expand(): please provide object with bounds set"),t;n(r)&&(r=20),n(i)&&(i=r);var v,w;!n(o)||!n(l)?(n(o)&&(o=r),n(l)&&(l=i),v=r,w=i):(v=o=r,w=l=i);var b=t.getBounds(),_=new $e.Shape;return _.graphics.f("0").r(b.x-v,b.y-w,b.width+v+o,b.height+w+l),t.hitArea=_,t},e.setSwipe=function(t,r){if(He("34"),n(t)||!t.on)return;t.zimNoSwipe=r?null:!0,t instanceof $e.Container&&i(t);function i(o){for(var l=o.numChildren,c,p=0;p<l;p++)c=o.getChildAt(p),c.zimNoSwipe=t.zimNoSwipe,c instanceof $e.Container&&i(c)}return t},e.setMask=function(t,r,i){if(He("50.1"),n(t)&&lt("zim methods - setMask(): please provide obj"),n(r))return l(),t;var o=t.stage||(le.zdf?le.zdf.stage:null);function l(){t.zimMask&&t.zimMask.parent&&t.zimMask.parent.removeChild(t.zimMask),t.zimMask=null,t.zimMaskTicker&&e.Ticker.remove(t.zimMaskTicker),t.mask=null}t.zimMaskOriginal&&t.zimMaskOriginal!=r&&l(),n(i)&&(i=r.type=="Blob"||!n(r.zimDown)||!n(r.transformControls)||!n(r.zimTouch)||!n(r.zimTweens),r.zimMaskDynamic=i),t.zimMaskOriginal=r;var c;function p(){if(i&&(!o||!r.stage))return t;if(c&&c.dispose&&c.dispose(),c=null,t.zimMask=r.zimMask=c=r.shape.clone(),e.copyMatrix(c,r),r.addChildAt(c,0),c.alpha=0,!t.parent){t.mask=c;return}var v=r.getConcatenatedMatrix().decompose(),w=t.parent.getConcatenatedMatrix().decompose();c.scaleX=v.scaleX/w.scaleX,c.scaleY=v.scaleY/w.scaleY,c.rotation=(v.rotation?v.rotation:0)-(w.rotation?w.rotation:0);var b=r.localToLocal(r.shape.x+r.regX,r.shape.y+r.regY,t.parent);c.x=b.x,c.y=b.y,t.mask=c}return r.zimMaskApply=function(){t.zimMaskTicker&&e.Ticker.remove(t.zimMaskTicker),t.zimMaskTicker=e.Ticker.add(p)},r&&r.shape?(p(),i&&r.zimMaskApply()):(c=r,t.mask=c),t},e.outline=function(t,r,i,o){var l="obj, color, size, boundsOnly",c;if(c=vt(e.outline,arguments,l))return c;if(t.type=="AC"&&le.zdf)return le.zdf.ac("outline",arguments),t;if(He("47"),t.type&&t.type=="zimOultineShape")return Ct&&lt("zim.outline() - warning, you are trying to outline an outline - do not outline in a loop"),t;if(n(t)||!t.getBounds)return lt("zim methods - outline(): please provide object with bounds set"),t;if(!t.getBounds())return lt("zim methods - outline(): please setBounds() on object"),t;if(!t.parent)return lt("zim methods - outline(): object should be on stage first"),t;if(n(r)&&(r="brown"),n(i)&&(i=2),i<=0){t.ZIMoutlineShape&&t.ZIMoutlineShape.parent.removeChild(t.ZIMoutlineShape),t.ZIMoutlineShapeC&&t.ZIMoutlineShapeC.parent.removeChild(t.ZIMoutlineShapeC),t.ZIMoutlineShape=t.ZIMoutlineShapeC=null;return}var p=t.getBounds(),v=t.ZIMoutlineShape=t.ZIMoutlineShape?t.ZIMoutlineShape:new e.Shape;v.type="zimOutlineShape";var w=t.ZIMoutlineShapeC=t.ZIMoutlineShapeC?t.ZIMoutlineShapeC:new e.Shape;w.type="zimOutlineShape";var b=t.parent;t.outlineToggled=!0,t.outlineToggle=function(k){return k===!0?(t.ZIMoutlineShape.visible=!0,t.ZIMoutlineShapeC.visible=!0):k===!1?(t.ZIMoutlineShape.visible=!1,t.ZIMoutlineShapeC.visible=!1):(t.ZIMoutlineShape.visible=!t.ZIMoutlineShape.visible,t.ZIMoutlineShapeC.visible=!t.ZIMoutlineShapeC.visible),t.outlineToggled=t.ZIMoutlineShape.visible,t};var _=t.localToLocal(p.x,p.y,b),E=t.localToLocal(p.x+p.width,p.y,b),S=t.localToLocal(p.x+p.width,p.y+p.height,b),P=t.localToLocal(p.x,p.y+p.height,b),A=t.localToLocal(0,0,b),R=v.graphics.c(),T=w.graphics.c();if(R.s(r).ss(i).mt(_.x,_.y).lt(E.x,E.y).lt(S.x,S.y).lt(P.x,P.y).lt(_.x,_.y).cp(),!o){var L=10,I=L+1;T.s("white").ss(i+2),T.mt(-I,0).lt(I,0),T.mt(0,-I).lt(0,I),T.s(r).ss(i),T.mt(-L,0).lt(L,0),T.mt(0,-L).lt(0,L),T.cp(),w.x=A.x,w.y=A.y,w.rotation=t.rotation,R.s("white").ss(i+2).dc(t.x,t.y,L+6),R.s(r).ss(i).dc(t.x,t.y,L+6)}t.parent.removeChild(v),t.parent.removeChild(w);var C=t.parent.getChildIndex(t);return t.parent.addChildAt(w,C+1),t.parent.addChildAt(v,C+1),v.mouseEnabled=!1,w.mouseEnabled=!1,t},e.blendmodes=function(t,r,i){He("47.05"),n(r)&&(r=1);var o=["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"];i===!1&&o.push("source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","copy","xor");var l=0,c=e.interval(r,function(){var p=o[l%o.length];l++,t.ble(p),qr(p),t.stage&&t.stage.update()});return t.on("mousedown",function(){c.pause(!c.paused)}),t},e.STYLE=null,e.ignore="ignore",e.getStyle=function(t,r,i){e.STYLECHECK||(He("50.34"),e.STYLECHECK=!0);var o=["tap","change","hold","noTap","noChange","noHold","pos","addTo","center","centerReg","reg","mov","move","drag","transform","gesture","mouse","expand","outline","bounds","animate","wiggle","cache"],l=le.STYLE||e.STYLE,c=l,p;l&&l.type&&typeof l.type=="string"&&(l.ttype=l.type,delete l.type);for(var v in l)p=l[v],v.match(/^[(A-Z)]/)?(l.type||(l.type={}),l.type[v]?l.type[v]=e.merge(l.type[v],p):l.type[v]=p,delete l[v]):p.constructor==={}.constructor&&v!="group"&&v!="type"&&!e.isPick(p)&&o.indexOf(v)==-1&&(l.group||(l.group={}),l.group[v]?l.group[v]=e.merge(l.group[v],p):l.group[v]=p,delete l[v]);n(c)?c={}:c=e.copy(c);var w;if(n(i))i={};else for(w=0;w<o.length;w++)delete i[o[w]];var b=i,_=c.type;if(_&&delete c.type,!n(r)&&!n(c.group)){var E=r.split(","),S={};for(w=0;w<E.length;w++){var P=E[w].trim();n(c.group[P])||(S=e.merge(S,c.group[P]))}delete c.group}!n(t)&&!n(_)&&!n(_[t])&&(c=e.merge(c,_[t])),!n(r)&&!n(S)&&(c=e.merge(c,S));for(var A in c){if(b[A]){delete c[A];continue}if(p=o.indexOf(A)==-1&&!c.delayPick?e.Pick.choose(c[A]):c[A],p=="ignore"){delete c[A];continue}else p&&p.constructor==={}.constructor&&(p=e.copy(p,!0,!1));var R;for(var T in c)(R=T.match(/^(.+)gColor$/))&&(c[R[1]+"ackgroundColor"]=c[T],delete c[T]);c[A]=p}return c=e.merge(c,b),c.ttype&&!c.type&&(c.type=c.ttype,delete c.ttype),c.style===!1?{}:c},e.styleTransforms=function(t,r){var i=["visible","x","y","scale","scaleX","scaleY","rotation","alpha","skewX","skewY","blendMode"],o;if(r){for(r.add&&t.addTo(),r.addTo&&t.addTo(r.addTo===!0?null:r.addTo),o=0;o<i.length;o++)r[i[o]]!=null&&(t[i[o]]=e.Pick.choose(r[i[o]]));if((r.regX!=null||r.regY!=null)&&t.reg(n(r.regX)?DEFAULT:r.regX,n(r.regY)?DEFAULT:r.regY),r.bounds&&r.bounds.constructor==={}.constructor&&t.setBounds(r.bounds.x?r.bounds.x:0,r.bounds.y?r.bounds.y:0,r.bounds.width?r.bounds.width:100,r.bounds.height?r.bounds.height:100),r.center&&t.center(r.center===!0?null:r.center),r.centerReg&&t.centerReg(r.centerReg===!0?null:r.centerReg),r.reg!=null&&(r.reg.constructor==={}.constructor?t.reg(e.Pick.choose(r.reg.x),e.Pick.choose(r.reg.y),r.reg.still):t.reg(r.reg)),r.x!=null&&(r.loc?r.loc.x==null&&(r.loc.x=r.x):r.loc={x:r.x}),r.y!=null&&(r.loc?r.loc.y==null&&(r.loc.y=r.y):r.loc={y:r.y}),r.loc&&(r.loc.constructor==={}.constructor?t.loc(e.Pick.choose(r.loc.x),e.Pick.choose(r.loc.y)):t.loc(e.Pick.choose(r.loc))),r.pos)if(r.pos.constructor==={}.constructor)t.pos(e.Pick.choose(r.pos.x),e.Pick.choose(r.pos.y),e.Pick.choose(r.pos.horizontal),e.Pick.choose(r.pos.vertical),e.Pick.choose(r.pos.container),e.Pick.choose(r.pos.index),r.pos.add,e.Pick.choose(r.pos.reg),e.Pick.choose(r.pos.regX),e.Pick.choose(r.pos.regY));else{var l=e.Pick.choose(r.pos);(l=="left"||l=="top")&&t.pos(),l=="right"&&t.pos({horizontal:"right"}),l=="bottom"&&t.pos({vertical:"bottom"}),(l=="rightbottom"||l=="bottomright")&&t.pos({horizontal:"right",vertical:"bottom"}),l=="center"&&t.center()}if((r.mov||r.move)&&(r.move&&(r.mov=r.move),r.mov.constructor==={}.constructor?t.mov(e.Pick.choose(r.mov.x),e.Pick.choose(r.mov.y)):t.mov(e.Pick.choose(r.mov))),r.outline&&setTimeout(function(){t.outline(r.outline.constructor==={}.constructor?r.outline:null),t.stage&&t.stage.update()},20),r.drag&&t.drag(r.drag.constructor==={}.constructor?r.drag:{currentTarget:!0}),r.gesture&&t.gesture(r.gesture.constructor==={}.constructor?r.gesture:null),r.mouse===!1&&t.noMouse(),r.transform&&setTimeout(function(){t.transform(r.transform.constructor==={}.constructor?r.transform:null)},20),r.animate)for(Array.isArray(r.animate)||(r.animate=[r.animate]),o=0;o<r.animate.length;o++)-function(){var p=r.animate[o];p.constructor==={}.constructor&&setTimeout(function(){t.animate(p)},20)}();if(r.wiggle)for(Array.isArray(r.wiggle)||(r.wiggle=[r.wiggle]),o=0;o<r.wiggle.length;o++)-function(){var p=r.wiggle[o];p.constructor==={}.constructor&&setTimeout(function(){t.wiggle(p)},20)}();r.expand&&t.expand(r.expand===!0?null:r.expand),r.cache&&(r.cache.constructor==={}.constructor?r.cache.x?t.cache(e.Pick.choose(r.cache.x),e.Pick.choose(r.cache.y),e.Pick.choose(r.cache.x),e.Pick.choose(r.cache.y)):t.cache(e.Pick.choose(r.cache.width),e.Pick.choose(r.cache.height)):t.cache()),r.tap&&t.tap&&t.tap(r.tap),r.change&&t.change&&t.change(r.change),r.hold&&t.hold&&t.hold(r.hold),r.noChange&&t.noChange&&t.noChange(),r.noTap&&t.noTap&&t.noTap(),r.noHold&&t.noHold&&t.noHold();var c=le.STYLE||e.STYLE;c&&(c.once===!0||c.once==t.type)&&(le.STYLE?le.STYLE={}:e.STYLE={})}},e.Style={remembered:{},clear:function(){return le.STYLE&&(le.STYLE={}),e.STYLE&&(e.STYLE={}),e.Style},clearTypes:function(){var t=le.STYLE||e.STYLE;return delete t.types,e.Style},clearGroups:function(){var t=le.STYLE||e.STYLE;return delete t.groups,e.Style},remember:function(t){n(t)&&(t="default");var r=le.STYLE||e.STYLE;return r||(Mt?r=e.STYLE={}:r=le.STYLE={}),e.Style.remembered[t]=e.copy(r,!0),e.Style},clearRemembered:function(t){return n(t)?e.Style.remembered={}:delete e.Style.remembered[t],e.Style},recall:function(t){return n(t)&&(t="default"),le.STYLE?le.STYLE=e.Style.remembered[t]:e.STYLE=e.Style.remembered[t],e.Style},add:function(t){var r=le.STYLE||e.STYLE;return r||(Mt?r=e.STYLE={}:r=le.STYLE={}),le.STYLE?le.STYLE=e.merge(r,t):e.STYLE=e.merge(r,t),e.Style},addType:function(t,r){var i=le.STYLE||e.STYLE;return i||(Mt?i=e.STYLE={}:i=le.STYLE={}),i.type||(i.type={}),i.type[t]=r,e.Style},addGroup:function(t,r){var i=le.STYLE||e.STYLE;return i||(Mt?i=e.STYLE={}:i=le.STYLE={}),i.group||(i.group={}),i.group[t]=r,e.Style},remove:function(t){var r=le.STYLE||e.STYLE;return r||(Mt?r=e.STYLE={}:r=le.STYLE={}),delete r[t],e.Style},removeType:function(t){var r=le.STYLE||e.STYLE;return r||(Mt?r=e.STYLE={}:r=le.STYLE={}),r.type&&delete r.type[t],e.Style},removeGroup:function(t){var r=le.STYLE||e.STYLE;return r||(Mt?r=e.STYLE={}:r=le.STYLE={}),r.group&&delete r.group[t],e.Style}},e.PATH=null,e.TIME="seconds",e.TIMECHECK=!1,e.DIR="ltr",e.SEEDRAND=null,e.SEEDRANDCOUNT=0,e.ANIMATE=!0,e.OPTIMIZE=!1,e.ACTIONEVENT="mousedown",e.DEFAULTWIRE="currentValue",e.KEYFOCUS=null,e.POSREG=!1,e.DRAGALL=!1,e.MOBILE="default",e.Ticker={stages:null,myUpdate:null,alwaysList:new e.Dictionary,list:new e.Dictionary,wire:new e.Dictionary,setFPS:function(t,r){n(t)&&n(r)?(t=60,r=60):n(t)?t=60:n(r)&&(r=t),e.Ticker.framerate=$e.Ticker.framerate=e.mobile()?t:r},setTimingMode:function(t){$e.Ticker.timingMode=$e.Ticker.RAF,t=="synched"&&($e.Ticker.timingMode=$e.Ticker.RAF_SYNCHED),t=="timeout"&&($e.Ticker.timingMode=$e.Ticker.TIMEOUT)},add:function(t,r){He("30");var i=e.Ticker;if(i.has(t,r))return t;if((n(r)||!r.update)&&(r=le.zdf.stage),n(t)||typeof t!="function"){lt("zim.Ticker.add() - only add functions");return}return i.list.at(r)?i.list.at(r).push(t):i.list.add(r,[t]),i.ticker||(i.ticker=$e.Ticker.on("tick",i.call)),i.framerate||i.setFPS(),t},addWire:function(t,r){if(He("30"),n(r[0]))return t;var i=e.Ticker;i.wire.add(t,r);var o=r[0][r[1]];return r[4]&&(o=r[4](o,"from")),r[3]&&(t[r[6]]=r[7]=o),i.ticker||(i.ticker=$e.Ticker.on("tick",i.call)),i.framerate||i.setFPS(),t},rawID:{},raw:function(t){He("30");var r=e.makeID("letters",7);return-function i(o){t(o),e.Ticker.rawID[r]=requestAnimationFrame(i)}(),r},removeRaw:function(t){cancelAnimationFrame(e.Ticker.rawID[t]),delete e.Ticker.rawID[t]},call:function(t){var r=e.Ticker,i,o,l,c=[];for(l=0;l<r.list.length;l++){i=r.list.objects[l],o=r.list.values[l];for(var p=0;p<o.length;p++)o[p](t);var v=!1;(r.alwaysList.at(i)||o.length>0&&(n(r.update)&&!e.OPTIMIZE&&(Mt||!le.OPTIMIZE)||r.update))&&(v=!0),v&&c.indexOf(i)<0&&c.push(i)}for(l=r.wire.length-1;l>=0;l--){var w=r.wire.objects[l],b=r.wire.values[l];if(b){var _=w[b[6]];_!=b[7]&&(b[4]&&(_=b[4](_,"to",b[7])),b[0][b[1]]=b[7]=_,b[5]&&b[5](_),i=b[0].stage,i&&c.indexOf(i)<0&&c.push(i)),b[2]&&b[0]&&(_=b[0][b[1]],b[7]!=_&&(b[4]&&(_=b[4](_,"from",b[7])),w[b[6]]=b[7]=_,b[5]&&b[5](_),i=w.stage,i&&c.indexOf(i)<0&&c.push(i)))}}if(r.list.length==0)for(l=0;l<r.alwaysList.length;l++)i=r.alwaysList.objects[l],c.indexOf(i)<0&&c.push(i);var E=c.length;for(l=0;l<E;l++)c[l].update()},always:function(t){He("30");var r=e.Ticker;r.framerate||r.setFPS(),(n(t)||!t.update)&&(t=le.zdf.stage),r.alwaysList.add(t,!0),r.ticker||(r.ticker=$e.Ticker.on("tick",r.call))},alwaysOff:function(t){var r=e.Ticker;(n(t)||!t.update)&&(t=le.zdf.stage),r.alwaysList.remove(t)},remove:function(t){var r=e.Ticker;if(n(t)||typeof t!="function"){lt("zim.Ticker - only remove functions");return}for(var i=0;i<r.list.length;i++){var o=r.list.values[i].indexOf(t);o>-1&&r.list.values[i].splice(o,1)}r.alwaysList.length>0||r.list.length>0||r.wire.length>0||($e.Ticker.off("tick",r.ticker),r.ticker=null)},removeAll:function(t){for(var r=e.Ticker,i,o=0;o<r.list.length;o++)i=r.list.objects[o],(n(t)||t===i)&&(r.list.values[o]=[]);r.alwaysList.length>0||r.list.length>0||r.wire.length>0||($e.Ticker.off("tick",r.ticker),r.ticker=null)},removeWire:function(t,r,i,o){var l=e.Ticker;if(n(t)&&n(r)&&n(i)&&n(o))l.wire.clear();else for(var c=l.wire.length-1;c>=0;c--){var p=l.wire.objects[c],v=l.wire.values[c];v&&(t&&p!=t||r&&v[0]!=r||i&&v[1]!=i||o&&v[6]!=o||(l.wire.objects.splice(c,1),l.wire.values.splice(c,1)))}l.alwaysList.length>0||l.list.length>0||l.wire.length>0||($e.Ticker.off("tick",l.ticker),l.ticker=null)},isUpdating:function(t){n(t)&&(t=le.zdf.stage);var r=!1,i=e.Ticker;return(i.alwaysList.at(t)||i.list&&i.list.values.at(t)&&i.list.values.at(t).length>0&&(n(i.update)&&!e.OPTIMIZE&&(Mt||!le.OPTIMIZE)||i.update))&&(r=!0),r},has:function(t,r){return(n(r)||!r.update)&&(r=le.zdf.stage),e.Ticker.list&&e.Ticker.list.at(r)&&e.Ticker.list.at(r).indexOf(t)>=0},dispose:function(t){for(var r=e.Ticker,i=0,o,l=r.list.length-1;l>=0;l--)o=r.list.objects[l],n(t)||t===o?(r.list.remove(t),r.alwaysList.remove(t)):i+=r.list.values[l].length;if(!(r.alwaysList.length>0))return i==0&&($e.Ticker.off("tick",r.ticker),r.ticker=null),!0}},e.Ticker.setFPS(),Object.defineProperty(e.Ticker,"update",{get:function(){return e.Ticker.myUpdate},set:function(t){var r=e.Ticker;typeof t!="boolean"&&(t=null),r.myUpdate=t,r.myUpdate===!1&&(cancelAnimationFrame(r.ticker),r.alwaysList=new e.Dictionary)}}),e.Pages=function(t,r,i,o,l,c,p,v,w){var b="pages, transition, speed, transitionTable, holder, arrowDisableColor, style, group, inherit",_;if(_=vt(e.Pages,arguments,b,this))return _;He("71"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Pages",this.group=v;var E=p===!1?{}:e.getStyle(this.type,this.group,w),S=y(i);if(n(t)&&(t=E.pages!=null?E.pages:[]),this.pages=t,n(r)&&(r=E.transition!=null?E.transition:"none"),n(i)&&(i=E.speed!=null?E.speed:S=="s"?.2:200),n(o)&&(o=E.transitionTable!=null?E.transitionTable:[]),this.transitionTable=o,n(c)&&(c=E.arrowDisableColor!=null?E.arrowDisableColor:e.grey),this.arrowDisableColor=c,n(l)&&(l=E.holder!=null?E.holder:null),n(l)&&le.zdf&&(l=le.zdf.stage),!l.getBounds||!l.getBounds()){lt("zim controls - Pages():\nholder object must have bounds set");return}this.speed=i,this.active=!0;var P=this;P.transitioning=!1;var A=l.getBounds().width,R=l.getBounds().height,T,L;(r!="none"||o!=[])&&I();function I(){T=new $e.Shape,T.graphics.f("black").r(0,0,A,R+1),L=new $e.Shape,L.graphics.f("white").r(0,0,A,R+1)}var C=["left","right","up","down"],k,Y,W=!0,G;for(G=0;G<t.length;G++)k=t[G],k.constructor!={}.constructor&&(k=t[G]={page:t[G]}),k.swipe&&(W=!1);for(G=0;G<t.length;G++){if(k=t[G],k.constructor!=={}.constructor&&(k=t[G]={page:t[G]}),W){var F=t[G-1],B=t[G+1];k.swipe=[F?F.page:null,B?B.page:null]}$(k.page,k.swipe)}var q=this.page=t[0]?t[0].page:null;n(this.page)||(this.index=0),this.addChild(q),re(q),this.swipe=new e.Swipe(l);var Z,X=!1,ne=this.swipe.on("swipe",function(U){if(P.active){var g=U.currentTarget.direction;if(g!="none"){var d="";g=="left"?d="right":g=="right"?d="left":g=="up"?d="down":g=="down"&&(d="up"),g=d;var h=C.indexOf(g);Y=q.zimSwipeArray[h],Z=[Y,g,null,null,!0],P.page=q,P.nextPage=Y,P.direction=g,P.dispatchEvent("swipe"),setTimeout(function(){X||P.go(Y,g,null,null,!0)},50)}}});function $(U,g){n(U)||(U.zimHTMLList=new e.Dictionary,de(U),U.zimSwipeArray=g||[],U.zimOriginalAlpha=U.alpha,U.parent&&U.parent.removeChild(k.page))}function re(U){if(!n(U))for(U.removedHTML=!1,G=0;G<U.zimHTMLList.length;G++)U.addChildAt(U.zimHTMLList.values[G].obj,U.zimHTMLList.values[G].depth)}function de(U){if(!U.removedHTML){U.removedHTML=!0,U.zimHTMLList.clear();var g,d;for(d=0;d<U.numChildren;d++)if(g=U.getChildAt(d),g.type=="TextArea"||g.type=="Loader"||g.type=="Tag"){var h={obj:g,depth:U.getChildIndex(g)};U.zimHTMLList.add(g,h)}for(d=U.numChildren-1;d>=0;d--)g=U.getChildAt(d),(g.type=="TextArea"||g.type=="Loader"||g.type=="Tag")&&U.removeChild(g)}}this.addPage=function(U,g){$(U,g),P.pages.push({page:U}),q?U.parent&&U.parent.removeChild(U):(q=P.page=U,P.addChild(q))},this.removePage=function(U){de(U),P.currentPage==U&&(P.removeChild(U),l.stage&&l.stage.update()),e.loop(P.pages,function(g,d){(g.page==U||g==U)&&P.pages.splice(d,1)},!0),U.zimSwipeArray=null},this.setSwipeArray=function(U,g){n(g)&&(g=[]);var d={page:U,swipe:g};d.page.zimSwipeArray=d.swipe?d.swipe:[]},this.pause=function(){X=!0},this.unpause=function(){X&&P.go(Z[0],Z[1],Z[2],Z[3],Z[4])};var Q=!0;this.go=function(U,g,d,h,x){if(typeof U=="number"){var j=P.pages[U];if(n(j))return;U=j.page}setTimeout(function(){X=!1},200);for(var O=[{x:A},{x:-A},{y:R},{y:-R}],V=[{x:0},{x:0},{y:0},{y:0}],ce=[{x:A/2,alpha:0},{x:-A/2,alpha:0},{y:R/2,alpha:0},{y:-R/2,alpha:0}],H=r,N=P.speed,ue=0;ue<P.transitionTable.length;ue++)if(P.transitionTable[ue][0]==q&&P.transitionTable[ue][1]==U){H=P.transitionTable[ue][2],n(P.transitionTable[ue][3])||(N=P.transitionTable[ue][3]);break}n(d)&&(d=H),n(h)&&(h=N),P.speed=h;function fe(be){be[0].uncache(),be[1].uncache(),P.transitioning=!1,P.dispatchEvent("pagetransitioned"),P.removeChild(P.lastPage),d=="fan"&&(g=="right"||g=="down"?(P.lastPage.rotation=0,P.lastPage.regY=0,P.lastPage.mov(0,-P.lastPage.height)):(P.page.rotation=0,P.page.regY=0,P.page.mov(0,-P.lastPage.height))),P.removeChild(T),P.removeChild(L),re(q),Q=!0}function ae(be){P.removeChild(P.lastPage),e.animate(be.shift(),{alpha:0},P.speed/2,null,fe,be)}if(P.direction=g,U==""||U==null)P.page=q,P.dispatchEvent("nothing");else if(typeof U=="string")P.page=q,P.dispatchEvent(U);else{if(U==q)return;n(g)&&(g="right");var Ie=C.indexOf(g);if(!Q)return;Q=!1,U.x=0,U.y=0,U.alpha=U.zimOriginalAlpha;var ge,Be=["pixelDark","pixelLight","pixelZIM","bubbleDark","bubbleLight","bubbleZIM","lineDark","lineLight","lineZIM"];if(Be.indexOf(d)>=0){var z=d;ge=!0,d="slide"}var Ye=["explodeDark","explodeLight","explodeZIM"];if(Ye.indexOf(d)>=0){var te=d;ge=!0,d="fade"}if(d.type=="Emitter"&&(ge=d,d.horizontal||d.vertical?d="slide":d="fade"),P.transitioning=!0,d=="slide"?(U.x=-(O[Ie].x|0),U.y=-(O[Ie].y|0),U.cache(0,0,(A+1)/U.scaleX,(R+1)/U.scaleY),q.cache(0,0,(A+1)/q.scaleX,(R+1)/q.scaleY),P.addChild(U),P.addChild(q),e.animate(q,O[Ie],P.speed,null,fe,[q,U]),e.animate(U,V[Ie],P.speed)):d=="reveal"?(U.cache(0,0,(A+1)/U.scaleX,(R+1)/U.scaleY),q.cache(0,0,(A+1)/q.scaleX,(R+1)/q.scaleY),P.addChild(U),P.addChild(q),e.animate(q,ce[Ie],P.speed,null,fe,[q,U])):d=="fade"?(U.cache(0,0,(A+1)/U.scaleX,(R+1)/U.scaleY),q.cache(0,0,(A+1)/q.scaleX,(R+1)/q.scaleY),U.alpha=1,P.addChild(U),P.addChild(q),e.animate(q,{alpha:0},P.speed,null,fe,[q,U])):d=="black"?(U.cache(0,0,(A+1)/U.scaleX,(R+1)/U.scaleY),q.cache(0,0,(A+1)/q.scaleX,(R+1)/q.scaleY),U.alpha=1,P.addChild(U),P.addChild(q),T.alpha=0,P.addChild(T),e.animate(T,{alpha:1},P.speed/2,null,ae,[T,q,U])):d=="clear"?(U.cache(0,0,(A+1)/U.scaleX,(R+1)/U.scaleY),q.cache(0,0,(A+1)/q.scaleX,(R+1)/q.scaleY),U.alpha=0,P.addChild(U),P.addChild(q),e.animate(q,{alpha:0},P.speed/2),e.animate(U,{alpha:1},P.speed/2,null,fe,[q,U],P.speed/2)):d=="white"?(U.cache(0,0,(A+1)/U.scaleX,(R+1)/U.scaleY),q.cache(0,0,(A+1)/q.scaleX,(R+1)/q.scaleY),U.alpha=1,P.addChild(U),P.addChild(q),L.alpha=0,P.addChild(L),e.animate(L,{alpha:1},P.speed/2,null,ae,[L,q,U])):d=="fan"?(U.cache(0,0,(A+1)/U.scaleX,(R+1)/U.scaleY),q.cache(0,0,(A+1)/q.scaleX,(R+1)/q.scaleY),U.alpha=1,g=="right"||g=="down"?(P.addChild(U),P.addChild(q),q.regY=q.height,q.mov(0,q.height),e.animate(q,{rotation:-90},P.speed,null,fe,[q,U])):(P.addChild(q),P.addChild(U),U.regY=q.height,U.mov(0,q.height),U.rotation=-90,e.animate(U,{rotation:0},P.speed,null,fe,[q,U]))):(P.transitioning=!1,P.addChild(U),P.removeChild(q),Q=!0),ge){var K=Ie<2,xe,_e;if(z||d=="slide"){z?(z=="lineDark"||z=="lineLight"?xe=new e.Rectangle(K?30:A+5,K?R+5:30,z=="lineDark"?e.dark:e.white).alp(.2):z=="lineZIM"?xe=new e.Rectangle(K?50:A+5,K?R+5:50,[e.green,e.yellow,e.orange,e.pink,e.blue]).alp(.5):z=="pixelDark"||z=="pixelLight"?xe=new e.Rectangle(40,40,e.clear,z=="pixelDark"?e.dark:e.white,2).alp(.7):z=="pixelZIM"?xe=new e.Rectangle(40,40,[e.green,e.yellow,e.orange,e.pink,e.blue]).alp(.7):z=="bubbleDark"||z=="bubbleLight"?xe=new e.Circle(30,e.clear,z=="bubbleDark"?e.dark:e.white,2).alp(.7):z=="bubbleZIM"&&(xe=new e.Circle(30,[e.green,e.yellow,e.orange,e.pink,e.blue]).alp(.7)),xe.centerReg({add:!1}),z=="lineDark"||z=="lineLight"||z=="lineZIM"?_e=new e.Emitter({obj:xe,life:.5,decayTime:.5,shrink:!1,force:0,gravity:0,width:0,startPaused:!0}):_e=new e.Emitter({obj:xe,num:6,life:.5,decayTime:.5,width:K?0:A,height:K?R:0,vertical:K,horizontal:!K,startPaused:!0})):_e=ge;var Se=[{x:0,y:R/2},{x:A,y:R/2},{x:A/2,y:0},{x:A/2,y:R}],ie=[{x:A,y:R/2},{x:0,y:R/2},{x:A/2,y:R},{x:A/2,y:0}];_e.centerReg(l).spurt(null,P.speed),_e.x=Se[Ie].x,_e.y=Se[Ie].y,e.animate(_e,ie[Ie],P.speed,null,function(){z&&_e.dispose()})}else(te||d=="fade")&&(te?(te=="explodeDark"||te=="explodeLight"?xe=new e.Circle(150,te=="explodeDark"?e.dark:e.white).alp(.5):te=="explodeZIM"&&(xe=new e.Circle(130,[e.green,e.yellow,e.orange,e.pink,e.blue]).alp(.7)),_e=new e.Emitter({obj:xe,num:5,gravity:0,force:{min:20,max:40},life:.5,shrink:!1,decayTime:.5,startPaused:!0})):_e=ge,_e.centerReg(l).spurt(null,P.speed*.35),_e.on("fizzed",function(){te&&_e.dispose()}));l&&l.type!="Stage"&&l.type!="StageGL"&&_e.particles&&l.shape&&_e.particles.setMask(l.shape)}for(l&&l.shape&&_e&&_e.particles&&_e.particles.setMask(l.shape),de(q),P.lastPage=q,P.page=U,P.index=-1,ue=0;ue<P.pages.length;ue++){var pe=P.pages[ue].page;pe==P.page&&(P.index=ue)}d=="none"&&re(U),n(x)&&(x=!1),P.fromSwipe=x,P.dispatchEvent("page"),q=U,P.setArrows(t.index),l.stage&&l.stage.update()}},l&&l.shape&&(l.mouseChildren=!0,l.mouseEnabled=!0,P.setMask(l.shape)),this.resize=function(){A=l.getBounds().width,R=l.getBounds().height,(r!="none"||o!=[])&&I()},this.puff=function(U){for(var g=0;g<t.length;g++)P.addChild(t[g].page);P.addChild(q),U>0&&setTimeout(function(){P.settle()},U*(S=="s"?1e3:1))},this.settle=function(){P.removeAllChildren(),P.addChild(q),P.dispatchEvent("puffed")},this.disable=function(){P.active=!1},this.enable=function(){P.active=!0},this.arrows={},this.setArrows=function(){if(!e.isEmpty(P.arrows)){var U=P.pages[P.index];if(!(!U||!U.swipe)){var g=U.swipe,d=[e.LEFT,e.RIGHT,e.DOWN,e.UP];e.loop(d,function(h,x){g[x]?e.loop(P.arrows[h],function(j){if(j.setDisabled===!0){j.activate(!1,P.arrowDisableColor),j.setDisabled=null;return}j.enabled||j.activate(!0,j.arrowBackgroundColor)}):e.loop(P.arrows[h],function(j){if(j.setDisabled===!1){j.activate(!0,j.arrowBackgroundColor),j.setDisabled=null;return}j.enabled&&j.activate(!1,P.arrowDisableColor)})}),P.stage&&P.stage.update()}}},P.added(function(U){if(U.frame&&U.frame.scaling=="full"){if(!e.globalManager){var g=e.globalManager=new e.Manager;g.frame=U.frame,g.event=U.frame.on("resize",function(){g.resize()})}e.globalManager.add(P)}}),p!==!1&&e.styleTransforms(this,E),this.dispose=function(U,g,d){if(e.globalManager){var h=e.globalManager;h.remove(P),e.globalManager.items.length==0&&(h.frame.off("resize",h.event),h.dispose(),e.globalManager=null)}return P.swipe.off("swipe",ne),P.swipe.dispose(),d||this.zimContainer_dispose(!0),!0}},e.extend(e.Pages,e.Container,["clone","dispose"],"zimContainer",!1),e.Arrow=function(t,r,i,o,l,c,p,v,w,b,_){var E="backgroundColor, rollBackgroundColor, pages, direction, type, newPage, trans, speed, style, group, inherit",S;if(S=vt(e.Arrow,arguments,E,this))return S;He("71.2"),this.group=b;var P=w===!1?{}:e.getStyle("Arrow",this.group,_);n(o)&&(o=P.direction!=null?P.direction:"right"),n(t)&&(t=P.backgroundColor!=null?P.backgroundColor:e.blue),this.arrowBackgroundColor=t,n(r)&&(r=P.rollBackgroundColor!=null?P.rollBackgroundColor:e.blue.lighten(.2)),this.arrowRollBackgroundColor=r,n(l)&&(l=P.type!=null?P.type:"triangle"),n(c)&&(c=P.newPage!=null?P.newPage:null),n(p)&&(p=P.trans!=null?P.trans:null),n(v)&&(v=P.speed!=null?P.speed:null);var A,R,T,L,I;l=="triangle"?(A=new e.Triangle(45,45,45,t,null,null,null,null,-7).rot(90),R=new e.Triangle(45,45,45,r,null,null,null,null,-7).rot(90)):l=="thick"?(A=new e.Shape,T=A.graphics.f(t).command,I="AhFBdIiWAAIAAi4ICWAAIAAh7IEhDWIkhDXg",A.p(I).reg(-4),R=new e.Shape,L=R.graphics.f(r).command,R.p(I).reg(-4)):l=="thin"?(A=new e.Shape,T=A.graphics.f(t).command,I="AhBCIIBZhbIjWAAIAAhVIDaAAIhdhfIA9g+IDDDFIAAAAIAAAAIjDDGg",A.p(I).reg(-4),R=new e.Shape,L=R.graphics.f(r).command,R.p(I).reg(-4)):l=="angle"&&(A=new e.Shape,T=A.graphics.f(t).command,I="AiNC5IC4i5Ii4i5IAxgxIDqDqIjqDrg",A.p(I).reg(-3),R=new e.Shape,L=R.graphics.f(r).command,R.p(I).reg(-3)),this.zimButton_constructor(50,50,"",e.clear,e.clear,null,null,null,null,null,null,null,null,null,null,null,A,R),this.type="Arrow";var C=this;if(this.activate=function(G,F){return n(G)&&(G=!0),n(F)&&(F=e.grey),F===!1||(G?(C.enabled=!0,F!==!1&&(l=="triangle"?(C.icon.color=C.arrowBackgroundColor,C.rollIcon.color=C.arrowRollBackgroundColor):(T.style=C.arrowBackgroundColor,L.style=C.arrowRollBackgroundColor))):(C.enabled=!1,F!==!1&&(l=="triangle"?(C.icon.color=F,C.rollIcon.color=F):(T.style=F,L.style=F)))),C},n(i)||i.type!="Pages")return;var k=(Mt?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click";n(i.arrows)&&(i.arrows={}),n(i.arrows[o])&&(i.arrows[o]=[]),i.arrows[o].push(this);var Y=W();Y||this.activate(!1,i.arrowDisableColor);function W(){var G=i.pages[i.index];if(!(!G||!G.page||!G.page.zimSwipeArray)){var F=G.page.zimSwipeArray;if(o=="left")return F[0];if(o=="right")return F[1];if(o=="up")return F[2];if(o=="down")return F[3]}}this.expand(),this.on(k,function(){if(!i.transitioning){var G=W();G&&i.go(G,o,p,v)}}),w!==!1&&e.styleTransforms(this,P),this.clone=function(){return C.cloneProps(new e.Arrow(t,r,i,o,l,c,p,v,w,this.group,_))}},e.extend(e.Arrow,e.Button,"clone","zimButton",!1),e.HotSpots=function(t,r,i){var o="spots, local, mouseDowns",l;if(l=vt(e.HotSpots,arguments,o,this))return l;He("72"),this.zimContainer_constructor(null,null,null,null,!1),this.type="HotSpots",n(r)&&(r=!0),n(i)&&(i=!1);var c=(Mt?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",p=this,v,w,b=p.hotSpots=[];n(t)&&(t=[]);for(var _=0;_<t.length;_++)E(t[_]);function E(P){var A=null;if(!Array.isArray(P.rect)){if(A=P.rect,!A){lt("zim controls - HotSpots(): HotSpot "+P.page+" "+P.rect+" button does not exist");return}P.rect=[A.x,A.y,A.width||1,A.height||1]}w=new e.HotSpot(P.page,P.rect[0],P.rect[1],P.rect[2],P.rect[3],P.call,P.callOver,P.callOut,r,P.talk),w.zimHSpage=P.page,w.button=A,b.push(w),w.on(c,S),A&&n(P.callOver)&&n(P.callOut)&&(w.spot.mouseEnabled=!1,w.spot.mouseChildren=!1,A.zimHScall=P.call,A.zimHSEvent=A.on(c,S,!0),i||(A.zimHSMDEvent=A.on("mousedown",function(R){R.stopImmediatePropagation()})),A.cur("pointer"))}function S(P){P.stopImmediatePropagation&&P.stopImmediatePropagation(),le.event&&(le.event.cancelBubble=!0),typeof P.currentTarget.zimHScall=="function"&&P.currentTarget.zimHScall(P)}this.add=this.addHotSpot=function(P,A,R,T,L,I){v={page:P,rect:A,call:R,callOver:T,callOut:L,talk:I},t.push(v),E(v)},this.show=function(){for(var P=0;P<b.length;P++)w=b[P],w.button||(w.spot.alpha=.2)},this.hide=function(){for(var P=0;P<b.length;P++)w=b[P],w.spot.alpha=0},this.remove=this.removeHotSpots=function(P,A){for(var R=t.length-1;R>=0;R--)v=t[R],w=b[R],A&&!Array.isArray(A)&&(A=[A.x,A.y,A.getBounds().width,A.getBounds().height]),(n(P)&&n(A)||n(A)&&P==v.page||n(P)&&e.arraysEqual(A,v.rect)||P==v.page&&e.arraysEqual(A,v.rect))&&(t.splice(R,1),w.button&&(w.button.off(c,w.button.zimHSEvent),w.button.zimHSEvent=null,i||(w.button.off("mousedown",w.button.zimHSMDEvent),w.button.zimHSMDEvent=null)),w.off(c,S),w.dispose(),b.splice(R,1))},this.dispose=function(){for(var P=0;P<b.length;P++)w=b[P],w.button&&(w.button.off(c,w.button.zimHSEvent),w.button.zimHSCall=null,w.button.zimHSEvent=null,i||(w.button.off("mousedown",w.button.zimHSMDEvent),w.button.zimHSMDEvent=null)),w.off(c,S),w.dispose();return!0}},e.extend(e.HotSpots,e.Container,"dispose","zimContainer",!1),e.HotSpot=function(t,r,i,o,l,c,p,v,w,b){var _="obj, x, y, width, height, call, callOver, callOut, local, talk",E;if(E=vt(e.HotSpot,arguments,_,this))return E;if(He("73"),this.zimContainer_constructor(null,null,null,null,!1),this.type="HotSpot",n(t)||!t.addChild){lt("zim controls - HotSpot():\nPlease pass in container object for obj");return}if(!(t instanceof $e.Container)){lt("zim controls - HotSpot():\nObjects passed in should be Containers");return}if(n(r)||n(i)||n(o)||n(l)){lt("zim controls - HotSpot():\nPlease pass in x, y, width, height");return}n(w)&&(w=!0);var S=(Mt?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",P=o,A=l,R,T,L;if(w)R=new e.Point(r,i),T=o,L=l;else{R=t.globalToLocal(r,i);var I=t.globalToLocal(r+P,i+A);T=I.x-R.x,L=I.y-R.y}var C=new e.Shape(o,l);if(C.talk=n(b)?"HotSpot":b,C.alpha=0,C.graphics.f("black").dr(0,0,T,L),C.x=R.x,C.y=R.y,C.cur("pointer"),C.expand(0),this.spot=C,typeof c=="function")var k=C.on(S,function(G){c(G)});if(typeof p=="function")var Y=C.on("mouseover",function(G){p(G)});if(typeof v=="function")var W=C.on("mouseout",function(G){v(G)});t.addChild(C),this.show=function(){C.alpha=.5,t.stage&&t.stage.update()},this.hide=function(){C.alpha=0,t.stage&&t.stage.update()},this.dispose=function(){return k&&C.off(S,Y),Y&&C.off("mouseover",Y),W&&C.off("mouseout",W),t.removeChild(C),C=null,!0}},e.extend(e.HotSpot,e.Container,"dispose","zimContainer",!1),e.Guide=function(t,r,i,o,l,c,p,v){var w="obj, vertical, pixels, hideKey, pixelKey, style, group, inherit",b;if(b=vt(e.Guide,arguments,w,this))return b;He("76"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Guide",this.group=p;var _=c===!1?{}:e.getStyle(this.type,this.group,v);if(n(t)&&(le.zdf?t=le.zdf.stage:t="stage"),n(r)&&(r=_.vertical!=null?_.vertical:!0),t!="stage"&&(!t.addChild||!t.getBounds||!t.getBounds())){Nn("zim controls - Guide(): Please provide container with bounds for the obj (setBounds())");return}n(i)&&(i=_.pixels!=null?_.pixels:!(zdf&&zdf.scaling=="full")),n(o)&&(o=_.hideKey!=null?_.hideKey:"G"),n(l)&&(l=_.pixelKey!=null?_.pixelKey:"P");var E=this,S,P=80,A=26,R=P/6+P/2,T=A*2,L,I,C;r?(C=k("#00c5af","white","white"),C.shape.regX=P+P/6,C.shape.regY=A/2,C.label.x=-P/2-P/6):(C=k("#d61fa0","white","white"),C.shape.regX=P/2,C.shape.regY=A+A/4,C.label.y=-A*3/4);function k(Q,U,g){var d=new e.Container({style:!1});return d.shape=new e.Shape,d.shape.graphics.s(U).ss(1).f(Q).r(0,0,P,A),d.shape.alpha=.9,d.addChild(d.shape),d.label=new $e.Text("10","16px arial",g),d.label.textAlign="center",d.label.textBaseline="middle",d.addChild(d.label),d.mouseChildren=!1,d.mouseEnabled=!1,d}var Y;t!="stage"&&t.addChild(E);var W=e.added(E,X),G=!1,F,B,q,Z;function X(){if(t=="stage"?(Y=E.stage,t=Y):Y=t.stage,Y.frame&&Y.frame.scaling=="full"){if(!e.globalManager){var Q=e.globalManager=new e.Manager;Q.frame=Y.frame,Q.event=Y.frame.on("resize",function(){Q.resize()})}e.globalManager.add(E)}t.addChild(E),F=t.getBounds().width,B=t.getBounds().height,r?(C.y=B/2,C.label.text="x:"+(E.pixels?Math.round(F*70/100):"70%")):(C.x=F/2,C.label.text="y:"+(E.pixels?Math.round(B*70/100):"70%")),q=new e.Shape,E.addChild(q),r?q.x=F*.7:q.y=B*.7,G||(t.addChild(E),re()),Y.off("stagemousemove",S),S=Y.on("stagemousemove",$),Y.update()}var ne={x:0,y:0};function $(Q){var U,g;Q?(U=t.globalToLocal(Q.rawX/e.scaX,Q.rawY/e.scaY),ne=U):U={x:ne.x,y:ne.y},i?r?(g=Math.round(Math.abs(U.x-q.x)),C.label.text="x:"+Math.max(0,Math.min(g,Math.round(F))),C.y=Math.max(T,Math.min(U.y,I))):(g=Math.round(Math.abs(U.y-q.y)),C.label.text="y:"+Math.max(0,Math.min(g,Math.round(B))),C.x=Math.max(R,Math.min(U.x,L))):r?(g=Math.round(Math.abs(U.x-q.x)/F*100),C.label.text="x:"+Math.max(0,Math.min(g,100))+"%",C.y=Math.max(T,Math.min(U.y,I))):(g=Math.round(Math.abs(U.y-q.y)/B*100),C.label.text="y:"+Math.max(0,Math.min(g,100))+"%",C.x=Math.max(R,Math.min(U.x,L))),Y&&Y.update()}function re(){G=!0,F=t.getBounds().width,B=t.getBounds().height;var Q;r?(Q="ew-resize",Z=new $e.Rectangle(0,0,F,0)):(Q="ns-resize",Z=new $e.Rectangle(0,0,0,B)),e.noDrag(q),setTimeout(function(){e.drag(q,Z,null,Q,Q,null,null,!0)},500),Y.mouseMoveOutside=!0,Y.enableMouseOver(10),L=F-P*2/3,I=B-A-A,q.uncache();var U=q.graphics;r?(U.c().s("rgba(0,255,255,.1)").ss(20).mt(0,0).lt(0,B),U.f().s("white").ss(2).mt(0,0).lt(0,B),U.s("#00c5af").sd([20,20]).mt(0,0).lt(0,B).sd(),q.cache(-10,0,20,B)):(U.c().s("rgba(255,0,255,.1)").ss(20).mt(0,0).lt(F,0),U.f().s("white").ss(2).mt(0,0).lt(F,0),U.s("#d61fa0").sd([20,20]).mt(0,0).lt(F,0).sd(),q.cache(0,-10,F,20)),r?C.x=F:C.y=B,E.addChild(C)}Object.defineProperty(this,"pixels",{get:function(){return i},set:function(Q){i=Q,E.resize()}}),le.addEventListener("keydown",de);function de(Q){Q||(Q=event),Y&&(String.fromCharCode(Q.keyCode)==o.toUpperCase()&&E.toggle(),String.fromCharCode(Q.keyCode)==l.toUpperCase()&&(E.pixels=!E.pixels))}this.toggled=!0,this.toggle=function(Q){return Q===!0?E.visible=E.toggled=!0:Q===!1?E.visible=E.toggled=!1:(E.visible=!E.visible,E.toggled=E.visible),Y&&(Y.off("stagemousemove",S),E.visible&&(S=Y.on("stagemousemove",$,E)),Y.update()),E},this.resize=function(){return E?(Y&&(re(),$()),!0):!1},c!==!1&&e.styleTransforms(this,_),this.dispose=function(){if(!E)return!1;if(e.globalManager){var Q=e.globalManager;Q.remove(E),e.globalManager.items.length==0&&(Q.frame.off("resize",Q.event),Q.dispose(),e.globalManager=null)}return e.noDrag(q),clearInterval(W),E.removeAllChildren(),le.removeEventListener("keydown",de),E.parent&&E.parent.removeChild(E),E=null,!0}},e.extend(e.Guide,e.Container,"clone","zimContainer",!1),e.Grid=function(t,r,i,o,l,c,p,v,w,b,_){var E="obj, color, pixels, hideKey, pixelKey, allowToggle, cache, numbers, style, group, inherit",S;if(S=vt(e.Grid,arguments,E,this))return S;He("78"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Grid",this.group=b;var P=w===!1?{}:e.getStyle(this.type,this.group,_);if(n(t)&&(le.zdf?t=le.zdf.stage:t="stage"),n(r)&&(r=P.color!=null?P.color:e.black),t!="stage"&&(!t.addChild||!t.getBounds||!t.getBounds())){Nn("zim controls - Grid(): Please provide container with bounds for the obj (setBounds())");return}n(i)&&(i=P.pixels!=null?P.pixels:!(zdf&&zdf.scaling=="full")),n(o)&&(o=P.hideKey!=null?P.hideKey:"G"),n(l)&&(l=P.pixelKey!=null?P.pixelKey:"P"),n(c)&&(c=P.allowToggle!=null?P.allowToggle:!0),n(p)&&(p=P.cache!=null?P.cache:!0),n(v)&&(v=P.numbers!=null?P.numbers:!0);var A=this,R=10,T;this.mouseChildren=!1,this.mouseEnabled=!1;var L=80,I=26,C=A.numbersX=Y("#dddddd",r,"#333333");C.shape.regX=L/2,C.shape.regY=-I/4,C.label.y=I*3/4;var k=A.numbersY=Y("#dddddd",r,"#333333");k.shape.regX=-L/6,k.shape.regY=I/2,k.label.x=L/2+L/6,v||(C.visible=!1,k.visible=!1);function Y(h,x,j){var O=new e.Container({style:!1});return O.shape=new $e.Shape,O.shape.graphics.s(x).ss(1).f(h).r(0,0,L,I),O.shape.alpha=.9,O.addChild(O.shape),O.label=new $e.Text("10","16px arial",j),O.label.textAlign="center",O.label.textBaseline="middle",O.addChild(O.label),O.mouseChildren=!1,O.mouseEnabled=!1,O}var W=L/6+L/2,G=I*2,F,B;C.x=W,k.y=G,C.label.text="x:0",k.label.text="y:0";var q;t!="stage"&&t.addChild(A);var Z=e.added(A,ne),X=!1;function ne(){if(t=="stage"?(q=A.stage,t=q):q=t.stage,q.frame&&q.frame.scaling=="full"){if(!e.globalManager){var h=e.globalManager=new e.Manager;h.frame=q.frame,h.event=q.frame.on("resize",function(){h.resize()})}e.globalManager.add(A)}X||(g(),t.addChild(A)),q.off("stagemousemove",T),T=q.on("stagemousemove",re),q.update()}var $={x:0,y:0};function re(h){var x;h?(x=t.globalToLocal(h.rawX/e.scaX,h.rawY/e.scaY),$=x):x={x:$.x,y:$.y},i?(C.label.text="x:"+Math.max(0,Math.min(Math.round(x.x),Math.round(de))),C.x=Math.max(W,Math.min(x.x,F)),k.label.text="y:"+Math.max(0,Math.min(Math.round(x.y),Math.round(Q))),k.y=Math.max(G,Math.min(x.y,B))):(C.label.text="x:"+Math.max(0,Math.min(Math.round(x.x/de*100),100))+"%",C.x=Math.max(W,Math.min(x.x,F)),k.label.text="y:"+Math.max(0,Math.min(Math.round(x.y/Q*100),100))+"%",k.y=Math.max(G,Math.min(x.y,B))),q&&q.update()}var de,Q,U;function g(){X=!0,t&&t.getBounds&&(de=t.getBounds().width,Q=t.getBounds().height),q&&(q.mouseMoveOutside=!0,q.enableMouseOver(10)),F=de-L*2/3,B=Q-I-I,U=A.grid=new e.Container({style:!1}),A.addChild(U);var h=new $e.Shape;U.addChild(h);var x=h.graphics;x.s(r).ss(1);var j=new $e.Shape;U.addChild(j);var O;if(i){for(O=0;O<de/R;O++)x.mt(O*R,0).lt(O*R,Q);for(O=0;O<Q/R;O++)x.mt(0,O*R).lt(de,O*R);for(h.alpha=.3,x=j.graphics,x.s(r).ss(1),O=0;O<de/(R*10);O++)x.mt(O*(R*10),0).lt(O*(R*10),Q);for(O=0;O<Q/(R*10);O++)x.mt(0,O*(R*10)).lt(de,O*(R*10))}else{for(O=1;O<20+1;O++)x.mt(O*de/20,0).lt(O*de/20,Q);for(O=1;O<20;O++)x.mt(0,O*Q/20).lt(de,O*Q/20);for(h.alpha=.3,x=j.graphics,x.s(r).ss(1),O=1;O<10;O++)x.mt(O*de/10,0).lt(O*de/10,Q);for(O=1;O<10;O++)x.mt(0,O*Q/10).lt(de,O*Q/10)}var V=80;x.s("#FFFFFF").ss(8),x.mt(de/2,Q/2-V/2).lt(de/2,Q/2+V/2),x.mt(de/2-V/2,Q/2).lt(de/2+V/2,Q/2),x.s("#000000").ss(4),x.mt(de/2,Q/2-V/2).lt(de/2,Q/2+V/2),x.mt(de/2-V/2,Q/2).lt(de/2+V/2,Q/2),x.s(r).ss(p?3:2),x.dr(0,0,de,Q),j.alpha=.5,p&&U.cache(0,0,de,Q),A.addChild(C),A.addChild(k),q&&q.update()}Object.defineProperty(this,"pixels",{get:function(){return i},set:function(h){i=h,A.resize()}}),le.addEventListener("keydown",d);function d(h){h||(h=event),!(!q||!c)&&(String.fromCharCode(h.keyCode)==o.toUpperCase()&&A.toggle(),String.fromCharCode(h.keyCode)==l.toUpperCase()&&(A.removeChild(U),U=null,A.pixels=!A.pixels))}this.toggled=!0,this.toggle=function(h){return h===!0?A.visible=A.toggled=!0:h===!1?A.visible=A.toggled=!1:(A.visible=!A.visible,A.toggled=A.visible),q.off("stagemousemove",T),A.visible&&(T=q.on("stagemousemove",re,A)),q&&q.update(),A},this.resize=function(){return A?(A.removeChild(U),U=null,q&&(g(),re(),setTimeout(function(){A&&A.removeChild(U),U=null,g()},200)),!0):!1},w!==!1&&e.styleTransforms(this,P),this.dispose=function(){if(e.globalManager){var h=e.globalManager;h.remove(A),e.globalManager.items.length==0&&(h.frame.off("resize",h.event),h.dispose(),e.globalManager=null)}return clearInterval(Z),A.removeAllChildren(),le.removeEventListener("keydown",d),A.parent&&A.parent.removeChild(A),A=null,!0}},e.extend(e.Grid,e.Container,"clone","zimContainer",!1),e.Wrapper=function(t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,T,L,I,C,k,Y,W,G){var F="items, width, spacingH, spacingV, wrapperType, align, valign, alignInner, valignInner, flip, reverse, bottomFull, colSize, rowSize, height, minSpreadNum, minStretchNum, percentVoidH, offsetVoidH, percentVoidV, offsetVoidV, style, group, inherit",B=null;if(B=vt(e.Wrapper,arguments,F,this))return B;He("78.5"),this.group=W;var q=Y===!1?{}:e.getStyle("Wrapper",this.group,G);n(r)&&(r=q.width!=null?q.width:300),n(A)&&(A=q.height!=null?q.height:null),n(i)&&(i=q.spacingH!=null?q.spacingH:null),n(o)&&(o=q.spacingV!=null?q.spacingV:null),n(l)&&(l=q.wrapperType!=null?q.wrapperType:"spacing"),n(c)&&(c=q.align!=null?q.align:"left"),n(p)&&(p=q.valign!=null?q.valign:"top"),n(v)&&(v=q.alignInner!=null?q.alignInner:"left"),n(w)&&(w=q.valignInner!=null?q.valignInner:"bottom"),n(b)&&(b=q.flip!=null?q.flip:!1),n(_)&&(_=q.reverse!=null?q.reverse:!1),n(E)&&(E=q.bottomFull!=null?q.bottomFull:!1),n(S)&&(S=q.colSize!=null?q.colSize:100),n(P)&&(P=q.rowSize!=null?q.rowSize:null),n(i)&&(i=0),n(o)&&(o=0),n(R)&&(R=q.minSpreadNum!=null?q.minSpreadNum:2),n(T)&&(T=q.minStretchNum!=null?q.minStretchNum:3),n(L)&&(L=q.percentVoidH!=null?q.percentVoidH:0),n(I)&&(I=q.offsetVoidH!=null?q.offsetVoidH:0),n(C)&&(C=q.percentVoidV!=null?q.percentVoidV:0),n(k)&&(k=q.offsetVoidV!=null?q.offsetVoidV:0);var Z=200,X=0,ne=0,$=0,re=r;this.items=[];var de,Q;l=="spread"?de=!0:l=="stretch"&&(Q=!0),this.zimContainer_constructor(r,Z),this.type="Wrapper",c=="middle"&&(c="center"),p=="middle"&&(p="center"),v=="middle"&&(v="center"),w=="middle"&&(w="center");var U=this;this.add=function(d){return this.addAt(d,this.numChildren-1),U},this.addAt=function(d,h){return n(d)||((n(h)||h<0)&&(h=0),Array.isArray(d)||(d=[d]),e.loop(d,function(x,j){U.addChildAt(x,h+j)}),U.resize()),U},this.remove=function(d){return Array.isArray(d)||(d=[d]),e.loop(d,function(h){h&&h.removeFrom&&h.removeFrom()},!0),U.resize(),U},this.convert=function(d,h){var x=[];return d.loop(function(j){x.push(j),h&&j.cache()}),U.add(x),d.removeFrom(),U},this.resize=function(d,h){if(!U.preventResize){n(d)||(r=d),n(h)||(A=h),this.items2D=[],this.items=[],X=0,ne=0,$=0,n(L)&&(L=0),n(I)&&(I=0);var x=e.Pick.choose(L),j=e.Pick.choose(I);re=r*(100-x)/100,this.setBounds(re,Z);var O=0,V=0,ce=0;U.cols=0,U.rows=0;var H=[],N=[0],ue=null,fe=0,ae=null,Ie=e.Pick.choose(S);l!="column"&&(Ie=null);var ge=e.Pick.choose(P),Be=0,z,Ye;e.loop(this,function(be,he){E||b?be.pos(O+(be.marginRight?be.marginRight:0),V+(be.marginTop?be.marginTop:0),e.RIGHT,b?e.TOP:e.BOTTOM):be.pos(O+(be.marginLeft?be.marginLeft:0),V+(be.marginTop?be.marginTop:0)),Be++,ae=be.boundsToGlobal();var Pe=U.globalToLocal(ae.x,ae.y),Re=U.globalToLocal(ae.x+ae.width,ae.y+ae.height);if(E||b?z=U.globalToLocal(ae.x,ae.y):z=U.globalToLocal(ae.x+ae.width,ae.y+ae.height),be.wrapHeight=Re.y-Pe.y,be.wrapWidth=Re.x-Pe.x,x){var ve=U.globalToLocal(ae.x+be.wrapWidth/2,ae.y+be.wrapHeight/2);be.centerX=ve.x,be.centerY=ve.y,ve=null}Ie?Ye=Ie*Be:E||b?Ye=re-z.x+(be.marginLeft?be.marginLeft:0)+i:Ye=z.x+(be.marginRight?be.marginRight:0)+i,Math.round(Ye)-i>re&&(g(H,ue,ce,fe,Ie,x,j,!1),fe=0,U.cols==0&&(U.cols=he),O=0,V+=ce+(ge?0:e.Pick.choose(o)),ce=0,ge=e.Pick.choose(P),x=e.Pick.choose(L),j=e.Pick.choose(I),Be=0,U.items2D.push(e.copy(H)),U.rows++,N.push(V),H=[],E||b?be.pos(O+(be.marginRight?be.marginRight:0),V+(be.marginTop?be.marginTop:0),e.RIGHT,b?e.TOP:e.BOTTOM):be.pos(O+(be.marginLeft?be.marginLeft:0),V+(be.marginTop?be.marginTop:0)),x&&(ae=be.boundsToGlobal(),ve=U.globalToLocal(ae.x+be.wrapWidth/2,ae.y+be.wrapHeight/2),be.centerX=ve.x,be.centerY=ve.y,ve=null),Be++,Ie?Ye=0:(Ye=(be.marginLeft?be.marginLeft:0)+be.wrapWidth+(be.marginRight?be.marginRight:0)+e.Pick.choose(i),E||b?z.x=re-((be.marginRight?be.marginRight:0)+be.wrapWidth):z.x=(be.marginLeft?be.marginLeft:0)+be.wrapWidth)),H.push(be),fe+=be.wrapWidth,O=Ye,ge?ce=ge:ce=Math.max(ce,be.wrapHeight+(be.marginTop?be.marginTop:0)+(be.marginBottom?be.marginBottom:0)),ue=new e.Point(z.x,V+ce)},_&&E?!1:_||E),U.numChildren>0&&(U.cols==0&&(U.cols=U.numChildren),U.items2D.push(e.copy(H)),N.push(V),g(H,ue,ce,fe,Ie,x,j,!0),U.rows+=1);var te=e.Pick.choose(p),K;n(te)&&(te="top"),E&&(K=V+ce-Z,e.loop(this,function(be){be.mov(0,K)}),U.items2D.reverse(),e.loop(U.items2D,function(be){be.reverse()}));var xe=e.Pick.choose(C),_e=e.Pick.choose(k);if(!n(xe)){n(_e)&&(_e=0);var Se=V+ce,ie=Se*xe/100,pe=Se/2+_e/100*Se;e.loop(N,function(be,he){if(be>=pe)return e.loop(U.items2D,function(Pe){e.loop(Pe,function(Re){Re.mov(0,ie)})},null,1,he),"break"})}return n(A)||(p=="bottom"?(K=A-(V+ce),e.loop(this,function(be){be.mov(0,K)})):(p=="center"||p=="middle")&&(K=(A-(V+ce))/2,e.loop(this,function(be){be.mov(0,K)}))),U.setBounds(null),ae=U.getBounds(),ae&&U.setBounds(0,ae.y,r,ae.height),e.loop(U.items2D,function(be){e.loop(be,function(he){U.items.push(he)})}),this.stage&&this.stage.update(),U}};function g(d,h,x,j,O,V,ce,H){var N=e.Pick.choose(c),ue=e.Pick.choose(de),fe=e.Pick.choose(Q),ae=e.Pick.choose(b),Ie=e.Pick.choose(v),ge=e.Pick.choose(w);n(N)&&(N="left"),n(ge)&&(ge="top"),n(Ie)&&(Ie="left"),ae&&d.reverse();var Be=((100-V)/100/2+ce/100)*r,z=r*V/100,Ye=0,te=!1,K,xe;if(O){(E||b)&&d.reverse();var _e=re%O,Se=re/2+ce/100*re,ie=0,pe=0,be=Math.floor(re/O);U.rows!=0&&H&&(te=!0),e.loop(d,function(Ae,ye){Ye=0,Ie=="right"?pe=O*ye+ie+O-Ae.wrapWidth:Ie=="center"||Ie=="middle"?pe=O*ye+ie+(O-Ae.wrapWidth)/2:pe=O*ye+ie,K=Ae.x,Ae.pos(pe),xe=Ae.x-K,Ae.centerX+=xe,Ae.marginLeft&&(Ye+=Ae.marginLeft),Ae.marginRight&&(Ye-=Ae.marginRight);var Fe;N=="center"||N=="middle"?(Fe=Math.floor(re/O)-d.length,Ye+=(_e+(Fe?Fe*O:0))/2):N=="right"&&(Fe=Math.floor(re/O)-d.length,Ye+=_e+(Fe?Fe*O:0)),Ae.mov(Ye),Ae.centerX+=Ye}),N=="center"&&te&&(d.length+be)%2!=0&&(Ye=(Se<=re/2?-1:1)*O/2,e.loop(d,function(Ae){Ae.mov(Ye),Ae.centerX+=Ye}))}else if(ue||fe){var he,Pe;ue?he=d.length?(re-j)/(d.length+1):0:fe&&(he=d.length-1>0?(re-j)/(d.length-1):0),d.length<T&&U.rows!=0&&H&&(he=$,te=!0),$=he;var Re=0;if((E||b)&&d.reverse(),e.loop(d,function(Ae,ye){Ye=0,K=Ae.x,Ae.pos(he*(ye+(ue?1:0))+Re),xe=Ae.x-K,Ae.centerX+=xe,te||(Ae.marginLeft&&(Ye+=Ae.marginLeft),Ae.marginRight&&(Ye-=Ae.marginRight),Ae.mov(Ye),Ae.centerX+=Ye),Re+=Ae.wrapWidth}),te){Ye=0;var ve=ue?he:0;xe=0,e.loop(d,function(Ae){if(N=="right")K=Ae.x,Ae.pos(ve,null,e.RIGHT),xe=Ae.x-K,ve+=Ae.wrapWidth+he;else if(N=="center"){var ye=(re-(Re+(d.length-1)*he))/2-(ue?he:0);K=Ae.x,Ae.pos(ve+ye,null,e.RIGHT),xe=Ae.x-K,ve+=Ae.wrapWidth+he}Ae.marginLeft&&(Ye+=Ae.marginLeft),Ae.marginRight&&(Ye-=Ae.marginRight),Ae.mov(Ye),Ae.centerX+=xe+Ye},!0)}}else N=="center"?e.loop(d,function(Ae){Ye=((E||b?0:r)-h.x)/2,(ue||fe)&&(Ae.marginLeft&&(Ye+=Ae.marginLeft),Ae.marginRight&&(Ye-=Ae.marginRight)),Ae.mov(Ye),Ae.centerX+=Ye}):(E||b)&&N=="left"?(Pe=d[d.length-1].marginLeft,e.loop(d,function(Ae){Ye=-h.x+(Pe||0),ue&&(Ye+=ne),Ae.mov(Ye),Ae.centerX+=Ye})):!(E||b)&&N=="right"?(Pe=d[d.length-1].marginRight,e.loop(d,function(Ae){Ye=r-h.x-(Pe||0),ue&&(Ye-=ne),Ae.mov(Ye),Ae.centerX+=Ye})):ue&&ue&&e.loop(d,function(Ae){Ye=ne*(N=="right"?-1:1),Ae.mov(Ye),Ae.centerX+=Ye});V&&(Be=(1/2+ce/100)*re,z=r*V/100,e.loop(d,function(Ae){O||fe||ue?N=="right"?Ae.centerX>re-Be&&Ae.mov(z):N=="center"?Math.round(Ae.centerX)==Math.round(re/2+ce/100*re)?Ae.mov(z/2):Math.round(Ae.centerX)>Math.round(re/2+ce/100*re)&&Ae.mov(z):Ae.centerX>Be&&Ae.mov(z):!(E||b)&&N=="right"?Ae.centerX<r-Be&&Ae.mov(-z):!(E||b)&&N=="center"?Ae.centerX>r/2+ce/100*re?Ae.mov(z/2):Ae.mov(-z/2):(E||b)&&N=="right"?Ae.centerX>re-Be&&Ae.mov(z):(E||b)&&N=="center"?Ae.centerX>re/2+ce/100*re&&Ae.mov(z):Ae.centerX>Be&&Ae.mov(z)})),ue&&(X+=he,ne=X/(U.rows+1)),ge=="center"?e.loop(d,function(Ae){Ae.mov(0,(x-Ae.wrapHeight)/2*(E?-1:1))}):!E&&ge=="bottom"?e.loop(d,function(Ae){Ae.mov(0,x-Ae.wrapHeight-(Ae.marginBottom?Ae.marginBottom:0))}):E&&ge=="top"&&e.loop(d,function(Ae){Ae.mov(0,-(x-Ae.wrapHeight)+(Ae.marginTop?Ae.marginTop:0))})}Object.defineProperty(U,"spacingH",{get:function(){return i},set:function(d){i=d,this.resize()}}),Object.defineProperty(U,"spacingV",{get:function(){return o},set:function(d){o=d,this.resize()}}),Object.defineProperty(U,"wrapperType",{get:function(){return l},set:function(d){d=="spread"?de=!0:de=!1,d=="stretch"?Q=!0:Q=!1,l=d,this.resize()}}),Object.defineProperty(U,"align",{get:function(){return c},set:function(d){c=d,c=="middle"&&(c="center"),this.resize()}}),Object.defineProperty(U,"valign",{get:function(){return p},set:function(d){p=d,p=="middle"&&(p="center"),this.resize()}}),Object.defineProperty(U,"alignInner",{get:function(){return v},set:function(d){v=d,v=="middle"&&(v="center"),this.resize()}}),Object.defineProperty(U,"valignInner",{get:function(){return w},set:function(d){w=d,w=="middle"&&(w="center"),this.resize()}}),Object.defineProperty(U,"colSize",{get:function(){return S},set:function(d){S=d,l=="column"&&this.resize()}}),Object.defineProperty(U,"rowSize",{get:function(){return P},set:function(d){P=d,this.resize()}}),Object.defineProperty(U,"flip",{get:function(){return b},set:function(d){b=d,this.resize()}}),Object.defineProperty(U,"reverse",{get:function(){return _},set:function(d){_=d,this.resize()}}),Object.defineProperty(U,"bottomFull",{get:function(){return E},set:function(d){E=d,this.resize()}}),Object.defineProperty(U,"percentVoidH",{get:function(){return L},set:function(d){L=d,this.resize()}}),Object.defineProperty(U,"offsetVoidH",{get:function(){return I},set:function(d){I=d,this.resize()}}),Object.defineProperty(U,"percentVoidV",{get:function(){return C},set:function(d){C=d,this.resize()}}),Object.defineProperty(U,"offsetVoidV",{get:function(){return k},set:function(d){k=d,this.resize()}}),n(t)||U.add(t),Y!==!1&&e.styleTransforms(this,q),this.clone=function(){var d=U.cloneProps(new e.Wrapper(t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,T,L,I,C,k,this.style,this.group));return d}},e.extend(e.Wrapper,e.Container,"clone","zimContainer",!1),e.Tile=function(t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,T,L,I,C,k,Y,W,G){var F="obj, cols, rows, spacingH, spacingV, unique, width, height, squeezeH, squeezeV, colSize, rowSize, align, valign, count, mirrorH, mirrorV, snapToPixel, clone, events, exact, style, group, inherit",B;if(B=vt(e.Tile,arguments,F,this))return B;He("66.5"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Tile",this.group=W;var q=Y===!1?{}:e.getStyle(this.type,this.group,G);n(t)&&(t=q.obj!=null?q.obj:new e.Circle),n(r)&&(r=q.cols!=null?q.cols:1121),n(i)&&(i=q.rows!=null?q.rows:1121);var Z;r==1121&&i==1121?r=i=Z=3:r==1121?r=1:i==1121&&(i=1),n(c)&&(c=q.unique!=null?q.unique:!1),n(p)&&(p=q.width!=null?q.width:null),n(v)&&(v=q.height!=null?q.height:null),n(_)&&(_=q.colSize!=null?q.colSize:null),n(E)&&(E=q.rowSize!=null?q.rowSize:null),n(p)||(_=null),n(v)||(E=null),n(o)&&(o=q.spacingH!=null?q.spacingH:Z?3:null),n(l)&&(l=q.spacingV!=null?q.spacingV:Z?3:null),(n(o)||!n(_))&&(o=0),(n(l)||!n(E))&&(l=0),n(w)&&(w=q.squeezeH!=null?q.squeezeH:!1),n(b)&&(b=q.squeezeV!=null?q.squeezeV:!1),n(S)&&(S=q.align!=null?q.align:"left"),n(P)&&(P=q.valign!=null?q.valign:"top"),n(A)&&(A=q.count!=null?q.count:c&&Array.isArray(t)?t.length:null),A===0&&(A=null,Ct&&lt("ZIM Tile() - count parameter of 0 is ignored - see docs")),n(R)&&(R=q.mirrorH!=null?q.mirrorH:!1),n(T)&&(T=q.mirrorV!=null?q.mirrorV:!1),n(L)&&(L=q.snapToPixel!=null?q.snapToPixel:!0),L&&(t&&t.stage?t.stage.snapToPixelEnabled=!0:typeof elem<"u"&&le.zdf&&(le.zdf.stage.snapToPixelEnabled=!0)),n(I)&&(I=q.clone!=null?q.clone:c?!1:null),I==null&&(I=!(typeof t=="function"&&t.type!="series")),n(C)&&(C=q.events!=null?q.events:!0);var X=this;X.cols=r=Math.round(r),X.rows=i=Math.round(i),X.spacingH=o,X.spacingV=l,X.squeezeH=w,X.squeezeV=b;var ne=typeof S=="function",$=typeof P=="function";X.align=ne?"left":S,X.valign=$?"top":P,X.mirrorH=R,X.mirrorV=T,X.items=[];var re,de=0,Q=!1;e:for(var U=0;U<i;U++)for(var g=0;g<r;g++){if(de++,!n(A)&&de>A)break e;re=c?t[de-1]:e.Pick.choose(t),typeof re=="string"&&(re=le.asset(re).centerReg({add:!1}).clone()),n(re)&&(re=new e.Container(0,0,0,0)),I&&(U!=0||g!=0)&&(re=re.clone(k)),C&&re.on("change",function(ie){var pe=new $e.Event("change");pe.item=ie.currentTarget,X.dispatchEvent(pe)}),X.items.push(re),re.type=="AC"&&(Q=!0),re.tileNum=de-1,re.tileCol=g,re.tileRow=U}Q&&Ct&&lt("ZIM Tile - assets must have dimensions for Tile");var d,h,x,j,O,V,ce,H,N,ue,fe,ae,Ie,ge;function Be(){X.removeAllChildren(),d=[],h=[],x=[],j=[],O=[],V=0,ce=0,H=0,N=0,ue=[],fe=[],ae=[],ge=[],Ie=[],(!X.items||!X.items.length)&&(X.items=[]),A=X.items.length;var ie=0,pe,be,he=0,Pe=0,Re,ve;for(be=0;be<A;be++)he=Math.floor(be/X.cols),Pe=be%X.cols,n(d[he])&&(d[he]=[]),n(X.items[be])&&(X.items[be]=new e.Container(0,0,0,0)),d[he][Pe]=X.items[be];X.rows=Math.max(1,d.length),X.cols=Math.max(1,n(d[0])?0:d[0].length);e:for(he=0;he<X.rows;he++)for(ue.push([]),fe.push([]),ge.push([]),E&&n(v)&&(Re=e.Pick.choose(E)),be=0;be<X.cols;be++){if(ie++,!n(A)&&ie>A)break e;pe=d[he][be],pe.snapToPixel=L,X.addChild(pe),ue[he].push(pe.scaleX),fe[he].push(pe.scaleY),_&&n(p)&&(ve=e.Pick.choose(_)),he==0&&Ie.push(e.Pick.choose(S)),(!_||!n(p))&&(ve=Math.abs(pe.width)),(!E||!n(v))&&(Re=Math.abs(pe.height)),ge[he][be]=[ve,Re],n(j[be])&&(j[be]=0),n(O[he])&&(O[he]=0),ve>j[be]&&(j[be]=ve),Re>O[he]&&(O[he]=Re),n(h[he])&&(h[he]=0),n(x[be])&&(x[be]=0),h[he]+=ve,x[be]+=Re,h[he]>V&&(V=h[he]),x[be]>ce&&(ce=x[be]),n(ae[be])&&(ae[be]=0),ae[be]++}var Ae;if(X.squeezeH===!1)for(be=0;be<j.length;be++)Ae=j[be],H+=Ae;if(X.squeezeV===!1)for(be=0;be<O.length;be++)Ae=O[be],N+=Ae}Be();var z,Ye,te,K;function xe(ie,pe){ie<=0&&(ie=null),pe<=0&&(pe=null),!n(ie)&&X.squeezeH=="full"?z=ie:n(ie)?H>0?z=H+(X.cols-1)*X.spacingH:z=V+(X.cols-1)*X.spacingH:z=Math.max(V+(X.cols-1)*X.spacingH,ie),!n(pe)&&X.squeezeV=="full"?Ye=pe:n(pe)?N>0?Ye=N+(X.rows-1)*X.spacingV:Ye=ce+(X.rows-1)*X.spacingV:Ye=Math.max(ce+(X.rows-1)*X.spacingV,pe),X.setBounds(0,0,z,Ye);var be,he;te=[],K=[];var Pe=[];for(U=0;U<d.length;U++)for(be=d[U],he=0,g=0;g<be.length;g++){re=be[g];var Re,ve;if(U==0&&(te[g]=0,n(pe)||(X.squeezeV=="full"?K[g]=ae[g]>1?(pe-x[g])/(ae[g]-1):0:X.squeezeV?K[g]=ae[g]>1?Math.max(X.spacingV,(pe-x[g])/(ae[g]-1)):0:K[g]=ae[g]>1?Math.max(X.spacingV,(Ye-x[g])/(ae[g]-1)):0),X.squeezeV?X.valign=="center"||X.valign=="middle"?Pe[g]=(Ye-(x[g]+(ae[g]-1)*(n(pe)?X.spacingV:K[g])))/2:X.valign=="bottom"?Pe[g]=Ye-(x[g]+(ae[g]-1)*(n(pe)?X.spacingV:K[g])):Pe[g]=0:Pe[g]=0),g==0){n(ie)||(X.squeezeH=="full"?ve=be.length>1?(ie-h[U])/(be.length-1):0:X.squeezeH?ve=be.length>1?Math.max(X.spacingH,(ie-h[U])/(be.length-1)):0:ve=be.length>1?Math.max(X.spacingH,(z-h[U])/(be.length-1)):0),X.squeezeH?X.align=="center"||X.align=="middle"?Re=(z-(h[U]+(be.length-1)*(n(ie)?X.spacingH:ve)))/2:X.align=="right"?Re=z-(h[U]+(be.length-1)*(n(ie)?X.spacingH:ve)):Re=0:Re=0;var Ae=e.Pick.choose(P)}S=Ie[g];var ye=ge[U][g][0],Fe=ge[U][g][1];X.mirrorH&&g%2==1&&(re.scaleX=-ue[U][g]),re.pos(he,null),!X.squeezeH&&ne?n(ie)&&(S=="center"||S=="middle")?re.x+=(j[g]-re.width)/2:n(ie)&&S=="right"&&(re.x+=j[g]-re.width):X.squeezeH?n(ie)&&(X.align=="center"||X.align=="middle")?re.x+=(ye-re.width)/2:n(ie)&&X.align=="right"&&(re.x+=ye-re.width):n(ie)&&(X.align=="center"||X.align=="middle")?re.x+=(j[g]-re.width)/2:n(ie)&&X.align=="right"&&(re.x+=j[g]-re.width),X.mirrorV&&U%2==1&&(re.scaleY=-fe[U][g]),re.pos(null,te[g]),!X.squeezeV&&$?n(pe)&&(Ae=="center"||Ae=="middle")?re.y+=(O[U]-re.height)/2:n(pe)&&Ae=="bottom"&&(re.y+=O[U]-re.height):X.squeezeV?n(pe)&&(X.valign=="center"||X.valign=="middle")?re.y+=(Fe-re.height)/2:n(pe)&&X.valign=="bottom"&&(re.y+=Fe-re.height):n(pe)&&(X.valign=="center"||X.valign=="middle")?re.y+=(O[U]-re.height)/2:n(pe)&&X.valign=="bottom"&&(re.y+=O[U]-re.height),X.squeezeH===!0||!n(ie)?he+=ye+(n(ie)?X.spacingH:ve):he+=j[g]+(n(ie)?X.spacingH:ve),re.x+=Re,re.y+=Pe[g],X.squeezeV===!0||!n(pe)?te[g]+=Fe+(n(pe)?X.spacingV:K[g]):te[g]+=O[U]+(n(pe)?X.spacingV:K[g])}}xe(p,v),this.itemUnderPoint=function(ie,pe,be){if(n(be)&&(be=!0),!(n(ie)||n(pe))){var he=X.globalToLocal(ie,pe);ie=he.x,pe=he.y;var Pe=0,Re=e.loop(j,function(ye,Fe){if(Pe+=ye+X.spacingH,(!be||be=="vertical")&&ie>Pe-X.spacingH&&ie<Pe)return!1;if(ie<Pe-X.spacingH/2)return Fe});if(Re!==!1&&(Re===!0&&(Re=r-1),!(ie<0||ie>z||pe<0||pe>Ye))){var ve=0,Ae=e.loop(O,function(ye,Fe){var De=n(v)?X.spacingV:K[g];if((!be||be=="horizontal")&&pe>ve-De&&pe<ve)return!1;if(ve+=ye+De,pe<ve-De/2)return Fe});if(Ae!==!1)return Ae===!0&&(Ae=i-1),X.items2D[Ae][Re]}}},this.remake=function(ie){return n(ie)||(X.items=ie),Be(),xe(p,v),X},this.resize=function(ie,pe){return n(ie)&&(ie=p),n(pe)&&(pe=v),p=ie,v=pe,xe(ie,pe),X};function _e(ie){for(var pe=[],be,he=0;he<ie.length;he++)he%X.cols==0&&(be=[],pe.push(be)),be.push(ie[he]);return pe}function Se(ie){var pe=[],be;for(be=0;be<X.cols;be++)pe.push([]);for(be=0;be<ie.length;be++)pe[be%X.cols][Math.floor(be/X.cols)]=ie[be];return pe}Object.defineProperty(this,"items2D",{get:function(){return _e(X.items)},set:function(){Ct&&lt("Tile() - items2D is read only")}}),Object.defineProperty(this,"items2DCols",{get:function(){return Se(X.items)},set:function(){Ct&&lt("Tile() - items2DCols is read only")}}),Object.defineProperty(this,"current",{get:function(){var ie=[];return e.loop(X.items,function(pe){var be=pe.getBounds(),he=pe.x-pe.regX+be.x+be.width/2,Pe=pe.y-pe.regY+be.y+be.height/2,Re=X.hitTestGrid(X.width,X.height,X.cols,X.rows,he,Pe,null,null,X.spacingH,X.spacingV,!0,"open");Re!=null&&(ie[Re[0]]=pe)}),ie},set:function(){Ct&&lt("Tile() - current is read only")}}),Object.defineProperty(this,"current2D",{get:function(){return _e(X.current)},set:function(){Ct&&lt("Tile() - current2D is read only")}}),Object.defineProperty(this,"current2DCols",{get:function(){return Se(X.current)},set:function(){Ct&&lt("Tile() - current2DCols is read only")}}),Y!==!1&&e.styleTransforms(this,q),this.clone=function(ie){if(ie)for(var pe=[],be=0;be<X.items.length;be++)pe.push(X.items[be].clone(!0));return X.cloneProps(new e.Tile(ie?e.series(pe):t.clone?t.clone():t,X.cols,X.rows,X.spacingH,X.spacingV,c,p,v,X.squeezeH,X.squeezeV,_,E,S,P,X.items.length,X.mirrorH,X.mirrorV,L,ie?!1:I,C,ie,this.style,this.group))}},e.extend(e.Tile,e.Container,"clone","zimContainer",!1),e.Pack=function(t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,T,L,I,C,k,Y,W,G,F){var B="width, height, items, spacingH, spacingV, flatten, direction, lock, backgroundColor, align, valign, lastAlign, paddingH, paddingV, dragOrder, dragColor, dragThickness, dragDashed, reverse, funnel, showPacking, order, style, group, inherit",q;if(q=vt(e.Pack,arguments,B,this))return q;He("66.52"),this.group=G;var Z=W===!1?{}:e.getStyle("Pack",this.group,F);n(t)&&(t=Z.width!=null?Z.width:500),n(r)&&(r=Z.height!=null?Z.height:500),this.zimContainer_constructor(t,r),this.type="Pack",n(i)&&(i=Z.items!=null?Z.items:[new e.Rectangle(400,300,e.orange),new e.Rectangle(400,200,e.purple),new e.Rectangle(500,300,e.blue)]),n(o)&&(o=Z.spacingH!=null?Z.spacingH:10),n(l)&&(l=Z.spacingV!=null?Z.spacingV:10),n(c)&&(c=Z.flatten!=null?Z.flatten:"top"),n(p)&&(p=Z.direction!=null?Z.direction:"horizontal"),n(v)&&(v=Z.lock!=null?Z.lock:"auto"),n(w)&&(w=Z.backgroundColor!=null?Z.backgroundColor:e.clear),n(b)&&(b=Z.align!=null?Z.align:"center"),n(_)&&(_=Z.valign!=null?Z.valign:"center"),n(E)&&(E=Z.lastAlign!=null?Z.lastAlign:p=="horizontal"?"left":"top"),n(S)&&(S=Z.paddingH!=null?Z.paddingH:0),n(P)&&(P=Z.paddingV!=null?Z.paddingV:0),n(A)&&(A=Z.dragOrder!=null?Z.dragOrder:!1),n(R)&&(R=Z.dragColor!=null?Z.dragColor:e.white),n(T)&&(T=Z.dragThickness!=null?Z.dragThickness:2),n(L)&&(L=Z.dragDashed!=null?Z.dragDashed:!0),n(I)&&(I=Z.reverse!=null?Z.reverse:!1),n(C)&&(C=Z.funnel!=null?Z.funnel:!1),n(k)&&(k=Z.showPacking!=null?Z.showPacking:!1),n(Y)&&(Y=Z.order!=null?Z.order:null);var X=this;X.funnel=C;var ne=i.length,$=t-S*2,re=r-P*2,de=50;c===!1&&(c=NONE);var Q=this.backing=new Ln({width:t,height:r,color:w,scaleDimensions:!1}).addTo(this);if(X.items=e.copy(i),i.length<=0)return this;if(i.length==1)return g(i[0]),d(i[0]),this;var U=function(ve,Ae,ye){return ve.width>Ae.width?1:ve.width<Ae.width?-1:0};function g(ve){ve.scaleTo(Q,100-S/$*100*2,100-P/re*100*2),ve.scale*=X.scale,ve.scale<0&&(ve.scale=.05)}function d(ve){ve.pos(b!=CENTER&&b!=MIDDLE?S:0,_!=CENTER&&_!=MIDDLE?P:0,b,_,Q).addTo(X)}function h(ve){var Ae=[];e.loop(ve,function(ye,Fe){Ae[Fe]=X.items[ye]}),i=[],e.loop(Ae,function(ye){ye&&i.push(ye)})}var x=X.content=new e.Container,j,O,V,ce,H,N,ue,fe,ae,Ie,ge,Be,z,Ye;e.loop(i,function(ve,Ae){ve.zpRotation=ve.rotation,ve.zpIndex=Ae}),Y&&h(Y),p==VERTICAL&&te(!0);function te(ve){x.rotation=0;var Ae=r;r=t,t=Ae;var ye=re;re=$,$=ye;var Fe=l;l=o,o=Fe;var De=P;P=S,S=De,c==RIGHT?c=BOTTOM:c!=CENTER&&c!=NONE&&(c=TOP),E==BOTTOM?E=LEFT:E!=CENTER&&E!=MIDDLE&&(E=RIGHT),Q.dispose(),Q=new Ln(t,r,w).center(X),ve?(v==HORIZONTAL?v=VERTICAL:v==VERTICAL&&(v=HORIZONTAL),e.loop(i,function(ke,oe){var Ge=new e.Container(ke.height,ke.width);ke.rotation+=90,ke.pos(0,0,TOP,LEFT,Ge),i[oe]=Ge})):(v==HORIZONTAL?v=VERTICAL:v==VERTICAL&&(v=HORIZONTAL),x.rotation-=90,e.loop(i,function(ke,oe){var Ge=ke,We=ke.getChildAt(0).addTo(x).sca(Ge.scale);Ge.dispose(),i[oe]=We}))}var K=v;function xe(ve){v==AUTO&&(v=HORIZONTAL),j=Math.ceil(Math.sqrt(ne)),O=Math.ceil(ne/j),H=null,N=null,ue=0,Ye=null,fe=0,ae=0,Ie=null,ge=null,Be=null,z=null,Re(ve,j,O),Pe(x,j,O)}xe(i),_e();function _e(){if(g(x),d(x),c==NONE){e.loop(i,function(Fe){Fe.surrogate?(i.splice(i.indexOf(Fe),1),Fe.dispose()):Fe.bot()},!0);var ve=O*j-ne;if(c==NONE&&ve>0){var Ae=x.getChildAt(x.numChildren-1);if(p==HORIZONTAL&&!I&&E!=LEFT){var ye=x.getBounds().width-(Ae.x+(Ae.getBounds().x-Ae.regX)*Ae.scaleX+Ae.width);e.loop(j-ve,function(Fe){x.getChildAt(x.numChildren-Fe-1).mov(E==RIGHT?ye:ye/2)})}else if(p==HORIZONTAL&&I&&E!=RIGHT){var ye=Ae.x+(Ae.getBounds().x-Ae.regX)*Ae.scaleX;e.loop(j-ve,function(De){x.getChildAt(x.numChildren-De-1).mov(E==LEFT?-ye:-ye/2)})}else if(p==VERTICAL&&!I&&E!=RIGHT){var ye=Ae.x;e.loop(j-ve,function(De){x.getChildAt(x.numChildren-De-1).mov(E==LEFT?-ye:-ye/2)})}else if(p==VERTICAL&&I&&E!=LEFT){var ye=x.getBounds().width-Ae.x;e.loop(j-ve,function(De){x.getChildAt(x.numChildren-De-1).mov(E==RIGHT?ye:ye/2)})}}}p==VERTICAL&&(te(!1),g(x),d(x)),X.cols=j,X.rows=O,X.iterations=ue-2,X.currentItems=i,X.dispatchEvent("change")}var Se,ie,pe;A&&X.added(be);function be(){he(),pe=Math.min(30,p==HORIZONTAL?x.height/O/3*X.scale*x.scale:x.width/j/3*X.scale*x.scale),Se?Se.siz(pe,pe).reg(CENTER):Se=X.beacon=new e.Rectangle({width:pe,height:pe,borderColor:R,borderWidth:T,scaleDimensions:!1}).reg(CENTER).rot(45),ie||(ie=X.ghost=new e.Rectangle({width:100,height:100,borderColor:R,borderWidth:T,dashed:L,scaleDimensions:!1}).reg(CENTER));var ve,Ae,ye,Fe;X.mdEvent=X.on("mousedown",function(De){if(ye=De.target,Se.top(),ve=null,!(i.indexOf(ye)<0)){Fe=X.localToGlobal(X.getBounds().x,X.getBounds().y);var ke=ye.boundsToGlobal();X.ghost.siz(ke.width,ke.height).reg(CENTER).loc(ke.x+ie.width/2,ke.y+ie.height/2,X.stage),ie.diffX=X.stage.frame.mouseX-ie.x,ie.diffY=X.stage.frame.mouseY-ie.y,Ae=x.getChildIndex(ye),X.stage.update()}}),X.pmEvent=X.on("pressmove",function(){if(ie.parent){var De=X.stage.frame;ie.loc(De.mouseX-ie.diffX,De.mouseY-ie.diffY);var ke=X.getObjectUnderPoint((ie.x-Fe.x)/X.scaleX,(ie.y-Fe.y)/X.scaleY,1);if(i.indexOf(ke)>=0){var oe=ke.boundsToGlobal();p==HORIZONTAL?ie.x>=oe.x+oe.width/2?(Se.loc(oe.x+oe.width+o/2*X.scaleX*x.scaleX,oe.y+oe.height/2,X.stage),ve=x.getChildIndex(ke)+(I?0:1)):(Se.loc(oe.x-o/2*X.scaleX*x.scaleX,oe.y+oe.height/2,X.stage),ve=x.getChildIndex(ke)+(I?1:0)):ie.y>=oe.y+oe.height/2?(Se.loc(oe.x+oe.width/2,oe.y+oe.height+l/2,X.stage),ve=x.getChildIndex(ke)+(I?0:1)):(Se.loc(oe.x+oe.width/2,oe.y-l/2,X.stage),ve=x.getChildIndex(ke)+(I?1:0))}X.stage.update()}}),X.puEvent=X.on("pressup",function(){ie.parent&&(ve!=null&&(ve>Ae&&ve--,ve!=Ae&&(ye.level=ve,i=[],x.loop(function(De,ke){i.push(De.rot(De.zpRotation||0).sca(1))}),v=K,p==VERTICAL&&te(!0),xe(i),_e())),ie.removeFrom(),Se.removeFrom(),X.stage.update())})}function he(){X.mdEvent&&X.off("mousedown",X.mdEvent),X.pmEvent&&X.off("pressmove",X.pmEvent),X.puEvent&&X.off("pressup",X.puEvent),Se&&Se.removeFrom(),ie&&ie.removeFrom()}function Pe(ve,Ae,ye){if(ve.scale=1,ue++>20){Ye&&Ye.clear();return}var Fe=!1;if(ve.height>re){if(V=Ae+1,ce=Math.ceil(ne/V),Ae==N&&v==VERTICAL)if(ae>fe)V=ge,ce=z,Fe=!0;else return ve}else if(ve.height<=re&&(V=Math.max(Ae-1,1),ce=Math.ceil(ne/V),Ae==N&&v==HORIZONTAL))if(ae>fe)V=ge,ce=z,Fe=!0;else return ve;if(N=H,H=j,j=V,O=ce,e.loop(i,function(De){c==NONE&&De.surrogate?(i.splice(i.indexOf(De),1),De.dispose()):De.siz(null,re)},!0),Re(i,j,O),ae=fe,ge=Ie,z=Be,K==AUTO||v==HORIZONTAL&&Math.round(ve.width)==$||v==VERTICAL&&Math.round(ve.height)==re?fe=ve.width*ve.height:fe=0,Ie=j,Be=O,Fe){Ye&&Ye.clear(),d(ve),X.stage&&X.stage.update();return}k?(Ye=Gr(1,function(){Pe(ve,j,O)}),d(ve),X.stage&&X.stage.update(),ve.sca(1)):(ve.sca(1),Pe(ve,j,O))}function Re(ve,Ae,ye){var Fe=0;e.loop(ve,function(Le,ze){Le.siz(null,de),Fe+=Le.width});var De=Fe/ne,ke=ve;ne%Ae!=0&&c==NONE&&e.loop(Ae-ne%Ae,function(){var Le=new e.Rectangle(De,de,grey);Le.surrogate=!0,ke.push(Le)});var oe=new Hr(ke,Ae,ye,0,0,!0),Ge=[],We=e.copy(oe.items2D);if(c!=NONE&&Ae*ye!=ne&&We.length>1){var Qe;if(c==BOTTOM)Qe=X.funnel?Math.floor((Ae*ye-ne)/2):Math.ceil((Ae*ye-ne)/2),e.loop(Qe,function(Le){We[ye-1].unshift(We[ye-2].pop())});else{var st=Ae*ye-ne;e.loop(We,function(Le,ze,ot){ze!=ot-1&&e.loop(Le.splice(-st,st),function(Ce){We[ze+1].unshift(Ce)},!0)}),Qe=X.funnel?Math.floor((Ae*ye-ne)/2):Math.ceil((Ae*ye-ne)/2),e.loop(Qe,function(Le){We[0].push(We[1].shift())})}}e.loop(We,function(Le,ze,ot){var Ce=0;e.loop(Le,function(et){Ce+=et.width});var me=($-o*(Le.length-1))/Ce;e.loop(Le,function(et){et.scale*=me});var Ke=e.copy(Le);(I&&p==HORIZONTAL||!I&&p==VERTICAL)&&Ke.reverse();var ut=new Hr(Ke,Le.length,1,o,0,!0);I&&ut.loop(function(et){et.bot()}),Ge.push(ut)}),oe.dispose();var yt=0;return x.loc(Q,null,X),x.removeAllChildren(),e.loop(Ge,function(Le){Le.loc(0,yt,x),yt+=Le.height+l,Le.loop(function(ze,ot,Ce){ze.addTo(x).ord(-(Ce-ot))},!0)}),e.loop(Ge,function(Le){Le.dispose()},!0),g(x),x}X.getOrder=function(ve){if(n(ve)&&(ve=!1),ve){if(!Ae){var Ae=X.pane=new e.Pane({displayClose:!1,container:X.stage,width:Math.min(500,X.stage.width-20),height:Math.min(500,X.stage.height-20),draggable:!0}),ye=X.textArea=new e.TextArea(Math.min(400,X.stage.width-70),Math.min(400,X.stage.height-70));ye.centerReg(Ae)}Ae.show(),ye.text=JSON.stringify(X.order)}return X.order},this.setOrder=function(ve){return h(ve),xe(i),_e(),X},this.addAt=function(ve,Ae){return n(ve)||(n(Ae)&&(Ae=X.items.length),Array.isArray(ve)||(ve=[ve]),e.loop(ve,function(ye,Fe){X.items.push(ye),ye.zpIndex=X.items.length-1,X.currentItems.splice(Ae+Fe,0,ye)}),xe(X.currentItems),_e()),X},this.removeAt=function(ve,Ae){n(ve)&&(ve=1),n(Ae)&&(Ae=X.items.length);var ye=X.currentItems.splice(Ae,ve);return e.loop(ye,function(Fe){var De=X.items.indexOf(Fe);X.items.splice(De,1)}),xe(X.currentItems),_e(),X},Object.defineProperty(X,"order",{get:function(){var ve=[];return x.loop(function(Ae){ve.push(Ae.zpIndex)}),ve},set:function(ve){X.setOrder(ve)}}),Object.defineProperty(X,"lock",{get:function(){return K},set:function(ve){ve!=K&&(v=ve,xe(i),_e(),A&&be())}}),Object.defineProperty(X,"direction",{get:function(){return p},set:function(ve){ve!=p&&(p=ve,x.rotation=0,i=[],x.loop(function(Ae,ye){i.push(Ae.rot(Ae.zpRotation||0).sca(1))}),p==VERTICAL&&te(!0),xe(i),_e(),A&&be())}}),Object.defineProperty(X,"spacing",{get:function(){return p==VERTICAL?l:o},set:function(ve){o=l=ve,xe(i),_e()}}),Object.defineProperty(X,"outerWidth",{get:function(){return t},set:function(ve){t!=ve&&(t=ve,$=t-S*2,Q&&(Q.widthOnly=t,Q.center(X)),xe(i),_e(),A&&be())}}),Object.defineProperty(X,"outerHeight",{get:function(){return r},set:function(ve){r!=ve&&(r=ve,re=r-P*2,Q&&(Q.heightOnly=r,Q.center(X)),xe(i),_e(),A&&be())}}),Object.defineProperty(X,"flatten",{get:function(){return c},set:function(ve){c!=ve&&(c=ve,xe(i),_e())}}),Object.defineProperty(X,"dragOrder",{get:function(){return A},set:function(ve){ve?be():(he(),X.stage&&X.stage.update())}}),W!==!1&&e.styleTransforms(this,Z),this.dispose=function(ve){return A&&he(),X.items=null,X.currentItems=null,ve||this.zimContainer_dispose(!0),!0},this.clone=function(){return X.cloneProps(new e.Pack(t,r,e.copy(i,!0),o,l,c,p,v,w,b,_,E,S,P,A,R,T,L,I,C,k,e.copy(X.order),this.style,this.group))}},e.extend(e.Pack,e.Container,["dispose","clone"],"zimContainer",!1),e.Beads=function(t,r,i,o,l,c,p,v,w,b,_,E,S,P,A){var R="path, obj, count, angle, startPercent, endPercent, percents, onTop, showControls, visible, interactive, clone, group, style, inherit",T;if(T=vt(e.Beads,arguments,R,this))return T;He("66.7"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Beads",this.group=S;var L=P===!1?{}:e.getStyle(this.type,this.group,A);n(v)&&(v=L.onTop!=null?L.onTop:!1),n(w)&&(w=L.showControls!=null?L.showControls:!1),n(b)&&(b=L.visible!=null?L.visible:!0),n(_)&&(_=L.interactive!=null?L.interactive:!0),n(t)&&(t=L.path!=null?L.path:new e.Blob({color:null,borderWidth:3,borderColor:e.blue})),t.visible=b,t.interactive=_,t.toggle(w),t.onTop=v,n(r)&&(r=L.obj!=null?L.obj:new e.Circle(10)),n(i)&&(i=L.count!=null?L.count:10),n(o)&&(o=L.angle!=null?L.angle:null),n(l)&&(l=L.startPercent!=null?L.startPercent:0),n(c)&&(c=L.endPercent!=null?L.endPercent:100),n(p)&&(p=L.percents!=null?L.percents:null);var I=c;c<l&&(I=100+c);var C;if(n(p)){var k;t.type=="Squiggle"?k=(I-l)/(i-1):k=(I-l)/(i-(l!=I%100?1:0)),p=[];var Y=l-k;for(C=0;C<i;C++)p.push(Y+k),Y+=k,Y>100&&(Y-=100)}n(E)&&(E=L.clone!=null?L.clone:!0);var W=this;W.count=i,W.percents=p,W.items=[];var G;for(C=0;C<i;C++)G=e.Pick.choose(r),E&&C!=0&&(G=G.clone()),G.beadNum=C,G.startPercent=p[C],W.items.push(G);W.path=t.addTo(W),W.beads=new e.Container().addTo(W,v?0:null),W.beads.type="BeadsContainer",this.resize=function(){for(var F=t.segmentRatios,B=t.segmentPoints,q=0;q<W.count;q++){var Z=t.getCurvePoint(Math.max(0,Math.min(.9999,p[q]/100)),F,B,!0);if(Z){var X=W.beads.globalToLocal(Z.x,Z.y);X&&W.items[q].loc(X,null,W.beads).rot(n(o)?Z.angle>180?Z.angle-360+t.rotation:Z.angle+t.rotation:o)}}return this},W.resize(),_&&(t.on("pressmove",W.resize),t.on("update",W.resize)),P!==!1&&e.styleTransforms(this,L),this.dispose=function(F){return F||this.zimContainer_dispose(!0),W.items=[],!0},this.clone=function(F){if(F)for(var B=[],q=0;q<W.items.length;q++)B.push(W.items[q].clone(!0));return W.cloneProps(new e.Beads(t.clone(),F?e.series(B):r.clone?r.clone():r,W.count,o,l,c,p,v,w,b,_,E,this.style,this.group))}},e.extend(e.Beads,e.Container,["clone","dispose"],"zimContainer",!1),e.Layout=function(t,r,i,o,l,c,p,v,w,b,_,E){var S="holder, regions, lastMargin, lastMarginMin, backgroundColor, vertical, showRegions, scalingObject, hideKey, style, group, inherit",P;if(P=vt(e.Layout,arguments,S,this))return P;He("80"),this.cjsEventDispatcher_constructor(),this.type="Layout",this.group=_;var A=b===!1?{}:e.getStyle(this.type,this.group,E);if(n(t)&&(t=A.holder!=null?A.holder:null),n(v)&&(v=A.scalingObject!=null?A.scalingObject:null),n(t)||!t.getBounds){Nn("zim controls - Layout(): please provide an object with bounds set that holds the objects being laid out");return}if(v=n(v)?t:v,!v.getBounds||!v.getBounds()){Nn("zim controls - Layout(): holder must have bounds set or provide a scalingObject with bounds");return}var R=v.getBounds();t.setBounds(0,0,R.width,R.height),n(i)&&(i=A.lastMargin!=null?A.lastMargin:0),n(o)&&(o=A.lastMarginMin!=null?A.lastMarginMin:0),n(c)&&(c=A.vertical!=null?A.vertical:!0),n(l)&&(l=A.backgroundColor!=null?A.backgroundColor:""),n(w)&&(w=A.hideKey!=null?A.hideKey:"B"),n(p)&&(p=A.showRegions!=null?A.showRegions:null);var T;p&&(T=new e.Shape);var L=this.backing=new e.Shape,I=this;if(this.active=!0,n(r)&&(r=A.regions!=null?e.copy(A.regions):null),n(r))return;e.loop(r,function(g,d){g instanceof $e.DisplayObject&&(r[d]={obj:g}),r[d].object&&(r[d].obj=r[d].object,delete r[d].object)}),this.regions=r;var C,k=0,Y="minWidth",W="width",G="height",F="marginLeft",B="marginMinLeft",q="maxHeight";c&&(Y="minHeight",W="height",G="width",F="marginTop",B="marginMinTop",q="maxWidth");for(var Z=[],X=0,ne=0;ne<r.length;ne++){if(C=r[ne],!C.obj||!C.obj.getBounds()){lt("Layout(): each region object must have an object with setBounds() set");return}C[Y]||(C[Y]=0),C[W]||(C[W]=0),C.backgroundColor||(C.backgroundColor=""),C.given=0,C.maxGiven=0,C[F]=="auto"?(Z[ne]=!0,X++,C[B]?C[F]=C[B]:delete C[F]):C[F]&&C[B]&&C[F]<C[B]&&(C[F]=C[B]),n(C[F])&&(C[F]=1e-4),C[q]||(C[q]=100),c?(C.align||(C.align="middle"),C.valign||(ne==0?C.valign="top":ne==r.length-1?C.valign="bottom":C.valign="middle",r.length==1&&(C.valign="middle"))):(C.valign||(C.valign="top"),C.align||(ne==0?C.align="left":ne==r.length-1?C.align="right":C.align="middle",r.length==1&&(C.align="middle"))),C[W]&&(C[Y]=0),k+=C[W]+C[F]}if(i=="auto"?(Z[r.length]=!0,i=o||0):i&&o&&i<o&&(i=o),k+=i,k>100){lt("Layout(): cannot fit regions into 100% bounds");return}var $=100-k;re();function re(){var g=0,d;for(d=0;d<r.length;d++)C=r[d],C.given=0,C[W]==0&&(g+=C.obj.getBounds()[W]);for(d=0;d<r.length;d++)C=r[d],C[W]==0&&(C.given=C.obj.getBounds()[W]/g*$)}this.resize=function(){var g;if(I.active){for(R=v.getBounds(),t.setBounds(0,0,R.width,R.height),L.graphics.clear(),l!=""&&(de(L,l),L.graphics.r(0,0,R.width,R.height)),g=0;g<r.length;g++)C=r[g],C.maxGiven=0,C.marginGiven=0;for(var d=!0,h,x,j,O,V,ce,H=$;d;){for(d=!1,h=!0,g=0;g<r.length;g++)C=r[g],C.given>0&&C.maxGiven==0&&(x=C.obj.getBounds()[W],j=C.obj.getBounds()[G],O=C.given*R[W]/100,V=C[q]*R[G]/100,ce=j/x*O,ce>V&&C.obj.type!="Window"?(C.maxGiven=x/j*V*100/R[W],H-=C.maxGiven):h=!1);if(h)break;var N=0;for(g=0;g<r.length;g++)C=r[g],C[W]==0&&C.maxGiven==0&&(N+=C.obj.getBounds()[W]);for(g=0;g<r.length;g++)C=r[g],C[W]==0&&C.maxGiven==0&&(C.given=C.obj.getBounds()[W]/N*H)}var ue=!0;if(C=r[0],C.maxGiven>0?C.maxGiven<C[Y]&&(C[W]=C[Y],ue=!1):C.given>0&&C.given<C[Y]&&(C[W]=C[Y],ue=!1),C=r[r.length-1],C.maxGiven>0?C.maxGiven<C[Y]&&(C[W]=C[Y],ue=!1):C.given>0&&C.given<C[Y]&&(C[W]=C[Y],ue=!1),!ue){for(k=0,g=0;g<r.length;g++)C=r[g],k+=C[W]+C[F];if(k+=i,k>100){lt("zim display - Layout(): cannot fit regions into 100% bounds");return}$=100-k,re(),I.resize();return}var fe=!0,ae=0,Ie=0;for(g=0;g<r.length;g++)C=r[g],ae+=C[F],C[W]>0?Ie+=C[W]:C.maxGiven>0?Ie+=C.maxGiven:C.given>0&&(Ie+=C.given),C[W]==0&&(fe=!1);if(fe||h){ae+=i;var ge=100-Ie-ae;if(ae-=i+r[0][F],ge!=0&&ae!=0)for(g=0;g<r.length;g++)g!=0&&(C=r[g],C.marginGiven=C[F]/ae*(ae+ge))}if(X>0){var Be=0,z=0;for(g=0;g<r.length;g++)C=r[g],C.marginGiven>0?z+=C.marginGiven:z+=C[F],C.marginGiven=0,Be+=C[F]>.05?C[F]:0;var Ye=(z-Be)/X;for(g=0;g<Z.length;g++)Z[g]&&r[g]&&(C=r[g],C.marginGiven=(C[B]?C[B]:0)+Ye)}var te=0,K=0,xe,_e,Se;if(T&&T.graphics){var ie=T.graphics;ie.c()}for(g=0;g<r.length;g++)C=r[g],C.marginGiven>0?te+=C.marginGiven*R[W]/100:te+=C[F]*R[W]/100,C[W]>0?x=C[W]:C.maxGiven>0?x=C.maxGiven:C.given>0?x=C.given:x=0,x=x*R[W]/100,j=C[q]*R[G]/100,K=(R[G]-j)/2,c?(C.obj.type=="Wrapper"&&C.obj.resize(j),C.obj.type=="Window"&&C.obj.resize(j,x),C.obj.type=="Region"&&C.obj.setBounds(j,x),xe=e.fit(C.obj,K,te,j,x)):(C.obj.type=="Wrapper"&&C.obj.resize(x),C.obj.type=="Window"&&C.obj.resize(x,j),C.obj.type=="Region"&&C.obj.setBounds(x,j),xe=e.fit(C.obj,te,K,x,j)),C.valign=="top"?C.obj.y=xe.bY:C.valign=="bottom"&&(C.obj.y=xe.bY+xe.bHeight-xe.height),C.align=="left"?C.obj.x=xe.bX:C.align=="right"&&(C.obj.x=xe.bX+xe.bWidth-xe.width),T&&T.graphics&&(ie.s("white").ss(2).r(xe.bX,xe.bY,xe.bWidth,xe.bHeight),ie.s("#ff8203").sd([20,20]).r(xe.bX,xe.bY,xe.bWidth,xe.bHeight).sd()),Se=_e=0,(te==0||te+x==R[W])&&(c?Se=1:_e=1),j==R[G]&&(c?_e=1:Se=1),C.backgroundColor!=""&&(de(L,C.backgroundColor),L.graphics.r(xe.bX,xe.bY,xe.bWidth+_e,xe.bHeight+Se)),te+=x,C.obj.ZIMoutlineShape&&C.obj.outline()}};function de(g,d){d.type=="GradientColor"?g.graphics.lf(d.colors,d.ratios,d.x0,d.y0,d.x1,d.y1):d.type=="RadialColor"?g.graphics.rf(d.colors,d.ratios,d.x0,d.y0,d.r0,d.x1,d.y1,d.r1):d.type=="BitmapColor"?g.graphics.bf(d.image,d.repetition,d.matrix):g.graphics.f(C.backgroundColor)}this.resize(),T&&t.addChild(T),t.addChildAt(L,0),le.addEventListener("keydown",Q);function Q(g){g||(g=event),T&&String.fromCharCode(g.keyCode)==w.toUpperCase()&&(I.toggle(),T.stage&&T.stage.update())}this.disable=function(){I.active=!1,le.removeEventListener("keydown",Q),T&&(T.alpha=0)},this.enable=function(){I.active=!0,le.addEventListener("keydown",Q),I.resize(),T&&(T.alpha=1)},this.removeShape=function(){T&&(T.graphics.clear(),T.dispose(),T=null,T=!1),le.removeEventListener("keydown",Q)},this.toggled=!0,this.toggle=function(g){return g===!0?T.visible=!0:g===!1?T.visible=!1:T.visible=!T.visible,I.toggled=T.visible,I},this.addShape=function(g){I.removeShape(),T=g,le.addEventListener("keydown",Q),t.addChild(T),I.resize()},b!==!1&&e.styleTransforms(this,A),v.added?v.added(U):U(v);function U(g){if(g&&g.frame&&g.frame.scaling=="full"){if(!e.globalManager){var d=e.globalManager=new e.Manager;d.frame=g.frame,d.event=g.frame.on("resize",function(){d.resize()})}e.globalManager.add(I)}}this.dispose=function(){if(I.resize=null,e.globalManager){var g=e.globalManager;g.remove(I),e.globalManager.items.length==0&&(g.frame.off("resize",g.event),g.dispose(),e.globalManager=null)}return I.backing&&I.backing.dispose(),I.backing=null,I.removeShape(),!0}},e.extend(e.Layout,$e.EventDispatcher,null,"cjsEventDispatcher",!1),e.Accessibility=function(t,r,i,o,l,C,p,v,w,b,_,E,S,P,A){var R="appName, tabOrder, tabIndex, cycle, decimals, frame, application, alwaysHighlight, AHTime, AHColor, AHBorderWidth, AHBorderPadding, AHAlpha, AHObject, AHObjectScale",T;if(T=vt(e.Accessibility,arguments,R,this))return T;He("30.5"),this.cjsEventDispatcher_constructor(),this.type="Accessibility",n(t)&&(t="application"),n(o)&&(o=!1),n(l)&&(l=2),n(C)&&(C=le.zdf),n(p)&&(p=!e.mobile()),n(v)&&(v=!1);var L=y(w);if(n(w)&&(w=L=="s"?.7:700),n(b)&&(b="brown"),n(_)&&(_=3),n(E)&&(E=5),n(S)&&(S=.8),n(A)&&(A=.8),n(P)){var I=new e.Shape({style:!1});I.mouseEnabled=!1}else P.mouseEnabled&&(P.mouseEnabled=!1);if(typeof C>"u")var C=le.zdf;if(n(C)){Ct&&lt("Accessibility - needs a Frame");return}var k=C.retina&&le.devicePixelRatio||1,Y=this;Y.cycle=o,Y.decimals=l,Y.alwaysHighlight=v,Y.AHTime=w,Y.AHColor=b,Y.AHBorderWidth=_,Y.AHBorderPadding=E,Y.AHAlpha=S,Y.AHObjectScale=A;var W=-1,G=-1,F=[],B=[],q={RadioButtons:"option",Tabs:"tab",Pad:"key"},Z,X=C.canvas.id,ne=e.mobile(),$=!1,re=null,de=[],Q,U,g,d,h,x,j,O=150,V;Object.defineProperty(this,"tabOrder",{get:function(){return W},set:function(ye){var Fe;for(Q&&Q.removeEventListener("focus",N),U&&U.removeEventListener("focus",N),Fe=0;Fe<F.length;Fe++)F[Fe].parentElement&&(F[Fe].outerHTML="");F=[];var De,ke;for(Fe=0;Fe<B.length;Fe++)De=W[Fe],De&&B[Fe][0].off("mousedown",B[Fe][1]);B=[],W=[];var oe=[];V=C.shim?document.body:C.canvas,ve=!1;var Ge=0;for(Fe=0;Fe<ye.length;Fe++){if(De=ye[Fe],De.type=="HotSpots"&&(ye.splice.apply(ye,[Fe,1].concat(De.hotSpots)),De=De.hotSpots[0]),De.type=="HotSpot"&&(De=De.spot),De.constructor=={}.constructor){if(ke=De.obj,!ke||!ke.getStage)continue;De.title||(De.title=te(ke,Fe+Ge))}else ke=De,De={obj:De,title:te(De,Fe+Ge)};if(ke.type=="RadioButtons"||ke.type=="Tabs"||ke.type=="Pad"){var We=[];Ge--;for(var Qe=0;Qe<ke.buttons.length;Qe++){Ge++;var st=ke.buttons[Qe],yt={obj:st,title:De.title+" - "+q[ke.type]+": "+(st.text=="a"||st.text=="A"?"eh":st.text)};We.push(yt),st.zimTabParent=ke,st.zimTabParent.zimAccessibility=Y,st.zimTabIndex=Fe+Ge,st.tabIndex=Qe,st.zimAccessibility=Y,K(yt),V=xe(X+"Tab"+(Fe+Ge),yt.title,V,yt),B.push([st,st.on("mousedown",Ye)]),$||de.push([st,st.on("mousedown",H)])}oe=oe.concat(We)}else ke.zimTabIndex=Fe+Ge,ke.zimTabParent=ke,K(De),ke.zimAccessibility=Y,B.push([ke,ke.on("mousedown",Ye)]),$||de.push([ke,ke.on("mousedown",H)]),oe.push(De),V=xe(X+"Tab"+(Fe+Ge),De.title,V,De)}Q=Y.startAppTag=xe(X+"PrefixTab",t+" start",C.shim?document.body:C.canvas,null,"before"),Q.addEventListener("focus",N),$||(Q.addEventListener("focus",ge),d=xe(X+"noAriaTab","",Q,null,"before"),d.setAttribute("aria-hidden",!0),d.focusTab=Q,d.addEventListener("focus",Ie),x=xe(X+"noAriaTab","",Q),x.setAttribute("aria-hidden",!0),x.focusTab=Q,x.addEventListener("focus",Ie)),V=xe(X+"BufferTab","",V),ne&&V.setAttribute("aria-hidden",!0),V=U=Y.endAppTag=xe(X+"SuffixTab",t+" end",V),U.addEventListener("focus",N),$||(U.addEventListener("focus",ge),V=h=xe(X+"noAriaTab","",U),h.setAttribute("aria-hidden",!0),h.focusTab=U,h.addEventListener("focus",Ie),j=xe(X+"noAriaTab","",U,null,"before"),j.setAttribute("aria-hidden",!0),j.focusTab=U,j.addEventListener("focus",Ie)),W=oe}});function ce(){Q&&(Q.removeEventListener("focus",N),Q.removeEventListener("focus",ge),Q.parentNode&&(Q.outerHTML="")),d&&(d.removeEventListener("focus",Ie),d.parentNode&&(d.outerHTML="")),x&&(x.removeEventListener("focus",Ie),x.parentNode&&(x.outerHTML="")),V&&V.parentNode&&(V.outerHTML=""),U&&(U.removeEventListener("focus",N),U.removeEventListener("focus",ge),U.parentNode&&(U.outerHTML="")),h&&(h.removeEventListener("focus",Ie),h.parentNode&&(h.outerHTML="")),j&&(j.removeEventListener("focus",Ie),j.parentNode&&(j.outerHTML=""))}Object.defineProperty(this,"tabIndex",{get:function(){return G},set:function(ye){if(!Ae)return;if(ye<0||ye>=W.length)Le();else{ye!=G&&yt();var Fe=W[ye].obj;if(Fe.stage){if(G=ye,Fe.focus=!0,_e=!0,Se=!1,Y.changeTitle(Fe),Fe.zimTabTag.focus(),setTimeout(function(){Fe.zimTabTag.focus();var ze=new $e.Event("change");ze.title=Fe.zimTabTag.getAttribute("aria-label"),Y.dispatchEvent(ze)},O),Y.alwaysHighlight&&(!re||!ne)){if(Y.AHObject){Z=Y.AHObject;var st=e.boundsToGlobal(Fe);Y.AHObject.alp(Y.AHAlpha).addTo(C.stage,null,!1),Y.AHObject.fit(st.x,st.y,st.width,st.height),Y.AHObject.sca(Y.AHObject.scaleX*Y.AHObjectScale),Y.AHTime>0&&(Pe=setTimeout(function(){C.stage.removeChild(Y.AHObject),C.stage.update()},Y.AHTime*(L=="s"?1e3:1)))}else{Z=I;var De=Fe.getBounds(),ke=Fe.localToGlobal(De.x-5,De.y-5),oe=Fe.localToGlobal(De.x+De.width+5,De.y-5),Ge=Fe.localToGlobal(De.x+De.width+5,De.y+De.height+5),We=Fe.localToGlobal(De.x-5,De.y+De.height+5),Qe=I.graphics;Qe.clear(),Qe.s(Y.AHColor).ss(Y.AHBorderWidth).mt(ke.x-Y.AHBorderPadding,ke.y-Y.AHBorderPadding).lt(oe.x+Y.AHBorderPadding,oe.y-Y.AHBorderPadding).lt(Ge.x+Y.AHBorderPadding,Ge.y+Y.AHBorderPadding).lt(We.x-Y.AHBorderPadding,We.y+Y.AHBorderPadding).lt(ke.x-Y.AHBorderPadding,ke.y-Y.AHBorderPadding).cp(),I.alpha=Y.AHAlpha,Y.AHTime>0&&(Pe=setTimeout(function(){C.stage.removeChild(I),C.stage.update()},Y.AHTime*(L=="s"?1e3:1)))}C.stage.addChild(Z),C.stage.update()}}else Le()}function yt(){if(G&&G>-1)W&&W[G]&&(W[G].obj.focus=!1);else for(var ze=0;ze<W.length;ze++)W[ze].obj.focus=!1}function Le(){yt(),_e=!1,Y.AHObject&&C.stage.removeChild(Y.AHObject),Y.alwaysHighlightShape&&C.stage.removeChild(Y.alwaysHighlightShape),C.stage.update(),G=-1}}}),Object.defineProperty(this,"aria",{get:function(){return re},set:function(ye){re=ye,re&&ue()}});function H(ye){var Fe=ye.currentTarget,De=Fe.boundsToGlobal(),ke=De.x+De.width/2,oe=De.y+De.height/2,Ge=5;ye.stageX/e.scaX<ke-Ge||ye.stageX/e.scaX>ke+Ge||ye.stageY/e.scaY<oe-Ge||ye.stageY/e.scaY>oe+Ge?fe():ue()}function N(){g&&(g.innerHTML="")}ne=="android"&&(e.ACTIONEVENT="click",Mt||(le.ACTIONEVENT="click"));function ue(){re=!0,Be(),g&&g.setAttribute("aria-hidden",!1),e.ACTIONEVENT="click",Mt||(le.ACTIONEVENT="click"),C.stage.removeChild(Z),ne&&(Y.alwaysHighlight=!1),C.stage.update();for(var ye,Fe,De,ke=0;ke<W.length;ke++)ye=W[ke],Fe=ye.obj,De=Fe.zimTabTag,De.disabled=!1,ye.title=ye.title.replace(/\s\(use arrow keys\)/,""),De.setAttribute("aria-label",ye.title),De.addEventListener("focus",ae)}function fe(){re=!1;for(var ye,Fe,De,ke=0;ke<W.length;ke++)ye=W[ke],Fe=ye.obj,De=Fe.zimTabTag,De.disabled=!1;Be(),v&&z()}function ae(ye){var Fe=ye.currentTarget,De=Fe.zimObject;G=De.zimTabIndex,De.focus=!0;var ke=new $e.Event("change");ke.title=Fe.getAttribute("aria-label"),Y.dispatchEvent(ke)}function Ie(ye){re=!1,ye.target.focusTab.focus()}function ge(){n(re)||re?ue():fe()}function Be(){$=!0,Q.removeEventListener("focus",ge),U.removeEventListener("focus",ge),d.removeEventListener("focus",Ie),h.removeEventListener("focus",Ie),d.parentNode&&(d.parentNode.removeChild(d),h.parentNode.removeChild(h)),x.removeEventListener("focus",Ie),j.removeEventListener("focus",Ie),x.parentNode&&(x.parentNode.removeChild(x),j.parentNode.removeChild(j));for(var ye=0;ye<de.length;ye++)de[ye][0].off("mousedown",de[ye][1])}function z(){for(var ye=0;ye<F.length;ye++){var Fe=F[ye];Fe.zimObject&&(Fe.zimObject.type=="Loader"||Fe.zimObject.type=="TextArea"||Fe.zimObject.type=="Tag")||(F[ye].style.left="-2000px")}}n(r)?setTimeout(function(){if(W==-1){W=[];var ye=[];e.loop(C.stage,function(Fe){Fe.type&&ye.push(Fe)}),Y.tabOrder=ye,n(i)||(Y.tabIndex=i)}},50):(W=[],Y.tabOrder=r,n(i)||(Y.tabIndex=i));function Ye(ye){var Fe=ye.currentTarget;if(Fe.type=="RadioButton"||Fe.type=="TabsButton"||Fe.type=="PadButton")for(var De=0;De<Fe.zimTabParent.buttons.length;De++){var ke=Fe.zimTabParent.buttons[De];ke.zimTabTag.setAttribute("aria-label",ke.zimTabTag.getAttribute("aria-label").split(" - currently")[0]+(Fe.zimTabParent.selectedIndex==ke.tabIndex?" - currently selected.":" - currently not selected."))}Y.tabIndex=ye.currentTarget.zimTabIndex,Y.activatedObject=Fe}function te(ye){return ye.talk?ye.talk:ye.type=="TextArea"||ye.type=="RadioButtons"||ye.type=="Tabs"||ye.type=="Pad"?ye.type:ye.type=="Waiter"?"Waiter active - please wait":ye.text?ye.type+" - "+(ye.text=="a"||ye.text=="A"?"eh":ye.text):ye.type+(ye.type=="Dial"||ye.type=="Slider"||ye.type=="ColorPicker"||ye.type=="Stepper"?" (use arrow keys)":"")+(ye.type=="TextArea"?" (press ENTER to edit)":"")}function K(ye){var Fe=ye.obj;ye.title=ye.title.replace(/\.$/,""),Fe.type=="RadioButton"||Fe.type=="TabsButton"||Fe.type=="PadButton"?ye.title=ye.title+(Fe.tabIndex==Fe.zimTabParent.selectedIndex?" - currently selected":" - currently not selected"):Fe.type=="CheckBox"?ye.title=ye.title+(Fe.checked?" - currently checked":" - currently not checked"):Fe.type=="Stepper"?ye.title=ye.title+" - currently displaying "+Fe.currentValue:Fe.type=="Slider"||Fe.type=="Dial"?ye.title=ye.title+" - currently at "+e.decimals(Fe.currentValue,Y.decimals):Fe.type=="ColorPicker"?ye.title=ye.title+" - currently at "+Fe.selectedColor:Fe.type=="TextArea"?ye.title=ye.title+(Fe.tag.value!=""?"":" - placeholder: "+Fe.tag.placeholder):Fe.type=="Indicator"?ye.title=ye.title+" - currently "+(Fe.selectedIndex>=0?"at "+(Fe.selectedIndex+1)+" of "+Fe.num:"not indicating"):Fe.type=="TextInput"&&(ye.title=ye.title+(Fe.htmlTag.value!=""?"":" - placeholder: "+Fe.htmlTag.placeholder)),ye.title+="."}function xe(ye,Fe,De,ke,oe){var Ge,We;if(ke&&(Ge=ke.obj),ke&&(Ge.type=="TextArea"||Ge.type=="Loader"))return We=Ge.tag,We.setAttribute("aria-label",Fe),Ge&&We.setAttribute("aria-hidden",!Ge.stage),oe=="before"?De.parentNode.insertBefore(We,De):De.parentNode.insertBefore(We,De.nextSibling),Ge.type=="TextArea"?We.style.zIndex=3:We.style.zIndex=-5,We.zimObject=Ge,ke.obj.zimTabTag=We,F.push(We),We;if(ke&&Ge.type=="TextInput")return We=Ge.htmlTag,We.setAttribute("aria-label",Fe),Ge&&We.setAttribute("aria-hidden",!Ge.stage),oe=="before"?De.parentNode.insertBefore(We,De):De.parentNode.insertBefore(We,De.nextSibling),We.style.zIndex=-5,We.zimObject=Ge,ke.obj.zimTabTag=We,F.push(We),We;var Qe;if(ke&&(Ge.type=="Dial"||Ge.type=="Slider"||Ge.type=="Stepper"||Ge.type=="ColorPicker")){var st=[];if(Ge.type=="Dial"||Ge.type=="Slider"){var yt=Ge.step<=0?(Ge.max-Ge.min)/20:Ge.step;for(Qe=Ge.min;Qe<Ge.max;Qe=Qe+yt)st.push(Ge.min+Qe)}else Ge.type=="Stepper"?st=Ge.stepperArray:Ge.type=="ColorPicker"&&(st=Ge.colors);We=document.createElement("select"),We.disabled=!0,We.zimObject=Ge,We.addEventListener("change",function(Ce){!re&&!ne=="android"||(Ce.currentTarget.zimObject.zimTabParent.currentValueEvent=Ce.target.value,C.stage.update())}),We.size=1;var Le,ze;for(Qe=0;Qe<st.length;Qe++)Le=st[Qe],ze=document.createElement("option"),ze.setAttribute("aria-label",Le),ze.innerHTML=Le,We.add(ze),Le==Ge.zimTabParent.currentValue&&ze.setAttribute("selected","selected");We.setAttribute("role","button")}else We=document.createElement("div"),Ge&&(We.zimObject=Ge),We.innerHTML="tag",We.setAttribute("role",p?"application":"button"),ne=="android"&&We.addEventListener("click",function(){Ge.dispatchEvent("click")});if(We.setAttribute("id",ye),We.setAttribute("tabindex",0),We.setAttribute("aria-label",Fe),Ge&&We.setAttribute("aria-hidden",!Ge.stage),oe=="before"?De.parentNode.insertBefore(We,De):De.parentNode.insertBefore(We,De.nextSibling),We.style.position="absolute",ke){Ge=ke.obj;var ot=Ge.boundsToGlobal();C.retina?(We.style.left=C.x+ot.x*C.scale/k+"px",We.style.top=C.y+ot.y*C.scale/k+"px",We.style.width=ot.width*C.scale/k+"px",We.style.height=ot.height*C.scale/k+"px"):(We.style.left=C.x+ot.x*C.scale+"px",We.style.top=C.y+ot.y*C.scale+"px",We.style.width=ot.width*C.scale+"px",We.style.height=ot.height*C.scale+"px"),ke.obj.zimTabTag=We}else We.style.left="-1000px",We.style.top=C.y+"px";return We.style.overflow="hidden",We.style.zIndex=-5,We.style.fontSize="20px",We.style.color="rgba(0,0,0,.01)",F.push(We),We}var _e=!1,Se=!0,ie=C.on("keydown",function(ye){if(ye.keyCode==9&&(pe()||(_e=!1,Y.tabIndex!=-1&&(Y.tabIndex=-1)),_e?he(ye):be(ye)),_e&&W.length>0&&Y.tabIndex>=0&&ye.keyCode==13){var Fe=W[Y.tabIndex],De=Fe.obj;if(Fe&&De.stage){var ke=new $e.Event("mousedown"),oe=new $e.Event("click");ke.fromEnter=oe.fromEnter=!0,De.type=="Pane"?(De.backdrop.dispatchEvent(ke),De.backdrop.dispatchEvent(oe)):(De.dispatchEvent(ke),De.dispatchEvent(oe))}}});function pe(){for(var ye=!1,Fe=0;Fe<F.length;Fe++)if(document.activeElement==F[Fe]){ye=!0;break}return!!(document.activeElement==C.canvas||ye)}function be(ye){!C.shiftKey&&(vn(X+"PrefixTab")==document.activeElement||C.canvas==document.activeElement)?(W.length>0&&(W[W.length-1].obj.focus=!0),Se=!0,_e=!0,he(ye)):C.shiftKey&&(vn(X+"SuffixTab")==document.activeElement||vn(X+"BufferTab")==document.activeElement)&&(W.length>0&&(W[0].obj.focus=!0),Se=!0,_e=!0,he(ye))}function he(ye){if(ye.ctrlKey){Re(ye.shiftKey?-1:1);return}ye.shiftKey?Y.tab(-1):Y.tab(1),ye.preventDefault()}var Pe;this.tab=function(ye){if(clearTimeout(Pe),Z&&C.stage.removeChild(Z),n(ye)&&(ye=1),W.length==0){Re(ye);return}for(var Fe=0;Fe<W.length;Fe++){var De=W[Fe].obj;if(De.focus){De.focus=!1;var ke=Fe+ye,oe=(ke+W.length*1e4)%W.length,Ge=W[oe];De=Ge.obj;for(var We=0,Qe=!1;!(De.stage&&(!De.zimTabParent&&(n(De.enabled)||De.enabled)||De.zimTabParent&&(n(De.zimTabParent.enabled)||De.zimTabParent.enabled)));)if(We++,ke=ke+ye,oe=(ke+W.length*100)%W.length,Ge=W[oe],De=Ge.obj,We==W.length){Qe=!0;break}if(Qe||!Y.cycle&&ke!=oe&&!Se){Re(ye);return}Se=!1,Y.tabIndex=oe;break}}};function Re(ye){_e=!1,vn(X+(ye==1?"SuffixTab":"PrefixTab")).focus(),C.stage.removeChild(P),C.stage.update(),Y.tabIndex=-1}this.changeTitle=function(ye,Fe,De){if(typeof ye!="number"&&(ye=ye.zimTabIndex),!n(ye)){if(De&&n(Fe)){Y.tabIndex=ye;return}var ke=W[ye],oe=ke.obj;n(Fe)&&(Fe=oe.zimTabTag.getAttribute("aria-label").split(" - currently")[0]),ke.title=Fe,K(ke),oe.zimTabTag.setAttribute("aria-label",ke.title),De&&(Y.tabIndex=ye)}};var ve=!1;this.talk=function(ye){ve||(g=xe(X+"TalkTab","",U),g.setAttribute("role","alert"),ve=!0),g.removeAttribute("role"),g.setAttribute("aria-label",ye),g.setAttribute("role","alert");var Fe=new $e.Event("change");Fe.title=ye,Y.dispatchEvent(Fe)},this.resize=function(ye){if(n(ye))for(var ke=0;ke<W.length;ke++)oe(W[ke].obj);else{if(typeof ye!="number"&&(ye=ye.zimTabIndex),ye<0)return;var Fe=W[ye],De=Fe.obj;!De.stage&&Z&&De==Y.currentObject&&(C.stage.removeChild(Z),C.stage.update()),oe(De)}function oe(Ge){if(Ge.type=="TextArea"||Ge.type=="Loader"){Ge.resize();return}else{var We=Ge.boundsToGlobal(),Qe=Ge.zimTabTag;C.retina?(Qe.style.left=C.x+We.x*C.scale/k+"px",Qe.style.top=C.y+We.y*C.scale/k+"px",Qe.style.width=We.width*C.scale/k+"px",Qe.style.height=We.height*C.scale/k+"px"):(Qe.style.left=C.x+We.x*C.scale/k/k+"px",Qe.style.top=C.y+We.y*C.scale/k/k+"px",Qe.style.width=We.width*C.scale/k/k+"px",Qe.style.height=We.height*C.scale/k/k+"px")}Qe.setAttribute("aria-hidden",!Ge.stage),Qe.hidden=!Ge.stage}},Object.defineProperty(this,"currentObject",{get:function(){return W[G]&&W[G].obj?W[G].obj:null},set:function(ye){for(var Fe=0;Fe<W.length;Fe++)if(W[Fe].obj==ye){Y.tabIndex=Fe;break}}});var Ae=!0;Object.defineProperty(this,"enabled",{get:function(){return Ae},set:function(ye){Ae=ye}}),this.dispose=function(){I&&I.graphics.clear(),Y.tabOrder=[];for(var ye=0;ye<F.length;ye++)F[ye].parentElement&&(F[ye].outerHTML="");ce(),Y.removeAllEventListeners(),C.off("keydown",ie)}},e.extend(e.Accessibility,$e.EventDispatcher,null,"cjsEventDispatcher",!1),e.Manager=function(t){He("75");var r=this;this.type=t,this.items=[],this.add=function(l){return Array.isArray(l)?r.items=r.items.concat(l):r.items.push(l),r};var i,o;this.remove=function(l){if(r){if(!l)r.items=[];else for(Array.isArray(l)||(l=[l]),i=l.length-1;i>=0;i--){o=l[i];var c=r.items.indexOf(o);c!=-1&&r.items.splice(c,1)}return r}},this.resize=function(l){if(r){if(l)for(Array.isArray(l)||(l=[l]),i=l.length-1;i>=0;i--)o=l[i],!o.resize&&r.items.indexOf(o)!=-1?r.items.splice(r.items.indexOf(o),1):o.resize();else for(i=r.items.length-1;i>=0;i--)r.items[i].resize?r.items[i].resize():r.items.splice(i,1);return r}},this.toggle=function(l,c){if(r){if(c)for(Array.isArray(c)||(c=[c]),p=c.length-1;p>=0;p--)o=c[p],!o.resize&&r.items.indexOf(o)!=-1?r.items.splice(r.items.indexOf(o),1):o.toggle(l);else for(var p=r.items.length-1;p>=0;p--)r.items[p].resize?r.items[p].toggle(l):r.items.splice(p,1);return r}},this.dispose=function(l){if(r){if(r.resize=null,l)for(Array.isArray(l)||(l=[l]),i=l.length-1;i>=0;i--)o=l[i],r.items.indexOf(o)!=-1&&r.items.splice(r.items.indexOf(o)),o.dispose&&o.dispose();else{for(i=r.items.length-1;i>=0;i--)r.items[i].resize?r.items[i].dispose():r.items.splice(i,1);r.items=null}return!0}}},e.ResizeManager=function(){He("75.5"),e.Manager.call(this,"ResizeManager")},e.ResizeManager.prototype=new e.Manager,e.ResizeManager.prototype.constructor=e.ResizeManager,e.TransformManager=function(t,r){He("75.7");var i=this;this.type="TransformManager",this.persistID=r,this.items=[];function o(c){!localStorage||c&&!c.pressup||i.savePersist(c)}this.add=function(c){var p=[];Array.isArray(c)?p=c:p=[c];for(var v,w=!1,b=0;b<p.length;b++)if(v=p[b],v.transformControls&&(v.originalVisible=v.transformControls.visible),v.toggle&&v.toggle(!1),i.items.length==0&&b==0&&(w=!0),v.type=="Blob"||v.type=="Squiggle")i.persistID||w&&(w=!1,v.controlsVisible=!0,i.currentObject=v),v.on("change",function(E){var S=new $e.Event("transformed");S.transformObject=E.target,S.transformType=E.controlType,i.dispatchEvent(S)}),v.on("controlsshow",function(E){var S=new $e.Event("transformshow");i.currentObject=S.transformObject=E.target,i.dispatchEvent(S)}),v.on("controlshide",function(E){var S=new $e.Event("transformhide");S.transformObject=E.target,i.currentObject=null,i.dispatchEvent(S)}),v.on("update",function(E){var S=new $e.Event("transformed");S.transformObject=E.target,S.transformType=E.controlType,i.dispatchEvent(S)});else if(v.type=="Connectors")i.persistID||w&&(w=!1,i.currentObject=v),v.on("connection",function(E){var S=new $e.Event("transformed");S.transformObject=E.target,S.transformType="connection",i.dispatchEvent(S)});else if(v.type=="Pack")i.persistID||w&&(w=!1,i.currentObject=v),v.on("change",function(E){var S=new $e.Event("transformed");S.transformObject=E.target,S.transformType="change",i.dispatchEvent(S)});else{var _=v.transformControls;i.persistID||w&&v.type!="Layer"&&(w=!1,v.originalVisible&&(_.show(),i.currentObject=v)),v.on("transformed",function(E){var S=new $e.Event("transformed");S.transformObject=E.target,S.transformType=E.transformType,i.dispatchEvent(S)}),v.on("transformshow",function(E){var S=new $e.Event("transformshow");i.currentObject=S.transformObject=E.target,i.dispatchEvent(S)}),v.on("transformhide",function(E){var S=new $e.Event("transformhide");S.transformObject=E.target,i.currentObject=null,i.dispatchEvent(S)})}i.items=i.items.concat(c),i.persist&&!n(i.persistID)&&i.persist(i.persistID)},this.remove=function(c){if(n(c)){i.items=[];return}Array.isArray(c)||(c=[c]);for(var p,v=0;v<c.length;v++){p=c[v],i.currentObject==p&&(i.currentObject=null),p.transformedEvent&&(p.off("transformed",p.transformedEvent),p.transformedEvent=null),p.type=="Blob"||p.type=="Squiggle"?p.controlsVisible=!1:p.transformControls&&p.transformControls.remove();var w=i.items.indexOf(p);w!=-1&&i.items.splice(w,1)}r&&i.savePersist()},this.show=function(c){if(!n(c)){if(c.type=="Blob"||c.type=="Squiggle")c.controlsVisible||(c.controlsVisible=!0);else{var p=c.transformControls;if(!p||p.visible)return;p.show()}i.currentObject=c}},this.hide=function(c){if(!n(c))if(i.currentObject==c&&(i.currentObject=null),c.type=="Blob"||c.type=="Squiggle")c.controlsVisible&&(c.controlsVisible=!1);else{var p=c.transformControls;if(!p||p.visible)return;p.hide()}},this.hideAll=function(c){for(var p,v,w=0;w<i.items.length;w++)if(v=i.items[w],!v||!(v.transformControls||v.update))i.items.splice(w);else{if(i.items[w]==c)continue;v.type=="Blob"||v.type=="Squiggle"?v.controlsVisible&&(v.controlsVisible=!1):(p=i.items[w].transformControls,p.visible&&p.hide())}i.currentObject=null},this.resize=function(){if(i){for(var c,p=0;p<i.items.length;p++)c=i.items[p],!c||!(c.transformControls||c.update)?i.items.splice(p):c.type=="Blob"||c.type=="Squiggle"?c.update():c.transformControls.resize();r&&i.savePersist()}},n(t)||i.add(t);var l="TransformManager persist(persistID) - sorry, must provide id";this.persist=function(c){var p,v;if(n(c)&&Ct){lt(l);return}i.persistID=c;var w=0;if(localStorage&&localStorage[c]){var b=i.persistData=JSON.parse(localStorage[c]);if(b.length==i.items.length)for(v=0;v<i.items.length;v++)b[v].controls&&(i.currentObject=i.items[v]),b[v]&&(b[v].type=="Blob"||b[v].type=="Squiggle")?(i.items[v].points.length!=b[v].points.length&&(i.items[v].points=b[v].points),i.items[v].setData(b[v]),i.items[v]==i.currentObject&&i.currentObject.toggle(!0),w++,w==b.length&&setTimeout(function(){i.dispatchEvent("persistcomplete")},100)):b[v]&&b[v].type=="Connectors"?(i.items[v].setSteps(b[v].steps),i.items[v].loc(b[v].x,b[v].y),i.items[v].sca(b[v].scale),w++,w==b.length&&setTimeout(function(){i.dispatchEvent("persistcomplete")},100)):b[v]&&b[v].type=="Pack"?(i.items[v].setOrder(b[v].order),i.items[v].outerWidth=b[v].outerWidth,i.items[v].outerHeight=b[v].outerHeight,w++,w==b.length&&setTimeout(function(){i.dispatchEvent("persistcomplete")},100)):b[v]&&(n(i.items[v].transformControls)?-function(){var _=p=i.items[v],E=b[v];e.interval(50,function(S){_.transformControls&&(_.transformControls.setData(E),_.dispatchEvent("persistset"),w++,w==b.length&&(setTimeout(function(){_==i.currentObject&&i.currentObject.toggle(!0),i.dispatchEvent("persistcomplete")},100),S.clear()))},20,null,null,"ms")}():(i.items[v].transformControls.setData(b[v]),-function(){var _=p=i.items[v];e.interval(50,function(E){_.dispatchEvent("persistset"),w++,w==b.length&&(setTimeout(function(){_==i.currentObject&&i.currentObject.toggle(!0),i.dispatchEvent("persistcomplete")},100),E.clear())},20,null,null,"ms")}()))}for(v=0;v<i.items.length;v++)p=i.items[v],p.transformedEvent||(p.type=="Blob"||p.type=="Squiggle"?(p.transformedEvent=p.on("change",function(_){_.pressup=!0,o(_)}),p.transformedUEvent=p.on("update",function(_){_.pressup=!0,o(_)}),p.transformedSEvent=p.on("controlsshow",function(_){_.pressup=!0,o(_)}),p.transformedHEvent=p.on("controlshide",function(_){_.pressup=!0,o(_)})):p.type=="Connectors"?p.transformedEvent=p.on("connection",function(_){_.pressup=!0,o(_)}):p.type=="Pack"?p.transformedEvent=p.on("change",function(_){_.pressup=!0,o(_)}):(p.transformedEvent=p.on("transformed",o),p.transformedSEvent=p.on("transformshow",o),p.transformedHEvent=p.on("transformhide",o)))},this.savePersist=function(){for(var c=[],p=0;p<i.items.length;p++){var v=i.items[p];v.type=="Blob"||v.type=="Squiggle"?v.recordData&&c.push(v.recordData()):v.type=="Connectors"?c.push({type:v.type,x:v.x,y:v.y,scale:v.scale,steps:v.getSteps()}):v.type=="Pack"?c.push({type:v.type,outerWidth:v.outerWidth,outerHeight:v.outerHeight,order:v.getOrder()}):v.transformControls&&v.transformControls.recordData&&c.push(v.transformControls.recordData())}i.persistData=c,localStorage[i.persistID]=JSON.stringify(c)},this.clearPersist=function(c){if(n(c)&&Ct){lt(l);return}i.persistData=null,localStorage&&localStorage.removeItem(c)},this.stopPersist=function(){for(var c=0;c<i.items.length;c++){var p=i.items[c];p.transformedEvent&&(p.type=="Blob"||p.type=="Squiggle"?(p.off("change",p.transformedEvent),p.off("update",p.transformedUEvent),p.off("controlsshow",p.transformedSEvent),p.off("controlshide",p.transformedHEvent)):p.type=="Connectors"?p.off("connection",p.transformedEvent):p.type=="Pack"?p.off("change",p.transformedEvent):(p.off("transformed",p.transformedEvent),p.off("transformshow",p.transformedSEvent),p.off("transformhide",p.transformedHEvent)),p.transformedEvent=null,p.transformedUEvent=null,p.transformedSEvent=null,p.transformedHEvent=null)}i.persistData=null},n(r)||i.persist(r),this.dispose=function(c,p){if(n(c)&&(c=!0),i.removeAllEventListeners(),i.persistID&&c&&i.stopPersist(),p)for(var v=0;v<i.items.length;v++){var w=i.items[v];w.type=="Blob"||w.type=="Squiggle"?w.dispose():w.transformControls.dispose()}}},e.extend(e.TransformManager,$e.EventDispatcher,null,"cjsEventDispatcher",!1),e.GuideManager=function(){He("77"),e.Manager.call(this,"GuideManager")},e.GuideManager.prototype=new e.Manager,e.GuideManager.prototype.constructor=e.GuideManager,e.GridManager=function(){He("79"),e.Manager.call(this,"GridManager")},e.GridManager.prototype=new e.Manager,e.GridManager.prototype.constructor=e.GridManager,e.LayoutManager=function(){He("81"),e.Manager.call(this,"LayoutManager")},e.LayoutManager.prototype=new e.Manager,e.LayoutManager.prototype.constructor=e.LayoutManager,e.SelectionSet=function(t){He("81.5"),this.type="SelectionSet",n(t)&&(t=[]),this.selections=t,this.clear=function(){this.selections=[]},this.isSelected=function(r){return this.selections.indexOf(r)>=0},this.add=function(r,i,o,l){if(!n(r)){n(i)&&(n(this.selectionManager)||(i=this.selectionManager.multiple)),n(this.selectionManager)||(this.selectionManager.setCurrent(this),!i&&this.selectionManager.multipleSets&&this.selectionManager.clear()),i||this.clear();var c=this.selections.indexOf(r);if(!(c>=0)){if(this.selections.push(r),!n(o)){Array.isArray(o)||(o=[o]);for(var p=0;p<=o.length;p++)o[p].add(r,i)}if(!n(l))for(Array.isArray(l)||(l=[l]),p=0;p<=l.length;p++)l[p].remove(r,i)}}},this.remove=function(r,i,o,l){if(!n(r)){n(i)&&(n(this.selectionManager)||(i=this.selectionManager.multiple)),n(this.selectionManager)||this.selectionManager.setCurrent(this),i||this.clear();var c=this.selections.indexOf(r);if(n(this.selectionManager)||(this.selectionManager.setCurrent(this),!i&&this.selectionManager.multipleSets&&this.selectionManager.clear()),i||this.clear(),i?c>=0&&this.selections.splice(c,1):this.clear(),!n(o)){Array.isArray(o)||(o=[o]);for(var p=0;p<=o.length;p++)o[p].remove(r,i)}if(!n(l))for(Array.isArray(l)||(l=[l]),p=0;p<=l.length;p++)l[p].add(r,i)}},this.toggle=function(r,i,o,l){this.isSelected(r)?this.remove(r,i,o,l):this.add(r,i,o,l)},this.dispose=function(){return this.clear(),this.selections=null,!0}},e.SelectionManager=function(t,r,i){He("81.6"),this.cjsEventDispatcher_constructor(),this.type="SelectionManager",n(t)&&(t=[]),n(i)&&(i=!0),Array.isArray(t)||(t=[t]),this.sets=t,this.multipleKey=r,this.multipleSets=i,this.multiple=!1;for(var o=this,l=0;l<t.length;l++)t[l].selectionManager=this;this.clear=function(){this.currentSet=null;for(var p=0;p<t.length;p++)t[p].clear()},this.setCurrent=function(p){this.currentSet=p;for(var v=0;v<t.length;v++)t[v]!=p&&(this.multipleSets||t[v].clear())};var c=new $e.Event("keydown");this.eventRemove=c.remove,this.keydownEvent=function(p){p.remove=o.eventRemove,o.multipleKey&&(o.multiple=p[o.multipleKey+"Key"]),o.ctrlKey=p.ctrlKey,o.shiftKey=p.shiftKey,o.metaKey=p.metaKey,o.dispatchEvent(p),p.keyCode==90&&(o.ctrlKey||o.metaKey)&&o.dispatchEvent("undo")},le.addEventListener("keydown",this.keydownEvent),this.keyupEvent=function(p){o.multipleKey&&(o.multiple=p[o.multipleKey+"Key"]),o.ctrlKey=p.ctrlKey,o.shiftKey=p.shiftKey,o.metaKey=p.metaKey,p.remove=o.eventRemove,o.dispatchEvent(p)},le.addEventListener("keyup",this.keyupEvent),this.dispose=function(){this.clear(),le.removeEventListener("keydown",this.keydownEvent),le.removeEventListener("keyup",this.keyupEvent)}},e.extend(e.SelectionManager,$e.EventDispatcher,null,"cjsEventDispatcher",!1),typeof m>"u")var m;e.Bind=function(t,r,i,o,l,c,p,v){var w="connection, bindType, master, masterFilter, couple, smartDecimals, report, setDefault",b;if(b=vt(e.Bind,arguments,w,this))return b;He("81.8"),this.type="Bind";var _=this;n(t)&&localStorage&&n(m)&&(n(r)||r==e.LOCALSTORAGE)?(t="zimBind",r=e.LOCALSTORAGE):t&&t.match(/\/|\./)?(n(r)&&(r=e.GET),t.match(/\?/)?t+="&":t+="?"):t&&n(r)&&(r=e.LOCALSTORAGE),n(c)&&(c=!0),r==e.LOCALSTORAGE&&!localStorage&&(Ct&&lt("Bind() - no localStorage"),_.error="error - no localStorage"),this.connection=t,this.bindType=r,this.master=i,this.masterFilter=o,this.smartDecimals=c,n(p)&&(p=!1),(!m||v)&&(m=this),Object.defineProperty(_,"default",{get:function(){return _==m},set:function(T){!T&&m==_?m=null:T&&(m=_)}}),this.bindType==e.POST&&(_.ajax=new e.Ajax),this.bindings={},this.ids=[],this.data={},this.objIDs=new e.Dictionary(!0),this.toIDs={},this.fromIDs={},this.add=function(T,L,I,C,k){if(n(I)||n(L)||n(T))return _;if(_.bindings[T]){if(_.bindings[T].obj!=L)return Ct&&lt("Bind() - id can be used with only one object"),_}else{_.ids.indexOf(T)<=0&&_.ids.push(T),_.bindings[T]={obj:L,props:[]},!n(k)&&typeof k=="function"&&(_.bindings[T].filter=k);var Y=_.objIDs.at(L);Y?Y.indexOf(T)<0&&Y.push(T):_.objIDs.add(L,[T])}!Array.isArray(I)&&I.constructor!={}.constructor&&(I=[I]);var W=_.bindings[T].props;Array.isArray(I)?e.loop(I,function(F){G(_.toIDs,F,T),G(_.fromIDs,F,T),W.indexOf(F)<0&&W.push(F)}):e.loop(I,function(F,B){(B==e.BOTH||B==e.TO)&&G(_.toIDs,F,T),(B==e.BOTH||B==e.FROM)&&G(_.fromIDs,F,T),W.indexOf(F)<0&&W.push(F)});function G(F,B,q){n(F[B])?F[B]=[q]:F[B].indexOf(q)<0&&F[B].push(q)}return p&&R("Bind Report: ADD ["+T+"]",(I?" "+I:"")+(C?" "+C:"")),_.bindType==e.LOCALSTORAGE?(_.from(null,T,I,C),(!_.data||e.isEmpty(_.data))&&_.to(T,I)):(P("bind",null,[k],_.data,C),_.applyData()),_},this.updatefilter=function(T,L){var I=_.bindings[T];return I&&(n(L)?I.filter&&delete I.filter:typeof L=="function"&&(I.filter=L)),_},this.remove=function(T,L,I,C,k,Y){var W;if(!n(T)&&!Array.isArray(T)&&(T=[T]),!n(T)){W=[];var G=[];e.loop(T,function(de){typeof de=="string"?W.push(de):G.push(de)})}!n(L)&&!Array.isArray(L)&&(L=[L]),n(k)&&(k=!0),T=W.concat(G),T.length==0&&(T=null);var F=E("from",T,L,!1),B=F[0];F=F[1];var q=P("remove",C,B,F,I);if(q=="stop")return;var Z=e.copy(F);n(L)||L.length==0?(W.length>0&&e.loop(W,function(de){re(de,!0)}),G.length>0&&e.loop(G,function(de){W=_.objIDs.at(de),W.length>0&&e.loop(W,function(Q){re(Q,!1)}),_.objIDs.remove(de)})):(W=[],e.loop(F,function(de,Q){var U=_.bindings[de],g=U.props;e.loop(Q,function(d){var h=g.indexOf(d);h>=0&&g.splice(h,1),$(d,de)}),g.length==0&&W.push(de)}),W.length>0&&_.remove(W));function X(de){Y&&typeof Y=="function"&&(l&&(de=e.couple(de)),Y(de)),p&&R("Bind Report: REMOVE"+(I?" ["+I+"]":""),de)}if(k){var ne="type="+_.bindType+"&";_.bindType==e.LOCALSTORAGE?(_.to(),X("success")):_.bindType==e.GET?(q=JSON.stringify(Z),l&&(q=e.couple(q)),e.async(_.connection+ne+"remove="+q,X,"callbackRemove")):_.bindType==e.POST?_.ajax.post(_.connection+ne,Z,X,"remove"):_.bindType==e.SOCKET}function $(de,Q){var U,g;U=_.fromIDs[de],U&&(g=U.indexOf(Q),g>=0&&U.splice(g,1),U.length==0&&delete _.fromIDs[de]),U=_.toIDs[de],U&&(g=U.indexOf(Q),g>=0&&U.splice(g,1),U.length==0&&delete _.toIDs[de])}function re(de,Q){var U=_.bindings[de].obj,g=_.bindings[de].props,d=_.objIDs.at(U),h=d.indexOf(de);h>=0&&d.splice(h,1),Q&&d.length==0&&G.push(U),h=_.ids.indexOf(de),h>=0&&_.ids.splice(h,1),e.loop(g,function(x){$(x,de)}),delete _.bindings[de]}return _};function E(T,L,I){var C=[],k;if(n(L)&&n(I)){if(T=="from"&&_.bindType!=e.LOCALSTORAGE)return e.loop(_.bindings,function(F){F.filter&&C.push(F.filter)}),[C,"full"];k=_.ids}else!n(L)&&!Array.isArray(L)&&(L=[L]),!n(I)&&!Array.isArray(I)&&(I=[I]),L&&(k=[],e.loop(L,function(F){if(typeof F=="string")k.indexOf(F)<0&&k.push(F);else{var B=_.objIDs.at(F);B&&e.loop(B,function(q){k.indexOf(q)<0&&k.push(q)})}}));var Y={};return k?W(I):I&&G(),[C,Y];function W(F){e.loop(k,function(B){var q=_.bindings[B];if(q){q.filter&&C.push(q.filter);var Z=q.obj;e.loop(F||q.props,function(X){var ne=_.toIDs[X];if(ne&&ne.indexOf(B)>=0)if(T=="from")Y[B]||(Y[B]=[]),Y[B].push(X);else{Y[B]||(Y[B]={});var $=Z[X];typeof $=="number"&&_.smartDecimals&&($>1?$=e.decimals($,1):$=e.decimals($,2)),Y[B][X]=e.copy($)}})}})}function G(){var F=[];e.loop(I,function(B){e.loop(_.toIDs[B],function(q){var Z=_.bindings[q];F.indexOf(q)<0&&(Z.filter&&C.push(Z.filter),F.push(q));var X=Z.obj;if(T=="from")Y[q]||(Y[q]=[]),Y[q].push(B);else{Y[q]||(Y[q]={});var ne=X[B];typeof ne=="number"&&_.smartDecimals&&(ne>1?ne=e.decimals(ne,1):ne=e.decimals(ne,2)),Y[q][B]=e.copy(ne)}})})}}this.stopProcess=!1,this.stop=function(){_.stopped=!0};var S=function(){var T=this;T.stop=function(){T.stopped=!0}};function P(T,L,I,C,k){var Y=new S,W=C!=null&&!e.isEmpty(C)&&_.data;if(A(Y,k))return["stop",C];_.masterFilter&&typeof _.masterFilter=="function"&&(C=_.data=_.masterFilter(C,T,k,Y));var G=e.loop(I,function(F){if(typeof F=="function"){if(A(Y,k))return"stop";C=_.data=F(C,T,k,Y)}});return G=="stop"||A(Y,k)?["stop",C]:(L&&typeof L=="function"&&(C=_.data=L(C,T,k,Y)),A(Y,k)?["stop",C]:(W&&!_.data&&Ct&&lt("Bind()"+(T?" ["+T+"]":"")+(k?" ["+k+"]":"")+" - warning, a filter may not have returned data"),["go",C]))}function A(T,L){if(_.stopped||T.stopped)return R("STOP"+(L?" ["+L+"]":""),T.stopped?"process stopped":"bind stopped"),T.stopped?T.stop=null:_.stopped=!1,!0}this.to=function(T,L,I,C,k,Y,W,G){var F="targets, props, extra, filter, smartDecimals, call, lock, unique",B;if(B=vt(_.to,arguments,F))return B;var q=E("to",T,L,k),Z=q[0];q=q[1];var X=P("to",C,Z,q,I);if(q=X[1],X[0]=="stop")return;if(_.bindType==e.LOCALSTORAGE)localStorage[_.connection]=JSON.stringify(q),d(q);else{var ne="type="+_.bindType+"&";if(!q||e.isEmpty(q))return _;if(_.bindType==e.GET){var $=q;e.isJSON($)||($=JSON.stringify($)),l&&($=e.couple($)),p&&R("Bind Report: TO [bindings]",$),$=e.urlEncode($);var re=n(_.master)?"":"&master="+e.urlEncode(i),de=n(W)?"":"&lock="+e.urlEncode(W),Q=n(G)?"":"&unique="+e.urlEncode(G),U=n(I)?"":"&extra="+e.urlEncode(I),g=_.connection+ne+"command=to&data="+$+re+de+Q+U;p&&R("Bind Report: TO [url]",g),e.async(g,d,"callbackTo")}else _.bindType==e.POST&&(_.ajax.master=i,_.ajax.couple=l,_.ajax.lock=W,_.ajax.unique=G,p&&R("Bind Report: TO [bindings]",q),_.ajax.post(_.connection+ne,q,"to",I,d))}function d(h){l&&(h=e.decouple(h)),Y&&typeof Y=="function"&&Y(h),p&&R("Bind Report: TO"+(I?" ["+I+"]":" -"),h)}return _},this.toLock=function(T,L,I,C,k,Y){var W="targets, props, extra, filter, smartDecimals, call",G;if(G=vt(_.toLock,arguments,W))return G;if(_.bindType.toLowerCase()=="localstorage")return _.to(T,L,I,C,k,Y),_;var F=e.makeID();_.from(B,T,L,I,C,F);function B(){_.to(T,L,I,C,k,Y,F)}return _},this.toUnique=function(T,L,I,C,k,Y){var W="targets, props, extra, filter, smartDecimals, call",G;return(G=vt(_.toUnique,arguments,W))?G:(_.to(T,L,I,C,k,Y,null,!0),_)},this.toggleReport=function(T){return n(T)?p=!p:p=T,_},p&&R("Bind Report: CREATE ["+r.toUpperCase()+"]",t+(i?" "+i:""));function R(T,L){_==m?wr(T,L):Tr(T,L)}return this.report=function(){var T="Bind {DATA} Report:",L=e.copy(_.data);return _==m?wr(T,L):Tr(T,L),T="Bind {BINDINGS} Report:",L=e.copy(_.bindings),_==m?wr(T,L):Tr(T,L),_},this.from=function(T,L,I,C,k,Y){var W="call, targets, props, extra, filter, lock",G;if(G=vt(_.from,arguments,W))return G;var F=E("from",L,I,c),B=F[0];F=F[1];var q=P("fromTo",k,B,F,C);if(F=q[1],q[0]=="stop")return;var Z="type="+_.bindType+"&";if(_.bindType==e.LOCALSTORAGE)(!localStorage[_.connection]||localStorage[_.connection]==null)&&(localStorage[_.connection]="{}"),_.data=JSON.parse(localStorage[_.connection]),Q(_.data);else if(_.bindType==e.GET){var X=F;e.isJSON(X)||(X=JSON.stringify(X)),l&&(X=e.couple(X)),p&&R("Bind Report: FROM [bindings]",X),X=e.urlEncode(X);var ne=n(_.master)?"":"&master="+e.urlEncode(i),$=n(Y)?"":"&lock="+e.urlEncode(Y),re=n(C)?"":"&extra="+e.urlEncode(C),de=_.connection+Z+"data="+X+"&command=from"+ne+$+re;p&&R("Bind Report: FROM [url]",de),e.async(de,Q,"callbackFrom")}else _.bindType==e.POST&&(_.ajax.master=i,_.ajax.couple=l,_.ajax.lock=Y,p&&R("Bind Report: FROM [bindings]",F),_.ajax.post(_.connection+Z,F,"from",C,Q));function Q(U){if(_.data=U,l&&(_.data=e.decouple(_.data)),!n(Y))var g=JSON.stringify(_.data);var d=P("from",k,B,_.data,C);if(d[0]!="stop"){var h=!1;(n(Y)||g!=JSON.stringify(_.data))&&(h=!0,_.applyData()),p&&R("Bind Report: FROM"+(C?" ["+C+"]":" -"),h?_.data:"data not applied in toLock()"),T&&typeof T=="function"&&T(_.data)}}return _},this.applyData=function(){return e.loop(_.data,function(T,L){var I=_.bindings[T];if(I){var C=_.bindings[T].obj;e.loop(L,function(k,Y){C[k]=Y})}}),_},this.clear=function(){return _.bindType==e.LOCALSTORAGE&&(localStorage[_.connection]=null),_},this.removeAllBindings=function(T,L){if(n(T)&&(T=!0),this.bindings={},this.ids=[],this.data={},this.objIDs=new e.Dictionary(!0),this.toIDs={},this.fromIDs={},T){var I="type="+_.bindType+"&";if(_.bindType==e.LOCALSTORAGE)_.clear(),k("success");else if(_.bindType==e.GET){var C=n(_.master)?"":"&master="+encodeURI(i);e.async(_.connection+I+"command=removeAll"+C,k,"callbackRemoveAll")}else _.bindType==e.POST&&(_.ajax.master=i,_.ajax.post(_.connection+I,{},"removeAll",null,k,"removeAll"))}function k(Y){L&&typeof L=="function"&&L(Y),p&&R("Bind Report: REMOVEALL",Y)}return _},_},e.Swipe=function(t,r,i,o,l){var c="obj, distance, duration, isometric, overrideNoSwipe",p;if(p=vt(e.Swipe,arguments,c,this))return p;if(He("70"),this.cjsEventDispatcher_constructor(),this.type="Swipe",n(t)||!t.on){lt("zim controls - Swipe():\nPlease pass in object");return}n(r)&&(r=30);var v=y(i);n(i)&&(i=v=="s"?.08:80),this.distance=r,this.duration=i,this.active=!0;var w,b,_,E,S,P,A=this,R,T,L=t.on("mousedown",function(I){if(!A.active||!l&&I.target.zimNoSwipe)return;A.obj=I.target,E=w=I.stageX/e.scaX,S=b=I.stageY/e.scaY,_=!0,A.dispatchEvent("swipedown"),clearTimeout(P),P=setTimeout(function(){_&&(C(),_=!1)},A.duration*(v=="s"?1e3:1)),R=t.on("pressmove",function(k){E=k.stageX/e.scaX,S=k.stageY/e.scaY}),T=t.on("pressup",function(){_&&(C(),_=!1,clearTimeout(P))});function C(){var k=new $e.Event("swipe");if(k.obj=A.obj,k.stageX=I.stageX/e.scaX,k.stageY=I.stageY/e.scaY,k.rawX=I.rawX/e.scaX,k.rawY=I.rawY/e.scaY,k.swipeX=k.swipeY=0,A.direction="none",o){if(Math.abs(E-w)>A.distance||Math.abs(S-b)>A.distance){var Y=Math.atan2(S-b,E-w)*180/Math.PI;Y=(Y+360)%360,Y>=270&&Y<360?(k.swipeY=-1,A.direction="up"):Y>=0&&Y<90?(k.swipeX=1,A.direction="right"):Y>=90&&Y<180?(k.swipeY=1,A.direction="down"):Y>=180&&Y<270&&(k.swipeX=-1,A.direction="left")}}else Math.abs(E-w)>Math.abs(S-b)?(E-w>A.distance&&(k.swipeX=1,A.direction="right"),w-E>A.distance&&(k.swipeX=-1,A.direction="left")):(S-b>A.distance&&(k.swipeY=1,A.direction="down"),b-S>A.distance&&(k.swipeY=-1,A.direction="up"));A.dispatchEvent(k)}});this.disable=function(){A.active=!1},this.enable=function(){A.active=!0},this.dispose=function(){L&&t.off("mousedown",L),R&&t.off("pressmove",R),T&&t.off("pressup",T)}},e.extend(e.Swipe,$e.EventDispatcher,null,"cjsEventDispatcher",!1),e.Swiper=function(t,r,i,o,l,c,p,v,w,b,_,E,S){var P="swipeOn, target, property, sensitivity, swiperType, min, max, damp, integer, factor, loop, pauseTime, otherSwiper",A;if(A=vt(e.Swiper,arguments,P,this))return A;if(He("69.5"),this.cjsEventDispatcher_constructor(),this.type="Swiper",n(t)||!t.getStage||!t.stage){lt("zim.Swiper() - please provide container on stage");return}if(n(r))return;n(o)&&(o=1),n(l)&&(l="horizontal"),n(v)&&(v=.1),n(w)&&(w=!1),n(b)&&(b=1),n(_)&&(_=!1);var R=y(E);n(E)&&(E=R=="s"?.2:200);var T=this,L=t,I,C,k=T.desiredValue=r[i],Y;this.target=r,this.property=i,this.sensitivity=o;var W=!1,G=le.zdf||t.stage?t.stage.frame:{};L.canvas?(Y=L,T.downEvent=L.on("stagemousedown",function(H){W=!0,Q(H),T.moveEvent=L.on("stagemousemove",U),T.upEvent=L.on("stagemouseup",F),T.upEvent2=G.on("mouseupplus",F)})):(Y=L.stage,O(),T.downEvent=L.on("mousedown",Q),T.moveEvent=L.on("pressmove",U),T.upEvent=L.on("pressup",B),T.upEvent2=G.on("mouseupplus",B));function F(){W=!1,L.off("stagemousemove",T.moveEvent),L.off("stagemouseup",T.upEvent),T.dispatchEvent("swipeup")}function B(){W=!1,T.dispatchEvent("swipeup")}var q,Z,X,ne=Math.sqrt(Math.pow(L.width,2)+Math.pow(L.height,2)),$,re,de=!1;function Q(H){de=!0,Y=H.target.stage,X=(L.parent?L.parent:L).localToGlobal(L.x,L.y),W=!0,l=="radial"?($=H.stageX/e.scaX,re=H.stageY/e.scaY,q=Math.atan2(re-X.y,$-X.x)*e.DEG):I=l=="horizontal"?H.stageX/e.scaX:H.stageY/e.scaY,C=T.target[T.property],T.dispatchEvent("swipedown")}function U(H){if(W){if(l=="radial"){T.diff=e.dist($,re,H.stageX/e.scaX,H.stageY/e.scaY),Z=Math.atan2(H.stageY/e.scaY-X.y,H.stageX/e.scaX-X.x)*e.DEG;var N=e.sign(q-Z);if(Math.abs(Z-q)>180){W=!1;return}T.diff=T.diff*N;var ue=Math.max(10,e.dist(X.x,X.y,H.stageX/e.scaX,H.stageY/e.scaY));T.diff*=(ne-ue)/ne}else T.diff=I-(l=="horizontal"?H.stageX/e.scaX:H.stageY/e.scaY);if(S&&(Math.abs(T.diff)<Math.abs(S.diff)?(T.override=!0,S.override=!1):(T.override=!1,S.override=!0)),!T.override){if(Math.abs(T.diff)>0&&(T.swiperMoving=!0),k=C-T.diff*T.sensitivity*b,!n(c)&&!n(p)&&_){var fe=k;k=(k+(p-c)*1e4-c)%(p-c)+c,Math.abs(fe-k)>Math.abs(p-c)*.8&&(T.immediate(k),I=l=="horizontal"?H.stageX/e.scaX:H.stageY/e.scaY,C=T.target[T.property])}else n(c)||(k=Math.max(k,c)),n(p)||(k=Math.min(k,p));T.desiredValue=k,T.dispatchEvent("swipemove")}}}var g=new e.Damp(T.target[T.property],v),d=k,h=k;T.swiperTicker=e.Ticker.add(function(){k==d?k!=h&&(T.pauseTimeout&&T.pauseTimeout.clear(),h=k,T.pauseTimeout=e.timeout(E,function(){W&&T.dispatchEvent("swipepause"),T.pauseTimeout=null})):(h=null,d=k,T.pauseTimeout&&T.pauseTimeout.clear()),T.swiperMoving&&(T.target[T.property]=w?Math.round(g.convert(k)):g.convert(k),de&&!W&&Math.abs(T.target[T.property]-k)<o/2&&(T.swiperMoving=!1,de=!1,T.target[T.property]=k,T.immediate(T.target[T.property]),T.dispatchEvent("swipestop")))},Y),this.immediate=function(H){g.immediate(H),T.target[T.property]=w?Math.round(H):H,T.desiredValue=k=H};var x=!0;Object.defineProperty(T,"enabled",{get:function(){return x},set:function(H){x!=H&&(H?ce():V(),x=!!H)}}),Object.defineProperty(T,"desiredValue",{get:function(){return k},set:function(H){T.swiperMoving=!0,k=H}}),Object.defineProperty(T,"damp",{get:function(){return v},set:function(H){v=H,g.damp=v}});function j(){L.off("stagemousedown",T.downEvent),L.off("stagemousemove",T.moveEvent),L.off("stagemouseup",T.upEvent),G.off("mouseupplus",T.upEvent2)}function O(){L.off("mousedown",T.downEvent),L.off("pressmove",T.moveEvent),L.off("pressup",T.upEvent),G.off("mouseupplus",T.upEvent2)}function V(){L.canvas?j():O(),e.Ticker.remove(T.swiperTicker)}function ce(){L.canvas?T.downEvent=L.on("stagemousedown",T.downEvent):(T.downEvent=L.on("mousedown",T.downEvent),T.moveEvent=L.on("pressmove",T.moveEvent),T.upEvent=L.on("pressup",T.upEvent),T.upEvent2=G.on("mouseupplus",T.upEvent2)),T.immediate(T.target[T.property]),T.swiperTicker=e.Ticker.add(T.swiperTicker,Y)}this.dispose=function(){V(),g=null,T.swiperTicker=null}},e.extend(e.Swiper,$e.EventDispatcher,null,"cjsEventDispatcher",!1),e.MotionController=function(t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,T,L,I,C,k,Y,W){var G="target, type, speed, axis, boundary, map, diagonal, damp, flip, orient, constant, firstPerson, turnSpeed, moveThreshold, stickThreshold, container, localBoundary, mouseMoveOutside, mousedownIncludes, minPercentSpeed, maxPercentSpeed, dampKeyup, rotate",F;if(F=vt(e.MotionController,arguments,G,this))return F;He("69.7"),this.cjsEventDispatcher_constructor(),this.type="MotionController";var B=this,q,Z="zim MotionController(): Please pass in a reference to the stage or a container on the stage";if(n(R))if(le.zdf)q=R=le.zdf.stage;else{lt(Z);return}else if(n(R.stage))if(le.zdf)q=le.zdf.stage;else{lt(Z);return}else q=R.stage;var X=q.frame;n(b)||(W=b),n(t)&&(t=new e.Container(1,1,null,null,!1));var ne=t.type=="Accelerator";if(n(i)&&(i=r=="pressmove"?20:7),!n(r)&&r.type=="DPad"){var $=r;r="manual",n(o)&&(o=$.axis),o=="all"&&(o="both"),$.on("change",function(){B.convert(t.x+$.dirX*i,t.y+$.dirY*i)})}(n(r)||r!="mousemove"&&r!="pressmove"&&r!="pressdrag"&&r!="keydown"&&r!="gamebutton"&&r!="gamestick"&&r!="swipe"&&r!="follow"&&r!="manual")&&(r="mousedown"),n(o)&&(o=ne?"horizontal":"both"),r=="keydown"&&n(c)&&(c=[[65,37],[68,39],[87,38],[83,40]]),r=="gamebutton"&&n(c)&&(E?c=[14,15,e.GamePad.RT,e.GamePad.LT]:c=[14,15,12,13]),r=="gamestick"&&n(c)&&(E?c=[[0,2],[0,2],[1],[1]]:c=[0,0,1,1]),r=="gamestick"&&n(c)&&(c=[0,0,1,1]),n(p)&&(p=!0),(o=="horizontal"||o=="vertical")&&(p=!1),n(v)&&(v=r=="keydown"||r=="gamebutton"?1:r=="pressmove"?.5:.1),n(E)&&(E=!1),n(S)&&(S=i*.4),n(P)&&(P=4),n(A)&&(A=.2),n(L)&&(L=!0),q.mouseMoveOutside=L,n(I)&&(I=[]),Array.isArray(I)||(I=[I]),t.type=="Pen"&&!t.move?I.push(t,t.paper):I.push(t),l&&l.getBounds&&(I?I.indexOf(l)==-1&&I.push(l):I=[l]),t.motionController=this,this.mousedownIncludes=I,n(Y)&&(Y=.3),B.dampKeyup=Y,this.dirX=0,this.dirY=0,this.speed=i,this.turnSpeed=S,this.axis=o,this.target=t,this.moveThreshold=P,this.stickThreshold=A,this.boundary=l,t.zimMCStartAngle=t.rotation;var re=B.speed,de=B.speed,Q=0;B.rotation=t.zimMCStartAngle;var U,g;if(ne){g=R.getBounds();var d;!g||o=="vertical"&&!g.height||o!="vertical"&&!g.width?d=1e3:d=o=="vertical"?g.height:g.width,n(C)&&(C=0),n(k)&&(k=100),n(this.target.percentSpeed)&&(this.target.percentSpeed=(k-C)/2),B.x=d/2,B.y=d/2,U=new e.Proportion(0,d,C,k)}else B.x=this.target.x,B.y=this.target.y;var h=B.scaleX=t.scaleX,x=B.scaleY=t.scaleY,j,O,V,ce,H=!1,N=!1,ue,fe,ae,Ie,ge;if(r=="keydown"||r=="gamebutton"){for(fe=0;fe<4;fe++)Array.isArray(c[fe])||(c[fe]=[c[fe]]);var Be=[0,0,0,0],z=[],Ye=["X","X","Y","Y"],te=[-1,1,-1,1],K={dirX:0,dirY:0};if(r=="keydown")var xe=X.on("keydown",ve);else{Ie=B.gamepad=new e.GamePad;var _e=Ie.on("buttondown",ve)}if(n(_))if(r=="keydown")var Se=X.on("keyup",Ae);else var ie=Ie.on("buttonup",Ae);ge={rotation:0,speedX:B.speed,speedY:B.speed};var pe=e.Ticker.add(function(){if(E){Fe(K);return}var qe=B.speed,Ue=B.speed;if(B.axis=="both"&&K.dirX!=0&&K.dirY!=0){var Ze=oe(K.dirX,K.dirY);qe=Ze.speedX,Ue=Ze.speedY}(B.axis=="horizontal"||B.axis=="both")&&(B.x+=qe*K.dirX),(B.axis=="vertical"||B.axis=="both")&&(B.y+=Ue*K.dirY),De()},q)}else if(r=="mousedown"||r=="mousemove")j=q.on("stage"+r,function(qe){if(q=qe.target.stage,r=="mousedown"){if(Array.isArray(B.mousedownIncludes)||(B.mousedownIncludes=[B.mousedownIncludes]),B.mousedownIncludes.indexOf(R)<0)for(fe=0;fe<R.numChildren;fe++){var Ue=R.getChildAt(fe);if(B.mousedownIncludes.indexOf(Ue)==-1&&Ue.mouseEnabled&&Ue.hitTestPoint&&Ue.hitTestPoint(qe.stageX/e.scaX,qe.stageY/e.scaY))return}B.dispatchEvent("mousedown")}var Ze=R.globalToLocal(L?qe.rawX/e.scaX:qe.stageX/e.scaX,L?qe.rawY/e.scaY:qe.stageY/e.scaY);B.x=Ze.x,B.y=Ze.y,De()});else if(r=="pressmove"||r=="pressdrag"||r=="follow")t.type=="Pen"&&(t.write=!1),j=q.on("stagemousedown",function(qe){var Ue;if(!((t.type=="Pen"||r=="pressmove")&&B.boundary&&!B.boundary.type=="Blob"&&(Ue={x:qe.stageX/e.scaX,y:qe.stageY/e.scaY},Ue.x<B.boundary.x||Ue.x>B.boundary.x+B.boundary.width||Ue.y<B.boundary.y||Ue.y>B.boundary.y+B.boundary.height))&&!(B.boundary&&B.boundary.type=="Blob"&&(r=="pressmove"||r=="pressdrag")&&(Ue={x:qe.stageX/e.scaX,y:qe.stageY/e.scaY},!B.boundary.shape.hitTestPoint(Ue.x,Ue.y)))&&!(r=="pressdrag"&&!t.hitTestPoint(qe.stageX/e.scaX,qe.stageY/e.scaY))){N=!1,Array.isArray(B.mousedownIncludes)||(B.mousedownIncludes=[B.mousedownIncludes]);var Ze=!1;for(B.mouseDownIncludes&&(ue=q.getObjectUnderPoint(qe.stageX,qe.stageY,1)),fe=0;fe<B.mousedownIncludes.length;fe++)ue&&B.mousedownIncludes[fe].hitTestPoint&&B.mousedownIncludes[fe].hitTestPoint(qe.stageX/e.scaX,qe.stageY/e.scaY)&&B.mousedownIncludes[fe].contains(ue)&&(Ze=!0);if(!Ze)for(fe=0;fe<R.numChildren;fe++){var it=R.getChildAt(fe);if(B.mousedownIncludes.indexOf(it)==-1&&it.mouseEnabled&&it.hitTestPoint&&it.hitTestPoint(qe.stageX/e.scaX,qe.stageY/e.scaY))return}var Ve=R.globalToLocal(L?qe.rawX/e.scaX:qe.stageX/e.scaX,L?qe.rawY/e.scaY:qe.stageY/e.scaY);r!="follow"&&r!="pressdrag"&&B.immediate(o=="both"||o=="horizontal"?Ve.x:null,o=="both"||o=="vertical"?Ve.y:null),De(),B.dispatchEvent("mousedown"),H=!0,B.moveX=L?qe.rawX/e.scaX:qe.stageX/e.scaX,B.moveY=L?qe.rawY/e.scaY:qe.stageY/e.scaY,O=q.on("stagemousemove",function(Me){B.moveX=L?Me.rawX/e.scaX:Me.stageX/e.scaX,B.moveY=L?Me.rawY/e.scaY:Me.stageY/e.scaY,r!="follow"&&ye()}),ce&&e.Ticker.remove(ce),r=="follow"&&(ce=e.Ticker.add(ye)),t.type=="Pen"&&(t.write=!0,t.paper.noMouse(),t.zimDragCheck=!0)}}),V=q.on("stagemouseup",function(){t.type=="Pen"&&(t.write=!1,t.paper.mouse(),t.zimDragCheck=!1,N&&t.stopCheck()),ce&&e.Ticker.remove(ce),q.off("stagemousemove",O),H=!1});else if(r=="gamestick"){for(Ie=this.gamepad=new e.GamePad,fe=0;fe<4;fe++)Array.isArray(c[fe])||(c[fe]=[c[fe]]);ge={rotation:t.zimMCStartAngle,speedX:B.speed,speedY:B.speed};var be=Ie.on("data",function(qe){for(K={dirX:0,dirY:0},fe=0;fe<c[0].length;fe++)if(ae=qe.axes[c[0][fe]],Math.abs(ae)>B.stickThreshold){K.dirX=ae;break}for(fe=0;fe<c[2].length;fe++)if(ae=qe.axes[c[2][fe]],Math.abs(ae)>B.stickThreshold){K.dirY=ae;break}if(E){Fe(K);return}B.x+=B.speed*K.dirX,B.y+=B.speed*K.dirY,De()})}else if(r=="swipe")var he=new e.Swiper(q,B,"x",.8),Pe=new e.Swiper(q,B,"y",.8,!1),Re=he.on("swipemove",function(){De()});function ve(qe){var Ue=r=="keydown"?qe.keyCode:qe.buttonCode,Ze;for(fe=0;fe<4;fe++)if(c[fe].indexOf(Ue)>-1){if(!p&&B.axis=="both"&&(K.dirX=K.dirY=0),K["dir"+Ye[fe]]=te[fe],Be[fe]=1,Ze=z.indexOf(fe),Ze==0)return;Ze>0&&z.splice(Ze,1),z.unshift(fe);return}}function Ae(qe){var Ue=r=="keydown"?qe.keyCode:qe.buttonCode,Ze;for(fe=0;fe<4;fe++)if(c[fe].indexOf(Ue)>-1){if(Be[fe]=0,Ze=z.indexOf(fe),Ze>=0&&z.splice(Ze,1),B.axis!="both"||p)K["dir"+Ye[fe]]=-Be[Math.floor(fe/2)*2]+Be[Math.floor(fe/2)*2+1];else if(z.length>0){K["dir"+Ye[fe]]=0;var it=z[0];K["dir"+Ye[it]]=te[it]}else K.dirX=K.dirY=0;return}}function ye(){var qe=R.globalToLocal(B.moveX,B.moveY);B.x=qe.x,B.y=qe.y,De(),t.type=="Pen"&&!N&&t.drawing&&(N=!0)}function Fe(qe){ge.rotation+=qe.dirX*B.turnSpeed,B.rotation=ge.rotation,ge.speedX=Math.sin(ge.rotation*Math.PI/180)*B.speed*-qe.dirY,ge.speedY=-Math.cos(ge.rotation*Math.PI/180)*B.speed*-qe.dirY,B.x+=ge.speedX,B.y+=ge.speedY}function De(){var qe=B.x-(ne?B.target.percentSpeed:B.target.x),Ue=B.y-(ne?B.target.percentSpeed:B.target.y),Ze=oe(qe,Ue);if(re=Ze.speedX,de=Ze.speedY,!!W){if(n(Ze.angle)||(B.rotation=Ze.angle+t.zimMCStartAngle),n(B.rotation)){B.rotation=B.target.rotation;return}B.rotation+=Q;var it=ke(B.rotation),Ve=B.target.rotation=ke(B.target.rotation);Math.abs(it-Ve)>180&&(Ve>it?Ve-=360:it-=360),B.dampR.immediate(Ve),B.target.rotation=Ve,B.rotation=it}}function ke(qe){return(qe%360+360)%360}function oe(qe,Ue){var Ze=B.speed,it=B.speed,Ve,Me=Math.sqrt(Math.pow(qe,2)+Math.pow(Ue,2));return Me>0&&(Ze=Math.abs(qe)/Me*B.speed,it=Math.abs(Ue)/Me*B.speed,Ve=90-Math.atan2(qe,Ue)*180/Math.PI),{speedX:Ze,speedY:it,angle:Ve}}var Ge=this.x,We=this.y,Qe=this.x,st=this.y,yt=this.x=ne?d/2:this.target.x,Le=this.y=ne?d/2:this.target.y;this.dampX=new e.Damp(yt,v),this.dampY=new e.Damp(Le,v),this.dampR=new e.Damp(this.target.rotation,v);var ze=0,ot=0,Ce=e.Ticker.add(function(){if(r=="manual"&&De(),B.boundary&&B.boundary.type!="Blob"&&(B.x=e.constrain(B.x,B.boundary.x,B.boundary.x+B.boundary.width),B.y=e.constrain(B.y,B.boundary.y,B.boundary.y+B.boundary.height)),B.axis=="horizontal"||B.axis=="both"){if(B.dirX=e.sign(B.x-yt),Math.abs(B.x-yt)<re?yt=B.x:yt+=B.dirX*re,K&&K.dirX==0){var qe=B.boundary?B.boundary.width/2:q.width/2,Ue=B.x-(B.x-qe)*(ne?B.dampKeyup:0);yt=Ue,B.x=yt}ne&&g&&g.width?B.target.percentSpeed=U.convert(B.dampX.convert(yt)):B.target.x=B.dampX.convert(yt)}if(B.axis=="vertical"||B.axis=="both"){if(B.dirY=e.sign(B.y-Le),Math.abs(B.y-Le)<de?Le=B.y:Le+=e.sign(B.y-Le)*de,K&&K.dirY==0){qe=B.boundary?B.boundary.height/2:q.height/2;var Ze=B.y-(B.y-qe)*(ne?B.dampKeyup:0);Le=Ze,B.y=Le}ne&&g&&g.height?B.target.percentSpeed=U.convert(B.dampY.convert(Le)):B.target.y=B.dampY.convert(Le)}if(B.boundary&&B.boundary.type=="Blob"&&(B.boundary.shape.hitTestPoint(B.target.x,B.target.y)?(Ge=B.target.x,We=B.target.y):(B.target.x=B.x=Ge,B.target.y=B.y=We,B.immediate(Ge,We))),r=="pressmove"&&H&&B.dispatchEvent("pressing"),v==1?(B.movingX=Math.round(Qe-B.x)!=0,B.movingY=Math.round(st-B.y)!=0,Qe=B.x,st=B.y):(B.movingX=Math.abs(yt-(ne?B.target.percentSpeed:B.target.x))>B.moveThreshold,B.movingY=Math.abs(Le-(ne?B.target.percentSpeed:B.target.y))>B.moveThreshold),B.moving&&!(B.movingX||B.movingY)?B.dispatchEvent("stopmoving"):!B.moving&&(B.movingX||B.movingY)&&B.dispatchEvent("startmoving"),B.moving=B.movingX||B.movingY,B.moving&&B.dispatchEvent("moving"),B.dirX!=ze||B.dirY!=ot){var it=new $e.Event("change"),Ve;B.dirX!=ze?(Ve=["left",null,"right"],it.dir=Ve[B.dirX+1],ze=B.dirX,!t.zimMCStartAngle&&(w=="horizontal"||w=="both")&&(B.scaleX=t.scaleX=B.dirX?Math.abs(t.scaleX)*B.dirX:t.scaleX,h!=0&&Math.round(B.scaleX/h)==-1?Q=180:Q=0)):(Ve=["up",null,"down"],it.dir=Ve[B.dirY+1],ot=B.dirY,!t.zimMCStartAngle&&(w=="vertical"||w=="both")&&(B.scaleY=t.scaleY=B.dirY?-Math.abs(t.scaleY)*B.dirY:t.scaleY,x!=0&&Math.round(B.scaleY/x)==-1?Q=180:Q=0)),B.dispatchEvent(it)}W&&!n(B.rotation)&&(B.target.rotation=B.dampR.convert(B.rotation))},q);this.immediate=function(qe,Ue,Ze){return!n(qe)&&B.dampX&&(B.dampX.immediate(qe),ne?B.x=B.target.percentSpeed=yt=qe:B.x=B.target.x=yt=qe,he&&he.immediate(qe)),!n(Ue)&&B.dampY&&(B.dampY.immediate(Ue),ne?B.y=B.target.percentSpeed=Le=Ue:B.y=B.target.y=Le=Ue,Pe&&Pe.immediate(Ue)),!n(Ze)&&B.dampR&&(B.dampR.immediate(Ze),B.rotation=B.target.rotation=Ze),Ge=B.x,We=B.y,B},this.convert=function(qe,Ue){n(qe)||(B.x=qe),n(Ue)||(B.y=Ue),De()},Object.defineProperty(B,"pausingSpeed",{get:function(){return B.speed},set:function(qe){B.speed=qe}}),this.paused=!1;var me;this.pause=function(qe,Ue,Ze){return n(qe)&&(qe=!0),n(Ue)&&(Ue=0),n(Ze)&&(Ze=!1),qe?(me=B.speed,Ue>0?(e.animate({target:B,obj:{pausingSpeed:0},ticker:!1,time:Ue,call:function(){B.speed=0,B.paused=!0,B.enabled=!1,B.immediate(B.target.x,B.target.y),B.dispatchEvent("pause")}}),Ze&&(H=!1,O&&q.off("stagemousemove",O),ce&&e.Ticker.remove(ce),t.type=="Pen"&&(t.write=!1,t.zimDragCheck=!1),V&&q.off("stagemouseup",V),N&&t.stopCheck(),r=="keydown"?Se&&X.off("keyup",Se):ie&&Ie.off("buttonup",ie))):(B.speed=0,B.paused=!0,B.enabled=!1,B.immediate(B.target.x,B.target.y),setTimeout(function(){B.dispatchEvent("pause")},10))):(B.enabled=!0,Ue>0?e.animate({target:B,obj:{pausingSpeed:me},ticker:!1,time:Ue,call:function(){B.speed=me,B.paused=!1}}):(B.speed=me,B.paused=!1)),B};var Ke=!0;Object.defineProperty(B,"enabled",{get:function(){return Ke},set:function(qe){Ke!=qe&&(qe?(ut(),B.paused=!1):(et(),B.paused=!0),Ke=!!qe)}});function ut(){r=="keydown"?(xe=X.on("keydown",xe),Se&&(Se=X.on("keyup",Se)),pe=e.Ticker.add(pe,q)):r=="gamebutton"?(_e=Ie.on("buttondown",_e),ie&&(ie=Ie.on("buttonup",ie)),pe=e.Ticker.add(pe,q)):r=="gamestick"?be=Ie.on("data",be):r=="swipe"?(he.enabled=!0,Pe.enabled=!0,Re&&(Re=he.on("swipemove",Re))):r=="mousedown"||r=="mousemove"?j=q.on("stage"+r,j):r=="pressmove"&&(j=q.on("stagemousedown",j),O&&(O=q.on("stagemousemove",O)),V&&(V=q.on("stagemouseup",V))),Ce=e.Ticker.add(Ce,q)}function et(){r=="keydown"?(X.off("keydown",xe),X.off("keyup",Se),e.Ticker.remove(pe)):r=="gamebutton"?(Ie.off("buttondown",_e),Ie.off("buttonup",ie),e.Ticker.remove(pe)):r=="gamestick"?Ie.off("data",be):r=="swipe"?(he.enabled=!1,Pe.enabled=!1,he.off("swipemove",Re)):r=="mousedown"||r=="mousemove"?q.off("stage"+r,j):r=="pressmove"&&(q.off("stagemousedown",j),q.off("stagemousemove",O),q.off("stagemouseup",V)),e.Ticker.remove(Ce)}this.dispose=function(){et(),Ie&&Ie.dispose(),he&&he.dispose(),Pe&&he.dispose()}},e.extend(e.MotionController,$e.EventDispatcher,"enabled","cjsEventDispatcher"),e.GamePad=function(){if(He("69.8"),this.type="GamePad",this.cjsEventDispatcher_constructor(),!navigator.getGamepads){this.error=!0,Ct&&lt("zim.GamePad() - no browswer support");return}var t;le.addEventListener("gamepadconnected",i),this.currentIndex=0;var r=this;function i(p){r.connected=!0,l("gamepadconnected",p);var v=navigator.getGamepads()[r.currentIndex];r.lastData=[];for(var w=0;w<v.buttons.length;w++)r.lastData[w]=v.buttons[w].pressed;function b(){if(t=requestAnimationFrame(b),r.data=navigator.getGamepads()[r.currentIndex],!!r.data){for(var _=r.buttons=[],E,S=0;S<r.data.buttons.length;S++)_[S]=r.data.buttons[S].pressed,_[S]!=r.lastData[S]&&(r.lastData[S]=_[S],_[S]?E=new $e.Event("buttondown"):E=new $e.Event("buttonup"),E.buttonCode=S,E.button=D[S],r.dispatchEvent(E));E=new $e.Event("data"),E.axes=r.axes=r.data.axes,E.buttons=r.buttons,r.dispatchEvent(E)}}b()}var o=setInterval(function(){navigator.getGamepads&&navigator.getGamepads()[0]&&(r.connected||i(),clearInterval(o))},500);function l(p,v){var w=new $e.Event(p);w.index=v.gamepad.index,w.id=v.gamepad.id,w.buttons=v.gamepad.buttons,w.axes=v.gamepad.axes,r.dispatchEvent(w)}var c=function(p){p.gamepad.index==r.currentIndex&&(cancelAnimationFrame(t),r.connected=!1,r.dispatchEvent("gamepaddisconnected"))};le.addEventListener("gamepaddisconnected",c),this.dispose=function(){le.removeEventListener("gamepadconnected",i),le.removeEventListener("gamepaddisconnected",c),cancelAnimationFrame(t),clearInterval(o),r.connected=!1}};var D=["A","B","X","Y","LB","RB","LT","RT","BACK","START","LS","RS","DPAD_UP","DPAD_DOWN","DPAD_LEFT","DPAD_RIGHT"];for(Cn=0;Cn<D.length;Cn++)e.GamePad[D[Cn]]=Cn;var J=["LSX","LSY","RSX","RSY"];for(Cn=0;Cn<J.length;Cn++)e.GamePad[J[Cn]]=Cn;e.extend(e.GamePad,$e.EventDispatcher,null,"cjsEventDispatcher"),e.Portal=function(t,r){var i="obj, lands",o;if(o=vt(e.Portal,arguments,i,this))return o;if(He("69.96"),n(t)||!t.stage)return;this.type="Portal";var l=this,c=r&&r.numChildren&&r.numChildren>0;if(c){var p=r.getChildAt(r.numChildren-1),v=r.getChildAt(r.numChildren-2);r.setChildIndex(v,r.numChildren-1),v.setMask(t)}function w(){r.setChildIndex(p,0),p=v,v=r.getChildAt(r.numChildren-2),r.setChildIndex(v,r.numChildren-1),p.setMask(null),v.setMask(t),t.stage.update()}t.on(e.mobile()?"mousedown":"mouseover",function(){l._enabled&&(c&&w(),l.dispatchEvent("enter"))}),t.on(e.mobile()?"pressup":"mouseout",function(){l._enabled&&l.dispatchEvent("exit")}),Object.defineProperty(this,"portal",{get:function(){return t},set:function(b){if((n(b)||!b.stage)&&Ct){lt("zim.Portal() - please provide a Display Object to act as the portal");return}v.setMask(t)}}),Object.defineProperty(this,"currentLand",{get:function(){return p},set:function(b){if(r.contains(b))for(;b!=p;)w()}}),Object.defineProperty(this,"nextLand",{get:function(){return v},set:function(){if(Ct){lt("zim.Portal() - nextLand is read only - remake Portal to change");return}}}),this._enabled=!0,Object.defineProperty(l,"enabled",{get:function(){return l._enabled},set:function(b){l._enabled=b}})},e.extend(e.Portal,$e.EventDispatcher,null,"cjsEventDispatcher",!1),le.zimContactListener=null;var se,we;function Te(t,r,i,o,l,c,p,v,w,b,_,E){if(He("69.97"),n(i)&&(i=0),o=="rectangle")t.body=t.physics.makeRectangle(t.width-i,t.height-i,r,l,p,v,w,b,_,c,E);else if(o=="circle")t.body=t.physics.makeCircle(t.width/2-i,r,l,p,v,w,b,_,c,E);else if(o=="triangle")n(t.a)&&(t.a=t.width,t.b=t.c=Math.sqrt(Math.pow(t.a/2,2)+Math.pow(t.height,2))),t.body=t.physics.makeTriangle(t.a-i,t.b-i,t.c-i,r,l,p,v,w,b,_,c,E);else if(o=="poly"){var S=[];t.reg(0,0,!0);var P=t;t.scale!=1&&(P=t.clone().transformPoints("scale",t.scale)),i&&(P=t.clone().transformPoints("scale",Math.max(0,1-i/((t.width+t.height)/4)))),e.loop(P.points,function(R){S.push({x:R[0],y:R[1]})}),t.body=t.physics.makePoly(S,t.width,t.height,r,l,p,v,w,b,_,c,E)}t.body.x=t.x,t.body.y=t.y,t.body.rotation=t.rotation,t.physics.addMap(t.body,t),t.impulse=function(R,T,L,I){n(R)&&(R=0),n(T)&&(T=0);var C=t.body.GetWorldCenter();return n(L)&&(L=C.x*t.physics.scale),n(I)&&(I=C.y*t.physics.scale),t.body.ApplyImpulse(new le.b2Vec2(R,T),new le.b2Vec2(L/t.physics.scale,I/t.physics.scale)),t},t.force=function(R,T,L,I){n(R)&&(R=0),n(T)&&(T=0);var C=t.body.GetWorldCenter();return n(L)&&(L=C.x*t.physics.scale),n(I)&&(I=C.y*t.physics.scale),t.body.ApplyForce(new le.b2Vec2(R,T),new le.b2Vec2(L/t.physics.scale,I/t.physics.scale)),t},t.setLinearVelocity=function(R,T){return t.body.SetLinearVelocity(new le.b2Vec2(R,T)),t},t.setAngularVelocity=function(R){return t.body.SetAngularVelocity(R),t},t.spin=function(R){return n(R)&&(R=10),t.body.ApplyTorque(R*1e3),t},t.torque=function(R){return n(R)&&(R=10),t.body.ApplyTorque(R),t},t.follow=function(R,T,L,I,C,k,Y,W,G,F,B,q){var Z="damp, dampY, leftOffset, rightOffset, upOffset, downOffset, offsetDamp, offsetDampY, horizontal, vertical, borderLock, borderOriginal",X;return(X=vt(t.follow,arguments,Z))?X:(t.physics.follow(t,R,T,L,I,C,k,Y,W,G,F,B,q),t)},t.noFollow=function(){return t.physics.follow(null),t},t.control=function(R,T,L,I,C){var k="type, speed, speedY, horizontal, vertical",Y;return(Y=vt(t.control,arguments,k))?Y:(t.physics.control(t,R,T,L,I,C),t)},t.customControl=function(R,T,L){var I="dir, speed, speedY",C;return(C=vt(t.customControl,arguments,I))?C:(t.physics.customControl(R,T,L),t)},t.noControl=function(){return t.physics.noControl(t),t},t.sleep=function(){return t.body.SetAwake(!1),t},t.wake=function(){return t.body.SetAwake(!0),t};function A(){le.zimContactListener=new le.b2ContactListener,se=new e.Dictionary(!0),we=new e.Dictionary(!0),le.zimContactListener.BeginContact=R,le.zimContactListener.EndContact=T;function R(L){var I=se.at(L.m_fixtureB.GetBody());I&&I(L.m_fixtureA.GetBody().zimObj,L.m_fixtureA.GetBody()),I=se.at(L.m_fixtureA.GetBody()),I&&I(L.m_fixtureB.GetBody().zimObj,L.m_fixtureB.GetBody())}function T(L){var I=we.at(L.m_fixtureB.GetBody());I&&I(L.m_fixtureA.GetBody().zimObj,L.m_fixtureA.GetBody()),I=we.at(L.m_fixtureA.GetBody()),I&&I(L.m_fixtureB.GetBody().zimObj,L.m_fixtureB.GetBody())}t.physics.world.SetContactListener(le.zimContactListener)}t.contact=function(R){return le.zimContactListener||A(),se.add(t.body,R),t},t.noContact=function(){return se.remove(t.body),t},t.contactEnd=function(R){return le.zimContactListener||A(),we.add(t.body,R),t},t.noContactEnd=function(){return we.remove(t.body),t},t.hasOwnProperty("dynamic")||Object.defineProperty(t,"dynamic",{get:function(){return t.body.GetType()==2},set:function(R){t.body.SetType(R==!0?2:0)}})}for(e.BlurEffect=function(t,r,i,o,l,c){var p="blurX, blurY, quality, style, group, inherit",v;if(v=vt(e.BlurEffect,arguments,p,this))return v;He("69.972"),this.group=l;var w=o===!1?{}:e.getStyle("BlurEffect",l,c);n(t)&&(t=w.blurX!=null?w.blurX:10),n(r)&&(r=w.blurY!=null?w.blurY:10),n(i)&&(i=w.quality!=null?w.quality:1);var b=_(t,r,i);this.veeObj={blurX:b[0],blurY:b[1],quality:b[2]};function _(){return arguments}t=ct(t),r=ct(r),i=ct(i),this.createjsBlurFilter_constructor(t,r,i),this.type="BlurEffect",this.clone=function(E){return new e.BlurEffect(E||!e.isPick(b[0])?t:b[0],E||!e.isPick(b[1])?r:b[1],E||!e.isPick(b[2])?i:b[2],o,this.group,c)}},e.extend(e.BlurEffect,$e.BlurFilter,"clone","createjsBlurFilter",!1),e.GlowEffect=function(t,r,i,o,l,c,p,v,w,b,_,E){var S="color, alpha, blurX, blurY, strength, quality, inner, knockout, hideObject, style, group, inherit",P;if(P=vt(e.GlowEffect,arguments,S,this))return P;He("69.9725"),this.group=_;var A=b===!1?{}:e.getStyle("GlowEffect",_,E);n(t)&&(t=A.color!=null?A.color:e.white),n(r)&&(r=A.alpha!=null?A.alpha:1),n(i)&&(i=A.blurX!=null?A.blurX:30),n(o)&&(o=A.blurY!=null?A.blurY:30),n(l)&&(l=A.strength!=null?A.strength:1),n(c)&&(c=A.quality!=null?A.quality:1),n(p)&&(p=A.inner!=null?A.inner:!1),n(v)&&(v=A.knockout!=null?A.knockout:!1),n(w)&&(w=A.hideObject!=null?A.hideObject:!1);var R=T(t,r,i,o,l,c,p,v,w);this.veeObj={color:R[0],alpha:R[1],blurX:R[2],blurY:R[3],strength:R[4],quality:R[5],inner:R[6],knockout:R[7],hideObject:R[8]};function T(){return arguments}i=ct(i),o=ct(o),c=ct(c),t=ct(t),this.alpha=ct(r),this.strength=ct(l),this.inner=ct(p),this.knockout=ct(v),this.hideObject=ct(w),this.createjsBlurFilter_constructor(i,o,c),this.type="GlowEffect",this.usesContext=!0,this.applyFilter=function(L,I,C,k,Y,W,G,F){if((this.alpha<=0||this.strength<=0)&&!this.knockout)return!0;W=W||L,G===void 0&&(G=I),F===void 0&&(F=C);var B=W.getImageData(G,F,k,Y),q=B.data,Z=document.createElement("canvas");Z.width=k,Z.height=Y;for(var X=Z.getContext("2d",{willReadFrequently:!0}),ne=X.getImageData(0,0,k,Y),$=ne.data,re=this.inner,de=this._red,Q=this._green,U=this._blue,g=0,d=$.length;g<d;g+=4){var h=g+3,x=q[h];re?x!==255&&($[g]=de,$[g+1]=Q,$[g+2]=U,$[h]=255-x):x!==0&&($[g]=de,$[g+1]=Q,$[g+2]=U,$[h]=x)}X.putImageData(ne,0,0);var j=this.strength;if(0<j){this.createjsBlurFilter_applyFilter(X,0,0,k,Y),255<j&&(j=255);for(var O=1;O<j;O++)X.drawImage(Z,0,0)}var V=this.alpha;V<0?V=0:1<V&&(V=1);var ce;return this.knockout?re?ce="source-in":ce="source-out":this.hideObject?re?ce="source-in":ce="copy":re?ce="source-atop":ce="destination-over",W.save(),W.setTransform(1,0,0,1,0,0),W.globalAlpha=V,W.globalCompositeOperation=ce,W.drawImage(Z,G,F),W.restore(),!0},Object.defineProperty(this,"color",{get:function(){return this._red<<16|this._green<<8|this._blue},set:function(L){L=e.convertColor(L,"hexNumber"),this._red=L>>16&255,this._green=L>>8&255,this._blue=L&255}}),this.color=t,this.clone=function(L){return new e.GlowFilter(L||!e.isPick(R[0])?t:R[0],L||!e.isPick(R[1])?r:R[1],L||!e.isPick(R[2])?i:R[2],L||!e.isPick(R[3])?o:R[3],L||!e.isPick(R[4])?c:R[4],L||!e.isPick(R[5])?l:R[5],L||!e.isPick(R[6])?p:R[6],L||!e.isPick(R[7])?v:R[7],L||!e.isPick(R[8])?v:R[8],b,this.group,E)}},e.extend(e.GlowEffect,$e.BlurFilter,["clone","applyFilter"],"createjsBlurFilter",!1),e.ShadowEffect=function(t,r,i,o,l,c,p,v,w,b,_,E,S,P){var A="distance, angle, color, alpha, blurX, blurY, strength, quality, inner, knockout, hideObject, style, group, inherit",R;if(R=vt(e.ShadowEffect,arguments,A,this))return R;He("69.973"),this.group=S;var T=E===!1?{}:e.getStyle("ShadowEffect",S,P);n(t)&&(t=T.distance!=null?T.distance:10),n(r)&&(r=T.angle!=null?T.angle:45),n(i)&&(i=T.color!=null?T.color:e.black),n(o)&&(o=T.alpha!=null?T.alpha:.4),n(l)&&(l=T.blurX!=null?T.blurX:15),n(c)&&(c=T.blurY!=null?T.blurY:15),n(p)&&(p=T.strength!=null?T.strength:1),n(v)&&(v=T.quality!=null?T.quality:1),n(w)&&(w=T.inner!=null?T.inner:!1),n(b)&&(b=T.knockout!=null?T.knockout:!1),n(_)&&(_=T.hideObject!=null?T.hideObject:!1);var L=I(t,r,i,o,l,c,p,v,w,b,_);this.veeObj={distance:L[0],angle:L[1],color:L[2],alpha:L[3],blurX:L[4],blurY:L[5],strength:L[6],quality:L[7],inner:L[8],knockout:L[9],hideObject:L[10]};function I(){return arguments}l=ct(l),c=ct(c),v=ct(v),i=ct(i),t=ct(t),r=ct(r);var C=this;this.alpha=ct(o),this.strength=ct(p),this.inner=ct(w),this.knockout=ct(b),this.hideObject=ct(_),this.createjsBlurFilter_constructor(l,c,v),this.type="ShadowEffect",this.usesContext=!0,Object.defineProperty(this,"angle",{get:function(){return r},set:function(Y){r=Y=(Y%360+360)%360,k(t,Y)}}),this.angle=r,Object.defineProperty(this,"distance",{get:function(){return t},set:function(Y){t=Y,k(Y,r)}}),this.distance=t;function k(Y,W){var G=W*e.RAD;C._offsetX=Math.cos(G)*Y,C._offsetY=Math.sin(G)*Y}Object.defineProperty(this,"color",{get:function(){return this._red<<16|this._green<<8|this._blue},set:function(Y){Y=e.convertColor(Y,"hexNumber"),this._red=Y>>16&255,this._green=Y>>8&255,this._blue=Y&255}}),this.color=i,this.applyFilter=function(Y,W,G,F,B,q,Z,X){if((this.alpha<=0||this.strength<=0)&&!this.knockout&&!this.hideObject)return!0;q=q||Y,Z===void 0&&(Z=W),X===void 0&&(X=G);var ne=q.getImageData(Z,X,F,B),$=ne.data,re=document.createElement("canvas");re.width=F,re.height=B;for(var de=re.getContext("2d",{willReadFrequently:!0}),Q=de.getImageData(0,0,F,B),U=Q.data,g=this.inner,d=this._red,h=this._green,x=this._blue,j=0,O=U.length;j<O;j+=4){var V=j+3,ce=$[V];g?ce!==255&&(U[j]=d,U[j+1]=h,U[j+2]=x,U[V]=255-ce):ce!==0&&(U[j]=d,U[j+1]=h,U[j+2]=x,U[V]=ce)}de.putImageData(Q,0,0);var H=this.strength;if(0<H){this.createjsBlurFilter_applyFilter(de,0,0,F,B),255<H&&(H=255);for(var N=1;N<H;N++)de.drawImage(re,0,0)}var ue=this.alpha;ue<0?ue=0:1<ue&&(ue=1);var fe;return this.knockout?g?fe="source-in":fe="source-out":this.hideObject?g?fe="source-in":fe="copy":g?fe="source-atop":fe="destination-over",q.save(),q.setTransform(1,0,0,1,0,0),q.globalAlpha=ue,q.globalCompositeOperation=fe,q.drawImage(re,Z+this._offsetX,X+this._offsetY),q.restore(),!0},this.getBounds=function(Y){var W=this.createjsBlurFilter_getBounds(Y),G=this._offsetX,F=this._offsetY;return G!==0&&(G<0?(W.x+=G,W.width+=-G):W.width+=G),F!==0&&(F<0?(W.y+=F,W.height+=-F):W.height+=F),W},this.clone=function(Y){return new e.ShadowFilter(Y||!e.isPick(L[0])?t:L[0],Y||!e.isPick(L[1])?r:L[1],Y||!e.isPick(L[2])?i:L[2],Y||!e.isPick(L[3])?o:L[3],Y||!e.isPick(L[4])?l:L[4],Y||!e.isPick(L[5])?c:L[5],Y||!e.isPick(L[6])?v:L[6],Y||!e.isPick(L[7])?p:L[7],Y||!e.isPick(L[8])?w:L[8],Y||!e.isPick(L[9])?b:L[9],Y||!e.isPick(L[10])?_:L[10],E,this.group,P)}},e.extend(e.ShadowEffect,$e.BlurFilter,["clone","getBounds","applyFilter"],"createjsBlurFilter",!1),e.ColorEffect=function(t,r,i,o,l,c,p,v,w,b,_){var E="redMultiplier, greenMultiplier, blueMultiplier, alphaMultiplier, redOffset, greenOffset, blueOffset, alphaOffset, style, group, inherit",S;if(S=vt(e.ColorEffect,arguments,E,this))return S;He("69.9735"),this.group=b;var P=w===!1?{}:e.getStyle("ColorEffect",b,_);n(t)&&(t=P.redMultiplier!=null?P.redMultiplier:1),n(r)&&(r=P.greenMultiplier!=null?P.greenMultiplier:1),n(i)&&(i=P.blueMultiplier!=null?P.blueMultiplier:1),n(o)&&(o=P.alphaMultiplier!=null?P.alphaMultiplier:1),n(l)&&(l=P.redOffset!=null?P.redOffset:0),n(c)&&(c=P.greenOffset!=null?P.greenOffset:0),n(p)&&(p=P.blueOffset!=null?P.blueOffset:0),n(v)&&(v=P.alphaOffset!=null?P.alphaOffset:0);var A=R(t,r,i,o,l,c,p,v);this.veeObj={redMultiplier:A[0],greenMultiplier:A[1],blueMultiplier:A[2],alphaMultiplier:A[3],redOffset:A[4],greenOffset:A[5],blueOffset:A[6],alphaOffset:A[7]};function R(){return arguments}t=ct(t),r=ct(r),i=ct(i),o=ct(o),l=ct(l),c=ct(c),p=ct(p),v=ct(v),this.createjsColorFilter_constructor(t,r,i,o,l,c,p,v),this.type="ColorEffect",this.clone=function(T){return new e.ColorEffect(t,r,i,o,l,c,p,v,T||!e.isPick(A[0])?t:A[0],T||!e.isPick(A[1])?r:A[1],T||!e.isPick(A[2])?i:A[2],T||!e.isPick(A[2])?o:A[3],T||!e.isPick(A[2])?l:A[4],T||!e.isPick(A[2])?c:A[5],T||!e.isPick(A[2])?p:A[6],T||!e.isPick(A[2])?v:A[7],w,this.group,_)}},e.extend(e.ColorEffect,$e.ColorFilter,"clone","createjsColorFilter",!1),e.MultiEffect=function(t,r,i,o,l,c,p){var v="hue, saturation, brightness, contrast, style, group, inherit",w;if(w=vt(e.MultiEffect,arguments,v,this))return w;He("69.974"),this.group=c;var b=l===!1?{}:e.getStyle("MultiEffect",c,p);n(t)&&(t=b.hue!=null?b.hue:0),n(r)&&(r=b.saturation!=null?b.saturation:0),n(i)&&(i=b.brightness!=null?b.brightness:0),n(o)&&(o=b.contrast!=null?b.contrast:0);var _=E(t,r,i,o);this.veeObj={hue:_[0],saturation:_[1],brightness:_[2],contrast:_[3]};function E(){return arguments}t=ct(t),this.createjsColorMatrixFilter_constructor(new $e.ColorMatrix().adjustColor(i,o,r,t)),this.type="MultiEffect",this.adjustColor=function(S,P,A,R){n(t)||(t=ct(S)),n(r)||(r=ct(P)),n(i)||(i=ct(A)),n(o)||(o=ct(R)),this.matrix.reset().adjustColor(S,P,A,R)},Object.defineProperty(this,"brightness",{get:function(){return i},set:function(S){i=ct(S),this.matrix.reset().adjustColor(i,o,r,t)}}),Object.defineProperty(this,"contrast",{get:function(){return o},set:function(S){o=ct(S),this.matrix.reset().adjustColor(i,o,r,t)}}),Object.defineProperty(this,"saturation",{get:function(){return r},set:function(S){r=ct(S),this.matrix.reset().adjustColor(i,o,r,t)}}),Object.defineProperty(this,"hue",{get:function(){return t},set:function(S){t=ct(S),this.matrix=new $e.ColorMatrix().adjustColor(i,o,r,t),this.applyFilter()}}),this.clone=function(S){return new e.MultiEffect(S||!e.isPick(_[0])?t:_[0],S||!e.isPick(_[0])?r:_[0],S||!e.isPick(_[0])?i:_[0],S||!e.isPick(_[0])?o:_[0],l,this.group,p)}},e.extend(e.MultiEffect,$e.ColorMatrixFilter,"clone","createjsColorMatrixFilter",!1),e.AlphaEffect=function(t,r,i,o){var l="mask, style, group, inherit",c;if(c=vt(e.AlphaEffect,arguments,l,this))return c;He("69.9745"),this.group=i;var p=r===!1?{}:e.getStyle("AlphaEffect",i,o);n(t)&&(t=p.mask!=null?p.mask:null);var v=w(t);this.veeObj={mask:v[0]};function w(){return arguments}t=ct(t),t.type=="Bitmap"?t=t.image:t.cache&&(t=t.cache().cacheCanvas),this.createjsAlphaMaskFilter_constructor(t),this.type="AlphaEffect",this.clone=function(b){return new e.AlphaEffect(b||!e.isPick(v[0])?t:v[0],r,this.group,o)}},e.extend(e.AlphaEffect,$e.AlphaMaskFilter,"clone","createjsAlphaMaskFilter",!1),e.Pixel=function(t,r,i,o,l,c,p,v,w,b,_,E,S){var P="obj, amount, amountY, blur, dynamic, blendmode, boundary, expand, amountFactor, blurFactor, style, group, inherit",A;if(A=vt(e.Pixel,arguments,P,this))return A;He("69.9747"),this.group=E;var R=_===!1?{}:e.getStyle("Pixel",E,S);n(t)&&(t=R.obj!=null?R.obj:null),n(r)&&(r=R.amount!=null?R.amount:.5),n(i)&&(i=R.amountY!=null?R.amountY:null);var T=!1;i==null&&(T=!0,i=r),n(o)&&(o=R.blur!=null?R.blur:0),n(l)&&(l=R.dynamic!=null?R.dynamic:!1),n(c)&&(c=R.blendmode!=null?R.blendmode:null),n(p)&&(p=R.boundary!=null?R.boundary:new e.Boundary(t.getBounds())),n(v)&&(v=R.expand!=null?R.expand:0),n(w)&&(w=R.amountFactor!=null?R.amountFactor:.6),n(b)&&(b=R.blurFactor!=null?R.blurFactor:.6);var L=I(t,r,i,o,c,w,b);this.veeObj={obj:L[0],amount:L[1],amountY:L[2],blur:L[3],blendmode:L[4],amountFactor:L[5],blurFactor:L[6]};function I(){return arguments}t=ct(t),r=ct(r),i=ct(i),o=ct(o),c=ct(c),w=ct(w),b=ct(b),v&&(Array.isArray(v)?v.length==1?p.contract(-v):v.length==2?p.contract(-v[0],-v[1]):p.contract(-v[0],-v[1],-v[2],-v[3]):p.contract(-v));var C=e.constrain(w*10,0,10),k=e.constrain(b*10,0,10),Y=this,W=Math.pow(Math.E,-r*C),G=Math.pow(Math.E,-i*C),F=Math.pow(Math.E,-o*k);n(t)&&(t=new e.Tile(new e.Circle(20,[e.green,e.blue,e.yellow,e.pink,e.purple]),5,5,5,5));var B=document.createElement("canvas"),q=B.getContext("2d"),Z=document.createElement("canvas"),X=Z.getContext("2d"),ne=F;this.update=function(){!t.cacheCanvas||F!=ne?(t.cache(p.x,p.y,p.width,p.height,F),ne=F):t.updateCache(c);var $=t.width,re=t.height,de=t.width*W,Q=t.height*G;B.width=$,B.height=re,Z.width=$,Z.height=re,X.msImageSmoothingEnabled=!1,X.mozImageSmoothingEnabled=!1,X.webkitImageSmoothingEnabled=!1,X.imageSmoothingEnabled=!1,q.drawImage(t.cacheCanvas,0,0,de,Q),X.drawImage(B,0,0,de,Q,-v*t.scale,-v*t.scale,Z.width+v*2*t.scaleX,Z.height+v*2*t.scaleY)},this.update(),this.zimBitmap_constructor(Z),l&&(this.dynamicTicker=e.Ticker.add(function(){Y.update()})),Object.defineProperty(this,"amount",{get:function(){return r},set:function($){r=$,W=Math.pow(Math.E,-r*C),T&&(G=Math.pow(Math.E,-r*C),i=r),Y.update()}}),Object.defineProperty(this,"amountX",{get:function(){return r},set:function($){r=$,T=!1,W=Math.pow(Math.E,-r*C),Y.update()}}),Object.defineProperty(this,"amountY",{get:function(){return i},set:function($){i=$,T=!1,G=Math.pow(Math.E,-i*C),Y.update()}}),Object.defineProperty(this,"amountFactor",{get:function(){return w},set:function($){w=$,C=e.constrain(w*10,0,10),W=Math.pow(Math.E,-r*C),G=Math.pow(Math.E,-i*C),Y.update()}}),Object.defineProperty(this,"blur",{get:function(){return o},set:function($){o=$,F=Math.pow(Math.E,-o*k),Y.update()}}),Object.defineProperty(this,"blurFactor",{get:function(){return b},set:function($){b=$,k=e.constrain(b*10,0,10),F=Math.pow(Math.E,-o*k),Y.update()}}),Object.defineProperty(this,"dynamic",{get:function(){return l},set:function($){l!=$&&(l=$,l?Y.dynamicTicker?Y.dynamicTicker=e.Ticker.add(Y.dynamicTicker):Y.dynamicTicker=e.Ticker.add(Y.update):Y.dynamicTicker&&e.Ticker.remove(Y.dynamicTicker))}}),this.dispose=function(){Y.dynamicTicker&&e.Ticker.remove(Y.dynamicTicker),this.zimBitmap_dispose()},_!==!1&&e.styleTransforms(this,R),this.clone=function($){return Y.cloneProps(new e.Pixel($||!e.isPick(L[0])?t:L[0],$||!e.isPick(L[1])?r:L[1],$||!e.isPick(L[2])?i:L[2],$||!e.isPick(L[3])?o:L[3],l,$||!e.isPick(L[4])?c:L[4],p,v,$||!e.isPick(L[5])?w:L[5],$||!e.isPick(L[6])?b:L[6],_,this.group,S))}},e.extend(e.Pixel,e.Bitmap,["clone","dispose"],"zimBitmap",!1),e.Parallax=function(t,r,i,o,l,c,p){var v="layers, damp, auto, stage, startPaused, mouseMoveOutside, clamp",w;if(w=vt(e.Parallax,arguments,v,this))return w;if(He("68"),this.type="Parallax",n(o))if(t&&t[0]&&t[0].obj&&t[0].obj.stage)o=t[0].obj.stage;else if(le.zdf)o=le.zdf.stage;else return;n(i)?i=!0:i=!1,n(l)&&(l=!1),n(c)&&(c=!1);var b=o.getBounds().width,_=o.getBounds().height;o.mouseMoveOutside=c;var E=this;E.stageEvent=o.on("stagemousemove",function(L){E.mouseX=L.rawX/e.scaX,E.mouseY=L.rawY/e.scaY});var S=n(r)?.1:r;this.addLayer=function(L){if(!(n(L.obj)||n(L.prop)||n(L.propChange))){var I={obj:L.obj,prop:L.prop};I[I.prop]=L.propChange,n(L.input)&&(L.input="mouseX"),I.input=L.input,I.split=n(L.split)?!!(L.input=="mouseX"&&i):L.split;var C=n(L.inMin)?0:L.inMin,k=n(L.inMax)?L.input=="mouseX"||L.input=="scrollX"?b:_:L.inMax,Y=n(L.factor)?1:L.factor,W=n(L.integer)?!1:L.integer;return I["p_"+I.prop]=new e.ProportionDamp(C,k,0,I[I.prop],S,Y,W,p),I.prop=="scale"?I["s_"+I.prop]=I.obj.scaleX:I.prop=="frame"?I["s_"+I.prop]=I.obj.currentFrame:I["s_"+I.prop]=I.obj[I.prop],n(L.immediate)||I["p_"+I.prop].immediate(L.immediate),P.push(I),E}},this.removeLayer=function(L){if(!n(L)){var I=P[L];return I["p_"+I.prop].dispose(),P.splice(L,1),E}},this.immediate=function(L){for(var I,C=0;C<P.length;C++)I=P[C],I["p_"+I.prop].immediate(L[C]);return E},this.dispose=function(){return o.off("stagemousemove",E.stageEvent),P=null,i&&e.Ticker.remove(R),!0},t=n(t)?[]:t;for(var P=[],A=0;A<t.length;A++)this.addLayer(t[A]);if(i){var R=e.Ticker.add(T,o);l&&e.Ticker.remove(R)}function T(){E.step()}this.step=function(L){for(var I,C,k=0;k<P.length;k++)I=P[k],n(L)?I.input=="mouseX"?C=E.mouseX:I.input=="mouseY"?C=E.mouseY:I.input=="scrollX"?C=e.scrollX():I.input=="scrollY"&&(C=e.scrollY()):C=L,I.prop=="scale"?I.obj.scaleX=I.obj.scaleY=I["s_"+I.prop]+I["p_"+I.prop].convert(C):I.prop=="frame"?I.obj.gotoAndStop(I["s_"+I.prop]+I["p_"+I.prop].convert(C)):(I.obj[I.prop]=I["s_"+I.prop]+I["p_"+I.prop].convert(C),I.split&&(I.obj[I.prop]-=I[I.prop]/2));return E},E.paused=l,E.pause=function(L){return n(L)&&(L=!0),E.paused!=L&&(E.paused=L,R&&(L?e.Ticker.remove(R):R=e.Ticker.add(R))),E},Object.defineProperty(E,"damp",{get:function(){return S},set:function(L){S=L;for(var I,C=0;C<P.length;C++)I=P[C],I["p_"+I.prop].damp=S}})},e.Flipper=function(t,r,i,o,l,c,p,v,w,b,_,E,S,P){var A="front, back, interactive, time, vertical, flipped, easeRoot, frontPress, backPress, reverse, continuous, style, group, inherit",R;if(R=vt(e.Flipper,arguments,A,this))return R;He("68.5"),this.group=S;var T=E===!1?{}:e.getStyle("Flipper",this.group,P);if(n(t)&&(t=T.front!=null?T.front:le.zdf.makeIcon().sca(2)),n(r)&&(r=T.back!=null?T.back:new e.Page(t.width,t.height,e.dark)),this.front=t,this.back=r,c){var L=t;t=r,r=L}var I=Math.max(t.width,r.width),C=Math.max(t.height,r.height);this.zimContainer_constructor(I,C),this.type="Flipper",n(o)&&(o=T.time!=null?T.time:.2),n(l)&&(l=T.vertical!=null?T.vertical:!1),n(i)&&(i=T.interactive!=null?T.interactive:!1),n(c)&&(c=T.flipped!=null?T.flipped:!1),n(p)&&(p=T.easeRoot!=null?T.easeRoot:"quad"),n(v)&&(v=T.frontPress!=null?T.frontPress:!0),n(w)&&(w=T.backPress!=null?T.backPress:!0),n(b)&&(b=T.reverse!=null?T.reverse:!1),n(_)&&(_=T.continuous!=null?T.continuous:!1);var k=c;this.flipped=c;var Y=this;t.centerReg(this);var W;(v&&!c||w&&c)&&(W=i&&t.backing?t.backing:t,W.on("mousedown",function(){G(t,r)}),W.cur()),(w&&!c||v&&c)&&(W=i&&r.backing?r.backing:r,W.on("mousedown",function(){G(r,t,-1)}),W.cur()),t.oScale=t.scale,r.oScale=r.scale,t.flipper=Y,t.other=r,r.flipper=Y,r.other=t,i||(t.mouseChildren=r.mouseChildren=!1),this.flip=function(F,B){F!=Y.flipped&&(Y.flipped?G(k?t:r,k?r:t,-1,B):G(k?r:t,k?t:r,1,B))};function G(F,B,q,Z){if(n(q)&&(q=1),q*=b?-1:1,_&&(q=b?k?1:-1:k?-1:1),n(Z)&&(Z=o),Y.flipped=!Y.flipped,Y.dispatchEvent("flip"),Z==0){Y.removeAllChildren(),B.scale=B.oScale,B.skewX=B.skewY=0,B.centerReg(Y),Y.dispatchEvent("flipped");return}var X,ne;l?(X={skewX:-90*q,scaleY:F.oScale/2},ne={skewX:0,scaleY:B.oScale},B.ske(90*q,0).sca(B.oScale,B.oScale/2)):(X={skewY:-90*q,scaleX:F.oScale/2},ne={skewY:0,scaleX:B.oScale},B.ske(0,90*q).sca(B.oScale/2,B.oScale)),F.animate({props:X,time:o,ease:p+"In",call:function(){F.removeFrom(),B.centerReg(Y).animate({props:ne,time:o,ease:p+"Out",call:function(){Y.dispatchEvent("flipped")}})}})}E!==!1&&e.styleTransforms(this,T),this.clone=function(){return Y.cloneProps(new e.Flipper(t.clone(),r.clone(),i,o,l,c,p,v,w,b,_,E,this.group,P))}},e.extend(e.Flipper,e.Container,"clone","zimContainer"),e.Book=function(t,r,i,o,l,c,p,v){var w="width, height, pages, startPage, rollUp, radius, backgroundColor, arrows",b;if(b=vt(e.Book,arguments,w,this))return b;He("68.7"),n(t)&&(t=le.zdf?le.zdf.stage.width:1024),n(r)&&(r=le.zdf?le.zdf.stage.height:768),this.zimContainer_constructor(t,r),this.type="Book",n(i)&&(i=[]),n(o)&&(o=0),n(l)&&(l=!0),n(p)&&(p=e.darker),n(v)&&(v=!0);var _=y(),E=this;if(i.length==0)return;E.backing=new e.Rectangle(t-2,r-2,p),e.loop(i,function(Y,W){typeof Y=="string"&&(i[W]=e.asset(Y)),i[W].zimBookIndex=W,T(Y)}),E.added(R);var S,P,A;function R(Y){S=Y,P=S.frame;var W=new e.Shape,G,F,B,q,Z,X,ne;E._currentPage=o;function $(x){if(E._currentPage=x,E.removeAllChildren(),E.backing.loc(1,1,E),E.setMask(E.backing),W.addTo(E),W.c().f(e.black).dr(0,0,0,0),E.moving=!1,i[x-1]?G=i[x-1].reg(0,0).rot(0).loc(0,0,E):x>0&&ne.reg(0,0).rot(0).loc(0,0,E).setMask(null),i[x-2]?F=i[x-2].reg(t/2,r).loc(0,r,E).rot(-90):F=new e.Rectangle(t/2,r,p).reg(t/2,r).loc(0,r,E).rot(-90),i[x-3]?B=i[x-3].rot(0).loc(0,0,E).setMask(W):B=new e.Rectangle(t/2,r,p).loc(0,0,E).setMask(W),i[x])q=i[x].rot(0).reg(0,0).pos(0,0,e.RIGHT,e.TOP,E);else{S.update();return}i[x+1]?Z=i[x+1].reg(0,r).loc(t,r,E).rot(90):(Z=new e.Rectangle(t/2,r,p).reg(0,r).loc(t,r,E).rot(90),ne=Z),i[x+2]?X=i[x+2].rot(0).pos(0,0,e.RIGHT,e.TOP,E).setMask(W):X=new e.Rectangle(t/2,r,p).pos(0,0,e.RIGHT,e.TOP,E).setMask(W),S.update()}$(o),Object.defineProperty(E,"directPage",{get:function(){return E._currentPage},set:function(x){k(),o%2==1?x=Math.ceil(x/2)*2-1:x=Math.ceil(x/2)*2,x!=E.page&&(x>E.page?(Z.reg(0,0),X.setMask(null)):(F.reg(0,0),B.setMask(null)),$(x),E.moving=!1,re=!1,E.currentW=0,E.currentH=0,C())}});var re=!1;E.currentW=0,E.currentH=0,E.moving=!1;function de(){E.stageEvent=S.on("stagemousedown",function(){var x,j;if(!E.moving){var O=E.globalToLocal(P.mouseX,P.mouseY);if(!(O.x<0||O.x>t||O.y<0||O.y>r)&&!(c>0&&e.dist(O,new e.Point(0,r))>c&&e.dist(O,new e.Point(t,r))>c)){var V=O.x>t/2?"right":"left";V=="right"&&E._currentPage>=i.length-1||V=="left"&&E._currentPage<=1||(E.moving=!0,V=="right"?(q.addTo(E),Z.addTo(E),X.addTo(E),E.pageNext=X.zimBookIndex):(G.addTo(E),F.addTo(E),B.addTo(E),E.rolledUp&&g(0,0,"right"),E.pageNext=F.zimBookIndex),k(),E.direction=V,E.dispatchEvent("rollpress"),E.moveEvent=S.on("stagemousemove",function(){Q&&(Q.clear(),Q=null);var ce=E.globalToLocal(P.mouseX,P.mouseY);V=="right"?x=t-ce.x:x=ce.x,j=r-ce.y+x,E.currentW=x=e.constrain(x,0,t/2),E.currentH=j=e.constrain(j,0,r),g(x,j,V)}),E.upEvent=S.on("stagemouseup",function(){S.off("stagemousemove",E.moveEvent),!re&&U(x,j,V)},null,!0))}}})}if(de(),E.rollUp=function(x,j,O,V,ce){if(!E.moving&&!(O=="right"&&E._currentPage>=i.length-1)&&!(O=="left"&&E._currentPage<=1)){O=="right"?(q.addTo(E),Z.addTo(E),X.addTo(E)):(E.rolledUp&&g(0,0,"right"),G.addTo(E),F.addTo(E),B.addTo(E)),E.moving=!0,n(V)&&(V=_=="s"?.5:.5/1e3),n(ce)&&(ce=null),E.animate({props:{currentW:x,currentH:j},time:V,ease:ce,call:function(){e.Ticker.remove(H),E.moving=!1,g(x,j,O)}});var H=e.Ticker.add(function(){g(E.currentW,E.currentH,O)})}},l!==!1){E.rolledUp=!0,l===!0&&(l=_=="s"?1:1/1e3);var Q=e.timeout(l,function(){E.rollUp(60,130,"right",.5),E.dispatchEvent("rollup")})}E.rollDown=function(x,j,O,V){E.moving||O=="right"&&E._currentPage>=i.length-1||O=="left"&&E._currentPage<=1||U(x,j,O,V)};function U(x,j,O,V){E.moving=!0,E.rolledUp=!1,n(V)&&(V=_=="s"?.7:.7/1e3),E.animate({props:{currentW:0,currentH:0},time:V,call:function(){e.Ticker.remove(ce),g(0,0,O),E.moving=!1,C(),E.dispatchEvent("rolldown")}});var ce=e.Ticker.add(function(){g(E.currentW,E.currentH,O)})}function g(x,j,O){var V;O=="right"?(W.c().mt(t,r).lt(t-x,r).lt(t,r-j).cp(),V=Math.atan2(x,j),Z.loc(t-(x+x*Math.cos(2*V)),r-x*Math.sin(2*V)).rot(V*2*e.DEG),!re&&x>=t/2&&j>=r&&d()):(W.c().mt(0,r).lt(x,r).lt(0,r-j).cp(),V=Math.atan2(x,j),F.loc(x+x*Math.cos(2*V),r-x*Math.sin(2*V)).rot(-V*2*e.DEG),!re&&x>=t/2&&j>=r&&h()),S.update()}function d(){k(),re=!0,E.moving=!0,E.moveEvent&&S.off("stagemousemove",E.moveEvent),E.upEvent&&S.off("stagemouseup",E.upEvent),E.currentW=0,E.currentH=0,E.lastPage=e.constrain(E._currentPage),E.direction="right",E.pageNext=X.zimBookIndex,E.dispatchEvent("pageanimate"),E.animate({ease:"quadOut",props:{currentW:t/2},time:.3,timeUnit:"s",call:function(){e.Ticker.remove(x),Z.reg(0,0),X.setMask(null),$(E._currentPage+2),E.moving=!1,re=!1,E.currentW=0,E.currentH=0,C(),E.dispatchEvent("page")}});var x=e.Ticker.add(function(){W.c().mt(t,r).lt(t/2,r).lt(t-E.currentW,0).lt(t,0).cp()});Z.reg(t/2,r).loc(t/2,r,E).animate({props:{rotation:0},time:.3,ease:"quadOut",timeUnit:"s"})}function h(){k(),re=!0,E.moving=!0,E.moveEvent&&S.off("stagemousemove",E.moveEvent),E.upEvent&&S.off("stagemouseup",E.upEvent),E.currentW=0,E.currentH=0,E.lastPage=e.constrain(E._currentPage),E.direction="left",E.pageNext=F.zimBookIndex,E.dispatchEvent("pageanimate"),E.animate({ease:"quadOut",props:{currentW:t/2},time:.3,timeUnit:"s",call:function(){e.Ticker.remove(x),F.reg(0,0),B.setMask(null),$(E._currentPage-2),E.moving=!1,re=!1,E.currentW=0,E.currentH=0,C(),E.dispatchEvent("page")}});var x=e.Ticker.add(function(){W.c().mt(0,r).lt(t/2,r).lt(E.currentW,0).lt(0,0).cp()});F.reg(0,r).loc(t/2,r,E).animate({props:{rotation:0},time:.3,timeUnit:"s",ease:"quadOut"})}v&&(v===!0&&(v=.2),E.keydown=P.on("keydown",function(x){x.keyCode==39?E.nextPage(v):x.keyCode==37&&E.prevPage(v)})),E.changeFrame=function(x){return E.stageEvent&&S.off("stagemousedown",E.stageEvent),E.moveEvent&&S.off("stagemousemove",E.moveEvent),E.upEvent&&S.off("stagemouseup",E.upEvent),P=x,S=x.stage,de(),E},C()}E.nextPage=function(Y){if(n(E.rollUp))return setTimeout(function(){E.nextPage(Y)},10),E;E.moving||E.rollUp(t/2+.1,r+.1,"right",Y,"quadIn")},E.prevPage=function(Y){if(n(E.rollUp))return setTimeout(function(){E.prevPage(Y)},10),E;E.moving||E.rollUp(t/2+.1,r+.1,"left",Y,"quadIn")},E.gotoPage=function(Y,W){if(n(E.rollUp))return setTimeout(function(){E.gotoPage(Y,W)},10),E;Y=e.constrain(Y,0,E.pages.length-1),n(W)&&(W=_=="s"?.3:300);var G=W+(_=="s"?.35:350);E.pageInterval=e.interval(G,function(F){var B=!1;E._currentPage<Y?E.nextPage(W):E._currentPage>Y?E.prevPage(W):B=!0,E.dispatchEvent("pageturn"),F.count==F.total-1&&(B?(C(),E.dispatchEvent("pagedone")):e.timeout(G,function(){C(),E.dispatchEvent("pagedone")}))},Math.floor(Math.abs(Y-E._currentPage)/2+1),!0)};function T(Y){Y.addChild&&(Y.zimHTMLList=new e.Dictionary,I(Y),Y.parent&&Y.parent.removeChild(data.page))}function L(Y){if(!(n(Y)||!Y.addChild))for(Y.removedHTML=!1,A=0;A<Y.zimHTMLList.length;A++)Y.addChildAt(Y.zimHTMLList.values[A].obj,Y.zimHTMLList.values[A].depth)}function I(Y){if(!(Y.removedHTML||!Y.addChild)){Y.removedHTML=!0,Y.zimHTMLList.clear();var W,G;for(G=0;G<Y.numChildren;G++)if(W=Y.getChildAt(G),W.type=="TextArea"||W.type=="Loader"||W.type=="Tag"){var F={obj:W,depth:Y.getChildIndex(W)};Y.zimHTMLList.add(W,F)}for(G=Y.numChildren-1;G>=0;G--)W=Y.getChildAt(G),(W.type=="TextArea"||W.type=="Loader"||W.type=="Tag")&&Y.removeChild(W)}}function C(){E.pages[E.page]&&L(E.pages[E.page]),E.pages[E.page-1]&&L(E.pages[E.page-1])}function k(){E.pages[E.page]&&I(E.pages[E.page]),E.pages[E.page-1]&&I(E.pages[E.page-1])}Object.defineProperty(E,"page",{get:function(){return E._currentPage},set:function(Y){E.gotoPage(Y,_=="s"?.1:100)}}),Object.defineProperty(E,"pages",{get:function(){return i},set:function(){Ct&&lt("Book() - pages is read only")}}),this.dispose=function(Y,W,G){return E.stageEvent&&S.off("stagemousedown",E.stageEvent),E.moveEvent&&S.off("stagemousemove",E.moveEvent),E.upEvent&&S.off("stagemouseup",E.upEvent),E.keydown&&P.off("keydown",E.keydown),E.removeFrom(),G||this.zimContainer_dispose(!0),!0}},e.extend(e.Book,e.Container,["clone","dispose"],"zimContainer"),e.Scrambler=function(t,r,i,o,l,c,p,v,w,b,_,E,S,P){var A="tile, keys, keyProperty, scramble, time, wait, num, shadowColor, shadowBlur, swap, swapLock, style, group, inherit",R;if(R=vt(e.Scrambler,arguments,A,this))return R;He("67.35"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Scrambler",this.group=S;var T=E===!1?{}:e.getStyle(this.type,this.group,P);n(t)&&(t=T.tile!=null?T.tile:t),n(r)&&(r=T.keys!=null?T.keys:null),n(i)&&(i=T.keyProperty!=null?T.keyProperty:null),n(o)&&(o=T.scramble!=null?T.scramble:!0),n(l)&&(l=T.time!=null?T.time:0),n(c)&&(c=T.wait!=null?T.wait:0),n(p)&&(p=T.num!=null?T.num:1),n(v)&&(v=T.shadowColor!=null?T.shadowColor:"rgba(0,0,0,.3)"),n(w)&&(w=T.shadowBlur!=null?T.shadowBlur:5),n(b)&&(b=T.swap!=null?T.swap:!1),n(_)&&(_=T.swapLock!=null?T.swapLock:!1),_&&(b=!0),n(t)&&(t=new e.Tile(new e.Rectangle(100,100,e.series(e.silver,e.tin,e.grey,e.dark,e.darker)),5,1,5)),t.addTo(this);var L=this;L.complete=!0;var I=y(l);y(c);var C=(t.width+t.spacingH)/t.cols,k=(t.height+t.spacingV)/t.rows,Y=le.zdf,W=e.makeID(null,10),G,F,B,q=!1;t.pointers={},t.on("mousedown",function(U){if(q)return;q=!0,X(U.target),L.myDownCheck=!0,B=U.target;var g="id"+Math.abs(U.pointerID+1);if(t.pointers[g]=!0,_){var d=t.current;if(L.testItem(U.target,d.indexOf(U.target))){U.target.noMouse(),U.target.noDrag(),U.target.locked=!0,L.myDownCheck=!1;return}}if(G=U.target.x,F=U.target.y,v!=-1&&w>0){var h=new $e.Shadow(v,3,3,w);U.target.backing?U.target.backing.shadow=h:U.target.shadow=h}Y&&(L.scrmu||(L.scrmu=Y.on("mouseupplusonly",function(O){if(L.myDownCheck){L.myDownCheck=!1;var V=e.loop(t.pointers,function(ce,H){return H});V||(t.pointers.id0=!0),O={target:B,pointerID:O.pointerID?V:-1},x(O)}}))),L.upEvent&&t.off("pressup",L.upEvent),L.upEvent=t.on("pressup",function(O){var V="id"+Math.abs(O.pointerID+1);t.pointers[V]&&(L.myDownCheck=!1,x(O))});function x(O){var V="id"+Math.abs(O.pointerID+1);if(t.pointers[V]){delete t.pointers[V];var ce=!0;if(ne(),q=!1,L.moveEvent&&t.off("pressmove",L.moveEvent),_){var H=O.target.boundsToGlobal(),N=t.hitTestGrid(t.width,t.height,t.cols,t.rows,H.x+H.width/2,H.y+H.height/2,null,null,t.spacingH,t.spacingV,null,"open");if(n(N))ce=!1;else{var ue=d[N[0]];O.target==ue?ce=!1:ce=!L.testItem(ue,N[0])}}b&&ce&&Z(O),O.target.mouseEnabled=!1,O.target.animate({props:{x:G,y:F},time:.1,id:W,timeUnit:"seconds",pauseOnBlur:!1,call:j,params:O})}}function j(O){!L.complete&&L.test()&&(L.complete=!0,L.dispatchEvent("complete")),v!=-1&&w>0&&(O.target.backing?O.target.backing.shadow=null:O.target.shadow=null),O.target.mouseEnabled=!0}b||(L.moveEvent&&t.off("pressmove",L.moveEvent),L.moveEvent=t.on("pressmove",function(O){Z(O)}))});function Z(U){var g=U.target;g.stopAnimate();var d=g.boundsToGlobal(),h=t.hitTestGrid(t.width,t.height,t.cols,t.rows,d.x+d.width/2,d.y+d.height/2,null,null,t.spacingH,t.spacingV,null,"open");n(h)||e.loop(t,function(x){if(!(x==g||x.paused===!1)){var j=x.boundsToGlobal(),O=t.hitTestGrid(t.width,t.height,t.cols,t.rows,j.x+j.width/2,j.y+j.height/2,null,null,t.spacingH,t.spacingV,null,"open");if(!n(O)){var V;h[2]==O[2]&&(x.x>=g.x&&x.x<=g.x+C/2||x.x<=g.x&&x.x>=g.x-C/2)&&(V=x.x,x.top().ord(-1),x.animate({props:{x:G},time:.2,id:W,timeUnit:"seconds",call:function(){b&&!L.complete&&L.test()&&(L.complete=!0,L.dispatchEvent("complete"))}}),G=V),h[1]==O[1]&&(x.y>=g.y&&x.y<=g.y+k/2||x.y<=g.y&&x.y>=g.y-k/2)&&(V=x.y,x.top().ord(-1),x.animate({props:{y:F},time:.201,override:!1,id:W,timeUnit:"seconds",call:function(){b&&!L.complete&&L.test()&&(L.complete=!0,L.dispatchEvent("complete"))}}),F=V)}}},!0)}function X(U){t.loop(function(g){g!=U&&g.noMouse()})}function ne(){t.loop(function(U){U.locked||U.mouse()})}this.test=function(){var U=t.current;return e.loop(U,function(g,d){if(n(g)||!L.testItem(g,d))return!1})},this.testItem=function(U,g){if(!n(U)){if(n(g)&&(g=t.current.indexOf(U)),r){var d=n(i)?U.key:U[i];if(d!=r[g])return!1}else if(t.items[g]!=U)return!1;return!0}},this.starts=[];var $=[];e.loop(t.rows*t.cols,function(U){$.push(U)});var re=$.slice();t.loop(function(U){U.mouseChildren=!1,L.starts.push({x:U.x,y:U.y})}),this.inactive=!1,this.scramble=function(U,g,d){n(g)&&(g=0),n(U)&&(U=0),(n(d)||U==0)&&(d=1),de(),e.timeout(g,function(){U>0?e.interval(U/d,h,d,!0):h()}),setTimeout(function(){L.complete=!1,t.loop(function(x){x.mouse(),x.locked=!1}),L.mouse(),t.drag({boundary:t,singleTouch:!0}),q=!1},I=="s"?(g+U)*1e3:g+U);function h(){for(var x=!0,j=0;x&&j<50;)j++,e.shuffle($),x=e.loop($,function(O,V){var ce=t.getChildAt(O);if(r){var H=n(i)?ce.key:ce[i];if(H!=r[V])return!1}else if(t.items[V]!=ce)return!1});Q($,U/d),e.timeout(U,function(){L.dispatchEvent("scrambled")})}return L},o?L.scramble(l,c,p):L.added(function(){t.drag({boundary:t,singleTouch:!0})});function de(){L.upEvent&&t.off("pressup",L.upEvent),L.moveEvent&&t.off("pressmove",L.moveEvent),t.noDrag(),c+l>0&&L.noMouse()}function Q(U,g,d){e.stopAnimate(W),e.loop(t.items,function(h,x,j){var O=L.starts[U[x]];g?h.animate({props:{x:O.x,y:O.y},time:g,ease:d?"quadInOut":"quadOut",wait:d,timeUnit:"seconds",id:W}):(h.loc(O),L.stage?h.drag({boundary:t,singleTouch:!0}):x==j-1&&L.added(function(){t.drag({boundary:t,singleTouch:!0})}))})}this.solve=function(U,g,d){n(d)&&(d=!0),n(g)&&(g=0),n(U)&&(U=0),g+U==0&&d&&L.noMouse(),setTimeout(function(){$=re.slice(),de(),Q($,U,0,d)},I=="s"?g*1e3:g),d||setTimeout(function(){L.mouse(),t.drag({boundary:t,singleTouch:!0})},I=="s"?(g+U)*1e3:g+U)},this._enabled=!0,Object.defineProperty(L,"enabled",{get:function(){return L._enabled},set:function(U){f(L,U),!e.OPTIMIZE&&(Mt||!le.OPTIMIZE)&&L.stage&&L.stage.update()}}),Object.defineProperty(L,"order",{get:function(){var U=[],g=e.loop(t.current,function(d){if(!d)return!1;U.push(d.tileNum)});return!g||U.length!=$.length||($=U),$},set:function(U){var g=[];e.loop(U,function(d){g.push(t.items[d])}),t.remake(g),t.stage&&t.stage.update()}}),this.dispose=function(U,g,d){return L.scrmu&&Y.off("mouseupplus",L.scrmu),t.removeAllEventListeners(),d||(L.zimContainer_dispose(!0),L.stage&&L.stage.update()),!0},E!==!1&&e.styleTransforms(this,T),this.clone=function(){return L.cloneProps(new e.Scrambler(t.clone(),r,i,o,l,c,p,v,w,b,_,E,L.group,P))}},e.extend(e.Scrambler,e.Container,["clone","dispose"],"zimContainer",!1),e.Scroller=function(t,r,i,o,l,c,p,v,w,b){var _="backing, speed, direction, horizontal, gapFix, stage, container, style, group, inherit",E;if(E=vt(e.Scroller,arguments,_,this))return E;He("69"),this.cjsEventDispatcher_constructor(),this.type="Scroller",this.group=w;var S=v===!1?{}:e.getStyle(this.type,this.group,b);if(n(t)&&(t=S.backing!=null?S.backing:null),n(t))return;var P=this.backing1=t;if(n(P)||!P.getBounds)return;var A=this.backing2=t.clone(!0);n(o)&&(o=S.horizontal!=null?S.horizontal:!0),n(l)&&(l=S.gapFix!=null?S.gapFix:0),n(p)&&(p=S.container!=null?S.container:null),n(c)&&(c=S.stage!=null?S.stage:null);var R=this;n(r)&&(r=S.speed!=null?S.speed:1),this.speed=r;var T=this.baseSpeed=this.speed;n(i)&&(i=S.direction!=null?S.direction:1),this.direction=i;var L=o?P.scaleX:P.scaleY;if(P.type=="AC"){lt("ZIM Scroller(): please provide Pic() with dimensions for backing objects");return}if(!P.getBounds()){lt("ZIM Scroller(): please setBounds() on backing objects");return}if(!c&&!P.stage){lt("ZIM Scroller(): please pass in stage parameter or add backing objects to stage to start");return}if(!P.parent){lt("ZIM Scroller(): please add object to container or stage before adding to Scroller");return}if(P.parent.addChildAt(A,P.parent.getChildIndex(P)),c=c||P.stage,n(p)&&(p=c),!p.getBounds()){lt("zim display - Scroller(): please setBounds() on container or stage if no container");return}var I=P.getBounds().width*L-l,C=P.getBounds().height*L-l,k,Y;o?A.x=I:A.y=C;var W=!1,G=e.Ticker.add(F,c);function F(){k||(k=p.getBounds().width,Y=p.getBounds().height),!(R.speed==0||R.direction==0)&&(o?(P.x-=R.speed*R.direction,P.x<A.x?A.x=P.x+I:A.x=P.x-I,R.direction*R.speed>0?A.x<0&&P.x<A.x?P.x=A.x+I:P.x<0&&A.x<P.x&&(A.x=P.x+I):A.x>k&&A.x>P.x?A.x=P.x-I:P.x>k&&P.x>A.x&&(P.x=A.x-I)):(P.y-=R.speed*R.direction,P.y<A.y?A.y=P.y+C:A.y=P.y-C,R.direction*R.speed>0?A.y<0&&P.y<A.y?P.y=A.y+C:P.y<0&&A.y<P.y&&(A.y=P.y+C):A.y>Y&&A.y>P.y?A.y=P.y-C:P.y>Y&&P.y>A.y&&(P.y=A.y-C)))}this.paused=!1,this.pause=function(B,q){return n(B)&&(B=!0),n(q)&&(q=0),B?(T=R.speed,q>0?(W=!0,e.animate({target:R,obj:{pausingSpeed:0},ticker:!1,time:q,call:function(){R.speed=0,R.paused=!0,W=!1,R.dispatchEvent("pause")}})):(W=!1,R.speed=0,R.paused=!0,setTimeout(function(){R.dispatchEvent("pause")},10))):(W=!1,q>0?e.animate({target:R,obj:{pausingSpeed:T},ticker:!1,time:q,call:function(){R.speed=T,R.paused=!1,W=!1}}):(R.speed=T,R.paused=!1)),R},Object.defineProperty(R,"percentSpeed",{get:function(){return R.baseSpeed==0?NaN:R.speed/R.baseSpeed*100},set:function(B){W||R.paused||(R.speed=R.baseSpeed*B/100)}}),Object.defineProperty(R,"pausingSpeed",{get:function(){return R.baseSpeed==0?NaN:R.speed/R.baseSpeed*100},set:function(B){R.speed=R.baseSpeed*B/100}}),Object.defineProperty(R,"percentComplete",{get:function(){return o?P.x<0&&P.x>A.x?-P.x/P.width*100:(-A.x/A.width*100+1e9)%100:P.y<0&&P.y>A.y?-P.y/P.height*100:(-A.y/A.height*100+1e9)%100},set:function(B){B=(B+1e9)%100,o?(P.x=-B*P.width/100,A.x=P.x+I):(P.y=-B*P.height/100,A.y=P.y+C)}}),v!==!1&&e.styleTransforms(this,S),this.dispose=function(){return e.Ticker.remove(G),!0}},e.extend(e.Scroller,$e.EventDispatcher,null,"cjsEventDispatcher"),e.Dynamo=function(t,r,i,o,l,c,p,v,w,b,_,E){var S="sprite, speed, label, startFrame, endFrame, update, reversible, flip, flipVertical, style, group, inherit",P;if(P=vt(e.Dynamo,arguments,S,this))return P;He("69.2"),this.cjsEventDispatcher_constructor(),this.type="Dynamo",this.group=_;var A=b===!1?{}:e.getStyle(this.type,this.group,E);if(n(t)&&(t=A.sprite!=null?A.sprite:null),n(t))return;var R=this.frames=t.parseFrames(i,o,l,!0);if(R.length==0)return;this.totalFrames=R.length;var T=0;n(r)&&(r=A.speed!=null?A.speed:30),n(p)&&(p=A.reversible!=null?A.reversible:!0);var L=this.baseSpeed=this.speed=r;n(c)&&(c=A.update!=null?A.update:!1),n(v)&&(v=A.flip!=null?A.flip:null),n(v)&&p==!1&&(v=!0);var I=this,C,k,Y=Date.now(),W,G,F,B=!1;I.scaleX=t.scaleX,I.scaleY=t.scaleY;function q(){if(C=requestAnimationFrame(q),k=R[T].s,!(I.speed==0||k==0)&&(G=1e3/Math.abs(I.speed)*k,W=Date.now(),W-Y>G)){Y=W;var Z=I.frame+(I.speed>0||!p?1:-1),X=!1;Z>=R.length&&(X=!0,Z=0),Z<0&&(X=!0,Z=R.length-1),I.frame=Z,v&&(I.speed<0?t.scaleX=-I.scaleX:t.scaleX=I.scaleX),w&&(I.speed<0?t.scaleY=-I.scaleY:t.scaleY=I.scaleY),X&&I.dispatchEvent("loop"),I.dispatchEvent("change"),c&&t.stage&&t.stage.update(),!n(F)&&F==I.frame&&(B=!1,I.speed=0,I.paused=!0,I.dispatchEvent("pause"))}}q(),this.paused=!1,this.pause=function(Z,X,ne){if(n(Z)&&(Z=!0),Z!=I.paused)return n(X)&&(X=0),Z?(L=I.speed,typeof ne>"u"?X>0?(B=!0,e.animate({target:I,obj:{pausingSpeed:0},ticker:!1,time:X,call:function(){B=!1,I.speed=0,I.paused=!0,I.dispatchEvent("pause")}})):(B=!1,I.speed=0,I.paused=!0,setTimeout(function(){I.dispatchEvent("pause")},10)):(B=!0,F=ne)):(F=null,X>0?(B=!0,e.animate({target:I,obj:{pausingSpeed:L},ticker:!1,time:X,call:function(){B=!1,I.speed=L,I.paused=!1}})):(B=!1,I.speed=L,I.paused=!1)),I},Object.defineProperty(I,"frame",{get:function(){return T},set:function(Z){T=Math.round(Z)%R.length;var X=R[T];n(X)||(t.frame=X.f)}}),Object.defineProperty(I,"percentSpeed",{get:function(){return I.baseSpeed==0?NaN:B||I.paused?L/I.baseSpeed*100:I.speed/I.baseSpeed*100},set:function(Z){if(B||I.paused){L=I.baseSpeed*Z/100;return}I.speed=I.baseSpeed*Z/100}}),Object.defineProperty(I,"pausingSpeed",{get:function(){return I.baseSpeed==0?NaN:I.speed/I.baseSpeed*100},set:function(Z){I.speed=I.baseSpeed*Z/100}}),b!==!1&&e.styleTransforms(this,A),this.dispose=function(){cancelAnimationFrame(C)}},e.extend(e.Dynamo,$e.EventDispatcher,null,"cjsEventDispatcher"),e.Accelerator=function(t){He("69.3"),this.cjsEventDispatcher_constructor();var r=this;this.type="Accelerator",this.paused=!1,this.items=[],this.paused=!1,this._percentSpeed=100,this.add=function(i){var o;Array.isArray(i)?o=i:o=[i];for(var l,c=0;c<o.length;c++)l=r.items.indexOf(o[c]),l<0&&r.items.push(o[c]);return r},t&&this.add(t),this.remove=function(i){var o;Array.isArray(i)?o=i:o=[i];for(var l,c=0;c<o.length;c++)l=r.items.indexOf(o[c]),l>=0&&r.items.splice(l,1);return r},this.pause=function(i,o,l){if(n(i)&&(i=!0),i==r.paused)return;var c=[];if(i){n(l)||(o=null);for(var p=!1,v=0;v<r.items.length;v++)(!n(o)&&n(l)&&!r.items[v].totalFrames||r.items[v].totalFrames&&(!n(o)||!n(l)))&&(r.items[v].pause(!0,o,l),p=!0,c[v]=1,r.items[v].on("pause",function(){r.paused||(w(!0),r.paused=!0,r.dispatchEvent("pause"))},null,!0));p||(w(),r.paused=!0,setTimeout(function(){r.dispatchEvent("pause")},10))}else r.paused=!1,w();function w(){for(var b=0;b<r.items.length;b++)c[b]!=1&&r.items[b].pause(i)}},Object.defineProperty(r,"percentSpeed",{get:function(){return r._percentSpeed},set:function(i){r._percentSpeed=i;for(var o=0;o<r.items.length;o++)r.items[o].percentSpeed=i}}),this.dispose=function(){for(var i=0;i<r.items.length;i++)r.items[i].dispose();return r.items=null,!0}},e.extend(e.Accelerator,$e.EventDispatcher,null,"cjsEventDispatcher"),e.Emitter=function(t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,T,L,I,C,k,Y,W,G,F,B,q,Z,X,ne,$,re,de,Q){var U="obj, width, height, interval, num, life, fade, shrink, decayTime, decayStart, trace, traceFadeTime, traceShiftX, traceShiftY, angle, force, gravity, wind, layers, animation, random, horizontal, vertical, sink, sinkForce, cache, events, startPaused, pool, poolMin, particles, style, group, inherit",g;if(g=vt(e.Emitter,arguments,U,this))return g;He("69.9"),this.type="Emitter",this.group=de;var d=re===!1?{}:e.getStyle(this.type,this.group,Q);n(t)&&(t=d.obj!=null?d.obj:[new e.Circle(20,e.pink),new e.Circle(20,e.green),new e.Circle(20,e.blue)]),n(r)&&(r=d.width!=null?d.width:300),n(i)&&(i=d.height!=null?d.height:300);var h=y(o);n(o)&&(o=d.interval!=null?d.interval:h=="s"?.02:20),typeof o=="number"&&(o=Math.max(h=="s"?.01:10,o)),n(l)&&(l=d.num!=null?d.num:1),n(_)&&(_=d.trace!=null?_.size:!1),n(E)&&(E=d.traceFadeTime!=null?d.traceFadeTime:w),n(S)&&(S=d.traceShiftX!=null?d.traceShiftX:0),n(P)&&(P=d.traceShiftY!=null?d.traceShiftY:0),a(c,h),n(c)&&(c=d.life!=null?d.life:h=="s"?1:1e3),n(p)&&(p=d.fade!=null?d.fade:!0),n(v)&&(v=d.shrink!=null?d.shrink:!_),a(w,h),n(w)&&(w=d.decayTime!=null?d.decayTime:h=="s"?1:1e3),n(A)&&(A=d.angle!=null?d.angle:{min:0,max:360}),n(R)&&(R=d.force!=null?d.force:5),n(T)&&(T=d.gravity!=null?d.gravity:9.8),n(L)&&(L=d.wind!=null?d.wind:0),n(I)&&(I=d.layers!=null?d.layers:"top"),n(r)&&(r=d.width!=null?d.width:100),n(i)&&(i=d.height!=null?d.height:100),n(Y)&&(Y=d.horizontal!=null?d.horizontal:!1),n(W)&&(W=d.vertical!=null?d.vertical:!1),n(G)&&(G=d.sink!=null?d.sink:null),!n(G)&&n(F)&&(F=d.sinkForce!=null?d.sinkForce:10),n(q)&&(q=d.events!=null?d.events:!1),n(Z)&&(Z=d.startPaused!=null?d.startPaused:!1),n(X)&&(X=d.pool!=null?d.pool:!0),n(ne)&&(ne=d.poolMin!=null?d.poolMin:0),n($)&&($=d.particles!=null?d.particles:new e.Container),n(C)&&(C=d.animation!=null?d.animation:null),$.type="Particles",this.zimContainer_constructor(r,i,null,null,!1),this.type="Emitter";var x=this;this.regX=r/2,this.regY=i/2,x.obj=t,x.particles=$,x.interval=o,x.num=l,x.life=c,x.fade=p,x.shrink=v,x.decayTime=w,x.decayStart=b,x.trace=_,x.traceFadeTime=E,x.traceShiftX=S,x.traceShiftY=P,x.angle=A,x.emitterForce=R,x.gravity=T,x.wind=L,x.layers=I,x.animation=C,x.random=k,x.horizontal=Y,x.vertical=W,x.sink=G,x.sinkForce=F,x.events=q,x.startEmitterPaused=x.emitterPaused=Z,x.pool=X,x.poolMin=ne,x.particlesEmitted=0;var j=[],O=0,V=0,ce,H;e.added(x,N);function N(ge){if(x.emitterPaused=null,x.on("added",function(){e.loop(x.particles,function(Ye){Ye.visible=!1}),x.particles.addTo(x.parent)}),H=ge,n(B)&&(H.isWebGL?B=!1:B=e.mobile()),B&&(H.snapToPixelEnabled=!0),H){var Be=x.parent.getChildIndex(x);x.parent.addChildAt($,Be),!Y&&!W&&x.centerReg(null,null,!1),x.zimInterval=e.interval(x.interval,function(){var Ye=e.isPick(x.life)?e.Pick.getMinMax(x.life).max:x.life;if(n(Ye)&&(Ye=h=="s"?1:1e3),x.startEmitterPaused){x.pauseEmitter();return}if(t=Array.isArray(x.obj)?x.obj:[x.obj],t.length<=0)return;var te,K;function xe(_e,Se){return _e-Se}Array.isArray(x.interval)?(x.interval.sort(xe),te=x.interval[0]):x.interval.constructor=={}.constructor?te=x.interval.min:te=x.interval,Array.isArray(x.num)?(x.num.sort(xe),K=x.num[x.num.length-1]):x.num.constructor=={}.constructor?K=x.num.max:K=x.num,e.loop(e.Pick.choose(x.num),function(){if(x.decayTime>0){var _e={};x.shrink&&(_e.scale=0),x.fade&&(_e.alpha=0)}var Se,ie,pe;if(x.pool&&j.length>0&&V>=Math.max(x.poolMin,Ye/te*K))Se=j[O++%j.length],Se.visible=!0,pe=Se.trace?Se.getChildAt(0):Se,pe.emitShape&&(ie=pe.template,pe.graphics.c().s(ie.s?e.Pick.choose(ie.s):null).ss(ie.ss?e.Pick.choose(ie.ss):null).sd(ie.sd?e.Pick.choose(ie.sd):null,ie.offset?e.Pick.choose(ie.offset):null)),Se.trace&&Se.updateCache(),x.layers=="top"?pe.emitShape?Se.addTo($,null,!1):Se.centerReg($,$.numChildren-1):pe.emitShape?Se.addTo($,x.layers=="bottom"?0:e.rand($.numChildren),!1):Se.centerReg($,x.layers=="bottom"?0:e.rand($.numChildren)),Se.scaleX=1,Se.scaleY=1,pe.scaleX=pe.originalScaleX,pe.scaleY=pe.originalScaleY,pe.rotation=pe.originalRotation,pe.color=pe.originalColor,pe.endSpurt=!1;else{V++,x.trace&&(Se=new e.Container(r,i,null,null,!1),Se.trace=!0);var be=e.Pick.choose(e.shuffle(t)[0]);be.type=="shape"?(ie=be,pe=new e.Shape(1,1,null,null,null,!1),pe.emitShape=!0,pe.template=ie,pe.graphics.s(ie.s?e.Pick.choose(ie.s):null).ss(ie.ss?e.Pick.choose(ie.ss):null).sd(ie.sd?e.Pick.choose(ie.sd):null,ie.offset?e.Pick.choose(ie.offset):null),x.trace?pe.addTo(Se,null,!1):x.layers=="top"?pe.addTo($,null,!1):pe.addTo($,x.layers=="bottom"?0:e.rand($.numChildren),null,!1)):(pe=be.clone(),pe.centerReg||Yn(pe),x.trace?pe.centerReg(Se).pos({x:-1e3,y:-1e3,reg:!0}):x.layers=="top"?pe.centerReg($):pe.centerReg($,x.layers=="bottom"?0:e.rand($.numChildren))),x.trace&&(x.layers=="top"?Se.addTo($,null,!1):Se.addTo($,x.layers=="bottom"?0:e.rand($.numChildren),!1),Se.cache(S,P,r,i)),x.trace||(Se=pe),Se.particle=pe,pe.originalAlpha=pe.alpha,pe.originalScaleX=pe.scaleX,pe.originalScaleY=pe.scaleY,pe.originalRotation=pe.rotation,pe.originalColor=pe.color}x.currentParticle=pe,x.particlesEmitted++,Se.particleNormal=!0,Se.particleDecaying=!1,Se.particleFizzing=!1;var he=e.Pick.choose(x.angle),Pe=e.Pick.choose(x.emitterForce),Re=Pe*Math.cos(he*Math.PI/180),ve=Pe*Math.sin(he*Math.PI/180);pe.info={position:{x:x.x,y:x.y},velocity:{x:Re,y:ve}},x.horizontal&&(pe.info.position={x:x.x-x.regX+e.rand(0,r),y:x.y-x.regY+(x.vertical?i/2:0)}),x.vertical&&(pe.info.position={x:x.x-x.regX+(x.horizontal?r/2:0),y:x.y-x.regY+e.rand(0,i)}),pe.emitShape?pe.graphics.mt(pe.info.position.x,pe.info.position.y):(pe.x=pe.info.position.x,pe.y=pe.info.position.y),pe.alpha=pe.originalAlpha,x.random&&e.loop(x.random,function(ke,oe){var Ge=e.Pick.choose(oe);ke=="scale"?pe.sca(Ge):(ke=="x"?pe.info.position.x=x.horizontal||x.vertical?Ge:Ge+r/2:ke=="y"&&(pe.info.position.y=x.horizontal||x.vertical?Ge:Ge+i/2),(ke=="x"||ke=="y")&&pe.emitShape&&pe.graphics.mt(pe.info.position.x,pe.info.position.y),pe[ke]=Ge,pe.emitShape&&(pe.x=0,pe.y=0))}),B&&!pe.emitShape&&pe.cache(pe.getBounds().x-10,pe.getBounds().y-10,pe.getBounds().width+20,pe.getBounds().height+20);var Ae=pe.emitShape?!1:x.shrink;if(x.decayTime>0&&(x.fade||Ae||x.trace&&x.traceFadeTime>0)){var ye=ct(x.life);if(x.trace&&x.traceFadeTime>0&&Se.animate({obj:{alpha:0},time:x.traceFadeTime,wait:ye-x.traceFadeTime,waitedCall:function(ke){ke.particleNormal=!1,ke.particleFizzing=!0},call:ue,override:!1,id:"decay"}),x.fade||Ae){var Fe={};x.fade&&(Fe.alpha=0),Ae&&(Fe.scaleX=0,Fe.scaleY=0),pe.animate({obj:Fe,time:x.decayTime,wait:n(x.decayStart)?ye-x.decayTime:x.decayStart,waitedCall:function(ke){ke.parent!=x&&(ke=ke.parent),ke.particleNormal=!1,ke.particleDecaying=!0},call:function(ke){x.events&&fe("decayed",ke),ke.endSpurt&&fe("spurtdecayed",ke),x.trace&&x.traceFadeTime>0||(n(x.decayStart)||x.decayStart+x.decayTime>x.life?ke.parent&&ue(ke.parent.trace?ke.parent:ke):-function(){var oe=Se;e.timeout(ye-(x.decayStart+x.decayTime),function(){ue(oe)})}())},override:!1,id:"decay"})}}else x.life>0&&-function(){var ke=Se;ke.timeOut=e.timeout(x.life,function(){ue(ke)})}();if(x.events&&fe("emitted",Se),ae(pe),x.animation){var De=e.Pick.choose(x.animation);Array.isArray(De)?e.loop(De,function(ke){n(ke.override)&&(ke.override=!1),pe.animate(e.copy(ke))}):(n(De.override)&&(De.override=!1),pe.animate(e.copy(De)))}})},null,!0,!0);var z=0;ce=x.emitterTicker=e.Ticker.add(function(){e.loop($,function(Ye){if(Ye.trace){var te=Ye;Ye=Ye.getChildAt(0)}var K=Ye.info,xe=0,_e=0;if(!n(x.sink)){var Se=x.particles.localToGlobal(K.position.x,K.position.y),ie;x.sink.parent&&x.sink.parent.localToGlobal?ie=x.sink.parent.localToGlobal(x.sink.x,x.sink.y):ie=new $e.Point(e.Pick.choose(x.sink.x),e.Pick.choose(x.sink.y));var pe=e.angle(Se.x,Se.y,ie.x,ie.y);xe=x.sinkForce*Math.cos(pe*Math.PI/180),_e=x.sinkForce*Math.sin(pe*Math.PI/180)}var be=x.wind+xe,he=x.gravity+_e;K.velocity.x+=be*z,K.velocity.y+=he*z,K.position.x+=K.velocity.x*z*100,K.position.y+=K.velocity.y*z*100,Ye.emitShape?Ye.graphics.lt(K.position.x,K.position.y):(Ye.x=K.position.x,Ye.y=K.position.y),x.trace&&te&&te.updateCache(Ye.emitShape?null:"source-over")})},H),z=1/e.Ticker.framerate}}x.particles.noMouse();function ue(ge){if(x.events&&fe("fizzed",ge),(ge.trace?ge.getChildAt(0).endSpurt:ge.endSpurt)&&(fe("spurtfizzed",ge),x.spurting=!1),x.pool&&ge.pooled!="end")if(ge.pooled){ge.visible=!1;return}else{ge.pooled=!0,j&&j.push(ge),ge.visible=!1;return}x.removeChild(ge),x.trace&&ge.uncache(),ge=null}function fe(ge,Be){if(!n(Be)){var z=new $e.Event(ge);z.particle=Be.trace?Be.getChildAt(0):Be,x.dispatchEvent(z)}}function ae(ge){n(x.spurtCount)&&n(x.spurtNum)||(x.spurtCount++,x.spurtCount>=x.spurtNum&&Ie(ge))}function Ie(ge){x.pauseEmitter(),x.spurtCount=x.spurtNum=null,!n(ge)&&(fe("spurted",ge),ge.endSpurt=!0)}Object.defineProperty(x,"interval",{get:function(){return o},set:function(ge){o=ge,x.zimInterval&&(x.zimInterval.time=o)}}),this.removeFrom=function(){x.parent&&x.parent.removeChild(x),x.particles.removeFrom()},this.spurting=!1,this.spurt=function(ge,Be,z){var Ye="num, time, restart",te;return(te=vt(x.spurt,arguments,Ye))?te:(n(Be)||(e.timeout(e.Pick.choose(Be),function(){Ie(x.currentParticle)},!0),x.spurting=!0),n(ge)||(x.spurtNum=e.Pick.choose(ge),x.spurtCount=0,x.spurting=!0),x.pauseEmitter(!1,z,null,!0),x)},this.clearPool=function(){e.loop(x.particles,function(ge){ge.pooled="end",ge.visible||x.removeChild(ge)},!0),V=0,O=0,j=[]},x.startEmitterPaused||(this.emitterPaused=!1),this.pauseEmitter=function(ge,Be,z,Ye){if(x.startEmitterPaused=null,n(ge)&&(ge=!0),n(Be)&&(Be=!1),n(z)&&(z=!1),ge){if(x.emitterPaused)return x;z&&(ce&&e.Ticker.remove(ce),e.loop(x.particles,function(te){te.pauseAnimate(),te.trace&&te.getChildAt(0).pauseAnimate(),te.timeOut&&te.timeOut.pause()})),x.zimInterval.pause(),x.emitterPaused=!0}else{if(!x.emitterPaused)return x;Be&&(e.loop(x.particles,function(te){te.stopAnimate(),te.timeOut&&te.timeOut.clear(),te.trace&&te.getChildAt(0).pauseAnimate()}),x.removeAllChildren()),H&&ce&&!e.Ticker.has(H,ce)&&(e.Ticker.add(ce,H),e.loop(x.particles,function(te){te.pauseAnimate(!1),te.timeOut&&te.timeOut.pause(!1),te.trace&&te.getChildAt(0).pauseAnimate(!1)})),x.zimInterval&&x.zimInterval.pause(!1,Ye),x.emitterPaused=!1}return x},this.resize=function(ge,Be){n(ge)||(r=ge),n(Be)||(i=Be),x.setBounds(0,0,r,i),!Y&&!W&&x.centerReg(),x.clearPool()},re!==!1&&e.styleTransforms(this,d),this.clone=function(ge){var Be;return Array.isArray(x.obj)||x.obj.constructor=={}.constructor?Be=e.copy(x.obj):x.obj.clone?Be=x.obj.clone(ge):Be=x.obj,x.cloneProps(new e.Emitter(Be,r,i,x.interval,x.num,x.life,x.fade,x.shrink,x.decayTime,x.decayStart,x.trace,x.traceFadeTime,x.traceShiftX,x.traceShiftY,x.angle,x.emitterForce,x.gravity,x.wind,x.layers,x.animation,e.copy(x.random),x.horizontal,x.vertical,x.sink,x.sinkForce,B,x.events,Z,x.pool,x.poolMin,re,x.group,Q))},this.dispose=function(){return x.zimInterval&&x.zimInterval.clear(),ce&&e.Ticker.remove(ce),e.loop(j,function(ge){ge&&ge.dispose()}),$&&$.dispose&&$.dispose(),x.currentParticle&&x.currentParticle.dispose&&x.currentParticle.dispose(),t&&Array.isArray(t)?e.loop(t,function(ge){ge.dispose&&ge.dispose()}):t&&t.dispose&&t.dispose(),$=x.currentParticle=x.particles=t=x.obj=j=x.poolList=null,!0}},e.extend(e.Emitter,e.Container,"clone","zimContainer",!1),e.Generator=function(t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,T,L,I,C,k,Y){var W="color, strokeColor, strokeWidth, draw, stamp, setup, maxCount, boundary, drawCount, drawPause, drawSpacebarPause, startX, startY, cache, recordLinePoints, frame, seed, output, outputType, style, group, inherit",G;if(G=vt(e.Generator,arguments,W,this))return G;He("69.92"),this.group=k;var F=C===!1?{}:e.getStyle("Generator",this.group,Y);n(R)&&(R=F.frame!=null?F.frame:le.zdf);var B=R.stage;n(t)&&(t=F.color!=null?F.color:null),n(r)&&(r=F.strokeColor!=null?F.strokeColor:e.white),n(i)&&(i=F.strokeWidth!=null?F.strokeWidth:1),n(p)&&(p=F.maxCount!=null?F.maxCount:1e3),n(v)&&(v=F.boundary!=null?F.boundary:new e.Boundary(0,0,B.width,B.height)),n(w)&&(w=F.drawCount!=null?F.drawCount:1),n(b)&&(b=F.drawPause!=null?F.drawPause:!0),n(_)&&(_=F.drawSpacebarPause!=null?F.drawSpacebarPause:!0),n(E)&&(E=F.startX!=null?F.startX:B.width/2),n(S)&&(S=F.startY!=null?F.startY:B.height/2),n(P)&&(P=F.cache!=null?F.cache:!1);var q=this.drawing=new e.Container(v.x,v.y,v.width,v.height).addTo(B),Z=this.shape=new e.Shape(v.width,v.height).addTo(q);this.drawCount=w,n(b)&&(b=!0),P&&Z.cache(v.x,v.y,v.width,v.height),this.zimContainer_constructor(v.x,v.y,v.width,v.height),this.type="Generator";var X=this;if(X.draw=null,L){X.drawCount=10,!n(l)&&n(o)&&(o=l),l=null;var ne=new e.Loader;X.outputNum=0,X.outputName=L===!0?"gen_":L.match(/_$/)?L:L+"_"}this.color=t,this.strokeColor=r,this.strokeWidth=i;var $=E,re=S;this.fill=function(d){return X.color=d,X.currentColor=ct(X.color),Z.f(X.currentColor),this},this.stroke=function(d,h){return n(d)||(X.strokeColor=d,X.currentStrokeColor=ct(X.strokeColor),Z.s(X.currentStrokeColor)),n(h)||(X.strokeWidth=h,X.currentStrokeWidth=ct(X.strokeWidth),Z.ss(X.currentStrokeWidth)),this},this.noStroke=function(){return X.strokeColor=X.currentStrokeColor=null,X.strokeWidth=X.currentStrokeWidth=null,Z.s(),Z.ss(1),this},Z.matrix=Z.getMatrix(),this.translate=function(d,h){n(d)&&(d=0),n(h)&&(h=0),d=ct(d),h=ct(h);var x=Z.matrix.transformPoint(d,h);return $=x.x,re=x.y,Z.mt($,re),Z.matrix.translate(d,h),this},this.rotate=function(d){return n(d)&&(d=0),d=ct(d),Z.matrix.rotate(d),this},this.scale=function(d,h){return n(d)&&(d=1),n(h)&&(h=d),d=ct(d),h=ct(h),Z.matrix.scale(d,h),this},this.skew=function(d,h){return n(d)&&(d=0),n(h)&&(h=0),d=ct(d),h=ct(h),Z.matrix.skew(d,h),this},A&&(X.linePoints=[]),this.line=function(d,h,x,j){n(d)&&(d=0),n(h)&&(h=0),n(x)&&(x=0),n(j)&&(j=0),d=ct(d),h=ct(h),x=ct(x),j=ct(j),(A=="zero"||A=="nonzero"&&d&&h)&&X.linePoints.push([d,h]),X.translate(d,h);var O=Z.matrix.transformPoint(x,j);return $=O.x,re=O.y,Z.lt($,re),A&&X.linePoints.push([$,re]),Z.matrix.translate(x,j),this},this.arc=function(d,h,x,j,O,V){n(d)&&(d=0),n(h)&&(h=0),n(x)&&(x=50),d=ct(d),h=ct(h),x=ct(x),x=Math.abs(x),n(j)&&(j=0),n(O)&&(O=180),j=ct(j),O=ct(O),n(V)&&(V=!1),V=ct(V),X.translate(d,h);var ce=Z.matrix.transformPoint(0,0);Z.decomp||(Z.decomp={}),Z.matrix.decompose(Z.decomp);var H=(Math.abs(Z.decomp.scaleX)+Math.abs(Z.decomp.scaleY))/2,N=Z.decomp.rotation||0,ue=x*H;return Z.mt(ce.x+ue*Math.cos((j+N)*Math.PI/180),ce.y+ue*Math.sin((j+N)*Math.PI/180)),Z.a(ce.x,ce.y,ue,(j+N)*Math.PI/180,(O+N)*Math.PI/180,V),this},this.curve=function(d,h,x,j,O,V){n(d)&&(d=0),n(h)&&(h=0),n(x)&&(x=50),n(j)&&(j=50),n(O)&&(O=100),n(V)&&(V=0),d=ct(d),h=ct(h),x=ct(x),j=ct(j),O=ct(O),V=ct(V),X.translate(d,h);var ce=Z.matrix.transformPoint(x,j),H=Z.matrix.transformPoint(O,V),N=H.x,ue=H.y;return Z.qt(ce.x,ce.y,N,ue),Z.matrix.translate(O,V),this},this.bezier=function(d,h,x,j,O,V,ce,H){n(d)&&(d=0),n(h)&&(h=0),n(x)&&(x=50),n(j)&&(j=50),n(O)&&(O=-50),n(V)&&(V=-50),n(ce)&&(ce=100),n(H)&&(H=0),d=ct(d),h=ct(h),x=ct(x),j=ct(j),O=ct(O),V=ct(V),ce=ct(ce),H=ct(H),X.translate(d,h);var N=Z.matrix.transformPoint(x,j),ue=Z.matrix.transformPoint(O,V),fe=Z.matrix.transformPoint(ce,H),ae=fe.x,Ie=fe.y;return Z.bt(N.x,N.y,ue.x,ue.y,ae,Ie),Z.matrix.translate(ce,H),this},this.rectangle=function(d,h,x,j,O,V,ce,H){if(n(d)&&(d=0),n(h)&&(h=0),n(x)&&(x=100),n(j)&&(j=x),d=ct(d),h=ct(h),x=ct(x),j=ct(j),!O&&!V&&!ce&&!H){X.translate(d,h);var N=Z.matrix.transformPoint(0,0),ue=Z.matrix.transformPoint(x,0),fe=Z.matrix.transformPoint(x,j),ae=Z.matrix.transformPoint(0,j);return Z.mt(N.x,N.y).lt(ue.x,ue.y).lt(fe.x,fe.y).lt(ae.x,ae.y).lt(N.x,N.y).lt(ue.x,ue.y),Z.mt(N.x,N.y),this}n(O)&&(O=0),n(V)&&(V=O),n(ce)&&(ce=O),n(H)&&(H=O),O=ct(O),V=ct(V),ce=ct(ce),H=ct(H);var Ie=(x<j?x:j)/2,ge=0,Be=0,z=0,Ye=0;Ie=Math.abs(Ie),O<0&&(O*=ge=-1),O>Ie&&(O=Ie),V<0&&(V*=Be=-1),V>Ie&&(V=Ie),ce<0&&(ce*=z=-1),ce>Ie&&(ce=Ie),H<0&&(H*=Ye=-1),H>Ie&&(H=Ie),X.translate(d,h),Z.decomp||(Z.decomp={}),Z.matrix.decompose(Z.decomp);var te=(Math.abs(Z.decomp.scaleX)+Math.abs(Z.decomp.scaleY))/2,K=x<0?-1:1,xe=j<0?-1:1,_e=Z.matrix.transformPoint(x-V*K,0),Se=Z.matrix.transformPoint(x+V*Be*K,-V*Be*xe),ie=Z.matrix.transformPoint(x,V*xe),pe=Z.matrix.transformPoint(x,j-ce*xe),be=Z.matrix.transformPoint(x+ce*z*K,j+ce*z*xe),he=Z.matrix.transformPoint(x-ce*K,j),Pe=Z.matrix.transformPoint(H*K,j),Re=Z.matrix.transformPoint(-H*Ye*K,j+H*Ye*xe),ve=Z.matrix.transformPoint(0,j-H*xe),Ae=Z.matrix.transformPoint(0,O*xe),ye=Z.matrix.transformPoint(-O*ge*K,-O*ge*xe),Fe=Z.matrix.transformPoint(O*K,0);return Z.mt(_e.x,_e.y).at(Se.x,Se.y,ie.x,ie.y,V*te).lt(pe.x,pe.y).at(be.x,be.y,he.x,he.y,ce*te).lt(Pe.x,Pe.y).at(Re.x,Re.y,ve.x,ve.y,H*te).lt(Ae.x,Ae.y).at(ye.x,ye.y,Fe.x,Fe.y,O*te).cp(),this},this.circle=function(d,h,x,j,O){n(d)&&(d=0),n(h)&&(h=0),n(x)&&(x=50),n(j)&&(j=100),n(O)&&(O=!0),d=ct(d),h=ct(h),x=ct(x),j=ct(j),x=Math.abs(x),X.translate(d,h);var V=Z.matrix.transformPoint(0,0);Z.decomp||(Z.decomp={}),Z.matrix.decompose(Z.decomp);var ce=(Math.abs(Z.decomp.scaleX)+Math.abs(Z.decomp.scaleY))/2,H=Z.decomp.rotation||0,N=x*ce;if(X.circleHeight=N*2,typeof j=="number"&&j>=0&&j<100){var ue=360*j/100/2;Z.mt(V.x+N*Math.cos((-ue-90+H)*Math.PI/180),V.y+N*Math.sin((-ue-90+H)*Math.PI/180)),Z.a(V.x,V.y,N,(-ue-90+H)*Math.PI/180,(ue-90+H)*Math.PI/180,!1),O&&Z.cp(),X.circleHeight=N-Math.cos(ue*Math.PI/180)*N}else Z.mt(V.x+N,V.y),Z.a(V.x,V.y,N,0,Math.PI*2);return this},this.elipse=function(d,h,x,j){n(d)&&(d=0),n(h)&&(h=0),n(x)&&(x=100),n(j)&&(j=50),d=ct(d),h=ct(h),x=ct(x),j=ct(j),X.translate(d,h);var O=Z.matrix.transformPoint(-x/2,-j/2);Z.decomp||(Z.decomp={}),Z.matrix.decompose(Z.decomp);var V=Z.decomp.scaleX,ce=Z.decomp.scaleY;return Z.de(O.x,O.y,x*V,j*ce),this},this.poly=function(d,h,x,j,O,V){n(d)&&(d=0),n(h)&&(h=0),n(x)&&(x=100),n(j)&&(j=5),n(O)&&(O=0),n(V)&&(V=0),d=ct(d),h=ct(h),x=ct(x),j=ct(j),O=ct(O),V=ct(V),x=Math.abs(x),X.translate(d,h);var ce=Z.matrix.transformPoint(0,0);Z.decomp||(Z.decomp={}),Z.matrix.decompose(Z.decomp);var H=(Math.abs(Z.decomp.scaleX)+Math.abs(Z.decomp.scaleY))/2,N=Z.decomp.rotation||0,ue=x*H;return Z.dp(ce.x,ce.y,ue,j,O,N),this},this.closePath=this.close=this.cp=function(){return Z.cp(),this},this._noise=new e.Noise(T),this.noise=function(){if(arguments.length==1)return(this._noise.simplex1D.apply(null,arguments)+1)/2;if(arguments.length==2)return(this._noise.simplex2D.apply(null,arguments)+1)/2;if(arguments.length==3)return(this._noise.simplex3D.apply(null,arguments)+1)/2;if(arguments.length==4)return(this._noise.simplex4D.apply(null,arguments)+1)/2},this.stack=[],this.colorStrokeStack=[],this.push=function(){return X.stack.push(Z.matrix.clone()),X.colorStrokeStack.push([X.color,X.strokeColor,X.strokeWidth,X.currentColor,X.currentStrokeColor,X.currentStrokeWidth]),this},this.pop=function(){Z.matrix=X.stack.pop()||Z.matrix;var d=X.colorStrokeStack.pop()||[X.color,X.strokeColor,X.strokeWidth,X.currentColor,X.currentStrokeColor,X.currentStrokeWidth];return X.color=d[0],X.strokeColor=d[1],X.strokeWidth=d[2],X.currentColor=d[3],X.currentStrokeColor=d[4],X.currentStrokeWidth=d[5],Z.f(X.currentColor).s(X.currentStrokeColor).ss(X.currentStrokeWidth),Z.mt(Z.matrix.x,Z.matrix.y),this},this.blit=function(){return Z.updateCache("source-over"),Z.c(),this},this.step=function(){return X.draw&&g(),this},n(X.color)||this.fill(X.color),!n(X.strokeColor)&&X.strokeWidth?this.stroke(X.strokeColor,X.strokeWidth):X.noStroke(),this.translate($,re),typeof c=="function"&&(this.setup=c,e.timeout(.01,function(){c(0,X.count,X),P&&Z.updateCache(),B.update()}));var de=0;this.maxCount=p,this.resetup=function(d){return n(d)&&(d=!0),de=0,d&&X.shape.c(),n(X.color)||this.fill(X.color),!n(X.strokeColor)&&X.strokeWidth?this.stroke(X.strokeColor,X.strokeWidth):X.noStroke(),this.reset(),this.setup&&(c(0,X.count,X),P&&Z.updateCache(),B.update()),this},this.stampNum=0,typeof l=="function"&&(this.stamp=l,e.timeout(.015,function(){U(0)})),this.restamp=function(d,h){return n(d)&&(d=!0),n(h)&&(h=!0),de=0,d&&X.shape.c(),h&&X.resetup(d),U(0),this},this.reset=function(){return this.fill(t),!n(r)&&i?this.stroke(r,i):this.noStroke(),Z.matrix.identity(),this.translate(E,S),this},this.clear=function(){return this.shape.c(),this};function Q(){ne.save({content:B,filename:X.outputName+e.decimals(X.outputNum,null,null,6),type:I}),X.outputNum++}L&&(B.update(),Q());function U(d){X.stampNum++;var h=e.loop(X.maxCount,function(x,j){if(X.paused)return X.pausedCount=x,!1;if(X.changeCount)return X.changeCount=!1,!1;de=x+1;var O=l(x+1,j,X,X.stampNum);if(X.currentColor=ct(X.color),Z.f(X.currentColor),X.currentStrokeColor=ct(X.strokeColor),Z.s(X.currentStrokeColor),X.currentStrokeWidth=ct(X.strokeWidth),Z.ss(X.currentStrokeWidth),L&&(B.update(),Q()),O)return O},null,null,d);P&&Z.updateCache(),h&&X.dispatchEvent("complete"),B.update()}X.iterator=0,typeof o=="function"&&(this.draw=o,c?setTimeout(function(){X.ticker=e.Ticker.add(g)},100):this.ticker=e.Ticker.add(g),X.generatorPaused=!1,b&&(X.pauseEvent=B.on("stagemousedown",function(){X.count>=X.maxCount||X.pauseTimeout||(e.Ticker.has(X.ticker)?(e.Ticker.remove(X.ticker),X.generatorPaused=!0,X.dispatchEvent("generatorpaused")):(X.ticker=e.Ticker.add(X.ticker),X.generatorPaused=!1,X.dispatchEvent("generatorunpaused")))})),_&&(X.pauseSpacebarEvent=R.on("keydown",function(d){X.count>=X.maxCount||X.pauseTimeout||d.keyCode==20&&(e.Ticker.has(X.ticker)?(e.Ticker.remove(X.ticker),X.generatorPaused=!0,X.dispatchEvent("generatorpaused")):(X.ticker=e.Ticker.add(X.ticker),X.generatorPaused=!1,X.dispatchEvent("generatorunpaused")))})));function g(){X.iterator++,X.iterator%Math.ceil(X.drawCount)==0&&(X.count++,X.draw(X.count,X.maxCount,X),P&&X.blit(),X.currentColor=ct(X.color),Z.f(X.currentColor),X.currentStrokeColor=ct(X.strokeColor),Z.s(X.currentStrokeColor),X.currentStrokeWidth=ct(X.strokeWidth),Z.ss(X.currentStrokeWidth),X.dispatchEvent("drawing"),B.update(),L&&Q()),X.maxCount&&X.count>=X.maxCount&&(X.dispatchEvent("complete"),e.Ticker.remove(X.ticker))}this.redraw=function(d,h){return n(d)&&(d=!0),X.reset(),n(h)&&(h=!0),X.ticker&&e.Ticker.remove(X.ticker),X.iterator=0,X.count=0,d&&X.shape.c(),h?(X.resetup(d),setTimeout(function(){X.ticker&&(X.ticker=e.Ticker.add(X.ticker))},100)):X.ticker&&(X.ticker=e.Ticker.add(X.ticker)),this},this.paused=!1,this.pause=function(d,h){if(n(d)&&(d=!0),!(X.count>=X.maxCount)){if(d==this.paused)return this;this.paused=d,this.pauseTimeout&&this.pauseTimeout.clear(),this.paused?X.ticker&&e.Ticker.remove(X.ticker):X.ticker?X.ticker=e.Ticker.add(X.ticker):U(X.pausedCount,X.maxCount),setTimeout(function(){B.update()},20),h&&(this.pauseTimeout=e.timeout(h,function(){X.pause(!X.paused),X.pauseTimeout=null})),X.dispatchEvent(X.paused?"paused":"unpaused")}},this.outOfBounds=function(d,h){n(d)&&(d=0),n(h)&&(h=d);var x=X.shape.stage;if(x)return X.currentX>x.width-d||X.currentX<0+d||X.currentY>x.height-h||X.currentY<0+h},this.stop=function(){X.pause(),X.pauseEvent&&B.off("stagemousedown",X.pauseEvent),X.pauseSpaceEvent&&R.off("keydown",X.pauseSpaceEvent)},Object.defineProperty(this,"count",{get:function(){return de},set:function(d){de=d,X.stamp&&(X.changeCount=!0,setTimeout(function(){U(de,X.maxCount)}))}}),Object.defineProperty(this,"currentX",{get:function(){return $},set:function(){Ct&&lt("Generator() - currentX is read only")}}),Object.defineProperty(this,"currentY",{get:function(){return re},set:function(){Ct&&lt("Generator() - currentY is read only")}}),this.clone=function(){return X.cloneProps(new e.Generator(t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,T,C,X.group,Y))},X.dispose=function(d,h,x){return X.pause(),X.ticker&&e.Ticker.remove(X.ticker),X.pauseEvent&&B.off("stagemousedown",X.pauseEvent),X.pauseSpacebarEvent&&R.off("keydown",X.pauseSpacebarEvent),X._noise&&(X._noise=null),X.shape&&X.shape.dispose(),X.drawing&&X.drawing.dispose(),X.shape=X.drawing=null,x||X.zimContainer_dispose(),!0},C!==!1&&e.styleTransforms(this,F)},e.extend(e.Generator,e.Container,["clone","dispose"],"zimContainer",!1),e.Pen=function(t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,T,L,I,C,k,Y,W,G,F,B,q,Z,X,ne){var $="size, color, penType, damp, spread, borderColor, borderWidth, end, paper, nib, cache, ctrlKey, cropScale, undo, undoKeys, move, onTop, deleteable, doubleClickDelete, holdDelete, immediateStop, lineAlpha, lineBlendMode, frame, dashed, pullColor, pullThickness, style, group, inherit",re;if(re=vt(e.Pen,arguments,$,this))return re;He("69.93"),this.zimContainer_constructor(),this.type="Pen",this.group=X;var de=Z===!1?{}:e.getStyle(this.type,this.group,ne);n(i)&&(i=de.penType!=null?de.penType:"line");var Q={size:2,color:e.dark,spread:{min:5,max:20},borderColor:e.darker,borderWidth:0},U={line:{size:2},kitetail:{size:{min:5,max:20},color:e.series(e.pink,e.blue,e.green),borderColor:"rgba(0,0,0,.5)",borderWidth:1},grass:{color:e.green,size:3,spread:{min:10,max:30}},hair:{color:[e.pink,e.blue],size:3,spread:{min:20,max:50}},city:{size:{min:30,max:70},spread:{min:50,max:200},color:[e.dark,e.darker,e.grey]},barbwire:{},splatter:{size:{min:5,max:20},color:"rgba(0,0,0,.5)"}};n(U[i])&&(i="line"),n(t)&&(t=de.size!=null?de.size:n(U[i].size)?Q.size:U[i].size),n(r)&&(r=de.color!=null?de.color:n(U[i].color)?Q.color:U[i].color),n(o)&&(o=de.damp!=null?de.damp:.5),o===!1&&(o=1),n(l)&&(l=de.spread!=null?de.spread:n(U[i].spread)?Q.spread:U[i].spread),n(c)&&(c=de.borderColor!=null?de.borderColor:n(U[i].borderColor)?Q.borderColor:U[i].borderColor),n(p)&&(p=de.borderWidth!=null?de.borderWidth:n(U[i].borderWidth)?Q.borderWidth:U[i].borderWidth),n(v)&&(v=de.end!=null?de.end:e.isPick(t)||e.isPick(r)||i!="line"?"butt":"round"),n(S)&&(S=de.cropScale!=null?de.cropScale:1),n(_)&&(_=de.cache!=null?de.cache:!0),n(P)&&(P=de.undo!=null?de.undo:0),n(A)&&(A=de.undoKeys!=null?de.undoKeys:!0),n(R)&&(R=de.move!=null?de.move:!0),n(L)&&(L=de.deleteable!=null?de.deleteable:!0),n(I)&&(I=de.doubleClickDelete!=null?de.doubleClickDelete:!0),n(C)&&(C=de.holdDelete!=null?de.holdDelete:!0),n(T)&&(T=de.onTop!=null?de.onTop:!0),n(k)&&(k=de.immediateStop!=null?de.immediateStop:"both"),n(Y)&&(Y=de.lineAlpha!=null?de.lineAlpha:1),n(W)&&(W=de.lineBlendMode!=null?de.lineBlendMode:"normal"),n(w)&&(w=de.paper!=null?de.paper:new e.Container),n(b)&&(b=de.nib!=null?de.nib.clone():null),n(G)&&(G=de.frame!=null?de.frame:le.zdf),n(F)&&(F=de.dashed!=null?de.dashed:null),F===!0&&(F=[3,100]),n(B)&&(B=de.pullColor!=null?de.pullColor:null),n(q)&&(q=de.pullThickness!=null?de.pullThickness:1);var g=this;this.dampX=new e.Damp(null,o),this.dampY=new e.Damp(null,o);var d=!0;this.drawing=!1,this.immediateStop=k,this.undoLevels=P,this.undoKeys=A,this.move=R,this.draggable=!0,this.lineAlpha=Y,this.lineBlendMode=W;var h=g.shape=new e.Shape,x=G.stage.width,j=G.stage.height,O,V,ce,H;g.paperNum=0,g.sizeScale=1,g.spreadScale=1,g.sizeFactor=1,g.spreadFactor=1,g.pullThickness=q,g.stop=function(){};var N;this.added(function(te){N=te,g.paper=w,x=g.stage.width,j=g.stage.height,n(b)?g.stageDown=N.on("stagemousedown",function(ie){g.dispatchEvent("start")}):g.zimDown?g.nib=b.addTo(g):(g.nib=b.addTo(g.parent,g.parent.getChildIndex(g)),g.nib.x=g.x,g.nib.y=g.y,g.nib.mouseEnabled=!1,g.stageDown=N.on("stagemousedown",function(ie){N=ie.target.stage,g.nibEvent=N.on("stagemousemove",K),g.dispatchEvent("start")}),g.stageUp=N.on("stagemouseup",function(){N.off("stagemousemove",g.nibEvent)}));function K(ie){g.drawing&&(g.nib.x=ie.stageX/e.scaX,g.nib.y=ie.stageY/e.scaY)}g.zimDragCheck=!1,g.stop=function(){g.stopCheck(!0)},g.infinite=!1,g.stopCheck=function(ie){if(ie)g.drawing=!1,g.infinite=!1;else if(g.infinite||g.zimDragCheck||!g.immediateStop&&g.drawing)return;g.immediate(g.x,g.y),setTimeout(function(){var pe;if(!g.drawing){if(_?(h.cache(-(x*S-x)/2,-(j*S-j)/2,x*S,j*S),pe=w.bitmap=new e.Bitmap(h.cacheCanvas).reg((x*S-x)/2,(j*S-j)/2).addTo(w),h.graphics.clear(),h.uncache(),h.top()):pe=h,g.undoLevels>0){var be={paper:w,line:pe};P.push(be),P.length>g.undoLevels&&P.shift(),g.dispatchEvent("recordUndo")}_||(h=new e.Shape().clone().addTo(w)),g.lastSegment=pe,g.lastSelected=pe,pe.alpha=g.lineAlpha,pe.blendMode=g.lineBlendMode,pe.paper=w,g.dispatchEvent("stop"),g.dispatchEvent("change")}},g.immediateStop||ie?0:50)};var xe=0;g.dampX.immediate(g.x),g.dampY.immediate(g.y),g.lastX=g.lastMidX=g.drawX=g.x,g.lastY=g.lastMidY=g.drawY=g.y;var _e,Se;g.ticker=e.Ticker.add(function(){if(g.parent){var ie=g.dampX.convert(d?g.x:g.finishX),pe=g.dampY.convert(d?g.y:g.finishY),be=g.parent.localToLocal(ie,pe,h);if(Math.abs(g.lastX-ie)+Math.abs(g.lastY-pe)<1){if(g.drawing&&(g.drawing=!1,g.zimDown?(g.x=g.lastX=g.lastMidX=d?g.x:g.finishX,g.y=g.lastY=g.lastMidY=d?g.y:g.finishY):(g.x=g.finishX=g.lastX=g.lastMidX=ie,g.y=g.finishY=g.lastY=g.lastMidY=pe),g.stopCheck(),_e=Se=null),g.lastX=g.lastMidX=ie,g.lastY=g.lastMidY=pe,w){var he=w.localToLocal(0,0,g.parent);g.lastMidX-=he.x,g.lastMidY-=he.y}return}else{var Pe=e.Pick.choose(t)*g.sizeScale*g.sizeFactor,Re=e.Pick.choose(l)*g.spreadScale*g.spreadFactor;g.drawing||(ae=[],w.getChildIndex(h)!=w.numChildren-1&&h.top()),g.drawing=!0,g.dispatchEvent("drawing")}var ve=g.parent.localToLocal(g.lastX,g.lastY,h),Ae;w?Ae=w.localToLocal(g.lastMidX,g.lastMidY,h):Ae=g.parent.localToLocal(g.lastMidX,g.lastMidY,h);var ye,Fe,De;if(i=="splatter")for(var ke=0;ke<=3;ke++){var oe=e.rand(360)*Math.PI/180,Ge=Re,We={x:ie+Ge*Math.cos(oe),y:pe+Ge*Math.sin(oe)},Qe=g.parent.localToLocal(We.x,We.y,h);h.graphics.mt(Qe.x,Qe.y).f(e.Pick.choose(r)).dc(Qe.x,Qe.y,Pe/2)}else i=="grass"||i=="hair"||i=="city"?((i=="grass"||i=="hair")&&(ye=g.lastX+(ie-g.lastX)/2,Fe=g.lastY+(pe-g.lastY)/2,De=g.parent.localToLocal(ye,Fe,h),h.graphics.s(e.Pick.choose(r)).ss(Pe,v).mt(De.x,De.y).lt(De.x+e.rand(-Re/4,Re/4),i=="hair"?De.y+Re:De.y-Re)),(i=="grass"||i=="hair"||i=="city"&&xe%3==0)&&h.graphics.s(e.Pick.choose(r)).ss(Pe,v).mt(be.x,be.y).lt(be.x+(i=="city"?0:e.rand(-Re/4,Re/4)),i=="hair"?De.y+Re:be.y-Re),xe++):(i=="kitetail"&&h.graphics.s(e.Pick.choose(r)).ss(Pe,v),i=="barbwire"?(h.graphics.s(e.Pick.choose(r)).ss(Pe,v),ye=g.lastX+(ie-g.lastX)/2+e.rand(-Re,Re),Fe=g.lastY+(pe-g.lastY)/2+e.rand(-Re,Re)):(ye=g.lastX+(ie-g.lastX)/2,Fe=g.lastY+(pe-g.lastY)/2),De=g.parent.localToLocal(ye,Fe,h),i!="line"&&h.graphics.qt(ve.x,ve.y,De.x,De.y));if(p>0&&i!="line"&&(ye=g.lastX+(ie-g.lastX)/2,Fe=g.lastY+(pe-g.lastY)/2,De=g.parent.localToLocal(ye,Fe,h),h.graphics.s(e.Pick.choose(c)).ss(e.Pick.choose(p)).mt(Ae.x,Ae.y).qt(ve.x,ve.y,De.x,De.y),i=="splatter"&&h.graphics.es()),i=="splatter")h.graphics.f(e.Pick.choose(r));else if(i!="kitetail")if(i=="line"){if(e.isPick(r)||Pe!=Se){var st=e.Pick.choose(r);(st!=_e||Pe!=Se)&&h.graphics.s(st).ss(Pe,v),_e=st,Se=Pe}}else h.graphics.s(e.Pick.choose(r)).ss(Pe,v);i!="grass"&&i!="hair"&&i!="city"&&i!="splatter"&&h.graphics.mt(Ae.x,Ae.y).qt(ve.x,ve.y,De.x,De.y),F&&h.graphics.sd(F),g.lastX=ie,g.lastY=pe,De&&(g.lastMidX=De.x,g.lastMidY=De.y),g.drawX=g.lastMidX||0,g.drawY=g.lastMidY||0}}),n(B)||ue(N),g.mouseChildren=!1});function ue(te){var K=te.frame;g.ppdEvent&&g.off("drawing",g.ppdEvent),g.ppsEvent&&g.off("stop",g.ppsEvent),g.ppmEvent&&te.off("stagemousedown",g.ppmEvent),g.pullShape||(g.pullShape=new e.Shape),g.ppdEvent=g.on("drawing",function(){setTimeout(function(){var xe=w.localToGlobal(g.drawX,g.drawY);g.pullShape.c().s(B).ss(g.pullThickness).mt(K.mouseX,K.mouseY).lt(xe.x,xe.y)},10)}),g.ppsEvent=g.on("stop",function(){g.pullShape.removeFrom(),g.pullShape.c()}),g.ppmEvent=te.on("stagemousedown",function(){g.pullShape.addTo(te),g.immediate(K.mouseX,K.mouseY),g.motionController&&g.motionController.immediate(K.mouseX,K.mouseY)})}function fe(){g.ppdEvent&&g.off("drawing",g.ppdEvent),g.ppsEvent&&g.off("stop",g.ppsEvent),g.ppmEvent&&g.off("stagemousedown",g.ppmEvent),g.pullShape&&g.pullShape.dispose()}P=[];var ae=[];this.saveState=function(te,K,xe){var _e=te.type=="Container"?"paper":"line",Se={paper:g.paper};Se[_e]=te,Se[_e+"Transform"]={x:te.x,y:te.y,r:te.rotation,a:te.alpha,rX:te.regX,rY:te.regY,sX:te.scaleX,sY:te.scaleY,skX:te.skewX,skY:te.skewY,v:te.visible},!n(K)&&!n(xe)&&K!=xe&&(Se.startLayer=K,Se.endLayer=xe),P.push(Se),g.dispatchEvent("recordUndo"),P.length>g.undoLevels&&P.shift()};var Ie={x:0,y:0,r:0,a:1,rX:0,rY:0,sX:1,sY:1,skX:0,skY:0,v:!0};this.undo=function(){var te=P.pop();if(te){if(ae.push(te),te.clear){for(var K=0;K<te.clear.length;K++)te.paper.addChild(te.clear[K]);te.paper.addChild(h)}else te.line&&te.lineTransform?(n(te.startLayer)||(h.top(),te.paper.setChildIndex(te.line,ce)),ge("line",te.line)):te.line?te.line.removeFrom():te.paperTransform&&ge("paper",te.paper);g.lastPaper=g.paper,te.paper!=g.paper&&(g.paper=te.paper,g.dispatchEvent("paperChange")),g.dispatchEvent("change"),g.dispatchEvent("undo"),!e.OPTIMIZE&&(Mt||!le.OPTIMIZE)&&g.stage&&g.stage.update()}};function ge(te,K){for(var xe,_e=P.length-1;_e>=0;_e--)if(P[_e][te]==K&&P[_e][te+"Transform"]){xe=P[_e][te+"Transform"];break}xe||(xe=e.copy(Ie)),K.x=xe.x,K.y=xe.y,K.alpha=xe.a,K.rotation=xe.r,K.regX=xe.rX,K.regY=xe.rY,K.scaleX=xe.sX,K.scaleY=xe.sY,K.skewX=xe.skX,K.skewY=xe.skY,K.visible=xe.v,te=="line"&&_&&(K.regX=(x*S-x)/2,K.regY=(j*S-j)/2)}this.redo=function(){var te=ae.pop(),K,xe;te&&(P.push(te),te.clear?(te.paper.removeAllChildren(),te.paper.addChild(h)):te.line&&te.lineTransform?(n(te.endLayer)||(h.top(),te.paper.setChildIndex(te.line,H)),xe=te.lineTransform,K=te.line):te.line?te.line.addTo(te.paper):te.paperTransform&&(xe=te.paperTransform,K=te.paper),K&&(K.x=xe.x,K.y=xe.y,K.alpha=xe.a,K.rotation=xe.r,K.regX=xe.rX,K.regY=xe.rY,K.scaleX=xe.sX,K.scaleY=xe.sY,K.skewX=xe.skX,K.skewY=xe.skY,K.visible=xe.v),g.lastPaper=g.paper,te.paper!=g.paper&&(g.paper=te.paper,g.dispatchEvent("paperChange")),g.dispatchEvent("change"),g.dispatchEvent("redo"),!e.OPTIMIZE&&(Mt||!le.OPTIMIZE)&&g.stage&&g.stage.update())},g.ctrlKey=!1,g.shiftKey=!1,g.ctrlKeyCheck=!1,g.zimkeydownEvent=function(te){g.ctrlKey=te.ctrlKey,g.shiftKey=te.shiftKey,te.keyCode==17&&R&&!g.ctrlKeyCheck&&(g.ctrlKeyCheck=!0,w.noDrag(),w.drag({onTop:T,all:!0})),!(g.undoLevels<=0)&&g.undoKeys&&(te.ctrlKey&&(te.shiftKey&&te.keyCode==90||te.keyCode==89)?g.redo():te.ctrlKey&&te.keyCode==90&&g.undo(),G&&G.ctrlKey&&g.write&&(g.lastWrite=g.write,g.write=!1))},le.addEventListener("keydown",g.zimkeydownEvent),g.zimkeyupEvent=function(te){te.keyCode==17&&R&&g.ctrlKeyCheck&&(g.ctrlKeyCheck=!1,w.noDrag(),w.drag({onTop:T})),te.ctrlKey||(g.ctrlKey=!1),te.shiftKey||(g.shiftKey=!1),G&&!G.ctrlKey&&g.write==!1&&(g.write=g.lastWrite)},le.addEventListener("keyup",g.zimkeyupEvent),Object.defineProperty(this,"paper",{get:function(){return w},set:function(te){te.type=="Container"&&(w=te,h.addTo(w,0,!1),w.shape=h,g.dampX.immediate(g.x),g.dampY.immediate(g.y),g.lastX=g.lastMidX=g.finishX=g.x,g.lastY=g.lastMidY=g.finishY=g.y,i=="barbwire"&&h.graphics.s(e.Pick.choose(r)).ss(e.Pick.choose(t)*g.sizeScale*g.sizeFactor,v),h.graphics.mt(g.x,g.y),w.parent||w.addTo(g.parent,g.parent.getChildIndex(g)),n(w.paperNum)&&(w.paperNum=++g.paperNum,L&&w.on("mousedown",function(K){g.lastSelected=K.target,g.nibEvent&&g.stage.off("stagemousemove",g.nibEvent);var xe=K.target.paper;xe&&(xe!=g.paper&&(g.paper=xe,g.dispatchEvent("paperChange")),g.shiftKey&&(g.ctrlKey?g.clear():(K.target.visible=!1,g.undoLevels>0&&g.saveState(K.target),g.dispatchEvent("change"))))}),I&&w.on("dblclick",function(K){K.target.visible=!1,g.undoLevels>0&&g.saveState(K.target)}),I&&w.hold(function(K){K.target.visible=!1,g.undoLevels>0&&g.saveState(K.target)}),R&&(w.on("mousedown",function(K){N=K.target.stage,g.draggingCheck=!0,!(g.shiftKey&&L)&&(O=K.stageX/e.scaX,V=K.stageY/e.scaY,h.top(),ce=w.getChildIndex(K.target))}),w.drag({onTop:T}),w.on("pressup",function(K){if(!(L&&g.shiftKey)&&K.target.visible!=!1&&!(g.undoLevels<=0)){if(Math.abs(K.stageX/e.scaX-O)<1&&Math.abs(K.stageY/e.scaY-V)<1){T&&(h.top(),H=w.getChildIndex(K.target),ce!=H&&g.saveState(K.target,ce,H));return}g.ctrlKey?(g.saveState(w),g.dispatchEvent("paperChange")):(h.top(),H=w.getChildIndex(K.target),g.saveState(K.target,ce,H)),g.dispatchEvent("change"),h.top()}}))))}}),Object.defineProperty(this,"write",{get:function(){return d},set:function(te){d&&te===!1&&(g.finishX=g.x,g.finishY=g.y),!d&&te&&(h.graphics.es(),h.graphics.ef(),g.dampX.immediate(g.x),g.dampY.immediate(g.y),g.lastX=g.lastMidX=g.x,g.lastY=g.lastMidY=g.y),d=te}}),Object.defineProperty(this,"size",{get:function(){return t},set:function(te){h.graphics.es(),h.graphics.ef(),t=te,i!="splatter"&&h.graphics.ss(e.Pick.choose(t)*g.sizeScale*g.sizeFactor,v)}}),Object.defineProperty(this,"color",{get:function(){return r},set:function(te){r=te,h.graphics.es(),h.graphics.ef(),i!="splatter"&&h.graphics.s(e.Pick.choose(r))}}),Object.defineProperty(this,"penType",{get:function(){return i},set:function(te){i=te,h.graphics.ef().es(),i!="splatter"?h.graphics.s(e.Pick.choose(r)):h.graphics.s(e.Pick.choose(r)).ss(e.Pick.choose(t)*g.sizeScale*g.sizeFactor,v)}}),Object.defineProperty(this,"end",{get:function(){return v},set:function(te){v=te}}),Object.defineProperty(this,"damp",{get:function(){return o},set:function(te){o=te,g.dampX.damp=o,g.dampY.damp=o}}),Object.defineProperty(this,"spread",{get:function(){return l},set:function(te){l=te}});var Be,z;this.setColorRange=function(te,K){return n(K)?(Be=g.color,z=te):n(te)?(Be=g.color,z=K):(Be=te,z=K),g};var Ye=0;Object.defineProperty(g,"colorRange",{get:function(){return Ye},set:function(te){Ye=te,!n(Be)&&!n(z)&&(g.color=e.colorRange(Be,z,te))}}),Object.defineProperty(this,"borderColor",{get:function(){return c},set:function(te){c=te}}),Object.defineProperty(this,"borderWidth",{get:function(){return p},set:function(te){p=te}}),Object.defineProperty(this,"pullColor",{get:function(){return B},set:function(te){if(n(te||te==-1))fe(),B=null;else if(n(B)){B=te;var K=N||zdf.stage;ue(K)}else B=te}}),g.setPen=function(te){g.dampX.immediate(g.x),g.dampY.immediate(g.y),g.lastX=g.lastMidX=g.finishX=g.x,g.lastY=g.lastMidY=g.finishY=g.y,n(te)&&(te=i),n(U[te])&&(te="line"),g.penType=i=te;var K=e.merge(Q,U[te]);for(var xe in K)g[xe]!=K[xe]&&(g[xe]=K[xe]);return g},g.immediate=function(te,K){return n(te)||(g.x=te,g.dampX.immediate(g.x),g.lastX=g.lastMidX=g.finishX=g.x),n(K)||(g.y=K,g.dampY.immediate(g.y),g.lastY=g.lastMidY=g.finishY=g.y),g},g.clear=function(){for(var te=[],K=0;K<w.numChildren-1;K++)te.push(w.getChildAt(K));return P.push({paper:w,clear:te}),P.length>g.undoLevels&&P.shift(),g.dispatchEvent("recordUndo"),w.removeAllChildren(),h.graphics.clear(),w.addChild(h),g.dispatchEvent("change"),g.stage&&g.stage.update(),g},this.deleteSegment=function(te){te.visible=!1,g.undoLevels>0&&g.saveState(te)},this.clone=function(){return this.cloneChildren(this.cloneProps(new e.Pen(t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,T,L,I,C,k,Y,W,G,F,B,q,Z,X,ne)))},g.dispose=function(te,K,xe){return n(te)&&(te=!0),le.removeEventListener("keydown",g.zimkeydownEvent),le.removeEventListener("keyup",g.zimkeyupEvent),N&&g.nibEvent&&N.off("stagemousemove",g.nibEvent),N&&g.stageDown&&N.off("stagemousedown",g.stageDown),N&&g.stageUp&&N.off("stagemouseup",g.stageUp),N&&g.upEvent&&N.off("stagemouseup",g.upEvent),e.Ticker.remove(g.ticker),g.removeAllEventListeners(),b&&b.removeFrom(),te&&(g.shape&&g.shape.dispose(),g.paper&&g.paper.dispose(),_&&(g.bitmap&&g.bitmap.dispose(),g.bitmap=null),g.zimContainer_dispose(xe),w=h=g.shape=null),!0},Z!==!1&&e.styleTransforms(this,de)},e.extend(e.Pen,e.Container,["dispose","clone"],"zimContainer",!1),e.SoundWave=function(t,r,i,o,l,c,p,v,w,b,_,E){var S="num, input, include, smoothing, min, max, operation, baseline, magnify, reduce, adjust, channel",P;if(P=vt(e.SoundWave,arguments,S,this))return P;He("69.95"),this.type="SoundWave",n(t)&&(t=120),n(r)&&(r="mic"),n(i)&&(i=120/1024),n(o)&&(o=.85),n(l)&&(l=r=="mic"?-80:(r.oscillator,-100)),n(c)&&(c=r=="mic"?-40:(r.oscillator,-10)),n(p)&&(p=function(Y,W){return Y*(.5+W*1/Math.pow(e.SoundWave.bufferLength,.95))}),n(v)&&(v=r=="mic"?0:(r.oscillator,30)),n(w)&&(w=r=="mic"?1:r.oscillator?5:10),n(b)&&(b=0),n(_)&&(_=5),e.SoundWave.bufferLength=1024;var A=t,R=this;R.baseline=v,R.magnify=w,R.reduce=b,R.input=r,R.adjust=_;var T;r.type=="Tone"||r.type=="SynthSound"?T=r.audioContext:T=new(le.AudioContext||le.webkitAudioContext);var L=R.analyser=T.createAnalyser();L.minDecibels=l,L.maxDecibels=c,L.smoothingTimeConstant=o,Object.defineProperty(this,"smoothing",{get:function(){return L.smoothingTimeConstant},set:function(Y){L.smoothingTimeConstant=Y}}),Object.defineProperty(this,"num",{get:function(){return A},set:function(Y){A=Y,I=Math.floor(i*e.SoundWave.bufferLength/A),I<1&&lt("ZIM SoundWave: num is too big")}}),this.setInput=function(Y){if(R.input=Y,Y=="mic"){navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({audio:!0}).then(function(F){var B=R.source=T.createMediaStreamSource(F);k(B)}).catch(function(F){lt("ZIM SoundWave: Error occured: "+F)}):navigator.getUserMedia?navigator.getUserMedia({audio:!0},function(F){var B=R.source=T.createMediaStreamSource(F);k(B)},function(F){lt("ZIM SoundWave: Error occured: "+F)}):lt("ZIM SoundWave: Sorry, mic not supported");return}else if(Y.type=="Tone")k(Y.compressor);else if(Y.type=="SynthSound")k(Y.gain);else{if(Y.type&&Y.type=="sound"){lt("ZIM SoundWave: pass in the result of a zim.asset('somesound').play() for the input");return}var W,G;Y.playbackResource?(W=Y.playbackResource,G=T.createMediaElementSource(W)):(W=Y,G=T.createMediaElementSource(W)),k(G)}},this.setInput(r);var I,C;function k(Y){if(C&&C.disconnect(L),C=Y,n(E)||E!==0&&E!==1)Y.connect(L),r!="mic"&&L.connect(T.destination);else{var W=new ChannelSplitterNode(T,{numberOfOutputs:2});Y.connect(W),W.connect(L,E);var G=new ChannelMergerNode(T,{numberOfInputs:2});L.connect(G,0,E),r!="mic"&&G.connect(T.destination)}if(L.fftSize=e.SoundWave.bufferLength*2,I=Math.floor(i*e.SoundWave.bufferLength/A),I<1){lt("ZIM SoundWave: include param is too small or num param is too big");return}var F=L.frequencyBinCount,B=new Uint8Array(F),q=300,Z=0,X=0,ne=Math.round(60*R.adjust*.8),$=new e.Damp(q,.01);R.calculate=function(re){n(re)&&(re=!0),L.getByteFrequencyData(B);var de=B.map(p);if(I==1&&!re)return de;var Q=[],U=0,g;for(g=0;g<=i*e.SoundWave.bufferLength;g++)U+=de[g],g!=0&&g%I==0&&(Q.push(Math.max(0,(U/I-R.baseline)*R.magnify-R.reduce)),U=0);var d=Q.length;if(r!="mic"&&(Q[0]*=.75,Q[1]*=.85,Q[2]*=.9,Q[d-2]*=.8,Q[d-1]*=.75),Q[d-1]*=1.3,Q[d-2]*=1.2,Q[d-3]*=1.1,re){var h=[];ne++,ne>=60*R.adjust&&(q=Z/ne,Z=0,X=0,ne=0);var x=$.convert(q);for(g=0;g<d;g++)Q[g]>X&&(X=Q[g]),h[g]=Math.min(1,x!=0?Q[g]/x:0);return Z+=X,h}return Q},setTimeout(function(){R.dispatchEvent("ready")},50)}this.dispose=function(Y){return Y&&T&&T.close(),L&&L.disconnect(),!0}},e.extend(e.SoundWave,$e.EventDispatcher,null,"cjsEventDispatcher",!1),e.Synth=function(t,r){He("69.955"),this.type="Synth",n(t)&&(t=.3),n(r)&&(r=220),this.volume=t,this.frequency=r;var i=this,o;this.play=function(l,c,p,v,w,b,_,E,S,P,A,R,T,L,I,C,k,Y,W,G,F,B,q,Z,X,ne,$,re,de,Q,U,g,d,h,x,j,O,V,ce,H,N,ue,fe,ae,Ie,ge,Be,z){var Ye=Array.prototype.slice.call(arguments);if(!o&&(le.AudioContext||le.webkitAudioContext)&&(o=new(le.AudioContext||le.webkitAudioContext),o.z=o.createBufferSource,o.createBufferSource=function(xe){return xe==null&&(xe=o.z()),xe.start=xe.start||function(_e){o.noteOn(_e)},xe}),!!o){for(l=l!=null?ct(l):.3,c=c!=null?ct(c):.05,p=p!=null?ct(p):220,v=v!=null?ct(v):0,w=w!=null?ct(w):0,b=b!=null?ct(b):.1,_=_!=null?ct(_):0,E=E!=null?ct(E):1,S=S!=null?ct(S):0,P=P!=null?ct(P):0,A=A!=null?ct(A):0,R=R!=null?ct(R):0,T=T!=null?ct(T):0,L=L!=null?ct(L):0,I=I!=null?ct(I):0,C=C!=null?ct(C):0,k=k!=null?ct(k):0,G=G!=null?ct(G):0,Y=Y!=null?ct(Y):1,W=W!=null?ct(W):0,$=$!=null?ct($):44100,re==null&&(re=99+v*$),de==null&&(de=w*$),Q==null&&(Q=b*$),U==null&&(U=W*$),g==null&&(g=k*$),d==null&&(d=Math.PI*2),h==null&&(h=function(xe){return xe>0?1:-1}),x==null&&(x=re+U+de+Q+g),j==null&&(j=S*=500*d/Math.pow($,2)),O==null&&(O=p*=(1+c*2*Math.random()-c)*d/$),V==null&&(V=h(I)*d/4),ce==null&&(ce=0),H==null&&(H=0),N==null&&(N=0),ue==null&&(ue=0),fe==null&&(fe=0),ae==null&&(ae=0),Ie==null&&(Ie=1),ge==null&&(ge=[]),Be==null&&(Be=o.createBufferSource()),z==null&&(z=o.createBuffer(1,x,$)),Be.connect(o.destination);N<Math.floor(x);ge[N++]=ae)++fe>C*100&&(fe=0,ae=ce*p*Math.sin(H*I*d/$-V),ae=_?_>1?_>2?_>3?Math.sin(Math.pow(ae%d,3)):Math.max(Math.min(Math.tan(ae),1),-1):1-(2*ae/d%2+2)%2:1-4*Math.abs(Math.round(ae/d)-ae/d):Math.sin(ae),ae=(T?1-G+G*Math.sin(d*N/T):1)*h(ae)*Math.pow(Math.abs(ae),E)*l*i.volume*(N<re?N/re:N<re+U?1-(N-re)/U*(1-Y):N<re+U+de?Y:N<x-g?(x-N-g)/Q*Y:0),ae=g?ae/2+(g>N?0:(N<x-g?1:(N-x)/g)*ge[N-g|0]/2):ae),ce+=1-L+(Math.sin(N)+1)*1e9%2*L,H+=1-L+(Math.pow(Math.sin(N),2)+1)*1e9%2*L,p+=S+=P*500*d/Math.pow($,3),Ie&&++Ie>R*$&&(p+=A*d/$,O+=A*d/$,Ie=0),T&&++ue>T*$&&(p=O,S=j,ue=1,Ie=Ie||1);z.getChannelData(0).set(ge),Be.buffer=z;var te=new $e.EventDispatcher;te.type="SynthSound",te.audioContext=o,te.gain=o.createGain(),Be.connect(te.gain),te.gain.connect(o.destination),Be.start(),te.duration=ge.length/$,te.playing=!0,te.stop=function(){clearTimeout(te.completeID),clearInterval(te.repeatID),te.gain.gain.setTargetAtTime(0,o.currentTime,.1),te.playing=!1,setTimeout(function(){o.close()},.1*1e3)};var K;return te.repeat=te.loop=function(xe,_e){K=0,xe===!0&&(xe=null),n(_e)&&(_e=0),clearTimeout(te.completeID);function Se(){return te.duration+ct(_e)}return te.repeatID=e.interval(Se,function(){K++,xe&&K>=xe?(te.dispatchEvent("complete"),te.repeatID.clear(),te.playing=!1):(te.dispatchEvent("loop"),i.play.apply(i,Ye))}),te},te.play=function(){return i.play.apply(i,Ye),te.playing=!0,te},te.completeID=setTimeout(function(){te.dispatchEvent("complete")},(ge.length/$+.1)*1e3),te}},this.Tone=function(l,c,p,v,w,b,_,E,S,P,A,R,T,L,I,C,k,Y,W){var G="volume, note, shape, duration, attack, release, wahAmount, wahRate, wahShape, wahThroat, wahNote, vibratoAmount, vibratoRate, vibratoShape, tremeloAmount, tremeloRate, tremeloShape, startTime, pauseOnBlur",F;if(F=vt(i.Tone,arguments,G,this))return F;this.type="Tone";var B=this,q;n(l)&&(l=i.volume),n(c)&&(c=i.frequency),n(p)&&(p=e.SINE),n(w)&&(w=.02),n(b)&&(b=.05),n(Y)&&(Y=0),le.AudioContext||le.webkitAudioContext?q=this.audioContext=new(le.AudioContext||le.webkitAudioContext):Ct&&lt("Synth tone() needs AudioContext"),l=ct(l),c=ct(c),p=ct(p),v=ct(v),w=ct(w),b=ct(b),_=ct(_),E=ct(E),S=ct(S),P=ct(P),A=ct(A),R=ct(R),T=ct(T),L=ct(L),I=ct(I),C=ct(C),k=ct(k),Y=ct(Y);var Z=y(v);i.duration=v,v&&(v=v*(Z=="s"?1:1/1e3)),Y&&(y(Y),Y=Y*(Z=="s"?1:1/1e3)),i.attack=w,i.release=b,i.rampDuration=.02,i.hush=.1;var X=this.note=this.oscillator=q.createOscillator();X.frequency.value=e.Synth.note(c),e.Synth.setShape(X,p);var ne=this.filter=q.createBiquadFilter();ne.type="bandpass",ne.frequency.value=X.frequency.value,ne.Q.value=0;var $=this.gain=X.gain=q.createGain();$.type="gain",$.gain.setValueAtTime(0,q.currentTime);var re=this.compressor=q.createDynamicsCompressor();re.threshold.setValueAtTime(-50,q.currentTime),re.knee.setValueAtTime(40,q.currentTime),re.ratio.setValueAtTime(12,q.currentTime),re.attack.setValueAtTime(0,q.currentTime),re.release.setValueAtTime(.25,q.currentTime),X.connect(ne),ne.connect($),$.connect(re),re.connect(q.destination);function de(ue,fe){n(ue)&&(ue=q.currentTime),n(fe)&&(fe=i.attack),X.start(ue);var ae=le.zdf&&new Date().getTime()-le.zdf.startTime<200?.1:i.attack;$.gain.setValueAtTime(0,q.currentTime+.1),$.gain.linearRampToValueAtTime(l*i.hush,q.currentTime+.1+ae)}de(Y),this.stop=function(ue){n(ue)&&(ue=i.release),$&&U($.gain,0,!0,ue),ce&&U(ce.gain,0,!0,ue),j&&U(j.gain,0,!0,ue),setTimeout(function(){B.dispatchEvent("complete")},(.6+ue+i.rampDuration)*1e3),setTimeout(function(){q&&!q.iamClosed&&(q.iamClosed=!0,q.close())},(ue+1)*1e3),setTimeout(function(){g&&B.removeWah()},(ue+1)*1e3)},v&&this.stop(Y+v-.1);var Q=this.notes=[X];this.addNote=function(ue,fe,ae,Ie,ge,Be){n(Ie)&&(Ie=!0),n(ge)&&(ge=!1),n(ue)&&(ue=.1),n(Be)&&(Be=0);var z={type:"Note"};z._volume=ue,z._note=e.Synth.note(fe),Q.push(z);var Ye=z.oscillator=q.createOscillator();Ye.frequency.value=z._note,Ye.type=e.Synth.setShape(Ye,ae);var te=z.gain=q.createGain();return U(te.gain,z._volume,!0),te.connect(Ie?ne:$),Ye.connect(te),j&&ge&&j.connect(Ye.frequency),Ye.start(q.currentTime+Be),Object.defineProperty(z,"volume",{get:function(){return z._volume},set:function(K){n(K)||(z._volume=ct(K),U(z.gain.gain,z._volume,!0))}}),Object.defineProperty(z,"note",{get:function(){return z._note},set:function(K){n(K)||(z._note=ct(K),U(z.oscillator.frequency,e.Synth.note(z._note)))}}),z},this.removeNote=function(ue){var fe=Q.indexOf(ue);return fe>=0&&Q.splice(fe,1),ue.oscillator.disconnect(),ue=null,this};function U(ue,fe,ae,Ie){n(fe)&&(fe=0),n(Ie)&&(Ie=i.rampDuration),ae?(ue.cancelScheduledValues(q.currentTime),ue.linearRampToValueAtTime(ue.value,q.currentTime+.02),ue.linearRampToValueAtTime(fe,q.currentTime+.05+Ie)):(ue.cancelScheduledValues(q.currentTime),ue.setTargetAtTime(fe,q.currentTime,Ie))}this.ramp=function(ue,fe){U($.gain,ue*i.hush,!0,fe)},this.animate=function(){return arguments[0].props?arguments[0].target=this:Array.prototype.unshift.call(arguments,this),e.animate.apply(null,arguments),this},this.wiggle=function(){return arguments[0].props?arguments[0].target=this:Array.prototype.unshift.call(arguments,this),e.wiggle.apply(null,arguments),this},e.addWires(this);var g,d;function h(){n(_)&&(_=1e3),n(E)&&(E=1),n(S)&&(S="sine"),n(P)&&(P=5),n(A)?A=B.oscillator.frequency.value:A=e.Synth.note(A),n(d)&&(d=200),B.filter.Q.value=P,g=B.wah=i.oscillator(E,_/2,S,A+_/2+d),g.ticker=e.Ticker.add(function(){B.filter.frequency.value=B.wah.amplitude})}(_||E||!n(S)||!n(P))&&h(),B.removeWah=function(){e.Ticker.remove(g.ticker),g.dispose(),g=B.wah=null,B.filter.Q.value=0};var x,j;function O(){n(T)&&(T=5),n(L)&&(L="sine"),n(R)&&(R=10),x=B.vibrato=q.createOscillator(),j=B.vibratoGain=q.createGain(),j.gain.value=0,x.frequency.value=T,e.Synth.setShape(x,L),x.connect(j),j.connect(X.frequency),x.start(0),j.gain.setValueAtTime(0,q.currentTime+.1),j.gain.linearRampToValueAtTime(R,q.currentTime+.1+i.attack)}(R||T||!n(L))&&O(),B.removeVibrato=function(){U(j.gain,0,!0),setTimeout(function(){j.disconnect(),x.disconnect(),x.stop(),x=null},(i.rampDuration+1)*1e3)};var V,ce;function H(){n(C)&&(C=5),n(k)&&(k="sine"),V=B.tremelo=q.createOscillator(),ce=B.tremeloGain=q.createGain(),ce.gain.value=0,V.frequency.value=C,e.Synth.setShape(V,k),V.connect(ce),ce.connect($.gain),V.start(0);var ue=le.zdf&&new Date().getTime()-le.zdf.startTime<200?.1:i.attack;ce.gain.setValueAtTime(0,q.currentTime+.1),ce.gain.linearRampToValueAtTime(l*i.hush,q.currentTime+.1+ue)}(I||C||!n(k))&&H(),B.removeTremelo=function(){U(ce.gain,0,!0),setTimeout(function(){ce.disconnect(),V.disconnect(),V.stop(),V=null},(i.rampDuration+1)*1e3)},Object.defineProperty(this,"volume",{get:function(){return l},set:function(ue){if(!n(ue)){var fe;V?($.gain.value?fe=ce.gain.value/$.gain.value:fe=l?I/l:0,l=ct(ue),l=e.constrain(l,.001),U(ce.gain,l*fe*i.hush,!0)):l=ct(ue),U($.gain,l*i.hush,!1,i.rampDuration)}}}),this.paused=!1;var N=l;this.pause=function(ue){n(ue)&&(ue=!0),ue?(N=B.volume,B.volume=0):B.volume=N},W&&(n(e.blurCheck)&&e.setBlurDetect(),e.pauseOnBlur.push(this)),Object.defineProperty(this,"frequency",{get:function(){return r},set:function(ue){n(ue)||(r=ct(ue),U(X.frequency,ue))}}),Object.defineProperty(this,"note",{get:function(){return c},set:function(ue){n(ue)||(c=ct(ue),X.frequency.value=e.Synth.note(c))}}),Object.defineProperty(this,"shape",{get:function(){return p},set:function(ue){p=ct(ue),e.Synth.setShape(X,p)}}),Object.defineProperty(this,"currentTime",{get:function(){return q.currentTime},set:function(){Ct&&lt("Synth tone() - currentTime is read only")}}),this.wahAmountMin=0,this.wahAmountMax=5e3,Object.defineProperty(this,"wahAmount",{get:function(){return _},set:function(ue){n(ue)||(_=ct(ue),_=e.constrain(_,i.wahAmountMin,i.wahAmountMax),n(g)?h():g.gain=_/2)}}),this.wahRateMin=0,this.wahRateMax=30,Object.defineProperty(this,"wahRate",{get:function(){return E},set:function(ue){n(ue)||(E=ct(ue),E=e.constrain(E,i.wahRateMin,i.wahRateMax),n(g)?h():g.frequency=E)}}),this.wahThroatMin=0,this.wahThroatMax=100,Object.defineProperty(this,"wahThroat",{get:function(){return P},set:function(ue){P=ct(ue),P=e.constrain(P,i.wahThroatMin,i.wahThroatMax),n(g)?h():ne.Q.value=P}}),Object.defineProperty(this,"wahNote",{get:function(){return A},set:function(ue){n(ue)||(A=ct(ue),n(g)?h():g.offset=A+_/2+d)}}),Object.defineProperty(this,"wahAdjust",{get:function(){return d},set:function(ue){n(ue)||(d=ct(ue),n(g)?h():g.offset=A+_/2+d)}}),Object.defineProperty(this,"wahShape",{get:function(){return S},set:function(ue){S=ct(ue),n(g)?h():g.shape=S}}),Object.defineProperty(this,"tremeloAmount",{get:function(){return I},set:function(ue){n(ue)||(I=ct(ue),n(V)?H():ce.gain.setValueAtTime(I,q.currentTime))}}),Object.defineProperty(this,"tremeloRate",{get:function(){return C},set:function(ue){n(ue)||(C=ct(ue),n(g)?H():V.frequency.value=C)}}),Object.defineProperty(this,"tremeloShape",{get:function(){return k},set:function(ue){k=ct(ue),n(V)?H():e.Synth.setShape(V,k)}}),Object.defineProperty(this,"vibratoAmount",{get:function(){return R},set:function(ue){n(ue)||(R=ct(ue),n(x)?O():j.gain.setValueAtTime(R,q.currentTime))}}),Object.defineProperty(this,"vibratoRate",{get:function(){return T},set:function(ue){n(ue)||(T=ct(ue),n(x)?O():x.frequency.value=T)}}),Object.defineProperty(this,"vibratoShape",{get:function(){return L},set:function(ue){L=ct(ue),n(x)?O():e.Synth.setShape(x,L)}})},e.extend(this.Tone,$e.EventDispatcher),this.tone=function(l,c,p,v,w,b,_,E,S,P,A,R,T,L,I,C,k,Y){return Array.prototype.unshift.call(arguments,null),new(Function.prototype.bind.apply(i.Tone,arguments))},this.Oscillator=function(l,c,p,v){var w="frequency, gain, shape, offset",b;if(b=vt(i.Oscillator,arguments,w,this))return b;this.type="Oscillator",n(l)&&(l=1),n(c)&&(c=10),n(p)&&(p="sine"),n(v)&&(v=0),this.frequency=ct(l),this.gain=ct(c),this.shape=ct(p),this.shape=="saw"&&(this.shape="sawtooth"),this.offset=ct(v),this.paused=!1;var _=this,E=0,S=e.Ticker.framerate;this.ticker=e.Ticker.add(function(){if(!_.paused){var P=0;_.shape=="sine"?P=Math.sin(_.frequency*(Math.PI*2*(E/S))):_.shape=="square"?(P=Math.sin(_.frequency*(Math.PI*2*(E/S))),P=P<=0?0:1):_.shape=="triangle"?P=2/Math.PI*Math.asin(Math.sin(_.frequency*Math.PI*2*E/S)):_.shape=="sawtooth"||_.shape=="saw"?P=-2/Math.PI*Math.atan(1/Math.tan(_.frequency*Math.PI*E/S)):_.shape=="zap"&&(P=2/Math.PI*Math.atan(1/Math.tan(_.frequency*Math.PI*E/S))),_.amplitude=P*_.gain+_.offset,E++}}),this.pause=function(P){_.paused=P},this.dispose=function(){e.Ticker.remove(this.ticker)}},this.oscillator=function(l,c,p,v){return Array.prototype.unshift.call(arguments,null),new(Function.prototype.bind.apply(i.Oscillator,arguments))}},e.Synth.notes=["C",null,"D",null,"E","F",null,"G",null,"A",null,"B"],e.Synth.major=["C","D","E","F","G","A","B","C4"],e.Synth.minor=["C","D","Eb","F","G","Ab","B","C4"],e.Synth.shapes=["sine","triangle","sawtooth","tan","noise","square"],e.Synth.setShape=function(t,r){if(!n(t)){n(r)&&(r="sine"),r=="saw"&&(r="sawtooth");var i;if(typeof r=="number")r=e.Synth.shapes[r],r||(r="sine");else if(r.real&&r.imag)i=t.context.createPeriodicWave(new Float32Array(r.real),new Float32Array(r.imag));else if(r.constructor==PeriodicWave)i=r;else if(typeof r=="string"){var o=e.Synth.shapes.indexOf(r);if(o<0&&(r="sine"),r=="noise"){for(var l=4096,c=new Float32Array(l),p=new Float32Array(l),v=1;v<l;v+=2)p[v]=e.shuffle([0,.5,1])[0];i=t.context.createPeriodicWave(c,p)}else r=="tan"&&(r="sawtooth")}else r="sine";i?(t.setPeriodicWave(i),r="custom"):t.type=r}},e.Synth.getNote=function(t,r){return n(r)&&(r=0),t*Math.pow(2,r/12)},e.Synth.note=function(t){if(typeof t=="string"){var r=t.substr(0,1).toUpperCase(),i=e.loop(t,function(v){if(!isNaN(v))return Number(v)});i=i!==!0&&!isNaN(i)?i:3;var o=e.Synth.notes.indexOf(r);o<0&&(o=9);var l=t.match(/b/g),c=t.match(/#/g);l=l?l.length:0,c=c?c.length:0;var p=(i-3)*12+o+c-l;return e.Synth.getNote(e.Synth.getNote(220,-9),p)}else return typeof t!="number"&&(t=220),t},e.Synth.wave=function(t,r){if(le.AudioContext||le.webkitAudioContext){var i=new(le.AudioContext||le.webkitAudioContext);if(t.real)r=t.imag,t=t.real;else if(n(r)&&Ct){lt("Synth.wave() - pass in asset('wave.json') or real and imag properties");return}return t.constructor!==Float32Array&&(t=new Float32Array(t)),r.constructor!==Float32Array&&(r=new Float32Array(r)),i.createPeriodicWave(t,r)}},e.Synth.drawWave=function(t,r,i,o,l,c,p,v,w){var b="shape, color, thickness, backgroundColor, borderColor, borderWidth, corner, padding, paddingV",_;if(_=vt(e.Synth.drawWave,arguments,b))return _;var E=45,S=45;t=ct(t),n(i)&&(i=2),n(r)&&(r=e.darker),n(v)&&(v=8),n(w)&&(w=v);var P=v,A=w,R=new e.Container(E,S);R.mouseChildren=!1,n(o)||(R.backing=new e.Rectangle(E,S,o,l,c,p).addTo(R)),R.shape=new e.Shape(E,S).addTo(R).s(r).ss(i);var T=E-P*2;return t=="square"?R.shape.mt(P,S/2).lt(P,A+3).lt(E/2,A+3).lt(E/2,S-A-3).lt(E-P,S-A-3).lt(E-P,S/2):t=="triangle"?R.shape.mt(P,S/2).lt(P+T/4,A+3).lt(P+T*3/4,S-A-3).lt(E-P,S/2):t=="sawtooth"||t=="saw"?R.shape.mt(P,S/2).lt(E/2,A+2).lt(E/2,S-A-2).lt(E-P,S/2):t=="zap"?R.shape.mt(P,S/2).lt(E/2,S-A-2).lt(E/2,A+2).lt(E-P,S/2):R.shape.mt(P,S/2).bt(E/2,0-15,E/2,S+15,E-P,S/2),R.type=t,R},e.VR=function(t,r,i,o,l,c,p,v,w,b,_,E){var S="content, angle, distance, parallax, parallaxAngle, damp, parallaxDamp, startAngle, negativeParallax, boundaryMarkers, swiper, holder",P;if(P=vt(e.VR,arguments,S,this))return P;if(He("69.98"),this.type="VR",!le.zdf){Ct&&lt("VR() - please use ZIM Frame");return}var A=le.zdf;(n(E)||!E.getBounds||!E.getBounds().width)&&(E=A.stage),n(r)&&(r=0),n(i)&&(i=100),n(c)&&(c=.5),n(o)&&(o=0),n(l)&&(l=60),n(p)&&(p=.1),n(v)&&(v=0),n(w)&&(w=!1),n(b)&&(b=!0),n(_)&&(_=!0),this.angle=r,this.currentAngle=v,e.mobile()&&(_=!1);var R=this,T=E.width,L=E.height;R.zimContainer_constructor();var I=R.left=new e.Container(T/2,L,null,null,!1),C=new e.Rectangle(T/2,L,"rgba(0,0,0,.01)",null,null,null,null,null,null,!1);I.addChild(C);var k=R.right=I.clone();R.addChild(I,k),k.x=T/2;var Y=R.contentLeft=R.content=t,W=R.contentRight=t.clone();if(v!=0)var G=setTimeout(F,100);else F();function F(){Y.addTo(I,null,!1).setMask(I.getChildAt(0)).pos({y:(E.height-Y.height)/2,reg:!0}),W.addTo(k,null,!1).setMask(k.getChildAt(0)).pos({y:(E.height-Y.height)/2,reg:!0})}var B=[],q=[];function Z(te,K,xe,_e){te.vrMatch=K,K.vrMatch=te,te.cacheCanvas&&K.cache(),te.dep&&!n(te.depth)&&(B.push(te),q.push(K),n(xe)||xe.push(te),n(_e)||_e.push(K),K.dep(te.depth)),e.loop(te,function(Se,ie){Z(Se,K.getChildAt(ie),xe,_e)})}Z(Y,W);function X(te,K){e.loop(te,function(xe){xe.vrChannel=K,xe.vrStartX=xe.x,r!=0&&i!=0&&(xe.vrAngle=r,xe.vrDistance=i),o!=0&&i!=0&&(xe.vrParallax=o/100,xe.vrParallaxDistance=0,r!=0&&(xe.vrParallaxDamp=new e.Damp(0,p))),xe.dep(xe.depth)})}if(X(B,"left"),X(q,"right"),r!=0&&i!=0){var ne=new e.Damp(180+v,c);ne.immediate(180+v);var $=!1,re=!1;A.on("deviceorientation",function(te){de(ne.convert((te.rotation.z>180?-180:180)+te.rotation.z+v)-180)}),e.Ticker.always()}function de(te){R.currentAngle=te;var K=-R.currentAngle*i/r;R.contentLeft.x=K,R.contentRight.x=K;var xe;Math.round(R.currentAngle)<=-r/2&&!$?(xe=new $e.Event("boundaryout"),xe.boundary="left",$=!0,R.dispatchEvent(xe)):Math.round(R.currentAngle)>=r/2&&!re?(xe=new $e.Event("boundaryout"),xe.boundary="right",re=!0,R.dispatchEvent(xe)):Math.round(R.currentAngle)>-r/2&&Math.round(R.currentAngle)<r/2&&(xe=new $e.Event("boundaryin"),$?(xe.boundary="left",R.dispatchEvent(xe),$=!1):re&&(xe.boundary="right",R.dispatchEvent(xe),re=!1))}function Q(te){var K=te.parent.localToLocal(te.vrStartX,0,E),xe=te.vrParallaxDamp.convert(te.vrChannel=="left"?R.contentLeft.x+K.x-T/4:R.contentRight.x+K.x-T/2-T/4);te.depth<=0&&!w&&(xe=0),te.vrParallaxDistance=Math.max(-i/r*l/2,Math.min(i/r*l/2,xe)),te.dep(te.depth)}if(o!=0&&i!=0){var U=new e.ProportionDamp(180-l/2,180+l/2,-l/2,l/2,p);U.immediate(180),A.on("deviceorientation",function(te){var K=0;r==0&&o!=0&&i!=0&&(K=U.convert((te.rotation.z>180?-180:180)+te.rotation.z)),d(K)}),e.Ticker.always()}function g(te,K){te.vrParallaxDistance=te.depth<=0&&!w?0:K,te.dep(te.depth)}function d(te){r!=0&&i!=0?(e.loop(B,Q),e.loop(q,Q)):(e.loop(B,function(K){g(K,te)}),e.loop(q,function(K){g(K,te)}))}_&&i!=0&&(r!=0||o!=0)&&R.added(function(){var te={swipeAngle:0};R.swiper=new e.Swiper({swipeOn:R,target:te,property:"swipeAngle",sensitivity:.2,damp:.05,factor:-1,min:-330,max:330}),e.Ticker.add(function(){r!=0&&i!=0&&de(te.swipeAngle),o!=0&&i!=0&&d(U.convert(te.swipeAngle+180))})});var h=localStorage&&localStorage.zimEyeAdjust?Number(localStorage.zimEyeAdjust):0,x=h,j=!1;Y.startRegX=Y.regX,W.startRegX=W.regX;var O=this.adjuster=new e.Container(800,300,null,null,!1);C=O.backing=new e.Rectangle(O.width,O.height,e.lighter,null,null,null,null,null,null,!1).center(O).alp(1).sha("rgba(0,0,0,.2)",0,0,30),O.strip=new e.Rectangle(O.width,O.height/3,e.white,null,null,null,null,null,null,!1).center(O).alp(1),O.label=new e.Label({text:"slide to adjust center of left and right",size:28,color:e.dark,align:"center",valign:"center"}).center(O).pos({y:50,reg:!0});var V=O.close=new e.Rectangle(50,50,e.light,null,null,null,null,null,null,!1).addTo(O).mov(O.width-70,26),ce=new e.Shape(-40,-40,80,80,null,!1);ce.graphics.f(e.dark).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg"),ce.center(V).sca(.3),V.cur("pointer"),V.on((Mt?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){R.hideAdjuster(),ue.currentValue=(ue.max-ue.min)/2+x,R.dispatchEvent("closed")});var H=new e.Circle(30,e.dark,null,null,null,null,null,null,!1).center(O).pos({x:O.width/4,reg:!0});H.shape.alpha=.2,new e.Circle(12,e.dark,null,null,null,null,null,!1).center(H);var N=new e.Circle(30,e.dark,null,null,null,null,null,!1).center(O).pos({x:O.width/4*3,reg:!0});N.shape.alpha=.2,new e.Circle(12,e.dark,null,null,null,null,null,null,!1).center(N);var ue=O.slider=new e.Slider({min:0,max:30,step:1,useTicks:!0,style:!1}).centerReg(O).pos({y:O.height-40,reg:!0});ue.currentValue=(ue.max-ue.min)/2+h;var fe=new e.Proportion(ue.min,ue.max,H.x-O.width/4,H.x+O.width/4,-1),ae=new e.Proportion(ue.min,ue.max,N.x-O.width/4,N.x+O.width/4);ue.on("change",function(){H.x=fe.convert(ue.currentValue),N.x=ae.convert(ue.currentValue)}),new e.Label("closer",24,null,e.silver).centerReg(O).pos({x:ue.x-220,y:ue.y,reg:!0}),new e.Label("farther",24,null,e.silver).centerReg(O).pos({x:ue.x+220,y:ue.y,reg:!0});var Ie=R.ok=new e.Button({label:"OK",width:90,height:60,corner:0,backgroundColor:e.blue,rollBackgroundColor:e.green,shadowColor:-1,style:!1}).centerReg(O).sca(.8).pos({x:O.width-58,y:ue.y,reg:!0});Ie.on((Mt?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){localStorage&&(localStorage.zimEyeAdjust=ue.currentValue-(ue.max-ue.min)/2),z(),R.hideAdjuster(),R.dispatchEvent("saved"),R.dispatchEvent("closed")});var ge=R.zero=new e.Button({label:">|<",width:90,height:60,corner:0,backgroundColor:e.yellow,rollBackgroundColor:e.green,shadowColor:-1,style:!1}).centerReg(O).sca(.8).pos({x:58,y:ue.y,reg:!0});ge.on((Mt?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){ue.currentValue=(ue.max-ue.min)/2,H.x=fe.convert(ue.currentValue),N.x=ae.convert(ue.currentValue)});var Be=new e.Proportion(0,30,-E.width/4,E.width/4);function z(){var te=Be.convert(ue.currentValue);Y.regX=Y.startRegX+te,W.regX=W.startRegX-te}z(),this.showAdjuster=function(){if(j)return R;j=!0,H.x=fe.convert(ue.currentValue),N.x=ae.convert(ue.currentValue),x=ue.currentValue-(ue.max-ue.min)/2,O.scaleTo(E,100,100).center(this),E.stage.update()},this.hideAdjuster=function(){if(!j)return R;j=!1,O.removeFrom(this),E.stage.update()},this.position=function(te,K,xe){_e(te),_e(te.vrMatch);function _e(Se){Se.vrStartX=K,Se.vrParallaxDamp&&Se.vrParallaxDamp.immediate(K),Se.mov(K,xe)}return te},this.register=function(te){if(!te.parent||!te.parent.vrMatch)return Ct&&lt("ZIM VR() - please only register objects already inside content container"),te;var K=te.clone().addTo(te.parent.vrMatch),xe=[],_e=[];return Z(te,K,xe,_e),X(xe,"left"),X(_e,"right"),te},r!=0&&i!=0&&b&&(R.boundaryRight=new e.Container({style:!1}),new e.Circle(24,e.light,null,null,null,null,null,null,!1).addTo(R.boundaryRight).dep(-2),new e.Triangle(16,16,16,e.yellow,e.grey,null,null,null,-3,null,null,!1).rot(-90).center(R.boundaryRight).dep(-6),R.boundaryRight.center(t).mov(i/2+24),R.boundaryLeft=new e.Container({style:!1}),new e.Circle(24,e.light,null,null,null,null,null,null,!1).addTo(R.boundaryLeft).dep(-2),new e.Triangle(16,16,16,e.yellow,e.grey,null,null,null,-3,null,null,!1).rot(90).center(R.boundaryLeft).dep(-6),R.boundaryLeft.center(t).mov(-i/2-24),R.register(R.boundaryRight),R.register(R.boundaryLeft));function Ye(te){var K=B.indexOf(te);B.indexOf(te)>=0&&(B.splice(K,1),q.splice(K,1)),e.loop(te,function(xe){Ye(xe)})}this.remove=function(){return e.loop(arguments,function(te,K){t.contains(K)&&(Ye(K),K.parent.removeChild(K),K.vrMatch.parent.removeChild(K.vrMatch))}),R},this.resize=function(){T=E.width,L=E.height,I.getChildAt(0).widthOnly=k.getChildAt(0).widthOnly=T/2,I.getChildAt(0).heightOnly=k.getChildAt(0).heightOnly=L,k.x=T/2,I.setBounds(0,0,T/2,L),k.setBounds(0,0,T/2,L),v!=0?(clearTimeout(G),G=setTimeout(F,100)):F(),O.scaleTo(E,100,100).center(this,null,!1)}},e.extend(e.VR,e.Container,"clone","zimContainer",!1),e.scaX=1,e.scaY=1,e.Frame=function(t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,T,L,I,C,k,Y,W,G,F,B,q,Z,X,ne,$,re,de){var Q="scaling, width, height, color, outerColor, ready, assets, path, progress, ticker, rollover, touch, scrollTop, align, valign, canvasID, rollPerSecond, delay, canvasCheck, gpu, gpuObj, nextFrame, nextStage, allowDefault, loadFailObj, sensors, retina, mouseMoveOutside, captureMouse, shim, maxConnections, maxNum, singleTouch",U;if(U=vt(e.Frame,arguments,Q,this))return U;He("83"),Ct&&Wr("ZIM FRAME"),this.cjsEventDispatcher_constructor(),this.type="Frame";var g=this;(!le.zdf||!le.zdf.type)&&(le.zimDefaultFrame=le.zdf=le.F=this),le.M=e.mobile();var d=Date;this.startTime=new d().getTime(),n(I)&&(I=!0);var h=!!le.HTMLCanvasElement;if(!h&&I){setTimeout(function(){g.dispatchEvent("failed")},100);return}var x=e.mobile();n(t)&&(t="full"),t=="outside"&&(t="fill"),n(v)||(le.PATH=v),n(_)&&(_=!x),n(E)&&(E=!0),n(S)&&(S=!1),n(P)&&(P="center"),n(A)&&(A="center");var j="";n(R)&&(le.zdf!=this?(j=e.makeID(null,5),R="myCanvas"+j):R="myCanvas");var O=y(L);n(T)&&(T=20),n(L)&&(L=x?O=="s"?1:1e3:O=="s"?.03:30),n(C)&&(C=!1),n(G)&&(G=!1),n(F)&&(F="circles"),this.loadFailObj=F,n(B)&&(B=!1),n(q)&&(q=!0),this.retina=q,n(Z)&&(Z=!1),n(X)&&(X=!0),n(ne)&&(ne=!1),n($)&&($=10),n(de)&&(de=!1),de&&(E=!0);var V=$;g.maxNum=re,C&&(q=!1),this.retina=q;var ce=!1,H=!1;this.leftMouseDown=!1;function N(Oe){g.leftMouseDown=Oe.buttons===void 0?Oe.which===1:Oe.buttons===1,ce&&!g.leftMouseDown&&g.dispatchEvent("mouseupplus"),H&&!g.leftMouseDown&&g.dispatchEvent("mouseupplusonly"),ce=H=g.leftMouseDown}var ue=["fit","fill","full"],fe,ae,Ie;if(ne){this.shim=!0,ne.stage.frame=this;var ge=this.canvas=ne.canvas;this.scale=ne.stage.scaleX;var Be,z;setTimeout(function(){Ye(),z=function(){Ye(),Be&&clearTimeout(Be),Be=setTimeout(Ye,50)},le.addEventListener("resize",z)},20),fe=ne.stage,ae=fe.getBounds()?fe.getBounds().width:ge.width/fe.scaleX,Ie=fe.getBounds()?fe.getBounds().height:ge.height/fe.scaleY,fe.getBounds()||fe.setBounds(0,0,ae,Ie),o=ge.style.backgroundColor,Qe(),Ye()}else this.scale=1,this.x=0,this.y=0;function Ye(){g.scale=ne.stage.scaleX;var Oe=ge.getBoundingClientRect();g.x=Oe.x+e.scrollX(),g.y=Oe.y+e.scrollY(),e.scaX=$e.stageTransformable?1:ne.stage.scaleX,e.scaY=$e.stageTransformable?1:ne.stage.scaleY}var te,K,xe=!1,_e,Se,ie=!1,pe=!1,be=!1;ne||(document.readyState==="interactive"||document.readyState==="complete"?setTimeout(function(){oe()},200):document.addEventListener("DOMContentLoaded",oe));var he,Pe=!1,Re=t=="full"&&typeof InstallTrigger<"u";if(this.swapRotation=!1,x&&!le.parent){var ve=isNaN(le.innerWidth)?le.clientWidth:le.innerWidth,Ae=isNaN(le.innerHeight)?le.clientHeight:le.innerHeight;this.swapRotation=(le.orientation==0||le.orientation==180)&&ve>Ae||Math.abs(le.orientation)==90&&Ae>ve}le.addEventListener("resize",Fe);var ye;function Fe(){if(ne){var Oe=fe.getBounds();ae=Oe.width,Ie=Oe.height,g.dispatchEvent("resize");return}ye=Date.now()+L*(O=="s"?1e3:1),Re?Pe||(Pe=!0,he=e.Ticker.update,e.tickerFrame||(e.Ticker.update=!1,e.tickerFrame=g),yt(),ot(),clearInterval(g.frameTime),g.frameTime=setInterval(function(){if(Date.now()>ye){clearInterval(g.frameTime),Pe=!1,g==e.tickerFrame&&(e.Ticker.update=he);return}yt(),ot()},50)):(yt(),ot(),clearInterval(g.frameTime),g.frameTime=setInterval(function(){if(Date.now()>ye){clearInterval(g.frameTime);return}yt(),ot()},L*(O=="s"?1e3:1)<50?L*(O=="s"?1e3:1)+5:50))}g.loadAssetsCount=0,n(e.assets)&&(e.assets={},e.assetIDs={});var De=[];De[0]="h",De[1]="c",De[2]="o",De[3]="p",De[4]="e";var ke=!1;function oe(){if(be)return;if(be=!0,ue.indexOf(t)==-1){if(_e=t,n(vn(_e))){lt("Frame - scaling: HTML tag with id="+t+" must exist");return}Se=g.tag=vn(_e),g.scaling=t=n(r)||n(i)?"tag":"inline",R.indexOf("myCanvas")==0&&(R=_e+"Canvas"),Se.tagName.toLowerCase()=="canvas"&&(ke=!0,R=_e)}else g.scaling=t;g.canvasID=R,n(r)&&(r=500),n(i)&&(i=500),ae=r,Ie=i,n(l)||(g.outerColor=l),We(),st(),x?(S&&setTimeout(function(){le.scrollTo(0,0)},50),setTimeout(Oe,100),L*(O=="s"?1e3:1)!=100&&setTimeout(Oe,L*(O=="s"?1e3:1))):(ie=!0,Ge());function Oe(){yt(),ie=!0,Ge(),ot(),fe&&fe.update()}if(n(p))pe=!0,Ge();else{var je;p.constructor=={}.constructor&&!(p.audioSprite||p.id||p.data||p.src)?je=g.loadAssets(e.merge(p,{progress:w,queueOnly:!0})):je=g.loadAssets({assets:p,path:v,progress:w,queueOnly:!0}),n(je)||!je.on?(Ct&&lt("Frame() - load failed"),pe=!0,Ge()):je.on("complete",function(){pe=!0,Ge()})}}function Ge(){if(ie&&pe&&!xe)if(fe.width>=1&&fe.height>=1){if(!n(w)&&w.show&&w.hide(),g==le.zdf&&(le.S=fe,le.W=fe.width,le.H=fe.height),c&&typeof c=="function"&&c(g,fe,fe.width,fe.height),!g)return;if(b&&typeof b=="function"){var Oe=0;if(!g)return;g.updateID=e.Ticker.add(function(){b(++Oe,g,fe,fe.width,fe.height)}),g.pauseTicker=function(je){n(je)&&(je=!0),je?e.Ticker.remove(g.updateID):e.Ticker.add(g.updateID)}}g.dispatchEvent("ready"),xe=!0,ot(),fe.update()}else setTimeout(function(){yt(),Ge()},50)}function We(){var Oe;ke?Oe=g.canvas=g.tag:(Oe=g.canvas=document.createElement("canvas"),Oe.setAttribute("id",R)),Oe.setAttribute("tabindex",0);var je=e.windowWidth(),gt=e.windowHeight(),nt=le.devicePixelRatio||1;t=="full"||t=="tag"?q?(g.scale=nt,Oe.setAttribute("width",je*g.scale),Oe.setAttribute("height",gt*g.scale),t=="full"&&(Oe.style.width=je+"px",Oe.style.height=gt+"px")):(Oe.setAttribute("width",je),Oe.setAttribute("height",gt)):(Oe.setAttribute("width",ae),Oe.setAttribute("height",Ie));var ht=vn(R+"Alternative");ht&&Oe.appendChild(ht),ke||(t=="tag"||t=="inline"?Se.appendChild(Oe):document.body.appendChild(Oe)),n(o)||(Oe.style.backgroundColor=o),t=="full"||t=="fit"||t=="fill"?(Oe.style.position="absolute",G||(document.body.style.overflow="hidden")):getComputedStyle(Oe.parentElement).position=="static"&&(Oe.parentElement.style.position="relative"),Oe.addEventListener("pointerdown",function(xt){Oe.setPointerCapture(xt.pointerId),g.dispatchEvent(xt)}),Oe.addEventListener("pointerup",function(xt){Oe.releasePointerCapture(xt.pointerId),g.dispatchEvent(xt)}),Oe.addEventListener("pointermove",function(xt){g.dispatchEvent(xt)}),Oe.addEventListener("pointerenter",function(xt){g.dispatchEvent(xt)}),Oe.addEventListener("pointerleave",function(xt){g.dispatchEvent(xt)})}function Qe(){X&&(g.mouseX=0,g.mouseY=0,g.mousedownEvent=fe.on("stagemousedown",function(Oe){g.mouseX=Oe.stageX/e.scaX,g.mouseY=Oe.stageY/e.scaY}),g.mousemoveEvent=fe.on("stagemousemove",function(Oe){g.mouseX=Oe.stageX/e.scaX,g.mouseY=Oe.stageY/e.scaY})),le.removeEventListener("mousedown",N,!0),le.removeEventListener("mousemove",N,!0),le.removeEventListener("mouseup",N),le.addEventListener("mousedown",N,!0),le.addEventListener("mousemove",N,!0),le.addEventListener("mouseup",N)}function st(){yt(),ue.indexOf(t)!=-1&&!G&&(g.zil=kr()),g.mousedownEvent&&fe&&fe.off("stagemousedown",g.mousedownEvent),g.mousemoveEvent&&fe&&fe.off("stagemousemove",g.mousemoveEvent),fe=C?new e.StageGL(R,k):new e.Stage(R),fe.frame=g,fe.mouseMoveOutside=Z,!n(o)&&C&&fe.setClearColor(e.convertColor(o)),fe.setBounds(0,0,ae,Ie),fe.width=ae,fe.height=Ie,q&&yt(),_&&fe.enableMouseOver(T),E&&(de?$e.Touch.enable(fe,!0,G):$e.Touch.enable(fe,!1,G)),G&&(fe.preventSelection=!1),Y&&(fe.nextStage=Y.stage),W&&(fe.nextStage=W),Qe(),fe.on("stagemouseup",function(){H=!1})}function yt(){if(g){var Oe=vn(R),je=e.windowWidth(),gt=e.windowHeight(),nt,ht,xt,Et;if(te=g.orientation=je>gt?"horizontal":"vertical",te!=K&&(K=te,g.dispatchEvent("orientation")),x&&S&&setTimeout(function(){le.scrollTo(0,0)},100),!!Oe){if(t=="fit")g.scale=je/gt>=ae/Ie?gt/Ie:je/ae;else if(t=="fill")g.scale=je/gt>=ae/Ie?je/ae:gt/Ie;else if(t=="full"){Oe.style.left=Oe.style.top="0px",Oe.width=ae=je,Oe.height=Ie=gt,fe&&(fe.setBounds(0,0,ae,Ie),q?(xt=le.devicePixelRatio||1,Oe.width=je*xt,Oe.height=gt*xt,Oe.style.width=je+"px",Oe.style.height=gt+"px",g.scale=xt,fe.scaleX=fe.scaleY=g.scale):fe.scaleX=fe.scaleY=1,fe.tickOnUpdate=!1,fe.update(),fe.tickOnUpdate=!0,fe.width=ae,fe.height=Ie,C&&fe.updateViewport(ae/fe.scaleX,Ie/fe.scaleY),e.scaX=$e.stageTransformable?1:fe.scaleX,e.scaY=$e.stageTransformable?1:fe.scaleY),G||(e.scrollX(0),e.scrollY(0)),ze();return}else if(t=="tag"){ae=Se.style.width==""?Se.getAttribute("width")||Se.offsetWidth:Se.style.width,Ie=Se.style.height==""?Se.getAttribute("height")||Se.offsetHeight:Se.style.height,q?(Oe.width=ae*g.scale,Oe.height=Ie*g.scale,Oe.style.width=ae+"px",Oe.style.height=Ie+"px",fe&&(fe.scaleX=fe.scaleY=g.scale)):(fe&&(fe.scaleX=fe.scaleY=1),Oe.width=ae,Oe.height=Ie),fe&&(fe.tickOnUpdate=!1,fe.update(),fe.tickOnUpdate=!0,fe.setBounds(0,0,ae,Ie),fe.width=ae,fe.height=Ie,C&&fe.updateViewport(ae/fe.scaleX,Ie/fe.scaleY),e.scaX=$e.stageTransformable?1:fe.scaleX,e.scaY=$e.stageTransformable?1:fe.scaleY),Se.style.overflow="hidden",Oe.style.left=Oe.style.top="0px",Et=Oe.getBoundingClientRect(),g.x=Et.x+e.scrollX(),g.y=Et.y+e.scrollY(),ze();return}else if(t=="inline"){if(q){if(document.styleSheets[0])try{for(var ft=document.styleSheets[0].rules||document.styleSheets[0].cssRules,Lt=0;Lt<ft.length;Lt++){var wt=ft[Lt];if(wt.selectorText=="#"+R){var St=wt.style.getPropertyValue("width");if(St){var Ft=Fn(Oe.style.width),Xt=Fn(Oe.style.height);Oe.style.width=St}}}}catch(rt){+function(){}()}var Ot=le.getComputedStyle(Oe),jt=Fn(Ot.getPropertyValue("width"));Ft&&(Oe.style.height=Xt*jt/Ft+"px",Ot=le.getComputedStyle(Oe));var Zt=Fn(Ot.getPropertyValue("height"));xt=le.devicePixelRatio||1,g.scale=jt/r*xt,Oe.width=ae*g.scale,Oe.height=Ie*g.scale,Oe.style.width=jt+"px",Oe.style.height=Zt+"px",fe&&(fe.scaleX=fe.scaleY=g.scale)}else fe&&(fe.scaleX=fe.scaleY=1);fe&&(fe.tickOnUpdate=!1,fe.update(),fe.tickOnUpdate=!0,fe.setBounds(0,0,ae,Ie),fe.width=ae,fe.height=Ie,C&&fe.updateViewport(ae/fe.scaleX,Ie/fe.scaleY),e.scaX=$e.stageTransformable?1:fe.scaleX,e.scaY=$e.stageTransformable?1:fe.scaleY),Oe.style.left=Oe.style.top="0px",Et=Oe.getBoundingClientRect(),g.x=Et.x+e.scrollX(),g.y=Et.y+e.scrollY(),ze();return}ht=Ie*g.scale,nt=ae*g.scale,q?(xt=le.devicePixelRatio||1,g.scale*=xt,Oe.width=ae*g.scale,Oe.height=Ie*g.scale,Oe.style.width=ae*g.scale/xt+"px",Oe.style.height=Ie*g.scale/xt+"px",fe&&(fe.scaleX=fe.scaleY=g.scale)):(fe&&(fe.scaleX=fe.scaleY=1),Oe.style.width=nt+"px",Oe.style.height=ht+"px"),fe&&(fe.tickOnUpdate=!1,fe.update(),fe.tickOnUpdate=!0),P=="left"?g.x=0:P=="right"?g.x=je-nt:g.x=(je-nt)/2,A=="top"?g.y=0:A=="bottom"?g.y=gt-ht:g.y=(gt-ht)/2,Oe.style.left=g.x+"px",Oe.style.top=g.y+"px",G||(e.scrollX(0),e.scrollY(0)),ze(),fe&&(e.scaX=$e.stageTransformable?1:fe.scaleX,e.scaY=$e.stageTransformable?1:fe.scaleY)}}}var Le=De.reverse().join("");this.update=function(){yt(),g.dispatchEvent("update")};function ze(){if(t=="fill"){var Oe=(Fn(g.canvas.style.width)-e.windowWidth())/2;P=="left"?(g.visibleLeft=0,g.visibleRight=e.windowWidth()/(e.windowWidth()+Oe*2)*ae):P=="right"?(g.visibleLeft=Oe*2/(e.windowWidth()+Oe*2)*ae,g.visibleRight=ae):(g.visibleLeft=Oe/(e.windowWidth()+Oe*2)*ae,g.visibleRight=(e.windowWidth()+Oe)/(e.windowWidth()+Oe*2)*ae);var je=(Fn(g.canvas.style.height)-e.windowHeight())/2;A=="top"?(g.visibleTop=0,g.visibleBottom=e.windowHeight()/(e.windowHeight()+je*2)*Ie):A=="bottom"?(g.visibleTop=je*2/(e.windowHeight()+je*2)*Ie,g.visibleBottom=Ie):(g.visibleTop=je/(e.windowHeight()+je*2)*Ie,g.visibleBottom=(e.windowHeight()+je)/(e.windowHeight()+je*2)*Ie)}else g.visibleLeft=g.visibleTop=0,g.visibleRight=ae,g.visibleBottom=Ie}function ot(){if(!(!xe||!g)){g==le.zdf&&(le.W=g.width,le.H=g.height),g.dispatchEvent("resize");var Oe=new Date().getTime();setTimeout(function(){new Date().getTime()-Oe>80&&(yt(),g==le.zdf&&(le.W=g.width,le.H=g.height),setTimeout(function(){g.dispatchEvent("resize"),!e.OPTIMIZE&&(Mt||!le.OPTIMIZE)&&fe&&(t=="full"||t=="tag")&&fe.update()},100))},100),!e.OPTIMIZE&&(Mt||!le.OPTIMIZE)&&fe&&(t=="full"||t=="tag")&&fe.update()}}setTimeout(function(){g&&g.dispatchEvent("orientation")},250);var Ce=["ttf","otf","woff2","woff","fnt"];d[Le]=function(){var gt=d.now(),Oe=Math.floor(gt/1e3%10),je=(je=gt.toString()).substring(0,je.length-2)+(10+Oe-3)%10+je.substring(je.length-1),gt=Math.floor(gt/1e4%10);return je=(je=je.substring(0,je.length-1)+(gt+1)%10).substring(0,je.length-3)+(Oe+gt+3)%10+je.substring(je.length-2),Number(je)},this.loadAssets=function(Oe,je,gt,nt,ht,xt,Et,ft,Lt,wt,St,Ft){if(n(Oe))return Zt();if(n(Oe.src)){var Xt="assets, path, progress, xhr, time, loadTimeout, outputAudioSprite, crossOrigin, fileType, queueOnly, maxConnections, maxNum",Ot;if(Ot=vt(g.loadAssets,arguments,Xt))return Ot}n(je)||(le.PATH=je);var jt=y(ht||null);if(!n(gt)&&gt.type=="ProgressBar"&&n(nt)&&(nt=!0),Array.isArray(Oe)||(Oe=[Oe]),Oe.length==0)return Zt();function Zt(){var qt=new e.Queue;return qt.isLoading=!1,qt.loadAssetsCount=0,setTimeout(function(){qt.dispatchEvent("complete"),g.dispatchEvent("complete")},10),qt}n(ht)&&(ht=0),n(xt)&&(xt=jt=="s"?8:8e3),n(Et)&&(Et=!1),n(ft)&&(ft="anonymous"),n(wt)&&(wt=!1),n(St)&&(St=V),n(Ft)&&(Ft=g.maxNum);var rt=!1,At=[],mt,Rt,Dt,Ht,Vt,Pt=/\.([^.]+)$/i,Bt=[],Kt=[],Gt=[],rn=0,cn=!0;for(Dt=0;Dt<Oe.length;Dt++){if(mt=Oe[Dt],mt.assets){var ln=[];for(Oe.splice(Dt,1),Array.isArray(mt.assets)||(mt.assets=[mt.assets]),Ht=0;Ht<mt.assets.length;Ht++){var Jt=mt.assets[Ht];if(Jt.split){var It=Jt.split("?");Rt=It[0].match(Pt)}Rt&&Ce.indexOf(Rt[1])>=0?Bt.push(Jt):Jt.match&&Jt.match(/fonts\.googleapis\.com/i)?Kt.push(Jt):Jt.font?(Jt.src?Jt.src=mt.path+Jt.src:Jt.font=mt.path+Jt.font,Bt.push(Jt)):e.assetIDs[Jt]?ln.push({id:mt.path+Jt,src:mt.path+Jt,path:null,loadTimeout:mt.loadTimeout,maxNum:mt.maxNum,noCORSonImage:mt.noCORSonImage}):ln.push({id:Jt,src:Jt,path:mt.path,loadTimeout:mt.loadTimeout,maxNum:mt.maxNum,noCORSonImage:mt.noCORSonImage})}for(var tt=ln.length-1;tt>=0;tt--)Oe.splice(Dt,0,ln[tt]);if(mt=ln[0],mt==null)continue}if(mt.constructor=={}.constructor){var _t=0;for(var $t in mt)_t++;_t==1&&mt.src&&!mt.src.match(/fonts\.googleapis\.com/i)&&(mt=mt.src)}var Wt;if(mt.constructor=={}.constructor)if(mt.audioSprite){Vt=e.copy(mt),mt=Vt.src,En(mt);var on=[],en;for(Ht=0;Ht<Vt.audioSprite.length;Ht++)en=Vt.audioSprite[Ht],on.push({id:en[0],startTime:Math.round(en[1]*1e3),duration:Math.round((en[2]-en[1])*1e3)});delete Vt.audioSprite,Vt.data={audioSprite:on},At.push(Vt)}else if(mt.data&&mt.data.audioSprite)Vt=e.copy(mt),mt=Vt.src,En(mt),At.push(Vt);else if(mt.id){if(mt.path){var un,bt;if(mt.path.match(/http/i))mt.src=mt.path+mt.src;else if(mt.path.match(/^\//))un=le.location.href,bt=un.match(/(.*?)([^/])\/[^/]/),un=bt[1]+bt[2],mt.src=un+mt.path+mt.src;else{var Ut=le.location.pathname;un=le.location.href;var tn=un.split(Ut)[0]+Ut;bt=tn.match(/(.*)\//),mt.src=bt[1]+"/"+mt.path+mt.src}delete mt.path}if(mt.noCORSonImage){var _n=new Image;Gt.push(_n),_n.src=mt.src,_n.id=mt.id;var nn;_n.onload=function(qt){var Qt=qt.currentTarget,an=e.assets[Qt.id]=new e.Bitmap({image:Qt,style:!1}).expand(0);nn=new $e.Event("assetload"),an&&typeof an!="string"&&typeof an!="number"&&(an.file=Qt.id,an.src=Qt.src),nn.asset=an,sn.dispatchEvent(nn),wt||(nn=new $e.Event("assetload"),nn.asset=an,g.dispatchEvent(nn)),sn.loadAssetsCount--,sn.loadAssetsCount==0&&Vn()}}else{e.assetIDs[mt.id]=mt.src;var Dn=mt.maxNum;n(Dn)&&(Dn=Ft);var Pn=mt.type,qn=n(mt.loadTimeout)?xt:mt.loadTimeout;mt=mt.src,En(mt),Wt={src:mt,loadTimeout:qn*(jt=="s"?1e3:1),data:Dn,type:Pn},n(Lt)||(Wt.type=Lt),At.push(Wt)}}else mt.src&&mt.src.match(/fonts\.googleapis\.com/i)?Kt.push(mt):Bt.push(mt);else{var Qn=En(mt);Qn&&Ce.indexOf(Qn[1])>=0?(Bt.push(mt),rn--):mt.match(/fonts\.googleapis\.com/i)?(Kt.push(mt),rn--):(Wt={src:mt,loadTimeout:xt*(jt=="s"?1e3:1),data:Ft},n(Lt)||(Wt.type=Lt),At.push(Wt))}if(rt&&cn){var Zn=document.createElement("audio");Zn.setAttribute("src",(!n(je)&&!mt.match(/^http:\/\/|https:\/\//i)?je:"")+mt),document.body.appendChild(Zn),cn=!1}}function En(qt){if(Rt=null,qt.split){var Qt=qt.split("?");Rt=Qt[0].match(Pt),Rt&&$e.Sound.SUPPORTED_EXTENSIONS.indexOf(Rt[1])>=0&&(rt=!0)}return rn++,Rt}g.loadAssetsCount++,g.isLoading=!0;var sn=new e.Queue;sn.isLoading=!0,sn.loadAssetsCount=0,!n(gt)&&gt.show&&(gt.zimActiveLoader=sn,gt.show());var mn;if(Bt.length>0){var Rn=[],wn,zt;for(Dt=0;Dt<Bt.length;Dt++){if(zt=Bt[Dt],zt.font&&!zt.src){zt.src=zt.font,zt.font=zt.font.split(".")[0];var Gn=zt.font.split("/");zt.font=Gn[Gn.length-1]}typeof zt=="string"&&(zt={font:zt.split(".")[0],src:zt}),wn={src:"url("+(zt.src.match(/\//i)?"":je||"")+zt.src+")"+(zt.type?" format('"+zt.type+"')":""),family:zt.font},zt.weight&&(wn.weight=zt.weight),zt.style&&(wn.style=zt.style),Rn.push(wn)}mn=new $e.FontLoader({src:Rn},!0),mn.on("complete",Un),mn.on("error",Un),mn.load(),sn.loadAssetsCount++}if(Kt.length>0)for(Dt=0;Dt<Kt.length;Dt++)zt=Kt[Dt],typeof zt=="string"&&(zt={src:zt}),wn={src:zt.src,type:"fontcss"},sn.loadAssetsCount++,mn=new $e.FontLoader(wn,!0),mn.on("complete",Un),mn.on("error",Un),mn.load();function Un(){sn.loadAssetsCount--,sn.loadAssetsCount==0&&Vn()}if(Gt.length>0)for(Dt=0;Dt<Gt.length;Dt++)sn.loadAssetsCount++;function hr(qt,Qt){sn.loadAssetsCount--;var an=Qt.item,pn=e.assets[an.id]=qt;pn.src=an.src,pn.file=an.id,pn.item=an,pn.svg=Qt.svg;var Tn=new $e.Event("assetload");Tn.item=an,Tn.asset=pn,pn.type="SVG",sn.dispatchEvent(Tn),wt||(Tn=new $e.Event("assetload"),Tn.item=an,Tn.asset=pn,g.dispatchEvent(Tn)),sn.loadAssetsCount==0&&Vn()}var Kn=Date.now(),Jn=new $e.Event("complete");if(rn>0){sn.loadAssetsCount++;var Sn=sn.preload=g.preload=new $e.LoadQueue(nt,je,ft);St!=1&&Sn.setMaxConnections(St),rt&&Sn.installPlugin($e.Sound),Sn.on("progress",function(qt){sn.dispatchEvent(qt),wt||g.dispatchEvent(qt)}),Sn.on("error",function(qt){sn.dispatchEvent(qt),wt||g.dispatchEvent(qt)}),Sn.on("fileload",function(qt){if(!qt.result||(qt.result.nodeName=="IMG"||qt.result.nodeName=="SVG")&&!qt.rawResult){var Qt=new $e.Event("error");Qt=new $e.Event("error"),Qt.item=qt.item,sn.dispatchEvent(Qt),Qt=new $e.Event("error"),Qt.item=qt.item,g.dispatchEvent(Qt)}else{var an=qt.item,pn=qt.item.type,Tn=an.id.match(Pt),dn;if(pn&&pn=="sound"){var xn=[];if(an.data&&an.data.audioSprite)for(var Bn=0;Bn<an.data.audioSprite.length;Bn++)xn.push(an.data.audioSprite[Bn].id);else xn.push(an.id);for(Bn=0;Bn<xn.length;Bn++)~function(){var Xn=xn[Bn],dr=qt.item.src,pr=qt.item;dn=e.assets[Xn]={type:"sound",path:je,id:Xn,file:Xn,src:dr,item:pr,dispose:function(){delete e.assets[Xn],dn=null},play:function(gr,vr,In,$n,rr,jn,ir){var zn="volume, loop, loopCount, pan, offset, delay, interrupt",Hn;if(Hn=vt(e.assets[Xn].play,arguments,zn))return Hn;var An={volume:gr,loop:vr,loopCount:In,pan:$n,offset:rr,delay:jn,interrupt:ir},sr=y(An.offset,null,30);sr=="s"&&(An.offset&&(An.offset*=1e3),An.delay&&(An.delay*=1e3)),An.loop===!0&&(An.loop=-1),An.loopCount&&(An.loop=An.loopCount,delete An.loopCount);var ar=$e.Sound.play(Xn,An);return ar.getStage=function(){return fe},ar.dispose=function(){ar.destroy()},ar}}}()}else if(pn=="image")qt.result.width&&(dn=e.assets[an.id]=new e.Bitmap({image:qt.result,width:qt.result.width,height:qt.result.height,style:!1}),an.avoidCORS&&dn.expand(0));else if(pn=="svg"){sn.loadAssetsCount++,e.svgToBitmap(qt.result,hr,null,null,{svg:qt.result,item:an,type:pn,ext:Tn});return}else dn=e.assets[an.id]=qt.result;dn&&typeof dn!="string"&&typeof dn!="number"&&pn!="json"&&pn!="xml"&&(dn.file=qt.item.id,dn.src=qt.item.src,dn.item=qt.item),Qt=new $e.Event("assetload"),Qt.item=an,Qt.asset=dn,sn.dispatchEvent(Qt),wt||(Qt=new $e.Event("assetload"),Qt.item=an,Qt.asset=dn,g.dispatchEvent(Qt))}}),g.preloadEvent=Sn.on("complete",function(qt){Jn=qt,sn.loadAssetsCount--,sn.loadAssetsCount==0&&Vn()});try{Sn.loadManifest(At)}catch(qt){+function(){}()}}function Vn(){var qt=Date.now();ht=Math.max(0,ht-(qt-Kn)),setTimeout(function(){g.loadAssetsCount--,g.loadAssetsCount<=0&&(g.isLoading=!1),sn.isLoading=!1,sn.dispatchEvent(Jn),!n(gt)&&gt.show&&gt.hide(),wt||g.dispatchEvent(Jn)},ht*(jt=="s"?1e3:1))}return sn},this.ac=function(Oe,je,gt){gt?(gt.commands||(gt.commands=[]),gt.commands.push([Oe,je,gt])):(je[0].commands||(je[0].commands=[]),je[0].commands.push([Oe,je]))},e.asset=this.asset=function(Oe,je,gt,nt,ht){if(!n(Oe)){Oe=ct(Oe);var xt=e.assetIDs[Oe];if(xt&&(Oe=xt),e.assets[Oe]&&(!e.assets[Oe].type||e.assets[Oe].type&&e.assets[Oe].type.substr(0,2)!="AC"))return e.assets[Oe];if(le.PATH!=null&&(e.PATH=le.PATH),ht){var Et;return g.loadFailObj=="circles"?Et=g.makeCircles(14):Et=g.loadFailObj,Et&&(Et.type="EmptyAsset",Et.id=Oe,Et.play=function(){if(Ct)return lt("Frame - asset("+Oe+") not found"),{}}),Et}else{var ft=new e.Container(je,gt);e.assets[Oe]=ft,je&&gt?ft.type="ACWD":ft.type="AC";var Lt=g.loadAssets({assets:Oe,path:Oe.split("/").length==1?e.PATH:null,queueOnly:!0,maxNum:nt}),wt=Oe.split(".");return $e.Sound.SUPPORTED_EXTENSIONS.indexOf(wt[wt.length-1])>=0&&(ft.play=function(){return ft.playParams=arguments,ft.proxy=new $e.EventDispatcher,Object.defineProperty(ft.proxy,"volume",{get:function(){return ft.sound?ft.sound.volume:null},set:function(St){ft.volume=St,ft.sound&&(ft.sound.volume=St)}}),Object.defineProperty(ft.proxy,"pan",{get:function(){return ft.sound?ft.sound.pan:null},set:function(St){ft.pan=St,ft.sound&&(ft.sound.pan=St)}}),ft.proxy}),Lt.on("complete",function(){Oe.id?Oe=Oe.id:Oe.src&&(Oe=Oe.src);var St=g.asset(Oe,null,null,null,!0),Ft=Oe.split("."),Xt;if($e.Sound.SUPPORTED_EXTENSIONS.indexOf(Ft[Ft.length-1])>=0)ft.play=St.play,ft.type="Sound",ft.src=St.src,ft.item=St.item,ft.playParams&&(ft.sound=ft.play.apply(null,ft.playParams),ft.volume!=null&&(ft.sound.volume=ft.volume),ft.pan!=null&&(ft.sound.pan=ft.pan),ft.sound.on("complete",function(){ft.proxy.dispatchEvent("complete")}));else if(St.type=="Bitmap"||St.type=="Image"||St.type=="Pic"){if(St.type=="Bitmap"?(St.addTo(ft),ft.bitmap=St,ft.image=St.image,ft.id=St.id,ft.item=St.item):(ft.bitmap=St.getChildAt(0).clone(),ft.bitmap.addTo(ft),ft.image=ft.bitmap.image,ft.id=ft.bitmap.id,ft.item=ft.bitmap.item),ft.mouseChildren=!1,ft.type="Image",ft.commands)for(Xt=0;Xt<ft.commands.length;Xt++)ft.commands[Xt][2]?ft[ft.commands[Xt][0]].apply(ft,ft.commands[Xt][1]):e[ft.commands[Xt][0]].apply(ft,ft.commands[Xt][1]);ft.commands=null,ft.stage&&ft.stage.update()}else if(St.type=="EmptyAsset"){if(St.addTo(ft),ft.mouseChildren=!1,ft.type="EmptyAsset",ft.commands)for(Xt=0;Xt<ft.commands.length;Xt++)ft.commands[Xt][2]?ft[ft.commands[Xt][0]].apply(ft,ft.commands[Xt][1]):e[ft.commands[Xt][0]].apply(ft,ft.commands[Xt][1]);ft.commands=null,ft.stage&&ft.stage.update()}else if(St.type=="SVG"){if(St.addTo(ft),ft.mouseChildren=!1,ft.type="SVG",ft.bitmap=St,ft.svg=St.svg,ft.commands)for(Xt=0;Xt<ft.commands.length;Xt++)ft.commands[Xt][2]?ft[ft.commands[Xt][0]].apply(ft,ft.commands[Xt][1]):e[ft.commands[Xt][0]].apply(ft,ft.commands[Xt][1]);ft.commands=null,ft.stage&&ft.stage.update()}e.assets[Oe]=ft,ft.dispatchEvent("assetLoad"),ft.dispatchEvent("complete")}),Lt.on("error",function(St){var Ft=new $e.Event("error");Ft.id=St.id,Ft.item=St.item,ft.dispatchEvent(Ft)}),ft}}},e.asset.getIDs=function(){var Oe=[];for(var je in e.assetIDs)Oe.push(je);return Oe},e.image=function(Oe,je,gt,nt,ht){return Oe.match(/^htt/i)&&(Oe="https://cors.zimjs.com/"+Oe),e.asset(Oe,je,gt,nt,ht)},e.zimObjectIDs={},e.object=this.object=function(Oe){return e.zimObjectIDs[Oe]},e.object.getNames=function(){var Oe=[];for(var je in e.zimObjectIDs)Oe.push(je);return Oe},le.zns||(le.asset=this.asset,le.image=e.image,le.object=this.object),this.setDefault=function(){return le.zimDefaultFrame=le.zdf=le.F=g,le.S=fe,le.W=fe.width,le.H=fe.height,g},Object.defineProperty(g,"isDefault",{get:function(){return le.zdf==g},set:function(){lt("Frame(): isDefault is read only - see setDefault()")}}),Object.defineProperty(g,"stage",{get:function(){return fe},set:function(){lt("Frame(): stage is read only - see remakeCanvas(), perhaps")}}),Object.defineProperty(g,"width",{get:function(){return ae},set:function(){lt("Frame(): width is read only - see remakeCanvas(), perhaps")}}),Object.defineProperty(g,"height",{get:function(){return Ie},set:function(){lt("Frame(): height is read only - see remakeCanvas(), perhaps")}}),Object.defineProperty(this,"color",{get:function(){return o},set:function(Oe){o=Oe,n(Oe)?g.canvas.style.backgroundColor="default":(g.canvas.style.backgroundColor=o,!n(o)&&C&&fe.setClearColor(e.convertColor(o)))}});var me;Object.defineProperty(this,"outerColor",{get:function(){return me},set:function(Oe){me=Oe,cr("body").css({backgroundColor:me})}}),Object.defineProperty(g,"allowDefault",{get:function(){return G},set:function(Oe){Oe?(fe.preventSelection=!1,document.body.style.overflow="visible",g.zil&&(le.removeEventListener("keydown",g.zil[0]),le.removeEventListener("wheel",g.zil[1]),le.removeEventListener("DOMMouseScroll",g.zil[2]),g.zil=null)):(fe.preventSelection=!0,fe.enableDOMEvents(!0),(t=="full"||t=="fit"||t=="fill")&&(document.body.style.overflow="hidden"),n(g.zil)&&(g.zil=kr())),G=Oe,fe.__touch&&(fe.__touch.preventDefault=!G)}});var Ke;Object.defineProperty(g,"cursors",{get:function(){return Ke},set:function(Oe){Ke=Oe&&Oe.constructor=={}.constructor?Oe:null,Ke?ut(Ke):et()}}),g.cursorTypes=["none","auto","pointer","text","wait","crosshair","default","help","move","progress","e-resize","ne-resize","nw-resize","n-resize","se-resize","sw-resize","s-resize","w-resize","context-menu","cell","vertical-text","alias","copy","no-drop","not-allowed","ew-resize","ns-resize","nesw-resize","nwse-resize","col-resize","row-resize","all-scroll","grab","grabbing","zoom-in","zoom-out"],g.cursorList=new e.Dictionary(!0);function ut(Oe){e.loop(Oe,function(ht,xt){xt.noMouse&&xt.noMouse()}),g.pme&&et(),e.loop(g.cursorList,function(ht){!ht._cursor&&ht.cursor&&Oe[ht.cursor]&&(ht._cursor=ht.cursor,g.cursorList.add(ht,ht._cursor),ht.cursor="none")}),Oe.default&&(document.body.style.cursor="none"),g.pme=g.on("pointermove",function(ht){g.cursorObj&&(g.cursorObj.x=g.mouseX,g.cursorObj.y=g.mouseY,g.cursorObj.top(),e.Ticker.isUpdating(g.stage)||g.stage.update())});var je=!1;if(g.mouseX!=0&&g.mouseY!=0){je=!0;var gt=g.stage.getObjectUnderPoint(g.mouseX,g.mouseY,1);gt&&(gt._cursor||gt.cursor)?nt(gt):Oe.default?(qe("none"),Oe.default.x=g.mouseX,Oe.default.y=g.mouseY,g.cursorObj=Oe.default,Oe.default.addTo(g.stage)):qe(),g.stage.update()}g.pee=g.on("pointerenter",function(ht){if(je){je=!1;return}setTimeout(function(){var xt=g.stage.getObjectUnderPoint(g.mouseX,g.mouseY,1);xt&&(xt._cursor||xt.cursor)||(Oe.default?(qe("none"),Oe.default.x=g.mouseX,Oe.default.y=g.mouseY,g.cursorObj=Oe.default,Oe.default.addTo(g.stage)):qe(),g.stage.update())},50)}),g.smo=g.stage.on("mouseover",function(ht){nt(ht.target)});function nt(ht){g.cursorObj&&g.cursorObj.removeFrom();var xt=g.cursorsExclude;if(xt&&(Array.isArray(xt)||(xt=[xt]),xt.includes(ht))){ht.cursor=g.cursorTypes.includes(ht._cursor)?ht._cursor:"default";return}ht._cursor&&Oe[ht._cursor]?(g.cursorObj=Oe[ht._cursor],qe("none"),g.cursorObj.x=g.mouseX,g.cursorObj.y=g.mouseY,g.cursorObj.addTo(g.stage)):Oe.default&&(!ht.cursor||!g.cursorTypes.includes(ht.cursor))?(qe("none"),Oe.default.x=g.mouseX,Oe.default.y=g.mouseY,g.cursorObj=Oe.default,Oe.default.addTo(g.stage)):g.cursorTypes.includes(ht.cursor)||(ht.cursor="default"),g.stage.update()}g.ple=g.on("pointerdown",function(ht){g.cursorObj&&e.interval(.001,function(){g.cursorObj&&g.cursorObj.top(),g.stage.update()},2,!0)}),g.pde=g.on("pointerleave",function(ht){je=!1,g.cursorObj&&g.cursorObj.removeFrom(),g.stage.update()}),g.smu=g.stage.on("mouseout",function(ht){g.cursorObj&&g.cursorObj.removeFrom(),Oe.default?(qe("none"),Oe.default.x=g.mouseX,Oe.default.y=g.mouseY,g.cursorObj=Oe.default,Oe.default.addTo(g.stage)):qe()})}function et(){g.pme&&g.off("pointermove",g.pme),g.pee&&g.off("pointerenter",g.pee),g.ple&&g.off("pointerdown",g.ple),g.pde&&g.off("pointerleave",g.pde),g.smo&&g.stage.off("mouseover",g.smo),g.smu&&g.stage.off("mouseout",g.smu),g.pme=g.pee=g.ple=g.pde=g.smo=g.smu=null,e.loop(g.cursorList,function(Oe,je){je!==!0&&(Oe.cursor=je),Oe._cursor=null}),e.loop(g.cursorList,function(Oe){g.cursorList.add(Oe,!0)}),g.cursorObj&&(g.cursorObj.dispose(),g.cursorObj=null,g.stage.update()),qe()}function qe(Oe){Oe!="none"&&(g.cursorObj=null),g.canvas.parentElement&&(g.canvas.parentElement.style.cursor=Oe||"default")}function Ue(Oe){g.dispatchEvent(Oe)}le.addEventListener("contextmenu",Ue,!1);var Ze=new $e.Event("keydown");this.eventRemove=Ze.remove;function it(Oe){Oe.remove=g.eventRemove,g.altKey=Oe.altKey,g.ctrlKey=Oe.ctrlKey,g.metaKey=Oe.metaKey,g.shiftKey=Oe.shiftKey,g.dispatchEvent(Oe)}le.addEventListener("keydown",it);function Ve(Oe){g.altKey=Oe.altKey,g.ctrlKey=Oe.ctrlKey,g.metaKey=Oe.metaKey,g.shiftKey=Oe.shiftKey,Oe.remove=g.eventRemove,g.dispatchEvent(Oe)}le.addEventListener("keyup",Ve);function Me(Oe){g.dispatchEvent(Oe)}le.addEventListener("wheel",Me);function Ne(Oe){Oe.remove=g.eventRemove,g.dispatchEvent(Oe)}B&&le.DeviceMotionEvent&&le.addEventListener("devicemotion",Ne);function at(Oe){Oe.remove=g.eventRemove;var je=360-Oe.alpha;Math.abs(je-Je)>180-45&&Math.abs(je-Je)<180+45&&(dt=dt==0?180:0),Je=je,Oe.rotation={x:Oe.beta,y:Oe.gamma,z:(je+dt)%360},g.dispatchEvent(Oe)}if(B&&le.DeviceOrientationEvent){var Je=0,dt=0;le.addEventListener("deviceorientation",at)}this.isFullscreen=!!document.fullscreenElement,this.htmlobc=cr("html").css("backgroundColor"),this.fullscreen=function(Oe){if(n(Oe)&&(Oe=!0),Oe){if(document.fullscreenElement)return;var je=g.canvas.parent?g.canvas.parent:document.body;je.requestFullscreen?je.requestFullscreen():je.webkitRequestFullscreen?je.webkitRequestFullscreen():je.mozRequestFullscreen?je.mozRequestFullscreen():je.msRequestFullscreen&&je.msRequestFullscreen()}else{if(!document.fullscreenElement)return;document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozExitFullscreen?document.mozExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()}this.isFullscreen=Oe},document.addEventListener("fullscreenchange",function(){g.isFullscreen=!!document.fullscreenElement,document.fullscreenElement?(cr("html").css("backgroundColor",g.color),g.dispatchEvent("fullscreenenter")):(cr("html").css("backgroundColor",g.htmlobc?g.htmlobc:"transparent"),g.dispatchEvent("fullscreenexit"))}),this.remakeCanvas=function(Oe,je){if(t!="full"){n(Oe)&&(Oe=ae),n(je)&&(je=Ie),vn(R)&&vn(R).parentNode.removeChild(vn(R)),ae=Oe,Ie=je;for(var gt=[],nt=0;nt<g.stage.numChildren;nt++)gt.push(g.stage.getChildAt(nt));for(We(),st(),nt=0;nt<gt.length;nt++)g.stage.addChild(gt[nt])}},this.follow=function(Oe,je,gt,nt,ht,xt,Et,ft,Lt,wt,St,Ft,Xt,Ot){var jt="obj, boundary, damp, dampY, leftOffset, rightOffset, upOffset, downOffset, offsetDamp, offsetDampY, horizontal, vertical, borderLock, lag",Zt;if(Zt=vt(g.follow,arguments,jt))return Zt;if(g.followObj=null,g.followTicker&&e.Ticker.remove(g.followTicker),n(Oe))return;Oe.dirX=Oe.dirY=0,g.followObj=Oe,Oe.followDampX=null,Oe.followDampY=null,n(je)&&(je=new e.Boundary(0,0,g.stage.width,g.stage.height)),g.followBoundary=je,n(gt)&&(gt=.05),n(nt)&&(nt=gt),n(ht)&&(ht=0),n(xt)&&(xt=0),n(Et)&&(Et=0),n(ft)&&(ft=0),n(Lt)&&(Lt=.02),n(wt)&&(wt=Lt),n(St)&&(St=!0),n(Ft)&&(Ft=!0),n(Xt)&&(Xt=!1),n(Ot)&&(Ot=!1),Oe.parent?rt():Oe.on("added",rt);function rt(){var At=Oe.parent;g.frameBorderLock=Xt,St&&(g.followDampX=new e.Damp(At.x,gt),g.offsetDampX=new e.Damp(je.x+ht+(je.width-ht-xt)/2,Lt)),Ft&&(g.followDampY=new e.Damp(At.y,nt),g.offsetDampY=new e.Damp(je.y+Et+(je.height-Et-ft)/2,wt)),g.followTicker=e.Ticker.add(function(){var mt=g.followBoundary;if(St){var Rt=mt.x+ht+(mt.width-ht-xt)/2;g.followOffsetX=[Ot?mt.x+mt.width-ht:Rt,Rt,Ot?mt.x+ht:Rt],g.followObj&&(At.x=g.followDampX.convert(g.offsetDampX.convert(g.followOffsetX[Oe.motionController?Oe.motionController.dirX+1:1])-Oe.x))}if(Ft){var Dt=mt.y+Et+(mt.height-Et-ft)/2;g.followOffsetY=[Ot?mt.y+mt.height-ft:Dt,Dt,Ot?mt.y+Et:Dt],g.followObj&&(At.y=g.followDampY.convert(g.offsetDampY.convert(g.followOffsetY[Oe.motionController?Oe.motionController.dirY+1:1])-Oe.y))}g.frameBorderLock&&(At.x>g.followBoundary.x&&(At.x=g.followBoundary.x),At.y>g.followBoundary.y&&(At.y=g.followBoundary.y),At.x<g.followBoundary.x+g.followBoundary.width-At.width&&(At.x=g.followBoundary.x+g.followBoundary.width-At.width),At.y<g.followBoundary.y+g.followBoundary.height-At.height&&(At.y=g.followBoundary.y+g.followBoundary.height-At.height))})}return Oe},n(e.blurCheck)&&e.setBlurDetect(),this.keyboardMessage=function(Oe,je,wt,nt,ht){var xt="color, backgroundColor, message, response, percent",Et;if(Et=vt(g.keyboardMessage,arguments,xt))return Et;n(Oe)&&(Oe=e.yellow),n(je)&&(je="black"),n(wt)&&(wt="PRESS SCREEN FOR KEYBOARD CONTROL"),n(nt)&&(nt="YOU HAVE KEYBOARD CONTROL"),n(ht)&&(ht=80);function ft(){try{return window.self!==window.top}catch(Ft){return!0}}var Lt=ft();Lt&&(g.canvas.style.pointerEvents="none");var wt=new e.Label({text:wt,size:40,color:Oe,backgroundColor:je,paddingV:15,paddingH:30,shiftV:1,align:CENTER}).scaleTo(g.stage,ht).ske(10).reg(CENTER).pos(0,50,CENTER,BOTTOM);document.addEventListener("mousedown",St);function St(){Lt&&(g.canvas.style.pointerEvents="auto"),document.removeEventListener("mousedown",St),wt.text=nt,wt.animate({props:{alpha:0},wait:1,call:()=>{wt.dispose(),wt=null}}),g.stage.update()}},this.dispose=function(){g.zil&&g.zil.length&&(le.removeEventListener("keydown",g.zil[0]),le.removeEventListener("wheel",g.zil[1]),le.removeEventListener("DOMMouseScroll",g.zil[2])),ge&&ge.removeAllEventListeners(),z&&le.removeEventListener("resize",z),le.removeEventListener("resize",Fe),le.removeEventListener("contextmenu",Ue),le.removeEventListener("keydown",it),le.removeEventListener("keyup",Ve),le.removeEventListener("wheel",Me),le.removeEventListener("devicemotion",Ne),le.removeEventListener("deviceorientation",at),le.removeEventListener("mousedown",N,!0),le.removeEventListener("mousemove",N,!0),le.removeEventListener("mouseup",N),G||(document.body.style.overflow="auto"),Oe(fe);function Oe(je){if(je.dispose)je.dispose();else{if(je.removeAllEventListeners(),je.numChildren)for(var gt=je.numChildren-1;gt>=0;gt--)Oe(je.getChildAt(gt));je.parent&&je.parent.removeChild(je)}je=null}return vn(R)&&vn(R).parentNode.removeChild(vn(R)),g==e.tickerFrame&&(e.tickerFrame=null),g===le.zdf&&(le.zdf=le.S=le.W=le.H=null),fe=null,g=null,!0},this.makeCircles=function(Oe,je){n(Oe)&&(Oe=100);var gt=[e.orange,e.green,e.pink,e.blue,e.brown,e.dark],nt,ht;if(je)for(nt=new e.Container({style:!1}),nt.radius=Oe,ht=0;ht<gt.length;ht++)nt.addChild(new e.Circle(nt.radius/gt.length*(gt.length-ht),gt[ht],null,null,null,null,null,null,!1));else{nt=new e.Shape({style:!1});var xt=nt.graphics;for(nt.radius=Oe,ht=0;ht<gt.length;ht++)xt.f(gt[ht]).dc(0,0,nt.radius/gt.length*(gt.length-ht));nt.setBounds(-nt.radius,-nt.radius,nt.radius*2,nt.radius*2)}return nt},this.madeWith=function(Oe,je,gt,nt,ht,xt,Et){var ft="color, text, edges, box, slats, borderColor, borderWidth",Lt;if(Lt=vt(g.madeWith,arguments,ft))return Lt;n(Oe)&&(Oe=e.dark),n(je)&&(je="Made with ZIM");var wt=new e.Container,St=wt.icon=g.makeIcon(gt,nt,ht,xt,Et).sca(.5).alp(.92).hov(1).addTo(wt).tap(function(){St.alp(.92),St.stage.update(),nr("https://zimjs.com","_blank")});return wt.label=new e.Label(je,16,null,Oe).sca(.7).pos(0,-19,e.CENTER,e.BOTTOM,wt),wt},this.makeIcon=function(Oe,je,gt,nt,ht){var xt="edges, box, slats, borderColor, borderWidth",Et;if(Et=vt(g.makeIcon,arguments,xt))return Et;var ft=new e.Container(-20,-13,102,120).reg(-20,-13);n(Oe)&&(Oe=e.light),n(je)&&(je=e.dark),gt===!0&&(gt=[e.silver,e.silver,e.silver,e.silver,e.silver]),new e.Rectangle(ft.width,ft.height,je,nt,ht).loc(-20,-13,ft);var Lt=[[gt?gt[0]:"#E474C3","AieA0IAAgCIAmhlIEXAAIg5Bng",41.7,19.5],[gt?gt[1]:"#50C5B7","AiSAzIAnhlID+AAIg5Blg",35.3,33.2],[gt?gt[2]:"#F48E25","AiFA0IAmhnIDlAAIg5Bng",28.9,46.7],[gt?gt[3]:"#EBCD36","Ah4AzIAmhlIDLAAIg5Blg",22.4,60.5],[gt?gt[4]:"#ABD140","AhrA0IAAgFIAlhiICxAAIg5Bng",16.1,74.3],[Oe,"AlGHRIAnhnIH+AAIgbBngAlGlpIAnhnIJmAAIg5Bng",32.7,46.5]];return e.loop(Lt,function(wt){var St=new e.Shape().addTo(ft);St.graphics.f(wt[0]).p(wt[1]),St.setTransform(wt[2],wt[3])}),ft.mouseChildren=!1,ft},this.makeAbstract=function(Oe){n(Oe)&&(Oe="black");var je=[[115.8,103.55,"#4ACBEB","Am6GkIAAtHIN0AAIAAClIrZAAIAAKig"],[127.55,73.3,"#A1E543","AAjLSIAAp6IEiAAIAAJ6gAlELOIAAp2IEiAAIAAJ2gAlEihIAAowIKEAAIAAIwg"],[32.55,73.05,"#B545E4","Ak6LQIAA2fIJ1AAIAAWfg"]],gt=new e.Rectangle(200,200);e.loop(je,function(ht){var xt=new e.Shape().f(ht[2]).p(ht[3]);xt.setTransform(ht[0]+20,ht[1]+27),xt.addTo(gt)},!0);var nt=new e.Container;return gt.sca(.4).addTo(nt),nt.mouseChildren=!1,nt},this.makeCat=function(Oe){n(Oe)&&(Oe=246);var je=[[16.95,241.15,0,"black",[1.5,2,1],"AgKAhIAVhB"],[58.65,244.378,0,"#A7A7A7",[3,2,1],"AmYAAIMxAB"],[105.64,107.14,"#EF7988",0,0,"AAEArQgNAAgjghQgiggAFgIQAFgJBEgCQBEgDAGAGQAHAIgfAkQgfAlgPAAIAAAAg"],[104.84,111.34,0,"black",[1,1,1],"AABA2IAPAYQAJAPAJAGQAKAHAMAAQAbAAAXgWQAQgPAVghQAVghAAgcQAAgnglgYQgbgSgxgCIgrACAAJADIgIAzAhphVQgXAVgMAWQgKAQgIAiQgIAkAFAMQALAfAqAOQAmANAcgIQANgEANgQQALgNAGgT"],[105.05,111.4,"#757B74",0,0,"AheBrQgvgRgQgeQgPgdAQgkQAZg8AEgFQAXgfA8gGQBVgKA+ATQBRAZgYBEQgVA/gnAZQgUAOgZAKQgJAJgVgbQgUgegCAAQgDAAgWAgQgWAUgZAAQgMAAgNgEg"],[86.18,93,"black",0,0,"Aj7g0QiYg0i9AyQA0g3BcgRQBagQBfAaQBkAbBEBBQBNBHASBpQhgiYibg0gAFxiDQAzgdA6AMQA9AMA2A4QgHgBAAACQAAAAgBABQAAAAAAAAQgBAAgBAAQAAAAgBgBQh8gshOAzQhIAvhBCYQALjABzhCg"],[78.5,63.23,"#705F6C","black",[1,1,1],"AHAg5IgNmIIBfGpQgOgQgSgMQgjgXgPASgAKeDZQg2g4g9gMQg6gMgzAdQhzBCgLDBQBBiZBIgvQBNgzB9AsQAEACAAgCQAAgCAHABgAqdBuIAAnsIDmHEQgegMgsgBQhXgChFA3gAoEDzQA0g3BdgRQBagQBeAaQBkAbBFBBQBMBIASBpQhfiYibg1QiYg0i+Ayg"],[86.28,98.01,"black","black",[1,1,1],"AJSh/QgEADgHgDQgFgBgBAFQgNBXhNA9QhTBEhagZQgGgCgPAFQgUAHgEAAQCNAeBchOQBGg7AWhigApRhnQAFABAIAAQAGABAAAAQBFBsCVA7QCpBDCrgzQACAAAHAJQAEAFAFAJQjAAzitg/Qing9g/iHg"],[96.95,97.3,"#0C0436",0,0,"AlZBJQgVgVAAgeQAAgcAVgVQAVgVAeAAQAdAAAVAVQAVAVAAAcQAAAegVAVQgVAVgdAAQgeAAgVgVgAD1AcQgVgVAAgdQAAgdAVgVQAVgVAeAAQAdAAAVAVQAVAVAAAdQAAAdgVAVQgVAVgdAAQgeAAgVgVg"],[96.88,97.2,"#EA9424",0,0,"AlpBYQgbgbAAgnQAAglAbgbQAbgbAnAAQAmAAAbAbQAbAbAAAlQAAAngbAbQgbAbgmAAQgnAAgbgbgADnArQgbgbAAgmQAAgmAbgbQAbgbAmAAQAnAAAbAbQAbAbAAAmQAAAmgbAbQgbAbgnAAQgmAAgbgbg"],[96.88,97.2,"#AFCE3A",0,0,"AlzBiQgggfAAgtQAAgrAggfQAfggAtAAQAsAAAgAgQAfAfAAArQAAAtgfAfQggAggsAAQgtAAgfgggADcA1QgfgfAAgsQAAgsAfgfQAgggAsAAQAtAAAfAgQAgAfAAAsQAAAsggAfQgfAggtAAQgsAAggggg"],[78.5,64.1,0,"black",[1,1,1],"AHAhCIgNmIIBfGpQgOgQgSgMQgjgXgPASgAKeDQQg2g4g9gMQg6gMgzAdQhzBCgLDBQCqAvBlhgQBJhFAGhagAoADiQAlgiBTgOQBYgOBaARQDrAsA0DTQjAAziog/Qihg+hAiIgAqdBlIAAnsIDmHEQgegMgsgBQhXgChFA3g"],[86.375,93.9,"#EACE35",0,0,"AltB+Qiig9g/iIQAkghBTgOQBZgPBaARQDrAtA0DRQhWAXhSAAQhkAAhcgjgADxB2QALjABzhBQAzgeA6AMQA9ANA2A4QgGBYhJBGQhEBAhiAAQgxAAg4gQg"],[73.45,154.83,"black","black",[2,1,1],"AkjjDIByAMQB/ANBEAFQB/AICXgSIgKFzQj4hflLiNQgDgBAFiag"],[79.42,123.62,"#A7A7A7","black",[2,1,1],"AEBpxIgBgBQAYiNAeiQQA8kgAfgMQAggNBLEqQAlCVAfCXIAXARQAbAXAZAcQBQBZAZBnQAZBngUB+QgKA/gPArQgeASgrAWQhYAuhFAXQg8AUh0AWIhoASIAAQzItygCQAvhKA1hoQBqjRAjiXQAri/AOjLIAFimQgegHhTgeQhEgZhgg/IhTg7QgekPgQkUQggonBEgWQBFgWCbEtQAkBGA3B9QAbA9AYA3QASAqAQAmIgjhQIABAAIJmgYIBUACIBQAK"]],gt=new e.Container(157.5,246);e.loop(je,function(ht){var xt=new e.Shape().f(ht[2]).s(ht[3]).ss(ht[4]?ht[4][0]:null,ht[4]?ht[4][1]:null,ht[4]?ht[4][2]:null).p(ht[5]);xt.setTransform(ht[0],ht[1]),xt.addTo(gt)},!0);var nt=new e.Container;return gt.sca(Oe/246).addTo(nt).mov(0,-.4),x&&nt.cache(),nt.mouseChildren=!1,nt}},e.extend(e.Frame,$e.EventDispatcher,null,"cjsEventDispatcher",!1),e.Queue=function(){this.cjsEventDispatcher_constructor(),this.type="Queue",this.isLoading=!0},e.extend(e.Queue,$e.EventDispatcher,null,"cjsEventDispatcher"),e.Pic=function(t,r,i,o,l,c,p){var v="file, width, height, noCors, style, group, inherit",w;if(w=vt(e.Pic,arguments,v,this))return w;He("83.03"),this.group=c;var b=l===!1?{}:e.getStyle("Pic",this.group,p);if(n(t)&&(t=b.file!=null?b.file:null),n(o)&&(o=b.noCors!=null?b.noCors:!1),n(t)){Ct&&lt("ZIM Pic - needs a file");return}this.zimContainer_constructor(r,i);var _=this,E=t;t=_.file=e.Pick.choose(t),r&&i?this.type="ACWD":this.type="AC";var S=o?e.image(t):e.asset(t);_.mouseChildren=!1,S.type=="Bitmap"||S.type=="Image"?(S.type=="Bitmap"?_.bitmap=S.clone().addTo(_):_.bitmap=S.getChildAt(0).clone().addTo(_),_.id=S.id,_.image=_.bitmap.image,_.src=_.bitmap.src,_.item=_.bitmap.item,_.setBounds(null),_.type="Pic",setTimeout(function(){_.dispatchEvent("ready"),_.dispatchEvent("complete")},20)):S.on("complete",function(){if(_.bitmap=S.getChildAt(0).clone().addTo(_),_.id=S.id,_.setBounds(null),_.type="Pic",_.commands)for(var P=0;P<_.commands.length;P++)_.commands[P][2]?_[_.commands[P][0]].apply(_,_.commands[P][1]):e[_.commands[P][0]].apply(_,_.commands[P][1]);_.image=_.bitmap.image,_.src=_.bitmap.src,_.item=_.bitmap.item,_.commands=null,_.dispatchEvent("ready"),_.dispatchEvent("complete"),_.stage&&_.stage.update()}),_.keyOut=function(P,A,R){return _.type=="AC"&&le.zdf?(le.zdf.ac("keyOut",arguments,_),_):(_.bitmap&&_.bitmap.keyOut(P,A,R),_.stage&&_.stage.update(),_)},e.styleTransforms(this,b),_.clone=function(P){return this.cloneProps(new e.Pic(P?t:E,r,i,o,l,this.group,p))}},e.extend(e.Pic,e.Container,["clone"],"zimContainer",!1),e.Aud=function(t,r,i,o,l,c,p,v,w,b,_,E){var S="file, volume, loop, loopCount, pan, offset, delay, interrupt, maxNum, style, group, inherit",P;if(P=vt(e.Aud,arguments,S,this))return P;He("83.05"),this.cjsEventDispatcher_constructor(),this.type="Aud",this.group=_;var A=b===!1?{}:e.getStyle(this.type,this.group,E);if(n(t)&&(t=A.file!=null?A.file:null),n(t)){Ct&&lt("ZIM Sound - needs a file");return}n(r)&&(r=A.volume!=null?A.volume:1),n(i)&&(i=A.loop!=null?A.loop:!1),n(o)&&(o=A.loopCount!=null?A.loopCount:null),n(l)&&(l=A.pan!=null?A.pan:0),n(c)&&(c=A.offset!=null?A.offset:0),n(p)&&(p=A.delay!=null?A.delay:0),n(v)&&(v=A.interrupt!=null?A.interrupt:"none"),n(w)&&(w=A.maxNum!=null?A.maxNum:null);var R=this;t=R.file=e.Pick.choose(t);var T=R.sound=e.asset(t,null,null,w);T.type=="AC"?T.on("complete",function(){R.src=T.src,R.item=T.item,R.dispatchEvent("ready"),R.dispatchEvent("complete")}):setTimeout(function(){R.src=T.src,R.item=T.item,R.dispatchEvent("ready"),R.dispatchEvent("complete")},20),R.volume=r,R.loop=i,R.loopCount=o,R.pan=l,R.offset=c,R.delay=p,R.interrupt=v,R.maxNum=w,R.play=function(L,I,C,k,Y,W,G){var F="volume, loop, loopCount, pan, offset, delay, interrupt",B;return(B=vt(R.play,arguments,F))?B:(n(L)&&(L=R.volume),n(I)&&(I=R.loop),n(C)&&(C=R.loopCount),n(k)&&(k=R.pan),n(Y)&&(Y=R.offset),n(W)&&(W=R.delay),n(G)&&(G=R.interrupt),R.sound.play(L,I,C,k,Y,W,G))},R.dispose=function(){return R.sound&&R.sound.dispose(),R.sound=null,!0}},e.extend(e.Aud,$e.EventDispatcher,null,"cjsEventDispatcher"),e.Vid=function(t,r,i,o,l,c,p,v,w,b,_,E){var S="file, width, height, scaling, volume, loop, align, valign, type, style, group, inherit",P;if(P=vt(e.Vid,arguments,S,this))return P;He("83.07"),this.group=_;var A=b===!1?{}:e.getStyle("Vid",this.group,E);if(n(t)&&(t=A.file!=null?A.file:null),n(t)){Ct&&lt("ZIM Vid - needs a file");return}n(r)&&(r=A.width!=null?A.width:null),n(i)&&(i=A.height!=null?A.height:null),n(o)&&(o="fit"),n(c)&&(c=A.loop!=null?A.loop:!0),n(l)&&(l=A.volume!=null?A.volume:1),n(p)&&(p=A.align!=null?A.align:"center"),n(v)&&(v=A.valign!=null?A.valign:"center"),n(w)&&(w=A.type!=null?A.type:"video/mp4"),this.zimContainer_constructor(r,i),r&&i?this.type="ACWD":this.type="AC";var R=this,T,L=t;t=e.Pick.choose(t),R.file=t,le.PATH!=null&&(e.PATH=le.PATH);var I="";t.split("/").length==1&&e.PATH&&(I=e.PATH),this.mouseChildren=!1;var C=R.source=document.createElement("video");document.body.appendChild(C),C.style.display="none",C.setAttribute("autoplay","autoplay"),C.setAttribute("playsinline","playsinline"),C.setAttribute("crossorigin","anonymous"),c&&C.setAttribute("loop","loop");var k=R.innerSource=document.createElement("source");t.split("?").length==1&&(t+="?playsinline=1"),k.setAttribute("src",I+t),k.setAttribute("type",w),C.appendChild(k),W();var Y=0;function W(){Y++>5&&R.dispatchEvent("error"),C.addEventListener("stalled",W),C.addEventListener("error",W),C.addEventListener("canplay",G)}function G(){R.type="Vid",C.removeEventListener("stalled",W),C.removeEventListener("error",W),C.removeEventListener("canplay",G),C.pause();var F=C.videoWidth,B=C.videoHeight;if(R.setBounds(0,0,r||F,i||B),T=R.bitmap=new e.Bitmap(C,F,B).addTo(R),T.setBounds(0,0,F,B),T.scaleTo(R,100,100,o).pos(0,0,p,v,R),R.commands)for(var q=0;q<R.commands.length;q++)R.commands[q][2]?R[R.commands[q][0]].apply(R,R.commands[q][1]):e[R.commands[q][0]].apply(R,R.commands[q][1]);R.commands=null,R.dispatchEvent("ready")}R.videoPaused=!0,R.play=function(){if(!T){Ct&&lt("ZIM Vid - no file found");return}if(C.play(),C.volume=l,R.videoPaused=!1,!R.ticker)if(R.keyObj){var F=R.keyObj.color,B=R.keyObj.tolerance,q=R.keyObj.replacement;R.ticker=e.Ticker.add(function(){T.keyOut(F,B,q)})}else R.ticker=e.Ticker.add(function(){});return R},R.keyOut=function(F,B,q){return R.ticker?(e.Ticker.remove(R.ticker),R.ticker=e.Ticker.add(function(){T.keyOut(F,B,q)})):R.keyObj={color:F,tolerance:B,replacement:q},R},R.pause=function(F){return n(F)&&(F=!0),R.videoPaused=F,F?C.pause():C.play(),R},Object.defineProperty(this,"duration",{get:function(){return C.duration},set:function(){}}),Object.defineProperty(this,"currentTime",{get:function(){return C.currentTime},set:function(F){C.currentTime=F}}),Object.defineProperty(this,"volume",{get:function(){return C.volume},set:function(F){l=F,C.volume=F}}),e.styleTransforms(this,A),R.clone=function(F){return this.cloneProps(new e.Vid(F?t:L,r,i,o,l,c,p,v,w,b,this.group,E))},R.dispose=function(F,B,q){this.ticker&&e.Ticker.remove(this.ticker);var Z=R.stage;return R.bitmap.dispose(),T=R.bitmap=null,C.pause(),C.removeAttribute("src"),C.load(),C.remove(),C=null,q||this.zimContainer_dispose(!0),Z&&Z.update(),!0}},e.extend(e.Vid,e.Container,["clone","dispose"],"zimContainer",!1),e.SVG=function(t,r,i,o,l,c,p,v,w,b,_){var E="svg, width, height, bitmap, splitTypes, geometric, showControls, interactive, style, group, inherit",S;if(S=vt(e.SVG,arguments,E,this))return S;He("83.09"),this.group=b;var P=w===!1?{}:e.getStyle("SVG",this.group,_);if(n(t)&&(t=P.svg!=null?P.svg:null),n(t)){Ct&&lt("ZIM SVG - needs a svg value");return}n(o)&&(o=P.bitmap!=null?P.bitmap:!0),n(l)&&(l=P.splitTypes!=null?P.splitTypes:!1),n(c)&&(c=P.geometric!=null?P.geometric:!0),n(p)&&(p=P.showControls!=null?P.showControls:!0),n(v)&&(v=P.interactive!=null?P.interactive:!0),this.zimContainer_constructor(r,i);var A=this;o&&(this.mouseChildren=!1);var R=t;t=e.Pick.choose(t),r&&i?this.type="ACWD":this.type="AC";var T=e.assets[t];if(T&&(A.src=T.src,A.file=T.file,A.item=T.item,A.svg=T.svg),T&&T.type=="Bitmap")A.type="SVG",A.bitmap=T.clone(),I();else if(T&&T.type=="AC")T.on("complete",function(){A.type="SVG",A.bitmap=T.bitmap.clone(),I(n(r)&&n(i))});else if(T&&T.type=="ACWB")n(r)&&n(i)&&A.setBounds(0,0,T.width,T.height),T.on("complete",function(){A.type="SVG",A.bitmap=T.bitmap.clone(),I()});else if(T&&T.type=="SVG")A.type="SVG",T.bitmap?A.bitmap=T.bitmap.clone():A.bitmap=T.clone(),I();else if(t&&t.match(/<svg/i)&&(A.svg=t),A.svg&&A.svg.match(/<svg/i))A.type="SVG",I();else{var L=e.asset(t);L.on("complete",function(){A.type="SVG",L.bitmap&&(A.src=L.bitmap.src,A.file=L.bitmap.file,A.item=L.bitmap.item,A.svg=L.bitmap.svg,A.bitmap=L.bitmap.clone()),I(n(r)&&n(i))})}function I(k){if(o)A.bitmap?(A.svg=A.bitmap.svg,A.bitmap.addTo(A),k&&C(),setTimeout(function(){A.dispatchEvent("ready"),A.dispatchEvent("complete")},20)):e.svgToBitmap(A.svg,function(G){A.bitmap=G,A.bitmap.addTo(A),C(),A.dispatchEvent("ready"),A.dispatchEvent("complete"),A.stage&&A.stage.update()});else if(A.bitmap&&(A.svg=A.bitmap.svg),t.match(/<svg/i)||T&&T.type=="SVG"||k){var Y=new e.SVGContainer(A.svg);Y.loop(function(G){G&&G.addTo(A)},!0),k&&C(),setTimeout(function(){A.dispatchEvent("ready"),A.dispatchEvent("complete")},20)}else{var W=e.asset(t);W.on("complete",function(){var G=new e.SVGContainer(W);G.loop(function(F){F&&F.addTo(A)},!0),C(),A.dispatchEvent("ready"),A.dispatchEvent("complete"),A.stage&&A.stage.update()})}}function C(){if(n(r)&&n(i)&&A.setBounds(null),A.type="SVG",A.commands)for(var k=0;k<A.commands.length;k++)A.commands[k][2]?A[A.commands[k][0]].apply(A,A.commands[k][1]):e[A.commands[k][0]].apply(A,A.commands[k][1]);A.commands=null}A.keyOut=function(k,Y,W){return A.type=="AC"&&le.zdf?(le.zdf.ac("keyOut",arguments,A),A):(A.bitmap&&A.bitmap.keyOut(k,Y,W),A.stage&&A.stage.update(),A)},e.styleTransforms(this,P),A.clone=function(k){return this.cloneProps(new e.SVG(k?t:R,r,i,o,l,c,p,v,w,this.group,_))}},e.extend(e.SVG,e.Container,["clone"],"zimContainer",!1),e.SensorAsk=function(t,r,i,o,l,c,p){var v="callback, sensorType, color, backgroundColor, style, group, inherit",w;if(w=vt(e.SensorAsk,arguments,v,this))return w;He("83.01"),this.group=c;var b=l===!1?{}:e.getStyle("SensorAsk",this.group,p);if(n(r)&&(r=b.sensorType!=null?b.sensorType:"deviceorientation"),r!="devicemotion"&&(r="deviceorientation"),this.sensorType=r,!n(t)){n(i)&&(i=b.color!=null?b.color:e.dark),n(o)&&(o=b.backgroundColor!=null?b.backgroundColor:e.lighter),this.zimPane_constructor("",o,i,200,200,!1,null,!0,100,black.toAlpha(.3),null,null,null,!1,!1),this.type="SensorAsk";var _=this;if(Style.addGroup("sensorAsk",{width:100,color:i,rollColor:o,corner:10,backgroundColor:e.faint,rollBackgroundColor:i,borderColor:i,borderWidth:2}),_.yes=new e.Button({label:"YES",group:"sensorAsk"}).sca(.65).pos(0,30,CENTER,TOP,this).tap(function(){_.hide(!0);var S=DeviceMotionEvent;r!="devicemotion"&&(S=DeviceOrientationEvent),S.requestPermission().then(function(P){P!="denied"?t(!0):t(!1)})}),_.label=new e.Label("Use sensor?",null,null,i,null,null,null,"center").sca(.9).centerReg(this),_.no=new e.Button({label:"NO",group:"sensorAsk"}).sca(.65).pos(0,30,CENTER,BOTTOM,this).tap(function(){_.hide(!1),t(!1)}),new e.Circle(110,e.clear,i,1).center(this).alp(.8),new e.Circle(120,e.clear,i,1).center(this).alp(.5),new e.Circle(130,e.clear,i,1).center(this).alp(.2),e.styleTransforms(this,b),typeof DeviceOrientationEvent<"u"&&DeviceOrientationEvent&&typeof DeviceOrientationEvent.requestPermission=="function")_.show();else{let S=function(P){r=="deviceorientation"?P.alpha==null||P.alpha==0&&P.beta==0&&P.gamma==0?t(!1):t(!0):!P.acceleration||P.acceleration.x==null||P.acceleration.x==0&&P.acceleration.y==0&&P.acceleration.z==0?t(!1):t(!0),E=!0,le.removeEventListener(r,S)};var E=!1;le.addEventListener(r,S),setTimeout(function(){E||t(!1)},100)}}},e.extend(e.SensorAsk,e.Pane,null,"zimPane",!1),e.colorsHex=["#fb4758","#f58e25","#ebcb35","#acd241","#50c4b7","#993399","#e472c4","#d1a170","#000000","#111111","#222222","#333333","#444444","#555555","#555555","#666666","#777777","#888888","#999999","#aaaaaa","#bbbbbb","#cccccc","#dddddd","#eeeeee","#ffffff","rgba(0,0,0,.01)","rgba(0,0,0,0)"],e.colors=["red","orange","yellow","green","blue","purple","pink","brown","black","licorice","darker","dark","charcoal","grey","gray","granite","tin","pewter","silver","fog","mist","light","moon","lighter","white","faint","clear"],Cn=0;Cn<e.colors.length;Cn++)e[e.colors[Cn]]=e.colorsHex[Cn];return String.prototype.darken=function(t){return e.darken(this,t)},String.prototype.lighten=function(t){return e.lighten(this,t)},String.prototype.toColor=function(t,r){return e.toColor(this,t,r)},String.prototype.toAlpha=function(t){return e.toAlpha(this,t)},e.FIT="fit",e.FILL="fill",e.FULL="full",e.LEFT="left",e.RIGHT="right",e.CENTER="center",e.MIDDLE="middle",e.START="start",e.END="end",e.TOP="top",e.BOTTOM="bottom",e.HORIZONTAL="horizontal",e.VERTICAL="vertical",e.BOTH="both",e.RADIAL="radial",e.UP="up",e.DOWN="down",e.NEXT="next",e.PREV="prev",e.AUTO="auto",e.AVE="ave",e.DEFAULT="default",e.ALL="all",e.NONE="none",e.GET="get",e.POST="post",e.LOCALSTORAGE="localStorage",e.SOCKET="socket",e.TO="to",e.FROM="from",e.SINE="sine",e.SQUARE="square",e.TRIANGLE="triangle",e.SAW="saw",e.SAWTOOTH="saw",e.ZAP="zap",e.DISTILL=!1,e.distillery=[],e.distill=function(){!le.zns&&e&&(e.DISTILL||le.DISTILL)&&e.distillery.push("83.3","83.35");function t(r,i,o){return o.indexOf(r)===i}e.distillery.length>0?(e.distillery=e.distillery.filter(t),lt("zim.distill() - go to https://zimjs.com/distill and enter the following:"),Nn(e.distillery.join(" "))):lt("must set zim.DISTILL = true;")},e.parseAudioSprite=function(t,r){if(He("83.25"),!(n(t)||n(t.resources)||n(t.spritemap))){var i=t,o=i.resources[0],l=i.spritemap,c=[],p,v={src:o,data:{}};for(var w in l)p=l[w],c.push({id:w,startTime:Math.round(p.start*1e3),duration:Math.round((p.end-p.start)*1e3)});return v.data.audioSprite=c,r&&lt(JSON.stringify(v)),v}},e.previewAudioSprite=function(t,r,i){if(He("83.26"),!n(t)){if(n(r)&&(r=3),typeof i>"u"){if(n(le.zdf))return;var i=le.zdf}var o=i.width,l=t,c=[],p=[];if(l.constructor=={}.constructor)l.resources&&(l=e.parseAudioSprite(l)),l.audioSprite?e.loop(l.audioSprite,function(w){c.push(w[0].substr(0,r)),p.push(w[0])}):l.data&&l.data.audioSprite&&e.loop(l.data.audioSprite,function(w){c.push(w.id.substr(0,r)),p.push(w.id)});else return;var v=new e.Tabs({tabs:c,width:o,currentEnabled:!0}).addTo();return v.on("change",function(){i.asset(p[v.selectedIndex]).play()}),v}},e.svgToBitmap=function(t,r,i,o,l){if(He("83.27"),!n(t.draggable)){var c=new DOMParser;t=t.innerHTML?c.parseFromString(t.innerHTML,"text/xml"):t;var p=t.getElementsByTagName("svg"),v=p?t.getElementsByTagName("svg")[0]:null;t=v}if(!XMLSerializer&&Ct){lt("ZIM svgToBitmap() - sorry, not supported in Browser");return}var w=typeof t=="string"?t:new XMLSerializer().serializeToString(t);if(w){var b=w.split(">")[0];if(b.length>1){var _=b.split(/width/i);if(_.length==1){var E=100,S=100,P=b.split(/viewBox/i);if(P.length>1){var A=P[1].split('"')[1];if(A){var R=A.split(" ");R.length>1&&(E=R[R.length-2],S=R[R.length-1])}}w=w.replace(/svg /i,'svg  width="'+E+'" height="'+S+'" ')}}w.match(/xmlns/i)||(w=w.replace(/svg /i,"svg  xmlns='http://www.w3.org/2000/svg' "))}var T=self.URL||self.webkitURL||self,L=new Image;L.onload=function(){var C=new e.Bitmap(L,i,o);r(C,l),T.revokeObjectURL(I)};var I=T.createObjectURL(new document.Blob([w],{type:"image/svg+xml"}));L.src=I},e.makeContent=function(t,r,i){He("83.29");var o;if(n(i)&&(i=e.dark),typeof t=="string"||typeof t=="number")t=this.message=new e.Label(t,null,null,i);else if(t.constructor=={}.constructor){var l=t;l.buttonScale||(l.buttonScale=.5),n(l.spacingH)&&(l.spacingH=20*l.buttonScale),n(l.spacingV)&&(l.spacingV=20);var c=l.spacingH,p=l.spacingV;l.align||(l.align="center"),t=new e.Container;var v=new Ur(10,p).addTo(t);if(l.header&&l.header.pos(0,p,"left","top",t),l.message)var w=new e.Label(l.message,null,null,n(l.color)?i:l.color).loc(0,t.height+(l.header?p:0),t);if(l.display&&l.display.pos(0,-l.display.height-(l.header||l.message?p:0),"left","bottom",t),l.buttons){Array.isArray(l.buttons)||(l.buttons=[l.buttons]);for(var b=l.length*100,_=new e.Container().loc(0,t.height+(l.header||l.message||l.display?p:0),t),E=0;E<l.buttons.length;E++){var S=l.buttons[E],P=S.call||function(){};S.button||(S.button=new e.Button({width:S.width,label:S.label,backgroundColor:S.backgroundColor||S.bgColor,color:S.color,rollBackgroundColor:S.rollBackgroundColor||S.rollBgColor,rollColor:S.rollColor})),S.button.call=P,S.button.sca(l.buttonScale).loc(E==0?0:_.width+c,0,_).tap(function(R){R.target.call(R.target)})}}for(o=0;o<t.numChildren;o++){var A=t.getChildAt(o);A.lastY=A.y,l.align=="center"?A.center(t).loc(null,A.lastY):l.align=="right"&&A.pos(0,null,"right")}if(r&&typeof r=="number"&&(t.width=Math.min(t.width,r-c*2-(l.scrollBar===!0?12:l.scrollBar>0?l.scrollBar:0))),new e.Container(10,p).pos(0,-v.height,"center","bottom",t).bot(),v.top(),t.config=l,t.header=l.header,t.message=w,t.text=l.message,t.display=l.display,l.buttons)for(t.buttons=[],o=0;o<_.numChildren;o++)t.buttons.push(_.getChildAt(o))}return t},e}(Ee||{});function He(e){Ee&&(Ee.DISTILL||le.DISTILL)&&Ee.distillery.push(e)}function Yn(e,y,a,u,f,m){if(He("83.3"),e&&e.noDrag)return e;m!==!0&&(m=null);var D={drag:function(Te,t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,T){return hn(arguments)?(arguments[0].obj=this,Ee.drag(arguments[0])):Ee.drag(this,Te,t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,T)},noDrag:function(Te){return Ee.noDrag(this,Te)},mouse:function(){return Ee.mouse(this)},noMouse:function(){return Ee.noMouse(this)},effect:function(Te,t,r,i,o){return Ee.effect(this,Te,t,r,i,o)},noEffect:function(Te,t){return Ee.noEffect(this,Te,t)},updateEffects:function(Te){return Ee.updateEffects(this,Te)},wire:function(Te,t,r,i,o,l,c){return hn(arguments)?(arguments[0].source=this,Ee.wire(arguments[0])):Ee.wire(this,Te,t,r,i,o,l,c)},noWire:function(Te,t,r){return hn(arguments)?(arguments[0].source=this,Ee.noWire(arguments[0])):Ee.noWire(this,Te,t,r)},wired:function(Te,t,r,i,o,l,c){return hn(arguments)?(arguments[0].target=this,Ee.wired(arguments[0])):Ee.wired(this,Te,t,r,i,o,l,c)},noWired:function(Te,t,r){return hn(arguments)?(arguments[0].target=this,Ee.noWired(arguments[0])):Ee.noWired(this,Te,t,r)},bind:function(Te,t,r,i,o){return hn(arguments)?(arguments[0].obj=this,Ee.bind(arguments[0])):Ee.bind(this,Te,t,r,i,o)},noBind:function(Te,t,r,i){return hn(arguments)?(arguments[0].obj=this,Ee.noBind(arguments[0])):Ee.noBind(this,Te,t,r,i)},dragBoundary:function(Te){return Ee.dragBoundary(this,Te)},dragRect:function(Te){return Ee.dragBoundary(this,Te)},transform:function(Te,t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,T,L,I,C,k,Y,W,G,F,B,q){return hn(arguments)?(arguments[0].obj=this,Ee.transform(arguments[0])):Ee.transform(this,Te,t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,T,L,I,C,k,Y,W,G,F,B,q)},setSwipe:function(Te){return Ee.setSwipe(this,Te)},gesture:function(Te,t,r,i,o,l,c,p,v,w,b,_,E,S,P){return hn(arguments)?(arguments[0].obj=this,Ee.gesture(arguments[0])):Ee.gesture(this,Te,t,r,i,o,l,c,p,v,w,b,_,E,S,P)},noGesture:function(Te,t,r){return hn(arguments)?(arguments[0].obj=this,Ee.noGesture(arguments[0])):Ee.noGesture(this,Te,t,r)},gestureBoundary:function(Te,t){return Ee.gestureBoundary(this,Te,t)},gestureRect:function(Te,t){return Ee.gestureBoundary(this,Te,t)},addPhysics:function(Te,t,r,i,o,l,c,p,v,w,b){return hn(arguments)?(arguments[0].obj=this,Ee.addPhysics(arguments[0])):Ee.addPhysics(this,Te,t,r,i,o,l,c,p,v,w,b)},removePhysics:function(){return Ee.removePhysics(this)},hitTestPoint:function(Te,t,r){return Ee.hitTestPoint(this,Te,t,r)},hitTestReg:function(Te,t){return Ee.hitTestReg(this,Te,t)},hitTestRect:function(Te,t,r,i){return Ee.hitTestRect(this,Te,t,r,i)},hitTestCircle:function(Te,t,r,i){return Ee.hitTestCircle(this,Te,t,r,i)},hitTestCircleRect:function(Te,t){return Ee.hitTestCircleRect(this,Te,t)},hitTestCircles:function(Te,t){return Ee.hitTestCircles(this,Te,t)},hitTestBounds:function(Te,t,r){return Ee.hitTestBounds(this,Te,t,r)},boundsToGlobal:function(Te,t,r,i){return Ee.boundsToGlobal(this,Te,t,r,i)},resetBounds:function(Te,t,r,i,o){return hn(arguments)?(arguments[0].obj=this,Ee.resetBounds(arguments[0])):Ee.resetBounds(this,Te,t,r,i,o)},hitTestPath:function(Te,t,r,i,o){return Ee.hitTestPath(this,Te,t,r,i,o)},hitTestGrid:function(Te,t,r,i,o,l,c,p,v,w,b,_){return Ee.hitTestGrid(this,Te,t,r,i,o,l,c,p,v,w,b,_)},animate:function(Te,t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,T,L,I,C,k,Y,W,G,F,B,q,Z,X,ne,$,re,de,Q,U,g,d,h,x,j,O,V,ce,H,N,ue,fe,ae,Ie,ge,Be,z){return Te&&(Te.props||Te.obj)&&hn(arguments)?(arguments[0].target=this,Ee.animate(arguments[0])):Ee.animate(this,Te,t,r,i,o,l,c,p,v,w,b,_,E,S,P,A,R,T,L,I,C,k,Y,W,G,F,B,q,Z,X,ne,$,re,de,Q,U,g,d,h,x,j,O,V,ce,H,N,ue,fe,ae,Ie,ge,Be,z)},pauseAnimate:function(){return this},stopAnimate:function(){return this},wiggle:function(Te,t,r,i,o,l,c,p,v,w,b,_,E,S,P){return hn(arguments)?(arguments[0].target=this,Ee.wiggle(arguments[0])):Ee.wiggle(this,Te,t,r,i,o,l,c,p,v,w,b,_,E,S,P)},loop:function(Te,t,r,i,o,l,c,p){return Ee.loop(this,Te,t,r,i,o,l,c,p)},copyMatrix:function(Te){return Ee.copyMatrix(this,Te)},duplicate:function(Te){return Ee.duplicate(this,Te)},cur:function(Te){return Ee.cur(this,Te)},sha:function(Te,t,r,i){return Ee.sha(this,Te,t,r,i)},pos:function(Te,t,r,i,o,l,c,p,v,w){return hn(arguments)?(arguments[0].obj=this,Ee.pos(arguments[0])):Ee.pos(this,Te,t,r,i,o,l,c,p,v,w)},loc:function(Te,t,r,i,o,l,c){return hn(arguments)?(arguments[0].obj=this,Ee.loc(arguments[0])):Ee.loc(this,Te,t,r,i,o,l,c)},mov:function(Te,t){return hn(arguments)?(arguments[0].obj=this,Ee.mov(arguments[0])):Ee.mov(this,Te,t)},top:function(){return Ee.top(this)},bot:function(){return Ee.bot(this)},ord:function(Te){return Ee.ord(this,Te)},dep:function(Te){return Ee.dep(this,Te)},nam:function(Te){return Ee.nam(this,Te)},alp:function(Te){return Ee.alp(this,Te)},vis:function(Te){return Ee.vis(this,Te)},ble:function(Te){return Ee.ble(this,Te)},dye:function(Te){return Ee.dye(this,Te)},hov:function(Te,t){return Ee.hov(this,Te,t)},rot:function(Te,t,r){return Ee.rot(this,Te,t,r)},siz:function(Te,t,r){return Ee.siz(this,Te,t,r)},ske:function(Te,t){return Ee.ske(this,Te,t)},reg:function(Te,t,r){return Ee.reg(this,Te,t,r)},sca:function(Te,t){return Ee.sca(this,Te,t)},scaleTo:function(Te,t,r,i,o){return hn(arguments)?(arguments[0].obj=this,Ee.scaleTo(arguments[0])):Ee.scaleTo(this,Te,t,r,i,o)},fit:function(Te,t,r,i,o){return hn(arguments)?(arguments[0].obj=this,Ee.fit(arguments[0])):Ee.fit(this,Te,t,r,i,o)},outline:function(Te,t,r){return hn(arguments)?(arguments[0].obj=this,Ee.outline(arguments[0])):Ee.outline(this,Te,t,r)},blendmodes:function(Te){return Ee.blendmodes(this,Te)},addTo:function(Te,t,r){return hn(arguments)?(arguments[0].obj=this,Ee.addTo(arguments[0])):Ee.addTo(this,Te,t,r)},removeFrom:function(Te){return Ee.removeFrom(this,Te)},added:function(Te,t,r){return Ee.added(this,Te,t,r)},movement:function(Te,t){return Ee.movement(this,Te,t)},noMovement:function(){return Ee.noMovement(this)},tap:function(Te,t,r,i,o,l,c,p,v){return hn(arguments)?(arguments[0].obj=this,Ee.tap(arguments[0])):Ee.tap(this,Te,t,r,i,o,l,c,p,v)},noTap:function(){return Ee.noTap(this)},hold:function(Te,t,r,i){return Ee.hold(this,Te,t,r,i)},noHold:function(){return Ee.noHold(this)},change:function(Te,t){return Ee.change(this,Te,t)},noChange:function(){return Ee.noChange(this)},centerReg:function(Te,t,r){return hn(arguments)?(arguments[0].obj=this,Ee.centerReg(arguments[0])):Ee.centerReg(this,Te,t,r)},center:function(Te,t,r){return hn(arguments)?(arguments[0].obj=this,Ee.center(arguments[0])):Ee.center(this,Te,t,r)},place:function(Te){return Ee.place(this,Te)},placeReg:function(Te){return Ee.placeReg(this,Te)},expand:function(Te,t,r,i){return hn(arguments)?(arguments[0].obj=this,Ee.expand(arguments[0])):Ee.expand(this,Te,t,r,i)},setMask:function(Te,t){return Ee.setMask(this,Te,t)},cloneProps:function(Te){return Te.type=this.type,Te.group=this.group,Te.style=this.style,Te.alpha=this.alpha,Te.rotation=this.rotation,Te.mouseEnabled=this.mouseEnabled,Te.mouseChildren=this.mouseChildren,Te.tickEnabled=this.tickEnabled,Te.x=this.x,Te.y=this.y,Te.scaleX=this.scaleX,Te.scaleY=this.scaleY,Te.skewX=this.skewX,Te.skewY=this.skewY,Te.name&&(Te.name=this.name),Te.regX=this.regX*Te.width/(this.width||1),Te.regY=this.regY*Te.height/(this.height||1),Te.visible=this.visible,Te.shadow=this.shadow,(!this.type||this.type=="Shape")&&Ee.copyMatrix(Te,this),Te.compositeOperation=this.compositeOperation,Te.snapToPixel=this.snapToPixel,this.filters&&this.filters.length>0&&(Te.filters=this.filters.slice(0),Te.cache()),Te.mask=this.mask,Te.hitArea=this.hitArea,(!this.type||this.type=="Shape"||this.type=="Blob"||this.type=="Squiggle")&&this._bounds&&Te.setBounds(this._bounds.x,this._bounds.y,this._bounds.width,this._bounds.height),Te},cloneChildren:function(Te,t){Te.children.length&&Te.removeAllChildren();for(var r=Te.children,i=0,o=this.children.length;i<o;i++){var l=this.children[i].clone(t);l.parent=Te,r.push(l)}return Te}};if(!n(m)){m=[];for(var J in D)m.push(J);return m}for(var se in D)Object.prototype.hasOwnProperty.call(D,se)&&(e[se]=D[se]);if(Ee&&(e.cjsLocalToGlobal=e.localToGlobal,e.cjsGlobalToLocal=e.globalToLocal,e.cjsLocalToLocal=e.localToLocal,e.localToGlobal=function(Te,t){return Ee.localToGlobal(Te,t,e,e.cjsLocalToGlobal)},e.globalToLocal=function(Te,t){return Ee.globalToLocal(Te,t,e,e.cjsGlobalToLocal)},e.localToLocal=function(Te,t,r){return Ee.localToLocal(Te,t,r,e)},e.hueBatch||Ee.displayBase(e)),!n(y)&&!n(a)&&!n(u)&&!n(f)?y=y:!n(y)&&!n(a)&&(u=y,f=a,y=0,a=0),!n(y)&&!n(a)&&!n(u)&&!n(f))e.setBounds(y,a,u,f);else if(e.nominalBounds!=null&&e.getBounds&&e.getBounds()==null){var we=e.nominalBounds;e.setBounds(we.x,we.y,we.width,we.height)}return e.parent&&e.parent.actionFrames&&!e.parent.addPhysics&&Yn(e.parent,zdf?zdf.width:null,zdf?zdf.height:null),e}var gi;function Kr(e){He("83.35"),document.Window=Window,document.Blob=Blob,gi="ignore",n(e)&&(e=[]),Array.isArray(e)||(e=[e]);var y=Yn(null,null,null,null,null,!0),a=["loop","stopAnimate","pauseAnimate","animate","wiggle","wire","wired"];for(var u in Ee)(y.indexOf(u)==-1||a.indexOf(u)>=0)&&e.indexOf(u)==-1&&(window[u]=Ee[u])}Ee.fastFrame=function(e,y){if(He("83.355"),$e=e,n(le.zdf))return y.frame=new Ee.Frame({shim:{stage:y,canvas:y.canvas}}),le.zimDefaultFrame=le.zdf=y.frame,Ee.scaX=$e.stageTransformable?1:y.scaleX,Ee.scaY=$e.stageTransformable?1:y.scaleY,y.frame};Ee.addWires=function(e){return He("83.365"),e.wire=function(){return Array.prototype.unshift.call(arguments,e),Ee.wire.apply(null,arguments),e},e.noWire=function(){return Array.prototype.unshift.call(arguments,e),Ee.noWire.apply(null,arguments),e},e.wired=function(){return Array.prototype.unshift.call(arguments,e),Ee.wired.apply(null,arguments),e},e.noWired=function(){return Array.prototype.unshift.call(arguments,e),Ee.noWired.apply(null,arguments),e},e};Ee.setBlurDetect=function(){He("83.36"),Ee.blurCheck=!0,Ee.pauseAnimateOnBlur=!0,Ee.pauseOnBlur=[],Ee.blurDetect=function(){var e,y,a={hidden:"visibilitychange",webkitHidden:"webkitvisibilitychange",mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychange"};for(e in a)if(e in document){y=a[e];break}return function(u){return u&&document.addEventListener(y,u),!document[e]}}(),Ee.blurDetect(function(){var e,y,a;if(Ee.blurDetect())setTimeout(function(){if(Ee.pauseOnBlur)for(e=0;e<Ee.pauseOnBlur.length;e++)y=Ee.pauseOnBlur[e],y.pauseOnBlurPaused||y.pause(!1);if(Ee.pauseAnimateOnBlur&&Ee.animatedObjects)for(e=0;e<Ee.animatedObjects.objects.length;e++){y=Ee.animatedObjects.objects[e];var u=Ee.copy(y.tweenStates);if(!y.tweenStates)y.pauseAnimate(!1);else if(n(u.all)||u.all){if(y.pauseAnimate(!1),!y.dynamicAnimation)for(a in u)a!="all"&&u[a]===!1&&y.pauseAnimate(!0,a)}else{y.pauseAnimate(!0);for(a in u)a!="all"&&u[a]&&y.pauseAnimate(!1,a)}y.type=="Sprite"&&(y.paused=!0)}},300),le.zdf&&le.zdf.dispatchEvent("tabfocus");else{if(Ee.pauseOnBlur)for(e=0;e<Ee.pauseOnBlur.length;e++)y=Ee.pauseOnBlur[e],y.pauseOnBlurPaused=y.paused,y.pause(!0);Ee.pauseAnimateOnBlur&&Ee.animatedObjects&&Ee.pauseAnimate(!0,"pauseOnBlur"),le.zdf&&le.zdf.dispatchEvent("tabblur")}})};var Jr=!1;Ee=function(e){e.ZIMON={stringify:function(a,u){if(He("83.39"),n(a))return;if(!Jr){Ct&&lt("ZIMON - set ZIMONON=true before using ZIMON.stringify()");return}return a=e.copy(a),f(a),JSON.stringify({obj:a,key:u,zimon:1,info:"https://zimjs.com/zimon/"});function f(m,D,J){if(!n(m))if(Array.isArray(m))e.loop(m,function(we,Te){f(we,m,Te)});else if(m.constructor=={}.constructor)e.loop(m,function(we,Te){f(Te,m,we)});else if(m.type){var se={zimon:m.type};m.arguments&&(se.args=Array.prototype.slice.call(m.arguments),f(se.args)),m.type=="series"&&(se.args=Array.prototype.slice.call(m.array),f(se.args)),u&&u[m.type]&&u[m.type].props&&(se.props=[],e.loop(u[m.type].props,function(we){se.props.push(m[we])})),D?D[J]=se:a=se}else typeof m!="string"&&typeof m!="number"&&typeof m!="boolean"&&m!==null&&Ct&&lt("ZIMON - potentially bad JSON value"+m)}},parse:function(a,u){if(He("83.39"),n(a))return;var f=JSON.parse(a),m=f.obj;return u=f.key,J(m),m;function D(se){try{return Function("return("+se+")")()}catch(we){return Ct&&lt("ZIMON - bad function scope or name: "+se),null}}function J(se,we,Te){if(!n(se)){if(Array.isArray(se))e.loop(se,function(c,p){J(c,se,p)});else if(n(se.zimon)&&se.constructor=={}.constructor)e.loop(se,function(c,p){J(p,se,c)});else if(se.zimon){var t=se.zimon,r="";u&&(u[t]&&u[t].scope?r=u[t].scope+".":u.scope&&(r=u.scope+"."));var i=D(r+t),o=se.args;n(o)&&(o=[]),J(o);var l;se.type=="series"?l=e.series(o):l=i?new(i.bind.apply(i,[null].concat(Array.prototype.slice.call(o)))):null,we?we[Te]=l:m=l,u&&u[t]&&u[t].props&&l&&e.loop(u[t].props,function(c,p){n(se.props[p])||(l[c]=se.props[p])})}}}}},e.Wonder=function(a,u,f,m,D){var J="wid, client, app, notes, server",se;if(se=vt(e.Wonder,arguments,J,this))return se;if(He("82"),n(a)){lt("zim.Wonder() - please provide Wonder ID (see https://zimjs.com/wonder/)");return}n(D)&&(D="https://wonder.zimjs.org/wonder");var we=this;n(e.wonderSession)&&(e.wonderSession="W"+e.rand(1e5,999999));var Te=[],t=setInterval(i,1e3),r=0;function i(){Te.length>0&&(e.async(D+"?wonder="+JSON.stringify(Te)),Te=[],r++)}var o,l=setInterval(function(){r>28&&(Te.push({id:a,c:u,a:f,n:m,k:o,t:"e",v:"frequency max - terminated",s:e.wonderSession}),lt("zim.Wonder() - frequency max - terminated"),we.dispose()),r=0},30*1e3);this.countsOff={},this.timesOff={},this.ordersOff={};function c(w,b){return n(w)?(lt("zim.Wonder "+b+" - please provide a keyword"),!1):!we[b+"sOff"][w]}this.count=function(w){c(w,"count")&&(o=w,Te.push({id:a,c:u,a:f,n:m,k:w,t:"c",v:1,s:e.wonderSession}))};var p={};this.timeStart=function(w){c(w,"time")&&(we.timeEnd(w),o=w,p[w]=new Date().getTime())};var v={};this.timePause=function(w){c(w,"time")&&(v[w]||(v[w]=new Date().getTime()))},this.timeUnpause=function(w){if(c(w,"time")&&v[w]){var b=new Date().getTime()-v[w];p[w]&&(p[w]+=b),delete v[w]}},this.timeEnd=function(w){if(c(w,"time")&&p[w]){var b=v[w]?v[w]:new Date().getTime(),_=Math.round((b-p[w])/1e3);delete v[w],delete p[w],Te.push({id:a,c:u,a:f,n:m,k:w,t:"t",v:_,s:e.wonderSession})}},this.order=function(w,b){if(c(w,"order")){if(o=w,n(b)){lt("zim.Wonder order() - please provide an item");return}Te.push({id:a,c:u,a:f,n:m,k:w,t:"o",v:b,s:e.wonderSession})}},this.countOff=function(w){we.countsOff[w]=1},this.countOn=function(w){delete we.countOff[w]},this.timeOff=function(w){we.timesOff[w]=1},this.timeOn=function(w){delete we.timesOff[w]},this.orderOff=function(w){we.ordersOff[w]=1},this.orderOn=function(w){delete we.ordersOff[w]},this.dispose=function(){return i(),clearInterval(t),clearInterval(l),!0}},e.VERSION="014/zim",e.getLatestVersions=function(a){He("82.2");var u="https://zimjs.com/live/getLatestVersions.php";function f(m){a(JSON.parse(m))}e.async(u,f,"returnLatestVersions")},typeof $e<"u"&&(e.PWA=function(a,u,f,m,D,J,se){var we="call, label, backgroundColor, color, backdropColor, pane, noScale",Te;if(Te=vt(e.PWA,arguments,we,this))return Te;He("82.4"),this.cjsEventDispatcher_constructor(),this.type="PWA";var t,r=this,i=le.M=="ios"?"In Safari, please add to\nhome screen as an app":"Please add to\nhome screen as an app";if(n(u)&&(u=new e.Label({text:i,align:e.LEFT,lineHeight:44,color:m})),n(f)&&(f=e.yellow),n(J)){J=new e.Pane({width:1200,height:230,content:u,backgroundColor:f,backdropColor:D});var o=new e.Container;new e.Shape().s(e.dark).ss(3,1,0,3).p("AAAj0IAAFJAA8hoIBuAAIAAFdIlTAAIAAldIBuAA").sca(1.7).addTo(o),new e.Shape().s(e.dark).ss(3,1,0,3).p("AhGAlIBGhGIBHBG").sca(1.7).addTo(o).mov(0,-38);var l=new e.Tile([o,u],2,1,40,0,!0);l.width>zdf.stage.width*.7&&(l.width=zdf.stage.width*.7),l.setBounds(-70,-10,480,100),o.mov(-30,35),l.center(J)}M&&!(le.matchMedia("(display-mode: standalone)").matches||le.navigator.standalone||document.referrer.includes("android-app://"))?c():(a&&a.constructor===Function&&a(),setTimeout(function(){r.dispatchEvent("ready")},20));function c(){r.pane=t=J.show(),t.on("close",function(){a&&a.constructor===Function&&a(),r.scaleEvent&&p.off("resize",r.scaleEvent),r.dispatchEvent("ready"),le.zdf.stage.update()});var p=p||le.zdf;p&&!se&&(t.scaleTo(p.stage,105).center(),(p.scaling=="full"||p.scaling=="tag")&&(r.scaleEvent=p.on("resize",function(){t.scaleTo(p.stage,105).center()})),p.stage.update())}this.show=function(){return c(),this}},e.extend(e.PWA,$e.EventDispatcher,null,"cjsEventDispatcher",!1)),e.QR=function(a,u,f,m,D,J){var se="url, color, backgroundColor, size, clickable, correctLevel",we;if(we=vt(e.QR,arguments,se,this))return we;He("82.5"),n(a)&&(a="https://zimjs.com"),n(m)&&(m=256),n(u)&&(u=e.black),n(f)&&(f=e.white),n(D)&&(D=!0),n(J)&&(J=2);var Te=document.createElement("div");if(typeof QRCode>"u"){lt("ZIM QR - needs qrcode.js library - see docs");return}var t=new QRCode(Te,{text:a,width:m,height:m,colorDark:u,colorLight:f,correctLevel:J});this.zimBitmap_constructor(t._oDrawing._oContext.canvas),D&&this.cur().on("click",function(){nr(a,"_blank")}),Te=null},e.extend(e.QR,e.Bitmap,null,"zimBitmap",!1),e.GIF=function(a,u,f,m){var D="file, width, height, startPaused",J;if(J=vt(e.GIF,arguments,D,this))return J;if(He("82.7"),typeof gifler>"u"){lt("ZIM GIF - needs gifler.js library - see docs");return}n(u)&&(u=100),n(f)&&(f=100);var se=this;se.paused=!1,this.zimBitmap_constructor(null,u,f),this.cache();var we,Te,t;if(le.PATH!=null&&(e.PATH=le.PATH),a.match(/http/)||a.match(/^\//)?t=a:t=(e.PATH?e.PATH:"")+a,se.gifler=gifler(t).animate(this.cacheCanvas).then(function(l){se.animator=l,m&&(we=setInterval(function(){se.animator.running()&&(Te=setTimeout(function(){se.animator.stop(),se.paused=!0},.1),clearInterval(we))},.05))}),!se.ticker)if(se.keyObj){var r=se.keyObj.color,i=se.keyObj.tolerance,o=se.keyObj.replacement;se.ticker=e.Ticker.add(function(){se.keyOut(r,i,o)})}else se.ticker=e.Ticker.add(function(){});se.keyOut=function(l,c,p){return se.ticker?(e.Ticker.remove(se.ticker),se.ticker=e.Ticker.add(function(){se.keyOut(l,c,p)})):se.keyObj={color:l,tolerance:c,replacement:p},se},this.pause=function(l){return n(l)&&(l=!0),se.animator&&(we&&clearInterval(we),Te&&clearTimeout(Te),l&&se.animator.running()?(se.animator.stop(),e.Ticker.remove(se.ticker)):!l&&!se.animator.running()&&(se.animator.start(),e.Ticker.add(se.ticker))),se.paused=l,se},this.stop=function(){se.dispose()},this.reset=function(){return se.animator.reset(),se.paused&&(se.animator.start(),e.Ticker.add(se.ticker)),se},this.clone=function(){return this.cloneProps(new e.GIF(a,u,f,m))},this.dispose=function(){se.animator.stop(),se.parent&&se.removeFrom(),e.Ticker.remove(se.ticker),e.gD(this)}},e.extend(e.GIF,e.Bitmap,["clone","dispose","keyOut"],"zimBitmap",!1),e.Theme={set:function(a,u,f,m,D){var J="name, lightenRatio, tint, tintRatio, exclude",se;if(se=vt(e.Theme.set,arguments,J))return se;He("82.8"),n(a)&&(a="zim");var we=a.toLowerCase();n(u)&&(u=0),f==-1&&(f=null),n(m)&&(m=0),D==-1&&(D=null),!n(D)&&!Array.isArray(D)&&(D=[D]),e.THEME=window.THEME={name:we,lightenRatio:u,tint:f,tintRatio:m,exclude:D};var Te={},t,r=e.colors.slice(0,8),i=e.colors.slice(8,25);we=="zim"?e.loop(e.colors,function(o,l){o=="clear"||o=="faint"||(Te[o]=e.colorsHex[l])}):we=="html"?(e.loop(r,function(o){Te[o]=o}),e.loop(i,function(o,l){Te[o]=e.colorsHex[l+8]})):we=="future"?(t=["f25019","fd8918","ffc955","1dcfae","00a5ab","007175","00969b","d6b361"],e.loop(r,function(o,l){Te[o]="#"+t[l]}),e.loop(i,function(o,l){Te[o]=e.colorsHex[l+8].toColor("#1dcfae",.4-l*.025)})):we=="invert"?(Te={},e.loop(e.colorsHex,function(o,l,c){if(l==c-2)return 1;Te[e.colors[l]]=e.invertColor(o)})):we=="greyscale"?(t=["222222","aaaaaa","dddddd","888888","333333","111111","777777","bbbbbb"],e.loop(r,function(o,l){Te[o]="#"+t[l]})):we=="neon"?(t=["FF3624","ff6f00","e2f705","a3f307","05f9e2","ED0AF5","ff33c9","e16d00"],e.loop(r,function(o,l){Te[o]="#"+t[l]}),e.loop(i,function(o,l){Te[o]=e.colorsHex[l+8].toColor("#000",.9)}),Te.light=e.lighter,Te.moon=e.lighter,Te.lighter=e.white,Te.white=e.white):we=="seventies"?(t=["e5771e","f4a127","ffecb4","6F8212","75c8ae","5a3d2b","956e4e","4c3607"],e.loop(r,function(o,l){Te[o]="#"+t[l]}),e.loop(i,function(o,l){Te[o]=e.colorsHex[l+8].toColor(l<8?"#344f00":"#f4a127",.8-l*.04)})):we=="warm"?(t=["965746","c07768","ffecb4","8da279","6da0b1","745c58","9a7e79","be8858"],e.loop(r,function(o,l){Te[o]="#"+t[l]}),e.loop(i,function(o,l){Te[o]=e.colorsHex[l+8].toColor(l<8?"#4e352e":"#745c58",.8-l*.05)})):we.constructor=={}.constructor&&(Te=we,e.loop(Te,function(o){e.colors.indexOf(o)==-1&&delete Te[o]})),e.loop(D,function(o){o.toLowerCase()=="colors"?e.loop(e.colors,function(l,c){if(c>=8)return 1;D.push(l)}):(o.toLowerCase()=="greys"||o.toLowerCase()=="grays")&&e.loop(e.colors,function(l,c){c<8||D.push(l)})}),e.loop(Te,function(o,l){D&&D.indexOf(o)!=-1||(f&&(l=l.toColor(f,m)),u!=0&&(l=l.lighten(u)),Mt||(window[o]=l),e[o]=l)})},apply:function(a,u,f,m,D){var J="name, lightenRatio, tint, tintRatio, exclude",se;if(se=vt(e.Theme.apply,arguments,J))return se;if(localStorage){n(a)&&(a="zim");var we=a.toLowerCase();n(u)&&(u=0),n(f)&&(f=-1),n(m)&&(m=0),n(D)?D=-1:Array.isArray(D)||(D=[D]),localStorage.setItem(y,JSON.stringify({name:we,lightenRatio:u,tint:f,tintRatio:m,exclude:D})),window.location.reload()}else lt("ZIM applyTheme() - needs localStorage")},clear:function(){localStorage&&localStorage.getItem(y)&&localStorage.removeItem(y),window.location.reload()}};var y=window.location.href.replace(/[.\/:]/g,"");return localStorage&&localStorage.getItem(y)?(e.THEME=window.THEME=JSON.parse(localStorage.getItem(y)),e.Theme.set(fr.name,fr.lightenRatio,fr.tint,fr.tintRatio,fr.exclude)):e.THEME=window.THEME=null,e}(Ee||{});var br=["zog","zid","zss","zgo","zum","zot","zop","zil","zet","zob","zik","zta","zor","zogg","zogp","zogb","zogr","zogy","zogo","zogl","zogd","zimplify","zimify"],vi=[Nn,vn,ci,nr,Fn,n,hi,kr,cr,vt,ct,di,pi,Wr,fi,qr,Qr,lt,Zr,wr,Tr,Kr,Yn];for(tr=0;tr<br.length;tr++)le[br[tr]]=Ee[br[tr]]=vi[tr];var tr;Ee.makeGlobals=function(e){Kr(e)};var wi=Ee.makeGlobals,Ti=Ee;le.zim=Ee;var Ci=Ee.chop,Ai=Ee.shuffle,Ei=Ee.pluck,Pi=Ee.rand,bi=Ee.seedRandom,ki=Ee.odds,Si=Ee.rarity,Ii=Ee.repeats,Mi=Ee.series,Oi=Ee.loop,Li=Ee.getTIME,Gr=Ee.timeout,yi=Ee.interval,Di=Ee.async,Ri=Ee.couple,Bi=Ee.decouple,Yi=Ee.convertColor,Xi=Ee.colorRange,Ni=Ee.lighten,Fi=Ee.darken,Gi=Ee.toColor,Ui=Ee.toAlpha,Vi=Ee.toBW,Hi=Ee.invertColor,Wi=Ee.zimEase,qi=Ee.spline,Qi=Ee.pointAlongCurve,Zi=Ee.distanceAlongCurve,Ki=Ee.closestPointAlongCurve,Ji=Ee.transformPoints,$i=Ee.trimEndPoints,ji=Ee.reversePoints,zi=Ee.appendPoints,es=Ee.prependPoints,ts=Ee.splitPoints,ns=Ee.makeID,rs=Ee.makeSyllable,is=Ee.makePrimitive,ss=Ee.makeMath,as=Ee.swapProperties,os=Ee.mobile,ls=Ee.vee,us=Ee.extend,fs=Ee.copy,cs=Ee.merge,hs=Ee.sortObject,ds=Ee.arraysEqual,ps=Ee.arrayMinMax,gs=Ee.isEmpty,vs=Ee.isJSON,ys=Ee.isPick,ms=Ee.decimals,xs=Ee.countDecimals,_s=Ee.sign,ws=Ee.constrain,Ts=Ee.dist,Cs=Ee.rectIntersect,As=Ee.boundsAroundPoints,Es=Ee.angle,Ps=Ee.smoothStep,bs=Ee.unicodeToUTF,ks=Ee.capitalizeFirst,Ss=Ee.Ajax,Is=Ee.Noise,Ms=Ee.Point,Os=Ee.Bezier,Ls=Ee.Boundary,Ds=Ee.GradientColor,Rs=Ee.RadialColor,Bs=Ee.BitmapColor,Ys=Ee.Damp,Xs=Ee.Proportion,Ns=Ee.ProportionDamp,Fs=Ee.Dictionary,Gs=Ee.Hierarchy,Us=Ee.Pick,Vs=Ee.scrollX,Hs=Ee.scrollY,Ws=Ee.windowWidth,qs=Ee.windowHeight,Qs=Ee.browserZoom,Zs=Ee.getQueryString,Ks=Ee.swapHTML,Js=Ee.urlEncode,$s=Ee.urlDecode,js=Ee.setCookie,zs=Ee.getCookie,ea=Ee.deleteCookie,ta=Ee.Stage,na=Ee.StageGL,Ur=Ee.Container,ra=Ee.Shape,ia=Ee.Bitmap,sa=Ee.Sprite,aa=Ee.MovieClip,oa=Ee.SVGContainer,la=Ee.CustomShape,ua=Ee.Circle,Ln=Ee.Rectangle,fa=Ee.Triangle,ca=Ee.Poly,ha=Ee.Line,da=Ee.Squiggle,pa=Ee.Flare,ga=Ee.MultiFlare,va=Ee.FlareBox,Vr=Ee.Label,ya=Ee.LabelOnPath,ma=Ee.LabelOnArc,xa=Ee.LabelLetters,_a=Ee.Emoji,wa=Ee.Button,Ta=Ee.CheckBox,Ca=Ee.RadioButtons,Aa=Ee.Toggle,Ea=Ee.Tip,Pa=Ee.Pane,ba=Ee.Panel,ka=Ee.Page,Sa=Ee.Layer,Ia=Ee.Waiter,Ma=Ee.ProgressBar,Oa=Ee.Indicator,La=Ee.TextInput,Da=Ee.List,Ra=Ee.Stepper,Ba=Ee.Slider,Ya=Ee.Selector,Xa=Ee.Dial,Na=Ee.Tabs,Fa=Ee.Pad,Ga=Ee.NumPad,Ua=Ee.DPad,Va=Ee.Radial,Ha=Ee.RadialMenu,Wa=Ee.ColorPicker,qa=Ee.EmojiPicker,Qa=Ee.TextEditor,Za=Ee.Keyboard,Ka=Ee.Organizer,Ja=Ee.Connectors,$a=Ee.Marquee,ja=Ee.Carousel,za=Ee.Loader,eo=Ee.TextArea,to=Ee.Tag,no=Ee.localToGlobal,ro=Ee.globalToLocal,io=Ee.localToLocal,so=Ee.addTo,ao=Ee.removeFrom,oo=Ee.added,lo=Ee.centerReg,uo=Ee.center,fo=Ee.place,co=Ee.placeReg,ho=Ee.pos,po=Ee.loc,go=Ee.mov,vo=Ee.sca,yo=Ee.alp,mo=Ee.vis,xo=Ee.ble,_o=Ee.dye,wo=Ee.hov,To=Ee.rot,Co=Ee.siz,Ao=Ee.ske,Eo=Ee.reg,Po=Ee.top,bo=Ee.bot,ko=Ee.ord,So=Ee.cur,Io=Ee.sha,Mo=Ee.dep,Oo=Ee.nam,Lo=Ee.movement,Do=Ee.noMovement,Ro=Ee.tap,Bo=Ee.noTap,Yo=Ee.hold,Xo=Ee.noHold,No=Ee.change,Fo=Ee.noChange,Go=Ee.drag,Uo=Ee.noDrag,Vo=Ee.dragBoundary,Ho=Ee.mouse,Wo=Ee.noMouse,qo=Ee.wire,Qo=Ee.noWire,Zo=Ee.wired,Ko=Ee.noWired,Jo=Ee.bind,$o=Ee.noBind,jo=Ee.transform,zo=Ee.gesture,el=Ee.noGesture,tl=Ee.gestureBoundary,nl=Ee.effect,rl=Ee.updateEffects,il=Ee.noEffect,sl=Ee.addPhysics,al=Ee.removePhysics,ol=Ee.hitTestPoint,ll=Ee.hitTestReg,ul=Ee.hitTestRect,fl=Ee.hitTestCircle,cl=Ee.hitTestCircleRect,hl=Ee.hitTestCircles,dl=Ee.hitTestBounds,pl=Ee.hitTestPath,gl=Ee.hitTestGrid,vl=Ee.animate,yl=Ee.stopAnimate,ml=Ee.pauseAnimate,xl=Ee.wiggle,_l=Ee.scaleTo,wl=Ee.fit,Tl=Ee.boundsToGlobal,Cl=Ee.resetBounds,Al=Ee.copyMatrix,El=Ee.duplicate,Pl=Ee.expand,bl=Ee.setSwipe,kl=Ee.setMask,Sl=Ee.outline,Il=Ee.blendmodes,Ml=Ee.Pages,Ol=Ee.Arrow,Ll=Ee.HotSpots,Dl=Ee.HotSpot,Rl=Ee.Guide,Bl=Ee.Grid,Yl=Ee.Wrapper,Hr=Ee.Tile,Xl=Ee.Pack,Nl=Ee.Beads,Fl=Ee.Layout,Gl=Ee.Accessibility,Ul=Ee.TextureActive,Vl=Ee.TextureActives,Hl=Ee.TextureActivesManager,Wl=Ee.Manager,ql=Ee.ResizeManager,Ql=Ee.TransformManager,Zl=Ee.GuideManager,Kl=Ee.GridManager,Jl=Ee.LayoutManager,$l=Ee.SelectionSet,jl=Ee.SelectionManager,zl=Ee.Bind,eu=Ee.Swipe,tu=Ee.Swiper,nu=Ee.MotionController,ru=Ee.GamePad,iu=Ee.Portal,su=Ee.Physics,au=Ee.TimeLine,ou=Ee.BlurEffect,lu=Ee.GlowEffect,uu=Ee.ShadowEffect,fu=Ee.ColorEffect,cu=Ee.MultiEffect,hu=Ee.AlphaEffect,du=Ee.Pixel,pu=Ee.Parallax,gu=Ee.Flipper,vu=Ee.Book,yu=Ee.Scrambler,mu=Ee.Scroller,xu=Ee.Dynamo,_u=Ee.Accelerator,wu=Ee.Emitter,Tu=Ee.Generator,Cu=Ee.Pen,Au=Ee.SoundWave,Eu=Ee.Synth,Pu=Ee.VR,bu=Ee.Frame,ku=Ee.Pic,Su=Ee.Aud,Iu=Ee.Vid,Mu=Ee.SVG,Ou=Ee.SensorAsk,Lu=Ee.distill,Du=Ee.parseAudioSprite,Ru=Ee.previewAudioSprite,Bu=Ee.svgToBitmap,Yu=Ee.makeContent,Xu=Ee.fastFrame,Nu=Ee.addWires,Fu=Ee.setBlurDetect,Gu=Ee.Wonder,Uu=Ee.getLatestVersions,Vu=Ee.PWA,Hu=Ee.QR,Wu=Ee.GIF,fr=Ee.THEME;})();
/*! Bundled license information:

@danzen/createjs/create.js:
  (*!
  * CreateJS
  * Visit http://createjs.com/ for documentation, updates and examples.
  *
  * Copyright (c) 2010 gskinner.com, inc.
  *
  * Permission is hereby granted, free of charge, to any person
  * obtaining a copy of this software and associated documentation
  * files (the "Software"), to deal in the Software without
  * restriction, including without limitation the rights to use,
  * copy, modify, merge, publish, distribute, sublicense, and/or sell
  * copies of the Software, and to permit persons to whom the
  * Software is furnished to do so, subject to the following
  * conditions:
  *
  * The above copyright notice and this permission notice shall be
  * included in all copies or substantial portions of the Software.
  *
  * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
  * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
  * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
  * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
  * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
  * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
  * OTHER DEALINGS IN THE SOFTWARE.
  *)
*/
